import{S as Oe,i as Fe,s as qe,B as un,k as D,a as $,l as B,m as K,h as E,c as ee,p as Ce,n as h,b as Y,F as y,C as fn,D as dn,E as hn,f as J,t as se,H as Rt,I as as,J as ue,K as Kn,e as Ae,L as jn,q as be,r as pe,u as Bt,A as Te,M as dt,N as cn,O as Gn,P as Qn,Q as ls,R as pt,T as xt,U as de,V as $t,W as xe,X as es,G as Xn,Y as st,Z as ze,_ as Ve,o as ts,g as Be,d as Ue,$ as nt,a0 as Yn,a1 as Zn,a2 as ce,v as Me,w as ke,x as we,a3 as ge,y as Se,a4 as os,a5 as gn,a6 as Jn,a7 as us,a8 as xn,a9 as bn,z as $n,aa as pn,ab as ht,ac as Mt,ad as ss,ae as ft,af as ut,ag as ei}from"../../chunks/index-a0d75c90.js";import{w as ti}from"../../chunks/index-129aa244.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mn={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,a={},l={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function d(p){return p instanceof o?new o(p.type,d(p.content),p.alias):Array.isArray(p)?p.map(d):p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(d){return Object.prototype.toString.call(d).slice(8,-1)},objId:function(d){return d.__id||Object.defineProperty(d,"__id",{value:++i}),d.__id},clone:function d(p,w){w=w||{};var v,A;switch(l.util.type(p)){case"Object":if(A=l.util.objId(p),w[A])return w[A];v={},w[A]=v;for(var W in p)p.hasOwnProperty(W)&&(v[W]=d(p[W],w));return v;case"Array":return A=l.util.objId(p),w[A]?w[A]:(v=[],w[A]=v,p.forEach(function(j,V){v[V]=d(j,w)}),v);default:return p}},getLanguage:function(d){for(;d;){var p=r.exec(d.className);if(p)return p[1].toLowerCase();d=d.parentElement}return"none"},setLanguage:function(d,p){d.className=d.className.replace(RegExp(r,"gi"),""),d.classList.add("language-"+p)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(v){var d=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(v.stack)||[])[1];if(d){var p=document.getElementsByTagName("script");for(var w in p)if(p[w].src==d)return p[w]}return null}},isActive:function(d,p,w){for(var v="no-"+p;d;){var A=d.classList;if(A.contains(p))return!0;if(A.contains(v))return!1;d=d.parentElement}return!!w}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(d,p){var w=l.util.clone(l.languages[d]);for(var v in p)w[v]=p[v];return w},insertBefore:function(d,p,w,v){v=v||l.languages;var A=v[d],W={};for(var j in A)if(A.hasOwnProperty(j)){if(j==p)for(var V in w)w.hasOwnProperty(V)&&(W[V]=w[V]);w.hasOwnProperty(j)||(W[j]=A[j])}var O=v[d];return v[d]=W,l.languages.DFS(l.languages,function(G,ie){ie===O&&G!=d&&(this[G]=W)}),W},DFS:function d(p,w,v,A){A=A||{};var W=l.util.objId;for(var j in p)if(p.hasOwnProperty(j)){w.call(p,j,p[j],v||j);var V=p[j],O=l.util.type(V);O==="Object"&&!A[W(V)]?(A[W(V)]=!0,d(V,w,null,A)):O==="Array"&&!A[W(V)]&&(A[W(V)]=!0,d(V,w,j,A))}}},plugins:{},highlightAll:function(d,p){l.highlightAllUnder(document,d,p)},highlightAllUnder:function(d,p,w){var v={callback:w,container:d,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",v),v.elements=Array.prototype.slice.apply(v.container.querySelectorAll(v.selector)),l.hooks.run("before-all-elements-highlight",v);for(var A=0,W;W=v.elements[A++];)l.highlightElement(W,p===!0,v.callback)},highlightElement:function(d,p,w){var v=l.util.getLanguage(d),A=l.languages[v];l.util.setLanguage(d,v);var W=d.parentElement;W&&W.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(W,v);var j=d.textContent,V={element:d,language:v,grammar:A,code:j};function O(ie){V.highlightedCode=ie,l.hooks.run("before-insert",V),V.element.innerHTML=V.highlightedCode,l.hooks.run("after-highlight",V),l.hooks.run("complete",V),w&&w.call(V.element)}if(l.hooks.run("before-sanity-check",V),W=V.element.parentElement,W&&W.nodeName.toLowerCase()==="pre"&&!W.hasAttribute("tabindex")&&W.setAttribute("tabindex","0"),!V.code){l.hooks.run("complete",V),w&&w.call(V.element);return}if(l.hooks.run("before-highlight",V),!V.grammar){O(l.util.encode(V.code));return}if(p&&n.Worker){var G=new Worker(l.filename);G.onmessage=function(ie){O(ie.data)},G.postMessage(JSON.stringify({language:V.language,code:V.code,immediateClose:!0}))}else O(l.highlight(V.code,V.grammar,V.language))},highlight:function(d,p,w){var v={code:d,grammar:p,language:w};if(l.hooks.run("before-tokenize",v),!v.grammar)throw new Error('The language "'+v.language+'" has no grammar.');return v.tokens=l.tokenize(v.code,v.grammar),l.hooks.run("after-tokenize",v),o.stringify(l.util.encode(v.tokens),v.language)},tokenize:function(d,p){var w=p.rest;if(w){for(var v in w)p[v]=w[v];delete p.rest}var A=new m;return c(A,A.head,d),f(d,A,p,A.head,0),q(A)},hooks:{all:{},add:function(d,p){var w=l.hooks.all;w[d]=w[d]||[],w[d].push(p)},run:function(d,p){var w=l.hooks.all[d];if(!(!w||!w.length))for(var v=0,A;A=w[v++];)A(p)}},Token:o};n.Prism=l;function o(d,p,w,v){this.type=d,this.content=p,this.alias=w,this.length=(v||"").length|0}o.stringify=function d(p,w){if(typeof p=="string")return p;if(Array.isArray(p)){var v="";return p.forEach(function(O){v+=d(O,w)}),v}var A={type:p.type,content:d(p.content,w),tag:"span",classes:["token",p.type],attributes:{},language:w},W=p.alias;W&&(Array.isArray(W)?Array.prototype.push.apply(A.classes,W):A.classes.push(W)),l.hooks.run("wrap",A);var j="";for(var V in A.attributes)j+=" "+V+'="'+(A.attributes[V]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+j+">"+A.content+"</"+A.tag+">"};function u(d,p,w,v){d.lastIndex=p;var A=d.exec(w);if(A&&v&&A[1]){var W=A[1].length;A.index+=W,A[0]=A[0].slice(W)}return A}function f(d,p,w,v,A,W){for(var j in w)if(!(!w.hasOwnProperty(j)||!w[j])){var V=w[j];V=Array.isArray(V)?V:[V];for(var O=0;O<V.length;++O){if(W&&W.cause==j+","+O)return;var G=V[O],ie=G.inside,me=!!G.lookbehind,oe=!!G.greedy,g=G.alias;if(oe&&!G.pattern.global){var _=G.pattern.toString().match(/[imsuy]*$/)[0];G.pattern=RegExp(G.pattern.source,_+"g")}for(var b=G.pattern||G,P=v.next,L=A;P!==p.tail&&!(W&&L>=W.reach);L+=P.value.length,P=P.next){var I=P.value;if(p.length>d.length)return;if(!(I instanceof o)){var z=1,U;if(oe){if(U=u(b,L,d,me),!U||U.index>=d.length)break;var H=U.index,X=U.index+U[0].length,ae=L;for(ae+=P.value.length;H>=ae;)P=P.next,ae+=P.value.length;if(ae-=P.value.length,L=ae,P.value instanceof o)continue;for(var T=P;T!==p.tail&&(ae<X||typeof T.value=="string");T=T.next)z++,ae+=T.value.length;z--,I=d.slice(L,ae),U.index-=L}else if(U=u(b,0,I,me),!U)continue;var H=U.index,re=U[0],Q=I.slice(0,H),R=I.slice(H+re.length),Z=L+I.length;W&&Z>W.reach&&(W.reach=Z);var le=P.prev;Q&&(le=c(p,le,Q),L+=Q.length),C(p,le,z);var _e=new o(j,ie?l.tokenize(re,ie):re,g,re);if(P=c(p,le,_e),R&&c(p,P,R),z>1){var ne={cause:j+","+O,reach:Z};f(d,p,w,P.prev,L,ne),W&&ne.reach>W.reach&&(W.reach=ne.reach)}}}}}}function m(){var d={value:null,prev:null,next:null},p={value:null,prev:d,next:null};d.next=p,this.head=d,this.tail=p,this.length=0}function c(d,p,w){var v=p.next,A={value:w,prev:p,next:v};return p.next=A,v.prev=A,d.length++,A}function C(d,p,w){for(var v=p.next,A=0;A<w&&v!==d.tail;A++)v=v.next;p.next=v,v.prev=p,d.length-=A}function q(d){for(var p=[],w=d.head.next;w!==d.tail;)p.push(w.value),w=w.next;return p}if(!n.document)return n.addEventListener&&(l.disableWorkerMessageHandler||n.addEventListener("message",function(d){var p=JSON.parse(d.data),w=p.language,v=p.code,A=p.immediateClose;n.postMessage(l.highlight(v,l.languages[w],w)),A&&n.close()},!1)),l;var F=l.util.currentScript();F&&(l.filename=F.src,F.hasAttribute("data-manual")&&(l.manual=!0));function M(){l.manual||l.highlightAll()}if(!l.manual){var k=document.readyState;k==="loading"||k==="interactive"&&F&&F.defer?document.addEventListener("DOMContentLoaded",M):window.requestAnimationFrame?window.requestAnimationFrame(M):window.setTimeout(M,16)}return l}(e);s.exports&&(s.exports=t),typeof fs<"u"&&(fs.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(r,i){var a={};a["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};l["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var o={};o[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:l},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,r){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:t.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var i=n.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading\u2026",r=function(F,M){return"\u2716 Error "+F+" while fetching file: "+M},i="\u2716 Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",f="failed",m="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function c(F,M,k){var d=new XMLHttpRequest;d.open("GET",F,!0),d.onreadystatechange=function(){d.readyState==4&&(d.status<400&&d.responseText?M(d.responseText):d.status>=400?k(r(d.status,d.statusText)):k(i))},d.send(null)}function C(F){var M=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(F||"");if(M){var k=Number(M[1]),d=M[2],p=M[3];return d?p?[k,Number(p)]:[k,void 0]:[k,k]}}t.hooks.add("before-highlightall",function(F){F.selector+=", "+m}),t.hooks.add("before-sanity-check",function(F){var M=F.element;if(M.matches(m)){F.code="",M.setAttribute(l,o);var k=M.appendChild(document.createElement("CODE"));k.textContent=n;var d=M.getAttribute("data-src"),p=F.language;if(p==="none"){var w=(/\.(\w+)$/.exec(d)||[,"none"])[1];p=a[w]||w}t.util.setLanguage(k,p),t.util.setLanguage(M,p);var v=t.plugins.autoloader;v&&v.loadLanguages(p),c(d,function(A){M.setAttribute(l,u);var W=C(M.getAttribute("data-range"));if(W){var j=A.split(/\r\n?|\n/g),V=W[0],O=W[1]==null?j.length:W[1];V<0&&(V+=j.length),V=Math.max(0,Math.min(V-1,j.length)),O<0&&(O+=j.length),O=Math.max(0,Math.min(O,j.length)),A=j.slice(V,O).join(`
`),M.hasAttribute("data-start")||M.setAttribute("data-start",String(V+1))}k.textContent=A,t.highlightElement(k)},function(A){M.setAttribute(l,f),k.textContent=A})}}),t.plugins.fileHighlight={highlight:function(M){for(var k=(M||document).querySelectorAll(m),d=0,p;p=k[d++];)t.highlightElement(p)}};var q=!1;t.fileHighlight=function(){q||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),q=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(mn);const _n=mn.exports,ds="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+ds+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+ds+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",s=>{s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,t){const n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;const r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};const i={};i[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:r},Prism.languages.insertBefore("svelte","cdata",i)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function si(s){let e,t;return{c(){e=new Kn(!1),t=Ae(),this.h()},l(n){e=jn(n,!1),t=Ae(),this.h()},h(){e.a=t},m(n,r){e.m(s[2],n,r),Y(n,t,r)},p(n,r){r&4&&e.p(n[2])},d(n){n&&E(t),n&&e.d()}}}function ni(s){let e;return{c(){e=be(s[2])},l(t){e=pe(t,s[2])},m(t,n){Y(t,e,n)},p(t,n){n&4&&Bt(e,t[2])},d(t){t&&E(e)}}}function ii(s){let e,t,n,r,i,a,l;const o=s[6].default,u=un(o,s,s[5],null);function f(C,q){return C[0]==="none"?ni:si}let m=f(s),c=m(s);return{c(){e=D("code"),u&&u.c(),t=$(),n=D("pre"),r=D("code"),c.c(),this.h()},l(C){e=B(C,"CODE",{style:!0});var q=K(e);u&&u.l(q),q.forEach(E),t=ee(C),n=B(C,"PRE",{class:!0,"command-line":!0,"data-output":!0});var F=K(n);r=B(F,"CODE",{class:!0});var M=K(r);c.l(M),M.forEach(E),F.forEach(E),this.h()},h(){Ce(e,"display","none"),h(r,"class",i="language-"+s[0]),h(n,"class",a="language-"+s[0]),h(n,"command-line",""),h(n,"data-output","2-17")},m(C,q){Y(C,e,q),u&&u.m(e,null),s[7](e),Y(C,t,q),Y(C,n,q),y(n,r),c.m(r,null),l=!0},p(C,[q]){u&&u.p&&(!l||q&32)&&fn(u,o,C,C[5],l?hn(o,C[5],q,null):dn(C[5]),null),m===(m=f(C))&&c?c.p(C,q):(c.d(1),c=m(C),c&&(c.c(),c.m(r,null))),(!l||q&1&&i!==(i="language-"+C[0]))&&h(r,"class",i),(!l||q&1&&a!==(a="language-"+C[0]))&&h(n,"class",a)},i(C){l||(J(u,C),l=!0)},o(C){se(u,C),l=!1},d(C){C&&E(e),u&&u.d(C),s[7](null),C&&E(t),C&&E(n),c.d()}}}const hs=_n;_n.highlightElement;const ri={transform:s=>s};function ai(s,e,t){let{$$slots:n={},$$scope:r}=e,{language:i="javascript"}=e,{source:a=""}=e,{transform:l=c=>c}=e,o,u;function f(){const c=hs.languages[i];let C=a||o.textContent;C=ri.transform(C),C=l(C),t(2,u=i==="none"?C:hs.highlight(C,c,i))}function m(c){ue[c?"unshift":"push"](()=>{o=c,t(1,o)})}return s.$$set=c=>{t(9,e=Rt(Rt({},e),as(c))),"language"in c&&t(0,i=c.language),"source"in c&&t(3,a=c.source),"transform"in c&&t(4,l=c.transform),"$$scope"in c&&t(5,r=c.$$scope)},s.$$.update=()=>{e&&(a||o)&&f()},e=as(e),[i,o,u,a,l,r,n,m]}class li extends Oe{constructor(e){super(),Fe(this,e,ai,ii,qe,{language:0,source:3,transform:4})}}var vn={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Chess=s.validateFen=s.SQUARES=s.DEFAULT_POSITION=s.KING=s.QUEEN=s.ROOK=s.BISHOP=s.KNIGHT=s.PAWN=s.BLACK=s.WHITE=void 0,s.WHITE="w",s.BLACK="b",s.PAWN="p",s.KNIGHT="n",s.BISHOP="b",s.ROOK="r",s.QUEEN="q",s.KING="k",s.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";const e=-1,t={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"};s.SQUARES=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"];const n={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},r={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},i={b:[16,32,17,15],w:[-16,-32,-17,-15]},a={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},l=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],o=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],u={p:1,n:2,b:4,r:8,q:16,k:32},f="pnbrqkPNBRQK",m=[s.KNIGHT,s.BISHOP,s.ROOK,s.QUEEN],c=7,C=6,q=1,F=0,M={w:[{square:r.a1,flag:n.QSIDE_CASTLE},{square:r.h1,flag:n.KSIDE_CASTLE}],b:[{square:r.a8,flag:n.QSIDE_CASTLE},{square:r.h8,flag:n.KSIDE_CASTLE}]},k={b:q,w:C},d=["1-0","0-1","1/2-1/2","*"];function p(oe){return oe>>4}function w(oe){return oe&15}function v(oe){return"0123456789".indexOf(oe)!==-1}function A(oe){const g=w(oe),_=p(oe);return"abcdefgh".substring(g,g+1)+"87654321".substring(_,_+1)}function W(oe){return oe===s.WHITE?s.BLACK:s.WHITE}function j(oe){const g=[];g[0]="No errors.",g[1]="FEN string must contain six space-delimited fields.",g[2]="6th field (move number) must be a positive integer.",g[3]="5th field (half move counter) must be a non-negative integer.",g[4]="4th field (en-passant square) is invalid.",g[5]="3rd field (castling availability) is invalid.",g[6]="2nd field (side to move) is invalid.",g[7]="1st field (piece positions) does not contain 8 '/'-delimited rows.",g[8]="1st field (piece positions) is invalid [consecutive numbers].",g[9]="1st field (piece positions) is invalid [invalid piece].",g[10]="1st field (piece positions) is invalid [row too large].",g[11]="Illegal en-passant square";const _=oe.split(/\s+/);if(_.length!==6)return{valid:!1,errorNumber:1,error:g[1]};const b=parseInt(_[5],10);if(isNaN(b)||b<=0)return{valid:!1,errorNumber:2,error:g[2]};const P=parseInt(_[4],10);if(isNaN(P)||P<0)return{valid:!1,errorNumber:3,error:g[3]};if(!/^(-|[abcdefgh][36])$/.test(_[3]))return{valid:!1,errorNumber:4,error:g[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(_[2]))return{valid:!1,errorNumber:5,error:g[5]};if(!/^(w|b)$/.test(_[1]))return{valid:!1,errorNumber:6,error:g[6]};const L=_[0].split("/");if(L.length!==8)return{valid:!1,errorNumber:7,error:g[7]};for(let I=0;I<L.length;I++){let z=0,U=!1;for(let X=0;X<L[I].length;X++)if(v(L[I][X])){if(U)return{valid:!1,errorNumber:8,error:g[8]};z+=parseInt(L[I][X],10),U=!0}else{if(!/^[prnbqkPRNBQK]$/.test(L[I][X]))return{valid:!1,errorNumber:9,error:g[9]};z+=1,U=!1}if(z!==8)return{valid:!1,errorNumber:10,error:g[10]}}return _[3][1]=="3"&&_[1]=="w"||_[3][1]=="6"&&_[1]=="b"?{valid:!1,errorNumber:11,error:g[11]}:{valid:!0,errorNumber:0,error:g[0]}}s.validateFen=j;function V(oe,g){const _=oe.from,b=oe.to,P=oe.piece;let L=0,I=0,z=0;for(let U=0,X=g.length;U<X;U++){const ae=g[U].from,T=g[U].to,H=g[U].piece;P===H&&_!==ae&&b===T&&(L++,p(_)===p(ae)&&I++,w(_)===w(ae)&&z++)}return L>0?I>0&&z>0?A(_):z>0?A(_).charAt(1):A(_).charAt(0):""}function O(oe,g,_,b,P,L=void 0,I=n.NORMAL){const z=p(b);if(P===s.PAWN&&(z===c||z===F))for(let U=0;U<m.length;U++){const X=m[U];oe.push({color:g,from:_,to:b,piece:P,captured:L,promotion:X,flags:I|n.PROMOTION})}else oe.push({color:g,from:_,to:b,piece:P,captured:L,promotion:void 0,flags:I})}function G(oe){let g=oe.charAt(0);return g>="a"&&g<="h"?oe.match(/[a-h]\d.*[a-h]\d/)?void 0:s.PAWN:(g=g.toLowerCase(),g==="o"?s.KING:g)}function ie(oe){return oe.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class me{constructor(g=s.DEFAULT_POSITION){this._board=new Array(128),this._turn=s.WHITE,this._header={},this._kings={w:e,b:e},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(g)}clear(g=!1){this._board=new Array(128),this._kings={w:e,b:e},this._turn=s.WHITE,this._castling={w:0,b:0},this._epSquare=e,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=g?this._header:{},this._updateSetup(this.fen())}load(g,_=!1){const b=g.split(/\s+/),P=b[0];let L=0;if(!j(g).valid)return!1;this.clear(_);for(let I=0;I<P.length;I++){const z=P.charAt(I);if(z==="/")L+=8;else if(v(z))L+=parseInt(z,10);else{const U=z<"a"?s.WHITE:s.BLACK;this.put({type:z.toLowerCase(),color:U},A(L)),L++}}return this._turn=b[1],b[2].indexOf("K")>-1&&(this._castling.w|=n.KSIDE_CASTLE),b[2].indexOf("Q")>-1&&(this._castling.w|=n.QSIDE_CASTLE),b[2].indexOf("k")>-1&&(this._castling.b|=n.KSIDE_CASTLE),b[2].indexOf("q")>-1&&(this._castling.b|=n.QSIDE_CASTLE),this._epSquare=b[3]==="-"?e:r[b[3]],this._halfMoves=parseInt(b[4],10),this._moveNumber=parseInt(b[5],10),this._updateSetup(this.fen()),!0}fen(){let g=0,_="";for(let L=r.a8;L<=r.h1;L++){if(this._board[L]){g>0&&(_+=g,g=0);const{color:I,type:z}=this._board[L];_+=I===s.WHITE?z.toUpperCase():z.toLowerCase()}else g++;L+1&136&&(g>0&&(_+=g),L!==r.h1&&(_+="/"),g=0,L+=8)}let b="";this._castling[s.WHITE]&n.KSIDE_CASTLE&&(b+="K"),this._castling[s.WHITE]&n.QSIDE_CASTLE&&(b+="Q"),this._castling[s.BLACK]&n.KSIDE_CASTLE&&(b+="k"),this._castling[s.BLACK]&n.QSIDE_CASTLE&&(b+="q"),b=b||"-";const P=this._epSquare===e?"-":A(this._epSquare);return[_,this._turn,b,P,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(g){this._history.length>0||(g!==s.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=g):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(s.DEFAULT_POSITION)}get(g){return this._board[r[g]]||!1}put({type:g,color:_},b){if(f.indexOf(g.toLowerCase())===-1||!(b in r))return!1;const P=r[b];return g==s.KING&&!(this._kings[_]==e||this._kings[_]==P)?!1:(this._board[P]={type:g,color:_},g===s.KING&&(this._kings[_]=P),this._updateSetup(this.fen()),!0)}remove(g){const _=this.get(g);return delete this._board[r[g]],_&&_.type===s.KING&&(this._kings[_.color]=e),this._updateSetup(this.fen()),_}_attacked(g,_){for(let b=r.a8;b<=r.h1;b++){if(b&136){b+=7;continue}if(this._board[b]===void 0||this._board[b].color!==g)continue;const P=this._board[b],L=b-_,I=L+119;if(l[I]&u[P.type]){if(P.type===s.PAWN){if(L>0){if(P.color===s.WHITE)return!0}else if(P.color===s.BLACK)return!0;continue}if(P.type==="n"||P.type==="k")return!0;const z=o[I];let U=b+z,X=!1;for(;U!==_;){if(this._board[U]!=null){X=!0;break}U+=z}if(!X)return!0}}return!1}_isKingAttacked(g){return this._attacked(W(g),this._kings[g])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const g={b:0,n:0,r:0,q:0,k:0,p:0},_=[];let b=0,P=0;for(let L=r.a8;L<=r.h1;L++){if(P=(P+1)%2,L&136){L+=7;continue}const I=this._board[L];I&&(g[I.type]=I.type in g?g[I.type]+1:1,I.type===s.BISHOP&&_.push(P),b++)}if(b===2)return!0;if(b===3&&(g[s.BISHOP]===1||g[s.KNIGHT]===1))return!0;if(b===g[s.BISHOP]+2){let L=0;const I=_.length;for(let z=0;z<I;z++)L+=_[z];if(L===0||L===I)return!0}return!1}isThreefoldRepetition(){const g=[],_={};let b=!1;for(;;){const P=this._undoMove();if(!P)break;g.push(P)}for(;;){const P=this.fen().split(" ").slice(0,4).join(" ");_[P]=P in _?_[P]+1:1,_[P]>=3&&(b=!0);const L=g.pop();if(L)this._makeMove(L);else break}return b}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:g=!1,square:_=void 0}={}){const b=this._moves({square:_});return g?b.map(P=>this._makePretty(P)):b.map(P=>this._moveToSan(P,b))}_moves({legal:g=!0,piece:_=void 0,square:b=void 0}={}){var P;const L=b?b.toLowerCase():void 0,I=_==null?void 0:_.toLowerCase(),z=[],U=this._turn,X=W(U);let ae=r.a8,T=r.h1,H=!1;if(L)if(L in r)ae=T=r[L],H=!0;else return[];for(let Q=ae;Q<=T;Q++){if(Q&136){Q+=7;continue}if(!this._board[Q]||this._board[Q].color===X)continue;const{type:R}=this._board[Q];let Z;if(R===s.PAWN){if(I&&I!==R)continue;Z=Q+i[U][0],this._board[Z]||(O(z,U,Q,Z,s.PAWN),Z=Q+i[U][1],k[U]===p(Q)&&!this._board[Z]&&O(z,U,Q,Z,s.PAWN,void 0,n.BIG_PAWN));for(let le=2;le<4;le++)Z=Q+i[U][le],!(Z&136)&&(((P=this._board[Z])===null||P===void 0?void 0:P.color)===X?O(z,U,Q,Z,s.PAWN,this._board[Z].type,n.CAPTURE):Z===this._epSquare&&O(z,U,Q,Z,s.PAWN,s.PAWN,n.EP_CAPTURE))}else{if(I&&I!==R)continue;for(let le=0,_e=a[R].length;le<_e;le++){const ne=a[R][le];for(Z=Q;Z+=ne,!(Z&136);){if(!this._board[Z])O(z,U,Q,Z,R);else{if(this._board[Z].color===U)break;O(z,U,Q,Z,R,this._board[Z].type,n.CAPTURE);break}if(R===s.KNIGHT||R===s.KING)break}}}}if((I===void 0||I===s.KING)&&(!H||T===this._kings[U])){if(this._castling[U]&n.KSIDE_CASTLE){const Q=this._kings[U],R=Q+2;!this._board[Q+1]&&!this._board[R]&&!this._attacked(X,this._kings[U])&&!this._attacked(X,Q+1)&&!this._attacked(X,R)&&O(z,U,this._kings[U],R,s.KING,void 0,n.KSIDE_CASTLE)}if(this._castling[U]&n.QSIDE_CASTLE){const Q=this._kings[U],R=Q-2;!this._board[Q-1]&&!this._board[Q-2]&&!this._board[Q-3]&&!this._attacked(X,this._kings[U])&&!this._attacked(X,Q-1)&&!this._attacked(X,R)&&O(z,U,this._kings[U],R,s.KING,void 0,n.QSIDE_CASTLE)}}if(!g)return z;const re=[];for(let Q=0,R=z.length;Q<R;Q++)this._makeMove(z[Q]),this._isKingAttacked(U)||re.push(z[Q]),this._undoMove();return re}move(g,{sloppy:_=!1}={}){let b=null;if(typeof g=="string")b=this._moveFromSan(g,_);else if(typeof g=="object"){const L=this._moves();for(let I=0,z=L.length;I<z;I++)if(g.from===A(L[I].from)&&g.to===A(L[I].to)&&(!("promotion"in L[I])||g.promotion===L[I].promotion)){b=L[I];break}}if(!b)return null;const P=this._makePretty(b);return this._makeMove(b),P}_push(g){this._history.push({move:g,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(g){const _=this._turn,b=W(_);if(this._push(g),this._board[g.to]=this._board[g.from],delete this._board[g.from],g.flags&n.EP_CAPTURE&&(this._turn===s.BLACK?delete this._board[g.to-16]:delete this._board[g.to+16]),g.promotion&&(this._board[g.to]={type:g.promotion,color:_}),this._board[g.to].type===s.KING){if(this._kings[_]=g.to,g.flags&n.KSIDE_CASTLE){const P=g.to-1,L=g.to+1;this._board[P]=this._board[L],delete this._board[L]}else if(g.flags&n.QSIDE_CASTLE){const P=g.to+1,L=g.to-2;this._board[P]=this._board[L],delete this._board[L]}this._castling[_]=0}if(this._castling[_]){for(let P=0,L=M[_].length;P<L;P++)if(g.from===M[_][P].square&&this._castling[_]&M[_][P].flag){this._castling[_]^=M[_][P].flag;break}}if(this._castling[b]){for(let P=0,L=M[b].length;P<L;P++)if(g.to===M[b][P].square&&this._castling[b]&M[b][P].flag){this._castling[b]^=M[b][P].flag;break}}g.flags&n.BIG_PAWN?_===s.BLACK?this._epSquare=g.to-16:this._epSquare=g.to+16:this._epSquare=e,g.piece===s.PAWN?this._halfMoves=0:g.flags&(n.CAPTURE|n.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,_===s.BLACK&&this._moveNumber++,this._turn=b}undo(){const g=this._undoMove();return g?this._makePretty(g):null}_undoMove(){const g=this._history.pop();if(g===void 0)return null;const _=g.move;this._kings=g.kings,this._turn=g.turn,this._castling=g.castling,this._epSquare=g.epSquare,this._halfMoves=g.halfMoves,this._moveNumber=g.moveNumber;const b=this._turn,P=W(b);if(this._board[_.from]=this._board[_.to],this._board[_.from].type=_.piece,delete this._board[_.to],_.captured)if(_.flags&n.EP_CAPTURE){let L;b===s.BLACK?L=_.to-16:L=_.to+16,this._board[L]={type:s.PAWN,color:P}}else this._board[_.to]={type:_.captured,color:P};if(_.flags&(n.KSIDE_CASTLE|n.QSIDE_CASTLE)){let L,I;_.flags&n.KSIDE_CASTLE?(L=_.to+1,I=_.to-1):(L=_.to-2,I=_.to+1),this._board[L]=this._board[I],delete this._board[I]}return _}pgn({newline:g=`
`,maxWidth:_=0}={}){const b=[];let P=!1;for(const H in this._header)b.push("["+H+' "'+this._header[H]+'"]'+g),P=!0;P&&this._history.length&&b.push(g);const L=H=>{const re=this._comments[this.fen()];if(typeof re<"u"){const Q=H.length>0?" ":"";H=`${H}${Q}{${re}}`}return H},I=[];for(;this._history.length>0;)I.push(this._undoMove());const z=[];let U="";for(I.length===0&&z.push(L(""));I.length>0;){U=L(U);const H=I.pop();if(!H)break;if(!this._history.length&&H.color==="b"){const re=`${this._moveNumber}. ...`;U=U?`${U} ${re}`:re}else H.color==="w"&&(U.length&&z.push(U),U=this._moveNumber+".");U=U+" "+this._moveToSan(H,this._moves({legal:!0})),this._makeMove(H)}if(U.length&&z.push(L(U)),typeof this._header.Result<"u"&&z.push(this._header.Result),_===0)return b.join("")+z.join(" ");const X=function(){return b.length>0&&b[b.length-1]===" "?(b.pop(),!0):!1},ae=function(H,re){for(const Q of re.split(" "))if(!!Q){if(H+Q.length>_){for(;X();)H--;b.push(g),H=0}b.push(Q),H+=Q.length,b.push(" "),H++}return X()&&H--,H};let T=0;for(let H=0;H<z.length;H++){if(T+z[H].length>_&&z[H].includes("{")){T=ae(T,z[H]);continue}T+z[H].length>_&&H!==0?(b[b.length-1]===" "&&b.pop(),b.push(g),T=0):H!==0&&(b.push(" "),T++),b.push(z[H]),T+=z[H].length}return b.join("")}header(...g){for(let _=0;_<g.length;_+=2)typeof g[_]=="string"&&typeof g[_+1]=="string"&&(this._header[g[_]]=g[_+1]);return this._header}loadPgn(g,{sloppy:_=!1,newlineChar:b=`\r?
`}={}){function P(ne){return ne.replace(/\\/g,"\\")}function L(ne){const ve={},Re=ne.split(new RegExp(P(b)));let He="",De="";for(let Ne=0;Ne<Re.length;Ne++){const Le=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;He=Re[Ne].replace(Le,"$1"),De=Re[Ne].replace(Le,"$2"),He.trim().length>0&&(ve[He]=De)}return ve}g=g.trim();const z=new RegExp("^(\\[((?:"+P(b)+")|.)*\\])(?:\\s*"+P(b)+"){2}").exec(g),U=z&&z.length>=2?z[1]:"";this.reset();const X=L(U);let ae="";for(const ne in X)ne.toLowerCase()==="fen"&&(ae=X[ne]),this.header(ne,X[ne]);if(_){if(ae&&!this.load(ae,!0))return!1}else if(X.SetUp==="1"&&!("FEN"in X&&this.load(X.FEN,!0)))return!1;function T(ne){return Array.from(ne).map(function(ve){return ve.charCodeAt(0)<128?ve.charCodeAt(0).toString(16):encodeURIComponent(ve).replace(/%/g,"").toLowerCase()}).join("")}function H(ne){return ne.length==0?"":decodeURIComponent("%"+(ne.match(/.{1,2}/g)||[]).join("%"))}const re=function(ne){return ne=ne.replace(new RegExp(P(b),"g")," "),`{${T(ne.slice(1,ne.length-1))}}`},Q=function(ne){if(ne.startsWith("{")&&ne.endsWith("}"))return H(ne.slice(1,ne.length-1))};let R=g.replace(U,"").replace(new RegExp(`({[^}]*})+?|;([^${P(b)}]*)`,"g"),function(ne,ve,Re){return ve!==void 0?re(ve):" "+re(`{${Re.slice(1)}}`)}).replace(new RegExp(P(b),"g")," ");const Z=/(\([^()]+\))+?/g;for(;Z.test(R);)R=R.replace(Z,"");R=R.replace(/\d+\.(\.\.)?/g,""),R=R.replace(/\.\.\./g,""),R=R.replace(/\$\d+/g,"");let le=R.trim().split(new RegExp(/\s+/));le=le.join(",").replace(/,,+/g,",").split(",");let _e="";for(let ne=0;ne<le.length;ne++){const ve=Q(le[ne]);if(ve!==void 0){this._comments[this.fen()]=ve;continue}const Re=this._moveFromSan(le[ne],_);if(Re==null)if(d.indexOf(le[ne])>-1)_e=le[ne];else return!1;else _e="",this._makeMove(Re)}return _e&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",_e),!0}_moveToSan(g,_){let b="";if(g.flags&n.KSIDE_CASTLE)b="O-O";else if(g.flags&n.QSIDE_CASTLE)b="O-O-O";else{if(g.piece!==s.PAWN){const P=V(g,_);b+=g.piece.toUpperCase()+P}g.flags&(n.CAPTURE|n.EP_CAPTURE)&&(g.piece===s.PAWN&&(b+=A(g.from)[0]),b+="x"),b+=A(g.to),g.promotion&&(b+="="+g.promotion.toUpperCase())}return this._makeMove(g),this.isCheck()&&(this.isCheckmate()?b+="#":b+="+"),this._undoMove(),b}_moveFromSan(g,_=!1){const b=ie(g);let P=G(b),L=this._moves({legal:!0,piece:P});for(let H=0,re=L.length;H<re;H++)if(b===ie(this._moveToSan(L[H],L)))return L[H];if(!_)return null;let I,z,U,X,ae,T=!1;z=b.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),z?(I=z[1],U=z[2],X=z[3],ae=z[4],U.length==1&&(T=!0)):(z=b.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),z&&(I=z[1],U=z[2],X=z[3],ae=z[4],U.length==1&&(T=!0))),P=G(b),L=this._moves({legal:!0,piece:I||P});for(let H=0,re=L.length;H<re;H++)if(U&&X){if((!I||I.toLowerCase()==L[H].piece)&&r[U]==L[H].from&&r[X]==L[H].to&&(!ae||ae.toLowerCase()==L[H].promotion))return L[H];if(T){const Q=A(L[H].from);if((!I||I.toLowerCase()==L[H].piece)&&r[X]==L[H].to&&(U==Q[0]||U==Q[1])&&(!ae||ae.toLowerCase()==L[H].promotion))return L[H]}}return null}ascii(){let g=`   +------------------------+
`;for(let _=r.a8;_<=r.h1;_++){if(w(_)===0&&(g+=" "+"87654321"[p(_)]+" |"),this._board[_]){const b=this._board[_].type,L=this._board[_].color===s.WHITE?b.toUpperCase():b.toLowerCase();g+=" "+L+" "}else g+=" . ";_+1&136&&(g+=`|
`,_+=8)}return g+=`   +------------------------+
`,g+="     a  b  c  d  e  f  g  h",g}perft(g){const _=this._moves({legal:!1});let b=0;const P=this._turn;for(let L=0,I=_.length;L<I;L++)this._makeMove(_[L]),this._isKingAttacked(P)||(g-1>0?b+=this.perft(g-1):b++),this._undoMove();return b}_makePretty(g){const{color:_,piece:b,from:P,to:L,flags:I,captured:z,promotion:U}=g;let X="";for(const T in n)n[T]&I&&(X+=t[T]);const ae={color:_,piece:b,from:A(P),to:A(L),san:this._moveToSan(g,this._moves({legal:!0})),flags:X};return z&&(ae.captured=z),U&&(ae.promotion=U),ae}turn(){return this._turn}board(){const g=[];let _=[];for(let b=r.a8;b<=r.h1;b++)this._board[b]==null?_.push(null):_.push({square:A(b),type:this._board[b].type,color:this._board[b].color}),b+1&136&&(g.push(_),_=[],b+=8);return g}squareColor(g){if(g in r){const _=r[g];return(p(_)+w(_))%2===0?"light":"dark"}return null}history({verbose:g=!1}={}){const _=[],b=[];for(;this._history.length>0;)_.push(this._undoMove());for(;;){const P=_.pop();if(!P)break;g?b.push(this._makePretty(P)):b.push(this._moveToSan(P,this._moves())),this._makeMove(P)}return b}_pruneComments(){const g=[],_={},b=P=>{P in this._comments&&(_[P]=this._comments[P])};for(;this._history.length>0;)g.push(this._undoMove());for(b(this.fen());;){const P=g.pop();if(!P)break;this._makeMove(P),b(this.fen())}this._comments=_}getComment(){return this._comments[this.fen()]}setComment(g){this._comments[this.fen()]=g.replace("{","[").replace("}","]")}deleteComment(){const g=this._comments[this.fen()];return delete this._comments[this.fen()],g}getComments(){return this._pruneComments(),Object.keys(this._comments).map(g=>({fen:g,comment:this._comments[g]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(g=>{const _=this._comments[g];return delete this._comments[g],{fen:g,comment:_}})}}s.Chess=me})(vn);var Ee=(s=>(s[s.WHITE=0]="WHITE",s[s.BLACK=1]="BLACK",s[s.BOTH=2]="BOTH",s[s.SPECTATOR=3]="SPECTATOR",s[s.SERVER=4]="SERVER",s))(Ee||{}),te=(s=>(s[s.LEGAL=0]="LEGAL",s[s.LEGALHOVER=1]="LEGALHOVER",s[s.CHECK=2]="CHECK",s[s.MOVE=3]="MOVE",s[s.NEXTMOVE=4]="NEXTMOVE",s[s.PREMOVE=5]="PREMOVE",s[s.PREMOVEHOVER=6]="PREMOVEHOVER",s[s.SELECT=7]="SELECT",s))(te||{});const Ot=s=>{if(typeof s=="string")return s;switch(s){case 0:case 1:return"legal";case 2:return"check";case 3:return"move";case 4:return"nextMove";case 5:case 6:return"preMove";case 7:return"select";default:return"check"}};class oi{constructor(e){this.defaultState={boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:En,size:0,style:{shadow:!1,borderRadius:"0rem"},resizible:{enabled:!1,min:256,max:1024}},this.setConfigSettings=t=>{t!==void 0&&(t.boardTheme!==void 0&&(this.boardTheme=t.boardTheme),t.piecesTheme!==void 0&&(this.piecesTheme=t.piecesTheme),t.mouseEvents!==void 0&&(this.mouseEvents=t.mouseEvents),t.flipped!==void 0&&(this.flipped=t.flipped),t.notation!==void 0&&(this.notation=t.notation),t.startFen!==void 0&&(this.startFen=t.startFen),t.style!==void 0&&(t.style.shadow!==void 0&&(this.style.shadow=t.style.shadow),t.style.borderRadius!==void 0&&(this.style.borderRadius=t.style.borderRadius)))},this.getConfig=()=>{const t={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...(this.style.shadow!==this.defaultState.style.shadow||this.style.borderRadius!==this.defaultState.style.borderRadius)&&{style:{...this.style.shadow!==this.defaultState.style.shadow&&{shadow:this.style.shadow},...this.style.borderRadius!==this.defaultState.style.borderRadius&&{borderRadius:this.style.borderRadius}}}};if(Object.keys(t).length!==0)return t},this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.style={...this.defaultState.style},this.resizible={...this.defaultState.resizible},this.setConfigSettings(e)}}class ui{constructor(e){this.defaultState={enabled:!0,color:Ee.BOTH},this.setConfigSettings=t=>{switch(t){case!0:this.enabled=!0,this.color=Ee.BOTH;break;case!1:this.enabled=!1;break;case Ee.WHITE:this.enabled=!0,this.color=Ee.WHITE;break;case Ee.BLACK:this.enabled=!0,this.color=Ee.BLACK;break}},this.getConfig=()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1},this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class fi{constructor(e){this.defaultState={enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}},this.setConfigSettings=t=>{var n,r,i,a;t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,(t==null?void 0:t.ghostPiece)!==void 0&&(this.ghostPiece.enabled=t.ghostPiece),t.transition!==void 0&&((t==null?void 0:t.transition)===!0?this.transition.enabled=!0:(t==null?void 0:t.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(n=t==null?void 0:t.transition)!=null&&n.duration&&(this.transition.settings.duration=(r=t==null?void 0:t.transition)==null?void 0:r.duration),(i=t==null?void 0:t.transition)!=null&&i.easing&&(this.transition.settings.easing=(a=t==null?void 0:t.transition)==null?void 0:a.easing)))))},this.getConfig=()=>{const t={},n={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(t.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(n.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(n.easing=this.transition.settings.easing),Object.keys(n).length!==0&&(t.transition=n)),!this.transition.enabled&&this.defaultState.transition.enabled&&(t.transition=!1),Object.keys(t).length!==0))return t;if(!this.enabled&&this.defaultState.enabled)return!1},this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class di{constructor(e){this.defaultState={enabled:!0,selectedPiece:void 0},this.setConfigSettings=t=>{t!==void 0&&(this.enabled=t)},this.getConfig=()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class hi{constructor(e){this.defaultState={enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.settings&&(t.settings.allowCastling!==void 0&&(this.settings.allowCastling=t.settings.allowCastling),t.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=t.settings.allowEnPassant),t.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=t.settings.allowPromotion)),t.preMoves!==void 0&&(this.preMoves.enabled=t.preMoves)))},this.getConfig=()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled},this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class ci{constructor(e){this.defaultState={enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.check!==void 0&&(this.settings.check=t.check),t.legal!==void 0&&(this.settings.legal=t.legal),t.move!==void 0&&(this.settings.move=t.move),t.nextMove!==void 0&&(this.settings.nextMove=t.nextMove),t.preMove!==void 0&&(this.settings.preMove=t.preMove),t.select!==void 0&&(this.settings.select=t.select)))},this.getConfig=()=>{const t={},n=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(n.forEach(r=>{this.settings[r]!==this.defaultState.settings[r]&&(t[r]=this.settings[r])}),Object.keys(t).length!==0))return t;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class gi{constructor(e){this.defaultState={enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.knightLShape!==void 0&&(this.settings.knightLShape=t.knightLShape),t.onlyChessMove!==void 0&&(this.settings.onlyChessMove=t.onlyChessMove)))},this.getConfig=()=>{const t={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(t.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(t.onlyChessMove=this.settings.onlyChessMove),Object.keys(t).length!==0))return t;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class bi{constructor(e){this.defaultState={enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.CAPTURE!==void 0&&(this.settings.CAPTURE=t.CAPTURE),t.CASTLE!==void 0&&(this.settings.CASTLE=t.CASTLE),t.MOVE!==void 0&&(this.settings.MOVE=t.MOVE),t.UNDO!==void 0&&(this.settings.UNDO=t.UNDO)))},this.getConfig=()=>{const t={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(t.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(t.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(t.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(t.UNDO=this.settings.UNDO),Object.keys(t).length!==0))return t;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class pi{constructor(e){this.defaultState={getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0},this.setConfigSettings=t=>{t!==void 0&&(t.getLegalMoves&&(this.getLegalMoves=t.getLegalMoves),t.getPreMoves&&(this.getPreMoves=t.getPreMoves),t.beforeMove&&(this.beforeMove=t.beforeMove),t.afterMove&&(this.afterMove=t.afterMove),t.getLastMove&&(this.getLastMove=t.getLastMove),t.getInCheck&&(this.getInCheck=t.getInCheck),t.getWhiteToMove&&(this.getWhiteToMove=t.getWhiteToMove))},this.getConfig=()=>{const t={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(t).length>0?t:void 0},this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const En="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Mn{constructor(e){this.getConfig=()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}),this.pieces=[],this.markedSquares=new Set,this.board=new oi(e==null?void 0:e.board),this.movable=new ui(e==null?void 0:e.movable),this.draggable=new fi(e==null?void 0:e.draggable),this.selectable=new di(e==null?void 0:e.selectable),this.legal=new hi(e==null?void 0:e.legal),this.callbacks=new pi(e==null?void 0:e.callbacks),this.highlight=new ci(e==null?void 0:e.highlight),this.drawTools=new gi(e==null?void 0:e.drawTools),this.sounds=new bi(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){!this.legalEnabled||(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){!this.preMovesEnabled||(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.preMovesEnabled?this.legal.preMoves.curMove:""}set currentPreMove(e){e.length<4||(this.preMovesEnabled?this.legal.preMoves.curMove=e:this.legal.preMoves.curMove="")}get selectableEnabled(){return this.selectable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){!this.legalEnabled||(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const mi=["a","b","c","d","e","f","g","h"],_i=["8","7","6","5","4","3","2","1"];function qt(s){return{x:mi.indexOf(s[0]),y:_i.indexOf(s[1])}}function Gt(s){return s.charCodeAt(0)-97}function vi(s){return 8-parseInt(s,10)}const Ei=s=>{let e="",t=0;for(let n=0;n<s.length;n++){n!==0&&(e+="/");for(let r=0;r<s[n].length;r++){const i=s[n][r];i!=null&&t===0?i[0]==="w"?e+=i[1]:e+=i[1].toLowerCase():i!=null&&t!==0?(e+=t.toString(),t=0,i[0]==="w"?e+=i[1]:e+=i[1].toLowerCase()):t++}t!==0&&(e+=t.toString(),t=0)}return e},Mi="8/8/8/8/8/8/8/8 w - - 0 1";class ki{constructor(e){this.letters={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},this.changeLegalHoverIfNeeded=t=>{t.color!==te.LEGAL&&t.color!==te.PREMOVE||this.state.pieces.forEach(n=>{n.square===t.square&&(t.color=t.color===te.LEGAL?te.LEGALHOVER:te.PREMOVEHOVER)})},this.highlightSquare=(t,n)=>{const r={square:t,color:n};this.state.markedSquares.forEach(i=>{i.square===t&&i.color!==te.MOVE&&i.color!==te.CHECK&&this.state.markedSquares.delete(i)}),this.changeLegalHoverIfNeeded(r),this.state.markedSquares.add(r)},this.legalHover=t=>{this.state.markedSquares.forEach(n=>{if(n.square===t&&n.color===te.LEGAL)n.color=te.LEGALHOVER;else if(n.square!==t&&n.color===te.LEGALHOVER){let r=!1;this.state.pieces.forEach(i=>{i.square===n.square&&(r=!0)}),r||(n.color=te.LEGAL)}})},this.preMoveHover=t=>{this.state.markedSquares.forEach(n=>{if(n.square===t&&n.color===te.PREMOVE)n.color=te.PREMOVEHOVER;else if(n.square!==t&&n.color===te.PREMOVEHOVER){let r=!1;this.state.pieces.forEach(i=>{i.square===n.square&&(r=!0)}),r||(n.color=te.PREMOVE)}})},this.toggleSquareHighlight=(t,n)=>{const r={square:t,color:n};let i=!1;return this.state.markedSquares.forEach(a=>{a.square===t&&(this.state.markedSquares.delete(a),a.color===n&&(i=!0))}),this.changeLegalHoverIfNeeded(r),i?!0:(this.state.markedSquares.add(r),!1)},this.getSelectedSquare=()=>{let t="";return this.state.markedSquares.forEach(n=>{n.color===te.SELECT&&(t=n.square)}),t},this.clearSquare=(t,n)=>{t.length===2&&this.state.markedSquares.forEach(r=>{r.square===t&&(r.color===n||n===void 0)&&this.state.markedSquares.delete(r)})},this.clearAllSquares=t=>{t===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(n=>{n.color===t&&this.state.markedSquares.delete(n)})},this.setPiece=(t,n)=>{if(this.notValidThing({square:t,piece:n}))return;const r=this.state.pieces.find(i=>i.square===t);r?r.name=n:this.state.pieces.push({square:t,name:n})},this.removePiece=t=>{this.notValidThing({square:t})||this.state.pieces.forEach((n,r)=>{n.square===t&&this.state.pieces.splice(r,1)})},this.clearAllPieces=()=>{this.state.pieces.length=0},this.getGridCoordsFromSquare=t=>{if(this.notValidThing({square:t}))return{x:0,y:0};const n=t[0],r=t[1],i=this.state.board.flipped?Math.abs(this.letters[n]-7):this.letters[n],a=this.state.board.flipped?Math.abs(parseInt(r,10)-8):parseInt(r,10)-1;return typeof i!="number"||a<0||a>7?{x:0,y:0}:{x:i,y:a}},this.makeMove=t=>{if(this.notValidThing({move:t}))return;let n=!1,r;const i=t.substring(0,2),a=t.substring(2,4),l=t.substring(4);this.state.pieces.forEach(o=>{o.square===a&&(r=o,this.removePiece(o.square))}),this.state.pieces.forEach(o=>{o.square===i&&(o.square=a,n=!0,l&&(o.name=o.name[0]+l.toUpperCase()))}),n?this.state.legal.lastMove=t:r&&this.state.pieces.push(r)},this.getSquareFromIndices=(t,n)=>`${Object.keys(this.letters)[t]}${(n+1).toString()}`,this.updatePiecesWithFen=t=>{const n=[...Array(8)].map(()=>Array(8).fill(null)),r=["1","2","3","4","5","6","7","8"];let i=0,a=0;for(let u=0;u<(t.includes(" ")?t.indexOf(" "):t.length);u++)if(t[u]==="/")i++,a=0;else if(!r.includes(t[u]))t[u]===t[u].toUpperCase()?n[i][a]=`w${t[u]}`:n[i][a]=`b${t[u].toUpperCase()}`,a++;else for(let f=0;f<parseInt(t[u],10);f++)n[i][a]=null,a++;const l=[],o=[];for(let u=0;u<n.length;++u)for(let f=0;f<n.length;++f){const m=n[u][f],c=this.getPieceFromSquare(this.getSquareFromIndices(f,Math.abs(u-7)));m&&!c&&l.push({square:this.getSquareFromIndices(f,Math.abs(u-7)),name:m}),!m&&c&&o.push(c),m&&c&&m!==c.name&&(l.push({square:this.getSquareFromIndices(f,Math.abs(u-7)),name:m}),o.push(c))}for(let u=0;u<o.length;u++)for(let f=0;f<l.length;f++)!l[f]||!o[u]||l[f].name===o[u].name&&(o[u].square=l[f].square,o.splice(u,1),u--,l.splice(f,1),f--);l.forEach(u=>{this.state.pieces.push(u)}),o.forEach(u=>{this.state.pieces.splice(this.state.pieces.indexOf(u),1)})},this.notValidThing=t=>{const{square:n,piece:r,move:i}=t;return!!(n&&n.length!==2||r&&r.length!==2||i&&i.length!==4&&i.length!==5)},this.setGhostPiece=t=>{this.state.draggable.ghostPiece.piece=t},this.removeGhostPiece=()=>{this.state.draggable.ghostPiece.piece=void 0},this.isCastling=t=>{switch(t){case"e1g1":case"e1c1":case"e8g8":case"e8c8":return!0;default:return!1}},this.getRookMoveIfIsCastling=t=>{switch(t){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return}},this.isEnPassant=t=>{if(t[0]===t[2]||this.getPieceFromSquare(t.substring(2,4)))return!1;const n=this.getPieceFromSquare(t.substring(0,2));return!(n===void 0||n.name!=="wP"&&n.name!=="bP")},this.getCapturedPawnSquareIfIsEnPassant=t=>{if(t[0]===t[2]||this.getPieceFromSquare(t.substring(2,4)))return;const n=this.getPieceFromSquare(t.substring(0,2));if(n===void 0||n.name!=="wP"&&n.name!=="bP")return;const r=this.getPieceFromSquare(`${t[2]}${(parseInt(t[3],10)+(n.name==="wP"?-1:1)).toString()}`);return r==null?void 0:r.square},this.isCapture=t=>!!this.getPieceFromSquare(t.substring(2,4)),this.isPromotion=t=>{if((t[1]!=="7"||t[3]!=="8")&&(t[1]!=="2"||t[3]!=="1"))return!1;const n=this.getPieceFromSquare(t.substring(0,2));return!(n&&(n.name[1]!=="P"||n.name[0]==="w"&&t[3]==="1"||n.name[0]==="b"&&t[3]==="8"))},this.callbackExists=t=>this.state.callbacks[t]!==void 0,this.flipBoard=t=>{t!==void 0?this.state.board.flipped=t:this.state.board.flipped=!this.state.board.flipped},this.setConfigSettings=t=>{this.state.setConfigSettings(t)},this.state=new Mn(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const e=this.state.pieces.find(t=>t.name==="wK");if(e)return e.square}getBlackKingSquare(){const e=this.state.pieces.find(t=>t.name==="bK");if(e)return e.square}getShortFEN(){if(this.state.pieces.length===0)return Mi;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(t=>{e[vi(t.square[1])][Gt(t.square[0])]=t.name}),Ei(e)}getPieceFromSquare(e){let t;return this.state.pieces.forEach(n=>{n.square===e&&(t=n)}),t}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}}const wi={[te.LEGAL]:"legalSQ cursor-pointer",[te.LEGALHOVER]:"legalSQ_hover cursor-pointer",[te.SELECT]:"selectedSQ",[te.MOVE]:"highlightMove",[te.NEXTMOVE]:"nextMoveSQ",[te.PREMOVE]:"preMoveSQ cursor-pointer",[te.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[te.CHECK]:"checkSQ"},Si={white:"#f0d9b5",black:"#b58863"},yi="standard.svg",Ci={[te.LEGAL]:"legalSQ cursor-pointer",[te.LEGALHOVER]:"legalSQ_hover cursor-pointer",[te.SELECT]:"selectedSQ-darkBlue",[te.MOVE]:"highlightMove-darkBlue",[te.NEXTMOVE]:"nextMoveSQ",[te.PREMOVE]:"preMoveSQ cursor-pointer",[te.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[te.CHECK]:"checkSQ"},Ai={white:"#94A3B8",black:"#475569"},Pi="darkBlue.svg",je={squareStyles:{standard:wi,darkBlue:Ci},colors:{standard:Si,darkBlue:Ai},imageName:{standard:yi,darkBlue:Pi}};function cs(s,e,t){const n=s.slice();return n[3]=e[t],n[5]=t,n}function gs(s,e,t){const n=s.slice();return n[3]=e[t],n[5]=t,n}function bs(s){let e,t=s[2][s[1]?Math.abs(s[5]-7):s[5]]+"",n,r;return{c(){e=D("span"),n=be(t),r=$(),this.h()},l(i){e=B(i,"SPAN",{"data-file":!0,style:!0,class:!0});var a=K(e);n=pe(a,t),r=ee(a),a.forEach(E),this.h()},h(){h(e,"data-file",s[3]),Ce(e,"color",s[5]%2===0?je.colors[s[0]].white:je.colors[s[0]].black),h(e,"class","svelte-1hixjwp")},m(i,a){Y(i,e,a),y(e,n),y(e,r)},p(i,a){a&2&&t!==(t=i[2][i[1]?Math.abs(i[5]-7):i[5]]+"")&&Bt(n,t),a&1&&Ce(e,"color",i[5]%2===0?je.colors[i[0]].white:je.colors[i[0]].black)},d(i){i&&E(e)}}}function ps(s){let e,t=(s[1]?s[5]+1:Math.abs(s[5]-8))+"",n,r,i;return{c(){e=D("span"),n=be(t),r=$(),this.h()},l(a){e=B(a,"SPAN",{"data-file":!0,style:!0,class:!0});var l=K(e);n=pe(l,t),r=ee(l),l.forEach(E),this.h()},h(){h(e,"data-file",s[3]),h(e,"style",i="color: "+(s[5]%2===0?je.colors[s[0]].white:je.colors[s[0]].black)+";"+(s[1]?" text-align: right;":"")),h(e,"class","svelte-1hixjwp")},m(a,l){Y(a,e,l),y(e,n),y(e,r)},p(a,l){l&2&&t!==(t=(a[1]?a[5]+1:Math.abs(a[5]-8))+"")&&Bt(n,t),l&3&&i!==(i="color: "+(a[5]%2===0?je.colors[a[0]].white:je.colors[a[0]].black)+";"+(a[1]?" text-align: right;":""))&&h(e,"style",i)},d(a){a&&E(e)}}}function Ti(s){let e,t,n,r=s[2],i=[];for(let o=0;o<r.length;o+=1)i[o]=bs(gs(s,r,o));let a=s[2],l=[];for(let o=0;o<a.length;o+=1)l[o]=ps(cs(s,a,o));return{c(){e=D("div");for(let o=0;o<i.length;o+=1)i[o].c();t=$(),n=D("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=B(o,"DIV",{class:!0});var u=K(e);for(let m=0;m<i.length;m+=1)i[m].l(u);u.forEach(E),t=ee(o),n=B(o,"DIV",{class:!0});var f=K(n);for(let m=0;m<l.length;m+=1)l[m].l(f);f.forEach(E),this.h()},h(){h(e,"class","files noselect svelte-1hixjwp"),h(n,"class","ranks noselect svelte-1hixjwp")},m(o,u){Y(o,e,u);for(let f=0;f<i.length;f+=1)i[f].m(e,null);Y(o,t,u),Y(o,n,u);for(let f=0;f<l.length;f+=1)l[f].m(n,null)},p(o,[u]){if(u&7){r=o[2];let f;for(f=0;f<r.length;f+=1){const m=gs(o,r,f);i[f]?i[f].p(m,u):(i[f]=bs(m),i[f].c(),i[f].m(e,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}if(u&7){a=o[2];let f;for(f=0;f<a.length;f+=1){const m=cs(o,a,f);l[f]?l[f].p(m,u):(l[f]=ps(m),l[f].c(),l[f].m(n,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=a.length}},i:Te,o:Te,d(o){o&&E(e),dt(i,o),o&&E(t),o&&E(n),dt(l,o)}}}function Li(s,e,t){let{theme:n}=e,{flipped:r}=e;const i=["a","b","c","d","e","f","g","h"];return s.$$set=a=>{"theme"in a&&t(0,n=a.theme),"flipped"in a&&t(1,r=a.flipped)},[n,r,i]}class Ii extends Oe{constructor(e){super(),Fe(this,e,Li,Ti,qe,{theme:0,flipped:1})}}function Oi(s){const e=2.5949095;return(s*=2)<1?.5*(s*s*((e+1)*s-e)):.5*((s-=2)*s*((e+1)*s+e)+2)}function Fi(s){return s*s*((1.70158+1)*s-1.70158)}function qi(s){return--s*s*((1.70158+1)*s+1.70158)+1}function Nt(s){const e=.36363636363636365,t=8/11,n=9/10,r=4356/361,i=35442/1805,a=16061/1805,l=s*s;return s<e?7.5625*l:s<t?9.075*l-9.9*s+3.4:s<n?r*l-i*s+a:10.8*s*s-20.52*s+10.72}function Ri(s){return s<.5?.5*(1-Nt(1-s*2)):.5*Nt(s*2-1)+.5}function Ni(s){return 1-Nt(1-s)}function Di(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)}function Bi(s){return 1-Math.sqrt(1-s*s)}function Ui(s){return Math.sqrt(1- --s*s)}function Hi(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function zi(s){return s*s*s}function ns(s){const e=s-1;return e*e*e+1}function Vi(s){return s<.5?.5*Math.sin(13*Math.PI/2*2*s)*Math.pow(2,10*(2*s-1)):.5*Math.sin(-13*Math.PI/2*(2*s-1+1))*Math.pow(2,-10*(2*s-1))+1}function Wi(s){return Math.sin(13*s*Math.PI/2)*Math.pow(2,10*(s-1))}function Ki(s){return Math.sin(-13*(s+1)*Math.PI/2)*Math.pow(2,-10*s)+1}function ji(s){return s===0||s===1?s:s<.5?.5*Math.pow(2,20*s-10):-.5*Math.pow(2,10-s*20)+1}function Gi(s){return s===0?s:Math.pow(2,10*(s-1))}function Qi(s){return s===1?s:1-Math.pow(2,-10*s)}function Xi(s){return s/=.5,s<1?.5*s*s:(s--,-.5*(s*(s-2)-1))}function Yi(s){return s*s}function Zi(s){return-s*(s-2)}function Ji(s){return s<.5?8*Math.pow(s,4):-8*Math.pow(s-1,4)+1}function xi(s){return Math.pow(s,4)}function $i(s){return Math.pow(s-1,3)*(1-s)+1}function er(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)}function tr(s){return s*s*s*s*s}function sr(s){return--s*s*s*s*s+1}function nr(s){return-.5*(Math.cos(Math.PI*s)-1)}function ir(s){const e=Math.cos(s*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function rr(s){return Math.sin(s*Math.PI/2)}const Dt=Object.freeze(Object.defineProperty({__proto__:null,backIn:Fi,backInOut:Oi,backOut:qi,bounceIn:Ni,bounceInOut:Ri,bounceOut:Nt,circIn:Bi,circInOut:Di,circOut:Ui,cubicIn:zi,cubicInOut:Hi,cubicOut:ns,elasticIn:Wi,elasticInOut:Vi,elasticOut:Ki,expoIn:Gi,expoInOut:ji,expoOut:Qi,quadIn:Yi,quadInOut:Xi,quadOut:Zi,quartIn:xi,quartInOut:Ji,quartOut:$i,quintIn:tr,quintInOut:er,quintOut:sr,sineIn:ir,sineInOut:nr,sineOut:rr,linear:cn},Symbol.toStringTag,{value:"Module"}));function ms(s){return Object.prototype.toString.call(s)==="[object Date]"}function Qt(s,e){if(s===e||s!==s)return()=>s;const t=typeof s;if(t!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const n=e.map((r,i)=>Qt(s[i],r));return r=>n.map(i=>i(r))}if(t==="object"){if(!s||!e)throw new Error("Object cannot be null");if(ms(s)&&ms(e)){s=s.getTime(),e=e.getTime();const i=e-s;return a=>new Date(s+a*i)}const n=Object.keys(e),r={};return n.forEach(i=>{r[i]=Qt(s[i],e[i])}),i=>{const a={};return n.forEach(l=>{a[l]=r[l](i)}),a}}if(t==="number"){const n=e-s;return r=>s+r*n}throw new Error(`Cannot interpolate ${t} values`)}function ar(s,e={}){const t=ti(s);let n,r=s;function i(a,l){if(s==null)return t.set(s=a),Promise.resolve();r=a;let o=n,u=!1,{delay:f=0,duration:m=400,easing:c=cn,interpolate:C=Qt}=Rt(Rt({},e),l);if(m===0)return o&&(o.abort(),o=null),t.set(s=r),Promise.resolve();const q=Gn()+f;let F;return n=Qn(M=>{if(M<q)return!0;u||(F=C(s,a),typeof m=="function"&&(m=m(s,a)),u=!0),o&&(o.abort(),o=null);const k=M-q;return k>m?(t.set(s=a),!1):(t.set(s=F(c(k/m))),!0)}),n.promise}return{set:i,update:(a,l)=>i(a(r,s),l),subscribe:t.subscribe}}function _s(s,e,t,n){if(e===0&&t===0)return s;const r=["a","b","c","d","e","f","g","h"],i=["8","7","6","5","4","3","2","1"],a=r[n?7-r.indexOf(s[0])-e:r.indexOf(s[0])+e],l=i[n?7-i.indexOf(s[1])-t:i.indexOf(s[1])+t];if(!(!a||!l))return`${a}${l}`}function vs(s,e,t){const n=e*1.15,r=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","circle");return r.setAttribute("width",(s.offsetWidth*n).toString()),r.setAttribute("height",(s.offsetHeight*n).toString()),r.style.position="absolute",r.style.zIndex="100",r.style.translate=`${t?"":"-"}${25*n/2}% -${25*n/2}%`,r.style.opacity="0.2",i.setAttribute("r",(s.offsetWidth*n/2).toString()),i.setAttribute("cx",(s.offsetWidth*n/2).toString()),i.setAttribute("cy",(s.offsetHeight*n/2).toString()),i.setAttribute("fill","black"),r.appendChild(i),r}function lr(s,e){let t;function n(I,z=1e3){let U=!1;const X=()=>{t==null?U=!1:(I(...t),t=null,setTimeout(X,z))};return(...ae)=>{if(U){t=ae;return}I(...ae),U=!0,setTimeout(X,z)}}let r,i,a,l,o,u,f,m,c=!1,C;const q=s.parentNode;let F,M=!1,{startSquare:k,boardFlipped:d,mouseEvents:p,canDrag:w,canSelect:v,duration:A,easingFunc:W}=e;const{coords:j}=e;s.style.cursor=!w&&!v?"default":"pointer";let V=ls(j).x,O=ls(j).y;const G=1.6;let ie=vs(s,G,d);s.draggable=!1;function me(I){const z=I.clientX-r,U=I.clientY-i;if(r=I.clientX,i=I.clientY,o+=z,u+=U,c||(Math.abs(o)>1||Math.abs(u)>1)&&(j.update(X=>({x:X.x+(r-s.offsetWidth/2-s.getBoundingClientRect().x)/s.clientWidth,y:I.pointerType==="touch"?X.y-(i-s.offsetHeight*1.5-s.getBoundingClientRect().y)/s.clientWidth:X.y-(i-s.offsetHeight/2-s.getBoundingClientRect().y)/s.clientWidth,scale:I.pointerType==="touch"?G:1}),{duration:A,easing:W}),c=!0,s.style.zIndex="30",s.style.cursor="grabbing",s.dispatchEvent(new CustomEvent("startMoving"))),!!c){if(I.pointerType==="touch"){const X=Math.floor((o+a)/s.offsetWidth),ae=Math.floor((u+l)/s.offsetHeight),T=_s(k,X,ae,d);if(T){if(T!==F){const H=qt(T);ie.style.left=`${H.x*12.5}%`,ie.style.top=`${H.y*12.5}%`,q.appendChild(ie)}}else F&&(F=void 0)}j.update(X=>({x:X.x+z/s.clientWidth,y:X.y-U/s.clientWidth,scale:I.pointerType==="touch"?G:1}),{duration:0}),s.dispatchEvent(new CustomEvent("moving",{detail:{x:r,y:i}}))}}const oe=n(me,10);function g(){const I=window.scrollX-f,z=window.scrollY-m;f=window.scrollX,m=window.scrollY,j.update(U=>({x:U.x+I,y:U.y+z,scale:1}),{duration:0})}function _(){window.removeEventListener("pointermove",oe),window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",_),document.body.removeEventListener("pointerleave",_),window.removeEventListener("scroll",g),t=null;const I=Math.floor((o+a)/s.offsetWidth),z=Math.floor((u+l)/s.offsetHeight),U=_s(k,I,z,d);M=!1,s.dispatchEvent(new CustomEvent("dropped",{detail:U})),j.update(()=>({x:V,y:O,scale:1}),{duration:A,easing:W}).then(()=>{M||s.dispatchEvent(new CustomEvent("animationEnded")),M||(s.style.zIndex="2")}),r=0,i=0,o=0,u=0,s.style.cursor=!w&&!v?"default":"pointer",setTimeout(()=>{M||(s.style.zIndex="2")},A),c=!1,ie.remove()}function b(I){if(I.button!==0||!I.isPrimary||!p||(v&&s.dispatchEvent(new CustomEvent("clicked")),!w))return;V=d?7-Gt(k[0]):Gt(k[0]),O=d?8-parseInt(k[1],10):parseInt(k[1],10)-1,F=k;const z=I.target.getBoundingClientRect();I.pointerType==="touch"?(r=I.clientX,i=I.clientY,a=I.clientX-z.x,l=I.clientY-z.y):(r=I.clientX,i=I.clientY,a=I.offsetX,l=I.offsetY),o=0,u=0,f=window.scrollX,m=window.scrollY,M=!0,window.addEventListener("pointermove",oe),window.addEventListener("pointerup",_),window.addEventListener("pointercancel",_),document.body.addEventListener("pointerleave",_),window.addEventListener("scroll",g)}function P(I){I.preventDefault()}function L(I){I.preventDefault()}return s.addEventListener("contextmenu",P),s.addEventListener("dragstart",L),s.addEventListener("pointerdown",b),{destroy(){s.removeEventListener("pointerdown",b),s.removeEventListener("contextmenu",P),s.removeEventListener("dragstart",L),window.clearTimeout(C)},update(I){k=I.startSquare,A=I.duration,W=I.easingFunc,(I.canDrag!==w||I.canSelect!==v)&&(s.style.cursor=!I.canDrag&&!I.canSelect?"default":"pointer"),I.canDrag!==w&&(w=I.canDrag),I.canSelect!==v&&(v=I.canSelect),I.mouseEvents!==p&&(p=I.mouseEvents),d!==I.boardFlipped&&(ie=vs(s,G,I.boardFlipped)),d=I.boardFlipped}}}const Es=""+new URL("../../assets/wP-f78bae6c.svg",import.meta.url).href,or=""+new URL("../../assets/wR-5eb92d73.svg",import.meta.url).href,ur=""+new URL("../../assets/wN-a4c975a2.svg",import.meta.url).href,fr=""+new URL("../../assets/wB-1ff2f149.svg",import.meta.url).href,dr=""+new URL("../../assets/wQ-8568b485.svg",import.meta.url).href,hr=""+new URL("../../assets/wK-4cdf6dc9.svg",import.meta.url).href,cr=""+new URL("../../assets/bP-84e521e8.svg",import.meta.url).href,gr=""+new URL("../../assets/bR-e39efb08.svg",import.meta.url).href,br=""+new URL("../../assets/bN-d3912d91.svg",import.meta.url).href,pr=""+new URL("../../assets/bB-c430b746.svg",import.meta.url).href,mr=""+new URL("../../assets/bQ-c7b9a43e.svg",import.meta.url).href,_r=""+new URL("../../assets/bK-3500a2e6.svg",import.meta.url).href;function Xt(s){switch(s){case"wP":return Es;case"wR":return or;case"wN":return ur;case"wB":return fr;case"wQ":return dr;case"wK":return hr;case"bP":return cr;case"bR":return gr;case"bN":return br;case"bB":return pr;case"bQ":return mr;case"bK":return _r;default:return Es}}function vr(s){let e,t,n,r,i;return{c(){e=D("img"),this.h()},l(a){e=B(a,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){Ce(e,"left",s[9].x*12.5+"%"),Ce(e,"bottom",s[9].y*12.5+"%"),Ce(e,"scale",s[9].scale),Ce(e,"z-Index",s[4]?0:s[8]),Ce(e,"opacity",s[4]?.3:1),Ce(e,"cursor","pointer"),h(e,"class","noselect svelte-1g241z"),pt(e.src,t=Xt(s[2]))||h(e,"src",t),h(e,"alt",s[2])},m(a,l){var o,u,f;Y(a,e,l),r||(i=[xt(n=lr.call(null,e,{startSquare:s[1],mouseEvents:s[0],canDrag:s[13](s[7],s[6]),canSelect:s[14](s[7],s[5]),boardFlipped:s[3],duration:(o=s[6])!=null&&o.transition.enabled?s[6].transition.settings.duration:0,easingFunc:Dt[(f=(u=s[6])==null?void 0:u.transition.settings.easing)!=null?f:"cubicInOut"],coords:s[11]})),de(e,"dropped",s[12]),de(e,"clicked",s[17]),de(e,"startMoving",s[18]),de(e,"animationEnded",s[19]),de(e,"moving",s[20])],r=!0)},p(a,[l]){var o,u,f;l&512&&Ce(e,"left",a[9].x*12.5+"%"),l&512&&Ce(e,"bottom",a[9].y*12.5+"%"),l&512&&Ce(e,"scale",a[9].scale),l&272&&Ce(e,"z-Index",a[4]?0:a[8]),l&16&&Ce(e,"opacity",a[4]?.3:1),l&4&&!pt(e.src,t=Xt(a[2]))&&h(e,"src",t),l&4&&h(e,"alt",a[2]),n&&$t(n.update)&&l&235&&n.update.call(null,{startSquare:a[1],mouseEvents:a[0],canDrag:a[13](a[7],a[6]),canSelect:a[14](a[7],a[5]),boardFlipped:a[3],duration:(o=a[6])!=null&&o.transition.enabled?a[6].transition.settings.duration:0,easingFunc:Dt[(f=(u=a[6])==null?void 0:u.transition.settings.easing)!=null?f:"cubicInOut"],coords:a[11]})},i:Te,o:Te,d(a){a&&E(e),r=!1,xe(i)}}}function Er(s,e,t){var g,_;let n,r,{square:i}=e,{name:a}=e,{mouseEvents:l=!0}=e,{getGridCoordsFromSquare:o}=e,{flipped:u}=e,{isGhost:f=!1}=e;f&&(l=!1);let{selectableState:m=void 0}=e,{draggableState:c=void 0}=e,{legalState:C=void 0}=e,{movableState:q=void 0}=e,F=!1;const M=es();let k=(g=c==null?void 0:c.transition)!=null&&g.enabled?c.transition.settings.duration:0;const d=ar({x:0,y:0,scale:1},{duration:k,easing:Dt[(_=c==null?void 0:c.transition.settings.easing)!=null?_:"cubicInOut"]});Xn(s,d,b=>t(9,r=b));let p=!1;const w=b=>b[0]==="w"?Ee.WHITE:Ee.BLACK,v=b=>{var L;const P=o(b);d.update(()=>({x:P.x,y:P.y,scale:1}),{duration:p?k:0,easing:Dt[(L=c==null?void 0:c.transition.settings.easing)!=null?L:"cubicInOut"]}),p||(p=!0),k=c!=null&&c.transition.enabled?c.transition.settings.duration:0},A=b=>{k=0,b.detail||M("deselect"),i===b.detail?(!F&&V(q,m)?M("select"):M("deselect"),F=!F):F=!1,M("endDragging",i+b.detail),i!==b.detail&&b.detail&&M("move",i+b.detail)},W=b=>C!=null&&C.enabled?!!(C.preMoves.enabled&&w(a)===b.color||b.color===Ee.WHITE&&C.whiteToMove&&w(a)===Ee.WHITE||b.color===Ee.BLACK&&!C.whiteToMove&&w(a)===Ee.BLACK||b.color===Ee.BOTH&&(w(a)===Ee.WHITE&&C.whiteToMove||w(a)===Ee.BLACK&&!C.whiteToMove)):b.color===w(a)||b.color===Ee.BOTH,j=(b,P)=>!(b!=null&&b.enabled)||!(P!=null&&P.enabled)||!l?!1:W(b),V=(b,P)=>!(b!=null&&b.enabled)||!(P!=null&&P.enabled)||!l?!1:W(b),O=b=>b===void 0||b.name!==a||b.square!==i;function G(b){st.call(this,s,b)}function ie(b){st.call(this,s,b)}function me(b){st.call(this,s,b)}const oe=b=>{M("moving",b.detail)};return s.$$set=b=>{"square"in b&&t(1,i=b.square),"name"in b&&t(2,a=b.name),"mouseEvents"in b&&t(0,l=b.mouseEvents),"getGridCoordsFromSquare"in b&&t(15,o=b.getGridCoordsFromSquare),"flipped"in b&&t(3,u=b.flipped),"isGhost"in b&&t(4,f=b.isGhost),"selectableState"in b&&t(5,m=b.selectableState),"draggableState"in b&&t(6,c=b.draggableState),"legalState"in b&&t(16,C=b.legalState),"movableState"in b&&t(7,q=b.movableState)},s.$$.update=()=>{s.$$.dirty&32&&O(m==null?void 0:m.selectedPiece)&&(F=!1),s.$$.dirty&10&&v(i),s.$$.dirty&128&&t(8,n=typeof q=="boolean"?q?2:1:q!=null&&q.enabled?2:1)},[l,i,a,u,f,m,c,q,n,r,M,d,A,j,V,o,C,G,ie,me,oe]}class kn extends Oe{constructor(e){super(),Fe(this,e,Er,vr,qe,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:15,flipped:3,isGhost:4,selectableState:5,draggableState:6,legalState:16,movableState:7})}}function Mr(s){let e,t;return{c(){e=D("div"),this.h()},l(n){e=B(n,"DIV",{style:!0,class:!0}),K(e).forEach(E),this.h()},h(){Ce(e,"left",s[3]*12.5+"%"),Ce(e,"bottom",s[4]*12.5+"%"),h(e,"class",t="noselect "+je.squareStyles[s[1]][s[0]]+(s[2]?"":" pointer-events-none")+" svelte-10vytug")},m(n,r){Y(n,e,r)},p(n,[r]){r&8&&Ce(e,"left",n[3]*12.5+"%"),r&16&&Ce(e,"bottom",n[4]*12.5+"%"),r&7&&t!==(t="noselect "+je.squareStyles[n[1]][n[0]]+(n[2]?"":" pointer-events-none")+" svelte-10vytug")&&h(e,"class",t)},i:Te,o:Te,d(n){n&&E(e)}}}function kr(s,e,t){let{square:n}=e,{color:r}=e,{getGridCoordsFromSquare:i}=e,{flipped:a}=e,{theme:l}=e,{mouseEvents:o=!0}=e,u,f;const m=()=>{const c=i(n);t(3,u=c.x),t(4,f=c.y)};return s.$$set=c=>{"square"in c&&t(5,n=c.square),"color"in c&&t(0,r=c.color),"getGridCoordsFromSquare"in c&&t(6,i=c.getGridCoordsFromSquare),"flipped"in c&&t(7,a=c.flipped),"theme"in c&&t(1,l=c.theme),"mouseEvents"in c&&t(2,o=c.mouseEvents)},s.$$.update=()=>{s.$$.dirty&128&&m()},[r,l,o,u,f,n,i,a]}class wr extends Oe{constructor(e){super(),Fe(this,e,kr,Mr,qe,{square:5,color:0,getGridCoordsFromSquare:6,flipped:7,theme:1,mouseEvents:2})}}const Sr=["a","b","c","d","e","f","g","h"],yr=["8","7","6","5","4","3","2","1"];function Cr(s){s.querySelectorAll("[sf]").forEach(e=>e.remove())}function Yt(s){return`${Sr[s.x]}${yr[s.y]}`}function wn(s,e){return Math.abs((s.x-e.x)*(s.y-e.y))===2}function Zt(s,e){return`${Yt(s)}${Yt(e)}`}function Ar(s,e){return!!(wn(s,e)||Math.abs(s.x-e.x)===Math.abs(s.y-e.y)||s.x===e.x!=(s.y===e.y))}function Sn(s,e,t,n,r,i){let a={x:-1,y:-1},l,o;wn(e,t)&&n?(Math.abs(t.x-e.x)===2?a={x:t.x,y:e.y}:a={x:e.x,y:t.y},a.y-e.y<0?o=Math.PI+Math.atan((a.x-e.x)/(a.y-e.y)):o=Math.atan((a.x-e.x)/Math.abs(a.y-e.y)),l={x:t.x-Math.sign(t.x-a.x)*(a.x!==t.x?.4:0),y:t.y-Math.sign(t.y-a.y)*(a.y!==t.y?.4:0)}):(t.y-e.y<0?o=Math.PI+Math.atan((t.x-e.x)/(t.y-e.y)):o=Math.atan((t.x-e.x)/Math.abs(t.y-e.y)),l={x:t.x-Math.sin(o)*.4,y:t.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};s.setAttribute("points",`${u.x+.5},${u.y+.5} ${a.x!==-1&&a.y!==-1&&n?`${a.x+.5},${a.y+.5} `:""}${l.x+.5},${l.y+.5}`),s.setAttribute("data-sqID",`${Zt(e,t)}`),i!==void 0&&s.setAttribute("opacity",`${i}`),r!==void 0&&(s.setAttribute("marker-start",`url(#start-${r[0]})`),s.setAttribute("marker-end",`url(#end-${r[0]})`),s.setAttribute("stroke",r))}function Ft(s,e,t,n,r,i){if(!(e===void 0||t.x===-1&&t.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),n?e.setAttribute("stroke","red"):r?e.setAttribute("stroke","orange"):i?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),s.querySelectorAll(`\u0441ircle[cx="${t.x+.5}"][cy="${t.y+.5}"]`).forEach(a=>{e!==void 0&&a!==e&&(a.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const a=n?"red":r?"orange":i?"blue":"green";e.setAttribute("stroke",`${a}`),e.setAttribute("marker-start",`url(#start-${a[0]})`),e.setAttribute("marker-end",`url(#end-${a[0]})`),s.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(l=>{e instanceof SVGPolylineElement&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function yn(s,e,t,n,r){const i=document.createElementNS("http://www.w3.org/2000/svg","polyline");return Sn(i,s,e,t,n,r),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.25"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("opacity",r!==void 0?`${r}`:"0.4"),i.setAttribute("marker-start",n?`url(#start-${n[0]})`:"url(#start-g)"),i.setAttribute("marker-end",n?`url(#end-${n[0]})`:"url(#end-g)"),i.setAttribute("stroke",n||"green"),i}function Jt(s,e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",`${s.x+.5}`),n.setAttribute("cy",`${s.y+.5}`),n.setAttribute("r","0.465"),n.setAttribute("opacity",t?`${t}`:"0.4"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","0.07"),n.setAttribute("stroke",e!=null?e:"green"),n}function Pr(s,e,t){e.forEach(n=>{if(n.type==="circle"){const r=qt(n.square),i=Jt(r,n.color,n.opacity);s.appendChild(i)}else if(n.type==="arrow"){const r=yn(qt(n.from),qt(n.to),t,n.color,n.opacity);r.setAttribute("fixed",""),s.appendChild(r)}})}function Ms(s){s.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("sf")||e.remove()})}function Tr(s,e){let{svg:t,flipped:n,enabled:r,settings:i}=e,a=!1,l={x:-1,y:-1},o,u;function f(M,k){const d=s.getBoundingClientRect(),p=n?d.width-(M-d.left):M-d.left,w=n?d.height-(k-d.top):k-d.top;return{x:Math.max(0,Math.min(7,Math.floor(p/(s.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(w/(s.clientHeight/8))))}}function m(M){if(u===void 0||l.x===-1&&l.y===-1)return;const k=f(M.clientX,M.clientY);i.onlyChessMove&&!Ar(l,k)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),l.x===k.x&&l.y===k.y?(Zt(l,k),u instanceof SVGPolylineElement&&(u.remove(),u=Jt(k)),Ft(t,u,l,M.shiftKey,M.ctrlKey,M.altKey),t.appendChild(u),t.querySelectorAll(`circle[cx="${l.x+.5}"][cy="${l.y+.5}"]`).forEach(d=>{d!==u&&(o=d,u!==void 0&&d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,t.querySelectorAll(`polyline[data-sqID="${Zt(l,k)}"]`).forEach(d=>{u===void 0||l.x===-1&&l.y===-1||d===u||(o=d,d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=yn(l,k,i.knightLShape),Ft(t,u,l,M.shiftKey,M.ctrlKey,M.altKey),t.appendChild(u)):u instanceof SVGPolylineElement&&Sn(u,l,k,i.knightLShape)))}function c(M){M.preventDefault()}function C(M){M.preventDefault(),Ft(t,u,l,M.shiftKey,M.ctrlKey,M.altKey)}function q(M){if(M.button===0)a=!1;else if(M.button===2){if(l.x===-1&&l.y===-1)return;t.querySelectorAll("[remove]").forEach(k=>{k.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:Yt(l),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,l={x:-1,y:-1},a=!1,window.removeEventListener("mousemove",m),window.removeEventListener("keydown",C),window.removeEventListener("keyup",C),window.removeEventListener("contextmenu",c)}window.removeEventListener("mouseup",q)}function F(M){if(M.button===0)a=!0,Ms(t),window.addEventListener("mouseup",q);else if(M.button===2&&!a){const k=f(M.clientX,M.clientY);l=k,u=Jt(k),Ft(t,u,l,M.shiftKey,M.ctrlKey,M.altKey),o=void 0,t.querySelectorAll(`circle[cx="${k.x+.5}"][cy="${k.y+.5}"]`).forEach(d=>{o=d,u!==void 0&&d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&t.appendChild(u),window.addEventListener("mousemove",m),window.addEventListener("mouseup",q),window.addEventListener("keydown",C),window.addEventListener("keyup",C),window.addEventListener("contextmenu",c)}}return r&&s.addEventListener("mousedown",F),{update(M){M.svg!==t&&(t=M.svg),M.enabled!==r&&(r=M.enabled,r?s.addEventListener("mousedown",F):(Ms(t),s.removeEventListener("mousedown",F))),i=M.settings,n=M.flipped}}}function ks(s,e,t){const n=s.slice();return n[8]=e[t],n}function ws(s){let e,t,n,r;return{c(){e=ze("marker"),t=ze("path"),n=ze("marker"),r=ze("path"),this.h()},l(i){e=Ve(i,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var a=K(e);t=Ve(a,"path",{fill:!0,d:!0}),K(t).forEach(E),a.forEach(E),n=Ve(i,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var l=K(n);r=Ve(l,"path",{fill:!0,d:!0}),K(r).forEach(E),l.forEach(E),this.h()},h(){h(t,"fill",s[8]),h(t,"d","M 5 0 Q 0 0 0 5 L 0 15 Q 0 20 5 20 Z"),h(e,"id","start-"+s[8][0]),h(e,"viewBox","0 0 5 20"),h(e,"refX","4"),h(e,"refY","10"),h(e,"markerUnits","strokeWidth"),h(e,"markerWidth","0.5"),h(e,"markerHeight","1"),h(e,"orient","auto"),h(r,"fill",s[8]),h(r,"d","M 0 4 L 10 10 L 0 16 Z"),h(n,"id","end-"+s[8][0]),h(n,"viewBox","0 0 10 20"),h(n,"refX","0.2"),h(n,"refY","10"),h(n,"markerUnits","strokeWidth"),h(n,"orient","auto"),h(n,"fill","currentColor")},m(i,a){Y(i,e,a),y(e,t),Y(i,n,a),y(n,r)},p:Te,d(i){i&&E(e),i&&E(n)}}}function Lr(s){let e,t,n,r=s[2],i=[];for(let a=0;a<r.length;a+=1)i[a]=ws(ks(s,r,a));return{c(){e=ze("svg"),t=ze("defs");for(let a=0;a<i.length;a+=1)i[a].c();n=ze("g"),this.h()},l(a){e=Ve(a,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var l=K(e);t=Ve(l,"defs",{});var o=K(t);for(let u=0;u<i.length;u+=1)i[u].l(o);o.forEach(E),n=Ve(l,"g",{}),K(n).forEach(E),l.forEach(E),this.h()},h(){h(e,"xmlns","http://www.w3.org/2000/svg"),Ce(e,"transform","rotate("+(s[1]?"180deg":"0deg")+")"),h(e,"viewBox","0 0 8 8"),h(e,"class","svelte-19gv2n4")},m(a,l){Y(a,e,l),y(e,t);for(let o=0;o<i.length;o+=1)i[o].m(t,null);y(e,n),s[5](n)},p(a,[l]){if(l&4){r=a[2];let o;for(o=0;o<r.length;o+=1){const u=ks(a,r,o);i[o]?i[o].p(u,l):(i[o]=ws(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}l&2&&Ce(e,"transform","rotate("+(a[1]?"180deg":"0deg")+")")},i:Te,o:Te,d(a){a&&E(e),dt(i,a),s[5](null)}}}function Ir(s,e,t){let{flipped:n=!1}=e,{svg:r}=e,{knightLShape:i=!1}=e,{tools:a=[]}=e,l=!1;function o(m){!l||(Cr(r),Pr(r,m,i))}ts(()=>{l=!0,o(a)});const u=["green","red","blue","orange"];function f(m){ue[m?"unshift":"push"](()=>{r=m,t(0,r)})}return s.$$set=m=>{"flipped"in m&&t(1,n=m.flipped),"svg"in m&&t(0,r=m.svg),"knightLShape"in m&&t(3,i=m.knightLShape),"tools"in m&&t(4,a=m.tools)},s.$$.update=()=>{s.$$.dirty&16&&o(a)},[r,n,u,i,a,f]}class Or extends Oe{constructor(e){super(),Fe(this,e,Ir,Lr,qe,{flipped:1,svg:0,knightLShape:3,tools:4})}}function Ss(s,{delay:e=0,duration:t=400,easing:n=ns,x:r=0,y:i=0,opacity:a=0}={}){const l=getComputedStyle(s),o=+l.opacity,u=l.transform==="none"?"":l.transform,f=o*(1-a);return{delay:e,duration:t,easing:n,css:(m,c)=>`
			transform: ${u} translate(${(1-m)*r}px, ${(1-m)*i}px);
			opacity: ${o-f*c}`}}function ct(s,{delay:e=0,duration:t=400,easing:n=ns}={}){const r=getComputedStyle(s),i=+r.opacity,a=parseFloat(r.height),l=parseFloat(r.paddingTop),o=parseFloat(r.paddingBottom),u=parseFloat(r.marginTop),f=parseFloat(r.marginBottom),m=parseFloat(r.borderTopWidth),c=parseFloat(r.borderBottomWidth);return{delay:e,duration:t,easing:n,css:C=>`overflow: hidden;opacity: ${Math.min(C*20,1)*i};height: ${C*a}px;padding-top: ${C*l}px;padding-bottom: ${C*o}px;margin-top: ${C*u}px;margin-bottom: ${C*f}px;border-top-width: ${C*m}px;border-bottom-width: ${C*c}px;`}}function Fr(s){let e,t,n,r,i,a;return{c(){e=D("button"),t=D("img"),this.h()},l(l){e=B(l,"BUTTON",{});var o=K(e);t=B(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(E),this.h()},h(){pt(t.src,n=s[1])||h(t,"src",n),h(t,"alt",r="Promotion to "+s[0].toUpperCase()),h(t,"class","svelte-17pqsbb")},m(l,o){Y(l,e,o),y(e,t),i||(a=de(e,"click",s[2]),i=!0)},p(l,[o]){o&1&&r!==(r="Promotion to "+l[0].toUpperCase())&&h(t,"alt",r)},i:Te,o:Te,d(l){l&&E(e),i=!1,a()}}}function qr(s,e,t){let{piece:n}=e,{isWhite:r}=e,{showModal:i}=e;const a=es(),l=(r?"w":"b")+n.toUpperCase(),o=Xt(l),u=()=>{a("newPromotion",n),t(3,i=!1)};return s.$$set=f=>{"piece"in f&&t(0,n=f.piece),"isWhite"in f&&t(4,r=f.isWhite),"showModal"in f&&t(3,i=f.showModal)},[n,o,u,i,r]}class Rr extends Oe{constructor(e){super(),Fe(this,e,qr,Fr,qe,{piece:0,isWhite:4,showModal:3})}}function ys(s,e,t){const n=s.slice();return n[6]=e[t],n}function Cs(s){let e,t,n,r,i,a=["q","r","b","n"],l=[];for(let u=0;u<4;u+=1)l[u]=As(ys(s,a,u));const o=u=>se(l[u],1,1,()=>{l[u]=null});return{c(){e=D("div"),t=D("div");for(let u=0;u<4;u+=1)l[u].c();this.h()},l(u){e=B(u,"DIV",{class:!0});var f=K(e);t=B(f,"DIV",{class:!0});var m=K(t);for(let c=0;c<4;c+=1)l[c].l(m);m.forEach(E),f.forEach(E),this.h()},h(){h(t,"class","modal-content svelte-it5mr1"),h(e,"class","modal svelte-it5mr1")},m(u,f){Y(u,e,f),y(e,t);for(let m=0;m<4;m+=1)l[m].m(t,null);i=!0},p(u,f){if(f&3){a=["q","r","b","n"];let m;for(m=0;m<4;m+=1){const c=ys(u,a,m);l[m]?(l[m].p(c,f),J(l[m],1)):(l[m]=As(c),l[m].c(),J(l[m],1),l[m].m(t,null))}for(Be(),m=4;m<4;m+=1)o(m);Ue()}},i(u){if(!i){for(let f=0;f<4;f+=1)J(l[f]);nt(()=>{r&&r.end(1),n=Yn(t,Ss,{x:100,duration:300}),n.start()}),i=!0}},o(u){l=l.filter(Boolean);for(let f=0;f<4;f+=1)se(l[f]);n&&n.invalidate(),r=Zn(t,Ss,{x:-200,duration:100}),i=!1},d(u){u&&E(e),dt(l,u),u&&r&&r.end()}}}function As(s){let e,t,n,r;function i(o){s[3](o)}function a(o){s[4](o)}let l={piece:s[6]};return s[1]!==void 0&&(l.isWhite=s[1]),s[0]!==void 0&&(l.showModal=s[0]),e=new Rr({props:l}),ue.push(()=>ce(e,"isWhite",i)),ue.push(()=>ce(e,"showModal",a)),e.$on("newPromotion",s[5]),{c(){Me(e.$$.fragment)},l(o){ke(e.$$.fragment,o)},m(o,u){we(e,o,u),r=!0},p(o,u){const f={};!t&&u&2&&(t=!0,f.isWhite=o[1],ge(()=>t=!1)),!n&&u&1&&(n=!0,f.showModal=o[0],ge(()=>n=!1)),e.$set(f)},i(o){r||(J(e.$$.fragment,o),r=!0)},o(o){se(e.$$.fragment,o),r=!1},d(o){Se(e,o)}}}function Nr(s){let e,t,n=s[0]&&Cs(s);return{c(){n&&n.c(),e=Ae()},l(r){n&&n.l(r),e=Ae()},m(r,i){n&&n.m(r,i),Y(r,e,i),t=!0},p(r,[i]){r[0]?n?(n.p(r,i),i&1&&J(n,1)):(n=Cs(r),n.c(),J(n,1),n.m(e.parentNode,e)):n&&(Be(),se(n,1,1,()=>{n=null}),Ue())},i(r){t||(J(n),t=!0)},o(r){se(n),t=!1},d(r){n&&n.d(r),r&&E(e)}}}function Dr(s,e,t){let n=!1,r;function i(u){t(0,n=!0),u?t(1,r=!0):t(1,r=!1)}function a(u){r=u,t(1,r)}function l(u){n=u,t(0,n)}function o(u){st.call(this,s,u)}return[n,r,i,a,l,o]}class Br extends Oe{constructor(e){super(),Fe(this,e,Dr,Nr,qe,{openPromotionModal:2})}get openPromotionModal(){return this.$$.ctx[2]}}const Ur=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,Hr=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,zr=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,Vr=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function Ps(s){let e,t,n,r;return{c(){e=D("audio"),t=D("track"),n=D("source"),this.h()},l(i){e=B(i,"AUDIO",{preload:!0});var a=K(e);t=B(a,"TRACK",{kind:!0}),n=B(a,"SOURCE",{src:!0}),a.forEach(E),this.h()},h(){h(t,"kind","captions"),pt(n.src,r=Ur)||h(n,"src",r),h(e,"preload","auto")},m(i,a){Y(i,e,a),y(e,t),y(e,n),s[3](e)},p:Te,d(i){i&&E(e),s[3](null)}}}function Ts(s){let e,t,n,r;return{c(){e=D("audio"),t=D("track"),n=D("source"),this.h()},l(i){e=B(i,"AUDIO",{preload:!0});var a=K(e);t=B(a,"TRACK",{kind:!0}),n=B(a,"SOURCE",{src:!0}),a.forEach(E),this.h()},h(){h(t,"kind","captions"),pt(n.src,r=Hr)||h(n,"src",r),h(e,"preload","auto")},m(i,a){Y(i,e,a),y(e,t),y(e,n),s[4](e)},p:Te,d(i){i&&E(e),s[4](null)}}}function Ls(s){let e,t,n,r;return{c(){e=D("audio"),t=D("track"),n=D("source"),this.h()},l(i){e=B(i,"AUDIO",{preload:!0});var a=K(e);t=B(a,"TRACK",{kind:!0}),n=B(a,"SOURCE",{src:!0}),a.forEach(E),this.h()},h(){h(t,"kind","captions"),pt(n.src,r=zr)||h(n,"src",r),h(e,"preload","auto")},m(i,a){Y(i,e,a),y(e,t),y(e,n),s[5](e)},p:Te,d(i){i&&E(e),s[5](null)}}}function Is(s){let e,t,n,r;return{c(){e=D("audio"),t=D("track"),n=D("source"),this.h()},l(i){e=B(i,"AUDIO",{preload:!0});var a=K(e);t=B(a,"TRACK",{kind:!0}),n=B(a,"SOURCE",{src:!0}),a.forEach(E),this.h()},h(){h(t,"kind","captions"),pt(n.src,r=Vr)||h(n,"src",r),h(e,"preload","auto")},m(i,a){Y(i,e,a),y(e,t),y(e,n),s[6](e)},p:Te,d(i){i&&E(e),s[6](null)}}}function Wr(s){let e,t,n,r,i=s[0].MOVE&&Ps(s),a=s[0].CAPTURE&&Ts(s),l=s[0].CASTLE&&Ls(s),o=s[0].UNDO&&Is(s);return{c(){i&&i.c(),e=$(),a&&a.c(),t=$(),l&&l.c(),n=$(),o&&o.c(),r=Ae()},l(u){i&&i.l(u),e=ee(u),a&&a.l(u),t=ee(u),l&&l.l(u),n=ee(u),o&&o.l(u),r=Ae()},m(u,f){i&&i.m(u,f),Y(u,e,f),a&&a.m(u,f),Y(u,t,f),l&&l.m(u,f),Y(u,n,f),o&&o.m(u,f),Y(u,r,f)},p(u,[f]){u[0].MOVE?i?i.p(u,f):(i=Ps(u),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),u[0].CAPTURE?a?a.p(u,f):(a=Ts(u),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),u[0].CASTLE?l?l.p(u,f):(l=Ls(u),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),u[0].UNDO?o?o.p(u,f):(o=Is(u),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i:Te,o:Te,d(u){i&&i.d(u),u&&E(e),a&&a.d(u),u&&E(t),l&&l.d(u),u&&E(n),o&&o.d(u),u&&E(r)}}}function Kr(s,e,t){let{settings:n}=e;const r={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},i=()=>{r.CASTLE&&(r.CASTLE.pause(),t(1,r.CASTLE.currentTime=0,r)),r.MOVE&&(r.MOVE.pause(),t(1,r.MOVE.currentTime=0,r)),r.CAPTURE&&(r.CAPTURE.pause(),t(1,r.CAPTURE.currentTime=0,r)),r.UNDO&&(r.UNDO.pause(),t(1,r.UNDO.currentTime=0,r))},a=c=>c===void 0||n[c];function l(c){switch(i(),c){case"MOVE":r.MOVE&&a("MOVE")&&r.MOVE.play();break;case"CAPTURE":r.CAPTURE&&a("CAPTURE")?r.CAPTURE.play():r.MOVE&&a("MOVE")&&r.MOVE.play();break;case"CASTLE":r.CASTLE&&a("CASTLE")?r.CASTLE.play():r.MOVE&&a("MOVE")&&r.MOVE.play();break;case"UNDO":r.UNDO&&a("UNDO")?(t(1,r.UNDO.volume=.3,r),r.UNDO.play()):r.MOVE&&a("MOVE")&&r.MOVE.play();break}}function o(c){ue[c?"unshift":"push"](()=>{r.MOVE=c,t(1,r)})}function u(c){ue[c?"unshift":"push"](()=>{r.CAPTURE=c,t(1,r)})}function f(c){ue[c?"unshift":"push"](()=>{r.CASTLE=c,t(1,r)})}function m(c){ue[c?"unshift":"push"](()=>{r.UNDO=c,t(1,r)})}return s.$$set=c=>{"settings"in c&&t(0,n=c.settings)},[n,r,l,o,u,f,m]}class jr extends Oe{constructor(e){super(),Fe(this,e,Kr,Wr,qe,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Os=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,Fs=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function Gr(s,e){const{minWidth:t,maxWidth:n,curWidth:r}=e;let{mouseEvents:i}=e,a=r,l,o,u,f;function m(q){q.stopPropagation(),s.dispatchEvent(new CustomEvent("resizing",{detail:{size:Math.max(Math.max(t,Math.min(n,u+(q.pageX-l))),Math.max(t,Math.min(n,f+(q.pageY-o))))}}))}function c(q){q.stopPropagation(),s.dispatchEvent(new CustomEvent("endResizing",{detail:{size:Math.max(Math.max(t,Math.min(n,u+Math.floor((q.pageX-l)/8)*8)),Math.max(t,Math.min(n,f+Math.floor((q.pageY-o)/8)*8)))}})),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",c)}function C(q){!i||(q.stopPropagation(),q.button===0&&(l=q.pageX,u=a,o=q.pageY,f=a,window.addEventListener("mousemove",m),window.addEventListener("mouseup",c)))}return s.addEventListener("mousedown",C),{update(q){a=q.curWidth,i!==q.mouseEvents&&(i=q.mouseEvents)},destroy(){s.removeEventListener("mousedown",C)}}}function Qr(s){let e,t,n,r,i,a,l;return{c(){e=D("div"),t=ze("svg"),n=ze("path"),this.h()},l(o){e=B(o,"DIV",{style:!0,class:!0});var u=K(e);t=Ve(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var f=K(t);n=Ve(f,"path",{d:!0}),K(n).forEach(E),f.forEach(E),u.forEach(E),this.h()},h(){h(n,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),h(t,"xmlns","http://www.w3.org/2000/svg"),h(t,"viewBox","0 0 16 16"),h(t,"fill","currentColor"),Ce(e,"color",je.colors[s[0].state.board.boardTheme].black),h(e,"class",r=os(s[2]?"cursor-nwse-resize":"")+" svelte-1ssh93t")},m(o,u){Y(o,e,u),y(e,t),y(t,n),a||(l=[de(e,"pointerdown",gn(s[3])),xt(i=Gr.call(null,e,{mouseEvents:s[2],minWidth:s[0].state.board.resizible.min,maxWidth:s[0].state.board.resizible.max,curWidth:s[0].state.board.size})),de(e,"resizing",s[4]),de(e,"endResizing",s[5])],a=!0)},p(o,[u]){u&1&&Ce(e,"color",je.colors[o[0].state.board.boardTheme].black),u&4&&r!==(r=os(o[2]?"cursor-nwse-resize":"")+" svelte-1ssh93t")&&h(e,"class",r),i&&$t(i.update)&&u&5&&i.update.call(null,{mouseEvents:o[2],minWidth:o[0].state.board.resizible.min,maxWidth:o[0].state.board.resizible.max,curWidth:o[0].state.board.size})},i:Te,o:Te,d(o){o&&E(e),a=!1,xe(l)}}}function Xr(s,e,t){let{chessboard:n}=e,{setSize:r}=e,{mouseEvents:i=!0}=e;function a(u){st.call(this,s,u)}const l=u=>r(u.detail.size),o=u=>r(u.detail.size);return s.$$set=u=>{"chessboard"in u&&t(0,n=u.chessboard),"setSize"in u&&t(1,r=u.setSize),"mouseEvents"in u&&t(2,i=u.mouseEvents)},[n,r,i,a,l,o]}class Yr extends Oe{constructor(e){super(),Fe(this,e,Xr,Qr,qe,{chessboard:0,setSize:1,mouseEvents:2})}}function qs(s,e,t){const n=s.slice();return n[73]=e[t],n}function Rs(s,e,t){const n=s.slice();return n[76]=e[t],n}function Ns(s){let e=[],t=new Map,n,r,i=s[5].state.pieces;const a=l=>l[76];for(let l=0;l<i.length;l+=1){let o=Rs(s,i,l),u=a(o);t.set(u,e[l]=Ds(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Ae()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);n=Ae()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Y(l,n,o),r=!0},p(l,o){o[0]&29742&&(i=l[5].state.pieces,Be(),e=bn(e,o,a,1,l,i,t,n.parentNode,pn,Ds,n,Rs),Ue())},i(l){if(!r){for(let o=0;o<i.length;o+=1)J(e[o]);r=!0}},o(l){for(let o=0;o<e.length;o+=1)se(e[o]);r=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&E(n)}}}function Ds(s,e){let t,n,r;function i(){return e[53](e[76])}function a(){return e[54](e[76])}function l(...u){return e[55](e[76],...u)}function o(){return e[57](e[76])}return n=new kn({props:{square:e[76].square,name:e[76].name,mouseEvents:e[5].state.board.mouseEvents,legalState:e[5].state.legal,draggableState:e[5].state.draggable,selectableState:e[5].state.selectable,movableState:e[5].state.movable,getGridCoordsFromSquare:e[5].getGridCoordsFromSquare,flipped:e[5].flipped}}),n.$on("move",e[12]),n.$on("clicked",i),n.$on("startMoving",a),n.$on("moving",l),n.$on("endDragging",e[56]),n.$on("select",o),n.$on("deselect",e[58]),{key:s,first:null,c(){t=Ae(),Me(n.$$.fragment),this.h()},l(u){t=Ae(),ke(n.$$.fragment,u),this.h()},h(){this.first=t},m(u,f){Y(u,t,f),we(n,u,f),r=!0},p(u,f){e=u;const m={};f[0]&32&&(m.square=e[76].square),f[0]&32&&(m.name=e[76].name),f[0]&32&&(m.mouseEvents=e[5].state.board.mouseEvents),f[0]&32&&(m.legalState=e[5].state.legal),f[0]&32&&(m.draggableState=e[5].state.draggable),f[0]&32&&(m.selectableState=e[5].state.selectable),f[0]&32&&(m.movableState=e[5].state.movable),f[0]&32&&(m.getGridCoordsFromSquare=e[5].getGridCoordsFromSquare),f[0]&32&&(m.flipped=e[5].flipped),n.$set(m)},i(u){r||(J(n.$$.fragment,u),r=!0)},o(u){se(n.$$.fragment,u),r=!1},d(u){u&&E(t),Se(n,u)}}}function Bs(s){let e,t;return e=new kn({props:{isGhost:!0,square:s[5].ghostPiece.square,name:s[5].ghostPiece.name,getGridCoordsFromSquare:s[5].getGridCoordsFromSquare,flipped:s[5].flipped}}),{c(){Me(e.$$.fragment)},l(n){ke(e.$$.fragment,n)},m(n,r){we(e,n,r),t=!0},p(n,r){const i={};r[0]&32&&(i.square=n[5].ghostPiece.square),r[0]&32&&(i.name=n[5].ghostPiece.name),r[0]&32&&(i.getGridCoordsFromSquare=n[5].getGridCoordsFromSquare),r[0]&32&&(i.flipped=n[5].flipped),e.$set(i)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function Us(s){let e=[],t=new Map,n,r,i=[...s[5].state.markedSquares];const a=l=>l[73];for(let l=0;l<i.length;l+=1){let o=qs(s,i,l),u=a(o);t.set(u,e[l]=Hs(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Ae()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);n=Ae()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Y(l,n,o),r=!0},p(l,o){o[0]&34&&(i=[...l[5].state.markedSquares],Be(),e=bn(e,o,a,1,l,i,t,n.parentNode,pn,Hs,n,qs),Ue())},i(l){if(!r){for(let o=0;o<i.length;o+=1)J(e[o]);r=!0}},o(l){for(let o=0;o<e.length;o+=1)se(e[o]);r=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&E(n)}}}function Hs(s,e){let t,n,r;return n=new wr({props:{theme:e[5].state.board.boardTheme,square:e[73].square,color:e[73].color,getGridCoordsFromSquare:e[5].getGridCoordsFromSquare,flipped:e[5].flipped,mouseEvents:e[5].state.board.mouseEvents}}),n.$on("dragenter",e[59]),{key:s,first:null,c(){t=Ae(),Me(n.$$.fragment),this.h()},l(i){t=Ae(),ke(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){Y(i,t,a),we(n,i,a),r=!0},p(i,a){e=i;const l={};a[0]&32&&(l.theme=e[5].state.board.boardTheme),a[0]&32&&(l.square=e[73].square),a[0]&32&&(l.color=e[73].color),a[0]&32&&(l.getGridCoordsFromSquare=e[5].getGridCoordsFromSquare),a[0]&32&&(l.flipped=e[5].flipped),a[0]&32&&(l.mouseEvents=e[5].state.board.mouseEvents),n.$set(l)},i(i){r||(J(n.$$.fragment,i),r=!0)},o(i){se(n.$$.fragment,i),r=!1},d(i){i&&E(t),Se(n,i)}}}function zs(s){let e,t;return e=new Ii({props:{theme:s[5].state.board.boardTheme,flipped:s[5].flipped}}),{c(){Me(e.$$.fragment)},l(n){ke(e.$$.fragment,n)},m(n,r){we(e,n,r),t=!0},p(n,r){const i={};r[0]&32&&(i.theme=n[5].state.board.boardTheme),r[0]&32&&(i.flipped=n[5].flipped),e.$set(i)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function Vs(s){let e,t;return e=new Yr({props:{chessboard:s[5],setSize:s[4],mouseEvents:s[5].state.board.mouseEvents}}),{c(){Me(e.$$.fragment)},l(n){ke(e.$$.fragment,n)},m(n,r){we(e,n,r),t=!0},p(n,r){const i={};r[0]&32&&(i.chessboard=n[5]),r[0]&32&&(i.mouseEvents=n[5].state.board.mouseEvents),e.$set(i)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function Ws(s){let e,t,n;function r(a){s[60](a)}let i={flipped:s[5].flipped,tools:s[5].state.drawTools.tools,knightLShape:s[5].state.drawTools.settings.knightLShape};return s[7]!==void 0&&(i.svg=s[7]),e=new Or({props:i}),ue.push(()=>ce(e,"svg",r)),{c(){Me(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,l){const o={};l[0]&32&&(o.flipped=a[5].flipped),l[0]&32&&(o.tools=a[5].state.drawTools.tools),l[0]&32&&(o.knightLShape=a[5].state.drawTools.settings.knightLShape),!t&&l[0]&128&&(t=!0,o.svg=a[7],ge(()=>t=!1)),e.$set(o)},i(a){n||(J(e.$$.fragment,a),n=!0)},o(a){se(e.$$.fragment,a),n=!1},d(a){Se(e,a)}}}function Ks(s){let e,t,n={};return e=new Br({props:n}),s[61](e),e.$on("newPromotion",s[15]),{c(){Me(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,i){we(e,r,i),t=!0},p(r,i){const a={};e.$set(a)},i(r){t||(J(e.$$.fragment,r),t=!0)},o(r){se(e.$$.fragment,r),t=!1},d(r){s[61](null),Se(e,r)}}}function js(s){let e,t,n={settings:s[5].state.sounds.settings};return e=new jr({props:n}),s[66](e),{c(){Me(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,i){we(e,r,i),t=!0},p(r,i){const a={};i[0]&32&&(a.settings=r[5].state.sounds.settings),e.$set(a)},i(r){t||(J(e.$$.fragment,r),t=!0)},o(r){se(e.$$.fragment,r),t=!1},d(r){s[66](null),Se(e,r)}}}function Zr(s){let e,t,n,r,i,a,l,o,u,f,m,c,C,q,F,M,k,d=s[5].state.board.startFen&&Ns(s),p=s[5].ghostPiece&&Bs(s),w=s[5].highlightEnabled&&Us(s),v=s[5].state.board.notation&&zs(s),A=s[5].state.board.resizible.enabled&&Vs(s),W=s[5].state.drawTools.enabled&&Ws(s),j=s[5].legalEnabled&&Ks(s),V=s[5].soundsEnabled&&js(s);return{c(){e=D("div"),t=D("div"),d&&d.c(),n=$(),p&&p.c(),r=$(),w&&w.c(),i=$(),v&&v.c(),a=$(),A&&A.c(),l=$(),W&&W.c(),o=$(),j&&j.c(),C=$(),V&&V.c(),q=Ae(),this.h()},l(O){e=B(O,"DIV",{class:!0,style:!0});var G=K(e);t=B(G,"DIV",{style:!0,class:!0});var ie=K(t);d&&d.l(ie),ie.forEach(E),n=ee(G),p&&p.l(G),r=ee(G),w&&w.l(G),i=ee(G),v&&v.l(G),a=ee(G),A&&A.l(G),l=ee(G),W&&W.l(G),o=ee(G),j&&j.l(G),G.forEach(E),C=ee(O),V&&V.l(O),q=Ae(),this.h()},h(){Ce(t,"width","100%"),Ce(t,"height","100%"),h(t,"class","noselect"),h(e,"class",u="noselect board "+(s[5].state.board.style.shadow?"shadow":"")+" text-sm "+s[0]+" svelte-1bsiysh"),h(e,"style",f="--boardTheme: url("+(s[5].state.board.boardTheme==="standard"?Os:Fs)+"); "+(s[5].state.board.style.borderRadius!=="0rem"&&s[5].state.board.style.borderRadius!=="0px"?`border-radius: ${s[5].state.board.style.borderRadius};`:"")),nt(()=>s[65].call(e))},m(O,G){Y(O,e,G),y(e,t),d&&d.m(t,null),y(e,n),p&&p.m(e,null),y(e,r),w&&w.m(e,null),y(e,i),v&&v.m(e,null),y(e,a),A&&A.m(e,null),y(e,l),W&&W.m(e,null),y(e,o),j&&j.m(e,null),s[64](e),c=Jn(e,s[65].bind(e)),Y(O,C,G),V&&V.m(O,G),Y(O,q,G),F=!0,M||(k=[de(e,"pointerdown",s[11]),de(e,"contextmenu",us(s[51])),de(e,"drag",us(s[52])),xt(m=Tr.call(null,e,{svg:s[7],flipped:s[5].flipped,enabled:s[5].state.drawTools.enabled&&s[5].state.board.mouseEvents,settings:s[5].state.drawTools.settings})),de(e,"drawCircle",s[62]),de(e,"drawArrow",s[63])],M=!0)},p(O,G){O[5].state.board.startFen?d?(d.p(O,G),G[0]&32&&J(d,1)):(d=Ns(O),d.c(),J(d,1),d.m(t,null)):d&&(Be(),se(d,1,1,()=>{d=null}),Ue()),O[5].ghostPiece?p?(p.p(O,G),G[0]&32&&J(p,1)):(p=Bs(O),p.c(),J(p,1),p.m(e,r)):p&&(Be(),se(p,1,1,()=>{p=null}),Ue()),O[5].highlightEnabled?w?(w.p(O,G),G[0]&32&&J(w,1)):(w=Us(O),w.c(),J(w,1),w.m(e,i)):w&&(Be(),se(w,1,1,()=>{w=null}),Ue()),O[5].state.board.notation?v?(v.p(O,G),G[0]&32&&J(v,1)):(v=zs(O),v.c(),J(v,1),v.m(e,a)):v&&(Be(),se(v,1,1,()=>{v=null}),Ue()),O[5].state.board.resizible.enabled?A?(A.p(O,G),G[0]&32&&J(A,1)):(A=Vs(O),A.c(),J(A,1),A.m(e,l)):A&&(Be(),se(A,1,1,()=>{A=null}),Ue()),O[5].state.drawTools.enabled?W?(W.p(O,G),G[0]&32&&J(W,1)):(W=Ws(O),W.c(),J(W,1),W.m(e,o)):W&&(Be(),se(W,1,1,()=>{W=null}),Ue()),O[5].legalEnabled?j?(j.p(O,G),G[0]&32&&J(j,1)):(j=Ks(O),j.c(),J(j,1),j.m(e,null)):j&&(Be(),se(j,1,1,()=>{j=null}),Ue()),(!F||G[0]&33&&u!==(u="noselect board "+(O[5].state.board.style.shadow?"shadow":"")+" text-sm "+O[0]+" svelte-1bsiysh"))&&h(e,"class",u),(!F||G[0]&32&&f!==(f="--boardTheme: url("+(O[5].state.board.boardTheme==="standard"?Os:Fs)+"); "+(O[5].state.board.style.borderRadius!=="0rem"&&O[5].state.board.style.borderRadius!=="0px"?`border-radius: ${O[5].state.board.style.borderRadius};`:"")))&&h(e,"style",f),m&&$t(m.update)&&G[0]&160&&m.update.call(null,{svg:O[7],flipped:O[5].flipped,enabled:O[5].state.drawTools.enabled&&O[5].state.board.mouseEvents,settings:O[5].state.drawTools.settings}),O[5].soundsEnabled?V?(V.p(O,G),G[0]&32&&J(V,1)):(V=js(O),V.c(),J(V,1),V.m(q.parentNode,q)):V&&(Be(),se(V,1,1,()=>{V=null}),Ue())},i(O){F||(J(d),J(p),J(w),J(v),J(A),J(W),J(j),J(V),F=!0)},o(O){se(d),se(p),se(w),se(v),se(A),se(W),se(j),se(V),F=!1},d(O){O&&E(e),d&&d.d(),p&&p.d(),w&&w.d(),v&&v.d(),A&&A.d(),W&&W.d(),j&&j.d(),s[64](null),c(),O&&E(C),V&&V.d(O),O&&E(q),M=!1,xe(k)}}}function Jr(s,e,t){let{config:n}=e,{className:r=""}=e;const i=new ki(n),a=es();let l,o,u,f,m="";xn(()=>{document.documentElement.hasAttribute("style")&&i.state.board.resizible.enabled&&document.documentElement.removeAttribute("style")});const c=S=>{i.clearAllSquares(S),S===te.LEGAL&&i.clearAllSquares(te.LEGALHOVER),S===te.PREMOVE&&i.clearAllSquares(te.PREMOVEHOVER),t(5,i)},C=(S,x)=>{!q(Ot(x))||(i.highlightSquare(S,x),t(5,i))},q=S=>i.highlightEnabled&&(S===void 0||i.highlightSettings[typeof S=="string"?S:Ot(S)]),F=S=>{if(!i.selectableEnabled)return;M(!0);const x=i.getPieceFromSquare(S);x!==void 0&&(t(5,i.selectedPiece=x,i),H())},M=(S=!0)=>{c(te.SELECT),c(te.LEGAL),c(te.PREMOVE),t(5,i.selectedPiece=void 0,i),S&&(c(te.NEXTMOVE),t(5,i.currentPreMove="",i))},k=S=>{c(te.CHECK),S&&i.legalEnabled&&C(S,te.CHECK),t(5,i)},d=()=>{c(te.CHECK)},p=S=>{i.flipBoard(S),t(5,i)},w=(S,x)=>{S.forEach(fe=>i.highlightSquare(fe,x)),t(5,i)},v=(S,x=!0,fe=te.MOVE)=>{S.length<4||!q(Ot(fe))||(x&&c(fe),w([S.substring(0,2),S.substring(2,4)],fe))},A=(S,x,fe=te.MOVE)=>{const ye=[];x&&c(fe),S.forEach(Ie=>{Ie.length<4||(ye.push(Ie.substring(0,2)),ye.push(Ie.substring(2,4)))}),w(ye,fe)},W=S=>{C(S.substring(2,4),te.LEGAL)},j=(S,x,fe=te.LEGAL)=>{c(fe),q(Ot(fe))&&(S.forEach(ye=>{ye.length<4||(x===void 0||ye.substring(0,2)===x)&&i.highlightSquare(ye.substring(2,4),fe)}),t(5,i))},V=(S,x=!0)=>{i.makeMove(S),x&&v(S),t(5,i)},O=S=>{i.removePiece(S),t(5,i)},G=S=>i.whiteToMove&&S[0]==="w"||!i.whiteToMove&&S[0]==="b",ie=()=>{!i.legalEnabled||(i.state.callbacks.getWhiteToMove&&t(5,i.whiteToMove=i.state.callbacks.getWhiteToMove(),i),i.state.callbacks.getPreMoves&&i.preMovesEnabled?t(5,i.preMoves=i.state.callbacks.getPreMoves(),i):t(5,i.preMoves=[],i),i.state.callbacks.getLegalMoves&&i.state.legal.enabled?t(5,i.legalMoves=i.state.callbacks.getLegalMoves(),i):t(5,i.legalMoves=[],i),H(),i.state.callbacks.getInCheck&&i.state.callbacks.getInCheck()?i.whiteToMove?k(i.getWhiteKingSquare()):k(i.getBlackKingSquare()):d())},me=S=>{i.soundsEnabled&&u&&u.playMoveSound(S)},oe=S=>{i.setGhostPiece(S),t(5,i)},g=()=>{i.removeGhostPiece(),t(5,i)},_=S=>{if(S.substring(0,2)===S.substring(2,4))return;i.state.callbacks.beforeMove&&i.state.callbacks.beforeMove(S),M();const x=i.getRookMoveIfIsCastling(S),fe=i.getCapturedPawnSquareIfIsEnPassant(S);if(x&&i.legalEnabled&&i.state.legal.settings.allowCastling?(V(x,!1),me("CASTLE")):fe&&i.legalEnabled&&i.state.legal.settings.allowEnPassant?(O(fe),me("CAPTURE")):i.isCapture(S)?me("CAPTURE"):me("MOVE"),g(),V(S),i.state.callbacks.afterMove&&i.state.callbacks.afterMove(S),ie(),i.legalEnabled&&i.preMovesEnabled&&i.currentPreMove!==""){if(i.legalMoves.includes(i.state.legal.preMoves.curMove)||i.legalMoves.includes(`${i.state.legal.preMoves.curMove}q`)){const ye=i.currentPreMove;t(5,i.currentPreMove="",i),$n().then(()=>{_(ye)})}c(te.NEXTMOVE)}},b=S=>{!i.legalEnabled||!i.preMovesEnabled||!i.movableEnabled||(c(te.PREMOVE),v(S,!0,te.NEXTMOVE),t(5,i.currentPreMove=S,i),a("nextMove",{move:S}))},P=S=>{f.openPromotionModal(!0),m=S,i.makeMove(S),c(te.LEGAL),c(te.SELECT),v(S)},L=(S,x)=>{i.clearSquare(S,x),t(5,i)},I=()=>{i.clearAllPieces(),t(5,i)},z=(S,x)=>{i.setPiece(S,x),t(5,i)},U=(S,x)=>{var ye;const fe=(ye=i.getPieceFromSquare(S))==null?void 0:ye.name;!fe||(x!==void 0?i.setPiece(S,`${x===Ee.WHITE?"w":"b"}${fe[1]}`):i.setPiece(S,`${fe[0]==="w"?"b":"w"}${fe[1]}`),t(5,i))},X=(S,x)=>{const fe=Math.floor(S/i.state.board.size*8),ye=Math.floor(x/i.state.board.size*8),Ie=i.flipped?Math.abs(fe-7):fe,Je=i.flipped?ye:Math.abs(ye-7);return`${Object.keys(i.letters)[Ie]}${(Je+1).toString()}`},ae=S=>{if(!i.state.board.mouseEvents)return;if(S.button===2){M();return}if(!i.movableEnabled)return;const x=l.getBoundingClientRect(),fe=S.clientX-x.left,ye=S.clientY-x.top,Ie=X(fe,ye),Je=i.getPieceFromSquare(Ie);if(a("squareClick",{square:Ie,piece:Je?Je.name:void 0}),!i.selectableEnabled){M();return}if(i.selectedPiece&&i.selectedPiece.square!==Ie&&!i.legalEnabled){_(i.selectedPiece.square+Ie),M();return}if(i.selectedPiece&&i.selectedPiece.square!==Ie&&!G(i.selectedPiece.name)){i.preMovesEnabled&&i.preMoves.includes(i.selectedPiece.square+Ie)&&Je!==void 0&&Je.name[0]!==i.selectedPiece.name[0]&&b(i.selectedPiece.square+Ie),M(!1);return}i.selectedPiece&&i.selectedPiece.square!==Ie&&(Je===void 0||Je.name[0]!==i.selectedPiece.name[0])&&G(i.selectedPiece.name)&&(i.isPromotion(i.selectedPiece.square+Ie)&&i.legalMoves.includes(`${i.selectedPiece.square+Ie}q`)?P(i.selectedPiece.square+Ie):i.legalMoves.includes(i.selectedPiece.square+Ie)&&_(i.selectedPiece.square+Ie),M())},T=S=>{const x=S.detail;i.legalEnabled?i.isPromotion(x)&&i.legalMoves.includes(`${x}q`)?P(x):i.legalMoves.includes(x)?_(x):i.preMovesEnabled&&i.preMoves.includes(x)?b(x):M():_(x),c(te.LEGAL),c(te.PREMOVE),t(5,i)},H=()=>{if(i.selectableEnabled&&i.selectedPiece){if(C(i.selectedPiece.square,te.SELECT),!i.legalEnabled)return;c(te.LEGAL),c(te.PREMOVE),G(i.selectedPiece.name)&&j(i.legalMoves,i.selectedPiece.square),!G(i.selectedPiece.name)&&i.preMovesEnabled&&j(i.preMoves,i.selectedPiece.square,te.PREMOVE)}},re=(S,x=!0,fe="MOVE")=>{if(i.updatePiecesWithFen(S),x&&M(),c(),g(),ie(),t(5,i.currentPreMove="",i),i.state.callbacks.getLastMove){const ye=i.state.callbacks.getLastMove();t(5,i.lastMove=ye,i),fe!==!1&&(fe!=="MOVE"?me(fe):i.isCastling(ye)?me("CASTLE"):me(fe)),v(ye)}else fe!==!1&&me(fe);H(),t(5,i)},Q=()=>i.getShortFEN(),R=S=>{!S||i.state.board.size===S||(t(5,i.state.board.size=S,i),i.state.board.resizible.enabled&&document.documentElement.style.setProperty("--boardSize",`${i.state.board.size}px`))},Z=S=>{var x;return(x=i.getPieceFromSquare(S))==null?void 0:x.name},le=S=>{t(5,i.state.drawTools.tools=S,i)},_e=S=>{t(5,i.state.drawTools.tools=i.state.drawTools.tools.filter(x=>S.type&&x.type!==S.type||S.from&&(x.type==="arrow"&&x.from!==S.from||x.type==="circle"&&x.square!==S.from)||S.to&&x.type==="arrow"&&x.to!==S.to||S.fixed!==void 0&&x.fixed!==S.fixed),i)},ne=S=>{S===!1?t(5,i.state.movable.enabled=!1,i):(t(5,i.state.movable.enabled=!0,i),t(5,i.state.movable.color=S===!0?Ee.BOTH:S,i))},ve=S=>{S.length<4||(t(5,i.lastMove=S,i),v(S))},Re=S=>{t(5,i.legalMoves=S,i)},He=S=>{t(5,i.preMoves=S,i)},De=()=>i.state,Ne=S=>{t(5,i.state=S,i),c(),ie(),v(i.lastMove),v(i.currentPreMove,!0,te.NEXTMOVE),H()},Le=S=>{S!==void 0&&(i.setConfigSettings(S),t(5,i),Ne(i.state))},Ke=S=>S.getConfig(),Ge=(S,x)=>{const fe=l.getBoundingClientRect();i.legalEnabled&&(G(x.name)&&i.legalHover(X(S.detail.x-fe.x,S.detail.y-fe.y)),!G(x.name)&&i.preMovesEnabled&&i.preMoveHover(X(S.detail.x-fe.x,S.detail.y-fe.y))),t(5,i)},Xe=S=>{i.ghostPieceEnabled&&oe(S),c(te.SELECT)},$e=S=>{const x=i.getPieceFromSquare(m.substring(2,4));if(!x)return;const fe=x.name[0]+S.detail.toUpperCase(),ye=m+S.detail;i.state.callbacks.beforeMove&&i.state.callbacks.beforeMove(ye),i.setPiece(x.square,fe),t(5,i),me("MOVE"),i.state.callbacks.afterMove&&i.state.callbacks.afterMove(ye),ie()};ts(()=>{ie(),i.state.callbacks.getLastMove&&v(i.state.callbacks.getLastMove()),i.state.board.resizible&&R(i.state.board.size-i.state.board.size%8)});function it(S){st.call(this,s,S)}function kt(S){st.call(this,s,S)}const wt=S=>{a("piececlick",{piece:S}),F(S.square)},et=S=>{a("startDragging",{piece:S}),Xe(S)},St=(S,x)=>Ge(x,S);function mt(S){st.call(this,s,S)}const yt=S=>{C(S.square,te.SELECT)},Ye=()=>{M()},Ct=S=>{C(S.detail.square,te.LEGALHOVER)};function Ze(S){o=S,t(7,o)}function rt(S){ue[S?"unshift":"push"](()=>{f=S,t(9,f)})}const At=S=>a("drawCircle",{square:S.detail.square,color:S.detail.color}),Lt=S=>a("drawArrow",{move:S.detail.move,color:S.detail.color});function Ut(S){ue[S?"unshift":"push"](()=>{l=S,t(6,l)})}function Ht(){i.state.board.size=this.clientWidth,t(5,i)}function zt(S){ue[S?"unshift":"push"](()=>{u=S,t(8,u)})}return s.$$set=S=>{"config"in S&&t(16,n=S.config),"className"in S&&t(0,r=S.className)},s.$$.update=()=>{s.$$.dirty[0]&32&&R(i.state.board.size-i.state.board.size%8)},[r,C,F,M,R,i,l,o,u,f,a,ae,T,Ge,Xe,$e,n,c,k,d,p,w,v,A,W,j,V,O,ie,me,_,b,P,L,I,z,U,X,re,Q,Z,le,_e,ne,ve,Re,He,De,Ne,Le,Ke,it,kt,wt,et,St,mt,yt,Ye,Ct,Ze,rt,At,Lt,Ut,Ht,zt]}class xr extends Oe{constructor(e){super(),Fe(this,e,Jr,Zr,qe,{config:16,className:0,clearAllSquares:17,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:18,removeCheckSquare:19,flipBoard:20,highlightManySquares:21,highlightMove:22,highlightMoves:23,highlightLegalMove:24,highlightLegalMoves:25,movePiece:26,removePiece:27,updateLegalState:28,playMoveSound:29,makeMove:30,makeNextMove:31,makeMovePromotion:32,removeSquareHighlight:33,removeAllPiece:34,createPiece:35,changeColorOfPiece:36,getSquareFromCoords:37,setFEN:38,getShortFEN:39,setSize:4,getPieceFromSquare:40,setTools:41,removeTools:42,setMovableColor:43,setLastMove:44,setLegalMoves:45,setPreMoves:46,getState:47,setState:48,setConfigSettings:49,getConfigFromState:50},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[17]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[18]}get removeCheckSquare(){return this.$$.ctx[19]}get flipBoard(){return this.$$.ctx[20]}get highlightManySquares(){return this.$$.ctx[21]}get highlightMove(){return this.$$.ctx[22]}get highlightMoves(){return this.$$.ctx[23]}get highlightLegalMove(){return this.$$.ctx[24]}get highlightLegalMoves(){return this.$$.ctx[25]}get movePiece(){return this.$$.ctx[26]}get removePiece(){return this.$$.ctx[27]}get updateLegalState(){return this.$$.ctx[28]}get playMoveSound(){return this.$$.ctx[29]}get makeMove(){return this.$$.ctx[30]}get makeNextMove(){return this.$$.ctx[31]}get makeMovePromotion(){return this.$$.ctx[32]}get removeSquareHighlight(){return this.$$.ctx[33]}get removeAllPiece(){return this.$$.ctx[34]}get createPiece(){return this.$$.ctx[35]}get changeColorOfPiece(){return this.$$.ctx[36]}get getSquareFromCoords(){return this.$$.ctx[37]}get setFEN(){return this.$$.ctx[38]}get getShortFEN(){return this.$$.ctx[39]}get setSize(){return this.$$.ctx[4]}get getPieceFromSquare(){return this.$$.ctx[40]}get setTools(){return this.$$.ctx[41]}get removeTools(){return this.$$.ctx[42]}get setMovableColor(){return this.$$.ctx[43]}get setLastMove(){return this.$$.ctx[44]}get setLegalMoves(){return this.$$.ctx[45]}get setPreMoves(){return this.$$.ctx[46]}get getState(){return this.$$.ctx[47]}get setState(){return this.$$.ctx[48]}get setConfigSettings(){return this.$$.ctx[49]}get getConfigFromState(){return this.$$.ctx[50]}}const Gs=["standard","darkBlue"],Qs=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function Xs(s){let e,t,n;return{c(){e=D("input"),this.h()},l(r){e=B(r,"INPUT",{type:!0,class:!0}),this.h()},h(){h(e,"type","checkbox"),h(e,"class","mr-1")},m(r,i){Y(r,e,i),e.checked=s[0],t||(n=[de(e,"click",gn(s[6])),de(e,"change",s[7])],t=!0)},p(r,i){i&1&&(e.checked=r[0])},d(r){r&&E(e),t=!1,xe(n)}}}function Ys(s){let e,t,n;return{c(){e=ze("svg"),t=ze("path"),this.h()},l(r){e=Ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var i=K(e);t=Ve(i,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),K(t).forEach(E),i.forEach(E),this.h()},h(){h(t,"fill-rule","evenodd"),h(t,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),h(t,"clip-rule","evenodd"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 20 20"),h(e,"fill","currentColor"),h(e,"class",n="w-5 h-5 transition "+(s[1]?"rotate-180":"rotate-0"))},m(r,i){Y(r,e,i),y(e,t)},p(r,i){i&2&&n!==(n="w-5 h-5 transition "+(r[1]?"rotate-180":"rotate-0"))&&h(e,"class",n)},d(r){r&&E(e)}}}function Zs(s){let e,t,n;const r=s[5].default,i=un(r,s,s[4],null);return{c(){e=D("div"),i&&i.c(),this.h()},l(a){e=B(a,"DIV",{class:!0});var l=K(e);i&&i.l(l),l.forEach(E),this.h()},h(){h(e,"class","py-2 px-4")},m(a,l){Y(a,e,l),i&&i.m(e,null),n=!0},p(a,l){i&&i.p&&(!n||l&16)&&fn(i,r,a,a[4],n?hn(r,a[4],l,null):dn(a[4]),null)},i(a){n||(J(i,a),a&&nt(()=>{t||(t=ht(e,ct,{},!0)),t.run(1)}),n=!0)},o(a){se(i,a),a&&(t||(t=ht(e,ct,{},!1)),t.run(0)),n=!1},d(a){a&&E(e),i&&i.d(a),a&&t&&t.end()}}}function $r(s){let e,t,n,r,i,a,l,o,u,f,m,c,C,q,F=s[0]!==void 0&&Xs(s),M=s[3]&&Ys(s),k=s[1]&&Zs(s);return{c(){e=D("div"),t=D("button"),n=D("div"),F&&F.c(),r=$(),i=D("span"),a=be(s[2]),o=$(),M&&M.c(),m=$(),k&&k.c(),this.h()},l(d){e=B(d,"DIV",{class:!0});var p=K(e);t=B(p,"BUTTON",{class:!0});var w=K(t);n=B(w,"DIV",{class:!0});var v=K(n);F&&F.l(v),r=ee(v),i=B(v,"SPAN",{class:!0});var A=K(i);a=pe(A,s[2]),A.forEach(E),v.forEach(E),o=ee(w),M&&M.l(w),w.forEach(E),m=ee(p),k&&k.l(p),p.forEach(E),this.h()},h(){h(i,"class",l=s[0]===void 0?"ml-[21px]":""),h(n,"class","flex gap-1"),h(t,"class",u="flex justify-between px-4 py-2 "+(s[3]?"transition hover:bg-slate-800/40":"")+" rounded"),t.disabled=f=!s[3],h(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(d,p){Y(d,e,p),y(e,t),y(t,n),F&&F.m(n,null),y(n,r),y(n,i),y(i,a),y(t,o),M&&M.m(t,null),y(e,m),k&&k.m(e,null),c=!0,C||(q=de(t,"click",s[8]),C=!0)},p(d,[p]){d[0]!==void 0?F?F.p(d,p):(F=Xs(d),F.c(),F.m(n,r)):F&&(F.d(1),F=null),(!c||p&4)&&Bt(a,d[2]),(!c||p&1&&l!==(l=d[0]===void 0?"ml-[21px]":""))&&h(i,"class",l),d[3]?M?M.p(d,p):(M=Ys(d),M.c(),M.m(t,null)):M&&(M.d(1),M=null),(!c||p&8&&u!==(u="flex justify-between px-4 py-2 "+(d[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&h(t,"class",u),(!c||p&8&&f!==(f=!d[3]))&&(t.disabled=f),d[1]?k?(k.p(d,p),p&2&&J(k,1)):(k=Zs(d),k.c(),J(k,1),k.m(e,null)):k&&(Be(),se(k,1,1,()=>{k=null}),Ue())},i(d){c||(J(k),c=!0)},o(d){se(k),c=!1},d(d){d&&E(e),F&&F.d(),M&&M.d(),k&&k.d(),C=!1,q()}}}function ea(s,e,t){let{$$slots:n={},$$scope:r}=e,{name:i="board"}=e,{enabled:a=void 0}=e,{showExpand:l=!0}=e,{expanded:o=!1}=e;function u(c){st.call(this,s,c)}function f(){a=this.checked,t(0,a)}const m=()=>{t(1,o=!o)};return s.$$set=c=>{"name"in c&&t(2,i=c.name),"enabled"in c&&t(0,a=c.enabled),"showExpand"in c&&t(3,l=c.showExpand),"expanded"in c&&t(1,o=c.expanded),"$$scope"in c&&t(4,r=c.$$scope)},[a,o,i,l,r,n,u,f,m]}class gt extends Oe{constructor(e){super(),Fe(this,e,ea,$r,qe,{name:2,enabled:0,showExpand:3,expanded:1})}}function Js(s,e,t){const n=s.slice();return n[23]=e[t],n}function xs(s){let e,t=s[23]+"",n;return{c(){e=D("option"),n=be(t),this.h()},l(r){e=B(r,"OPTION",{});var i=K(e);n=pe(i,t),i.forEach(E),this.h()},h(){e.__value=s[23],e.value=e.__value},m(r,i){Y(r,e,i),y(e,n)},p:Te,d(r){r&&E(e)}}}function $s(s){let e,t,n,r,i,a,l,o,u,f,m,c,C,q,F,M;return{c(){e=D("div"),t=D("div"),n=D("input"),r=$(),i=D("label"),a=be("shadow"),l=$(),o=D("div"),u=D("input"),f=$(),m=D("label"),c=be("border-radius (rem)"),this.h()},l(k){e=B(k,"DIV",{class:!0});var d=K(e);t=B(d,"DIV",{class:!0});var p=K(t);n=B(p,"INPUT",{id:!0,type:!0,class:!0}),r=ee(p),i=B(p,"LABEL",{for:!0,class:!0});var w=K(i);a=pe(w,"shadow"),w.forEach(E),p.forEach(E),l=ee(d),o=B(d,"DIV",{class:!0});var v=K(o);u=B(v,"INPUT",{id:!0,type:!0,class:!0,min:!0,max:!0}),f=ee(v),m=B(v,"LABEL",{for:!0,class:!0});var A=K(m);c=pe(A,"border-radius (rem)"),A.forEach(E),v.forEach(E),d.forEach(E),this.h()},h(){h(n,"id","shadow"),h(n,"type","checkbox"),h(n,"class","svelte-lnr7xr"),h(i,"for","shadow"),h(i,"class","select-none"),h(t,"class","flex gap-2 mb-2"),h(u,"id","borderRadius"),h(u,"type","number"),h(u,"class","w-16 svelte-lnr7xr"),h(u,"min",0),h(u,"max",1),h(m,"for","borderRadius"),h(m,"class","select-none whitespace-nowrap"),h(o,"class","flex gap-2 mb-2"),h(e,"class","pl-2 pr-4 flex-col")},m(k,d){Y(k,e,d),y(e,t),y(t,n),n.checked=s[4],y(t,r),y(t,i),y(i,a),y(e,l),y(e,o),y(o,u),ut(u,s[10]),y(o,f),y(o,m),y(m,c),q=!0,F||(M=[de(n,"change",s[18]),de(u,"input",s[19])],F=!0)},p(k,d){d&16&&(n.checked=k[4]),d&1024&&ft(u.value)!==k[10]&&ut(u,k[10])},i(k){q||(k&&nt(()=>{C||(C=ht(e,ct,{},!0)),C.run(1)}),q=!0)},o(k){k&&(C||(C=ht(e,ct,{},!1)),C.run(0)),q=!1},d(k){k&&E(e),k&&C&&C.end(),F=!1,xe(M)}}}function en(s){let e,t,n,r,i,a,l,o,u,f,m,c,C,q,F,M;return{c(){e=D("div"),t=D("div"),n=D("input"),r=$(),i=D("label"),a=be("min"),l=$(),o=D("div"),u=D("input"),f=$(),m=D("label"),c=be("max"),this.h()},l(k){e=B(k,"DIV",{class:!0});var d=K(e);t=B(d,"DIV",{class:!0});var p=K(t);n=B(p,"INPUT",{id:!0,type:!0,class:!0}),r=ee(p),i=B(p,"LABEL",{for:!0,class:!0});var w=K(i);a=pe(w,"min"),w.forEach(E),p.forEach(E),l=ee(d),o=B(d,"DIV",{class:!0});var v=K(o);u=B(v,"INPUT",{id:!0,type:!0,class:!0}),f=ee(v),m=B(v,"LABEL",{for:!0,class:!0});var A=K(m);c=pe(A,"max"),A.forEach(E),v.forEach(E),d.forEach(E),this.h()},h(){h(n,"id","resizibleMin"),h(n,"type","number"),h(n,"class","w-16 svelte-lnr7xr"),h(i,"for","resizibleMin"),h(i,"class","select-none"),h(t,"class","flex gap-2 mb-2"),h(u,"id","resizibleMax"),h(u,"type","number"),h(u,"class","w-16 svelte-lnr7xr"),h(m,"for","resizibleMax"),h(m,"class","select-none"),h(o,"class","flex gap-2"),h(e,"class","pl-2 pr-4 flex-col")},m(k,d){Y(k,e,d),y(e,t),y(t,n),ut(n,s[6]),y(t,r),y(t,i),y(i,a),y(e,l),y(e,o),y(o,u),ut(u,s[7]),y(o,f),y(o,m),y(m,c),q=!0,F||(M=[de(n,"input",s[21]),de(u,"input",s[22])],F=!0)},p(k,d){d&64&&ft(n.value)!==k[6]&&ut(n,k[6]),d&128&&ft(u.value)!==k[7]&&ut(u,k[7])},i(k){q||(k&&nt(()=>{C||(C=ht(e,ct,{},!0)),C.run(1)}),q=!0)},o(k){k&&(C||(C=ht(e,ct,{},!1)),C.run(0)),q=!1},d(k){k&&E(e),k&&C&&C.end(),F=!1,xe(M)}}}function ta(s){let e,t,n,r,i,a,l,o,u,f,m,c,C,q,F,M,k,d,p,w,v,A,W,j,V,O,G,ie,me,oe,g,_,b,P,L,I,z,U,X,ae,T=Gs,H=[];for(let R=0;R<T.length;R+=1)H[R]=xs(Js(s,T,R));let re=s[11]&&$s(s),Q=s[5]&&en(s);return{c(){e=D("div"),t=D("select");for(let R=0;R<H.length;R+=1)H[R].c();n=$(),r=D("label"),i=be("board theme"),a=$(),l=D("div"),o=D("input"),u=$(),f=D("label"),m=be("mouseEvents"),c=$(),C=D("div"),q=D("input"),F=$(),M=D("label"),k=be("notation"),d=$(),p=D("div"),w=D("input"),v=$(),A=D("label"),W=be("flipped"),j=$(),V=D("div"),O=D("input"),G=$(),ie=D("label"),me=be("style"),oe=$(),re&&re.c(),g=$(),_=D("div"),b=D("input"),P=$(),L=D("label"),I=be("resizible"),z=$(),Q&&Q.c(),U=Ae(),this.h()},l(R){e=B(R,"DIV",{class:!0});var Z=K(e);t=B(Z,"SELECT",{class:!0});var le=K(t);for(let $e=0;$e<H.length;$e+=1)H[$e].l(le);le.forEach(E),n=ee(Z),r=B(Z,"LABEL",{for:!0,class:!0});var _e=K(r);i=pe(_e,"board theme"),_e.forEach(E),Z.forEach(E),a=ee(R),l=B(R,"DIV",{class:!0});var ne=K(l);o=B(ne,"INPUT",{id:!0,type:!0,class:!0}),u=ee(ne),f=B(ne,"LABEL",{for:!0,class:!0});var ve=K(f);m=pe(ve,"mouseEvents"),ve.forEach(E),ne.forEach(E),c=ee(R),C=B(R,"DIV",{class:!0});var Re=K(C);q=B(Re,"INPUT",{id:!0,type:!0,class:!0}),F=ee(Re),M=B(Re,"LABEL",{for:!0,class:!0});var He=K(M);k=pe(He,"notation"),He.forEach(E),Re.forEach(E),d=ee(R),p=B(R,"DIV",{class:!0});var De=K(p);w=B(De,"INPUT",{id:!0,type:!0,class:!0}),v=ee(De),A=B(De,"LABEL",{for:!0,class:!0});var Ne=K(A);W=pe(Ne,"flipped"),Ne.forEach(E),De.forEach(E),j=ee(R),V=B(R,"DIV",{});var Le=K(V);O=B(Le,"INPUT",{id:!0,type:!0,class:!0}),G=ee(Le),ie=B(Le,"LABEL",{for:!0,class:!0});var Ke=K(ie);me=pe(Ke,"style"),Ke.forEach(E),Le.forEach(E),oe=ee(R),re&&re.l(R),g=ee(R),_=B(R,"DIV",{class:!0});var Ge=K(_);b=B(Ge,"INPUT",{id:!0,type:!0,class:!0}),P=ee(Ge),L=B(Ge,"LABEL",{for:!0,class:!0});var Xe=K(L);I=pe(Xe,"resizible"),Xe.forEach(E),Ge.forEach(E),z=ee(R),Q&&Q.l(R),U=Ae(),this.h()},h(){h(t,"class","svelte-lnr7xr"),s[0]===void 0&&nt(()=>s[13].call(t)),h(r,"for","boardTheme"),h(r,"class","select-none"),h(e,"class","mb-2"),h(o,"id","mouseEvents"),h(o,"type","checkbox"),h(o,"class","svelte-lnr7xr"),h(f,"for","mouseEvents"),h(f,"class","select-none"),h(l,"class","mb-2"),h(q,"id","notation"),h(q,"type","checkbox"),h(q,"class","svelte-lnr7xr"),h(M,"for","notation"),h(M,"class","select-none"),h(C,"class","mb-2"),h(w,"id","flipped"),h(w,"type","checkbox"),h(w,"class","svelte-lnr7xr"),h(A,"for","flipped"),h(A,"class","select-none"),h(p,"class","mb-2"),h(O,"id","styleEnabled"),h(O,"type","checkbox"),h(O,"class","svelte-lnr7xr"),h(ie,"for","styleEnabled"),h(ie,"class","select-none"),h(b,"id","resizibleEnabled"),h(b,"type","checkbox"),h(b,"class","svelte-lnr7xr"),h(L,"for","resizibleEnabled"),h(L,"class","select-none"),h(_,"class","mt-2 mb-1")},m(R,Z){Y(R,e,Z),y(e,t);for(let le=0;le<H.length;le+=1)H[le].m(t,null);Mt(t,s[0]),y(e,n),y(e,r),y(r,i),Y(R,a,Z),Y(R,l,Z),y(l,o),o.checked=s[1],y(l,u),y(l,f),y(f,m),Y(R,c,Z),Y(R,C,Z),y(C,q),q.checked=s[2],y(C,F),y(C,M),y(M,k),Y(R,d,Z),Y(R,p,Z),y(p,w),w.checked=s[3],y(p,v),y(p,A),y(A,W),Y(R,j,Z),Y(R,V,Z),y(V,O),O.checked=s[11],y(V,G),y(V,ie),y(ie,me),Y(R,oe,Z),re&&re.m(R,Z),Y(R,g,Z),Y(R,_,Z),y(_,b),b.checked=s[5],y(_,P),y(_,L),y(L,I),Y(R,z,Z),Q&&Q.m(R,Z),Y(R,U,Z),X||(ae=[de(t,"change",s[13]),de(o,"change",s[14]),de(q,"change",s[15]),de(w,"change",s[16]),de(O,"change",s[17]),de(b,"change",s[20])],X=!0)},p(R,Z){if(Z&0){T=Gs;let le;for(le=0;le<T.length;le+=1){const _e=Js(R,T,le);H[le]?H[le].p(_e,Z):(H[le]=xs(_e),H[le].c(),H[le].m(t,null))}for(;le<H.length;le+=1)H[le].d(1);H.length=T.length}Z&1&&Mt(t,R[0]),Z&2&&(o.checked=R[1]),Z&4&&(q.checked=R[2]),Z&8&&(w.checked=R[3]),Z&2048&&(O.checked=R[11]),R[11]?re?(re.p(R,Z),Z&2048&&J(re,1)):(re=$s(R),re.c(),J(re,1),re.m(g.parentNode,g)):re&&(Be(),se(re,1,1,()=>{re=null}),Ue()),Z&32&&(b.checked=R[5]),R[5]?Q?(Q.p(R,Z),Z&32&&J(Q,1)):(Q=en(R),Q.c(),J(Q,1),Q.m(U.parentNode,U)):Q&&(Be(),se(Q,1,1,()=>{Q=null}),Ue())},d(R){R&&E(e),dt(H,R),R&&E(a),R&&E(l),R&&E(c),R&&E(C),R&&E(d),R&&E(p),R&&E(j),R&&E(V),R&&E(oe),re&&re.d(R),R&&E(g),R&&E(_),R&&E(z),Q&&Q.d(R),R&&E(U),X=!1,xe(ae)}}}function sa(s){let e,t;return e=new gt({props:{name:s[8],expanded:s[9],$$slots:{default:[ta]},$$scope:{ctx:s}}}),{c(){Me(e.$$.fragment)},l(n){ke(e.$$.fragment,n)},m(n,r){we(e,n,r),t=!0},p(n,[r]){const i={};r&256&&(i.name=n[8]),r&512&&(i.expanded=n[9]),r&67112191&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function na(s,e,t){let{name:n="Board"}=e,{boardTheme:r}=e,{mouseEvents:i}=e,{notation:a}=e,{flipped:l}=e,{shadow:o}=e,{borderRadius:u="0px"}=e,{resizible:f=!1}=e,{min:m=0}=e,{max:c=0}=e,{expanded:C=!1}=e,q=!0,F=parseFloat(u.endsWith("px")?u.slice(0,-2):u.slice(0,-3));function M(){r=ss(this),t(0,r)}function k(){i=this.checked,t(1,i)}function d(){a=this.checked,t(2,a)}function p(){l=this.checked,t(3,l)}function w(){q=this.checked,t(11,q)}function v(){o=this.checked,t(4,o)}function A(){F=ft(this.value),t(10,F)}function W(){f=this.checked,t(5,f)}function j(){m=ft(this.value),t(6,m)}function V(){c=ft(this.value),t(7,c)}return s.$$set=O=>{"name"in O&&t(8,n=O.name),"boardTheme"in O&&t(0,r=O.boardTheme),"mouseEvents"in O&&t(1,i=O.mouseEvents),"notation"in O&&t(2,a=O.notation),"flipped"in O&&t(3,l=O.flipped),"shadow"in O&&t(4,o=O.shadow),"borderRadius"in O&&t(12,u=O.borderRadius),"resizible"in O&&t(5,f=O.resizible),"min"in O&&t(6,m=O.min),"max"in O&&t(7,c=O.max),"expanded"in O&&t(9,C=O.expanded)},s.$$.update=()=>{s.$$.dirty&1024&&t(12,u=`${F!=null?F:0}rem`)},[r,i,a,l,o,f,m,c,n,C,F,q,u,M,k,d,p,w,v,A,W,j,V]}class ia extends Oe{constructor(e){super(),Fe(this,e,na,sa,qe,{name:8,boardTheme:0,mouseEvents:1,notation:2,flipped:3,shadow:4,borderRadius:12,resizible:5,min:6,max:7,expanded:9})}}function ra(s){let e,t,n,r,i,a,l,o,u,f;return{c(){e=D("div"),t=D("select"),n=D("option"),r=be("Both"),i=D("option"),a=be("White"),l=D("option"),o=be("Black"),this.h()},l(m){e=B(m,"DIV",{});var c=K(e);t=B(c,"SELECT",{class:!0});var C=K(t);n=B(C,"OPTION",{});var q=K(n);r=pe(q,"Both"),q.forEach(E),i=B(C,"OPTION",{});var F=K(i);a=pe(F,"White"),F.forEach(E),l=B(C,"OPTION",{});var M=K(l);o=pe(M,"Black"),M.forEach(E),C.forEach(E),c.forEach(E),this.h()},h(){n.__value=Ee.BOTH,n.value=n.__value,i.__value=Ee.WHITE,i.value=i.__value,l.__value=Ee.BLACK,l.value=l.__value,h(t,"class","svelte-xrxnwg"),s[1]===void 0&&nt(()=>s[4].call(t))},m(m,c){Y(m,e,c),y(e,t),y(t,n),y(n,r),y(t,i),y(i,a),y(t,l),y(l,o),Mt(t,s[1]),u||(f=de(t,"change",s[4]),u=!0)},p(m,c){c&2&&Mt(t,m[1])},d(m){m&&E(e),u=!1,f()}}}function aa(s){let e,t,n;function r(a){s[5](a)}let i={name:s[2],expanded:s[3],$$slots:{default:[ra]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new gt({props:i}),ue.push(()=>ce(e,"enabled",r)),{c(){Me(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&4&&(o.name=a[2]),l&8&&(o.expanded=a[3]),l&66&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],ge(()=>t=!1)),e.$set(o)},i(a){n||(J(e.$$.fragment,a),n=!0)},o(a){se(e.$$.fragment,a),n=!1},d(a){Se(e,a)}}}function la(s,e,t){let{name:n="Movable"}=e,{enabled:r=!1}=e,{color:i}=e,{expanded:a=!1}=e;function l(){i=ss(this),t(1,i)}function o(u){r=u,t(0,r)}return s.$$set=u=>{"name"in u&&t(2,n=u.name),"enabled"in u&&t(0,r=u.enabled),"color"in u&&t(1,i=u.color),"expanded"in u&&t(3,a=u.expanded)},[r,i,n,a,l,o]}class oa extends Oe{constructor(e){super(),Fe(this,e,la,aa,qe,{name:2,enabled:0,color:1,expanded:3})}}function tn(s,e,t){const n=s.slice();return n[12]=e[t],n}function sn(s){let e,t,n,r,i,a,l,o,u,f,m,c,C,q,F,M,k=Qs,d=[];for(let p=0;p<k.length;p+=1)d[p]=nn(tn(s,k,p));return{c(){e=D("div"),t=D("div"),n=D("input"),r=$(),i=D("label"),a=be("duration"),l=$(),o=D("div"),u=D("select");for(let p=0;p<d.length;p+=1)d[p].c();f=$(),m=D("label"),c=be("easing"),this.h()},l(p){e=B(p,"DIV",{class:!0});var w=K(e);t=B(w,"DIV",{class:!0});var v=K(t);n=B(v,"INPUT",{id:!0,type:!0,class:!0}),r=ee(v),i=B(v,"LABEL",{for:!0,class:!0});var A=K(i);a=pe(A,"duration"),A.forEach(E),v.forEach(E),l=ee(w),o=B(w,"DIV",{class:!0});var W=K(o);u=B(W,"SELECT",{id:!0,class:!0});var j=K(u);for(let O=0;O<d.length;O+=1)d[O].l(j);j.forEach(E),f=ee(W),m=B(W,"LABEL",{for:!0,class:!0});var V=K(m);c=pe(V,"easing"),V.forEach(E),W.forEach(E),w.forEach(E),this.h()},h(){h(n,"id","transitionDuration"),h(n,"type","number"),h(n,"class","w-16 svelte-1qpp6cx"),h(i,"for","transitionDuration"),h(i,"class","select-none"),h(t,"class","flex gap-2 mb-2"),h(u,"id","easingFuncs"),h(u,"class","svelte-1qpp6cx"),s[4]===void 0&&nt(()=>s[10].call(u)),h(m,"for","easingFuncs"),h(m,"class","select-none"),h(o,"class","flex gap-2"),h(e,"class","pl-2 pr-4 flex-col")},m(p,w){Y(p,e,w),y(e,t),y(t,n),ut(n,s[3]),y(t,r),y(t,i),y(i,a),y(e,l),y(e,o),y(o,u);for(let v=0;v<d.length;v+=1)d[v].m(u,null);Mt(u,s[4]),y(o,f),y(o,m),y(m,c),q=!0,F||(M=[de(n,"input",s[9]),de(u,"change",s[10])],F=!0)},p(p,w){if(w&8&&ft(n.value)!==p[3]&&ut(n,p[3]),w&0){k=Qs;let v;for(v=0;v<k.length;v+=1){const A=tn(p,k,v);d[v]?d[v].p(A,w):(d[v]=nn(A),d[v].c(),d[v].m(u,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=k.length}w&16&&Mt(u,p[4])},i(p){q||(p&&nt(()=>{C||(C=ht(e,ct,{},!0)),C.run(1)}),q=!0)},o(p){p&&(C||(C=ht(e,ct,{},!1)),C.run(0)),q=!1},d(p){p&&E(e),dt(d,p),p&&C&&C.end(),F=!1,xe(M)}}}function nn(s){let e,t=s[12]+"",n;return{c(){e=D("option"),n=be(t),this.h()},l(r){e=B(r,"OPTION",{});var i=K(e);n=pe(i,t),i.forEach(E),this.h()},h(){e.__value=s[12],e.value=e.__value},m(r,i){Y(r,e,i),y(e,n)},p:Te,d(r){r&&E(e)}}}function ua(s){let e,t,n,r,i,a,l,o,u,f,m,c,C,q,F,M=s[2]&&sn(s);return{c(){e=D("div"),t=D("input"),n=$(),r=D("label"),i=be("ghost piece"),a=$(),l=D("div"),o=D("input"),u=$(),f=D("label"),m=be("transition"),c=$(),M&&M.c(),C=Ae(),this.h()},l(k){e=B(k,"DIV",{class:!0});var d=K(e);t=B(d,"INPUT",{id:!0,type:!0,class:!0}),n=ee(d),r=B(d,"LABEL",{for:!0,class:!0});var p=K(r);i=pe(p,"ghost piece"),p.forEach(E),d.forEach(E),a=ee(k),l=B(k,"DIV",{class:!0});var w=K(l);o=B(w,"INPUT",{id:!0,type:!0,class:!0}),u=ee(w),f=B(w,"LABEL",{for:!0,class:!0});var v=K(f);m=pe(v,"transition"),v.forEach(E),w.forEach(E),c=ee(k),M&&M.l(k),C=Ae(),this.h()},h(){h(t,"id","ghostPiece"),h(t,"type","checkbox"),h(t,"class","svelte-1qpp6cx"),h(r,"for","ghostPiece"),h(r,"class","select-none"),h(e,"class","mb-2"),h(o,"id","draggableEnabled"),h(o,"type","checkbox"),h(o,"class","svelte-1qpp6cx"),h(f,"for","draggableEnabled"),h(f,"class","select-none"),h(l,"class","mb-2")},m(k,d){Y(k,e,d),y(e,t),t.checked=s[1],y(e,n),y(e,r),y(r,i),Y(k,a,d),Y(k,l,d),y(l,o),o.checked=s[2],y(l,u),y(l,f),y(f,m),Y(k,c,d),M&&M.m(k,d),Y(k,C,d),q||(F=[de(t,"change",s[7]),de(o,"change",s[8])],q=!0)},p(k,d){d&2&&(t.checked=k[1]),d&4&&(o.checked=k[2]),k[2]?M?(M.p(k,d),d&4&&J(M,1)):(M=sn(k),M.c(),J(M,1),M.m(C.parentNode,C)):M&&(Be(),se(M,1,1,()=>{M=null}),Ue())},d(k){k&&E(e),k&&E(a),k&&E(l),k&&E(c),M&&M.d(k),k&&E(C),q=!1,xe(F)}}}function fa(s){let e,t,n;function r(a){s[11](a)}let i={name:s[5],expanded:s[6],$$slots:{default:[ua]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new gt({props:i}),ue.push(()=>ce(e,"enabled",r)),{c(){Me(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&32&&(o.name=a[5]),l&64&&(o.expanded=a[6]),l&32798&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],ge(()=>t=!1)),e.$set(o)},i(a){n||(J(e.$$.fragment,a),n=!0)},o(a){se(e.$$.fragment,a),n=!1},d(a){Se(e,a)}}}function da(s,e,t){let{name:n="Draggable"}=e,{enabled:r=!1}=e,{ghostPiece:i=!1}=e,{transition:a=!1}=e,{duration:l=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function f(){i=this.checked,t(1,i)}function m(){a=this.checked,t(2,a)}function c(){l=ft(this.value),t(3,l)}function C(){o=ss(this),t(4,o)}function q(F){r=F,t(0,r)}return s.$$set=F=>{"name"in F&&t(5,n=F.name),"enabled"in F&&t(0,r=F.enabled),"ghostPiece"in F&&t(1,i=F.ghostPiece),"transition"in F&&t(2,a=F.transition),"duration"in F&&t(3,l=F.duration),"easing"in F&&t(4,o=F.easing),"expanded"in F&&t(6,u=F.expanded)},[r,i,a,l,o,n,u,f,m,c,C,q]}class ha extends Oe{constructor(e){super(),Fe(this,e,da,fa,qe,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function rn(s,e,t){const n=s.slice();return n[7]=e[t],n[8]=e,n[9]=t,n}function an(s){let e,t,n,r,i=s[7]+"",a,l,o,u;function f(){s[5].call(t,s[7])}return{c(){e=D("div"),t=D("input"),n=$(),r=D("label"),a=be(i),l=$(),this.h()},l(m){e=B(m,"DIV",{class:!0});var c=K(e);t=B(c,"INPUT",{id:!0,type:!0}),n=ee(c),r=B(c,"LABEL",{for:!0,class:!0});var C=K(r);a=pe(C,i),C.forEach(E),l=ee(c),c.forEach(E),this.h()},h(){h(t,"id",s[7]+"Enabled"),h(t,"type","checkbox"),h(r,"for",s[7]+"Enabled"),h(r,"class","select-none"),h(e,"class","mb-2")},m(m,c){Y(m,e,c),y(e,t),t.checked=s[1][s[7]],y(e,n),y(e,r),y(r,a),y(e,l),o||(u=de(t,"change",f),o=!0)},p(m,c){s=m,c&18&&(t.checked=s[1][s[7]])},d(m){m&&E(e),o=!1,u()}}}function ca(s){let e,t=s[4],n=[];for(let r=0;r<t.length;r+=1)n[r]=an(rn(s,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ae()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=Ae()},m(r,i){for(let a=0;a<n.length;a+=1)n[a].m(r,i);Y(r,e,i)},p(r,i){if(i&18){t=r[4];let a;for(a=0;a<t.length;a+=1){const l=rn(r,t,a);n[a]?n[a].p(l,i):(n[a]=an(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){dt(n,r),r&&E(e)}}}function ga(s){let e,t,n;function r(a){s[6](a)}let i={name:s[2],expanded:s[3],$$slots:{default:[ca]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new gt({props:i}),ue.push(()=>ce(e,"enabled",r)),{c(){Me(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&4&&(o.name=a[2]),l&8&&(o.expanded=a[3]),l&1026&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],ge(()=>t=!1)),e.$set(o)},i(a){n||(J(e.$$.fragment,a),n=!0)},o(a){se(e.$$.fragment,a),n=!1},d(a){Se(e,a)}}}function ba(s,e,t){let{name:n="Highlight"}=e,{enabled:r=!1}=e,{settings:i}=e;const a=["select","legal","move","preMove","nextMove","check"];let{expanded:l=!1}=e;function o(f){i[f]=this.checked,t(1,i)}function u(f){r=f,t(0,r)}return s.$$set=f=>{"name"in f&&t(2,n=f.name),"enabled"in f&&t(0,r=f.enabled),"settings"in f&&t(1,i=f.settings),"expanded"in f&&t(3,l=f.expanded)},[r,i,n,l,a,o,u]}class pa extends Oe{constructor(e){super(),Fe(this,e,ba,ga,qe,{name:2,enabled:0,settings:1,expanded:3})}}function ma(s){let e,t,n,r,i,a,l,o,u,f,m,c,C;return{c(){e=D("div"),t=D("input"),n=$(),r=D("label"),i=be("L shape knight move"),a=$(),l=D("div"),o=D("input"),u=$(),f=D("label"),m=be("only chess move"),this.h()},l(q){e=B(q,"DIV",{class:!0});var F=K(e);t=B(F,"INPUT",{id:!0,type:!0}),n=ee(F),r=B(F,"LABEL",{for:!0,class:!0});var M=K(r);i=pe(M,"L shape knight move"),M.forEach(E),F.forEach(E),a=ee(q),l=B(q,"DIV",{class:!0});var k=K(l);o=B(k,"INPUT",{id:!0,type:!0}),u=ee(k),f=B(k,"LABEL",{for:!0,class:!0});var d=K(f);m=pe(d,"only chess move"),d.forEach(E),k.forEach(E),this.h()},h(){h(t,"id","knightLShapeMoveEnabled"),h(t,"type","checkbox"),h(r,"for","knightLShapeMoveEnabled"),h(r,"class","select-none"),h(e,"class","mb-2"),h(o,"id","onlyChessMoveEnabled"),h(o,"type","checkbox"),h(f,"for","onlyChessMoveEnabled"),h(f,"class","select-none"),h(l,"class","mb-2")},m(q,F){Y(q,e,F),y(e,t),t.checked=s[1],y(e,n),y(e,r),y(r,i),Y(q,a,F),Y(q,l,F),y(l,o),o.checked=s[2],y(l,u),y(l,f),y(f,m),c||(C=[de(t,"change",s[5]),de(o,"change",s[6])],c=!0)},p(q,F){F&2&&(t.checked=q[1]),F&4&&(o.checked=q[2])},d(q){q&&E(e),q&&E(a),q&&E(l),c=!1,xe(C)}}}function _a(s){let e,t,n;function r(a){s[7](a)}let i={name:s[3],expanded:s[4],$$slots:{default:[ma]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new gt({props:i}),ue.push(()=>ce(e,"enabled",r)),{c(){Me(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&8&&(o.name=a[3]),l&16&&(o.expanded=a[4]),l&262&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],ge(()=>t=!1)),e.$set(o)},i(a){n||(J(e.$$.fragment,a),n=!0)},o(a){se(e.$$.fragment,a),n=!1},d(a){Se(e,a)}}}function va(s,e,t){let{name:n="DrawTools"}=e,{enabled:r=!1}=e,{knightLShape:i=!1}=e,{onlyChessMove:a=!1}=e,{expanded:l=!1}=e;function o(){i=this.checked,t(1,i)}function u(){a=this.checked,t(2,a)}function f(m){r=m,t(0,r)}return s.$$set=m=>{"name"in m&&t(3,n=m.name),"enabled"in m&&t(0,r=m.enabled),"knightLShape"in m&&t(1,i=m.knightLShape),"onlyChessMove"in m&&t(2,a=m.onlyChessMove),"expanded"in m&&t(4,l=m.expanded)},[r,i,a,n,l,o,u,f]}class Ea extends Oe{constructor(e){super(),Fe(this,e,va,_a,qe,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function ln(s,e,t){const n=s.slice();return n[7]=e[t],n[8]=e,n[9]=t,n}function on(s){let e,t,n,r,i=s[7].toLowerCase()+"",a,l,o,u;function f(){s[5].call(t,s[7])}return{c(){e=D("div"),t=D("input"),n=$(),r=D("label"),a=be(i),l=$(),this.h()},l(m){e=B(m,"DIV",{class:!0});var c=K(e);t=B(c,"INPUT",{id:!0,type:!0}),n=ee(c),r=B(c,"LABEL",{for:!0,class:!0});var C=K(r);a=pe(C,i),C.forEach(E),l=ee(c),c.forEach(E),this.h()},h(){h(t,"id",s[7]+"Enabled"),h(t,"type","checkbox"),h(r,"for",s[7]+"Enabled"),h(r,"class","select-none"),h(e,"class","mb-2")},m(m,c){Y(m,e,c),y(e,t),t.checked=s[1][s[7]],y(e,n),y(e,r),y(r,a),y(e,l),o||(u=de(t,"change",f),o=!0)},p(m,c){s=m,c&18&&(t.checked=s[1][s[7]])},d(m){m&&E(e),o=!1,u()}}}function Ma(s){let e,t=s[4],n=[];for(let r=0;r<t.length;r+=1)n[r]=on(ln(s,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ae()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=Ae()},m(r,i){for(let a=0;a<n.length;a+=1)n[a].m(r,i);Y(r,e,i)},p(r,i){if(i&18){t=r[4];let a;for(a=0;a<t.length;a+=1){const l=ln(r,t,a);n[a]?n[a].p(l,i):(n[a]=on(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){dt(n,r),r&&E(e)}}}function ka(s){let e,t,n;function r(a){s[6](a)}let i={name:s[2],expanded:s[3],$$slots:{default:[Ma]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new gt({props:i}),ue.push(()=>ce(e,"enabled",r)),{c(){Me(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&4&&(o.name=a[2]),l&8&&(o.expanded=a[3]),l&1026&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],ge(()=>t=!1)),e.$set(o)},i(a){n||(J(e.$$.fragment,a),n=!0)},o(a){se(e.$$.fragment,a),n=!1},d(a){Se(e,a)}}}function wa(s,e,t){let{name:n="Sounds"}=e,{enabled:r=!1}=e,{settings:i}=e;const a=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:l=!1}=e;function o(f){i[f]=this.checked,t(1,i)}function u(f){r=f,t(0,r)}return s.$$set=f=>{"name"in f&&t(2,n=f.name),"enabled"in f&&t(0,r=f.enabled),"settings"in f&&t(1,i=f.settings),"expanded"in f&&t(3,l=f.expanded)},[r,i,n,l,a,o,u]}class Sa extends Oe{constructor(e){super(),Fe(this,e,wa,ka,qe,{name:2,enabled:0,settings:1,expanded:3})}}function ya(s){let e,t;return{c(){e=ze("svg"),t=ze("path"),this.h()},l(n){e=Ve(n,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var r=K(e);t=Ve(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),K(t).forEach(E),r.forEach(E),this.h()},h(){h(t,"stroke-linecap","round"),h(t,"stroke-linejoin","round"),h(t,"stroke-width","2"),h(t,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),Ce(e,"transform","translate(1px, 0px)"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"class","h-5"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"aria-hidden","true"),h(e,"stroke","currentColor")},m(n,r){Y(n,e,r),y(e,t)},d(n){n&&E(e)}}}function Ca(s){let e,t;return{c(){e=ze("svg"),t=ze("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var r=K(e);t=Ve(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),K(t).forEach(E),r.forEach(E),this.h()},h(){h(t,"stroke-linecap","round"),h(t,"stroke-linejoin","round"),h(t,"stroke-width","2"),h(t,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"class","h-5 text-green-500"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"aria-hidden","true"),h(e,"stroke","currentColor")},m(n,r){Y(n,e,r),y(e,t)},d(n){n&&E(e)}}}function Aa(s){let e,t,n;function r(l,o){return l[1]?Ca:ya}let i=r(s),a=i(s);return{c(){e=D("button"),a.c(),this.h()},l(l){e=B(l,"BUTTON",{type:!0,class:!0});var o=K(e);a.l(o),o.forEach(E),this.h()},h(){h(e,"type","button"),h(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(l,o){Y(l,e,o),a.m(e,null),s[4](e),t||(n=de(e,"click",s[2]),t=!0)},p(l,[o]){i!==(i=r(l))&&(a.d(1),a=i(l),a&&(a.c(),a.m(e,null)))},i:Te,o:Te,d(l){l&&E(e),a.d(),s[4](null),t=!1,n()}}}function Pa(s,e,t){let{copyText:n}=e,r,i=!1;function a(){navigator.clipboard.writeText(n),t(1,i=!0),setTimeout(()=>{t(1,i=!1)},2e3),r.setAttribute("data-cooltipz-dir","top"),r.setAttribute("aria-label","Copied!"),setTimeout(()=>{r.removeAttribute("aria-label"),r.removeAttribute("data-cooltipz-dir")},2e3)}function l(o){ue[o?"unshift":"push"](()=>{r=o,t(0,r)})}return s.$$set=o=>{"copyText"in o&&t(3,n=o.copyText)},[r,i,a,n,l]}class Ta extends Oe{constructor(e){super(),Fe(this,e,Pa,Aa,qe,{copyText:3})}}function La(s){let e,t,n,r,i,a,l;return{c(){e=D("div"),t=D("input"),n=$(),r=D("label"),i=be("preMoves"),this.h()},l(o){e=B(o,"DIV",{});var u=K(e);t=B(u,"INPUT",{id:!0,type:!0}),n=ee(u),r=B(u,"LABEL",{for:!0,class:!0});var f=K(r);i=pe(f,"preMoves"),f.forEach(E),u.forEach(E),this.h()},h(){h(t,"id","preMovesEnabled"),h(t,"type","checkbox"),h(r,"for","preMovesEnabled"),h(r,"class","select-none")},m(o,u){Y(o,e,u),y(e,t),t.checked=s[1],y(e,n),y(e,r),y(r,i),a||(l=de(t,"change",s[4]),a=!0)},p(o,u){u&2&&(t.checked=o[1])},d(o){o&&E(e),a=!1,l()}}}function Ia(s){let e,t,n;function r(a){s[5](a)}let i={name:s[2],expanded:s[3],$$slots:{default:[La]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new gt({props:i}),ue.push(()=>ce(e,"enabled",r)),{c(){Me(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&4&&(o.name=a[2]),l&8&&(o.expanded=a[3]),l&66&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],ge(()=>t=!1)),e.$set(o)},i(a){n||(J(e.$$.fragment,a),n=!0)},o(a){se(e.$$.fragment,a),n=!1},d(a){Se(e,a)}}}function Oa(s,e,t){let{name:n="Legal"}=e,{enabled:r=!1}=e,{preMovesEnabled:i=!1}=e,{expanded:a=!1}=e;function l(){i=this.checked,t(1,i)}function o(u){r=u,t(0,r)}return s.$$set=u=>{"name"in u&&t(2,n=u.name),"enabled"in u&&t(0,r=u.enabled),"preMovesEnabled"in u&&t(1,i=u.preMovesEnabled),"expanded"in u&&t(3,a=u.expanded)},[r,i,n,a,l,o]}class Fa extends Oe{constructor(e){super(),Fe(this,e,Oa,Ia,qe,{name:2,enabled:0,preMovesEnabled:1,expanded:3})}}function qa(s){let e,t,n,r,i,a,l,o,u,f,m,c,C,q,F,M,k,d,p,w,v,A,W,j,V,O,G,ie,me,oe,g,_,b,P,L,I,z,U,X,ae,T,H,re,Q,R,Z,le,_e,ne,ve,Re,He,De,Ne,Le,Ke,Ge,Xe,$e,it,kt,wt,et,St,mt,yt,Ye,Ct,Ze,rt,At,Lt;function Ut(N){s[6](N)}function Ht(N){s[7](N)}function zt(N){s[8](N)}function S(N){s[9](N)}function x(N){s[10](N)}function fe(N){s[11](N)}function ye(N){s[12](N)}function Ie(N){s[13](N)}function Je(N){s[14](N)}let Qe={expanded:!0};s[1].board.boardTheme!==void 0&&(Qe.boardTheme=s[1].board.boardTheme),s[1].board.mouseEvents!==void 0&&(Qe.mouseEvents=s[1].board.mouseEvents),s[1].board.notation!==void 0&&(Qe.notation=s[1].board.notation),s[1].board.flipped!==void 0&&(Qe.flipped=s[1].board.flipped),s[1].board.style.shadow!==void 0&&(Qe.shadow=s[1].board.style.shadow),s[1].board.style.borderRadius!==void 0&&(Qe.borderRadius=s[1].board.style.borderRadius),s[1].board.resizible.enabled!==void 0&&(Qe.resizible=s[1].board.resizible.enabled),s[1].board.resizible.min!==void 0&&(Qe.min=s[1].board.resizible.min),s[1].board.resizible.max!==void 0&&(Qe.max=s[1].board.resizible.max),a=new ia({props:Qe}),ue.push(()=>ce(a,"boardTheme",Ut)),ue.push(()=>ce(a,"mouseEvents",Ht)),ue.push(()=>ce(a,"notation",zt)),ue.push(()=>ce(a,"flipped",S)),ue.push(()=>ce(a,"shadow",x)),ue.push(()=>ce(a,"borderRadius",fe)),ue.push(()=>ce(a,"resizible",ye)),ue.push(()=>ce(a,"min",Ie)),ue.push(()=>ce(a,"max",Je));function Cn(N){s[15](N)}function An(N){s[16](N)}let Vt={expanded:!0};s[1].movable.enabled!==void 0&&(Vt.enabled=s[1].movable.enabled),s[1].movable.color!==void 0&&(Vt.color=s[1].movable.color),k=new oa({props:Vt}),ue.push(()=>ce(k,"enabled",Cn)),ue.push(()=>ce(k,"color",An));function Pn(N){s[17](N)}function Tn(N){s[18](N)}function Ln(N){s[19](N)}function In(N){s[20](N)}function On(N){s[21](N)}let _t={};s[1].draggable.enabled!==void 0&&(_t.enabled=s[1].draggable.enabled),s[1].draggable.ghostPiece.enabled!==void 0&&(_t.ghostPiece=s[1].draggable.ghostPiece.enabled),s[1].draggable.transition.enabled!==void 0&&(_t.transition=s[1].draggable.transition.enabled),s[1].draggable.transition.settings.duration!==void 0&&(_t.duration=s[1].draggable.transition.settings.duration),s[1].draggable.transition.settings.easing!==void 0&&(_t.easing=s[1].draggable.transition.settings.easing),v=new ha({props:_t}),ue.push(()=>ce(v,"enabled",Pn)),ue.push(()=>ce(v,"ghostPiece",Tn)),ue.push(()=>ce(v,"transition",Ln)),ue.push(()=>ce(v,"duration",In)),ue.push(()=>ce(v,"easing",On));function Fn(N){s[22](N)}let is={name:"Selectable",showExpand:!1};s[1].selectable.enabled!==void 0&&(is.enabled=s[1].selectable.enabled),ie=new gt({props:is}),ue.push(()=>ce(ie,"enabled",Fn));function qn(N){s[23](N)}function Rn(N){s[24](N)}let Wt={expanded:!0};s[1].legal.enabled!==void 0&&(Wt.enabled=s[1].legal.enabled),s[1].legal.preMoves.enabled!==void 0&&(Wt.preMovesEnabled=s[1].legal.preMoves.enabled),g=new Fa({props:Wt}),ue.push(()=>ce(g,"enabled",qn)),ue.push(()=>ce(g,"preMovesEnabled",Rn));function Nn(N){s[25](N)}function Dn(N){s[26](N)}let Kt={};s[1].highlight.enabled!==void 0&&(Kt.enabled=s[1].highlight.enabled),s[1].highlight.settings!==void 0&&(Kt.settings=s[1].highlight.settings),L=new pa({props:Kt}),ue.push(()=>ce(L,"enabled",Nn)),ue.push(()=>ce(L,"settings",Dn));function Bn(N){s[27](N)}function Un(N){s[28](N)}function Hn(N){s[29](N)}let It={};s[1].drawTools.enabled!==void 0&&(It.enabled=s[1].drawTools.enabled),s[1].drawTools.settings.knightLShape!==void 0&&(It.knightLShape=s[1].drawTools.settings.knightLShape),s[1].drawTools.settings.onlyChessMove!==void 0&&(It.onlyChessMove=s[1].drawTools.settings.onlyChessMove),X=new Ea({props:It}),ue.push(()=>ce(X,"enabled",Bn)),ue.push(()=>ce(X,"knightLShape",Un)),ue.push(()=>ce(X,"onlyChessMove",Hn));function zn(N){s[30](N)}function Vn(N){s[31](N)}let jt={};s[1].sounds.enabled!==void 0&&(jt.enabled=s[1].sounds.enabled),s[1].sounds.settings!==void 0&&(jt.settings=s[1].sounds.settings),Q=new Sa({props:jt}),ue.push(()=>ce(Q,"enabled",zn)),ue.push(()=>ce(Q,"settings",Vn));let Wn={config:s[4]};return ve=new xr({props:Wn}),s[32](ve),Ye=new Ta({props:{copyText:s[3]}}),Ze=new li({props:{source:s[3],language:"svelte"}}),{c(){e=D("link"),t=$(),n=D("div"),r=D("div"),i=D("div"),Me(a.$$.fragment),M=$(),Me(k.$$.fragment),w=$(),Me(v.$$.fragment),G=$(),Me(ie.$$.fragment),oe=$(),Me(g.$$.fragment),P=$(),Me(L.$$.fragment),U=$(),Me(X.$$.fragment),re=$(),Me(Q.$$.fragment),le=$(),_e=D("div"),ne=D("div"),Me(ve.$$.fragment),Re=$(),He=D("div"),De=D("div"),Ne=D("div"),Le=D("button"),Ke=D("span"),Ge=be("ts"),$e=$(),it=D("span"),kt=be("/"),wt=$(),et=D("span"),St=be("js"),yt=$(),Me(Ye.$$.fragment),Ct=$(),Me(Ze.$$.fragment),this.h()},l(N){const he=ei('[data-svelte="svelte-tebjht"]',document.head);e=B(he,"LINK",{rel:!0,href:!0}),he.forEach(E),t=ee(N),n=B(N,"DIV",{class:!0});var We=K(n);r=B(We,"DIV",{class:!0});var at=K(r);i=B(at,"DIV",{class:!0});var Pe=K(i);ke(a.$$.fragment,Pe),M=ee(Pe),ke(k.$$.fragment,Pe),w=ee(Pe),ke(v.$$.fragment,Pe),G=ee(Pe),ke(ie.$$.fragment,Pe),oe=ee(Pe),ke(g.$$.fragment,Pe),P=ee(Pe),ke(L.$$.fragment,Pe),U=ee(Pe),ke(X.$$.fragment,Pe),re=ee(Pe),ke(Q.$$.fragment,Pe),Pe.forEach(E),le=ee(at),_e=B(at,"DIV",{class:!0});var bt=K(_e);ne=B(bt,"DIV",{class:!0});var vt=K(ne);ke(ve.$$.fragment,vt),vt.forEach(E),Re=ee(bt),He=B(bt,"DIV",{class:!0});var Et=K(He);De=B(Et,"DIV",{class:!0});var tt=K(De);Ne=B(tt,"DIV",{class:!0});var lt=K(Ne);Le=B(lt,"BUTTON",{class:!0});var ot=K(Le);Ke=B(ot,"SPAN",{class:!0});var Pt=K(Ke);Ge=pe(Pt,"ts"),Pt.forEach(E),$e=ee(ot),it=B(ot,"SPAN",{class:!0});var Tt=K(it);kt=pe(Tt,"/"),Tt.forEach(E),wt=ee(ot),et=B(ot,"SPAN",{class:!0});var rs=K(et);St=pe(rs,"js"),rs.forEach(E),ot.forEach(E),yt=ee(lt),ke(Ye.$$.fragment,lt),lt.forEach(E),Ct=ee(tt),ke(Ze.$$.fragment,tt),tt.forEach(E),Et.forEach(E),bt.forEach(E),at.forEach(E),We.forEach(E),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",h(e,"rel","stylesheet"),h(e,"href","prism-one-dark.css"),h(i,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),h(ne,"class","w-full lg:w-[var(--boardSize,50rem)]"),h(Ke,"class",Xe=s[2]?"text-yellow-600":""),h(it,"class","text-gray-600"),h(et,"class",mt=s[2]?"":"text-yellow-600"),h(Le,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),h(Ne,"class","absolute right-2 top-2 flex gap-4"),h(De,"class","shadow-lg rounded "),h(He,"class","row-start-2 relative"),h(_e,"class","grid grid-rows-[min-content_auto] gap-10"),h(r,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),h(n,"class","my-10 grid grid-cols-center")},m(N,he){y(document.head,e),Y(N,t,he),Y(N,n,he),y(n,r),y(r,i),we(a,i,null),y(i,M),we(k,i,null),y(i,w),we(v,i,null),y(i,G),we(ie,i,null),y(i,oe),we(g,i,null),y(i,P),we(L,i,null),y(i,U),we(X,i,null),y(i,re),we(Q,i,null),y(r,le),y(r,_e),y(_e,ne),we(ve,ne,null),y(_e,Re),y(_e,He),y(He,De),y(De,Ne),y(Ne,Le),y(Le,Ke),y(Ke,Ge),y(Le,$e),y(Le,it),y(it,kt),y(Le,wt),y(Le,et),y(et,St),y(Ne,yt),we(Ye,Ne,null),y(De,Ct),we(Ze,De,null),rt=!0,At||(Lt=de(Le,"click",s[33]),At=!0)},p(N,he){const We={};!l&&he[0]&2&&(l=!0,We.boardTheme=N[1].board.boardTheme,ge(()=>l=!1)),!o&&he[0]&2&&(o=!0,We.mouseEvents=N[1].board.mouseEvents,ge(()=>o=!1)),!u&&he[0]&2&&(u=!0,We.notation=N[1].board.notation,ge(()=>u=!1)),!f&&he[0]&2&&(f=!0,We.flipped=N[1].board.flipped,ge(()=>f=!1)),!m&&he[0]&2&&(m=!0,We.shadow=N[1].board.style.shadow,ge(()=>m=!1)),!c&&he[0]&2&&(c=!0,We.borderRadius=N[1].board.style.borderRadius,ge(()=>c=!1)),!C&&he[0]&2&&(C=!0,We.resizible=N[1].board.resizible.enabled,ge(()=>C=!1)),!q&&he[0]&2&&(q=!0,We.min=N[1].board.resizible.min,ge(()=>q=!1)),!F&&he[0]&2&&(F=!0,We.max=N[1].board.resizible.max,ge(()=>F=!1)),a.$set(We);const at={};!d&&he[0]&2&&(d=!0,at.enabled=N[1].movable.enabled,ge(()=>d=!1)),!p&&he[0]&2&&(p=!0,at.color=N[1].movable.color,ge(()=>p=!1)),k.$set(at);const Pe={};!A&&he[0]&2&&(A=!0,Pe.enabled=N[1].draggable.enabled,ge(()=>A=!1)),!W&&he[0]&2&&(W=!0,Pe.ghostPiece=N[1].draggable.ghostPiece.enabled,ge(()=>W=!1)),!j&&he[0]&2&&(j=!0,Pe.transition=N[1].draggable.transition.enabled,ge(()=>j=!1)),!V&&he[0]&2&&(V=!0,Pe.duration=N[1].draggable.transition.settings.duration,ge(()=>V=!1)),!O&&he[0]&2&&(O=!0,Pe.easing=N[1].draggable.transition.settings.easing,ge(()=>O=!1)),v.$set(Pe);const bt={};!me&&he[0]&2&&(me=!0,bt.enabled=N[1].selectable.enabled,ge(()=>me=!1)),ie.$set(bt);const vt={};!_&&he[0]&2&&(_=!0,vt.enabled=N[1].legal.enabled,ge(()=>_=!1)),!b&&he[0]&2&&(b=!0,vt.preMovesEnabled=N[1].legal.preMoves.enabled,ge(()=>b=!1)),g.$set(vt);const Et={};!I&&he[0]&2&&(I=!0,Et.enabled=N[1].highlight.enabled,ge(()=>I=!1)),!z&&he[0]&2&&(z=!0,Et.settings=N[1].highlight.settings,ge(()=>z=!1)),L.$set(Et);const tt={};!ae&&he[0]&2&&(ae=!0,tt.enabled=N[1].drawTools.enabled,ge(()=>ae=!1)),!T&&he[0]&2&&(T=!0,tt.knightLShape=N[1].drawTools.settings.knightLShape,ge(()=>T=!1)),!H&&he[0]&2&&(H=!0,tt.onlyChessMove=N[1].drawTools.settings.onlyChessMove,ge(()=>H=!1)),X.$set(tt);const lt={};!R&&he[0]&2&&(R=!0,lt.enabled=N[1].sounds.enabled,ge(()=>R=!1)),!Z&&he[0]&2&&(Z=!0,lt.settings=N[1].sounds.settings,ge(()=>Z=!1)),Q.$set(lt);const ot={};ve.$set(ot),(!rt||he[0]&4&&Xe!==(Xe=N[2]?"text-yellow-600":""))&&h(Ke,"class",Xe),(!rt||he[0]&4&&mt!==(mt=N[2]?"":"text-yellow-600"))&&h(et,"class",mt);const Pt={};he[0]&8&&(Pt.copyText=N[3]),Ye.$set(Pt);const Tt={};he[0]&8&&(Tt.source=N[3]),Ze.$set(Tt)},i(N){rt||(J(a.$$.fragment,N),J(k.$$.fragment,N),J(v.$$.fragment,N),J(ie.$$.fragment,N),J(g.$$.fragment,N),J(L.$$.fragment,N),J(X.$$.fragment,N),J(Q.$$.fragment,N),J(ve.$$.fragment,N),J(Ye.$$.fragment,N),J(Ze.$$.fragment,N),rt=!0)},o(N){se(a.$$.fragment,N),se(k.$$.fragment,N),se(v.$$.fragment,N),se(ie.$$.fragment,N),se(g.$$.fragment,N),se(L.$$.fragment,N),se(X.$$.fragment,N),se(Q.$$.fragment,N),se(ve.$$.fragment,N),se(Ye.$$.fragment,N),se(Ze.$$.fragment,N),rt=!1},d(N){E(e),N&&E(t),N&&E(n),Se(a),Se(k),Se(v),Se(ie),Se(g),Se(L),Se(X),Se(Q),s[32](null),Se(ve),Se(Ye),Se(Ze),At=!1,Lt()}}}function Ra(s,e,t){const n=new vn.Chess,r={movable:Ee.BOTH,legal:!0,callbacks:{afterMove:T=>n.move({from:T.substring(0,2),to:T.substring(2,4),...T.length>4&&{promotion:T[4]}}),getLegalMoves:()=>n.moves({verbose:!0}).map(T=>{var H;return T.from+T.to+((H=T.promotion)!=null?H:"")}),getWhiteToMove:()=>n.turn()==="w",getInCheck:()=>n.inCheck(),getLastMove:()=>{var H;const T=n.history({verbose:!0}).pop();return T?T.from+T.to+((H=T.promotion)!=null?H:""):""}},board:{style:{shadow:!0,borderRadius:"0.25rem"},resizible:!0}},i=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,a=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let l,o=new Mn(r),u=!1,f=!0,m="";ts(()=>{t(5,u=!0),t(1,o=l.getState())});const c=(T,H)=>{const re=T.getConfig(),Q=`
	import type { ChessboardConfig } from '@powchess/chessboard/boardConfig';`;u&&l.setState(T);let R=JSON.stringify(re,(ne,ve)=>ne==="callbacks"?"{functions}":ve,4);R=R.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',H?i:a);const Z=`
	import { Color } from '@powchess/chessboard/enums';`;H&&(R=R.replaceAll(`movable: ${Ee.WHITE}`,"movable: Color.WHITE").replaceAll(`movable: ${Ee.BLACK}`,"movable: Color.BLACK").replaceAll(`movable: ${Ee.BOTH}`,"movable: Color.BOTH"));function le(){return R.includes("movable: Color.WHITE")||R.includes("movable: Color.BLACK")||R.includes("movable: Color.BOTH")}let _e=`<script${H?' lang="ts"':""}>
	import Chessboard from '@powchess/chessboard';${H?Q:""}${le()&&H?Z:""}${o.legal.enabled?H?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${H?": ChessboardConfig":""} = ${R};
<\/script>

<Chessboard {config} />`;return H||(_e=_e.replaceAll("Color.WHITE",`${Ee.WHITE}`).replaceAll("Color.BLACK",`${Ee.BLACK}`).replaceAll("Color.BOTH",`${Ee.BOTH}`)),_e};function C(T){s.$$.not_equal(o.board.boardTheme,T)&&(o.board.boardTheme=T,t(1,o),t(5,u),t(0,l))}function q(T){s.$$.not_equal(o.board.mouseEvents,T)&&(o.board.mouseEvents=T,t(1,o),t(5,u),t(0,l))}function F(T){s.$$.not_equal(o.board.notation,T)&&(o.board.notation=T,t(1,o),t(5,u),t(0,l))}function M(T){s.$$.not_equal(o.board.flipped,T)&&(o.board.flipped=T,t(1,o),t(5,u),t(0,l))}function k(T){s.$$.not_equal(o.board.style.shadow,T)&&(o.board.style.shadow=T,t(1,o),t(5,u),t(0,l))}function d(T){s.$$.not_equal(o.board.style.borderRadius,T)&&(o.board.style.borderRadius=T,t(1,o),t(5,u),t(0,l))}function p(T){s.$$.not_equal(o.board.resizible.enabled,T)&&(o.board.resizible.enabled=T,t(1,o),t(5,u),t(0,l))}function w(T){s.$$.not_equal(o.board.resizible.min,T)&&(o.board.resizible.min=T,t(1,o),t(5,u),t(0,l))}function v(T){s.$$.not_equal(o.board.resizible.max,T)&&(o.board.resizible.max=T,t(1,o),t(5,u),t(0,l))}function A(T){s.$$.not_equal(o.movable.enabled,T)&&(o.movable.enabled=T,t(1,o),t(5,u),t(0,l))}function W(T){s.$$.not_equal(o.movable.color,T)&&(o.movable.color=T,t(1,o),t(5,u),t(0,l))}function j(T){s.$$.not_equal(o.draggable.enabled,T)&&(o.draggable.enabled=T,t(1,o),t(5,u),t(0,l))}function V(T){s.$$.not_equal(o.draggable.ghostPiece.enabled,T)&&(o.draggable.ghostPiece.enabled=T,t(1,o),t(5,u),t(0,l))}function O(T){s.$$.not_equal(o.draggable.transition.enabled,T)&&(o.draggable.transition.enabled=T,t(1,o),t(5,u),t(0,l))}function G(T){s.$$.not_equal(o.draggable.transition.settings.duration,T)&&(o.draggable.transition.settings.duration=T,t(1,o),t(5,u),t(0,l))}function ie(T){s.$$.not_equal(o.draggable.transition.settings.easing,T)&&(o.draggable.transition.settings.easing=T,t(1,o),t(5,u),t(0,l))}function me(T){s.$$.not_equal(o.selectable.enabled,T)&&(o.selectable.enabled=T,t(1,o),t(5,u),t(0,l))}function oe(T){s.$$.not_equal(o.legal.enabled,T)&&(o.legal.enabled=T,t(1,o),t(5,u),t(0,l))}function g(T){s.$$.not_equal(o.legal.preMoves.enabled,T)&&(o.legal.preMoves.enabled=T,t(1,o),t(5,u),t(0,l))}function _(T){s.$$.not_equal(o.highlight.enabled,T)&&(o.highlight.enabled=T,t(1,o),t(5,u),t(0,l))}function b(T){s.$$.not_equal(o.highlight.settings,T)&&(o.highlight.settings=T,t(1,o),t(5,u),t(0,l))}function P(T){s.$$.not_equal(o.drawTools.enabled,T)&&(o.drawTools.enabled=T,t(1,o),t(5,u),t(0,l))}function L(T){s.$$.not_equal(o.drawTools.settings.knightLShape,T)&&(o.drawTools.settings.knightLShape=T,t(1,o),t(5,u),t(0,l))}function I(T){s.$$.not_equal(o.drawTools.settings.onlyChessMove,T)&&(o.drawTools.settings.onlyChessMove=T,t(1,o),t(5,u),t(0,l))}function z(T){s.$$.not_equal(o.sounds.enabled,T)&&(o.sounds.enabled=T,t(1,o),t(5,u),t(0,l))}function U(T){s.$$.not_equal(o.sounds.settings,T)&&(o.sounds.settings=T,t(1,o),t(5,u),t(0,l))}function X(T){ue[T?"unshift":"push"](()=>{l=T,t(0,l)})}const ae=()=>{t(2,f=!f)};return s.$$.update=()=>{s.$$.dirty[0]&35&&o.legal.enabled&&(t(1,o.board.startFen=En,o),n.load(o.board.startFen),u&&l.setFEN(o.board.startFen,!1)),s.$$.dirty[0]&6&&t(3,m=c(o,f))},[l,o,f,m,r,u,C,q,F,M,k,d,p,w,v,A,W,j,V,O,G,ie,me,oe,g,_,b,P,L,I,z,U,X,ae]}class Ba extends Oe{constructor(e){super(),Fe(this,e,Ra,qa,qe,{},null,[-1,-1])}}export{Ba as default};
