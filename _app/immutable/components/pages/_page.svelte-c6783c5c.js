import{S as Oe,i as Fe,s as qe,B as un,k as D,a as ee,l as B,m as K,h as E,c as te,p as ye,n as c,b as Y,F as y,C as fn,D as dn,E as cn,f as x,t as se,H as Rt,I as rs,J as ue,K as Kn,e as Ce,L as jn,q as be,r as me,u as Bt,A as Te,M as dt,N as hn,O as Gn,P as Qn,Q as ls,R as mt,T as xt,U as fe,V as $t,W as xe,X as es,G as Xn,Y as st,Z as ze,_ as Ve,o as ts,g as Be,d as Ue,$ as nt,a0 as Yn,a1 as Zn,a2 as he,v as ke,w as we,x as Me,a3 as ge,y as Se,a4 as os,a5 as gn,a6 as Jn,a7 as us,a8 as xn,a9 as bn,z as $n,aa as mn,ab as ct,ac as kt,ad as ss,ae as ft,af as ut,ag as ei}from"../../chunks/index-a0d75c90.js";import{w as ti}from"../../chunks/index-129aa244.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pn={exports:{}};(function(s){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(i){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},l={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function d(m){return m instanceof o?new o(m.type,d(m.content),m.alias):Array.isArray(m)?m.map(d):m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(d){return Object.prototype.toString.call(d).slice(8,-1)},objId:function(d){return d.__id||Object.defineProperty(d,"__id",{value:++n}),d.__id},clone:function d(m,M){M=M||{};var v,A;switch(l.util.type(m)){case"Object":if(A=l.util.objId(m),M[A])return M[A];v={},M[A]=v;for(var W in m)m.hasOwnProperty(W)&&(v[W]=d(m[W],M));return v;case"Array":return A=l.util.objId(m),M[A]?M[A]:(v=[],M[A]=v,m.forEach(function(j,z){v[z]=d(j,M)}),v);default:return m}},getLanguage:function(d){for(;d;){var m=a.exec(d.className);if(m)return m[1].toLowerCase();d=d.parentElement}return"none"},setLanguage:function(d,m){d.className=d.className.replace(RegExp(a,"gi"),""),d.classList.add("language-"+m)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(v){var d=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(v.stack)||[])[1];if(d){var m=document.getElementsByTagName("script");for(var M in m)if(m[M].src==d)return m[M]}return null}},isActive:function(d,m,M){for(var v="no-"+m;d;){var A=d.classList;if(A.contains(m))return!0;if(A.contains(v))return!1;d=d.parentElement}return!!M}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(d,m){var M=l.util.clone(l.languages[d]);for(var v in m)M[v]=m[v];return M},insertBefore:function(d,m,M,v){v=v||l.languages;var A=v[d],W={};for(var j in A)if(A.hasOwnProperty(j)){if(j==m)for(var z in M)M.hasOwnProperty(z)&&(W[z]=M[z]);M.hasOwnProperty(j)||(W[j]=A[j])}var O=v[d];return v[d]=W,l.languages.DFS(l.languages,function(G,ie){ie===O&&G!=d&&(this[G]=W)}),W},DFS:function d(m,M,v,A){A=A||{};var W=l.util.objId;for(var j in m)if(m.hasOwnProperty(j)){M.call(m,j,m[j],v||j);var z=m[j],O=l.util.type(z);O==="Object"&&!A[W(z)]?(A[W(z)]=!0,d(z,M,null,A)):O==="Array"&&!A[W(z)]&&(A[W(z)]=!0,d(z,M,j,A))}}},plugins:{},highlightAll:function(d,m){l.highlightAllUnder(document,d,m)},highlightAllUnder:function(d,m,M){var v={callback:M,container:d,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",v),v.elements=Array.prototype.slice.apply(v.container.querySelectorAll(v.selector)),l.hooks.run("before-all-elements-highlight",v);for(var A=0,W;W=v.elements[A++];)l.highlightElement(W,m===!0,v.callback)},highlightElement:function(d,m,M){var v=l.util.getLanguage(d),A=l.languages[v];l.util.setLanguage(d,v);var W=d.parentElement;W&&W.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(W,v);var j=d.textContent,z={element:d,language:v,grammar:A,code:j};function O(ie){z.highlightedCode=ie,l.hooks.run("before-insert",z),z.element.innerHTML=z.highlightedCode,l.hooks.run("after-highlight",z),l.hooks.run("complete",z),M&&M.call(z.element)}if(l.hooks.run("before-sanity-check",z),W=z.element.parentElement,W&&W.nodeName.toLowerCase()==="pre"&&!W.hasAttribute("tabindex")&&W.setAttribute("tabindex","0"),!z.code){l.hooks.run("complete",z),M&&M.call(z.element);return}if(l.hooks.run("before-highlight",z),!z.grammar){O(l.util.encode(z.code));return}if(m&&i.Worker){var G=new Worker(l.filename);G.onmessage=function(ie){O(ie.data)},G.postMessage(JSON.stringify({language:z.language,code:z.code,immediateClose:!0}))}else O(l.highlight(z.code,z.grammar,z.language))},highlight:function(d,m,M){var v={code:d,grammar:m,language:M};if(l.hooks.run("before-tokenize",v),!v.grammar)throw new Error('The language "'+v.language+'" has no grammar.');return v.tokens=l.tokenize(v.code,v.grammar),l.hooks.run("after-tokenize",v),o.stringify(l.util.encode(v.tokens),v.language)},tokenize:function(d,m){var M=m.rest;if(M){for(var v in M)m[v]=M[v];delete m.rest}var A=new p;return h(A,A.head,d),f(d,A,m,A.head,0),q(A)},hooks:{all:{},add:function(d,m){var M=l.hooks.all;M[d]=M[d]||[],M[d].push(m)},run:function(d,m){var M=l.hooks.all[d];if(!(!M||!M.length))for(var v=0,A;A=M[v++];)A(m)}},Token:o};i.Prism=l;function o(d,m,M,v){this.type=d,this.content=m,this.alias=M,this.length=(v||"").length|0}o.stringify=function d(m,M){if(typeof m=="string")return m;if(Array.isArray(m)){var v="";return m.forEach(function(O){v+=d(O,M)}),v}var A={type:m.type,content:d(m.content,M),tag:"span",classes:["token",m.type],attributes:{},language:M},W=m.alias;W&&(Array.isArray(W)?Array.prototype.push.apply(A.classes,W):A.classes.push(W)),l.hooks.run("wrap",A);var j="";for(var z in A.attributes)j+=" "+z+'="'+(A.attributes[z]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+j+">"+A.content+"</"+A.tag+">"};function u(d,m,M,v){d.lastIndex=m;var A=d.exec(M);if(A&&v&&A[1]){var W=A[1].length;A.index+=W,A[0]=A[0].slice(W)}return A}function f(d,m,M,v,A,W){for(var j in M)if(!(!M.hasOwnProperty(j)||!M[j])){var z=M[j];z=Array.isArray(z)?z:[z];for(var O=0;O<z.length;++O){if(W&&W.cause==j+","+O)return;var G=z[O],ie=G.inside,pe=!!G.lookbehind,oe=!!G.greedy,g=G.alias;if(oe&&!G.pattern.global){var _=G.pattern.toString().match(/[imsuy]*$/)[0];G.pattern=RegExp(G.pattern.source,_+"g")}for(var b=G.pattern||G,T=v.next,L=A;T!==m.tail&&!(W&&L>=W.reach);L+=T.value.length,T=T.next){var I=T.value;if(m.length>d.length)return;if(!(I instanceof o)){var H=1,U;if(oe){if(U=u(b,L,d,pe),!U||U.index>=d.length)break;var V=U.index,X=U.index+U[0].length,re=L;for(re+=T.value.length;V>=re;)T=T.next,re+=T.value.length;if(re-=T.value.length,L=re,T.value instanceof o)continue;for(var P=T;P!==m.tail&&(re<X||typeof P.value=="string");P=P.next)H++,re+=P.value.length;H--,I=d.slice(L,re),U.index-=L}else if(U=u(b,0,I,pe),!U)continue;var V=U.index,ae=U[0],Q=I.slice(0,V),R=I.slice(V+ae.length),J=L+I.length;W&&J>W.reach&&(W.reach=J);var le=T.prev;Q&&(le=h(m,le,Q),L+=Q.length),C(m,le,H);var _e=new o(j,ie?l.tokenize(ae,ie):ae,g,ae);if(T=h(m,le,_e),R&&h(m,T,R),H>1){var ne={cause:j+","+O,reach:J};f(d,m,M,T.prev,L,ne),W&&ne.reach>W.reach&&(W.reach=ne.reach)}}}}}}function p(){var d={value:null,prev:null,next:null},m={value:null,prev:d,next:null};d.next=m,this.head=d,this.tail=m,this.length=0}function h(d,m,M){var v=m.next,A={value:M,prev:m,next:v};return m.next=A,v.prev=A,d.length++,A}function C(d,m,M){for(var v=m.next,A=0;A<M&&v!==d.tail;A++)v=v.next;m.next=v,v.prev=m,d.length-=A}function q(d){for(var m=[],M=d.head.next;M!==d.tail;)m.push(M.value),M=M.next;return m}if(!i.document)return i.addEventListener&&(l.disableWorkerMessageHandler||i.addEventListener("message",function(d){var m=JSON.parse(d.data),M=m.language,v=m.code,A=m.immediateClose;i.postMessage(l.highlight(v,l.languages[M],M)),A&&i.close()},!1)),l;var F=l.util.currentScript();F&&(l.filename=F.src,F.hasAttribute("data-manual")&&(l.manual=!0));function k(){l.manual||l.highlightAll()}if(!l.manual){var w=document.readyState;w==="loading"||w==="interactive"&&F&&F.defer?document.addEventListener("DOMContentLoaded",k):window.requestAnimationFrame?window.requestAnimationFrame(k):window.setTimeout(k,16)}return l}(t);s.exports&&(s.exports=e),typeof fs<"u"&&(fs.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(a,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};l["language-"+n]={pattern:/[\s\S]+/,inside:e.languages[n]};var o={};o[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:l},e.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(i,a){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:e.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(i){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var n=i.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading\u2026",a=function(F,k){return"\u2716 Error "+F+" while fetching file: "+k},n="\u2716 Error: File does not exist or is empty",r={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",f="failed",p="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function h(F,k,w){var d=new XMLHttpRequest;d.open("GET",F,!0),d.onreadystatechange=function(){d.readyState==4&&(d.status<400&&d.responseText?k(d.responseText):d.status>=400?w(a(d.status,d.statusText)):w(n))},d.send(null)}function C(F){var k=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(F||"");if(k){var w=Number(k[1]),d=k[2],m=k[3];return d?m?[w,Number(m)]:[w,void 0]:[w,w]}}e.hooks.add("before-highlightall",function(F){F.selector+=", "+p}),e.hooks.add("before-sanity-check",function(F){var k=F.element;if(k.matches(p)){F.code="",k.setAttribute(l,o);var w=k.appendChild(document.createElement("CODE"));w.textContent=i;var d=k.getAttribute("data-src"),m=F.language;if(m==="none"){var M=(/\.(\w+)$/.exec(d)||[,"none"])[1];m=r[M]||M}e.util.setLanguage(w,m),e.util.setLanguage(k,m);var v=e.plugins.autoloader;v&&v.loadLanguages(m),h(d,function(A){k.setAttribute(l,u);var W=C(k.getAttribute("data-range"));if(W){var j=A.split(/\r\n?|\n/g),z=W[0],O=W[1]==null?j.length:W[1];z<0&&(z+=j.length),z=Math.max(0,Math.min(z-1,j.length)),O<0&&(O+=j.length),O=Math.max(0,Math.min(O,j.length)),A=j.slice(z,O).join(`
`),k.hasAttribute("data-start")||k.setAttribute("data-start",String(z+1))}w.textContent=A,e.highlightElement(w)},function(A){k.setAttribute(l,f),w.textContent=A})}}),e.plugins.fileHighlight={highlight:function(k){for(var w=(k||document).querySelectorAll(p),d=0,m;m=w[d++];)e.highlightElement(m)}};var q=!1;e.fileHighlight=function(){q||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),q=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(pn);const _n=pn.exports,ds="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+ds+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+ds+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",s=>{s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(t,e){const i={};i["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[e]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;const a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};a["language-"+e]={pattern:/[\s\S]+/,inside:Prism.languages[e]};const n={};n[t]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,t),"i"),lookbehind:!0,greedy:!0,inside:a},Prism.languages.insertBefore("svelte","cdata",n)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function si(s){let t,e;return{c(){t=new Kn(!1),e=Ce(),this.h()},l(i){t=jn(i,!1),e=Ce(),this.h()},h(){t.a=e},m(i,a){t.m(s[2],i,a),Y(i,e,a)},p(i,a){a&4&&t.p(i[2])},d(i){i&&E(e),i&&t.d()}}}function ni(s){let t;return{c(){t=be(s[2])},l(e){t=me(e,s[2])},m(e,i){Y(e,t,i)},p(e,i){i&4&&Bt(t,e[2])},d(e){e&&E(t)}}}function ii(s){let t,e,i,a,n,r,l;const o=s[6].default,u=un(o,s,s[5],null);function f(C,q){return C[0]==="none"?ni:si}let p=f(s),h=p(s);return{c(){t=D("code"),u&&u.c(),e=ee(),i=D("pre"),a=D("code"),h.c(),this.h()},l(C){t=B(C,"CODE",{style:!0});var q=K(t);u&&u.l(q),q.forEach(E),e=te(C),i=B(C,"PRE",{class:!0,"command-line":!0,"data-output":!0});var F=K(i);a=B(F,"CODE",{class:!0});var k=K(a);h.l(k),k.forEach(E),F.forEach(E),this.h()},h(){ye(t,"display","none"),c(a,"class",n="language-"+s[0]),c(i,"class",r="language-"+s[0]),c(i,"command-line",""),c(i,"data-output","2-17")},m(C,q){Y(C,t,q),u&&u.m(t,null),s[7](t),Y(C,e,q),Y(C,i,q),y(i,a),h.m(a,null),l=!0},p(C,[q]){u&&u.p&&(!l||q&32)&&fn(u,o,C,C[5],l?cn(o,C[5],q,null):dn(C[5]),null),p===(p=f(C))&&h?h.p(C,q):(h.d(1),h=p(C),h&&(h.c(),h.m(a,null))),(!l||q&1&&n!==(n="language-"+C[0]))&&c(a,"class",n),(!l||q&1&&r!==(r="language-"+C[0]))&&c(i,"class",r)},i(C){l||(x(u,C),l=!0)},o(C){se(u,C),l=!1},d(C){C&&E(t),u&&u.d(C),s[7](null),C&&E(e),C&&E(i),h.d()}}}const cs=_n;_n.highlightElement;const ai={transform:s=>s};function ri(s,t,e){let{$$slots:i={},$$scope:a}=t,{language:n="javascript"}=t,{source:r=""}=t,{transform:l=h=>h}=t,o,u;function f(){const h=cs.languages[n];let C=r||o.textContent;C=ai.transform(C),C=l(C),e(2,u=n==="none"?C:cs.highlight(C,h,n))}function p(h){ue[h?"unshift":"push"](()=>{o=h,e(1,o)})}return s.$$set=h=>{e(9,t=Rt(Rt({},t),rs(h))),"language"in h&&e(0,n=h.language),"source"in h&&e(3,r=h.source),"transform"in h&&e(4,l=h.transform),"$$scope"in h&&e(5,a=h.$$scope)},s.$$.update=()=>{t&&(r||o)&&f()},t=rs(t),[n,o,u,r,l,a,i,p]}class li extends Oe{constructor(t){super(),Fe(this,t,ri,ii,qe,{language:0,source:3,transform:4})}}var vn={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Chess=s.validateFen=s.SQUARES=s.DEFAULT_POSITION=s.KING=s.QUEEN=s.ROOK=s.BISHOP=s.KNIGHT=s.PAWN=s.BLACK=s.WHITE=void 0,s.WHITE="w",s.BLACK="b",s.PAWN="p",s.KNIGHT="n",s.BISHOP="b",s.ROOK="r",s.QUEEN="q",s.KING="k",s.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";const t=-1,e={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"};s.SQUARES=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"];const i={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},a={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},n={b:[16,32,17,15],w:[-16,-32,-17,-15]},r={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},l=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],o=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],u={p:1,n:2,b:4,r:8,q:16,k:32},f="pnbrqkPNBRQK",p=[s.KNIGHT,s.BISHOP,s.ROOK,s.QUEEN],h=7,C=6,q=1,F=0,k={w:[{square:a.a1,flag:i.QSIDE_CASTLE},{square:a.h1,flag:i.KSIDE_CASTLE}],b:[{square:a.a8,flag:i.QSIDE_CASTLE},{square:a.h8,flag:i.KSIDE_CASTLE}]},w={b:q,w:C},d=["1-0","0-1","1/2-1/2","*"];function m(oe){return oe>>4}function M(oe){return oe&15}function v(oe){return"0123456789".indexOf(oe)!==-1}function A(oe){const g=M(oe),_=m(oe);return"abcdefgh".substring(g,g+1)+"87654321".substring(_,_+1)}function W(oe){return oe===s.WHITE?s.BLACK:s.WHITE}function j(oe){const g=[];g[0]="No errors.",g[1]="FEN string must contain six space-delimited fields.",g[2]="6th field (move number) must be a positive integer.",g[3]="5th field (half move counter) must be a non-negative integer.",g[4]="4th field (en-passant square) is invalid.",g[5]="3rd field (castling availability) is invalid.",g[6]="2nd field (side to move) is invalid.",g[7]="1st field (piece positions) does not contain 8 '/'-delimited rows.",g[8]="1st field (piece positions) is invalid [consecutive numbers].",g[9]="1st field (piece positions) is invalid [invalid piece].",g[10]="1st field (piece positions) is invalid [row too large].",g[11]="Illegal en-passant square";const _=oe.split(/\s+/);if(_.length!==6)return{valid:!1,errorNumber:1,error:g[1]};const b=parseInt(_[5],10);if(isNaN(b)||b<=0)return{valid:!1,errorNumber:2,error:g[2]};const T=parseInt(_[4],10);if(isNaN(T)||T<0)return{valid:!1,errorNumber:3,error:g[3]};if(!/^(-|[abcdefgh][36])$/.test(_[3]))return{valid:!1,errorNumber:4,error:g[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(_[2]))return{valid:!1,errorNumber:5,error:g[5]};if(!/^(w|b)$/.test(_[1]))return{valid:!1,errorNumber:6,error:g[6]};const L=_[0].split("/");if(L.length!==8)return{valid:!1,errorNumber:7,error:g[7]};for(let I=0;I<L.length;I++){let H=0,U=!1;for(let X=0;X<L[I].length;X++)if(v(L[I][X])){if(U)return{valid:!1,errorNumber:8,error:g[8]};H+=parseInt(L[I][X],10),U=!0}else{if(!/^[prnbqkPRNBQK]$/.test(L[I][X]))return{valid:!1,errorNumber:9,error:g[9]};H+=1,U=!1}if(H!==8)return{valid:!1,errorNumber:10,error:g[10]}}return _[3][1]=="3"&&_[1]=="w"||_[3][1]=="6"&&_[1]=="b"?{valid:!1,errorNumber:11,error:g[11]}:{valid:!0,errorNumber:0,error:g[0]}}s.validateFen=j;function z(oe,g){const _=oe.from,b=oe.to,T=oe.piece;let L=0,I=0,H=0;for(let U=0,X=g.length;U<X;U++){const re=g[U].from,P=g[U].to,V=g[U].piece;T===V&&_!==re&&b===P&&(L++,m(_)===m(re)&&I++,M(_)===M(re)&&H++)}return L>0?I>0&&H>0?A(_):H>0?A(_).charAt(1):A(_).charAt(0):""}function O(oe,g,_,b,T,L=void 0,I=i.NORMAL){const H=m(b);if(T===s.PAWN&&(H===h||H===F))for(let U=0;U<p.length;U++){const X=p[U];oe.push({color:g,from:_,to:b,piece:T,captured:L,promotion:X,flags:I|i.PROMOTION})}else oe.push({color:g,from:_,to:b,piece:T,captured:L,promotion:void 0,flags:I})}function G(oe){let g=oe.charAt(0);return g>="a"&&g<="h"?oe.match(/[a-h]\d.*[a-h]\d/)?void 0:s.PAWN:(g=g.toLowerCase(),g==="o"?s.KING:g)}function ie(oe){return oe.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class pe{constructor(g=s.DEFAULT_POSITION){this._board=new Array(128),this._turn=s.WHITE,this._header={},this._kings={w:t,b:t},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(g)}clear(g=!1){this._board=new Array(128),this._kings={w:t,b:t},this._turn=s.WHITE,this._castling={w:0,b:0},this._epSquare=t,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=g?this._header:{},this._updateSetup(this.fen())}load(g,_=!1){const b=g.split(/\s+/),T=b[0];let L=0;if(!j(g).valid)return!1;this.clear(_);for(let I=0;I<T.length;I++){const H=T.charAt(I);if(H==="/")L+=8;else if(v(H))L+=parseInt(H,10);else{const U=H<"a"?s.WHITE:s.BLACK;this.put({type:H.toLowerCase(),color:U},A(L)),L++}}return this._turn=b[1],b[2].indexOf("K")>-1&&(this._castling.w|=i.KSIDE_CASTLE),b[2].indexOf("Q")>-1&&(this._castling.w|=i.QSIDE_CASTLE),b[2].indexOf("k")>-1&&(this._castling.b|=i.KSIDE_CASTLE),b[2].indexOf("q")>-1&&(this._castling.b|=i.QSIDE_CASTLE),this._epSquare=b[3]==="-"?t:a[b[3]],this._halfMoves=parseInt(b[4],10),this._moveNumber=parseInt(b[5],10),this._updateSetup(this.fen()),!0}fen(){let g=0,_="";for(let L=a.a8;L<=a.h1;L++){if(this._board[L]){g>0&&(_+=g,g=0);const{color:I,type:H}=this._board[L];_+=I===s.WHITE?H.toUpperCase():H.toLowerCase()}else g++;L+1&136&&(g>0&&(_+=g),L!==a.h1&&(_+="/"),g=0,L+=8)}let b="";this._castling[s.WHITE]&i.KSIDE_CASTLE&&(b+="K"),this._castling[s.WHITE]&i.QSIDE_CASTLE&&(b+="Q"),this._castling[s.BLACK]&i.KSIDE_CASTLE&&(b+="k"),this._castling[s.BLACK]&i.QSIDE_CASTLE&&(b+="q"),b=b||"-";const T=this._epSquare===t?"-":A(this._epSquare);return[_,this._turn,b,T,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(g){this._history.length>0||(g!==s.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=g):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(s.DEFAULT_POSITION)}get(g){return this._board[a[g]]||!1}put({type:g,color:_},b){if(f.indexOf(g.toLowerCase())===-1||!(b in a))return!1;const T=a[b];return g==s.KING&&!(this._kings[_]==t||this._kings[_]==T)?!1:(this._board[T]={type:g,color:_},g===s.KING&&(this._kings[_]=T),this._updateSetup(this.fen()),!0)}remove(g){const _=this.get(g);return delete this._board[a[g]],_&&_.type===s.KING&&(this._kings[_.color]=t),this._updateSetup(this.fen()),_}_attacked(g,_){for(let b=a.a8;b<=a.h1;b++){if(b&136){b+=7;continue}if(this._board[b]===void 0||this._board[b].color!==g)continue;const T=this._board[b],L=b-_,I=L+119;if(l[I]&u[T.type]){if(T.type===s.PAWN){if(L>0){if(T.color===s.WHITE)return!0}else if(T.color===s.BLACK)return!0;continue}if(T.type==="n"||T.type==="k")return!0;const H=o[I];let U=b+H,X=!1;for(;U!==_;){if(this._board[U]!=null){X=!0;break}U+=H}if(!X)return!0}}return!1}_isKingAttacked(g){return this._attacked(W(g),this._kings[g])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const g={b:0,n:0,r:0,q:0,k:0,p:0},_=[];let b=0,T=0;for(let L=a.a8;L<=a.h1;L++){if(T=(T+1)%2,L&136){L+=7;continue}const I=this._board[L];I&&(g[I.type]=I.type in g?g[I.type]+1:1,I.type===s.BISHOP&&_.push(T),b++)}if(b===2)return!0;if(b===3&&(g[s.BISHOP]===1||g[s.KNIGHT]===1))return!0;if(b===g[s.BISHOP]+2){let L=0;const I=_.length;for(let H=0;H<I;H++)L+=_[H];if(L===0||L===I)return!0}return!1}isThreefoldRepetition(){const g=[],_={};let b=!1;for(;;){const T=this._undoMove();if(!T)break;g.push(T)}for(;;){const T=this.fen().split(" ").slice(0,4).join(" ");_[T]=T in _?_[T]+1:1,_[T]>=3&&(b=!0);const L=g.pop();if(L)this._makeMove(L);else break}return b}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:g=!1,square:_=void 0}={}){const b=this._moves({square:_});return g?b.map(T=>this._makePretty(T)):b.map(T=>this._moveToSan(T,b))}_moves({legal:g=!0,piece:_=void 0,square:b=void 0}={}){var T;const L=b?b.toLowerCase():void 0,I=_==null?void 0:_.toLowerCase(),H=[],U=this._turn,X=W(U);let re=a.a8,P=a.h1,V=!1;if(L)if(L in a)re=P=a[L],V=!0;else return[];for(let Q=re;Q<=P;Q++){if(Q&136){Q+=7;continue}if(!this._board[Q]||this._board[Q].color===X)continue;const{type:R}=this._board[Q];let J;if(R===s.PAWN){if(I&&I!==R)continue;J=Q+n[U][0],this._board[J]||(O(H,U,Q,J,s.PAWN),J=Q+n[U][1],w[U]===m(Q)&&!this._board[J]&&O(H,U,Q,J,s.PAWN,void 0,i.BIG_PAWN));for(let le=2;le<4;le++)J=Q+n[U][le],!(J&136)&&(((T=this._board[J])===null||T===void 0?void 0:T.color)===X?O(H,U,Q,J,s.PAWN,this._board[J].type,i.CAPTURE):J===this._epSquare&&O(H,U,Q,J,s.PAWN,s.PAWN,i.EP_CAPTURE))}else{if(I&&I!==R)continue;for(let le=0,_e=r[R].length;le<_e;le++){const ne=r[R][le];for(J=Q;J+=ne,!(J&136);){if(!this._board[J])O(H,U,Q,J,R);else{if(this._board[J].color===U)break;O(H,U,Q,J,R,this._board[J].type,i.CAPTURE);break}if(R===s.KNIGHT||R===s.KING)break}}}}if((I===void 0||I===s.KING)&&(!V||P===this._kings[U])){if(this._castling[U]&i.KSIDE_CASTLE){const Q=this._kings[U],R=Q+2;!this._board[Q+1]&&!this._board[R]&&!this._attacked(X,this._kings[U])&&!this._attacked(X,Q+1)&&!this._attacked(X,R)&&O(H,U,this._kings[U],R,s.KING,void 0,i.KSIDE_CASTLE)}if(this._castling[U]&i.QSIDE_CASTLE){const Q=this._kings[U],R=Q-2;!this._board[Q-1]&&!this._board[Q-2]&&!this._board[Q-3]&&!this._attacked(X,this._kings[U])&&!this._attacked(X,Q-1)&&!this._attacked(X,R)&&O(H,U,this._kings[U],R,s.KING,void 0,i.QSIDE_CASTLE)}}if(!g)return H;const ae=[];for(let Q=0,R=H.length;Q<R;Q++)this._makeMove(H[Q]),this._isKingAttacked(U)||ae.push(H[Q]),this._undoMove();return ae}move(g,{sloppy:_=!1}={}){let b=null;if(typeof g=="string")b=this._moveFromSan(g,_);else if(typeof g=="object"){const L=this._moves();for(let I=0,H=L.length;I<H;I++)if(g.from===A(L[I].from)&&g.to===A(L[I].to)&&(!("promotion"in L[I])||g.promotion===L[I].promotion)){b=L[I];break}}if(!b)return null;const T=this._makePretty(b);return this._makeMove(b),T}_push(g){this._history.push({move:g,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(g){const _=this._turn,b=W(_);if(this._push(g),this._board[g.to]=this._board[g.from],delete this._board[g.from],g.flags&i.EP_CAPTURE&&(this._turn===s.BLACK?delete this._board[g.to-16]:delete this._board[g.to+16]),g.promotion&&(this._board[g.to]={type:g.promotion,color:_}),this._board[g.to].type===s.KING){if(this._kings[_]=g.to,g.flags&i.KSIDE_CASTLE){const T=g.to-1,L=g.to+1;this._board[T]=this._board[L],delete this._board[L]}else if(g.flags&i.QSIDE_CASTLE){const T=g.to+1,L=g.to-2;this._board[T]=this._board[L],delete this._board[L]}this._castling[_]=0}if(this._castling[_]){for(let T=0,L=k[_].length;T<L;T++)if(g.from===k[_][T].square&&this._castling[_]&k[_][T].flag){this._castling[_]^=k[_][T].flag;break}}if(this._castling[b]){for(let T=0,L=k[b].length;T<L;T++)if(g.to===k[b][T].square&&this._castling[b]&k[b][T].flag){this._castling[b]^=k[b][T].flag;break}}g.flags&i.BIG_PAWN?_===s.BLACK?this._epSquare=g.to-16:this._epSquare=g.to+16:this._epSquare=t,g.piece===s.PAWN?this._halfMoves=0:g.flags&(i.CAPTURE|i.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,_===s.BLACK&&this._moveNumber++,this._turn=b}undo(){const g=this._undoMove();return g?this._makePretty(g):null}_undoMove(){const g=this._history.pop();if(g===void 0)return null;const _=g.move;this._kings=g.kings,this._turn=g.turn,this._castling=g.castling,this._epSquare=g.epSquare,this._halfMoves=g.halfMoves,this._moveNumber=g.moveNumber;const b=this._turn,T=W(b);if(this._board[_.from]=this._board[_.to],this._board[_.from].type=_.piece,delete this._board[_.to],_.captured)if(_.flags&i.EP_CAPTURE){let L;b===s.BLACK?L=_.to-16:L=_.to+16,this._board[L]={type:s.PAWN,color:T}}else this._board[_.to]={type:_.captured,color:T};if(_.flags&(i.KSIDE_CASTLE|i.QSIDE_CASTLE)){let L,I;_.flags&i.KSIDE_CASTLE?(L=_.to+1,I=_.to-1):(L=_.to-2,I=_.to+1),this._board[L]=this._board[I],delete this._board[I]}return _}pgn({newline:g=`
`,maxWidth:_=0}={}){const b=[];let T=!1;for(const V in this._header)b.push("["+V+' "'+this._header[V]+'"]'+g),T=!0;T&&this._history.length&&b.push(g);const L=V=>{const ae=this._comments[this.fen()];if(typeof ae<"u"){const Q=V.length>0?" ":"";V=`${V}${Q}{${ae}}`}return V},I=[];for(;this._history.length>0;)I.push(this._undoMove());const H=[];let U="";for(I.length===0&&H.push(L(""));I.length>0;){U=L(U);const V=I.pop();if(!V)break;if(!this._history.length&&V.color==="b"){const ae=`${this._moveNumber}. ...`;U=U?`${U} ${ae}`:ae}else V.color==="w"&&(U.length&&H.push(U),U=this._moveNumber+".");U=U+" "+this._moveToSan(V,this._moves({legal:!0})),this._makeMove(V)}if(U.length&&H.push(L(U)),typeof this._header.Result<"u"&&H.push(this._header.Result),_===0)return b.join("")+H.join(" ");const X=function(){return b.length>0&&b[b.length-1]===" "?(b.pop(),!0):!1},re=function(V,ae){for(const Q of ae.split(" "))if(!!Q){if(V+Q.length>_){for(;X();)V--;b.push(g),V=0}b.push(Q),V+=Q.length,b.push(" "),V++}return X()&&V--,V};let P=0;for(let V=0;V<H.length;V++){if(P+H[V].length>_&&H[V].includes("{")){P=re(P,H[V]);continue}P+H[V].length>_&&V!==0?(b[b.length-1]===" "&&b.pop(),b.push(g),P=0):V!==0&&(b.push(" "),P++),b.push(H[V]),P+=H[V].length}return b.join("")}header(...g){for(let _=0;_<g.length;_+=2)typeof g[_]=="string"&&typeof g[_+1]=="string"&&(this._header[g[_]]=g[_+1]);return this._header}loadPgn(g,{sloppy:_=!1,newlineChar:b=`\r?
`}={}){function T(ne){return ne.replace(/\\/g,"\\")}function L(ne){const ve={},Re=ne.split(new RegExp(T(b)));let He="",De="";for(let Ne=0;Ne<Re.length;Ne++){const Le=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;He=Re[Ne].replace(Le,"$1"),De=Re[Ne].replace(Le,"$2"),He.trim().length>0&&(ve[He]=De)}return ve}g=g.trim();const H=new RegExp("^(\\[((?:"+T(b)+")|.)*\\])(?:\\s*"+T(b)+"){2}").exec(g),U=H&&H.length>=2?H[1]:"";this.reset();const X=L(U);let re="";for(const ne in X)ne.toLowerCase()==="fen"&&(re=X[ne]),this.header(ne,X[ne]);if(_){if(re&&!this.load(re,!0))return!1}else if(X.SetUp==="1"&&!("FEN"in X&&this.load(X.FEN,!0)))return!1;function P(ne){return Array.from(ne).map(function(ve){return ve.charCodeAt(0)<128?ve.charCodeAt(0).toString(16):encodeURIComponent(ve).replace(/%/g,"").toLowerCase()}).join("")}function V(ne){return ne.length==0?"":decodeURIComponent("%"+(ne.match(/.{1,2}/g)||[]).join("%"))}const ae=function(ne){return ne=ne.replace(new RegExp(T(b),"g")," "),`{${P(ne.slice(1,ne.length-1))}}`},Q=function(ne){if(ne.startsWith("{")&&ne.endsWith("}"))return V(ne.slice(1,ne.length-1))};let R=g.replace(U,"").replace(new RegExp(`({[^}]*})+?|;([^${T(b)}]*)`,"g"),function(ne,ve,Re){return ve!==void 0?ae(ve):" "+ae(`{${Re.slice(1)}}`)}).replace(new RegExp(T(b),"g")," ");const J=/(\([^()]+\))+?/g;for(;J.test(R);)R=R.replace(J,"");R=R.replace(/\d+\.(\.\.)?/g,""),R=R.replace(/\.\.\./g,""),R=R.replace(/\$\d+/g,"");let le=R.trim().split(new RegExp(/\s+/));le=le.join(",").replace(/,,+/g,",").split(",");let _e="";for(let ne=0;ne<le.length;ne++){const ve=Q(le[ne]);if(ve!==void 0){this._comments[this.fen()]=ve;continue}const Re=this._moveFromSan(le[ne],_);if(Re==null)if(d.indexOf(le[ne])>-1)_e=le[ne];else return!1;else _e="",this._makeMove(Re)}return _e&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",_e),!0}_moveToSan(g,_){let b="";if(g.flags&i.KSIDE_CASTLE)b="O-O";else if(g.flags&i.QSIDE_CASTLE)b="O-O-O";else{if(g.piece!==s.PAWN){const T=z(g,_);b+=g.piece.toUpperCase()+T}g.flags&(i.CAPTURE|i.EP_CAPTURE)&&(g.piece===s.PAWN&&(b+=A(g.from)[0]),b+="x"),b+=A(g.to),g.promotion&&(b+="="+g.promotion.toUpperCase())}return this._makeMove(g),this.isCheck()&&(this.isCheckmate()?b+="#":b+="+"),this._undoMove(),b}_moveFromSan(g,_=!1){const b=ie(g);let T=G(b),L=this._moves({legal:!0,piece:T});for(let V=0,ae=L.length;V<ae;V++)if(b===ie(this._moveToSan(L[V],L)))return L[V];if(!_)return null;let I,H,U,X,re,P=!1;H=b.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),H?(I=H[1],U=H[2],X=H[3],re=H[4],U.length==1&&(P=!0)):(H=b.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),H&&(I=H[1],U=H[2],X=H[3],re=H[4],U.length==1&&(P=!0))),T=G(b),L=this._moves({legal:!0,piece:I||T});for(let V=0,ae=L.length;V<ae;V++)if(U&&X){if((!I||I.toLowerCase()==L[V].piece)&&a[U]==L[V].from&&a[X]==L[V].to&&(!re||re.toLowerCase()==L[V].promotion))return L[V];if(P){const Q=A(L[V].from);if((!I||I.toLowerCase()==L[V].piece)&&a[X]==L[V].to&&(U==Q[0]||U==Q[1])&&(!re||re.toLowerCase()==L[V].promotion))return L[V]}}return null}ascii(){let g=`   +------------------------+
`;for(let _=a.a8;_<=a.h1;_++){if(M(_)===0&&(g+=" "+"87654321"[m(_)]+" |"),this._board[_]){const b=this._board[_].type,L=this._board[_].color===s.WHITE?b.toUpperCase():b.toLowerCase();g+=" "+L+" "}else g+=" . ";_+1&136&&(g+=`|
`,_+=8)}return g+=`   +------------------------+
`,g+="     a  b  c  d  e  f  g  h",g}perft(g){const _=this._moves({legal:!1});let b=0;const T=this._turn;for(let L=0,I=_.length;L<I;L++)this._makeMove(_[L]),this._isKingAttacked(T)||(g-1>0?b+=this.perft(g-1):b++),this._undoMove();return b}_makePretty(g){const{color:_,piece:b,from:T,to:L,flags:I,captured:H,promotion:U}=g;let X="";for(const P in i)i[P]&I&&(X+=e[P]);const re={color:_,piece:b,from:A(T),to:A(L),san:this._moveToSan(g,this._moves({legal:!0})),flags:X};return H&&(re.captured=H),U&&(re.promotion=U),re}turn(){return this._turn}board(){const g=[];let _=[];for(let b=a.a8;b<=a.h1;b++)this._board[b]==null?_.push(null):_.push({square:A(b),type:this._board[b].type,color:this._board[b].color}),b+1&136&&(g.push(_),_=[],b+=8);return g}squareColor(g){if(g in a){const _=a[g];return(m(_)+M(_))%2===0?"light":"dark"}return null}history({verbose:g=!1}={}){const _=[],b=[];for(;this._history.length>0;)_.push(this._undoMove());for(;;){const T=_.pop();if(!T)break;g?b.push(this._makePretty(T)):b.push(this._moveToSan(T,this._moves())),this._makeMove(T)}return b}_pruneComments(){const g=[],_={},b=T=>{T in this._comments&&(_[T]=this._comments[T])};for(;this._history.length>0;)g.push(this._undoMove());for(b(this.fen());;){const T=g.pop();if(!T)break;this._makeMove(T),b(this.fen())}this._comments=_}getComment(){return this._comments[this.fen()]}setComment(g){this._comments[this.fen()]=g.replace("{","[").replace("}","]")}deleteComment(){const g=this._comments[this.fen()];return delete this._comments[this.fen()],g}getComments(){return this._pruneComments(),Object.keys(this._comments).map(g=>({fen:g,comment:this._comments[g]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(g=>{const _=this._comments[g];return delete this._comments[g],{fen:g,comment:_}})}}s.Chess=pe})(vn);var Ee=(s=>(s[s.WHITE=0]="WHITE",s[s.BLACK=1]="BLACK",s[s.BOTH=2]="BOTH",s[s.SPECTATOR=3]="SPECTATOR",s[s.SERVER=4]="SERVER",s))(Ee||{}),$=(s=>(s[s.LEGAL=0]="LEGAL",s[s.LEGALHOVER=1]="LEGALHOVER",s[s.CHECK=2]="CHECK",s[s.MOVE=3]="MOVE",s[s.NEXTMOVE=4]="NEXTMOVE",s[s.PREMOVE=5]="PREMOVE",s[s.PREMOVEHOVER=6]="PREMOVEHOVER",s[s.SELECT=7]="SELECT",s))($||{});const Ot=s=>{if(typeof s=="string")return s;switch(s){case 0:case 1:return"legal";case 2:return"check";case 3:return"move";case 4:return"nextMove";case 5:case 6:return"preMove";case 7:return"select";default:return"check"}};class oi{constructor(t){this.defaultState={boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:En,size:0,style:{shadow:!1,borderRadius:"0rem"},resizible:{enabled:!1,min:256,max:1024}},this.setConfigSettings=e=>{e!==void 0&&(e.boardTheme!==void 0&&(this.boardTheme=e.boardTheme),e.piecesTheme!==void 0&&(this.piecesTheme=e.piecesTheme),e.mouseEvents!==void 0&&(this.mouseEvents=e.mouseEvents),e.flipped!==void 0&&(this.flipped=e.flipped),e.notation!==void 0&&(this.notation=e.notation),e.startFen!==void 0&&(this.startFen=e.startFen),e.style!==void 0&&(e.style.shadow!==void 0&&(this.style.shadow=e.style.shadow),e.style.borderRadius!==void 0&&(this.style.borderRadius=e.style.borderRadius)))},this.getConfig=()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...(this.style.shadow!==this.defaultState.style.shadow||this.style.borderRadius!==this.defaultState.style.borderRadius)&&{style:{...this.style.shadow!==this.defaultState.style.shadow&&{shadow:this.style.shadow},...this.style.borderRadius!==this.defaultState.style.borderRadius&&{borderRadius:this.style.borderRadius}}}};if(Object.keys(e).length!==0)return e},this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.style={...this.defaultState.style},this.resizible={...this.defaultState.resizible},this.setConfigSettings(t)}}class ui{constructor(t){this.defaultState={enabled:!0,color:Ee.BOTH},this.setConfigSettings=e=>{switch(e){case!0:this.enabled=!0,this.color=Ee.BOTH;break;case!1:this.enabled=!1;break;case Ee.WHITE:this.enabled=!0,this.color=Ee.WHITE;break;case Ee.BLACK:this.enabled=!0,this.color=Ee.BLACK;break}},this.getConfig=()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1},this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(t)}}class fi{constructor(t){this.defaultState={enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}},this.setConfigSettings=e=>{var i,a,n,r;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(i=e==null?void 0:e.transition)!=null&&i.duration&&(this.transition.settings.duration=(a=e==null?void 0:e.transition)==null?void 0:a.duration),(n=e==null?void 0:e.transition)!=null&&n.easing&&(this.transition.settings.easing=(r=e==null?void 0:e.transition)==null?void 0:r.easing)))))},this.getConfig=()=>{const e={},i={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(i.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(i.easing=this.transition.settings.easing),Object.keys(i).length!==0&&(e.transition=i)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1},this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(t)}}class di{constructor(t){this.defaultState={enabled:!0,selectedPiece:void 0},this.setConfigSettings=e=>{e!==void 0&&(this.enabled=e)},this.getConfig=()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(t)}}class ci{constructor(t){this.defaultState={enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0},this.setConfigSettings=e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))},this.getConfig=()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled},this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(t)}}class hi{constructor(t){this.defaultState={enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}},this.setConfigSettings=e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))},this.getConfig=()=>{const e={},i=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(i.forEach(a=>{this.settings[a]!==this.defaultState.settings[a]&&(e[a]=this.settings[a])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(t)}}class gi{constructor(t){this.defaultState={enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}},this.setConfigSettings=e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.knightLShape!==void 0&&(this.settings.knightLShape=e.knightLShape),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))},this.getConfig=()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(e.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(t)}}class bi{constructor(t){this.defaultState={enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}},this.setConfigSettings=e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))},this.getConfig=()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.CAPTURE!==void 0&&(this.settings.CAPTURE=t.CAPTURE),t.CASTLE!==void 0&&(this.settings.CASTLE=t.CASTLE),t.MOVE!==void 0&&(this.settings.MOVE=t.MOVE),t.UNDO!==void 0&&(this.settings.UNDO=t.UNDO)))}}class mi{constructor(t){this.defaultState={getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0},this.setConfigSettings=e=>{e!==void 0&&(e.getLegalMoves&&(this.getLegalMoves=e.getLegalMoves),e.getPreMoves&&(this.getPreMoves=e.getPreMoves),e.beforeMove&&(this.beforeMove=e.beforeMove),e.afterMove&&(this.afterMove=e.afterMove),e.getLastMove&&(this.getLastMove=e.getLastMove),e.getInCheck&&(this.getInCheck=e.getInCheck),e.getWhiteToMove&&(this.getWhiteToMove=e.getWhiteToMove))},this.getConfig=()=>{const e={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(e).length>0?e:void 0},this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(t)}}const En="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class kn{constructor(t){this.getConfig=()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}),this.pieces=[],this.markedSquares=new Set,this.board=new oi(t==null?void 0:t.board),this.movable=new ui(t==null?void 0:t.movable),this.draggable=new fi(t==null?void 0:t.draggable),this.selectable=new di(t==null?void 0:t.selectable),this.legal=new ci(t==null?void 0:t.legal),this.callbacks=new mi(t==null?void 0:t.callbacks),this.highlight=new hi(t==null?void 0:t.highlight),this.drawTools=new gi(t==null?void 0:t.drawTools),this.sounds=new bi(t==null?void 0:t.sounds)}setConfigSettings(t){this.board.setConfigSettings(t.board),this.movable.setConfigSettings(t.movable),this.draggable.setConfigSettings(t.draggable),this.selectable.setConfigSettings(t.selectable),this.legal.setConfigSettings(t.legal),this.callbacks.setConfigSettings(t.callbacks),this.highlight.setConfigSettings(t.highlight),this.drawTools.setConfigSettings(t.drawTools),this.sounds.setConfigSettings(t.sounds)}}const pi=["a","b","c","d","e","f","g","h"],_i=["8","7","6","5","4","3","2","1"];function qt(s){return{x:pi.indexOf(s[0]),y:_i.indexOf(s[1])}}function Gt(s){return s.charCodeAt(0)-97}function vi(s){return 8-parseInt(s,10)}const Ei=s=>{let t="",e=0;for(let i=0;i<s.length;i++){i!==0&&(t+="/");for(let a=0;a<s[i].length;a++){const n=s[i][a];n!=null&&e===0?n[0]==="w"?t+=n[1]:t+=n[1].toLowerCase():n!=null&&e!==0?(t+=e.toString(),e=0,n[0]==="w"?t+=n[1]:t+=n[1].toLowerCase()):e++}e!==0&&(t+=e.toString(),e=0)}return t},ki="8/8/8/8/8/8/8/8 w - - 0 1";class wi{constructor(t){this.letters={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},this.changeLegalHoverIfNeeded=e=>{e.color!==$.LEGAL&&e.color!==$.PREMOVE||this.state.pieces.forEach(i=>{i.square===e.square&&(e.color=e.color===$.LEGAL?$.LEGALHOVER:$.PREMOVEHOVER)})},this.highlightSquare=(e,i)=>{const a={square:e,color:i};this.state.markedSquares.forEach(n=>{n.square===e&&n.color!==$.MOVE&&n.color!==$.CHECK&&this.state.markedSquares.delete(n)}),this.changeLegalHoverIfNeeded(a),this.state.markedSquares.add(a)},this.legalHover=e=>{this.state.markedSquares.forEach(i=>{if(i.square===e&&i.color===$.LEGAL)i.color=$.LEGALHOVER;else if(i.square!==e&&i.color===$.LEGALHOVER){let a=!1;this.state.pieces.forEach(n=>{n.square===i.square&&(a=!0)}),a||(i.color=$.LEGAL)}})},this.preMoveHover=e=>{this.state.markedSquares.forEach(i=>{if(i.square===e&&i.color===$.PREMOVE)i.color=$.PREMOVEHOVER;else if(i.square!==e&&i.color===$.PREMOVEHOVER){let a=!1;this.state.pieces.forEach(n=>{n.square===i.square&&(a=!0)}),a||(i.color=$.PREMOVE)}})},this.toggleSquareHighlight=(e,i)=>{const a={square:e,color:i};let n=!1;return this.state.markedSquares.forEach(r=>{r.square===e&&(this.state.markedSquares.delete(r),r.color===i&&(n=!0))}),this.changeLegalHoverIfNeeded(a),n?!0:(this.state.markedSquares.add(a),!1)},this.getSelectedSquare=()=>{let e="";return this.state.markedSquares.forEach(i=>{i.color===$.SELECT&&(e=i.square)}),e},this.clearSquare=(e,i)=>{e.length===2&&this.state.markedSquares.forEach(a=>{a.square===e&&(a.color===i||i===void 0)&&this.state.markedSquares.delete(a)})},this.clearAllSquares=e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(i=>{i.color===e&&this.state.markedSquares.delete(i)})},this.setPiece=(e,i)=>{if(this.notValidThing({square:e,piece:i}))return;const a=this.state.pieces.find(n=>n.square===e);a?a.name=i:this.state.pieces.push({square:e,name:i})},this.removePiece=e=>{this.notValidThing({square:e})||this.state.pieces.forEach((i,a)=>{i.square===e&&this.state.pieces.splice(a,1)})},this.clearAllPieces=()=>{this.state.pieces.length=0},this.getGridCoordsFromSquare=e=>{if(this.notValidThing({square:e}))return{x:0,y:0};const i=e[0],a=e[1],n=this.state.board.flipped?Math.abs(this.letters[i]-7):this.letters[i],r=this.state.board.flipped?Math.abs(parseInt(a,10)-8):parseInt(a,10)-1;return typeof n!="number"||r<0||r>7?{x:0,y:0}:{x:n,y:r}},this.makeMove=e=>{if(this.notValidThing({move:e}))return;let i=!1,a;const n=e.substring(0,2),r=e.substring(2,4),l=e.substring(4);this.state.pieces.forEach(o=>{o.square===r&&(a=o,this.removePiece(o.square))}),this.state.pieces.forEach(o=>{o.square===n&&(o.square=r,i=!0,l&&(o.name=o.name[0]+l.toUpperCase()))}),i?this.state.legal.lastMove=e:a&&this.state.pieces.push(a)},this.getSquareFromIndices=(e,i)=>`${Object.keys(this.letters)[e]}${(i+1).toString()}`,this.updatePiecesWithFen=e=>{const i=[...Array(8)].map(()=>Array(8).fill(null)),a=["1","2","3","4","5","6","7","8"];let n=0,r=0;for(let u=0;u<(e.includes(" ")?e.indexOf(" "):e.length);u++)if(e[u]==="/")n++,r=0;else if(!a.includes(e[u]))e[u]===e[u].toUpperCase()?i[n][r]=`w${e[u]}`:i[n][r]=`b${e[u].toUpperCase()}`,r++;else for(let f=0;f<parseInt(e[u],10);f++)i[n][r]=null,r++;const l=[],o=[];for(let u=0;u<i.length;++u)for(let f=0;f<i.length;++f){const p=i[u][f],h=this.getPieceFromSquare(this.getSquareFromIndices(f,Math.abs(u-7)));p&&!h&&l.push({square:this.getSquareFromIndices(f,Math.abs(u-7)),name:p}),!p&&h&&o.push(h),p&&h&&p!==h.name&&(l.push({square:this.getSquareFromIndices(f,Math.abs(u-7)),name:p}),o.push(h))}for(let u=0;u<o.length;u++)for(let f=0;f<l.length;f++)!l[f]||!o[u]||l[f].name===o[u].name&&(o[u].square=l[f].square,o.splice(u,1),u--,l.splice(f,1),f--);l.forEach(u=>{this.state.pieces.push(u)}),o.forEach(u=>{this.state.pieces.splice(this.state.pieces.indexOf(u),1)})},this.notValidThing=e=>{const{square:i,piece:a,move:n}=e;return!!(i&&i.length!==2||a&&a.length!==2||n&&n.length!==4&&n.length!==5)},this.setGhostPiece=e=>{this.state.draggable.ghostPiece.piece=e},this.removeGhostPiece=()=>{this.state.draggable.ghostPiece.piece=void 0},this.isCastling=e=>{switch(e){case"e1g1":case"e1c1":case"e8g8":case"e8c8":return!0;default:return!1}},this.getRookMoveIfIsCastling=e=>{switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return}},this.isEnPassant=e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const i=this.getPieceFromSquare(e.substring(0,2));return!(i===void 0||i.name!=="wP"&&i.name!=="bP")},this.getCapturedPawnSquareIfIsEnPassant=e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const i=this.getPieceFromSquare(e.substring(0,2));if(i===void 0||i.name!=="wP"&&i.name!=="bP")return;const a=this.getPieceFromSquare(`${e[2]}${(parseInt(e[3],10)+(i.name==="wP"?-1:1)).toString()}`);return a==null?void 0:a.square},this.isCapture=e=>!!this.getPieceFromSquare(e.substring(2,4)),this.isPromotion=e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const i=this.getPieceFromSquare(e.substring(0,2));return!(i&&(i.name[1]!=="P"||i.name[0]==="w"&&e[3]==="1"||i.name[0]==="b"&&e[3]==="8"))},this.callbackExists=e=>this.state.callbacks[e]!==void 0,this.flipBoard=e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped},this.setConfigSettings=e=>{this.state.setConfigSettings(e)},this.state=new kn(t),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const t=this.state.pieces.find(e=>e.name==="wK");if(t)return t.square}getBlackKingSquare(){const t=this.state.pieces.find(e=>e.name==="bK");if(t)return t.square}getShortFEN(){if(this.state.pieces.length===0)return ki;const t=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(e=>{t[vi(e.square[1])][Gt(e.square[0])]=e.name}),Ei(t)}getPieceFromSquare(t){let e;return this.state.pieces.forEach(i=>{i.square===t&&(e=i)}),e}}const Mi={[$.LEGAL]:"legalSQ cursor-pointer",[$.LEGALHOVER]:"legalSQ_hover cursor-pointer",[$.SELECT]:"selectedSQ",[$.MOVE]:"highlightMove",[$.NEXTMOVE]:"nextMoveSQ",[$.PREMOVE]:"preMoveSQ cursor-pointer",[$.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[$.CHECK]:"checkSQ"},Si={white:"#f0d9b5",black:"#b58863"},yi="standard.svg",Ci={[$.LEGAL]:"legalSQ cursor-pointer",[$.LEGALHOVER]:"legalSQ_hover cursor-pointer",[$.SELECT]:"selectedSQ-darkBlue",[$.MOVE]:"highlightMove-darkBlue",[$.NEXTMOVE]:"nextMoveSQ",[$.PREMOVE]:"preMoveSQ cursor-pointer",[$.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[$.CHECK]:"checkSQ"},Ai={white:"#94A3B8",black:"#475569"},Ti="darkBlue.svg",je={squareStyles:{standard:Mi,darkBlue:Ci},colors:{standard:Si,darkBlue:Ai},imageName:{standard:yi,darkBlue:Ti}};function hs(s,t,e){const i=s.slice();return i[3]=t[e],i[5]=e,i}function gs(s,t,e){const i=s.slice();return i[3]=t[e],i[5]=e,i}function bs(s){let t,e=s[2][s[1]?Math.abs(s[5]-7):s[5]]+"",i,a;return{c(){t=D("span"),i=be(e),a=ee(),this.h()},l(n){t=B(n,"SPAN",{"data-file":!0,style:!0,class:!0});var r=K(t);i=me(r,e),a=te(r),r.forEach(E),this.h()},h(){c(t,"data-file",s[3]),ye(t,"color",s[5]%2===0?je.colors[s[0]].white:je.colors[s[0]].black),c(t,"class","svelte-1hixjwp")},m(n,r){Y(n,t,r),y(t,i),y(t,a)},p(n,r){r&2&&e!==(e=n[2][n[1]?Math.abs(n[5]-7):n[5]]+"")&&Bt(i,e),r&1&&ye(t,"color",n[5]%2===0?je.colors[n[0]].white:je.colors[n[0]].black)},d(n){n&&E(t)}}}function ms(s){let t,e=(s[1]?s[5]+1:Math.abs(s[5]-8))+"",i,a,n;return{c(){t=D("span"),i=be(e),a=ee(),this.h()},l(r){t=B(r,"SPAN",{"data-file":!0,style:!0,class:!0});var l=K(t);i=me(l,e),a=te(l),l.forEach(E),this.h()},h(){c(t,"data-file",s[3]),c(t,"style",n="color: "+(s[5]%2===0?je.colors[s[0]].white:je.colors[s[0]].black)+";"+(s[1]?" text-align: right;":"")),c(t,"class","svelte-1hixjwp")},m(r,l){Y(r,t,l),y(t,i),y(t,a)},p(r,l){l&2&&e!==(e=(r[1]?r[5]+1:Math.abs(r[5]-8))+"")&&Bt(i,e),l&3&&n!==(n="color: "+(r[5]%2===0?je.colors[r[0]].white:je.colors[r[0]].black)+";"+(r[1]?" text-align: right;":""))&&c(t,"style",n)},d(r){r&&E(t)}}}function Pi(s){let t,e,i,a=s[2],n=[];for(let o=0;o<a.length;o+=1)n[o]=bs(gs(s,a,o));let r=s[2],l=[];for(let o=0;o<r.length;o+=1)l[o]=ms(hs(s,r,o));return{c(){t=D("div");for(let o=0;o<n.length;o+=1)n[o].c();e=ee(),i=D("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){t=B(o,"DIV",{class:!0});var u=K(t);for(let p=0;p<n.length;p+=1)n[p].l(u);u.forEach(E),e=te(o),i=B(o,"DIV",{class:!0});var f=K(i);for(let p=0;p<l.length;p+=1)l[p].l(f);f.forEach(E),this.h()},h(){c(t,"class","files noselect svelte-1hixjwp"),c(i,"class","ranks noselect svelte-1hixjwp")},m(o,u){Y(o,t,u);for(let f=0;f<n.length;f+=1)n[f].m(t,null);Y(o,e,u),Y(o,i,u);for(let f=0;f<l.length;f+=1)l[f].m(i,null)},p(o,[u]){if(u&7){a=o[2];let f;for(f=0;f<a.length;f+=1){const p=gs(o,a,f);n[f]?n[f].p(p,u):(n[f]=bs(p),n[f].c(),n[f].m(t,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=a.length}if(u&7){r=o[2];let f;for(f=0;f<r.length;f+=1){const p=hs(o,r,f);l[f]?l[f].p(p,u):(l[f]=ms(p),l[f].c(),l[f].m(i,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=r.length}},i:Te,o:Te,d(o){o&&E(t),dt(n,o),o&&E(e),o&&E(i),dt(l,o)}}}function Li(s,t,e){let{theme:i}=t,{flipped:a}=t;const n=["a","b","c","d","e","f","g","h"];return s.$$set=r=>{"theme"in r&&e(0,i=r.theme),"flipped"in r&&e(1,a=r.flipped)},[i,a,n]}class Ii extends Oe{constructor(t){super(),Fe(this,t,Li,Pi,qe,{theme:0,flipped:1})}}function Oi(s){const t=2.5949095;return(s*=2)<1?.5*(s*s*((t+1)*s-t)):.5*((s-=2)*s*((t+1)*s+t)+2)}function Fi(s){return s*s*((1.70158+1)*s-1.70158)}function qi(s){return--s*s*((1.70158+1)*s+1.70158)+1}function Nt(s){const t=.36363636363636365,e=8/11,i=9/10,a=4356/361,n=35442/1805,r=16061/1805,l=s*s;return s<t?7.5625*l:s<e?9.075*l-9.9*s+3.4:s<i?a*l-n*s+r:10.8*s*s-20.52*s+10.72}function Ri(s){return s<.5?.5*(1-Nt(1-s*2)):.5*Nt(s*2-1)+.5}function Ni(s){return 1-Nt(1-s)}function Di(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)}function Bi(s){return 1-Math.sqrt(1-s*s)}function Ui(s){return Math.sqrt(1- --s*s)}function Hi(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function zi(s){return s*s*s}function ns(s){const t=s-1;return t*t*t+1}function Vi(s){return s<.5?.5*Math.sin(13*Math.PI/2*2*s)*Math.pow(2,10*(2*s-1)):.5*Math.sin(-13*Math.PI/2*(2*s-1+1))*Math.pow(2,-10*(2*s-1))+1}function Wi(s){return Math.sin(13*s*Math.PI/2)*Math.pow(2,10*(s-1))}function Ki(s){return Math.sin(-13*(s+1)*Math.PI/2)*Math.pow(2,-10*s)+1}function ji(s){return s===0||s===1?s:s<.5?.5*Math.pow(2,20*s-10):-.5*Math.pow(2,10-s*20)+1}function Gi(s){return s===0?s:Math.pow(2,10*(s-1))}function Qi(s){return s===1?s:1-Math.pow(2,-10*s)}function Xi(s){return s/=.5,s<1?.5*s*s:(s--,-.5*(s*(s-2)-1))}function Yi(s){return s*s}function Zi(s){return-s*(s-2)}function Ji(s){return s<.5?8*Math.pow(s,4):-8*Math.pow(s-1,4)+1}function xi(s){return Math.pow(s,4)}function $i(s){return Math.pow(s-1,3)*(1-s)+1}function ea(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)}function ta(s){return s*s*s*s*s}function sa(s){return--s*s*s*s*s+1}function na(s){return-.5*(Math.cos(Math.PI*s)-1)}function ia(s){const t=Math.cos(s*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t}function aa(s){return Math.sin(s*Math.PI/2)}const Dt=Object.freeze(Object.defineProperty({__proto__:null,backIn:Fi,backInOut:Oi,backOut:qi,bounceIn:Ni,bounceInOut:Ri,bounceOut:Nt,circIn:Bi,circInOut:Di,circOut:Ui,cubicIn:zi,cubicInOut:Hi,cubicOut:ns,elasticIn:Wi,elasticInOut:Vi,elasticOut:Ki,expoIn:Gi,expoInOut:ji,expoOut:Qi,quadIn:Yi,quadInOut:Xi,quadOut:Zi,quartIn:xi,quartInOut:Ji,quartOut:$i,quintIn:ta,quintInOut:ea,quintOut:sa,sineIn:ia,sineInOut:na,sineOut:aa,linear:hn},Symbol.toStringTag,{value:"Module"}));function ps(s){return Object.prototype.toString.call(s)==="[object Date]"}function Qt(s,t){if(s===t||s!==s)return()=>s;const e=typeof s;if(e!==typeof t||Array.isArray(s)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const i=t.map((a,n)=>Qt(s[n],a));return a=>i.map(n=>n(a))}if(e==="object"){if(!s||!t)throw new Error("Object cannot be null");if(ps(s)&&ps(t)){s=s.getTime(),t=t.getTime();const n=t-s;return r=>new Date(s+r*n)}const i=Object.keys(t),a={};return i.forEach(n=>{a[n]=Qt(s[n],t[n])}),n=>{const r={};return i.forEach(l=>{r[l]=a[l](n)}),r}}if(e==="number"){const i=t-s;return a=>s+a*i}throw new Error(`Cannot interpolate ${e} values`)}function ra(s,t={}){const e=ti(s);let i,a=s;function n(r,l){if(s==null)return e.set(s=r),Promise.resolve();a=r;let o=i,u=!1,{delay:f=0,duration:p=400,easing:h=hn,interpolate:C=Qt}=Rt(Rt({},t),l);if(p===0)return o&&(o.abort(),o=null),e.set(s=a),Promise.resolve();const q=Gn()+f;let F;return i=Qn(k=>{if(k<q)return!0;u||(F=C(s,r),typeof p=="function"&&(p=p(s,r)),u=!0),o&&(o.abort(),o=null);const w=k-q;return w>p?(e.set(s=r),!1):(e.set(s=F(h(w/p))),!0)}),i.promise}return{set:n,update:(r,l)=>n(r(a,s),l),subscribe:e.subscribe}}function _s(s,t,e,i){if(t===0&&e===0)return s;const a=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r=a[i?7-a.indexOf(s[0])-t:a.indexOf(s[0])+t],l=n[i?7-n.indexOf(s[1])-e:n.indexOf(s[1])+e];if(!(!r||!l))return`${r}${l}`}function vs(s,t,e){const i=t*1.15,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",(s.offsetWidth*i).toString()),a.setAttribute("height",(s.offsetHeight*i).toString()),a.style.position="absolute",a.style.zIndex="100",a.style.translate=`${e?"":"-"}${25*i/2}% -${25*i/2}%`,a.style.opacity="0.2",n.setAttribute("r",(s.offsetWidth*i/2).toString()),n.setAttribute("cx",(s.offsetWidth*i/2).toString()),n.setAttribute("cy",(s.offsetHeight*i/2).toString()),n.setAttribute("fill","black"),a.appendChild(n),a}function la(s,t){let e;function i(I,H=1e3){let U=!1;const X=()=>{e==null?U=!1:(I(...e),e=null,setTimeout(X,H))};return(...re)=>{if(U){e=re;return}I(...re),U=!0,setTimeout(X,H)}}let a,n,r,l,o,u,f,p,h=!1,C;const q=s.parentNode;let F,k=!1,{startSquare:w,boardFlipped:d,mouseEvents:m,canDrag:M,canSelect:v,duration:A,easingFunc:W}=t;const{coords:j}=t;s.style.cursor=!M&&!v?"default":"pointer";let z=ls(j).x,O=ls(j).y;const G=1.6;let ie=vs(s,G,d);s.draggable=!1;function pe(I){const H=I.clientX-a,U=I.clientY-n;if(a=I.clientX,n=I.clientY,o+=H,u+=U,h||(Math.abs(o)>1||Math.abs(u)>1)&&(j.update(X=>({x:X.x+(a-s.offsetWidth/2-s.getBoundingClientRect().x)/s.clientWidth,y:I.pointerType==="touch"?X.y-(n-s.offsetHeight*1.5-s.getBoundingClientRect().y)/s.clientWidth:X.y-(n-s.offsetHeight/2-s.getBoundingClientRect().y)/s.clientWidth,scale:I.pointerType==="touch"?G:1}),{duration:A,easing:W}),h=!0,s.style.zIndex="30",s.style.cursor="grabbing",s.dispatchEvent(new CustomEvent("startMoving"))),!!h){if(I.pointerType==="touch"){const X=Math.floor((o+r)/s.offsetWidth),re=Math.floor((u+l)/s.offsetHeight),P=_s(w,X,re,d);if(P){if(P!==F){const V=qt(P);ie.style.left=`${V.x*12.5}%`,ie.style.top=`${V.y*12.5}%`,q.appendChild(ie)}}else F&&(F=void 0)}j.update(X=>({x:X.x+H/s.clientWidth,y:X.y-U/s.clientWidth,scale:I.pointerType==="touch"?G:1}),{duration:0}),s.dispatchEvent(new CustomEvent("moving",{detail:{x:a,y:n}}))}}const oe=i(pe,10);function g(){const I=window.scrollX-f,H=window.scrollY-p;f=window.scrollX,p=window.scrollY,j.update(U=>({x:U.x+I,y:U.y+H,scale:1}),{duration:0})}function _(){window.removeEventListener("pointermove",oe),window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",_),document.body.removeEventListener("pointerleave",_),window.removeEventListener("scroll",g),e=null;const I=Math.floor((o+r)/s.offsetWidth),H=Math.floor((u+l)/s.offsetHeight),U=_s(w,I,H,d);k=!1,s.dispatchEvent(new CustomEvent("dropped",{detail:U})),j.update(()=>({x:z,y:O,scale:1}),{duration:A,easing:W}).then(()=>{k||s.dispatchEvent(new CustomEvent("animationEnded")),k||(s.style.zIndex="2")}),a=0,n=0,o=0,u=0,s.style.cursor=!M&&!v?"default":"pointer",setTimeout(()=>{k||(s.style.zIndex="2")},A),h=!1,ie.remove()}function b(I){if(I.button!==0||!I.isPrimary||!m||(v&&s.dispatchEvent(new CustomEvent("clicked")),!M))return;z=d?7-Gt(w[0]):Gt(w[0]),O=d?8-parseInt(w[1],10):parseInt(w[1],10)-1,F=w;const H=I.target.getBoundingClientRect();I.pointerType==="touch"?(a=I.clientX,n=I.clientY,r=I.clientX-H.x,l=I.clientY-H.y):(a=I.clientX,n=I.clientY,r=I.offsetX,l=I.offsetY),o=0,u=0,f=window.scrollX,p=window.scrollY,k=!0,window.addEventListener("pointermove",oe),window.addEventListener("pointerup",_),window.addEventListener("pointercancel",_),document.body.addEventListener("pointerleave",_),window.addEventListener("scroll",g)}function T(I){I.preventDefault()}function L(I){I.preventDefault()}return s.addEventListener("contextmenu",T),s.addEventListener("dragstart",L),s.addEventListener("pointerdown",b),{destroy(){s.removeEventListener("pointerdown",b),s.removeEventListener("contextmenu",T),s.removeEventListener("dragstart",L),window.clearTimeout(C)},update(I){w=I.startSquare,A=I.duration,W=I.easingFunc,(I.canDrag!==M||I.canSelect!==v)&&(s.style.cursor=!I.canDrag&&!I.canSelect?"default":"pointer"),I.canDrag!==M&&(M=I.canDrag),I.canSelect!==v&&(v=I.canSelect),I.mouseEvents!==m&&(m=I.mouseEvents),d!==I.boardFlipped&&(ie=vs(s,G,I.boardFlipped)),d=I.boardFlipped}}}const Es=""+new URL("../../assets/wP-f78bae6c.svg",import.meta.url).href,oa=""+new URL("../../assets/wR-5eb92d73.svg",import.meta.url).href,ua=""+new URL("../../assets/wN-a4c975a2.svg",import.meta.url).href,fa=""+new URL("../../assets/wB-1ff2f149.svg",import.meta.url).href,da=""+new URL("../../assets/wQ-8568b485.svg",import.meta.url).href,ca=""+new URL("../../assets/wK-4cdf6dc9.svg",import.meta.url).href,ha=""+new URL("../../assets/bP-84e521e8.svg",import.meta.url).href,ga=""+new URL("../../assets/bR-e39efb08.svg",import.meta.url).href,ba=""+new URL("../../assets/bN-d3912d91.svg",import.meta.url).href,ma=""+new URL("../../assets/bB-c430b746.svg",import.meta.url).href,pa=""+new URL("../../assets/bQ-c7b9a43e.svg",import.meta.url).href,_a=""+new URL("../../assets/bK-3500a2e6.svg",import.meta.url).href;function Xt(s){switch(s){case"wP":return Es;case"wR":return oa;case"wN":return ua;case"wB":return fa;case"wQ":return da;case"wK":return ca;case"bP":return ha;case"bR":return ga;case"bN":return ba;case"bB":return ma;case"bQ":return pa;case"bK":return _a;default:return Es}}function va(s){let t,e,i,a,n;return{c(){t=D("img"),this.h()},l(r){t=B(r,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){ye(t,"left",s[9].x*12.5+"%"),ye(t,"bottom",s[9].y*12.5+"%"),ye(t,"scale",s[9].scale),ye(t,"z-Index",s[4]?0:s[8]),ye(t,"opacity",s[4]?.3:1),ye(t,"cursor","pointer"),c(t,"class","noselect svelte-1g241z"),mt(t.src,e=Xt(s[2]))||c(t,"src",e),c(t,"alt",s[2])},m(r,l){var o,u,f;Y(r,t,l),a||(n=[xt(i=la.call(null,t,{startSquare:s[1],mouseEvents:s[0],canDrag:s[13](s[7],s[6]),canSelect:s[14](s[7],s[5]),boardFlipped:s[3],duration:(o=s[6])!=null&&o.transition.enabled?s[6].transition.settings.duration:0,easingFunc:Dt[(f=(u=s[6])==null?void 0:u.transition.settings.easing)!=null?f:"cubicInOut"],coords:s[11]})),fe(t,"dropped",s[12]),fe(t,"clicked",s[17]),fe(t,"startMoving",s[18]),fe(t,"animationEnded",s[19]),fe(t,"moving",s[20])],a=!0)},p(r,[l]){var o,u,f;l&512&&ye(t,"left",r[9].x*12.5+"%"),l&512&&ye(t,"bottom",r[9].y*12.5+"%"),l&512&&ye(t,"scale",r[9].scale),l&272&&ye(t,"z-Index",r[4]?0:r[8]),l&16&&ye(t,"opacity",r[4]?.3:1),l&4&&!mt(t.src,e=Xt(r[2]))&&c(t,"src",e),l&4&&c(t,"alt",r[2]),i&&$t(i.update)&&l&235&&i.update.call(null,{startSquare:r[1],mouseEvents:r[0],canDrag:r[13](r[7],r[6]),canSelect:r[14](r[7],r[5]),boardFlipped:r[3],duration:(o=r[6])!=null&&o.transition.enabled?r[6].transition.settings.duration:0,easingFunc:Dt[(f=(u=r[6])==null?void 0:u.transition.settings.easing)!=null?f:"cubicInOut"],coords:r[11]})},i:Te,o:Te,d(r){r&&E(t),a=!1,xe(n)}}}function Ea(s,t,e){var g,_;let i,a,{square:n}=t,{name:r}=t,{mouseEvents:l=!0}=t,{getGridCoordsFromSquare:o}=t,{flipped:u}=t,{isGhost:f=!1}=t;f&&(l=!1);let{selectableState:p=void 0}=t,{draggableState:h=void 0}=t,{legalState:C=void 0}=t,{movableState:q=void 0}=t,F=!1;const k=es();let w=(g=h==null?void 0:h.transition)!=null&&g.enabled?h.transition.settings.duration:0;const d=ra({x:0,y:0,scale:1},{duration:w,easing:Dt[(_=h==null?void 0:h.transition.settings.easing)!=null?_:"cubicInOut"]});Xn(s,d,b=>e(9,a=b));let m=!1;const M=b=>b[0]==="w"?Ee.WHITE:Ee.BLACK,v=b=>{var L;const T=o(b);d.update(()=>({x:T.x,y:T.y,scale:1}),{duration:m?w:0,easing:Dt[(L=h==null?void 0:h.transition.settings.easing)!=null?L:"cubicInOut"]}),m||(m=!0),w=h!=null&&h.transition.enabled?h.transition.settings.duration:0},A=b=>{w=0,b.detail||k("deselect"),n===b.detail?(!F&&z(q,p)?k("select"):k("deselect"),F=!F):F=!1,k("endDragging",n+b.detail),n!==b.detail&&b.detail&&k("move",n+b.detail)},W=b=>C!=null&&C.enabled?!!(C.preMoves.enabled&&M(r)===b.color||b.color===Ee.WHITE&&C.whiteToMove&&M(r)===Ee.WHITE||b.color===Ee.BLACK&&!C.whiteToMove&&M(r)===Ee.BLACK||b.color===Ee.BOTH&&(M(r)===Ee.WHITE&&C.whiteToMove||M(r)===Ee.BLACK&&!C.whiteToMove)):b.color===M(r)||b.color===Ee.BOTH,j=(b,T)=>!(b!=null&&b.enabled)||!(T!=null&&T.enabled)||!l?!1:W(b),z=(b,T)=>!(b!=null&&b.enabled)||!(T!=null&&T.enabled)||!l?!1:W(b),O=b=>b===void 0||b.name!==r||b.square!==n;function G(b){st.call(this,s,b)}function ie(b){st.call(this,s,b)}function pe(b){st.call(this,s,b)}const oe=b=>{k("moving",b.detail)};return s.$$set=b=>{"square"in b&&e(1,n=b.square),"name"in b&&e(2,r=b.name),"mouseEvents"in b&&e(0,l=b.mouseEvents),"getGridCoordsFromSquare"in b&&e(15,o=b.getGridCoordsFromSquare),"flipped"in b&&e(3,u=b.flipped),"isGhost"in b&&e(4,f=b.isGhost),"selectableState"in b&&e(5,p=b.selectableState),"draggableState"in b&&e(6,h=b.draggableState),"legalState"in b&&e(16,C=b.legalState),"movableState"in b&&e(7,q=b.movableState)},s.$$.update=()=>{s.$$.dirty&32&&O(p==null?void 0:p.selectedPiece)&&(F=!1),s.$$.dirty&10&&v(n),s.$$.dirty&128&&e(8,i=typeof q=="boolean"?q?2:1:q!=null&&q.enabled?2:1)},[l,n,r,u,f,p,h,q,i,a,k,d,A,j,z,o,C,G,ie,pe,oe]}class wn extends Oe{constructor(t){super(),Fe(this,t,Ea,va,qe,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:15,flipped:3,isGhost:4,selectableState:5,draggableState:6,legalState:16,movableState:7})}}function ka(s){let t,e;return{c(){t=D("div"),this.h()},l(i){t=B(i,"DIV",{style:!0,class:!0}),K(t).forEach(E),this.h()},h(){ye(t,"left",s[3]*12.5+"%"),ye(t,"bottom",s[4]*12.5+"%"),c(t,"class",e="noselect "+je.squareStyles[s[1]][s[0]]+(s[2]?"":" pointer-events-none")+" svelte-10vytug")},m(i,a){Y(i,t,a)},p(i,[a]){a&8&&ye(t,"left",i[3]*12.5+"%"),a&16&&ye(t,"bottom",i[4]*12.5+"%"),a&7&&e!==(e="noselect "+je.squareStyles[i[1]][i[0]]+(i[2]?"":" pointer-events-none")+" svelte-10vytug")&&c(t,"class",e)},i:Te,o:Te,d(i){i&&E(t)}}}function wa(s,t,e){let{square:i}=t,{color:a}=t,{getGridCoordsFromSquare:n}=t,{flipped:r}=t,{theme:l}=t,{mouseEvents:o=!0}=t,u,f;const p=()=>{const h=n(i);e(3,u=h.x),e(4,f=h.y)};return s.$$set=h=>{"square"in h&&e(5,i=h.square),"color"in h&&e(0,a=h.color),"getGridCoordsFromSquare"in h&&e(6,n=h.getGridCoordsFromSquare),"flipped"in h&&e(7,r=h.flipped),"theme"in h&&e(1,l=h.theme),"mouseEvents"in h&&e(2,o=h.mouseEvents)},s.$$.update=()=>{s.$$.dirty&128&&p()},[a,l,o,u,f,i,n,r]}class Ma extends Oe{constructor(t){super(),Fe(this,t,wa,ka,qe,{square:5,color:0,getGridCoordsFromSquare:6,flipped:7,theme:1,mouseEvents:2})}}const Sa=["a","b","c","d","e","f","g","h"],ya=["8","7","6","5","4","3","2","1"];function Ca(s){s.querySelectorAll("[sf]").forEach(t=>t.remove())}function Yt(s){return`${Sa[s.x]}${ya[s.y]}`}function Mn(s,t){return Math.abs((s.x-t.x)*(s.y-t.y))===2}function Zt(s,t){return`${Yt(s)}${Yt(t)}`}function Aa(s,t){return!!(Mn(s,t)||Math.abs(s.x-t.x)===Math.abs(s.y-t.y)||s.x===t.x!=(s.y===t.y))}function Sn(s,t,e,i,a,n){let r={x:-1,y:-1},l,o;Mn(t,e)&&i?(Math.abs(e.x-t.x)===2?r={x:e.x,y:t.y}:r={x:t.x,y:e.y},r.y-t.y<0?o=Math.PI+Math.atan((r.x-t.x)/(r.y-t.y)):o=Math.atan((r.x-t.x)/Math.abs(r.y-t.y)),l={x:e.x-Math.sign(e.x-r.x)*(r.x!==e.x?.4:0),y:e.y-Math.sign(e.y-r.y)*(r.y!==e.y?.4:0)}):(e.y-t.y<0?o=Math.PI+Math.atan((e.x-t.x)/(e.y-t.y)):o=Math.atan((e.x-t.x)/Math.abs(e.y-t.y)),l={x:e.x-Math.sin(o)*.4,y:e.y-Math.cos(o)*.4});const u={x:t.x+Math.sin(o)*.4,y:t.y+Math.cos(o)*.4};s.setAttribute("points",`${u.x+.5},${u.y+.5} ${r.x!==-1&&r.y!==-1&&i?`${r.x+.5},${r.y+.5} `:""}${l.x+.5},${l.y+.5}`),s.setAttribute("data-sqID",`${Zt(t,e)}`),n!==void 0&&s.setAttribute("opacity",`${n}`),a!==void 0&&(s.setAttribute("marker-start",`url(#start-${a[0]})`),s.setAttribute("marker-end",`url(#end-${a[0]})`),s.setAttribute("stroke",a))}function Ft(s,t,e,i,a,n){if(!(t===void 0||e.x===-1&&e.y===-1)){if(t.tagName==="circle")t.setAttribute("fill","transparent"),i?t.setAttribute("stroke","red"):a?t.setAttribute("stroke","orange"):n?t.setAttribute("stroke","blue"):t.setAttribute("stroke","green"),s.querySelectorAll(`\u0441ircle[cx="${e.x+.5}"][cy="${e.y+.5}"]`).forEach(r=>{t!==void 0&&r!==t&&(r.getAttribute("stroke")===t.getAttribute("stroke")?t.setAttribute("remove",""):t.hasAttribute("remove")&&t.removeAttribute("remove"))});else if(t.tagName==="polyline"){const r=i?"red":a?"orange":n?"blue":"green";t.setAttribute("stroke",`${r}`),t.setAttribute("marker-start",`url(#start-${r[0]})`),t.setAttribute("marker-end",`url(#end-${r[0]})`),s.querySelectorAll(`polyline[data-sqID="${t.getAttribute("data-sqID")}"]`).forEach(l=>{t instanceof SVGPolylineElement&&l!==t&&(l.getAttribute("stroke")===t.getAttribute("stroke")?t.setAttribute("remove",""):t.hasAttribute("remove")&&t.removeAttribute("remove"))})}}}function yn(s,t,e,i,a){const n=document.createElementNS("http://www.w3.org/2000/svg","polyline");return Sn(n,s,t,e,i,a),n.setAttribute("fill","none"),n.setAttribute("stroke-width","0.25"),n.setAttribute("stroke-linejoin","round"),n.setAttribute("opacity",a!==void 0?`${a}`:"0.4"),n.setAttribute("marker-start",i?`url(#start-${i[0]})`:"url(#start-g)"),n.setAttribute("marker-end",i?`url(#end-${i[0]})`:"url(#end-g)"),n.setAttribute("stroke",i||"green"),n}function Jt(s,t,e){const i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",`${s.x+.5}`),i.setAttribute("cy",`${s.y+.5}`),i.setAttribute("r","0.465"),i.setAttribute("opacity",e?`${e}`:"0.4"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.07"),i.setAttribute("stroke",t!=null?t:"green"),i}function Ta(s,t,e){t.forEach(i=>{if(i.type==="circle"){const a=qt(i.square),n=Jt(a,i.color,i.opacity);s.appendChild(n)}else if(i.type==="arrow"){const a=yn(qt(i.from),qt(i.to),e,i.color,i.opacity);a.setAttribute("fixed",""),s.appendChild(a)}})}function ks(s){s.querySelectorAll("circle,polyline").forEach(t=>{t.hasAttribute("sf")||t.remove()})}function Pa(s,t){let{svg:e,flipped:i,enabled:a,settings:n}=t,r=!1,l={x:-1,y:-1},o,u;function f(k,w){const d=s.getBoundingClientRect(),m=i?d.width-(k-d.left):k-d.left,M=i?d.height-(w-d.top):w-d.top;return{x:Math.max(0,Math.min(7,Math.floor(m/(s.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(M/(s.clientHeight/8))))}}function p(k){if(u===void 0||l.x===-1&&l.y===-1)return;const w=f(k.clientX,k.clientY);n.onlyChessMove&&!Aa(l,w)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),l.x===w.x&&l.y===w.y?(Zt(l,w),u instanceof SVGPolylineElement&&(u.remove(),u=Jt(w)),Ft(e,u,l,k.shiftKey,k.ctrlKey,k.altKey),e.appendChild(u),e.querySelectorAll(`circle[cx="${l.x+.5}"][cy="${l.y+.5}"]`).forEach(d=>{d!==u&&(o=d,u!==void 0&&d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,e.querySelectorAll(`polyline[data-sqID="${Zt(l,w)}"]`).forEach(d=>{u===void 0||l.x===-1&&l.y===-1||d===u||(o=d,d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=yn(l,w,n.knightLShape),Ft(e,u,l,k.shiftKey,k.ctrlKey,k.altKey),e.appendChild(u)):u instanceof SVGPolylineElement&&Sn(u,l,w,n.knightLShape)))}function h(k){k.preventDefault()}function C(k){k.preventDefault(),Ft(e,u,l,k.shiftKey,k.ctrlKey,k.altKey)}function q(k){if(k.button===0)r=!1;else if(k.button===2){if(l.x===-1&&l.y===-1)return;e.querySelectorAll("[remove]").forEach(w=>{w.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:Yt(l),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,l={x:-1,y:-1},r=!1,window.removeEventListener("mousemove",p),window.removeEventListener("keydown",C),window.removeEventListener("keyup",C),window.removeEventListener("contextmenu",h)}window.removeEventListener("mouseup",q)}function F(k){if(k.button===0)r=!0,ks(e),window.addEventListener("mouseup",q);else if(k.button===2&&!r){const w=f(k.clientX,k.clientY);l=w,u=Jt(w),Ft(e,u,l,k.shiftKey,k.ctrlKey,k.altKey),o=void 0,e.querySelectorAll(`circle[cx="${w.x+.5}"][cy="${w.y+.5}"]`).forEach(d=>{o=d,u!==void 0&&d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&e.appendChild(u),window.addEventListener("mousemove",p),window.addEventListener("mouseup",q),window.addEventListener("keydown",C),window.addEventListener("keyup",C),window.addEventListener("contextmenu",h)}}return a&&s.addEventListener("mousedown",F),{update(k){k.svg!==e&&(e=k.svg),k.enabled!==a&&(a=k.enabled,a?s.addEventListener("mousedown",F):(ks(e),s.removeEventListener("mousedown",F))),n=k.settings,i=k.flipped}}}function ws(s,t,e){const i=s.slice();return i[8]=t[e],i}function Ms(s){let t,e,i,a;return{c(){t=ze("marker"),e=ze("path"),i=ze("marker"),a=ze("path"),this.h()},l(n){t=Ve(n,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var r=K(t);e=Ve(r,"path",{fill:!0,d:!0}),K(e).forEach(E),r.forEach(E),i=Ve(n,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var l=K(i);a=Ve(l,"path",{fill:!0,d:!0}),K(a).forEach(E),l.forEach(E),this.h()},h(){c(e,"fill",s[8]),c(e,"d","M 5 0 Q 0 0 0 5 L 0 15 Q 0 20 5 20 Z"),c(t,"id","start-"+s[8][0]),c(t,"viewBox","0 0 5 20"),c(t,"refX","4"),c(t,"refY","10"),c(t,"markerUnits","strokeWidth"),c(t,"markerWidth","0.5"),c(t,"markerHeight","1"),c(t,"orient","auto"),c(a,"fill",s[8]),c(a,"d","M 0 4 L 10 10 L 0 16 Z"),c(i,"id","end-"+s[8][0]),c(i,"viewBox","0 0 10 20"),c(i,"refX","0.2"),c(i,"refY","10"),c(i,"markerUnits","strokeWidth"),c(i,"orient","auto"),c(i,"fill","currentColor")},m(n,r){Y(n,t,r),y(t,e),Y(n,i,r),y(i,a)},p:Te,d(n){n&&E(t),n&&E(i)}}}function La(s){let t,e,i,a=s[2],n=[];for(let r=0;r<a.length;r+=1)n[r]=Ms(ws(s,a,r));return{c(){t=ze("svg"),e=ze("defs");for(let r=0;r<n.length;r+=1)n[r].c();i=ze("g"),this.h()},l(r){t=Ve(r,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var l=K(t);e=Ve(l,"defs",{});var o=K(e);for(let u=0;u<n.length;u+=1)n[u].l(o);o.forEach(E),i=Ve(l,"g",{}),K(i).forEach(E),l.forEach(E),this.h()},h(){c(t,"xmlns","http://www.w3.org/2000/svg"),ye(t,"transform","rotate("+(s[1]?"180deg":"0deg")+")"),c(t,"viewBox","0 0 8 8"),c(t,"class","svelte-19gv2n4")},m(r,l){Y(r,t,l),y(t,e);for(let o=0;o<n.length;o+=1)n[o].m(e,null);y(t,i),s[5](i)},p(r,[l]){if(l&4){a=r[2];let o;for(o=0;o<a.length;o+=1){const u=ws(r,a,o);n[o]?n[o].p(u,l):(n[o]=Ms(u),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=a.length}l&2&&ye(t,"transform","rotate("+(r[1]?"180deg":"0deg")+")")},i:Te,o:Te,d(r){r&&E(t),dt(n,r),s[5](null)}}}function Ia(s,t,e){let{flipped:i=!1}=t,{svg:a}=t,{knightLShape:n=!1}=t,{tools:r=[]}=t,l=!1;function o(p){!l||(Ca(a),Ta(a,p,n))}ts(()=>{l=!0,o(r)});const u=["green","red","blue","orange"];function f(p){ue[p?"unshift":"push"](()=>{a=p,e(0,a)})}return s.$$set=p=>{"flipped"in p&&e(1,i=p.flipped),"svg"in p&&e(0,a=p.svg),"knightLShape"in p&&e(3,n=p.knightLShape),"tools"in p&&e(4,r=p.tools)},s.$$.update=()=>{s.$$.dirty&16&&o(r)},[a,i,u,n,r,f]}class Oa extends Oe{constructor(t){super(),Fe(this,t,Ia,La,qe,{flipped:1,svg:0,knightLShape:3,tools:4})}}function Ss(s,{delay:t=0,duration:e=400,easing:i=ns,x:a=0,y:n=0,opacity:r=0}={}){const l=getComputedStyle(s),o=+l.opacity,u=l.transform==="none"?"":l.transform,f=o*(1-r);return{delay:t,duration:e,easing:i,css:(p,h)=>`
			transform: ${u} translate(${(1-p)*a}px, ${(1-p)*n}px);
			opacity: ${o-f*h}`}}function ht(s,{delay:t=0,duration:e=400,easing:i=ns}={}){const a=getComputedStyle(s),n=+a.opacity,r=parseFloat(a.height),l=parseFloat(a.paddingTop),o=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),f=parseFloat(a.marginBottom),p=parseFloat(a.borderTopWidth),h=parseFloat(a.borderBottomWidth);return{delay:t,duration:e,easing:i,css:C=>`overflow: hidden;opacity: ${Math.min(C*20,1)*n};height: ${C*r}px;padding-top: ${C*l}px;padding-bottom: ${C*o}px;margin-top: ${C*u}px;margin-bottom: ${C*f}px;border-top-width: ${C*p}px;border-bottom-width: ${C*h}px;`}}function Fa(s){let t,e,i,a,n,r;return{c(){t=D("button"),e=D("img"),this.h()},l(l){t=B(l,"BUTTON",{});var o=K(t);e=B(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(E),this.h()},h(){mt(e.src,i=s[1])||c(e,"src",i),c(e,"alt",a="Promotion to "+s[0].toUpperCase()),c(e,"class","svelte-17pqsbb")},m(l,o){Y(l,t,o),y(t,e),n||(r=fe(t,"click",s[2]),n=!0)},p(l,[o]){o&1&&a!==(a="Promotion to "+l[0].toUpperCase())&&c(e,"alt",a)},i:Te,o:Te,d(l){l&&E(t),n=!1,r()}}}function qa(s,t,e){let{piece:i}=t,{isWhite:a}=t,{showModal:n}=t;const r=es(),l=(a?"w":"b")+i.toUpperCase(),o=Xt(l),u=()=>{r("newPromotion",i),e(3,n=!1)};return s.$$set=f=>{"piece"in f&&e(0,i=f.piece),"isWhite"in f&&e(4,a=f.isWhite),"showModal"in f&&e(3,n=f.showModal)},[i,o,u,n,a]}class Ra extends Oe{constructor(t){super(),Fe(this,t,qa,Fa,qe,{piece:0,isWhite:4,showModal:3})}}function ys(s,t,e){const i=s.slice();return i[6]=t[e],i}function Cs(s){let t,e,i,a,n,r=["q","r","b","n"],l=[];for(let u=0;u<4;u+=1)l[u]=As(ys(s,r,u));const o=u=>se(l[u],1,1,()=>{l[u]=null});return{c(){t=D("div"),e=D("div");for(let u=0;u<4;u+=1)l[u].c();this.h()},l(u){t=B(u,"DIV",{class:!0});var f=K(t);e=B(f,"DIV",{class:!0});var p=K(e);for(let h=0;h<4;h+=1)l[h].l(p);p.forEach(E),f.forEach(E),this.h()},h(){c(e,"class","modal-content svelte-it5mr1"),c(t,"class","modal svelte-it5mr1")},m(u,f){Y(u,t,f),y(t,e);for(let p=0;p<4;p+=1)l[p].m(e,null);n=!0},p(u,f){if(f&3){r=["q","r","b","n"];let p;for(p=0;p<4;p+=1){const h=ys(u,r,p);l[p]?(l[p].p(h,f),x(l[p],1)):(l[p]=As(h),l[p].c(),x(l[p],1),l[p].m(e,null))}for(Be(),p=4;p<4;p+=1)o(p);Ue()}},i(u){if(!n){for(let f=0;f<4;f+=1)x(l[f]);nt(()=>{a&&a.end(1),i=Yn(e,Ss,{x:100,duration:300}),i.start()}),n=!0}},o(u){l=l.filter(Boolean);for(let f=0;f<4;f+=1)se(l[f]);i&&i.invalidate(),a=Zn(e,Ss,{x:-200,duration:100}),n=!1},d(u){u&&E(t),dt(l,u),u&&a&&a.end()}}}function As(s){let t,e,i,a;function n(o){s[3](o)}function r(o){s[4](o)}let l={piece:s[6]};return s[1]!==void 0&&(l.isWhite=s[1]),s[0]!==void 0&&(l.showModal=s[0]),t=new Ra({props:l}),ue.push(()=>he(t,"isWhite",n)),ue.push(()=>he(t,"showModal",r)),t.$on("newPromotion",s[5]),{c(){ke(t.$$.fragment)},l(o){we(t.$$.fragment,o)},m(o,u){Me(t,o,u),a=!0},p(o,u){const f={};!e&&u&2&&(e=!0,f.isWhite=o[1],ge(()=>e=!1)),!i&&u&1&&(i=!0,f.showModal=o[0],ge(()=>i=!1)),t.$set(f)},i(o){a||(x(t.$$.fragment,o),a=!0)},o(o){se(t.$$.fragment,o),a=!1},d(o){Se(t,o)}}}function Na(s){let t,e,i=s[0]&&Cs(s);return{c(){i&&i.c(),t=Ce()},l(a){i&&i.l(a),t=Ce()},m(a,n){i&&i.m(a,n),Y(a,t,n),e=!0},p(a,[n]){a[0]?i?(i.p(a,n),n&1&&x(i,1)):(i=Cs(a),i.c(),x(i,1),i.m(t.parentNode,t)):i&&(Be(),se(i,1,1,()=>{i=null}),Ue())},i(a){e||(x(i),e=!0)},o(a){se(i),e=!1},d(a){i&&i.d(a),a&&E(t)}}}function Da(s,t,e){let i=!1,a;function n(u){e(0,i=!0),u?e(1,a=!0):e(1,a=!1)}function r(u){a=u,e(1,a)}function l(u){i=u,e(0,i)}function o(u){st.call(this,s,u)}return[i,a,n,r,l,o]}class Ba extends Oe{constructor(t){super(),Fe(this,t,Da,Na,qe,{openPromotionModal:2})}get openPromotionModal(){return this.$$.ctx[2]}}const Ua=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,Ha=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,za=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,Va=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function Ts(s){let t,e,i,a;return{c(){t=D("audio"),e=D("track"),i=D("source"),this.h()},l(n){t=B(n,"AUDIO",{preload:!0});var r=K(t);e=B(r,"TRACK",{kind:!0}),i=B(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){c(e,"kind","captions"),mt(i.src,a=Ua)||c(i,"src",a),c(t,"preload","auto")},m(n,r){Y(n,t,r),y(t,e),y(t,i),s[3](t)},p:Te,d(n){n&&E(t),s[3](null)}}}function Ps(s){let t,e,i,a;return{c(){t=D("audio"),e=D("track"),i=D("source"),this.h()},l(n){t=B(n,"AUDIO",{preload:!0});var r=K(t);e=B(r,"TRACK",{kind:!0}),i=B(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){c(e,"kind","captions"),mt(i.src,a=Ha)||c(i,"src",a),c(t,"preload","auto")},m(n,r){Y(n,t,r),y(t,e),y(t,i),s[4](t)},p:Te,d(n){n&&E(t),s[4](null)}}}function Ls(s){let t,e,i,a;return{c(){t=D("audio"),e=D("track"),i=D("source"),this.h()},l(n){t=B(n,"AUDIO",{preload:!0});var r=K(t);e=B(r,"TRACK",{kind:!0}),i=B(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){c(e,"kind","captions"),mt(i.src,a=za)||c(i,"src",a),c(t,"preload","auto")},m(n,r){Y(n,t,r),y(t,e),y(t,i),s[5](t)},p:Te,d(n){n&&E(t),s[5](null)}}}function Is(s){let t,e,i,a;return{c(){t=D("audio"),e=D("track"),i=D("source"),this.h()},l(n){t=B(n,"AUDIO",{preload:!0});var r=K(t);e=B(r,"TRACK",{kind:!0}),i=B(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){c(e,"kind","captions"),mt(i.src,a=Va)||c(i,"src",a),c(t,"preload","auto")},m(n,r){Y(n,t,r),y(t,e),y(t,i),s[6](t)},p:Te,d(n){n&&E(t),s[6](null)}}}function Wa(s){let t,e,i,a,n=s[0].MOVE&&Ts(s),r=s[0].CAPTURE&&Ps(s),l=s[0].CASTLE&&Ls(s),o=s[0].UNDO&&Is(s);return{c(){n&&n.c(),t=ee(),r&&r.c(),e=ee(),l&&l.c(),i=ee(),o&&o.c(),a=Ce()},l(u){n&&n.l(u),t=te(u),r&&r.l(u),e=te(u),l&&l.l(u),i=te(u),o&&o.l(u),a=Ce()},m(u,f){n&&n.m(u,f),Y(u,t,f),r&&r.m(u,f),Y(u,e,f),l&&l.m(u,f),Y(u,i,f),o&&o.m(u,f),Y(u,a,f)},p(u,[f]){u[0].MOVE?n?n.p(u,f):(n=Ts(u),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null),u[0].CAPTURE?r?r.p(u,f):(r=Ps(u),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0].CASTLE?l?l.p(u,f):(l=Ls(u),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),u[0].UNDO?o?o.p(u,f):(o=Is(u),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:Te,o:Te,d(u){n&&n.d(u),u&&E(t),r&&r.d(u),u&&E(e),l&&l.d(u),u&&E(i),o&&o.d(u),u&&E(a)}}}function Ka(s,t,e){let{settings:i}=t;const a={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},n=()=>{a.CASTLE&&(a.CASTLE.pause(),e(1,a.CASTLE.currentTime=0,a)),a.MOVE&&(a.MOVE.pause(),e(1,a.MOVE.currentTime=0,a)),a.CAPTURE&&(a.CAPTURE.pause(),e(1,a.CAPTURE.currentTime=0,a)),a.UNDO&&(a.UNDO.pause(),e(1,a.UNDO.currentTime=0,a))},r=h=>h===void 0||i[h];function l(h){switch(n(),h){case"MOVE":a.MOVE&&r("MOVE")&&a.MOVE.play();break;case"CAPTURE":a.CAPTURE&&r("CAPTURE")?a.CAPTURE.play():a.MOVE&&r("MOVE")&&a.MOVE.play();break;case"CASTLE":a.CASTLE&&r("CASTLE")?a.CASTLE.play():a.MOVE&&r("MOVE")&&a.MOVE.play();break;case"UNDO":a.UNDO&&r("UNDO")?(e(1,a.UNDO.volume=.3,a),a.UNDO.play()):a.MOVE&&r("MOVE")&&a.MOVE.play();break}}function o(h){ue[h?"unshift":"push"](()=>{a.MOVE=h,e(1,a)})}function u(h){ue[h?"unshift":"push"](()=>{a.CAPTURE=h,e(1,a)})}function f(h){ue[h?"unshift":"push"](()=>{a.CASTLE=h,e(1,a)})}function p(h){ue[h?"unshift":"push"](()=>{a.UNDO=h,e(1,a)})}return s.$$set=h=>{"settings"in h&&e(0,i=h.settings)},[i,a,l,o,u,f,p]}class ja extends Oe{constructor(t){super(),Fe(this,t,Ka,Wa,qe,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Os=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,Fs=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function Ga(s,t){const{minWidth:e,maxWidth:i,curWidth:a}=t;let{mouseEvents:n}=t,r=a,l,o,u,f;function p(q){q.stopPropagation(),s.dispatchEvent(new CustomEvent("resizing",{detail:{size:Math.max(Math.max(e,Math.min(i,u+(q.pageX-l))),Math.max(e,Math.min(i,f+(q.pageY-o))))}}))}function h(q){q.stopPropagation(),s.dispatchEvent(new CustomEvent("endResizing",{detail:{size:Math.max(Math.max(e,Math.min(i,u+Math.floor((q.pageX-l)/8)*8)),Math.max(e,Math.min(i,f+Math.floor((q.pageY-o)/8)*8)))}})),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",h)}function C(q){!n||(q.stopPropagation(),q.button===0&&(l=q.pageX,u=r,o=q.pageY,f=r,window.addEventListener("mousemove",p),window.addEventListener("mouseup",h)))}return s.addEventListener("mousedown",C),{update(q){r=q.curWidth,n!==q.mouseEvents&&(n=q.mouseEvents)},destroy(){s.removeEventListener("mousedown",C)}}}function Qa(s){let t,e,i,a,n,r,l;return{c(){t=D("div"),e=ze("svg"),i=ze("path"),this.h()},l(o){t=B(o,"DIV",{style:!0,class:!0});var u=K(t);e=Ve(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var f=K(e);i=Ve(f,"path",{d:!0}),K(i).forEach(E),f.forEach(E),u.forEach(E),this.h()},h(){c(i,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 16 16"),c(e,"fill","currentColor"),ye(t,"color",je.colors[s[0].state.board.boardTheme].black),c(t,"class",a=os(s[2]?"cursor-nwse-resize":"")+" svelte-1ssh93t")},m(o,u){Y(o,t,u),y(t,e),y(e,i),r||(l=[fe(t,"pointerdown",gn(s[3])),xt(n=Ga.call(null,t,{mouseEvents:s[2],minWidth:s[0].state.board.resizible.min,maxWidth:s[0].state.board.resizible.max,curWidth:s[0].state.board.size})),fe(t,"resizing",s[4]),fe(t,"endResizing",s[5])],r=!0)},p(o,[u]){u&1&&ye(t,"color",je.colors[o[0].state.board.boardTheme].black),u&4&&a!==(a=os(o[2]?"cursor-nwse-resize":"")+" svelte-1ssh93t")&&c(t,"class",a),n&&$t(n.update)&&u&5&&n.update.call(null,{mouseEvents:o[2],minWidth:o[0].state.board.resizible.min,maxWidth:o[0].state.board.resizible.max,curWidth:o[0].state.board.size})},i:Te,o:Te,d(o){o&&E(t),r=!1,xe(l)}}}function Xa(s,t,e){let{chessboard:i}=t,{setSize:a}=t,{mouseEvents:n=!0}=t;function r(u){st.call(this,s,u)}const l=u=>a(u.detail.size),o=u=>a(u.detail.size);return s.$$set=u=>{"chessboard"in u&&e(0,i=u.chessboard),"setSize"in u&&e(1,a=u.setSize),"mouseEvents"in u&&e(2,n=u.mouseEvents)},[i,a,n,r,l,o]}class Ya extends Oe{constructor(t){super(),Fe(this,t,Xa,Qa,qe,{chessboard:0,setSize:1,mouseEvents:2})}}function qs(s,t,e){const i=s.slice();return i[73]=t[e],i}function Rs(s,t,e){const i=s.slice();return i[76]=t[e],i}function Ns(s){let t=[],e=new Map,i,a,n=s[5].state.pieces;const r=l=>l[76];for(let l=0;l<n.length;l+=1){let o=Rs(s,n,l),u=r(o);e.set(u,t[l]=Ds(u,o))}return{c(){for(let l=0;l<t.length;l+=1)t[l].c();i=Ce()},l(l){for(let o=0;o<t.length;o+=1)t[o].l(l);i=Ce()},m(l,o){for(let u=0;u<t.length;u+=1)t[u].m(l,o);Y(l,i,o),a=!0},p(l,o){o[0]&29742&&(n=l[5].state.pieces,Be(),t=bn(t,o,r,1,l,n,e,i.parentNode,mn,Ds,i,Rs),Ue())},i(l){if(!a){for(let o=0;o<n.length;o+=1)x(t[o]);a=!0}},o(l){for(let o=0;o<t.length;o+=1)se(t[o]);a=!1},d(l){for(let o=0;o<t.length;o+=1)t[o].d(l);l&&E(i)}}}function Ds(s,t){let e,i,a;function n(){return t[53](t[76])}function r(){return t[54](t[76])}function l(...u){return t[55](t[76],...u)}function o(){return t[57](t[76])}return i=new wn({props:{square:t[76].square,name:t[76].name,mouseEvents:t[5].state.board.mouseEvents,legalState:t[5].state.legal,draggableState:t[5].state.draggable,selectableState:t[5].state.selectable,movableState:t[5].state.movable,getGridCoordsFromSquare:t[5].getGridCoordsFromSquare,flipped:t[5].state.board.flipped}}),i.$on("move",t[12]),i.$on("clicked",n),i.$on("startMoving",r),i.$on("moving",l),i.$on("endDragging",t[56]),i.$on("select",o),i.$on("deselect",t[58]),{key:s,first:null,c(){e=Ce(),ke(i.$$.fragment),this.h()},l(u){e=Ce(),we(i.$$.fragment,u),this.h()},h(){this.first=e},m(u,f){Y(u,e,f),Me(i,u,f),a=!0},p(u,f){t=u;const p={};f[0]&32&&(p.square=t[76].square),f[0]&32&&(p.name=t[76].name),f[0]&32&&(p.mouseEvents=t[5].state.board.mouseEvents),f[0]&32&&(p.legalState=t[5].state.legal),f[0]&32&&(p.draggableState=t[5].state.draggable),f[0]&32&&(p.selectableState=t[5].state.selectable),f[0]&32&&(p.movableState=t[5].state.movable),f[0]&32&&(p.getGridCoordsFromSquare=t[5].getGridCoordsFromSquare),f[0]&32&&(p.flipped=t[5].state.board.flipped),i.$set(p)},i(u){a||(x(i.$$.fragment,u),a=!0)},o(u){se(i.$$.fragment,u),a=!1},d(u){u&&E(e),Se(i,u)}}}function Bs(s){let t,e;return t=new wn({props:{isGhost:!0,square:s[5].state.draggable.ghostPiece.piece.square,name:s[5].state.draggable.ghostPiece.piece.name,getGridCoordsFromSquare:s[5].getGridCoordsFromSquare,flipped:s[5].state.board.flipped}}),{c(){ke(t.$$.fragment)},l(i){we(t.$$.fragment,i)},m(i,a){Me(t,i,a),e=!0},p(i,a){const n={};a[0]&32&&(n.square=i[5].state.draggable.ghostPiece.piece.square),a[0]&32&&(n.name=i[5].state.draggable.ghostPiece.piece.name),a[0]&32&&(n.getGridCoordsFromSquare=i[5].getGridCoordsFromSquare),a[0]&32&&(n.flipped=i[5].state.board.flipped),t.$set(n)},i(i){e||(x(t.$$.fragment,i),e=!0)},o(i){se(t.$$.fragment,i),e=!1},d(i){Se(t,i)}}}function Us(s){let t=[],e=new Map,i,a,n=[...s[5].state.markedSquares];const r=l=>l[73];for(let l=0;l<n.length;l+=1){let o=qs(s,n,l),u=r(o);e.set(u,t[l]=Hs(u,o))}return{c(){for(let l=0;l<t.length;l+=1)t[l].c();i=Ce()},l(l){for(let o=0;o<t.length;o+=1)t[o].l(l);i=Ce()},m(l,o){for(let u=0;u<t.length;u+=1)t[u].m(l,o);Y(l,i,o),a=!0},p(l,o){o[0]&34&&(n=[...l[5].state.markedSquares],Be(),t=bn(t,o,r,1,l,n,e,i.parentNode,mn,Hs,i,qs),Ue())},i(l){if(!a){for(let o=0;o<n.length;o+=1)x(t[o]);a=!0}},o(l){for(let o=0;o<t.length;o+=1)se(t[o]);a=!1},d(l){for(let o=0;o<t.length;o+=1)t[o].d(l);l&&E(i)}}}function Hs(s,t){let e,i,a;return i=new Ma({props:{theme:t[5].state.board.boardTheme,square:t[73].square,color:t[73].color,getGridCoordsFromSquare:t[5].getGridCoordsFromSquare,flipped:t[5].state.board.flipped,mouseEvents:t[5].state.board.mouseEvents}}),i.$on("dragenter",t[59]),{key:s,first:null,c(){e=Ce(),ke(i.$$.fragment),this.h()},l(n){e=Ce(),we(i.$$.fragment,n),this.h()},h(){this.first=e},m(n,r){Y(n,e,r),Me(i,n,r),a=!0},p(n,r){t=n;const l={};r[0]&32&&(l.theme=t[5].state.board.boardTheme),r[0]&32&&(l.square=t[73].square),r[0]&32&&(l.color=t[73].color),r[0]&32&&(l.getGridCoordsFromSquare=t[5].getGridCoordsFromSquare),r[0]&32&&(l.flipped=t[5].state.board.flipped),r[0]&32&&(l.mouseEvents=t[5].state.board.mouseEvents),i.$set(l)},i(n){a||(x(i.$$.fragment,n),a=!0)},o(n){se(i.$$.fragment,n),a=!1},d(n){n&&E(e),Se(i,n)}}}function zs(s){let t,e;return t=new Ii({props:{theme:s[5].state.board.boardTheme,flipped:s[5].state.board.flipped}}),{c(){ke(t.$$.fragment)},l(i){we(t.$$.fragment,i)},m(i,a){Me(t,i,a),e=!0},p(i,a){const n={};a[0]&32&&(n.theme=i[5].state.board.boardTheme),a[0]&32&&(n.flipped=i[5].state.board.flipped),t.$set(n)},i(i){e||(x(t.$$.fragment,i),e=!0)},o(i){se(t.$$.fragment,i),e=!1},d(i){Se(t,i)}}}function Vs(s){let t,e;return t=new Ya({props:{chessboard:s[5],setSize:s[4],mouseEvents:s[5].state.board.mouseEvents}}),{c(){ke(t.$$.fragment)},l(i){we(t.$$.fragment,i)},m(i,a){Me(t,i,a),e=!0},p(i,a){const n={};a[0]&32&&(n.chessboard=i[5]),a[0]&32&&(n.mouseEvents=i[5].state.board.mouseEvents),t.$set(n)},i(i){e||(x(t.$$.fragment,i),e=!0)},o(i){se(t.$$.fragment,i),e=!1},d(i){Se(t,i)}}}function Ws(s){let t,e,i;function a(r){s[60](r)}let n={flipped:s[5].state.board.flipped,tools:s[5].state.drawTools.tools,knightLShape:s[5].state.drawTools.settings.knightLShape};return s[7]!==void 0&&(n.svg=s[7]),t=new Oa({props:n}),ue.push(()=>he(t,"svg",a)),{c(){ke(t.$$.fragment)},l(r){we(t.$$.fragment,r)},m(r,l){Me(t,r,l),i=!0},p(r,l){const o={};l[0]&32&&(o.flipped=r[5].state.board.flipped),l[0]&32&&(o.tools=r[5].state.drawTools.tools),l[0]&32&&(o.knightLShape=r[5].state.drawTools.settings.knightLShape),!e&&l[0]&128&&(e=!0,o.svg=r[7],ge(()=>e=!1)),t.$set(o)},i(r){i||(x(t.$$.fragment,r),i=!0)},o(r){se(t.$$.fragment,r),i=!1},d(r){Se(t,r)}}}function Ks(s){let t,e,i={};return t=new Ba({props:i}),s[61](t),t.$on("newPromotion",s[15]),{c(){ke(t.$$.fragment)},l(a){we(t.$$.fragment,a)},m(a,n){Me(t,a,n),e=!0},p(a,n){const r={};t.$set(r)},i(a){e||(x(t.$$.fragment,a),e=!0)},o(a){se(t.$$.fragment,a),e=!1},d(a){s[61](null),Se(t,a)}}}function js(s){let t,e,i={settings:s[5].state.sounds.settings};return t=new ja({props:i}),s[66](t),{c(){ke(t.$$.fragment)},l(a){we(t.$$.fragment,a)},m(a,n){Me(t,a,n),e=!0},p(a,n){const r={};n[0]&32&&(r.settings=a[5].state.sounds.settings),t.$set(r)},i(a){e||(x(t.$$.fragment,a),e=!0)},o(a){se(t.$$.fragment,a),e=!1},d(a){s[66](null),Se(t,a)}}}function Za(s){let t,e,i,a,n,r,l,o,u,f,p,h,C,q,F,k,w,d=s[5].state.board.startFen&&Ns(s),m=s[5].state.draggable.ghostPiece.enabled&&s[5].state.draggable.ghostPiece.piece!==void 0&&Bs(s),M=s[5].state.highlight.enabled&&Us(s),v=s[5].state.board.notation&&zs(s),A=s[5].state.board.resizible.enabled&&Vs(s),W=s[5].state.drawTools.enabled&&Ws(s),j=s[5].state.legal.enabled&&Ks(s),z=s[5].state.sounds.enabled&&js(s);return{c(){t=D("div"),e=D("div"),d&&d.c(),i=ee(),m&&m.c(),a=ee(),M&&M.c(),n=ee(),v&&v.c(),r=ee(),A&&A.c(),l=ee(),W&&W.c(),o=ee(),j&&j.c(),C=ee(),z&&z.c(),q=Ce(),this.h()},l(O){t=B(O,"DIV",{class:!0,style:!0});var G=K(t);e=B(G,"DIV",{style:!0,class:!0});var ie=K(e);d&&d.l(ie),ie.forEach(E),i=te(G),m&&m.l(G),a=te(G),M&&M.l(G),n=te(G),v&&v.l(G),r=te(G),A&&A.l(G),l=te(G),W&&W.l(G),o=te(G),j&&j.l(G),G.forEach(E),C=te(O),z&&z.l(O),q=Ce(),this.h()},h(){ye(e,"width","100%"),ye(e,"height","100%"),c(e,"class","noselect"),c(t,"class",u="noselect board "+(s[5].state.board.style.shadow?"shadow":"")+" text-sm "+s[0]+" svelte-1bsiysh"),c(t,"style",f="--boardTheme: url("+(s[5].state.board.boardTheme==="standard"?Os:Fs)+"); "+(s[5].state.board.style.borderRadius!=="0rem"&&s[5].state.board.style.borderRadius!=="0px"?`border-radius: ${s[5].state.board.style.borderRadius};`:"")),nt(()=>s[65].call(t))},m(O,G){Y(O,t,G),y(t,e),d&&d.m(e,null),y(t,i),m&&m.m(t,null),y(t,a),M&&M.m(t,null),y(t,n),v&&v.m(t,null),y(t,r),A&&A.m(t,null),y(t,l),W&&W.m(t,null),y(t,o),j&&j.m(t,null),s[64](t),h=Jn(t,s[65].bind(t)),Y(O,C,G),z&&z.m(O,G),Y(O,q,G),F=!0,k||(w=[fe(t,"pointerdown",s[11]),fe(t,"contextmenu",us(s[51])),fe(t,"drag",us(s[52])),xt(p=Pa.call(null,t,{svg:s[7],flipped:s[5].state.board.flipped,enabled:s[5].state.drawTools.enabled&&s[5].state.board.mouseEvents,settings:s[5].state.drawTools.settings})),fe(t,"drawCircle",s[62]),fe(t,"drawArrow",s[63])],k=!0)},p(O,G){O[5].state.board.startFen?d?(d.p(O,G),G[0]&32&&x(d,1)):(d=Ns(O),d.c(),x(d,1),d.m(e,null)):d&&(Be(),se(d,1,1,()=>{d=null}),Ue()),O[5].state.draggable.ghostPiece.enabled&&O[5].state.draggable.ghostPiece.piece!==void 0?m?(m.p(O,G),G[0]&32&&x(m,1)):(m=Bs(O),m.c(),x(m,1),m.m(t,a)):m&&(Be(),se(m,1,1,()=>{m=null}),Ue()),O[5].state.highlight.enabled?M?(M.p(O,G),G[0]&32&&x(M,1)):(M=Us(O),M.c(),x(M,1),M.m(t,n)):M&&(Be(),se(M,1,1,()=>{M=null}),Ue()),O[5].state.board.notation?v?(v.p(O,G),G[0]&32&&x(v,1)):(v=zs(O),v.c(),x(v,1),v.m(t,r)):v&&(Be(),se(v,1,1,()=>{v=null}),Ue()),O[5].state.board.resizible.enabled?A?(A.p(O,G),G[0]&32&&x(A,1)):(A=Vs(O),A.c(),x(A,1),A.m(t,l)):A&&(Be(),se(A,1,1,()=>{A=null}),Ue()),O[5].state.drawTools.enabled?W?(W.p(O,G),G[0]&32&&x(W,1)):(W=Ws(O),W.c(),x(W,1),W.m(t,o)):W&&(Be(),se(W,1,1,()=>{W=null}),Ue()),O[5].state.legal.enabled?j?(j.p(O,G),G[0]&32&&x(j,1)):(j=Ks(O),j.c(),x(j,1),j.m(t,null)):j&&(Be(),se(j,1,1,()=>{j=null}),Ue()),(!F||G[0]&33&&u!==(u="noselect board "+(O[5].state.board.style.shadow?"shadow":"")+" text-sm "+O[0]+" svelte-1bsiysh"))&&c(t,"class",u),(!F||G[0]&32&&f!==(f="--boardTheme: url("+(O[5].state.board.boardTheme==="standard"?Os:Fs)+"); "+(O[5].state.board.style.borderRadius!=="0rem"&&O[5].state.board.style.borderRadius!=="0px"?`border-radius: ${O[5].state.board.style.borderRadius};`:"")))&&c(t,"style",f),p&&$t(p.update)&&G[0]&160&&p.update.call(null,{svg:O[7],flipped:O[5].state.board.flipped,enabled:O[5].state.drawTools.enabled&&O[5].state.board.mouseEvents,settings:O[5].state.drawTools.settings}),O[5].state.sounds.enabled?z?(z.p(O,G),G[0]&32&&x(z,1)):(z=js(O),z.c(),x(z,1),z.m(q.parentNode,q)):z&&(Be(),se(z,1,1,()=>{z=null}),Ue())},i(O){F||(x(d),x(m),x(M),x(v),x(A),x(W),x(j),x(z),F=!0)},o(O){se(d),se(m),se(M),se(v),se(A),se(W),se(j),se(z),F=!1},d(O){O&&E(t),d&&d.d(),m&&m.d(),M&&M.d(),v&&v.d(),A&&A.d(),W&&W.d(),j&&j.d(),s[64](null),h(),O&&E(C),z&&z.d(O),O&&E(q),k=!1,xe(w)}}}function Ja(s,t,e){let{config:i}=t,{className:a=""}=t;const n=new wi(i),r=es();let l,o,u,f,p="";xn(()=>{document.documentElement.hasAttribute("style")&&n.state.board.resizible.enabled&&document.documentElement.removeAttribute("style")});const h=S=>{n.clearAllSquares(S),S===$.LEGAL&&n.clearAllSquares($.LEGALHOVER),S===$.PREMOVE&&n.clearAllSquares($.PREMOVEHOVER),e(5,n)},C=(S,Z)=>{!q(Ot(Z))||(n.highlightSquare(S,Z),e(5,n))},q=S=>n.state.highlight.enabled&&(S===void 0||n.state.highlight.settings[typeof S=="string"?S:Ot(S)]),F=S=>{if(!n.state.selectable.enabled)return;k(!0);const Z=n.getPieceFromSquare(S);Z!==void 0&&(e(5,n.state.selectable.selectedPiece=Z,n),h($.SELECT),C(S,$.SELECT),n.state.legal.enabled&&G(Z.name)&&j(n.state.legal.moves,S),n.state.legal.preMoves.enabled&&!G(Z.name)&&j(n.state.legal.preMoves.moves,S,$.PREMOVE))},k=(S=!0)=>{h($.SELECT),h($.LEGAL),h($.PREMOVE),e(5,n.state.selectable.selectedPiece=void 0,n),S&&(h($.NEXTMOVE),e(5,n.state.legal.preMoves.curMove="",n))},w=S=>{h($.CHECK),S&&n.state.legal.enabled&&C(S,$.CHECK),e(5,n)},d=()=>{h($.CHECK)},m=S=>{n.flipBoard(S),e(5,n)},M=(S,Z)=>{S.forEach(de=>n.highlightSquare(de,Z)),e(5,n)},v=(S,Z=!0,de=$.MOVE)=>{S.length<4||!q(Ot(de))||(Z&&h(de),M([S.substring(0,2),S.substring(2,4)],de))},A=(S,Z,de=$.MOVE)=>{const Pe=[];Z&&h(de),S.forEach(Ie=>{Ie.length<4||(Pe.push(Ie.substring(0,2)),Pe.push(Ie.substring(2,4)))}),M(Pe,de)},W=S=>{C(S.substring(2,4),$.LEGAL)},j=(S,Z,de=$.LEGAL)=>{h(de),q(Ot(de))&&(S.forEach(Pe=>{Pe.length<4||(Z===void 0||Pe.substring(0,2)===Z)&&n.highlightSquare(Pe.substring(2,4),de)}),e(5,n))},z=(S,Z=!0)=>{n.makeMove(S),Z&&v(S),e(5,n)},O=S=>{n.removePiece(S),e(5,n)},G=S=>n.state.legal.whiteToMove&&S[0]==="w"||!n.state.legal.whiteToMove&&S[0]==="b",ie=()=>{!n.state.legal.enabled||(n.state.callbacks.getWhiteToMove&&e(5,n.state.legal.whiteToMove=n.state.callbacks.getWhiteToMove(),n),n.state.callbacks.getPreMoves&&n.state.legal.preMoves.enabled?e(5,n.state.legal.preMoves.moves=n.state.callbacks.getPreMoves(),n):e(5,n.state.legal.preMoves.moves.length=0,n),n.state.callbacks.getLegalMoves&&n.state.legal.enabled?e(5,n.state.legal.moves=n.state.callbacks.getLegalMoves(),n):e(5,n.state.legal.moves.length=0,n),n.state.selectable.selectedPiece!==void 0&&G(n.state.selectable.selectedPiece.name)&&n.state.legal.preMoves.enabled&&(h($.PREMOVE),j(n.state.legal.moves,n.state.selectable.selectedPiece.square)),n.state.callbacks.getInCheck&&n.state.callbacks.getInCheck()?n.state.legal.whiteToMove?w(n.getWhiteKingSquare()):w(n.getBlackKingSquare()):d())},pe=S=>{n.state.sounds.enabled&&u&&u.playMoveSound(S)},oe=S=>{n.setGhostPiece(S),e(5,n)},g=()=>{n.removeGhostPiece(),e(5,n)},_=S=>{if(S.substring(0,2)===S.substring(2,4))return;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(S),k();const Z=n.getRookMoveIfIsCastling(S),de=n.getCapturedPawnSquareIfIsEnPassant(S);if(Z&&n.state.legal.enabled&&n.state.legal.settings.allowCastling?(z(Z,!1),pe("CASTLE")):de&&n.state.legal.enabled&&n.state.legal.settings.allowEnPassant?(O(de),pe("CAPTURE")):n.isCapture(S)?pe("CAPTURE"):pe("MOVE"),g(),z(S),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(S),ie(),n.state.legal.enabled&&n.state.legal.preMoves.enabled&&n.state.legal.preMoves.curMove!==""){if(n.state.legal.moves.includes(n.state.legal.preMoves.curMove)||n.state.legal.moves.includes(`${n.state.legal.preMoves.curMove}q`)){const Pe=n.state.legal.preMoves.curMove;e(5,n.state.legal.preMoves.curMove="",n),$n().then(()=>{_(Pe)})}h($.NEXTMOVE)}},b=S=>{!n.state.legal.enabled||!n.state.legal.preMoves.enabled||!n.state.movable.enabled||(h($.PREMOVE),v(S,!0,$.NEXTMOVE),e(5,n.state.legal.preMoves.curMove=S,n),r("nextMove",{move:S}))},T=S=>{f.openPromotionModal(!0),p=S,n.makeMove(S),h($.LEGAL),h($.SELECT),v(S)},L=(S,Z)=>{n.clearSquare(S,Z),e(5,n)},I=()=>{n.clearAllPieces(),e(5,n)},H=(S,Z)=>{n.setPiece(S,Z),e(5,n)},U=(S,Z)=>{var Pe;const de=(Pe=n.getPieceFromSquare(S))==null?void 0:Pe.name;!de||(Z!==void 0?n.setPiece(S,`${Z===Ee.WHITE?"w":"b"}${de[1]}`):n.setPiece(S,`${de[0]==="w"?"b":"w"}${de[1]}`),e(5,n))},X=(S,Z)=>{const de=Math.floor(S/n.state.board.size*8),Pe=Math.floor(Z/n.state.board.size*8),Ie=n.state.board.flipped?Math.abs(de-7):de,Je=n.state.board.flipped?Pe:Math.abs(Pe-7);return`${Object.keys(n.letters)[Ie]}${(Je+1).toString()}`},re=S=>{if(!n.state.board.mouseEvents)return;if(S.button===2){k();return}if(!n.state.movable.enabled)return;const Z=l.getBoundingClientRect(),de=S.clientX-Z.left,Pe=S.clientY-Z.top,Ie=X(de,Pe),Je=n.getPieceFromSquare(Ie);if(r("squareClick",{square:Ie,piece:Je?Je.name:void 0}),!n.state.selectable.enabled){k();return}if(n.state.selectable.selectedPiece!==void 0&&n.state.selectable.selectedPiece.square!==Ie&&!n.state.legal.enabled){_(n.state.selectable.selectedPiece.square+Ie),k();return}if(n.state.selectable.selectedPiece!==void 0&&n.state.selectable.selectedPiece.square!==Ie&&!G(n.state.selectable.selectedPiece.name)){n.state.legal.preMoves.enabled&&n.state.legal.preMoves.moves.includes(n.state.selectable.selectedPiece.square+Ie)&&Je!==void 0&&Je.name[0]!==n.state.selectable.selectedPiece.name[0]&&b(n.state.selectable.selectedPiece.square+Ie),k(!1);return}n.state.selectable.selectedPiece!==void 0&&n.state.selectable.selectedPiece.square!==Ie&&(Je===void 0||Je.name[0]!==n.state.selectable.selectedPiece.name[0])&&G(n.state.selectable.selectedPiece.name)&&(n.isPromotion(n.state.selectable.selectedPiece.square+Ie)&&n.state.legal.moves.includes(`${n.state.selectable.selectedPiece.square+Ie}q`)?T(n.state.selectable.selectedPiece.square+Ie):n.state.legal.moves.includes(n.state.selectable.selectedPiece.square+Ie)&&_(n.state.selectable.selectedPiece.square+Ie),k())},P=S=>{const Z=S.detail;n.state.legal.enabled?n.isPromotion(Z)&&n.state.legal.moves.includes(`${Z}q`)?T(Z):n.state.legal.moves.includes(Z)?_(Z):n.state.legal.preMoves.enabled&&n.state.legal.preMoves.moves.includes(Z)?b(Z):k():_(Z),h($.LEGAL),h($.PREMOVE),e(5,n)},V=(S,Z="MOVE")=>{if(n.updatePiecesWithFen(S),h(),g(),ie(),n.state.callbacks.getLastMove){const de=n.state.callbacks.getLastMove();e(5,n.state.legal.lastMove=de,n),Z!==!1&&(Z!=="MOVE"?pe(Z):n.isCastling(de)?pe("CASTLE"):pe(Z)),v(de)}else Z!==!1&&pe(Z);e(5,n)},ae=()=>n.getShortFEN(),Q=S=>{!S||n.state.board.size===S||(e(5,n.state.board.size=S,n),n.state.board.resizible.enabled&&document.documentElement.style.setProperty("--boardSize",`${n.state.board.size}px`))},R=S=>{var Z;return(Z=n.getPieceFromSquare(S))==null?void 0:Z.name},J=S=>{e(5,n.state.drawTools.tools=S,n)},le=S=>{e(5,n.state.drawTools.tools=n.state.drawTools.tools.filter(Z=>S.type&&Z.type!==S.type||S.from&&(Z.type==="arrow"&&Z.from!==S.from||Z.type==="circle"&&Z.square!==S.from)||S.to&&Z.type==="arrow"&&Z.to!==S.to||S.fixed!==void 0&&Z.fixed!==S.fixed),n)},_e=()=>{ie()},ne=S=>{S===!1?e(5,n.state.movable.enabled=!1,n):(e(5,n.state.movable.enabled=!0,n),e(5,n.state.movable.color=S===!0?Ee.BOTH:S,n))},ve=S=>{S.length<4||(e(5,n.state.legal.lastMove=S,n),v(S))},Re=S=>{e(5,n.state.legal.moves=S,n)},He=S=>{e(5,n.state.legal.preMoves.moves=S,n)},De=()=>n.state,Ne=S=>{e(5,n.state=S,n),h(),ie(),n.state.legal.enabled&&n.state.legal.lastMove!==""&&v(n.state.legal.lastMove),n.state.legal.enabled&&n.state.legal.preMoves.enabled&&n.state.legal.preMoves.curMove!==""&&v(n.state.legal.preMoves.curMove,!0,$.NEXTMOVE),n.state.selectable.enabled&&n.state.selectable.selectedPiece!==void 0&&(C(n.state.selectable.selectedPiece.square,$.SELECT),n.state.legal.enabled&&G(n.state.selectable.selectedPiece.name)&&j(n.state.legal.moves,n.state.selectable.selectedPiece.square),n.state.legal.enabled&&n.state.legal.preMoves.enabled&&!G(n.state.selectable.selectedPiece.name)&&j(n.state.legal.moves,n.state.selectable.selectedPiece.square,$.PREMOVE))},Le=S=>{S!==void 0&&(n.setConfigSettings(S),e(5,n),Ne(n.state))},Ke=S=>S.getConfig(),Ge=(S,Z)=>{const de=l.getBoundingClientRect();n.state.legal.enabled&&(G(Z.name)&&n.legalHover(X(S.detail.x-de.x,S.detail.y-de.y)),!G(Z.name)&&n.state.legal.preMoves.enabled&&n.preMoveHover(X(S.detail.x-de.x,S.detail.y-de.y))),e(5,n)},Xe=S=>{n.state.draggable.ghostPiece&&oe(S),h($.SELECT)},$e=S=>{const Z=n.getPieceFromSquare(p.substring(2,4));if(!Z)return;const de=Z.name[0]+S.detail.toUpperCase(),Pe=p+S.detail;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(Pe),n.setPiece(Z.square,de),e(5,n),pe("MOVE"),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(Pe),ie()};ts(()=>{ie(),n.state.callbacks.getLastMove&&v(n.state.callbacks.getLastMove()),n.state.board.resizible&&Q(n.state.board.size-n.state.board.size%8)});function it(S){st.call(this,s,S)}function wt(S){st.call(this,s,S)}const Mt=S=>{r("piececlick",{piece:S}),F(S.square)},et=S=>{r("startDragging",{piece:S}),Xe(S)},St=(S,Z)=>Ge(Z,S);function pt(S){st.call(this,s,S)}const yt=S=>{C(S.square,$.SELECT)},Ye=()=>{k()},Ct=S=>{C(S.detail.square,$.LEGALHOVER)};function Ze(S){o=S,e(7,o)}function at(S){ue[S?"unshift":"push"](()=>{f=S,e(9,f)})}const At=S=>r("drawCircle",{square:S.detail.square,color:S.detail.color}),Lt=S=>r("drawArrow",{move:S.detail.move,color:S.detail.color});function Ut(S){ue[S?"unshift":"push"](()=>{l=S,e(6,l)})}function Ht(){n.state.board.size=this.clientWidth,e(5,n)}function zt(S){ue[S?"unshift":"push"](()=>{u=S,e(8,u)})}return s.$$set=S=>{"config"in S&&e(16,i=S.config),"className"in S&&e(0,a=S.className)},s.$$.update=()=>{s.$$.dirty[0]&32&&Q(n.state.board.size-n.state.board.size%8)},[a,C,F,k,Q,n,l,o,u,f,r,re,P,Ge,Xe,$e,i,h,w,d,m,M,v,A,W,j,z,O,pe,_,b,T,L,I,H,U,X,V,ae,R,J,le,_e,ne,ve,Re,He,De,Ne,Le,Ke,it,wt,Mt,et,St,pt,yt,Ye,Ct,Ze,at,At,Lt,Ut,Ht,zt]}class xa extends Oe{constructor(t){super(),Fe(this,t,Ja,Za,qe,{config:16,className:0,clearAllSquares:17,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:18,removeCheckSquare:19,flipBoard:20,highlightManySquares:21,highlightMove:22,highlightMoves:23,highlightLegalMove:24,highlightLegalMoves:25,movePiece:26,removePiece:27,playMoveSound:28,makeMove:29,makeNextMove:30,makeMovePromotion:31,removeSquareHighlight:32,removeAllPiece:33,createPiece:34,changeColorOfPiece:35,getSquareFromCoords:36,setFEN:37,getShortFEN:38,setSize:4,getPieceFromSquare:39,setTools:40,removeTools:41,updateLegalState:42,setMovableColor:43,setLastMove:44,setLegalMoves:45,setPreMoves:46,getState:47,setState:48,setConfigSettings:49,getConfigFromState:50},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[17]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[18]}get removeCheckSquare(){return this.$$.ctx[19]}get flipBoard(){return this.$$.ctx[20]}get highlightManySquares(){return this.$$.ctx[21]}get highlightMove(){return this.$$.ctx[22]}get highlightMoves(){return this.$$.ctx[23]}get highlightLegalMove(){return this.$$.ctx[24]}get highlightLegalMoves(){return this.$$.ctx[25]}get movePiece(){return this.$$.ctx[26]}get removePiece(){return this.$$.ctx[27]}get playMoveSound(){return this.$$.ctx[28]}get makeMove(){return this.$$.ctx[29]}get makeNextMove(){return this.$$.ctx[30]}get makeMovePromotion(){return this.$$.ctx[31]}get removeSquareHighlight(){return this.$$.ctx[32]}get removeAllPiece(){return this.$$.ctx[33]}get createPiece(){return this.$$.ctx[34]}get changeColorOfPiece(){return this.$$.ctx[35]}get getSquareFromCoords(){return this.$$.ctx[36]}get setFEN(){return this.$$.ctx[37]}get getShortFEN(){return this.$$.ctx[38]}get setSize(){return this.$$.ctx[4]}get getPieceFromSquare(){return this.$$.ctx[39]}get setTools(){return this.$$.ctx[40]}get removeTools(){return this.$$.ctx[41]}get updateLegalState(){return this.$$.ctx[42]}get setMovableColor(){return this.$$.ctx[43]}get setLastMove(){return this.$$.ctx[44]}get setLegalMoves(){return this.$$.ctx[45]}get setPreMoves(){return this.$$.ctx[46]}get getState(){return this.$$.ctx[47]}get setState(){return this.$$.ctx[48]}get setConfigSettings(){return this.$$.ctx[49]}get getConfigFromState(){return this.$$.ctx[50]}}const Gs=["standard","darkBlue"],Qs=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function Xs(s){let t,e,i;return{c(){t=D("input"),this.h()},l(a){t=B(a,"INPUT",{type:!0,class:!0}),this.h()},h(){c(t,"type","checkbox"),c(t,"class","mr-1")},m(a,n){Y(a,t,n),t.checked=s[0],e||(i=[fe(t,"click",gn(s[6])),fe(t,"change",s[7])],e=!0)},p(a,n){n&1&&(t.checked=a[0])},d(a){a&&E(t),e=!1,xe(i)}}}function Ys(s){let t,e,i;return{c(){t=ze("svg"),e=ze("path"),this.h()},l(a){t=Ve(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=K(t);e=Ve(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),K(e).forEach(E),n.forEach(E),this.h()},h(){c(e,"fill-rule","evenodd"),c(e,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),c(e,"clip-rule","evenodd"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"viewBox","0 0 20 20"),c(t,"fill","currentColor"),c(t,"class",i="w-5 h-5 transition "+(s[1]?"rotate-180":"rotate-0"))},m(a,n){Y(a,t,n),y(t,e)},p(a,n){n&2&&i!==(i="w-5 h-5 transition "+(a[1]?"rotate-180":"rotate-0"))&&c(t,"class",i)},d(a){a&&E(t)}}}function Zs(s){let t,e,i;const a=s[5].default,n=un(a,s,s[4],null);return{c(){t=D("div"),n&&n.c(),this.h()},l(r){t=B(r,"DIV",{class:!0});var l=K(t);n&&n.l(l),l.forEach(E),this.h()},h(){c(t,"class","py-2 px-4")},m(r,l){Y(r,t,l),n&&n.m(t,null),i=!0},p(r,l){n&&n.p&&(!i||l&16)&&fn(n,a,r,r[4],i?cn(a,r[4],l,null):dn(r[4]),null)},i(r){i||(x(n,r),r&&nt(()=>{e||(e=ct(t,ht,{},!0)),e.run(1)}),i=!0)},o(r){se(n,r),r&&(e||(e=ct(t,ht,{},!1)),e.run(0)),i=!1},d(r){r&&E(t),n&&n.d(r),r&&e&&e.end()}}}function $a(s){let t,e,i,a,n,r,l,o,u,f,p,h,C,q,F=s[0]!==void 0&&Xs(s),k=s[3]&&Ys(s),w=s[1]&&Zs(s);return{c(){t=D("div"),e=D("button"),i=D("div"),F&&F.c(),a=ee(),n=D("span"),r=be(s[2]),o=ee(),k&&k.c(),p=ee(),w&&w.c(),this.h()},l(d){t=B(d,"DIV",{class:!0});var m=K(t);e=B(m,"BUTTON",{class:!0});var M=K(e);i=B(M,"DIV",{class:!0});var v=K(i);F&&F.l(v),a=te(v),n=B(v,"SPAN",{class:!0});var A=K(n);r=me(A,s[2]),A.forEach(E),v.forEach(E),o=te(M),k&&k.l(M),M.forEach(E),p=te(m),w&&w.l(m),m.forEach(E),this.h()},h(){c(n,"class",l=s[0]===void 0?"ml-[21px]":""),c(i,"class","flex gap-1"),c(e,"class",u="flex justify-between px-4 py-2 "+(s[3]?"transition hover:bg-slate-800/40":"")+" rounded"),e.disabled=f=!s[3],c(t,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(d,m){Y(d,t,m),y(t,e),y(e,i),F&&F.m(i,null),y(i,a),y(i,n),y(n,r),y(e,o),k&&k.m(e,null),y(t,p),w&&w.m(t,null),h=!0,C||(q=fe(e,"click",s[8]),C=!0)},p(d,[m]){d[0]!==void 0?F?F.p(d,m):(F=Xs(d),F.c(),F.m(i,a)):F&&(F.d(1),F=null),(!h||m&4)&&Bt(r,d[2]),(!h||m&1&&l!==(l=d[0]===void 0?"ml-[21px]":""))&&c(n,"class",l),d[3]?k?k.p(d,m):(k=Ys(d),k.c(),k.m(e,null)):k&&(k.d(1),k=null),(!h||m&8&&u!==(u="flex justify-between px-4 py-2 "+(d[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&c(e,"class",u),(!h||m&8&&f!==(f=!d[3]))&&(e.disabled=f),d[1]?w?(w.p(d,m),m&2&&x(w,1)):(w=Zs(d),w.c(),x(w,1),w.m(t,null)):w&&(Be(),se(w,1,1,()=>{w=null}),Ue())},i(d){h||(x(w),h=!0)},o(d){se(w),h=!1},d(d){d&&E(t),F&&F.d(),k&&k.d(),w&&w.d(),C=!1,q()}}}function er(s,t,e){let{$$slots:i={},$$scope:a}=t,{name:n="board"}=t,{enabled:r=void 0}=t,{showExpand:l=!0}=t,{expanded:o=!1}=t;function u(h){st.call(this,s,h)}function f(){r=this.checked,e(0,r)}const p=()=>{e(1,o=!o)};return s.$$set=h=>{"name"in h&&e(2,n=h.name),"enabled"in h&&e(0,r=h.enabled),"showExpand"in h&&e(3,l=h.showExpand),"expanded"in h&&e(1,o=h.expanded),"$$scope"in h&&e(4,a=h.$$scope)},[r,o,n,l,a,i,u,f,p]}class gt extends Oe{constructor(t){super(),Fe(this,t,er,$a,qe,{name:2,enabled:0,showExpand:3,expanded:1})}}function Js(s,t,e){const i=s.slice();return i[23]=t[e],i}function xs(s){let t,e=s[23]+"",i;return{c(){t=D("option"),i=be(e),this.h()},l(a){t=B(a,"OPTION",{});var n=K(t);i=me(n,e),n.forEach(E),this.h()},h(){t.__value=s[23],t.value=t.__value},m(a,n){Y(a,t,n),y(t,i)},p:Te,d(a){a&&E(t)}}}function $s(s){let t,e,i,a,n,r,l,o,u,f,p,h,C,q,F,k;return{c(){t=D("div"),e=D("div"),i=D("input"),a=ee(),n=D("label"),r=be("shadow"),l=ee(),o=D("div"),u=D("input"),f=ee(),p=D("label"),h=be("border-radius (rem)"),this.h()},l(w){t=B(w,"DIV",{class:!0});var d=K(t);e=B(d,"DIV",{class:!0});var m=K(e);i=B(m,"INPUT",{id:!0,type:!0,class:!0}),a=te(m),n=B(m,"LABEL",{for:!0,class:!0});var M=K(n);r=me(M,"shadow"),M.forEach(E),m.forEach(E),l=te(d),o=B(d,"DIV",{class:!0});var v=K(o);u=B(v,"INPUT",{id:!0,type:!0,class:!0,min:!0,max:!0}),f=te(v),p=B(v,"LABEL",{for:!0,class:!0});var A=K(p);h=me(A,"border-radius (rem)"),A.forEach(E),v.forEach(E),d.forEach(E),this.h()},h(){c(i,"id","shadow"),c(i,"type","checkbox"),c(i,"class","svelte-lnr7xr"),c(n,"for","shadow"),c(n,"class","select-none"),c(e,"class","flex gap-2 mb-2"),c(u,"id","borderRadius"),c(u,"type","number"),c(u,"class","w-16 svelte-lnr7xr"),c(u,"min",0),c(u,"max",1),c(p,"for","borderRadius"),c(p,"class","select-none whitespace-nowrap"),c(o,"class","flex gap-2 mb-2"),c(t,"class","pl-2 pr-4 flex-col")},m(w,d){Y(w,t,d),y(t,e),y(e,i),i.checked=s[4],y(e,a),y(e,n),y(n,r),y(t,l),y(t,o),y(o,u),ut(u,s[10]),y(o,f),y(o,p),y(p,h),q=!0,F||(k=[fe(i,"change",s[18]),fe(u,"input",s[19])],F=!0)},p(w,d){d&16&&(i.checked=w[4]),d&1024&&ft(u.value)!==w[10]&&ut(u,w[10])},i(w){q||(w&&nt(()=>{C||(C=ct(t,ht,{},!0)),C.run(1)}),q=!0)},o(w){w&&(C||(C=ct(t,ht,{},!1)),C.run(0)),q=!1},d(w){w&&E(t),w&&C&&C.end(),F=!1,xe(k)}}}function en(s){let t,e,i,a,n,r,l,o,u,f,p,h,C,q,F,k;return{c(){t=D("div"),e=D("div"),i=D("input"),a=ee(),n=D("label"),r=be("min"),l=ee(),o=D("div"),u=D("input"),f=ee(),p=D("label"),h=be("max"),this.h()},l(w){t=B(w,"DIV",{class:!0});var d=K(t);e=B(d,"DIV",{class:!0});var m=K(e);i=B(m,"INPUT",{id:!0,type:!0,class:!0}),a=te(m),n=B(m,"LABEL",{for:!0,class:!0});var M=K(n);r=me(M,"min"),M.forEach(E),m.forEach(E),l=te(d),o=B(d,"DIV",{class:!0});var v=K(o);u=B(v,"INPUT",{id:!0,type:!0,class:!0}),f=te(v),p=B(v,"LABEL",{for:!0,class:!0});var A=K(p);h=me(A,"max"),A.forEach(E),v.forEach(E),d.forEach(E),this.h()},h(){c(i,"id","resizibleMin"),c(i,"type","number"),c(i,"class","w-16 svelte-lnr7xr"),c(n,"for","resizibleMin"),c(n,"class","select-none"),c(e,"class","flex gap-2 mb-2"),c(u,"id","resizibleMax"),c(u,"type","number"),c(u,"class","w-16 svelte-lnr7xr"),c(p,"for","resizibleMax"),c(p,"class","select-none"),c(o,"class","flex gap-2"),c(t,"class","pl-2 pr-4 flex-col")},m(w,d){Y(w,t,d),y(t,e),y(e,i),ut(i,s[6]),y(e,a),y(e,n),y(n,r),y(t,l),y(t,o),y(o,u),ut(u,s[7]),y(o,f),y(o,p),y(p,h),q=!0,F||(k=[fe(i,"input",s[21]),fe(u,"input",s[22])],F=!0)},p(w,d){d&64&&ft(i.value)!==w[6]&&ut(i,w[6]),d&128&&ft(u.value)!==w[7]&&ut(u,w[7])},i(w){q||(w&&nt(()=>{C||(C=ct(t,ht,{},!0)),C.run(1)}),q=!0)},o(w){w&&(C||(C=ct(t,ht,{},!1)),C.run(0)),q=!1},d(w){w&&E(t),w&&C&&C.end(),F=!1,xe(k)}}}function tr(s){let t,e,i,a,n,r,l,o,u,f,p,h,C,q,F,k,w,d,m,M,v,A,W,j,z,O,G,ie,pe,oe,g,_,b,T,L,I,H,U,X,re,P=Gs,V=[];for(let R=0;R<P.length;R+=1)V[R]=xs(Js(s,P,R));let ae=s[11]&&$s(s),Q=s[5]&&en(s);return{c(){t=D("div"),e=D("select");for(let R=0;R<V.length;R+=1)V[R].c();i=ee(),a=D("label"),n=be("board theme"),r=ee(),l=D("div"),o=D("input"),u=ee(),f=D("label"),p=be("mouseEvents"),h=ee(),C=D("div"),q=D("input"),F=ee(),k=D("label"),w=be("notation"),d=ee(),m=D("div"),M=D("input"),v=ee(),A=D("label"),W=be("flipped"),j=ee(),z=D("div"),O=D("input"),G=ee(),ie=D("label"),pe=be("style"),oe=ee(),ae&&ae.c(),g=ee(),_=D("div"),b=D("input"),T=ee(),L=D("label"),I=be("resizible"),H=ee(),Q&&Q.c(),U=Ce(),this.h()},l(R){t=B(R,"DIV",{class:!0});var J=K(t);e=B(J,"SELECT",{class:!0});var le=K(e);for(let $e=0;$e<V.length;$e+=1)V[$e].l(le);le.forEach(E),i=te(J),a=B(J,"LABEL",{for:!0,class:!0});var _e=K(a);n=me(_e,"board theme"),_e.forEach(E),J.forEach(E),r=te(R),l=B(R,"DIV",{class:!0});var ne=K(l);o=B(ne,"INPUT",{id:!0,type:!0,class:!0}),u=te(ne),f=B(ne,"LABEL",{for:!0,class:!0});var ve=K(f);p=me(ve,"mouseEvents"),ve.forEach(E),ne.forEach(E),h=te(R),C=B(R,"DIV",{class:!0});var Re=K(C);q=B(Re,"INPUT",{id:!0,type:!0,class:!0}),F=te(Re),k=B(Re,"LABEL",{for:!0,class:!0});var He=K(k);w=me(He,"notation"),He.forEach(E),Re.forEach(E),d=te(R),m=B(R,"DIV",{class:!0});var De=K(m);M=B(De,"INPUT",{id:!0,type:!0,class:!0}),v=te(De),A=B(De,"LABEL",{for:!0,class:!0});var Ne=K(A);W=me(Ne,"flipped"),Ne.forEach(E),De.forEach(E),j=te(R),z=B(R,"DIV",{});var Le=K(z);O=B(Le,"INPUT",{id:!0,type:!0,class:!0}),G=te(Le),ie=B(Le,"LABEL",{for:!0,class:!0});var Ke=K(ie);pe=me(Ke,"style"),Ke.forEach(E),Le.forEach(E),oe=te(R),ae&&ae.l(R),g=te(R),_=B(R,"DIV",{class:!0});var Ge=K(_);b=B(Ge,"INPUT",{id:!0,type:!0,class:!0}),T=te(Ge),L=B(Ge,"LABEL",{for:!0,class:!0});var Xe=K(L);I=me(Xe,"resizible"),Xe.forEach(E),Ge.forEach(E),H=te(R),Q&&Q.l(R),U=Ce(),this.h()},h(){c(e,"class","svelte-lnr7xr"),s[0]===void 0&&nt(()=>s[13].call(e)),c(a,"for","boardTheme"),c(a,"class","select-none"),c(t,"class","mb-2"),c(o,"id","mouseEvents"),c(o,"type","checkbox"),c(o,"class","svelte-lnr7xr"),c(f,"for","mouseEvents"),c(f,"class","select-none"),c(l,"class","mb-2"),c(q,"id","notation"),c(q,"type","checkbox"),c(q,"class","svelte-lnr7xr"),c(k,"for","notation"),c(k,"class","select-none"),c(C,"class","mb-2"),c(M,"id","flipped"),c(M,"type","checkbox"),c(M,"class","svelte-lnr7xr"),c(A,"for","flipped"),c(A,"class","select-none"),c(m,"class","mb-2"),c(O,"id","styleEnabled"),c(O,"type","checkbox"),c(O,"class","svelte-lnr7xr"),c(ie,"for","styleEnabled"),c(ie,"class","select-none"),c(b,"id","resizibleEnabled"),c(b,"type","checkbox"),c(b,"class","svelte-lnr7xr"),c(L,"for","resizibleEnabled"),c(L,"class","select-none"),c(_,"class","mt-2 mb-1")},m(R,J){Y(R,t,J),y(t,e);for(let le=0;le<V.length;le+=1)V[le].m(e,null);kt(e,s[0]),y(t,i),y(t,a),y(a,n),Y(R,r,J),Y(R,l,J),y(l,o),o.checked=s[1],y(l,u),y(l,f),y(f,p),Y(R,h,J),Y(R,C,J),y(C,q),q.checked=s[2],y(C,F),y(C,k),y(k,w),Y(R,d,J),Y(R,m,J),y(m,M),M.checked=s[3],y(m,v),y(m,A),y(A,W),Y(R,j,J),Y(R,z,J),y(z,O),O.checked=s[11],y(z,G),y(z,ie),y(ie,pe),Y(R,oe,J),ae&&ae.m(R,J),Y(R,g,J),Y(R,_,J),y(_,b),b.checked=s[5],y(_,T),y(_,L),y(L,I),Y(R,H,J),Q&&Q.m(R,J),Y(R,U,J),X||(re=[fe(e,"change",s[13]),fe(o,"change",s[14]),fe(q,"change",s[15]),fe(M,"change",s[16]),fe(O,"change",s[17]),fe(b,"change",s[20])],X=!0)},p(R,J){if(J&0){P=Gs;let le;for(le=0;le<P.length;le+=1){const _e=Js(R,P,le);V[le]?V[le].p(_e,J):(V[le]=xs(_e),V[le].c(),V[le].m(e,null))}for(;le<V.length;le+=1)V[le].d(1);V.length=P.length}J&1&&kt(e,R[0]),J&2&&(o.checked=R[1]),J&4&&(q.checked=R[2]),J&8&&(M.checked=R[3]),J&2048&&(O.checked=R[11]),R[11]?ae?(ae.p(R,J),J&2048&&x(ae,1)):(ae=$s(R),ae.c(),x(ae,1),ae.m(g.parentNode,g)):ae&&(Be(),se(ae,1,1,()=>{ae=null}),Ue()),J&32&&(b.checked=R[5]),R[5]?Q?(Q.p(R,J),J&32&&x(Q,1)):(Q=en(R),Q.c(),x(Q,1),Q.m(U.parentNode,U)):Q&&(Be(),se(Q,1,1,()=>{Q=null}),Ue())},d(R){R&&E(t),dt(V,R),R&&E(r),R&&E(l),R&&E(h),R&&E(C),R&&E(d),R&&E(m),R&&E(j),R&&E(z),R&&E(oe),ae&&ae.d(R),R&&E(g),R&&E(_),R&&E(H),Q&&Q.d(R),R&&E(U),X=!1,xe(re)}}}function sr(s){let t,e;return t=new gt({props:{name:s[8],expanded:s[9],$$slots:{default:[tr]},$$scope:{ctx:s}}}),{c(){ke(t.$$.fragment)},l(i){we(t.$$.fragment,i)},m(i,a){Me(t,i,a),e=!0},p(i,[a]){const n={};a&256&&(n.name=i[8]),a&512&&(n.expanded=i[9]),a&67112191&&(n.$$scope={dirty:a,ctx:i}),t.$set(n)},i(i){e||(x(t.$$.fragment,i),e=!0)},o(i){se(t.$$.fragment,i),e=!1},d(i){Se(t,i)}}}function nr(s,t,e){let{name:i="Board"}=t,{boardTheme:a}=t,{mouseEvents:n}=t,{notation:r}=t,{flipped:l}=t,{shadow:o}=t,{borderRadius:u="0px"}=t,{resizible:f=!1}=t,{min:p=0}=t,{max:h=0}=t,{expanded:C=!1}=t,q=!0,F=parseFloat(u.endsWith("px")?u.slice(0,-2):u.slice(0,-3));function k(){a=ss(this),e(0,a)}function w(){n=this.checked,e(1,n)}function d(){r=this.checked,e(2,r)}function m(){l=this.checked,e(3,l)}function M(){q=this.checked,e(11,q)}function v(){o=this.checked,e(4,o)}function A(){F=ft(this.value),e(10,F)}function W(){f=this.checked,e(5,f)}function j(){p=ft(this.value),e(6,p)}function z(){h=ft(this.value),e(7,h)}return s.$$set=O=>{"name"in O&&e(8,i=O.name),"boardTheme"in O&&e(0,a=O.boardTheme),"mouseEvents"in O&&e(1,n=O.mouseEvents),"notation"in O&&e(2,r=O.notation),"flipped"in O&&e(3,l=O.flipped),"shadow"in O&&e(4,o=O.shadow),"borderRadius"in O&&e(12,u=O.borderRadius),"resizible"in O&&e(5,f=O.resizible),"min"in O&&e(6,p=O.min),"max"in O&&e(7,h=O.max),"expanded"in O&&e(9,C=O.expanded)},s.$$.update=()=>{s.$$.dirty&1024&&e(12,u=`${F!=null?F:0}rem`)},[a,n,r,l,o,f,p,h,i,C,F,q,u,k,w,d,m,M,v,A,W,j,z]}class ir extends Oe{constructor(t){super(),Fe(this,t,nr,sr,qe,{name:8,boardTheme:0,mouseEvents:1,notation:2,flipped:3,shadow:4,borderRadius:12,resizible:5,min:6,max:7,expanded:9})}}function ar(s){let t,e,i,a,n,r,l,o,u,f;return{c(){t=D("div"),e=D("select"),i=D("option"),a=be("Both"),n=D("option"),r=be("White"),l=D("option"),o=be("Black"),this.h()},l(p){t=B(p,"DIV",{});var h=K(t);e=B(h,"SELECT",{class:!0});var C=K(e);i=B(C,"OPTION",{});var q=K(i);a=me(q,"Both"),q.forEach(E),n=B(C,"OPTION",{});var F=K(n);r=me(F,"White"),F.forEach(E),l=B(C,"OPTION",{});var k=K(l);o=me(k,"Black"),k.forEach(E),C.forEach(E),h.forEach(E),this.h()},h(){i.__value=Ee.BOTH,i.value=i.__value,n.__value=Ee.WHITE,n.value=n.__value,l.__value=Ee.BLACK,l.value=l.__value,c(e,"class","svelte-xrxnwg"),s[1]===void 0&&nt(()=>s[4].call(e))},m(p,h){Y(p,t,h),y(t,e),y(e,i),y(i,a),y(e,n),y(n,r),y(e,l),y(l,o),kt(e,s[1]),u||(f=fe(e,"change",s[4]),u=!0)},p(p,h){h&2&&kt(e,p[1])},d(p){p&&E(t),u=!1,f()}}}function rr(s){let t,e,i;function a(r){s[5](r)}let n={name:s[2],expanded:s[3],$$slots:{default:[ar]},$$scope:{ctx:s}};return s[0]!==void 0&&(n.enabled=s[0]),t=new gt({props:n}),ue.push(()=>he(t,"enabled",a)),{c(){ke(t.$$.fragment)},l(r){we(t.$$.fragment,r)},m(r,l){Me(t,r,l),i=!0},p(r,[l]){const o={};l&4&&(o.name=r[2]),l&8&&(o.expanded=r[3]),l&66&&(o.$$scope={dirty:l,ctx:r}),!e&&l&1&&(e=!0,o.enabled=r[0],ge(()=>e=!1)),t.$set(o)},i(r){i||(x(t.$$.fragment,r),i=!0)},o(r){se(t.$$.fragment,r),i=!1},d(r){Se(t,r)}}}function lr(s,t,e){let{name:i="Movable"}=t,{enabled:a=!1}=t,{color:n}=t,{expanded:r=!1}=t;function l(){n=ss(this),e(1,n)}function o(u){a=u,e(0,a)}return s.$$set=u=>{"name"in u&&e(2,i=u.name),"enabled"in u&&e(0,a=u.enabled),"color"in u&&e(1,n=u.color),"expanded"in u&&e(3,r=u.expanded)},[a,n,i,r,l,o]}class or extends Oe{constructor(t){super(),Fe(this,t,lr,rr,qe,{name:2,enabled:0,color:1,expanded:3})}}function tn(s,t,e){const i=s.slice();return i[12]=t[e],i}function sn(s){let t,e,i,a,n,r,l,o,u,f,p,h,C,q,F,k,w=Qs,d=[];for(let m=0;m<w.length;m+=1)d[m]=nn(tn(s,w,m));return{c(){t=D("div"),e=D("div"),i=D("input"),a=ee(),n=D("label"),r=be("duration"),l=ee(),o=D("div"),u=D("select");for(let m=0;m<d.length;m+=1)d[m].c();f=ee(),p=D("label"),h=be("easing"),this.h()},l(m){t=B(m,"DIV",{class:!0});var M=K(t);e=B(M,"DIV",{class:!0});var v=K(e);i=B(v,"INPUT",{id:!0,type:!0,class:!0}),a=te(v),n=B(v,"LABEL",{for:!0,class:!0});var A=K(n);r=me(A,"duration"),A.forEach(E),v.forEach(E),l=te(M),o=B(M,"DIV",{class:!0});var W=K(o);u=B(W,"SELECT",{id:!0,class:!0});var j=K(u);for(let O=0;O<d.length;O+=1)d[O].l(j);j.forEach(E),f=te(W),p=B(W,"LABEL",{for:!0,class:!0});var z=K(p);h=me(z,"easing"),z.forEach(E),W.forEach(E),M.forEach(E),this.h()},h(){c(i,"id","transitionDuration"),c(i,"type","number"),c(i,"class","w-16 svelte-1qpp6cx"),c(n,"for","transitionDuration"),c(n,"class","select-none"),c(e,"class","flex gap-2 mb-2"),c(u,"id","easingFuncs"),c(u,"class","svelte-1qpp6cx"),s[4]===void 0&&nt(()=>s[10].call(u)),c(p,"for","easingFuncs"),c(p,"class","select-none"),c(o,"class","flex gap-2"),c(t,"class","pl-2 pr-4 flex-col")},m(m,M){Y(m,t,M),y(t,e),y(e,i),ut(i,s[3]),y(e,a),y(e,n),y(n,r),y(t,l),y(t,o),y(o,u);for(let v=0;v<d.length;v+=1)d[v].m(u,null);kt(u,s[4]),y(o,f),y(o,p),y(p,h),q=!0,F||(k=[fe(i,"input",s[9]),fe(u,"change",s[10])],F=!0)},p(m,M){if(M&8&&ft(i.value)!==m[3]&&ut(i,m[3]),M&0){w=Qs;let v;for(v=0;v<w.length;v+=1){const A=tn(m,w,v);d[v]?d[v].p(A,M):(d[v]=nn(A),d[v].c(),d[v].m(u,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=w.length}M&16&&kt(u,m[4])},i(m){q||(m&&nt(()=>{C||(C=ct(t,ht,{},!0)),C.run(1)}),q=!0)},o(m){m&&(C||(C=ct(t,ht,{},!1)),C.run(0)),q=!1},d(m){m&&E(t),dt(d,m),m&&C&&C.end(),F=!1,xe(k)}}}function nn(s){let t,e=s[12]+"",i;return{c(){t=D("option"),i=be(e),this.h()},l(a){t=B(a,"OPTION",{});var n=K(t);i=me(n,e),n.forEach(E),this.h()},h(){t.__value=s[12],t.value=t.__value},m(a,n){Y(a,t,n),y(t,i)},p:Te,d(a){a&&E(t)}}}function ur(s){let t,e,i,a,n,r,l,o,u,f,p,h,C,q,F,k=s[2]&&sn(s);return{c(){t=D("div"),e=D("input"),i=ee(),a=D("label"),n=be("ghost piece"),r=ee(),l=D("div"),o=D("input"),u=ee(),f=D("label"),p=be("transition"),h=ee(),k&&k.c(),C=Ce(),this.h()},l(w){t=B(w,"DIV",{class:!0});var d=K(t);e=B(d,"INPUT",{id:!0,type:!0,class:!0}),i=te(d),a=B(d,"LABEL",{for:!0,class:!0});var m=K(a);n=me(m,"ghost piece"),m.forEach(E),d.forEach(E),r=te(w),l=B(w,"DIV",{class:!0});var M=K(l);o=B(M,"INPUT",{id:!0,type:!0,class:!0}),u=te(M),f=B(M,"LABEL",{for:!0,class:!0});var v=K(f);p=me(v,"transition"),v.forEach(E),M.forEach(E),h=te(w),k&&k.l(w),C=Ce(),this.h()},h(){c(e,"id","ghostPiece"),c(e,"type","checkbox"),c(e,"class","svelte-1qpp6cx"),c(a,"for","ghostPiece"),c(a,"class","select-none"),c(t,"class","mb-2"),c(o,"id","draggableEnabled"),c(o,"type","checkbox"),c(o,"class","svelte-1qpp6cx"),c(f,"for","draggableEnabled"),c(f,"class","select-none"),c(l,"class","mb-2")},m(w,d){Y(w,t,d),y(t,e),e.checked=s[1],y(t,i),y(t,a),y(a,n),Y(w,r,d),Y(w,l,d),y(l,o),o.checked=s[2],y(l,u),y(l,f),y(f,p),Y(w,h,d),k&&k.m(w,d),Y(w,C,d),q||(F=[fe(e,"change",s[7]),fe(o,"change",s[8])],q=!0)},p(w,d){d&2&&(e.checked=w[1]),d&4&&(o.checked=w[2]),w[2]?k?(k.p(w,d),d&4&&x(k,1)):(k=sn(w),k.c(),x(k,1),k.m(C.parentNode,C)):k&&(Be(),se(k,1,1,()=>{k=null}),Ue())},d(w){w&&E(t),w&&E(r),w&&E(l),w&&E(h),k&&k.d(w),w&&E(C),q=!1,xe(F)}}}function fr(s){let t,e,i;function a(r){s[11](r)}let n={name:s[5],expanded:s[6],$$slots:{default:[ur]},$$scope:{ctx:s}};return s[0]!==void 0&&(n.enabled=s[0]),t=new gt({props:n}),ue.push(()=>he(t,"enabled",a)),{c(){ke(t.$$.fragment)},l(r){we(t.$$.fragment,r)},m(r,l){Me(t,r,l),i=!0},p(r,[l]){const o={};l&32&&(o.name=r[5]),l&64&&(o.expanded=r[6]),l&32798&&(o.$$scope={dirty:l,ctx:r}),!e&&l&1&&(e=!0,o.enabled=r[0],ge(()=>e=!1)),t.$set(o)},i(r){i||(x(t.$$.fragment,r),i=!0)},o(r){se(t.$$.fragment,r),i=!1},d(r){Se(t,r)}}}function dr(s,t,e){let{name:i="Draggable"}=t,{enabled:a=!1}=t,{ghostPiece:n=!1}=t,{transition:r=!1}=t,{duration:l=120}=t,{easing:o="easeInOut"}=t,{expanded:u=!1}=t;function f(){n=this.checked,e(1,n)}function p(){r=this.checked,e(2,r)}function h(){l=ft(this.value),e(3,l)}function C(){o=ss(this),e(4,o)}function q(F){a=F,e(0,a)}return s.$$set=F=>{"name"in F&&e(5,i=F.name),"enabled"in F&&e(0,a=F.enabled),"ghostPiece"in F&&e(1,n=F.ghostPiece),"transition"in F&&e(2,r=F.transition),"duration"in F&&e(3,l=F.duration),"easing"in F&&e(4,o=F.easing),"expanded"in F&&e(6,u=F.expanded)},[a,n,r,l,o,i,u,f,p,h,C,q]}class cr extends Oe{constructor(t){super(),Fe(this,t,dr,fr,qe,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function an(s,t,e){const i=s.slice();return i[7]=t[e],i[8]=t,i[9]=e,i}function rn(s){let t,e,i,a,n=s[7]+"",r,l,o,u;function f(){s[5].call(e,s[7])}return{c(){t=D("div"),e=D("input"),i=ee(),a=D("label"),r=be(n),l=ee(),this.h()},l(p){t=B(p,"DIV",{class:!0});var h=K(t);e=B(h,"INPUT",{id:!0,type:!0}),i=te(h),a=B(h,"LABEL",{for:!0,class:!0});var C=K(a);r=me(C,n),C.forEach(E),l=te(h),h.forEach(E),this.h()},h(){c(e,"id",s[7]+"Enabled"),c(e,"type","checkbox"),c(a,"for",s[7]+"Enabled"),c(a,"class","select-none"),c(t,"class","mb-2")},m(p,h){Y(p,t,h),y(t,e),e.checked=s[1][s[7]],y(t,i),y(t,a),y(a,r),y(t,l),o||(u=fe(e,"change",f),o=!0)},p(p,h){s=p,h&18&&(e.checked=s[1][s[7]])},d(p){p&&E(t),o=!1,u()}}}function hr(s){let t,e=s[4],i=[];for(let a=0;a<e.length;a+=1)i[a]=rn(an(s,e,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();t=Ce()},l(a){for(let n=0;n<i.length;n+=1)i[n].l(a);t=Ce()},m(a,n){for(let r=0;r<i.length;r+=1)i[r].m(a,n);Y(a,t,n)},p(a,n){if(n&18){e=a[4];let r;for(r=0;r<e.length;r+=1){const l=an(a,e,r);i[r]?i[r].p(l,n):(i[r]=rn(l),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=e.length}},d(a){dt(i,a),a&&E(t)}}}function gr(s){let t,e,i;function a(r){s[6](r)}let n={name:s[2],expanded:s[3],$$slots:{default:[hr]},$$scope:{ctx:s}};return s[0]!==void 0&&(n.enabled=s[0]),t=new gt({props:n}),ue.push(()=>he(t,"enabled",a)),{c(){ke(t.$$.fragment)},l(r){we(t.$$.fragment,r)},m(r,l){Me(t,r,l),i=!0},p(r,[l]){const o={};l&4&&(o.name=r[2]),l&8&&(o.expanded=r[3]),l&1026&&(o.$$scope={dirty:l,ctx:r}),!e&&l&1&&(e=!0,o.enabled=r[0],ge(()=>e=!1)),t.$set(o)},i(r){i||(x(t.$$.fragment,r),i=!0)},o(r){se(t.$$.fragment,r),i=!1},d(r){Se(t,r)}}}function br(s,t,e){let{name:i="Highlight"}=t,{enabled:a=!1}=t,{settings:n}=t;const r=["select","legal","move","preMove","nextMove","check"];let{expanded:l=!1}=t;function o(f){n[f]=this.checked,e(1,n)}function u(f){a=f,e(0,a)}return s.$$set=f=>{"name"in f&&e(2,i=f.name),"enabled"in f&&e(0,a=f.enabled),"settings"in f&&e(1,n=f.settings),"expanded"in f&&e(3,l=f.expanded)},[a,n,i,l,r,o,u]}class mr extends Oe{constructor(t){super(),Fe(this,t,br,gr,qe,{name:2,enabled:0,settings:1,expanded:3})}}function pr(s){let t,e,i,a,n,r,l,o,u,f,p,h,C;return{c(){t=D("div"),e=D("input"),i=ee(),a=D("label"),n=be("L shape knight move"),r=ee(),l=D("div"),o=D("input"),u=ee(),f=D("label"),p=be("only chess move"),this.h()},l(q){t=B(q,"DIV",{class:!0});var F=K(t);e=B(F,"INPUT",{id:!0,type:!0}),i=te(F),a=B(F,"LABEL",{for:!0,class:!0});var k=K(a);n=me(k,"L shape knight move"),k.forEach(E),F.forEach(E),r=te(q),l=B(q,"DIV",{class:!0});var w=K(l);o=B(w,"INPUT",{id:!0,type:!0}),u=te(w),f=B(w,"LABEL",{for:!0,class:!0});var d=K(f);p=me(d,"only chess move"),d.forEach(E),w.forEach(E),this.h()},h(){c(e,"id","knightLShapeMoveEnabled"),c(e,"type","checkbox"),c(a,"for","knightLShapeMoveEnabled"),c(a,"class","select-none"),c(t,"class","mb-2"),c(o,"id","onlyChessMoveEnabled"),c(o,"type","checkbox"),c(f,"for","onlyChessMoveEnabled"),c(f,"class","select-none"),c(l,"class","mb-2")},m(q,F){Y(q,t,F),y(t,e),e.checked=s[1],y(t,i),y(t,a),y(a,n),Y(q,r,F),Y(q,l,F),y(l,o),o.checked=s[2],y(l,u),y(l,f),y(f,p),h||(C=[fe(e,"change",s[5]),fe(o,"change",s[6])],h=!0)},p(q,F){F&2&&(e.checked=q[1]),F&4&&(o.checked=q[2])},d(q){q&&E(t),q&&E(r),q&&E(l),h=!1,xe(C)}}}function _r(s){let t,e,i;function a(r){s[7](r)}let n={name:s[3],expanded:s[4],$$slots:{default:[pr]},$$scope:{ctx:s}};return s[0]!==void 0&&(n.enabled=s[0]),t=new gt({props:n}),ue.push(()=>he(t,"enabled",a)),{c(){ke(t.$$.fragment)},l(r){we(t.$$.fragment,r)},m(r,l){Me(t,r,l),i=!0},p(r,[l]){const o={};l&8&&(o.name=r[3]),l&16&&(o.expanded=r[4]),l&262&&(o.$$scope={dirty:l,ctx:r}),!e&&l&1&&(e=!0,o.enabled=r[0],ge(()=>e=!1)),t.$set(o)},i(r){i||(x(t.$$.fragment,r),i=!0)},o(r){se(t.$$.fragment,r),i=!1},d(r){Se(t,r)}}}function vr(s,t,e){let{name:i="DrawTools"}=t,{enabled:a=!1}=t,{knightLShape:n=!1}=t,{onlyChessMove:r=!1}=t,{expanded:l=!1}=t;function o(){n=this.checked,e(1,n)}function u(){r=this.checked,e(2,r)}function f(p){a=p,e(0,a)}return s.$$set=p=>{"name"in p&&e(3,i=p.name),"enabled"in p&&e(0,a=p.enabled),"knightLShape"in p&&e(1,n=p.knightLShape),"onlyChessMove"in p&&e(2,r=p.onlyChessMove),"expanded"in p&&e(4,l=p.expanded)},[a,n,r,i,l,o,u,f]}class Er extends Oe{constructor(t){super(),Fe(this,t,vr,_r,qe,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function ln(s,t,e){const i=s.slice();return i[7]=t[e],i[8]=t,i[9]=e,i}function on(s){let t,e,i,a,n=s[7].toLowerCase()+"",r,l,o,u;function f(){s[5].call(e,s[7])}return{c(){t=D("div"),e=D("input"),i=ee(),a=D("label"),r=be(n),l=ee(),this.h()},l(p){t=B(p,"DIV",{class:!0});var h=K(t);e=B(h,"INPUT",{id:!0,type:!0}),i=te(h),a=B(h,"LABEL",{for:!0,class:!0});var C=K(a);r=me(C,n),C.forEach(E),l=te(h),h.forEach(E),this.h()},h(){c(e,"id",s[7]+"Enabled"),c(e,"type","checkbox"),c(a,"for",s[7]+"Enabled"),c(a,"class","select-none"),c(t,"class","mb-2")},m(p,h){Y(p,t,h),y(t,e),e.checked=s[1][s[7]],y(t,i),y(t,a),y(a,r),y(t,l),o||(u=fe(e,"change",f),o=!0)},p(p,h){s=p,h&18&&(e.checked=s[1][s[7]])},d(p){p&&E(t),o=!1,u()}}}function kr(s){let t,e=s[4],i=[];for(let a=0;a<e.length;a+=1)i[a]=on(ln(s,e,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();t=Ce()},l(a){for(let n=0;n<i.length;n+=1)i[n].l(a);t=Ce()},m(a,n){for(let r=0;r<i.length;r+=1)i[r].m(a,n);Y(a,t,n)},p(a,n){if(n&18){e=a[4];let r;for(r=0;r<e.length;r+=1){const l=ln(a,e,r);i[r]?i[r].p(l,n):(i[r]=on(l),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=e.length}},d(a){dt(i,a),a&&E(t)}}}function wr(s){let t,e,i;function a(r){s[6](r)}let n={name:s[2],expanded:s[3],$$slots:{default:[kr]},$$scope:{ctx:s}};return s[0]!==void 0&&(n.enabled=s[0]),t=new gt({props:n}),ue.push(()=>he(t,"enabled",a)),{c(){ke(t.$$.fragment)},l(r){we(t.$$.fragment,r)},m(r,l){Me(t,r,l),i=!0},p(r,[l]){const o={};l&4&&(o.name=r[2]),l&8&&(o.expanded=r[3]),l&1026&&(o.$$scope={dirty:l,ctx:r}),!e&&l&1&&(e=!0,o.enabled=r[0],ge(()=>e=!1)),t.$set(o)},i(r){i||(x(t.$$.fragment,r),i=!0)},o(r){se(t.$$.fragment,r),i=!1},d(r){Se(t,r)}}}function Mr(s,t,e){let{name:i="Sounds"}=t,{enabled:a=!1}=t,{settings:n}=t;const r=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:l=!1}=t;function o(f){n[f]=this.checked,e(1,n)}function u(f){a=f,e(0,a)}return s.$$set=f=>{"name"in f&&e(2,i=f.name),"enabled"in f&&e(0,a=f.enabled),"settings"in f&&e(1,n=f.settings),"expanded"in f&&e(3,l=f.expanded)},[a,n,i,l,r,o,u]}class Sr extends Oe{constructor(t){super(),Fe(this,t,Mr,wr,qe,{name:2,enabled:0,settings:1,expanded:3})}}function yr(s){let t,e;return{c(){t=ze("svg"),e=ze("path"),this.h()},l(i){t=Ve(i,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=K(t);e=Ve(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),K(e).forEach(E),a.forEach(E),this.h()},h(){c(e,"stroke-linecap","round"),c(e,"stroke-linejoin","round"),c(e,"stroke-width","2"),c(e,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),ye(t,"transform","translate(1px, 0px)"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"class","h-5"),c(t,"fill","none"),c(t,"viewBox","0 0 24 24"),c(t,"aria-hidden","true"),c(t,"stroke","currentColor")},m(i,a){Y(i,t,a),y(t,e)},d(i){i&&E(t)}}}function Cr(s){let t,e;return{c(){t=ze("svg"),e=ze("path"),this.h()},l(i){t=Ve(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=K(t);e=Ve(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),K(e).forEach(E),a.forEach(E),this.h()},h(){c(e,"stroke-linecap","round"),c(e,"stroke-linejoin","round"),c(e,"stroke-width","2"),c(e,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"class","h-5 text-green-500"),c(t,"fill","none"),c(t,"viewBox","0 0 24 24"),c(t,"aria-hidden","true"),c(t,"stroke","currentColor")},m(i,a){Y(i,t,a),y(t,e)},d(i){i&&E(t)}}}function Ar(s){let t,e,i;function a(l,o){return l[1]?Cr:yr}let n=a(s),r=n(s);return{c(){t=D("button"),r.c(),this.h()},l(l){t=B(l,"BUTTON",{type:!0,class:!0});var o=K(t);r.l(o),o.forEach(E),this.h()},h(){c(t,"type","button"),c(t,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(l,o){Y(l,t,o),r.m(t,null),s[4](t),e||(i=fe(t,"click",s[2]),e=!0)},p(l,[o]){n!==(n=a(l))&&(r.d(1),r=n(l),r&&(r.c(),r.m(t,null)))},i:Te,o:Te,d(l){l&&E(t),r.d(),s[4](null),e=!1,i()}}}function Tr(s,t,e){let{copyText:i}=t,a,n=!1;function r(){navigator.clipboard.writeText(i),e(1,n=!0),setTimeout(()=>{e(1,n=!1)},2e3),a.setAttribute("data-cooltipz-dir","top"),a.setAttribute("aria-label","Copied!"),setTimeout(()=>{a.removeAttribute("aria-label"),a.removeAttribute("data-cooltipz-dir")},2e3)}function l(o){ue[o?"unshift":"push"](()=>{a=o,e(0,a)})}return s.$$set=o=>{"copyText"in o&&e(3,i=o.copyText)},[a,n,r,i,l]}class Pr extends Oe{constructor(t){super(),Fe(this,t,Tr,Ar,qe,{copyText:3})}}function Lr(s){let t,e,i,a,n,r,l;return{c(){t=D("div"),e=D("input"),i=ee(),a=D("label"),n=be("preMoves"),this.h()},l(o){t=B(o,"DIV",{});var u=K(t);e=B(u,"INPUT",{id:!0,type:!0}),i=te(u),a=B(u,"LABEL",{for:!0,class:!0});var f=K(a);n=me(f,"preMoves"),f.forEach(E),u.forEach(E),this.h()},h(){c(e,"id","preMovesEnabled"),c(e,"type","checkbox"),c(a,"for","preMovesEnabled"),c(a,"class","select-none")},m(o,u){Y(o,t,u),y(t,e),e.checked=s[1],y(t,i),y(t,a),y(a,n),r||(l=fe(e,"change",s[4]),r=!0)},p(o,u){u&2&&(e.checked=o[1])},d(o){o&&E(t),r=!1,l()}}}function Ir(s){let t,e,i;function a(r){s[5](r)}let n={name:s[2],expanded:s[3],$$slots:{default:[Lr]},$$scope:{ctx:s}};return s[0]!==void 0&&(n.enabled=s[0]),t=new gt({props:n}),ue.push(()=>he(t,"enabled",a)),{c(){ke(t.$$.fragment)},l(r){we(t.$$.fragment,r)},m(r,l){Me(t,r,l),i=!0},p(r,[l]){const o={};l&4&&(o.name=r[2]),l&8&&(o.expanded=r[3]),l&66&&(o.$$scope={dirty:l,ctx:r}),!e&&l&1&&(e=!0,o.enabled=r[0],ge(()=>e=!1)),t.$set(o)},i(r){i||(x(t.$$.fragment,r),i=!0)},o(r){se(t.$$.fragment,r),i=!1},d(r){Se(t,r)}}}function Or(s,t,e){let{name:i="Legal"}=t,{enabled:a=!1}=t,{preMovesEnabled:n=!1}=t,{expanded:r=!1}=t;function l(){n=this.checked,e(1,n)}function o(u){a=u,e(0,a)}return s.$$set=u=>{"name"in u&&e(2,i=u.name),"enabled"in u&&e(0,a=u.enabled),"preMovesEnabled"in u&&e(1,n=u.preMovesEnabled),"expanded"in u&&e(3,r=u.expanded)},[a,n,i,r,l,o]}class Fr extends Oe{constructor(t){super(),Fe(this,t,Or,Ir,qe,{name:2,enabled:0,preMovesEnabled:1,expanded:3})}}function qr(s){let t,e,i,a,n,r,l,o,u,f,p,h,C,q,F,k,w,d,m,M,v,A,W,j,z,O,G,ie,pe,oe,g,_,b,T,L,I,H,U,X,re,P,V,ae,Q,R,J,le,_e,ne,ve,Re,He,De,Ne,Le,Ke,Ge,Xe,$e,it,wt,Mt,et,St,pt,yt,Ye,Ct,Ze,at,At,Lt;function Ut(N){s[6](N)}function Ht(N){s[7](N)}function zt(N){s[8](N)}function S(N){s[9](N)}function Z(N){s[10](N)}function de(N){s[11](N)}function Pe(N){s[12](N)}function Ie(N){s[13](N)}function Je(N){s[14](N)}let Qe={expanded:!0};s[1].board.boardTheme!==void 0&&(Qe.boardTheme=s[1].board.boardTheme),s[1].board.mouseEvents!==void 0&&(Qe.mouseEvents=s[1].board.mouseEvents),s[1].board.notation!==void 0&&(Qe.notation=s[1].board.notation),s[1].board.flipped!==void 0&&(Qe.flipped=s[1].board.flipped),s[1].board.style.shadow!==void 0&&(Qe.shadow=s[1].board.style.shadow),s[1].board.style.borderRadius!==void 0&&(Qe.borderRadius=s[1].board.style.borderRadius),s[1].board.resizible.enabled!==void 0&&(Qe.resizible=s[1].board.resizible.enabled),s[1].board.resizible.min!==void 0&&(Qe.min=s[1].board.resizible.min),s[1].board.resizible.max!==void 0&&(Qe.max=s[1].board.resizible.max),r=new ir({props:Qe}),ue.push(()=>he(r,"boardTheme",Ut)),ue.push(()=>he(r,"mouseEvents",Ht)),ue.push(()=>he(r,"notation",zt)),ue.push(()=>he(r,"flipped",S)),ue.push(()=>he(r,"shadow",Z)),ue.push(()=>he(r,"borderRadius",de)),ue.push(()=>he(r,"resizible",Pe)),ue.push(()=>he(r,"min",Ie)),ue.push(()=>he(r,"max",Je));function Cn(N){s[15](N)}function An(N){s[16](N)}let Vt={expanded:!0};s[1].movable.enabled!==void 0&&(Vt.enabled=s[1].movable.enabled),s[1].movable.color!==void 0&&(Vt.color=s[1].movable.color),w=new or({props:Vt}),ue.push(()=>he(w,"enabled",Cn)),ue.push(()=>he(w,"color",An));function Tn(N){s[17](N)}function Pn(N){s[18](N)}function Ln(N){s[19](N)}function In(N){s[20](N)}function On(N){s[21](N)}let _t={};s[1].draggable.enabled!==void 0&&(_t.enabled=s[1].draggable.enabled),s[1].draggable.ghostPiece.enabled!==void 0&&(_t.ghostPiece=s[1].draggable.ghostPiece.enabled),s[1].draggable.transition.enabled!==void 0&&(_t.transition=s[1].draggable.transition.enabled),s[1].draggable.transition.settings.duration!==void 0&&(_t.duration=s[1].draggable.transition.settings.duration),s[1].draggable.transition.settings.easing!==void 0&&(_t.easing=s[1].draggable.transition.settings.easing),v=new cr({props:_t}),ue.push(()=>he(v,"enabled",Tn)),ue.push(()=>he(v,"ghostPiece",Pn)),ue.push(()=>he(v,"transition",Ln)),ue.push(()=>he(v,"duration",In)),ue.push(()=>he(v,"easing",On));function Fn(N){s[22](N)}let is={name:"Selectable",showExpand:!1};s[1].selectable.enabled!==void 0&&(is.enabled=s[1].selectable.enabled),ie=new gt({props:is}),ue.push(()=>he(ie,"enabled",Fn));function qn(N){s[23](N)}function Rn(N){s[24](N)}let Wt={expanded:!0};s[1].legal.enabled!==void 0&&(Wt.enabled=s[1].legal.enabled),s[1].legal.preMoves.enabled!==void 0&&(Wt.preMovesEnabled=s[1].legal.preMoves.enabled),g=new Fr({props:Wt}),ue.push(()=>he(g,"enabled",qn)),ue.push(()=>he(g,"preMovesEnabled",Rn));function Nn(N){s[25](N)}function Dn(N){s[26](N)}let Kt={};s[1].highlight.enabled!==void 0&&(Kt.enabled=s[1].highlight.enabled),s[1].highlight.settings!==void 0&&(Kt.settings=s[1].highlight.settings),L=new mr({props:Kt}),ue.push(()=>he(L,"enabled",Nn)),ue.push(()=>he(L,"settings",Dn));function Bn(N){s[27](N)}function Un(N){s[28](N)}function Hn(N){s[29](N)}let It={};s[1].drawTools.enabled!==void 0&&(It.enabled=s[1].drawTools.enabled),s[1].drawTools.settings.knightLShape!==void 0&&(It.knightLShape=s[1].drawTools.settings.knightLShape),s[1].drawTools.settings.onlyChessMove!==void 0&&(It.onlyChessMove=s[1].drawTools.settings.onlyChessMove),X=new Er({props:It}),ue.push(()=>he(X,"enabled",Bn)),ue.push(()=>he(X,"knightLShape",Un)),ue.push(()=>he(X,"onlyChessMove",Hn));function zn(N){s[30](N)}function Vn(N){s[31](N)}let jt={};s[1].sounds.enabled!==void 0&&(jt.enabled=s[1].sounds.enabled),s[1].sounds.settings!==void 0&&(jt.settings=s[1].sounds.settings),Q=new Sr({props:jt}),ue.push(()=>he(Q,"enabled",zn)),ue.push(()=>he(Q,"settings",Vn));let Wn={config:s[4]};return ve=new xa({props:Wn}),s[32](ve),Ye=new Pr({props:{copyText:s[3]}}),Ze=new li({props:{source:s[3],language:"svelte"}}),{c(){t=D("link"),e=ee(),i=D("div"),a=D("div"),n=D("div"),ke(r.$$.fragment),k=ee(),ke(w.$$.fragment),M=ee(),ke(v.$$.fragment),G=ee(),ke(ie.$$.fragment),oe=ee(),ke(g.$$.fragment),T=ee(),ke(L.$$.fragment),U=ee(),ke(X.$$.fragment),ae=ee(),ke(Q.$$.fragment),le=ee(),_e=D("div"),ne=D("div"),ke(ve.$$.fragment),Re=ee(),He=D("div"),De=D("div"),Ne=D("div"),Le=D("button"),Ke=D("span"),Ge=be("ts"),$e=ee(),it=D("span"),wt=be("/"),Mt=ee(),et=D("span"),St=be("js"),yt=ee(),ke(Ye.$$.fragment),Ct=ee(),ke(Ze.$$.fragment),this.h()},l(N){const ce=ei('[data-svelte="svelte-tebjht"]',document.head);t=B(ce,"LINK",{rel:!0,href:!0}),ce.forEach(E),e=te(N),i=B(N,"DIV",{class:!0});var We=K(i);a=B(We,"DIV",{class:!0});var rt=K(a);n=B(rt,"DIV",{class:!0});var Ae=K(n);we(r.$$.fragment,Ae),k=te(Ae),we(w.$$.fragment,Ae),M=te(Ae),we(v.$$.fragment,Ae),G=te(Ae),we(ie.$$.fragment,Ae),oe=te(Ae),we(g.$$.fragment,Ae),T=te(Ae),we(L.$$.fragment,Ae),U=te(Ae),we(X.$$.fragment,Ae),ae=te(Ae),we(Q.$$.fragment,Ae),Ae.forEach(E),le=te(rt),_e=B(rt,"DIV",{class:!0});var bt=K(_e);ne=B(bt,"DIV",{class:!0});var vt=K(ne);we(ve.$$.fragment,vt),vt.forEach(E),Re=te(bt),He=B(bt,"DIV",{class:!0});var Et=K(He);De=B(Et,"DIV",{class:!0});var tt=K(De);Ne=B(tt,"DIV",{class:!0});var lt=K(Ne);Le=B(lt,"BUTTON",{class:!0});var ot=K(Le);Ke=B(ot,"SPAN",{class:!0});var Tt=K(Ke);Ge=me(Tt,"ts"),Tt.forEach(E),$e=te(ot),it=B(ot,"SPAN",{class:!0});var Pt=K(it);wt=me(Pt,"/"),Pt.forEach(E),Mt=te(ot),et=B(ot,"SPAN",{class:!0});var as=K(et);St=me(as,"js"),as.forEach(E),ot.forEach(E),yt=te(lt),we(Ye.$$.fragment,lt),lt.forEach(E),Ct=te(tt),we(Ze.$$.fragment,tt),tt.forEach(E),Et.forEach(E),bt.forEach(E),rt.forEach(E),We.forEach(E),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",c(t,"rel","stylesheet"),c(t,"href","prism-one-dark.css"),c(n,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),c(ne,"class","w-full lg:w-[var(--boardSize,50rem)]"),c(Ke,"class",Xe=s[2]?"text-yellow-600":""),c(it,"class","text-gray-600"),c(et,"class",pt=s[2]?"":"text-yellow-600"),c(Le,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),c(Ne,"class","absolute right-2 top-2 flex gap-4"),c(De,"class","shadow-lg rounded "),c(He,"class","row-start-2 relative"),c(_e,"class","grid grid-rows-[min-content_auto] gap-10"),c(a,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),c(i,"class","my-10 grid grid-cols-center")},m(N,ce){y(document.head,t),Y(N,e,ce),Y(N,i,ce),y(i,a),y(a,n),Me(r,n,null),y(n,k),Me(w,n,null),y(n,M),Me(v,n,null),y(n,G),Me(ie,n,null),y(n,oe),Me(g,n,null),y(n,T),Me(L,n,null),y(n,U),Me(X,n,null),y(n,ae),Me(Q,n,null),y(a,le),y(a,_e),y(_e,ne),Me(ve,ne,null),y(_e,Re),y(_e,He),y(He,De),y(De,Ne),y(Ne,Le),y(Le,Ke),y(Ke,Ge),y(Le,$e),y(Le,it),y(it,wt),y(Le,Mt),y(Le,et),y(et,St),y(Ne,yt),Me(Ye,Ne,null),y(De,Ct),Me(Ze,De,null),at=!0,At||(Lt=fe(Le,"click",s[33]),At=!0)},p(N,ce){const We={};!l&&ce[0]&2&&(l=!0,We.boardTheme=N[1].board.boardTheme,ge(()=>l=!1)),!o&&ce[0]&2&&(o=!0,We.mouseEvents=N[1].board.mouseEvents,ge(()=>o=!1)),!u&&ce[0]&2&&(u=!0,We.notation=N[1].board.notation,ge(()=>u=!1)),!f&&ce[0]&2&&(f=!0,We.flipped=N[1].board.flipped,ge(()=>f=!1)),!p&&ce[0]&2&&(p=!0,We.shadow=N[1].board.style.shadow,ge(()=>p=!1)),!h&&ce[0]&2&&(h=!0,We.borderRadius=N[1].board.style.borderRadius,ge(()=>h=!1)),!C&&ce[0]&2&&(C=!0,We.resizible=N[1].board.resizible.enabled,ge(()=>C=!1)),!q&&ce[0]&2&&(q=!0,We.min=N[1].board.resizible.min,ge(()=>q=!1)),!F&&ce[0]&2&&(F=!0,We.max=N[1].board.resizible.max,ge(()=>F=!1)),r.$set(We);const rt={};!d&&ce[0]&2&&(d=!0,rt.enabled=N[1].movable.enabled,ge(()=>d=!1)),!m&&ce[0]&2&&(m=!0,rt.color=N[1].movable.color,ge(()=>m=!1)),w.$set(rt);const Ae={};!A&&ce[0]&2&&(A=!0,Ae.enabled=N[1].draggable.enabled,ge(()=>A=!1)),!W&&ce[0]&2&&(W=!0,Ae.ghostPiece=N[1].draggable.ghostPiece.enabled,ge(()=>W=!1)),!j&&ce[0]&2&&(j=!0,Ae.transition=N[1].draggable.transition.enabled,ge(()=>j=!1)),!z&&ce[0]&2&&(z=!0,Ae.duration=N[1].draggable.transition.settings.duration,ge(()=>z=!1)),!O&&ce[0]&2&&(O=!0,Ae.easing=N[1].draggable.transition.settings.easing,ge(()=>O=!1)),v.$set(Ae);const bt={};!pe&&ce[0]&2&&(pe=!0,bt.enabled=N[1].selectable.enabled,ge(()=>pe=!1)),ie.$set(bt);const vt={};!_&&ce[0]&2&&(_=!0,vt.enabled=N[1].legal.enabled,ge(()=>_=!1)),!b&&ce[0]&2&&(b=!0,vt.preMovesEnabled=N[1].legal.preMoves.enabled,ge(()=>b=!1)),g.$set(vt);const Et={};!I&&ce[0]&2&&(I=!0,Et.enabled=N[1].highlight.enabled,ge(()=>I=!1)),!H&&ce[0]&2&&(H=!0,Et.settings=N[1].highlight.settings,ge(()=>H=!1)),L.$set(Et);const tt={};!re&&ce[0]&2&&(re=!0,tt.enabled=N[1].drawTools.enabled,ge(()=>re=!1)),!P&&ce[0]&2&&(P=!0,tt.knightLShape=N[1].drawTools.settings.knightLShape,ge(()=>P=!1)),!V&&ce[0]&2&&(V=!0,tt.onlyChessMove=N[1].drawTools.settings.onlyChessMove,ge(()=>V=!1)),X.$set(tt);const lt={};!R&&ce[0]&2&&(R=!0,lt.enabled=N[1].sounds.enabled,ge(()=>R=!1)),!J&&ce[0]&2&&(J=!0,lt.settings=N[1].sounds.settings,ge(()=>J=!1)),Q.$set(lt);const ot={};ve.$set(ot),(!at||ce[0]&4&&Xe!==(Xe=N[2]?"text-yellow-600":""))&&c(Ke,"class",Xe),(!at||ce[0]&4&&pt!==(pt=N[2]?"":"text-yellow-600"))&&c(et,"class",pt);const Tt={};ce[0]&8&&(Tt.copyText=N[3]),Ye.$set(Tt);const Pt={};ce[0]&8&&(Pt.source=N[3]),Ze.$set(Pt)},i(N){at||(x(r.$$.fragment,N),x(w.$$.fragment,N),x(v.$$.fragment,N),x(ie.$$.fragment,N),x(g.$$.fragment,N),x(L.$$.fragment,N),x(X.$$.fragment,N),x(Q.$$.fragment,N),x(ve.$$.fragment,N),x(Ye.$$.fragment,N),x(Ze.$$.fragment,N),at=!0)},o(N){se(r.$$.fragment,N),se(w.$$.fragment,N),se(v.$$.fragment,N),se(ie.$$.fragment,N),se(g.$$.fragment,N),se(L.$$.fragment,N),se(X.$$.fragment,N),se(Q.$$.fragment,N),se(ve.$$.fragment,N),se(Ye.$$.fragment,N),se(Ze.$$.fragment,N),at=!1},d(N){E(t),N&&E(e),N&&E(i),Se(r),Se(w),Se(v),Se(ie),Se(g),Se(L),Se(X),Se(Q),s[32](null),Se(ve),Se(Ye),Se(Ze),At=!1,Lt()}}}function Rr(s,t,e){const i=new vn.Chess,a={movable:Ee.BOTH,legal:!0,callbacks:{afterMove:P=>i.move({from:P.substring(0,2),to:P.substring(2,4),...P.length>4&&{promotion:P[4]}}),getLegalMoves:()=>i.moves({verbose:!0}).map(P=>{var V;return P.from+P.to+((V=P.promotion)!=null?V:"")}),getWhiteToMove:()=>i.turn()==="w",getInCheck:()=>i.inCheck(),getLastMove:()=>{var V;const P=i.history({verbose:!0}).pop();return P?P.from+P.to+((V=P.promotion)!=null?V:""):""}},board:{style:{shadow:!0,borderRadius:"0.25rem"},resizible:!0}},n=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,r=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let l,o=new kn(a),u=!1,f=!0,p="";ts(()=>{e(5,u=!0),e(1,o=l.getState())});const h=(P,V)=>{const ae=P.getConfig(),Q=`
	import type { ChessboardConfig } from '@powchess/chessboard/boardConfig';`;u&&l.setState(P);let R=JSON.stringify(ae,(ne,ve)=>ne==="callbacks"?"{functions}":ve,4);R=R.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',V?n:r);const J=`
	import { Color } from '@powchess/chessboard/enums';`;V&&(R=R.replaceAll(`movable: ${Ee.WHITE}`,"movable: Color.WHITE").replaceAll(`movable: ${Ee.BLACK}`,"movable: Color.BLACK").replaceAll(`movable: ${Ee.BOTH}`,"movable: Color.BOTH"));function le(){return R.includes("movable: Color.WHITE")||R.includes("movable: Color.BLACK")||R.includes("movable: Color.BOTH")}let _e=`<script${V?' lang="ts"':""}>
	import Chessboard from '@powchess/chessboard';${V?Q:""}${le()&&V?J:""}${o.legal.enabled?V?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${V?": ChessboardConfig":""} = ${R};
<\/script>

<Chessboard {config} />`;return V||(_e=_e.replaceAll("Color.WHITE",`${Ee.WHITE}`).replaceAll("Color.BLACK",`${Ee.BLACK}`).replaceAll("Color.BOTH",`${Ee.BOTH}`)),_e};function C(P){s.$$.not_equal(o.board.boardTheme,P)&&(o.board.boardTheme=P,e(1,o),e(5,u),e(0,l))}function q(P){s.$$.not_equal(o.board.mouseEvents,P)&&(o.board.mouseEvents=P,e(1,o),e(5,u),e(0,l))}function F(P){s.$$.not_equal(o.board.notation,P)&&(o.board.notation=P,e(1,o),e(5,u),e(0,l))}function k(P){s.$$.not_equal(o.board.flipped,P)&&(o.board.flipped=P,e(1,o),e(5,u),e(0,l))}function w(P){s.$$.not_equal(o.board.style.shadow,P)&&(o.board.style.shadow=P,e(1,o),e(5,u),e(0,l))}function d(P){s.$$.not_equal(o.board.style.borderRadius,P)&&(o.board.style.borderRadius=P,e(1,o),e(5,u),e(0,l))}function m(P){s.$$.not_equal(o.board.resizible.enabled,P)&&(o.board.resizible.enabled=P,e(1,o),e(5,u),e(0,l))}function M(P){s.$$.not_equal(o.board.resizible.min,P)&&(o.board.resizible.min=P,e(1,o),e(5,u),e(0,l))}function v(P){s.$$.not_equal(o.board.resizible.max,P)&&(o.board.resizible.max=P,e(1,o),e(5,u),e(0,l))}function A(P){s.$$.not_equal(o.movable.enabled,P)&&(o.movable.enabled=P,e(1,o),e(5,u),e(0,l))}function W(P){s.$$.not_equal(o.movable.color,P)&&(o.movable.color=P,e(1,o),e(5,u),e(0,l))}function j(P){s.$$.not_equal(o.draggable.enabled,P)&&(o.draggable.enabled=P,e(1,o),e(5,u),e(0,l))}function z(P){s.$$.not_equal(o.draggable.ghostPiece.enabled,P)&&(o.draggable.ghostPiece.enabled=P,e(1,o),e(5,u),e(0,l))}function O(P){s.$$.not_equal(o.draggable.transition.enabled,P)&&(o.draggable.transition.enabled=P,e(1,o),e(5,u),e(0,l))}function G(P){s.$$.not_equal(o.draggable.transition.settings.duration,P)&&(o.draggable.transition.settings.duration=P,e(1,o),e(5,u),e(0,l))}function ie(P){s.$$.not_equal(o.draggable.transition.settings.easing,P)&&(o.draggable.transition.settings.easing=P,e(1,o),e(5,u),e(0,l))}function pe(P){s.$$.not_equal(o.selectable.enabled,P)&&(o.selectable.enabled=P,e(1,o),e(5,u),e(0,l))}function oe(P){s.$$.not_equal(o.legal.enabled,P)&&(o.legal.enabled=P,e(1,o),e(5,u),e(0,l))}function g(P){s.$$.not_equal(o.legal.preMoves.enabled,P)&&(o.legal.preMoves.enabled=P,e(1,o),e(5,u),e(0,l))}function _(P){s.$$.not_equal(o.highlight.enabled,P)&&(o.highlight.enabled=P,e(1,o),e(5,u),e(0,l))}function b(P){s.$$.not_equal(o.highlight.settings,P)&&(o.highlight.settings=P,e(1,o),e(5,u),e(0,l))}function T(P){s.$$.not_equal(o.drawTools.enabled,P)&&(o.drawTools.enabled=P,e(1,o),e(5,u),e(0,l))}function L(P){s.$$.not_equal(o.drawTools.settings.knightLShape,P)&&(o.drawTools.settings.knightLShape=P,e(1,o),e(5,u),e(0,l))}function I(P){s.$$.not_equal(o.drawTools.settings.onlyChessMove,P)&&(o.drawTools.settings.onlyChessMove=P,e(1,o),e(5,u),e(0,l))}function H(P){s.$$.not_equal(o.sounds.enabled,P)&&(o.sounds.enabled=P,e(1,o),e(5,u),e(0,l))}function U(P){s.$$.not_equal(o.sounds.settings,P)&&(o.sounds.settings=P,e(1,o),e(5,u),e(0,l))}function X(P){ue[P?"unshift":"push"](()=>{l=P,e(0,l)})}const re=()=>{e(2,f=!f)};return s.$$.update=()=>{s.$$.dirty[0]&35&&o.legal.enabled&&(e(1,o.board.startFen=En,o),i.load(o.board.startFen),u&&l.setFEN(o.board.startFen,!1)),s.$$.dirty[0]&6&&e(3,p=h(o,f))},[l,o,f,p,a,u,C,q,F,k,w,d,m,M,v,A,W,j,z,O,G,ie,pe,oe,g,_,b,T,L,I,H,U,X,re]}class Br extends Oe{constructor(t){super(),Fe(this,t,Rr,qr,qe,{},null,[-1,-1])}}export{Br as default};
