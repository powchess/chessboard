import{S as Fe,i as qe,s as Re,B as un,k as B,a as $,l as U,m as K,h as E,c as ee,p as ye,n as c,b as X,F as C,C as fn,D as dn,E as hn,f as Z,t as ie,H as Ft,I as rs,J as fe,K as zn,e as Ce,L as Vn,q as be,r as me,u as Nt,A as Te,M as ut,N as cn,O as Wn,P as Kn,Q as ls,R as gt,T as Jt,U as de,V as xt,W as Je,X as Dt,G as jn,Y as Ze,Z as Ve,_ as We,o as $t,g as He,d as ze,$ as tt,a0 as Gn,a1 as Qn,a2 as ce,v as Ee,w as ke,x as Me,a3 as ge,y as we,a4 as os,a5 as gn,a6 as Xn,a7 as us,a8 as Yn,a9 as bn,z as Zn,aa as mn,ab as ft,ac as _t,ad as es,ae as ot,af as lt,ag as Jn}from"../../chunks/index-a0d75c90.js";import{w as xn}from"../../chunks/index-129aa244.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pn={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,r={},l={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function d(m){return m instanceof o?new o(m.type,d(m.content),m.alias):Array.isArray(m)?m.map(d):m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(d){return Object.prototype.toString.call(d).slice(8,-1)},objId:function(d){return d.__id||Object.defineProperty(d,"__id",{value:++i}),d.__id},clone:function d(m,S){S=S||{};var v,P;switch(l.util.type(m)){case"Object":if(P=l.util.objId(m),S[P])return S[P];v={},S[P]=v;for(var W in m)m.hasOwnProperty(W)&&(v[W]=d(m[W],S));return v;case"Array":return P=l.util.objId(m),S[P]?S[P]:(v=[],S[P]=v,m.forEach(function(j,V){v[V]=d(j,S)}),v);default:return m}},getLanguage:function(d){for(;d;){var m=a.exec(d.className);if(m)return m[1].toLowerCase();d=d.parentElement}return"none"},setLanguage:function(d,m){d.className=d.className.replace(RegExp(a,"gi"),""),d.classList.add("language-"+m)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(v){var d=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(v.stack)||[])[1];if(d){var m=document.getElementsByTagName("script");for(var S in m)if(m[S].src==d)return m[S]}return null}},isActive:function(d,m,S){for(var v="no-"+m;d;){var P=d.classList;if(P.contains(m))return!0;if(P.contains(v))return!1;d=d.parentElement}return!!S}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(d,m){var S=l.util.clone(l.languages[d]);for(var v in m)S[v]=m[v];return S},insertBefore:function(d,m,S,v){v=v||l.languages;var P=v[d],W={};for(var j in P)if(P.hasOwnProperty(j)){if(j==m)for(var V in S)S.hasOwnProperty(V)&&(W[V]=S[V]);S.hasOwnProperty(j)||(W[j]=P[j])}var O=v[d];return v[d]=W,l.languages.DFS(l.languages,function(G,re){re===O&&G!=d&&(this[G]=W)}),W},DFS:function d(m,S,v,P){P=P||{};var W=l.util.objId;for(var j in m)if(m.hasOwnProperty(j)){S.call(m,j,m[j],v||j);var V=m[j],O=l.util.type(V);O==="Object"&&!P[W(V)]?(P[W(V)]=!0,d(V,S,null,P)):O==="Array"&&!P[W(V)]&&(P[W(V)]=!0,d(V,S,j,P))}}},plugins:{},highlightAll:function(d,m){l.highlightAllUnder(document,d,m)},highlightAllUnder:function(d,m,S){var v={callback:S,container:d,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",v),v.elements=Array.prototype.slice.apply(v.container.querySelectorAll(v.selector)),l.hooks.run("before-all-elements-highlight",v);for(var P=0,W;W=v.elements[P++];)l.highlightElement(W,m===!0,v.callback)},highlightElement:function(d,m,S){var v=l.util.getLanguage(d),P=l.languages[v];l.util.setLanguage(d,v);var W=d.parentElement;W&&W.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(W,v);var j=d.textContent,V={element:d,language:v,grammar:P,code:j};function O(re){V.highlightedCode=re,l.hooks.run("before-insert",V),V.element.innerHTML=V.highlightedCode,l.hooks.run("after-highlight",V),l.hooks.run("complete",V),S&&S.call(V.element)}if(l.hooks.run("before-sanity-check",V),W=V.element.parentElement,W&&W.nodeName.toLowerCase()==="pre"&&!W.hasAttribute("tabindex")&&W.setAttribute("tabindex","0"),!V.code){l.hooks.run("complete",V),S&&S.call(V.element);return}if(l.hooks.run("before-highlight",V),!V.grammar){O(l.util.encode(V.code));return}if(m&&n.Worker){var G=new Worker(l.filename);G.onmessage=function(re){O(re.data)},G.postMessage(JSON.stringify({language:V.language,code:V.code,immediateClose:!0}))}else O(l.highlight(V.code,V.grammar,V.language))},highlight:function(d,m,S){var v={code:d,grammar:m,language:S};if(l.hooks.run("before-tokenize",v),!v.grammar)throw new Error('The language "'+v.language+'" has no grammar.');return v.tokens=l.tokenize(v.code,v.grammar),l.hooks.run("after-tokenize",v),o.stringify(l.util.encode(v.tokens),v.language)},tokenize:function(d,m){var S=m.rest;if(S){for(var v in S)m[v]=S[v];delete m.rest}var P=new p;return b(P,P.head,d),f(d,P,m,P.head,0),T(P)},hooks:{all:{},add:function(d,m){var S=l.hooks.all;S[d]=S[d]||[],S[d].push(m)},run:function(d,m){var S=l.hooks.all[d];if(!(!S||!S.length))for(var v=0,P;P=S[v++];)P(m)}},Token:o};n.Prism=l;function o(d,m,S,v){this.type=d,this.content=m,this.alias=S,this.length=(v||"").length|0}o.stringify=function d(m,S){if(typeof m=="string")return m;if(Array.isArray(m)){var v="";return m.forEach(function(O){v+=d(O,S)}),v}var P={type:m.type,content:d(m.content,S),tag:"span",classes:["token",m.type],attributes:{},language:S},W=m.alias;W&&(Array.isArray(W)?Array.prototype.push.apply(P.classes,W):P.classes.push(W)),l.hooks.run("wrap",P);var j="";for(var V in P.attributes)j+=" "+V+'="'+(P.attributes[V]||"").replace(/"/g,"&quot;")+'"';return"<"+P.tag+' class="'+P.classes.join(" ")+'"'+j+">"+P.content+"</"+P.tag+">"};function u(d,m,S,v){d.lastIndex=m;var P=d.exec(S);if(P&&v&&P[1]){var W=P[1].length;P.index+=W,P[0]=P[0].slice(W)}return P}function f(d,m,S,v,P,W){for(var j in S)if(!(!S.hasOwnProperty(j)||!S[j])){var V=S[j];V=Array.isArray(V)?V:[V];for(var O=0;O<V.length;++O){if(W&&W.cause==j+","+O)return;var G=V[O],re=G.inside,pe=!!G.lookbehind,ue=!!G.greedy,h=G.alias;if(ue&&!G.pattern.global){var _=G.pattern.toString().match(/[imsuy]*$/)[0];G.pattern=RegExp(G.pattern.source,_+"g")}for(var g=G.pattern||G,A=v.next,F=P;A!==m.tail&&!(W&&F>=W.reach);F+=A.value.length,A=A.next){var I=A.value;if(m.length>d.length)return;if(!(I instanceof o)){var z=1,N;if(ue){if(N=u(g,F,d,pe),!N||N.index>=d.length)break;var H=N.index,J=N.index+N[0].length,le=F;for(le+=A.value.length;H>=le;)A=A.next,le+=A.value.length;if(le-=A.value.length,F=le,A.value instanceof o)continue;for(var L=A;L!==m.tail&&(le<J||typeof L.value=="string");L=L.next)z++,le+=L.value.length;z--,I=d.slice(F,le),N.index-=F}else if(N=u(g,0,I,pe),!N)continue;var H=N.index,se=N[0],Q=I.slice(0,H),R=I.slice(H+se.length),Y=F+I.length;W&&Y>W.reach&&(W.reach=Y);var ae=A.prev;Q&&(ae=b(m,ae,Q),F+=Q.length),y(m,ae,z);var ve=new o(j,re?l.tokenize(se,re):se,h,se);if(A=b(m,ae,ve),R&&b(m,A,R),z>1){var ne={cause:j+","+O,reach:Y};f(d,m,S,A.prev,F,ne),W&&ne.reach>W.reach&&(W.reach=ne.reach)}}}}}}function p(){var d={value:null,prev:null,next:null},m={value:null,prev:d,next:null};d.next=m,this.head=d,this.tail=m,this.length=0}function b(d,m,S){var v=m.next,P={value:S,prev:m,next:v};return m.next=P,v.prev=P,d.length++,P}function y(d,m,S){for(var v=m.next,P=0;P<S&&v!==d.tail;P++)v=v.next;m.next=v,v.prev=m,d.length-=P}function T(d){for(var m=[],S=d.head.next;S!==d.tail;)m.push(S.value),S=S.next;return m}if(!n.document)return n.addEventListener&&(l.disableWorkerMessageHandler||n.addEventListener("message",function(d){var m=JSON.parse(d.data),S=m.language,v=m.code,P=m.immediateClose;n.postMessage(l.highlight(v,l.languages[S],S)),P&&n.close()},!1)),l;var q=l.util.currentScript();q&&(l.filename=q.src,q.hasAttribute("data-manual")&&(l.manual=!0));function k(){l.manual||l.highlightAll()}if(!l.manual){var w=document.readyState;w==="loading"||w==="interactive"&&q&&q.defer?document.addEventListener("DOMContentLoaded",k):window.requestAnimationFrame?window.requestAnimationFrame(k):window.setTimeout(k,16)}return l}(e);s.exports&&(s.exports=t),typeof fs<"u"&&(fs.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(a,i){var r={};r["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};l["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var o={};o[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:l},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,a){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:t.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var i=n.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading\u2026",a=function(q,k){return"\u2716 Error "+q+" while fetching file: "+k},i="\u2716 Error: File does not exist or is empty",r={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",f="failed",p="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function b(q,k,w){var d=new XMLHttpRequest;d.open("GET",q,!0),d.onreadystatechange=function(){d.readyState==4&&(d.status<400&&d.responseText?k(d.responseText):d.status>=400?w(a(d.status,d.statusText)):w(i))},d.send(null)}function y(q){var k=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(q||"");if(k){var w=Number(k[1]),d=k[2],m=k[3];return d?m?[w,Number(m)]:[w,void 0]:[w,w]}}t.hooks.add("before-highlightall",function(q){q.selector+=", "+p}),t.hooks.add("before-sanity-check",function(q){var k=q.element;if(k.matches(p)){q.code="",k.setAttribute(l,o);var w=k.appendChild(document.createElement("CODE"));w.textContent=n;var d=k.getAttribute("data-src"),m=q.language;if(m==="none"){var S=(/\.(\w+)$/.exec(d)||[,"none"])[1];m=r[S]||S}t.util.setLanguage(w,m),t.util.setLanguage(k,m);var v=t.plugins.autoloader;v&&v.loadLanguages(m),b(d,function(P){k.setAttribute(l,u);var W=y(k.getAttribute("data-range"));if(W){var j=P.split(/\r\n?|\n/g),V=W[0],O=W[1]==null?j.length:W[1];V<0&&(V+=j.length),V=Math.max(0,Math.min(V-1,j.length)),O<0&&(O+=j.length),O=Math.max(0,Math.min(O,j.length)),P=j.slice(V,O).join(`
`),k.hasAttribute("data-start")||k.setAttribute("data-start",String(V+1))}w.textContent=P,t.highlightElement(w)},function(P){k.setAttribute(l,f),w.textContent=P})}}),t.plugins.fileHighlight={highlight:function(k){for(var w=(k||document).querySelectorAll(p),d=0,m;m=w[d++];)t.highlightElement(m)}};var T=!1;t.fileHighlight=function(){T||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),T=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(pn);const _n=pn.exports,ds="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+ds+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+ds+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",s=>{s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,t){const n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;const a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};a["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};const i={};i[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:a},Prism.languages.insertBefore("svelte","cdata",i)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function $n(s){let e,t;return{c(){e=new zn(!1),t=Ce(),this.h()},l(n){e=Vn(n,!1),t=Ce(),this.h()},h(){e.a=t},m(n,a){e.m(s[2],n,a),X(n,t,a)},p(n,a){a&4&&e.p(n[2])},d(n){n&&E(t),n&&e.d()}}}function ei(s){let e;return{c(){e=be(s[2])},l(t){e=me(t,s[2])},m(t,n){X(t,e,n)},p(t,n){n&4&&Nt(e,t[2])},d(t){t&&E(e)}}}function ti(s){let e,t,n,a,i,r,l;const o=s[6].default,u=un(o,s,s[5],null);function f(y,T){return y[0]==="none"?ei:$n}let p=f(s),b=p(s);return{c(){e=B("code"),u&&u.c(),t=$(),n=B("pre"),a=B("code"),b.c(),this.h()},l(y){e=U(y,"CODE",{style:!0});var T=K(e);u&&u.l(T),T.forEach(E),t=ee(y),n=U(y,"PRE",{class:!0,"command-line":!0,"data-output":!0});var q=K(n);a=U(q,"CODE",{class:!0});var k=K(a);b.l(k),k.forEach(E),q.forEach(E),this.h()},h(){ye(e,"display","none"),c(a,"class",i="language-"+s[0]),c(n,"class",r="language-"+s[0]),c(n,"command-line",""),c(n,"data-output","2-17")},m(y,T){X(y,e,T),u&&u.m(e,null),s[7](e),X(y,t,T),X(y,n,T),C(n,a),b.m(a,null),l=!0},p(y,[T]){u&&u.p&&(!l||T&32)&&fn(u,o,y,y[5],l?hn(o,y[5],T,null):dn(y[5]),null),p===(p=f(y))&&b?b.p(y,T):(b.d(1),b=p(y),b&&(b.c(),b.m(a,null))),(!l||T&1&&i!==(i="language-"+y[0]))&&c(a,"class",i),(!l||T&1&&r!==(r="language-"+y[0]))&&c(n,"class",r)},i(y){l||(Z(u,y),l=!0)},o(y){ie(u,y),l=!1},d(y){y&&E(e),u&&u.d(y),s[7](null),y&&E(t),y&&E(n),b.d()}}}const hs=_n;_n.highlightElement;const si={transform:s=>s};function ni(s,e,t){let{$$slots:n={},$$scope:a}=e,{language:i="javascript"}=e,{source:r=""}=e,{transform:l=b=>b}=e,o,u;function f(){const b=hs.languages[i];let y=r||o.textContent;y=si.transform(y),y=l(y),t(2,u=i==="none"?y:hs.highlight(y,b,i))}function p(b){fe[b?"unshift":"push"](()=>{o=b,t(1,o)})}return s.$$set=b=>{t(9,e=Ft(Ft({},e),rs(b))),"language"in b&&t(0,i=b.language),"source"in b&&t(3,r=b.source),"transform"in b&&t(4,l=b.transform),"$$scope"in b&&t(5,a=b.$$scope)},s.$$.update=()=>{e&&(r||o)&&f()},e=rs(e),[i,o,u,r,l,a,n,p]}class ii extends Fe{constructor(e){super(),qe(this,e,ni,ti,Re,{language:0,source:3,transform:4})}}var vn={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Chess=s.validateFen=s.SQUARES=s.DEFAULT_POSITION=s.KING=s.QUEEN=s.ROOK=s.BISHOP=s.KNIGHT=s.PAWN=s.BLACK=s.WHITE=void 0,s.WHITE="w",s.BLACK="b",s.PAWN="p",s.KNIGHT="n",s.BISHOP="b",s.ROOK="r",s.QUEEN="q",s.KING="k",s.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";const e=-1,t={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"};s.SQUARES=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"];const n={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},a={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},i={b:[16,32,17,15],w:[-16,-32,-17,-15]},r={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},l=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],o=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],u={p:1,n:2,b:4,r:8,q:16,k:32},f="pnbrqkPNBRQK",p=[s.KNIGHT,s.BISHOP,s.ROOK,s.QUEEN],b=7,y=6,T=1,q=0,k={w:[{square:a.a1,flag:n.QSIDE_CASTLE},{square:a.h1,flag:n.KSIDE_CASTLE}],b:[{square:a.a8,flag:n.QSIDE_CASTLE},{square:a.h8,flag:n.KSIDE_CASTLE}]},w={b:T,w:y},d=["1-0","0-1","1/2-1/2","*"];function m(ue){return ue>>4}function S(ue){return ue&15}function v(ue){return"0123456789".indexOf(ue)!==-1}function P(ue){const h=S(ue),_=m(ue);return"abcdefgh".substring(h,h+1)+"87654321".substring(_,_+1)}function W(ue){return ue===s.WHITE?s.BLACK:s.WHITE}function j(ue){const h=[];h[0]="No errors.",h[1]="FEN string must contain six space-delimited fields.",h[2]="6th field (move number) must be a positive integer.",h[3]="5th field (half move counter) must be a non-negative integer.",h[4]="4th field (en-passant square) is invalid.",h[5]="3rd field (castling availability) is invalid.",h[6]="2nd field (side to move) is invalid.",h[7]="1st field (piece positions) does not contain 8 '/'-delimited rows.",h[8]="1st field (piece positions) is invalid [consecutive numbers].",h[9]="1st field (piece positions) is invalid [invalid piece].",h[10]="1st field (piece positions) is invalid [row too large].",h[11]="Illegal en-passant square";const _=ue.split(/\s+/);if(_.length!==6)return{valid:!1,errorNumber:1,error:h[1]};const g=parseInt(_[5],10);if(isNaN(g)||g<=0)return{valid:!1,errorNumber:2,error:h[2]};const A=parseInt(_[4],10);if(isNaN(A)||A<0)return{valid:!1,errorNumber:3,error:h[3]};if(!/^(-|[abcdefgh][36])$/.test(_[3]))return{valid:!1,errorNumber:4,error:h[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(_[2]))return{valid:!1,errorNumber:5,error:h[5]};if(!/^(w|b)$/.test(_[1]))return{valid:!1,errorNumber:6,error:h[6]};const F=_[0].split("/");if(F.length!==8)return{valid:!1,errorNumber:7,error:h[7]};for(let I=0;I<F.length;I++){let z=0,N=!1;for(let J=0;J<F[I].length;J++)if(v(F[I][J])){if(N)return{valid:!1,errorNumber:8,error:h[8]};z+=parseInt(F[I][J],10),N=!0}else{if(!/^[prnbqkPRNBQK]$/.test(F[I][J]))return{valid:!1,errorNumber:9,error:h[9]};z+=1,N=!1}if(z!==8)return{valid:!1,errorNumber:10,error:h[10]}}return _[3][1]=="3"&&_[1]=="w"||_[3][1]=="6"&&_[1]=="b"?{valid:!1,errorNumber:11,error:h[11]}:{valid:!0,errorNumber:0,error:h[0]}}s.validateFen=j;function V(ue,h){const _=ue.from,g=ue.to,A=ue.piece;let F=0,I=0,z=0;for(let N=0,J=h.length;N<J;N++){const le=h[N].from,L=h[N].to,H=h[N].piece;A===H&&_!==le&&g===L&&(F++,m(_)===m(le)&&I++,S(_)===S(le)&&z++)}return F>0?I>0&&z>0?P(_):z>0?P(_).charAt(1):P(_).charAt(0):""}function O(ue,h,_,g,A,F=void 0,I=n.NORMAL){const z=m(g);if(A===s.PAWN&&(z===b||z===q))for(let N=0;N<p.length;N++){const J=p[N];ue.push({color:h,from:_,to:g,piece:A,captured:F,promotion:J,flags:I|n.PROMOTION})}else ue.push({color:h,from:_,to:g,piece:A,captured:F,promotion:void 0,flags:I})}function G(ue){let h=ue.charAt(0);return h>="a"&&h<="h"?ue.match(/[a-h]\d.*[a-h]\d/)?void 0:s.PAWN:(h=h.toLowerCase(),h==="o"?s.KING:h)}function re(ue){return ue.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class pe{constructor(h=s.DEFAULT_POSITION){this._board=new Array(128),this._turn=s.WHITE,this._header={},this._kings={w:e,b:e},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(h)}clear(h=!1){this._board=new Array(128),this._kings={w:e,b:e},this._turn=s.WHITE,this._castling={w:0,b:0},this._epSquare=e,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=h?this._header:{},this._updateSetup(this.fen())}load(h,_=!1){const g=h.split(/\s+/),A=g[0];let F=0;if(!j(h).valid)return!1;this.clear(_);for(let I=0;I<A.length;I++){const z=A.charAt(I);if(z==="/")F+=8;else if(v(z))F+=parseInt(z,10);else{const N=z<"a"?s.WHITE:s.BLACK;this.put({type:z.toLowerCase(),color:N},P(F)),F++}}return this._turn=g[1],g[2].indexOf("K")>-1&&(this._castling.w|=n.KSIDE_CASTLE),g[2].indexOf("Q")>-1&&(this._castling.w|=n.QSIDE_CASTLE),g[2].indexOf("k")>-1&&(this._castling.b|=n.KSIDE_CASTLE),g[2].indexOf("q")>-1&&(this._castling.b|=n.QSIDE_CASTLE),this._epSquare=g[3]==="-"?e:a[g[3]],this._halfMoves=parseInt(g[4],10),this._moveNumber=parseInt(g[5],10),this._updateSetup(this.fen()),!0}fen(){let h=0,_="";for(let F=a.a8;F<=a.h1;F++){if(this._board[F]){h>0&&(_+=h,h=0);const{color:I,type:z}=this._board[F];_+=I===s.WHITE?z.toUpperCase():z.toLowerCase()}else h++;F+1&136&&(h>0&&(_+=h),F!==a.h1&&(_+="/"),h=0,F+=8)}let g="";this._castling[s.WHITE]&n.KSIDE_CASTLE&&(g+="K"),this._castling[s.WHITE]&n.QSIDE_CASTLE&&(g+="Q"),this._castling[s.BLACK]&n.KSIDE_CASTLE&&(g+="k"),this._castling[s.BLACK]&n.QSIDE_CASTLE&&(g+="q"),g=g||"-";const A=this._epSquare===e?"-":P(this._epSquare);return[_,this._turn,g,A,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(h){this._history.length>0||(h!==s.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=h):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(s.DEFAULT_POSITION)}get(h){return this._board[a[h]]||!1}put({type:h,color:_},g){if(f.indexOf(h.toLowerCase())===-1||!(g in a))return!1;const A=a[g];return h==s.KING&&!(this._kings[_]==e||this._kings[_]==A)?!1:(this._board[A]={type:h,color:_},h===s.KING&&(this._kings[_]=A),this._updateSetup(this.fen()),!0)}remove(h){const _=this.get(h);return delete this._board[a[h]],_&&_.type===s.KING&&(this._kings[_.color]=e),this._updateSetup(this.fen()),_}_attacked(h,_){for(let g=a.a8;g<=a.h1;g++){if(g&136){g+=7;continue}if(this._board[g]===void 0||this._board[g].color!==h)continue;const A=this._board[g],F=g-_,I=F+119;if(l[I]&u[A.type]){if(A.type===s.PAWN){if(F>0){if(A.color===s.WHITE)return!0}else if(A.color===s.BLACK)return!0;continue}if(A.type==="n"||A.type==="k")return!0;const z=o[I];let N=g+z,J=!1;for(;N!==_;){if(this._board[N]!=null){J=!0;break}N+=z}if(!J)return!0}}return!1}_isKingAttacked(h){return this._attacked(W(h),this._kings[h])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const h={b:0,n:0,r:0,q:0,k:0,p:0},_=[];let g=0,A=0;for(let F=a.a8;F<=a.h1;F++){if(A=(A+1)%2,F&136){F+=7;continue}const I=this._board[F];I&&(h[I.type]=I.type in h?h[I.type]+1:1,I.type===s.BISHOP&&_.push(A),g++)}if(g===2)return!0;if(g===3&&(h[s.BISHOP]===1||h[s.KNIGHT]===1))return!0;if(g===h[s.BISHOP]+2){let F=0;const I=_.length;for(let z=0;z<I;z++)F+=_[z];if(F===0||F===I)return!0}return!1}isThreefoldRepetition(){const h=[],_={};let g=!1;for(;;){const A=this._undoMove();if(!A)break;h.push(A)}for(;;){const A=this.fen().split(" ").slice(0,4).join(" ");_[A]=A in _?_[A]+1:1,_[A]>=3&&(g=!0);const F=h.pop();if(F)this._makeMove(F);else break}return g}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:h=!1,square:_=void 0}={}){const g=this._moves({square:_});return h?g.map(A=>this._makePretty(A)):g.map(A=>this._moveToSan(A,g))}_moves({legal:h=!0,piece:_=void 0,square:g=void 0}={}){var A;const F=g?g.toLowerCase():void 0,I=_==null?void 0:_.toLowerCase(),z=[],N=this._turn,J=W(N);let le=a.a8,L=a.h1,H=!1;if(F)if(F in a)le=L=a[F],H=!0;else return[];for(let Q=le;Q<=L;Q++){if(Q&136){Q+=7;continue}if(!this._board[Q]||this._board[Q].color===J)continue;const{type:R}=this._board[Q];let Y;if(R===s.PAWN){if(I&&I!==R)continue;Y=Q+i[N][0],this._board[Y]||(O(z,N,Q,Y,s.PAWN),Y=Q+i[N][1],w[N]===m(Q)&&!this._board[Y]&&O(z,N,Q,Y,s.PAWN,void 0,n.BIG_PAWN));for(let ae=2;ae<4;ae++)Y=Q+i[N][ae],!(Y&136)&&(((A=this._board[Y])===null||A===void 0?void 0:A.color)===J?O(z,N,Q,Y,s.PAWN,this._board[Y].type,n.CAPTURE):Y===this._epSquare&&O(z,N,Q,Y,s.PAWN,s.PAWN,n.EP_CAPTURE))}else{if(I&&I!==R)continue;for(let ae=0,ve=r[R].length;ae<ve;ae++){const ne=r[R][ae];for(Y=Q;Y+=ne,!(Y&136);){if(!this._board[Y])O(z,N,Q,Y,R);else{if(this._board[Y].color===N)break;O(z,N,Q,Y,R,this._board[Y].type,n.CAPTURE);break}if(R===s.KNIGHT||R===s.KING)break}}}}if((I===void 0||I===s.KING)&&(!H||L===this._kings[N])){if(this._castling[N]&n.KSIDE_CASTLE){const Q=this._kings[N],R=Q+2;!this._board[Q+1]&&!this._board[R]&&!this._attacked(J,this._kings[N])&&!this._attacked(J,Q+1)&&!this._attacked(J,R)&&O(z,N,this._kings[N],R,s.KING,void 0,n.KSIDE_CASTLE)}if(this._castling[N]&n.QSIDE_CASTLE){const Q=this._kings[N],R=Q-2;!this._board[Q-1]&&!this._board[Q-2]&&!this._board[Q-3]&&!this._attacked(J,this._kings[N])&&!this._attacked(J,Q-1)&&!this._attacked(J,R)&&O(z,N,this._kings[N],R,s.KING,void 0,n.QSIDE_CASTLE)}}if(!h)return z;const se=[];for(let Q=0,R=z.length;Q<R;Q++)this._makeMove(z[Q]),this._isKingAttacked(N)||se.push(z[Q]),this._undoMove();return se}move(h,{sloppy:_=!1}={}){let g=null;if(typeof h=="string")g=this._moveFromSan(h,_);else if(typeof h=="object"){const F=this._moves();for(let I=0,z=F.length;I<z;I++)if(h.from===P(F[I].from)&&h.to===P(F[I].to)&&(!("promotion"in F[I])||h.promotion===F[I].promotion)){g=F[I];break}}if(!g)return null;const A=this._makePretty(g);return this._makeMove(g),A}_push(h){this._history.push({move:h,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(h){const _=this._turn,g=W(_);if(this._push(h),this._board[h.to]=this._board[h.from],delete this._board[h.from],h.flags&n.EP_CAPTURE&&(this._turn===s.BLACK?delete this._board[h.to-16]:delete this._board[h.to+16]),h.promotion&&(this._board[h.to]={type:h.promotion,color:_}),this._board[h.to].type===s.KING){if(this._kings[_]=h.to,h.flags&n.KSIDE_CASTLE){const A=h.to-1,F=h.to+1;this._board[A]=this._board[F],delete this._board[F]}else if(h.flags&n.QSIDE_CASTLE){const A=h.to+1,F=h.to-2;this._board[A]=this._board[F],delete this._board[F]}this._castling[_]=0}if(this._castling[_]){for(let A=0,F=k[_].length;A<F;A++)if(h.from===k[_][A].square&&this._castling[_]&k[_][A].flag){this._castling[_]^=k[_][A].flag;break}}if(this._castling[g]){for(let A=0,F=k[g].length;A<F;A++)if(h.to===k[g][A].square&&this._castling[g]&k[g][A].flag){this._castling[g]^=k[g][A].flag;break}}h.flags&n.BIG_PAWN?_===s.BLACK?this._epSquare=h.to-16:this._epSquare=h.to+16:this._epSquare=e,h.piece===s.PAWN?this._halfMoves=0:h.flags&(n.CAPTURE|n.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,_===s.BLACK&&this._moveNumber++,this._turn=g}undo(){const h=this._undoMove();return h?this._makePretty(h):null}_undoMove(){const h=this._history.pop();if(h===void 0)return null;const _=h.move;this._kings=h.kings,this._turn=h.turn,this._castling=h.castling,this._epSquare=h.epSquare,this._halfMoves=h.halfMoves,this._moveNumber=h.moveNumber;const g=this._turn,A=W(g);if(this._board[_.from]=this._board[_.to],this._board[_.from].type=_.piece,delete this._board[_.to],_.captured)if(_.flags&n.EP_CAPTURE){let F;g===s.BLACK?F=_.to-16:F=_.to+16,this._board[F]={type:s.PAWN,color:A}}else this._board[_.to]={type:_.captured,color:A};if(_.flags&(n.KSIDE_CASTLE|n.QSIDE_CASTLE)){let F,I;_.flags&n.KSIDE_CASTLE?(F=_.to+1,I=_.to-1):(F=_.to-2,I=_.to+1),this._board[F]=this._board[I],delete this._board[I]}return _}pgn({newline:h=`
`,maxWidth:_=0}={}){const g=[];let A=!1;for(const H in this._header)g.push("["+H+' "'+this._header[H]+'"]'+h),A=!0;A&&this._history.length&&g.push(h);const F=H=>{const se=this._comments[this.fen()];if(typeof se<"u"){const Q=H.length>0?" ":"";H=`${H}${Q}{${se}}`}return H},I=[];for(;this._history.length>0;)I.push(this._undoMove());const z=[];let N="";for(I.length===0&&z.push(F(""));I.length>0;){N=F(N);const H=I.pop();if(!H)break;if(!this._history.length&&H.color==="b"){const se=`${this._moveNumber}. ...`;N=N?`${N} ${se}`:se}else H.color==="w"&&(N.length&&z.push(N),N=this._moveNumber+".");N=N+" "+this._moveToSan(H,this._moves({legal:!0})),this._makeMove(H)}if(N.length&&z.push(F(N)),typeof this._header.Result<"u"&&z.push(this._header.Result),_===0)return g.join("")+z.join(" ");const J=function(){return g.length>0&&g[g.length-1]===" "?(g.pop(),!0):!1},le=function(H,se){for(const Q of se.split(" "))if(!!Q){if(H+Q.length>_){for(;J();)H--;g.push(h),H=0}g.push(Q),H+=Q.length,g.push(" "),H++}return J()&&H--,H};let L=0;for(let H=0;H<z.length;H++){if(L+z[H].length>_&&z[H].includes("{")){L=le(L,z[H]);continue}L+z[H].length>_&&H!==0?(g[g.length-1]===" "&&g.pop(),g.push(h),L=0):H!==0&&(g.push(" "),L++),g.push(z[H]),L+=z[H].length}return g.join("")}header(...h){for(let _=0;_<h.length;_+=2)typeof h[_]=="string"&&typeof h[_+1]=="string"&&(this._header[h[_]]=h[_+1]);return this._header}loadPgn(h,{sloppy:_=!1,newlineChar:g=`\r?
`}={}){function A(ne){return ne.replace(/\\/g,"\\")}function F(ne){const Ae={},Le=ne.split(new RegExp(A(g)));let Be="",De="";for(let Ie=0;Ie<Le.length;Ie++){const Ue=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;Be=Le[Ie].replace(Ue,"$1"),De=Le[Ie].replace(Ue,"$2"),Be.trim().length>0&&(Ae[Be]=De)}return Ae}h=h.trim();const z=new RegExp("^(\\[((?:"+A(g)+")|.)*\\])(?:\\s*"+A(g)+"){2}").exec(h),N=z&&z.length>=2?z[1]:"";this.reset();const J=F(N);let le="";for(const ne in J)ne.toLowerCase()==="fen"&&(le=J[ne]),this.header(ne,J[ne]);if(_){if(le&&!this.load(le,!0))return!1}else if(J.SetUp==="1"&&!("FEN"in J&&this.load(J.FEN,!0)))return!1;function L(ne){return Array.from(ne).map(function(Ae){return Ae.charCodeAt(0)<128?Ae.charCodeAt(0).toString(16):encodeURIComponent(Ae).replace(/%/g,"").toLowerCase()}).join("")}function H(ne){return ne.length==0?"":decodeURIComponent("%"+(ne.match(/.{1,2}/g)||[]).join("%"))}const se=function(ne){return ne=ne.replace(new RegExp(A(g),"g")," "),`{${L(ne.slice(1,ne.length-1))}}`},Q=function(ne){if(ne.startsWith("{")&&ne.endsWith("}"))return H(ne.slice(1,ne.length-1))};let R=h.replace(N,"").replace(new RegExp(`({[^}]*})+?|;([^${A(g)}]*)`,"g"),function(ne,Ae,Le){return Ae!==void 0?se(Ae):" "+se(`{${Le.slice(1)}}`)}).replace(new RegExp(A(g),"g")," ");const Y=/(\([^()]+\))+?/g;for(;Y.test(R);)R=R.replace(Y,"");R=R.replace(/\d+\.(\.\.)?/g,""),R=R.replace(/\.\.\./g,""),R=R.replace(/\$\d+/g,"");let ae=R.trim().split(new RegExp(/\s+/));ae=ae.join(",").replace(/,,+/g,",").split(",");let ve="";for(let ne=0;ne<ae.length;ne++){const Ae=Q(ae[ne]);if(Ae!==void 0){this._comments[this.fen()]=Ae;continue}const Le=this._moveFromSan(ae[ne],_);if(Le==null)if(d.indexOf(ae[ne])>-1)ve=ae[ne];else return!1;else ve="",this._makeMove(Le)}return ve&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",ve),!0}_moveToSan(h,_){let g="";if(h.flags&n.KSIDE_CASTLE)g="O-O";else if(h.flags&n.QSIDE_CASTLE)g="O-O-O";else{if(h.piece!==s.PAWN){const A=V(h,_);g+=h.piece.toUpperCase()+A}h.flags&(n.CAPTURE|n.EP_CAPTURE)&&(h.piece===s.PAWN&&(g+=P(h.from)[0]),g+="x"),g+=P(h.to),h.promotion&&(g+="="+h.promotion.toUpperCase())}return this._makeMove(h),this.isCheck()&&(this.isCheckmate()?g+="#":g+="+"),this._undoMove(),g}_moveFromSan(h,_=!1){const g=re(h);let A=G(g),F=this._moves({legal:!0,piece:A});for(let H=0,se=F.length;H<se;H++)if(g===re(this._moveToSan(F[H],F)))return F[H];if(!_)return null;let I,z,N,J,le,L=!1;z=g.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),z?(I=z[1],N=z[2],J=z[3],le=z[4],N.length==1&&(L=!0)):(z=g.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),z&&(I=z[1],N=z[2],J=z[3],le=z[4],N.length==1&&(L=!0))),A=G(g),F=this._moves({legal:!0,piece:I||A});for(let H=0,se=F.length;H<se;H++)if(N&&J){if((!I||I.toLowerCase()==F[H].piece)&&a[N]==F[H].from&&a[J]==F[H].to&&(!le||le.toLowerCase()==F[H].promotion))return F[H];if(L){const Q=P(F[H].from);if((!I||I.toLowerCase()==F[H].piece)&&a[J]==F[H].to&&(N==Q[0]||N==Q[1])&&(!le||le.toLowerCase()==F[H].promotion))return F[H]}}return null}ascii(){let h=`   +------------------------+
`;for(let _=a.a8;_<=a.h1;_++){if(S(_)===0&&(h+=" "+"87654321"[m(_)]+" |"),this._board[_]){const g=this._board[_].type,F=this._board[_].color===s.WHITE?g.toUpperCase():g.toLowerCase();h+=" "+F+" "}else h+=" . ";_+1&136&&(h+=`|
`,_+=8)}return h+=`   +------------------------+
`,h+="     a  b  c  d  e  f  g  h",h}perft(h){const _=this._moves({legal:!1});let g=0;const A=this._turn;for(let F=0,I=_.length;F<I;F++)this._makeMove(_[F]),this._isKingAttacked(A)||(h-1>0?g+=this.perft(h-1):g++),this._undoMove();return g}_makePretty(h){const{color:_,piece:g,from:A,to:F,flags:I,captured:z,promotion:N}=h;let J="";for(const L in n)n[L]&I&&(J+=t[L]);const le={color:_,piece:g,from:P(A),to:P(F),san:this._moveToSan(h,this._moves({legal:!0})),flags:J};return z&&(le.captured=z),N&&(le.promotion=N),le}turn(){return this._turn}board(){const h=[];let _=[];for(let g=a.a8;g<=a.h1;g++)this._board[g]==null?_.push(null):_.push({square:P(g),type:this._board[g].type,color:this._board[g].color}),g+1&136&&(h.push(_),_=[],g+=8);return h}squareColor(h){if(h in a){const _=a[h];return(m(_)+S(_))%2===0?"light":"dark"}return null}history({verbose:h=!1}={}){const _=[],g=[];for(;this._history.length>0;)_.push(this._undoMove());for(;;){const A=_.pop();if(!A)break;h?g.push(this._makePretty(A)):g.push(this._moveToSan(A,this._moves())),this._makeMove(A)}return g}_pruneComments(){const h=[],_={},g=A=>{A in this._comments&&(_[A]=this._comments[A])};for(;this._history.length>0;)h.push(this._undoMove());for(g(this.fen());;){const A=h.pop();if(!A)break;this._makeMove(A),g(this.fen())}this._comments=_}getComment(){return this._comments[this.fen()]}setComment(h){this._comments[this.fen()]=h.replace("{","[").replace("}","]")}deleteComment(){const h=this._comments[this.fen()];return delete this._comments[this.fen()],h}getComments(){return this._pruneComments(),Object.keys(this._comments).map(h=>({fen:h,comment:this._comments[h]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(h=>{const _=this._comments[h];return delete this._comments[h],{fen:h,comment:_}})}}s.Chess=pe})(vn);var _e=(s=>(s[s.WHITE=0]="WHITE",s[s.BLACK=1]="BLACK",s[s.BOTH=2]="BOTH",s[s.SPECTATOR=3]="SPECTATOR",s[s.SERVER=4]="SERVER",s))(_e||{}),te=(s=>(s[s.LEGAL=0]="LEGAL",s[s.LEGALHOVER=1]="LEGALHOVER",s[s.CHECK=2]="CHECK",s[s.MOVE=3]="MOVE",s[s.NEXTMOVE=4]="NEXTMOVE",s[s.PREMOVE=5]="PREMOVE",s[s.PREMOVEHOVER=6]="PREMOVEHOVER",s[s.SELECT=7]="SELECT",s))(te||{});const Lt=s=>{if(typeof s=="string")return s;switch(s){case 0:case 1:return"legal";case 2:return"check";case 3:return"move";case 4:return"nextMove";case 5:case 6:return"preMove";case 7:return"select";default:return"check"}};class ai{constructor(e){this.defaultState={boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:gi,size:0,style:{shadow:!1,borderRadius:"0rem"},resizible:{enabled:!1,min:256,max:1024}},this.setConfigSettings=t=>{t!==void 0&&(t.boardTheme!==void 0&&(this.boardTheme=t.boardTheme),t.piecesTheme!==void 0&&(this.piecesTheme=t.piecesTheme),t.mouseEvents!==void 0&&(this.mouseEvents=t.mouseEvents),t.flipped!==void 0&&(this.flipped=t.flipped),t.notation!==void 0&&(this.notation=t.notation),t.startFen!==void 0&&(this.startFen=t.startFen),t.style!==void 0&&(t.style.shadow!==void 0&&(this.style.shadow=t.style.shadow),t.style.borderRadius!==void 0&&(this.style.borderRadius=t.style.borderRadius)))},this.getConfig=()=>{const t={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...(this.style.shadow!==this.defaultState.style.shadow||this.style.borderRadius!==this.defaultState.style.borderRadius)&&{style:{...this.style.shadow!==this.defaultState.style.shadow&&{shadow:this.style.shadow},...this.style.borderRadius!==this.defaultState.style.borderRadius&&{borderRadius:this.style.borderRadius}}}};if(Object.keys(t).length!==0)return t},this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.style={...this.defaultState.style},this.resizible={...this.defaultState.resizible},this.setConfigSettings(e)}}class ri{constructor(e){this.defaultState={enabled:!0,color:_e.BOTH},this.setConfigSettings=t=>{switch(t){case!0:this.enabled=!0,this.color=_e.BOTH;break;case!1:this.enabled=!1;break;case _e.WHITE:this.enabled=!0,this.color=_e.WHITE;break;case _e.BLACK:this.enabled=!0,this.color=_e.BLACK;break}},this.getConfig=()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1},this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class li{constructor(e){this.defaultState={enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}},this.setConfigSettings=t=>{var n,a,i,r;t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,(t==null?void 0:t.ghostPiece)!==void 0&&(this.ghostPiece.enabled=t.ghostPiece),t.transition!==void 0&&((t==null?void 0:t.transition)===!0?this.transition.enabled=!0:(t==null?void 0:t.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(n=t==null?void 0:t.transition)!=null&&n.duration&&(this.transition.settings.duration=(a=t==null?void 0:t.transition)==null?void 0:a.duration),(i=t==null?void 0:t.transition)!=null&&i.easing&&(this.transition.settings.easing=(r=t==null?void 0:t.transition)==null?void 0:r.easing)))))},this.getConfig=()=>{const t={},n={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(t.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(n.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(n.easing=this.transition.settings.easing),Object.keys(n).length!==0&&(t.transition=n)),!this.transition.enabled&&this.defaultState.transition.enabled&&(t.transition=!1),Object.keys(t).length!==0))return t;if(!this.enabled&&this.defaultState.enabled)return!1},this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class oi{constructor(e){this.defaultState={enabled:!0,selectedPiece:void 0},this.setConfigSettings=t=>{t!==void 0&&(this.enabled=t)},this.getConfig=()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class ui{constructor(e){this.defaultState={enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.settings&&(t.settings.allowCastling!==void 0&&(this.settings.allowCastling=t.settings.allowCastling),t.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=t.settings.allowEnPassant),t.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=t.settings.allowPromotion)),t.preMoves!==void 0&&(this.preMoves.enabled=t.preMoves)))},this.getConfig=()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled},this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class fi{constructor(e){this.defaultState={enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.check!==void 0&&(this.settings.check=t.check),t.legal!==void 0&&(this.settings.legal=t.legal),t.move!==void 0&&(this.settings.move=t.move),t.nextMove!==void 0&&(this.settings.nextMove=t.nextMove),t.preMove!==void 0&&(this.settings.preMove=t.preMove),t.select!==void 0&&(this.settings.select=t.select)))},this.getConfig=()=>{const t={},n=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(n.forEach(a=>{this.settings[a]!==this.defaultState.settings[a]&&(t[a]=this.settings[a])}),Object.keys(t).length!==0))return t;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class di{constructor(e){this.defaultState={enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.knightLShape!==void 0&&(this.settings.knightLShape=t.knightLShape),t.onlyChessMove!==void 0&&(this.settings.onlyChessMove=t.onlyChessMove)))},this.getConfig=()=>{const t={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(t.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(t.onlyChessMove=this.settings.onlyChessMove),Object.keys(t).length!==0))return t;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class hi{constructor(e){this.defaultState={enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.CAPTURE!==void 0&&(this.settings.CAPTURE=t.CAPTURE),t.CASTLE!==void 0&&(this.settings.CASTLE=t.CASTLE),t.MOVE!==void 0&&(this.settings.MOVE=t.MOVE),t.UNDO!==void 0&&(this.settings.UNDO=t.UNDO)))},this.getConfig=()=>{const t={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(t.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(t.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(t.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(t.UNDO=this.settings.UNDO),Object.keys(t).length!==0))return t;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class ci{constructor(e){this.defaultState={getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0},this.setConfigSettings=t=>{t!==void 0&&(t.getLegalMoves&&(this.getLegalMoves=t.getLegalMoves),t.getPreMoves&&(this.getPreMoves=t.getPreMoves),t.beforeMove&&(this.beforeMove=t.beforeMove),t.afterMove&&(this.afterMove=t.afterMove),t.getLastMove&&(this.getLastMove=t.getLastMove),t.getInCheck&&(this.getInCheck=t.getInCheck),t.getWhiteToMove&&(this.getWhiteToMove=t.getWhiteToMove))},this.getConfig=()=>{const t={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(t).length>0?t:void 0},this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const gi="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class En{constructor(e){this.getConfig=()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}),this.pieces=[],this.markedSquares=new Set,this.board=new ai(e==null?void 0:e.board),this.movable=new ri(e==null?void 0:e.movable),this.draggable=new li(e==null?void 0:e.draggable),this.selectable=new oi(e==null?void 0:e.selectable),this.legal=new ui(e==null?void 0:e.legal),this.callbacks=new ci(e==null?void 0:e.callbacks),this.highlight=new fi(e==null?void 0:e.highlight),this.drawTools=new di(e==null?void 0:e.drawTools),this.sounds=new hi(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){!this.legalEnabled||(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){!this.preMovesEnabled||(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.preMovesEnabled?this.legal.preMoves.curMove:""}set currentPreMove(e){e.length<4||(this.preMovesEnabled?this.legal.preMoves.curMove=e:this.legal.preMoves.curMove="")}get selectableEnabled(){return this.selectable.enabled}get draggableEnabled(){return this.draggable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){!this.legalEnabled||(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4&&e!==""||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const bi=["a","b","c","d","e","f","g","h"],mi=["8","7","6","5","4","3","2","1"];function Ot(s){return{x:bi.indexOf(s[0]),y:mi.indexOf(s[1])}}function jt(s){return s.charCodeAt(0)-97}function pi(s){return 8-parseInt(s,10)}const _i=s=>{let e="",t=0;for(let n=0;n<s.length;n++){n!==0&&(e+="/");for(let a=0;a<s[n].length;a++){const i=s[n][a];i!=null&&t===0?i[0]==="w"?e+=i[1]:e+=i[1].toLowerCase():i!=null&&t!==0?(e+=t.toString(),t=0,i[0]==="w"?e+=i[1]:e+=i[1].toLowerCase()):t++}t!==0&&(e+=t.toString(),t=0)}return e},vi="8/8/8/8/8/8/8/8 w - - 0 1";class Ei{constructor(e){this.letters={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},this.changeLegalHoverIfNeeded=t=>{t.color!==te.LEGAL&&t.color!==te.PREMOVE||this.state.pieces.forEach(n=>{n.square===t.square&&(t.color=t.color===te.LEGAL?te.LEGALHOVER:te.PREMOVEHOVER)})},this.highlightSquare=(t,n)=>{const a={square:t,color:n};this.state.markedSquares.forEach(i=>{i.square===t&&i.color!==te.MOVE&&i.color!==te.CHECK&&this.state.markedSquares.delete(i)}),this.changeLegalHoverIfNeeded(a),this.state.markedSquares.add(a)},this.legalHover=t=>{this.state.markedSquares.forEach(n=>{if(n.square===t&&n.color===te.LEGAL)n.color=te.LEGALHOVER;else if(n.square!==t&&n.color===te.LEGALHOVER){let a=!1;this.state.pieces.forEach(i=>{i.square===n.square&&(a=!0)}),a||(n.color=te.LEGAL)}})},this.preMoveHover=t=>{this.state.markedSquares.forEach(n=>{if(n.square===t&&n.color===te.PREMOVE)n.color=te.PREMOVEHOVER;else if(n.square!==t&&n.color===te.PREMOVEHOVER){let a=!1;this.state.pieces.forEach(i=>{i.square===n.square&&(a=!0)}),a||(n.color=te.PREMOVE)}})},this.toggleSquareHighlight=(t,n)=>{const a={square:t,color:n};let i=!1;return this.state.markedSquares.forEach(r=>{r.square===t&&(this.state.markedSquares.delete(r),r.color===n&&(i=!0))}),this.changeLegalHoverIfNeeded(a),i?!0:(this.state.markedSquares.add(a),!1)},this.getSelectedSquare=()=>{let t="";return this.state.markedSquares.forEach(n=>{n.color===te.SELECT&&(t=n.square)}),t},this.clearSquare=(t,n)=>{t.length===2&&this.state.markedSquares.forEach(a=>{a.square===t&&(a.color===n||n===void 0)&&this.state.markedSquares.delete(a)})},this.clearAllSquares=t=>{t===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(n=>{n.color===t&&this.state.markedSquares.delete(n)})},this.setPiece=(t,n)=>{if(this.notValidThing({square:t,piece:n}))return;const a=this.state.pieces.find(i=>i.square===t);a?a.name=n:this.state.pieces.push({square:t,name:n})},this.removePiece=t=>{this.notValidThing({square:t})||this.state.pieces.forEach((n,a)=>{n.square===t&&this.state.pieces.splice(a,1)})},this.clearAllPieces=()=>{this.state.pieces.length=0},this.getGridCoordsFromSquare=t=>{if(this.notValidThing({square:t}))return{x:0,y:0};const n=t[0],a=t[1],i=this.state.board.flipped?Math.abs(this.letters[n]-7):this.letters[n],r=this.state.board.flipped?Math.abs(parseInt(a,10)-8):parseInt(a,10)-1;return typeof i!="number"||r<0||r>7?{x:0,y:0}:{x:i,y:r}},this.makeMove=t=>{if(this.notValidThing({move:t}))return;let n=!1,a;const i=t.substring(0,2),r=t.substring(2,4),l=t.substring(4);this.state.pieces.forEach(o=>{o.square===r&&(a=o,this.removePiece(o.square))}),this.state.pieces.forEach(o=>{o.square===i&&(o.square=r,n=!0,l&&(o.name=o.name[0]+l.toUpperCase()))}),n?this.state.legal.lastMove=t:a&&this.state.pieces.push(a)},this.getSquareFromIndices=(t,n)=>`${Object.keys(this.letters)[t]}${(n+1).toString()}`,this.updatePiecesWithFen=t=>{const n=[...Array(8)].map(()=>Array(8).fill(null)),a=["1","2","3","4","5","6","7","8"];let i=0,r=0;for(let u=0;u<(t.includes(" ")?t.indexOf(" "):t.length);u++)if(t[u]==="/")i++,r=0;else if(!a.includes(t[u]))t[u]===t[u].toUpperCase()?n[i][r]=`w${t[u]}`:n[i][r]=`b${t[u].toUpperCase()}`,r++;else for(let f=0;f<parseInt(t[u],10);f++)n[i][r]=null,r++;const l=[],o=[];for(let u=0;u<n.length;++u)for(let f=0;f<n.length;++f){const p=n[u][f],b=this.getPieceFromSquare(this.getSquareFromIndices(f,Math.abs(u-7)));p&&!b&&l.push({square:this.getSquareFromIndices(f,Math.abs(u-7)),name:p}),!p&&b&&o.push(b),p&&b&&p!==b.name&&(l.push({square:this.getSquareFromIndices(f,Math.abs(u-7)),name:p}),o.push(b))}for(let u=0;u<o.length;u++)for(let f=0;f<l.length;f++)!l[f]||!o[u]||l[f].name===o[u].name&&(o[u].square=l[f].square,o.splice(u,1),u--,l.splice(f,1),f--);l.forEach(u=>{this.state.pieces.push(u)}),o.forEach(u=>{this.state.pieces.splice(this.state.pieces.indexOf(u),1)})},this.notValidThing=t=>{const{square:n,piece:a,move:i}=t;return!!(n&&n.length!==2||a&&a.length!==2||i&&i.length!==4&&i.length!==5)},this.setGhostPiece=t=>{this.state.draggable.ghostPiece.piece=t},this.removeGhostPiece=()=>{this.state.draggable.ghostPiece.piece=void 0},this.isCastling=t=>{switch(t){case"e1g1":case"e1c1":case"e8g8":case"e8c8":return!0;default:return!1}},this.getRookMoveIfIsCastling=t=>{switch(t){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return}},this.isEnPassant=t=>{if(t[0]===t[2]||this.getPieceFromSquare(t.substring(2,4)))return!1;const n=this.getPieceFromSquare(t.substring(0,2));return!(n===void 0||n.name!=="wP"&&n.name!=="bP")},this.getCapturedPawnSquareIfIsEnPassant=t=>{if(t[0]===t[2]||this.getPieceFromSquare(t.substring(2,4)))return;const n=this.getPieceFromSquare(t.substring(0,2));if(n===void 0||n.name!=="wP"&&n.name!=="bP")return;const a=this.getPieceFromSquare(`${t[2]}${(parseInt(t[3],10)+(n.name==="wP"?-1:1)).toString()}`);return a==null?void 0:a.square},this.isCapture=t=>!!this.getPieceFromSquare(t.substring(2,4)),this.isPromotion=t=>{if((t[1]!=="7"||t[3]!=="8")&&(t[1]!=="2"||t[3]!=="1"))return!1;const n=this.getPieceFromSquare(t.substring(0,2));return!(n&&(n.name[1]!=="P"||n.name[0]==="w"&&t[3]==="1"||n.name[0]==="b"&&t[3]==="8"))},this.callbackExists=t=>this.state.callbacks[t]!==void 0,this.flipBoard=t=>{t!==void 0?this.state.board.flipped=t:this.state.board.flipped=!this.state.board.flipped},this.setConfigSettings=t=>{this.state.setConfigSettings(t)},this.state=new En(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const e=this.state.pieces.find(t=>t.name==="wK");if(e)return e.square}getBlackKingSquare(){const e=this.state.pieces.find(t=>t.name==="bK");if(e)return e.square}getShortFEN(){if(this.state.pieces.length===0)return vi;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(t=>{e[pi(t.square[1])][jt(t.square[0])]=t.name}),_i(e)}getPieceFromSquare(e){if(!e)return;let t;return this.state.pieces.forEach(n=>{n.square===e&&(t=n)}),t}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get draggableEnabled(){return this.state.draggableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}}const ki={[te.LEGAL]:"legalSQ cursor-pointer",[te.LEGALHOVER]:"legalSQ_hover cursor-pointer",[te.SELECT]:"selectedSQ",[te.MOVE]:"highlightMove",[te.NEXTMOVE]:"nextMoveSQ",[te.PREMOVE]:"preMoveSQ cursor-pointer",[te.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[te.CHECK]:"checkSQ"},Mi={white:"#f0d9b5",black:"#b58863"},wi="standard.svg",Si={[te.LEGAL]:"legalSQ cursor-pointer",[te.LEGALHOVER]:"legalSQ_hover cursor-pointer",[te.SELECT]:"selectedSQ-darkBlue",[te.MOVE]:"highlightMove-darkBlue",[te.NEXTMOVE]:"nextMoveSQ",[te.PREMOVE]:"preMoveSQ cursor-pointer",[te.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[te.CHECK]:"checkSQ"},yi={white:"#94A3B8",black:"#475569"},Ci="darkBlue.svg",Qe={squareStyles:{standard:ki,darkBlue:Si},colors:{standard:Mi,darkBlue:yi},imageName:{standard:wi,darkBlue:Ci}};function cs(s,e,t){const n=s.slice();return n[3]=e[t],n[5]=t,n}function gs(s,e,t){const n=s.slice();return n[3]=e[t],n[5]=t,n}function bs(s){let e,t=s[2][s[1]?Math.abs(s[5]-7):s[5]]+"",n,a;return{c(){e=B("span"),n=be(t),a=$(),this.h()},l(i){e=U(i,"SPAN",{"data-file":!0,style:!0,class:!0});var r=K(e);n=me(r,t),a=ee(r),r.forEach(E),this.h()},h(){c(e,"data-file",s[3]),ye(e,"color",s[5]%2===0?Qe.colors[s[0]].white:Qe.colors[s[0]].black),c(e,"class","svelte-1hixjwp")},m(i,r){X(i,e,r),C(e,n),C(e,a)},p(i,r){r&2&&t!==(t=i[2][i[1]?Math.abs(i[5]-7):i[5]]+"")&&Nt(n,t),r&1&&ye(e,"color",i[5]%2===0?Qe.colors[i[0]].white:Qe.colors[i[0]].black)},d(i){i&&E(e)}}}function ms(s){let e,t=(s[1]?s[5]+1:Math.abs(s[5]-8))+"",n,a,i;return{c(){e=B("span"),n=be(t),a=$(),this.h()},l(r){e=U(r,"SPAN",{"data-file":!0,style:!0,class:!0});var l=K(e);n=me(l,t),a=ee(l),l.forEach(E),this.h()},h(){c(e,"data-file",s[3]),c(e,"style",i="color: "+(s[5]%2===0?Qe.colors[s[0]].white:Qe.colors[s[0]].black)+";"+(s[1]?" text-align: right;":"")),c(e,"class","svelte-1hixjwp")},m(r,l){X(r,e,l),C(e,n),C(e,a)},p(r,l){l&2&&t!==(t=(r[1]?r[5]+1:Math.abs(r[5]-8))+"")&&Nt(n,t),l&3&&i!==(i="color: "+(r[5]%2===0?Qe.colors[r[0]].white:Qe.colors[r[0]].black)+";"+(r[1]?" text-align: right;":""))&&c(e,"style",i)},d(r){r&&E(e)}}}function Ai(s){let e,t,n,a=s[2],i=[];for(let o=0;o<a.length;o+=1)i[o]=bs(gs(s,a,o));let r=s[2],l=[];for(let o=0;o<r.length;o+=1)l[o]=ms(cs(s,r,o));return{c(){e=B("div");for(let o=0;o<i.length;o+=1)i[o].c();t=$(),n=B("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=U(o,"DIV",{class:!0});var u=K(e);for(let p=0;p<i.length;p+=1)i[p].l(u);u.forEach(E),t=ee(o),n=U(o,"DIV",{class:!0});var f=K(n);for(let p=0;p<l.length;p+=1)l[p].l(f);f.forEach(E),this.h()},h(){c(e,"class","files noselect svelte-1hixjwp"),c(n,"class","ranks noselect svelte-1hixjwp")},m(o,u){X(o,e,u);for(let f=0;f<i.length;f+=1)i[f].m(e,null);X(o,t,u),X(o,n,u);for(let f=0;f<l.length;f+=1)l[f].m(n,null)},p(o,[u]){if(u&7){a=o[2];let f;for(f=0;f<a.length;f+=1){const p=gs(o,a,f);i[f]?i[f].p(p,u):(i[f]=bs(p),i[f].c(),i[f].m(e,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=a.length}if(u&7){r=o[2];let f;for(f=0;f<r.length;f+=1){const p=cs(o,r,f);l[f]?l[f].p(p,u):(l[f]=ms(p),l[f].c(),l[f].m(n,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=r.length}},i:Te,o:Te,d(o){o&&E(e),ut(i,o),o&&E(t),o&&E(n),ut(l,o)}}}function Pi(s,e,t){let{theme:n}=e,{flipped:a}=e;const i=["a","b","c","d","e","f","g","h"];return s.$$set=r=>{"theme"in r&&t(0,n=r.theme),"flipped"in r&&t(1,a=r.flipped)},[n,a,i]}class Ti extends Fe{constructor(e){super(),qe(this,e,Pi,Ai,Re,{theme:0,flipped:1})}}function Li(s){const e=2.5949095;return(s*=2)<1?.5*(s*s*((e+1)*s-e)):.5*((s-=2)*s*((e+1)*s+e)+2)}function Ii(s){return s*s*((1.70158+1)*s-1.70158)}function Oi(s){return--s*s*((1.70158+1)*s+1.70158)+1}function qt(s){const e=.36363636363636365,t=8/11,n=9/10,a=4356/361,i=35442/1805,r=16061/1805,l=s*s;return s<e?7.5625*l:s<t?9.075*l-9.9*s+3.4:s<n?a*l-i*s+r:10.8*s*s-20.52*s+10.72}function Fi(s){return s<.5?.5*(1-qt(1-s*2)):.5*qt(s*2-1)+.5}function qi(s){return 1-qt(1-s)}function Ri(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)}function Ni(s){return 1-Math.sqrt(1-s*s)}function Di(s){return Math.sqrt(1- --s*s)}function Bi(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function Ui(s){return s*s*s}function ts(s){const e=s-1;return e*e*e+1}function Hi(s){return s<.5?.5*Math.sin(13*Math.PI/2*2*s)*Math.pow(2,10*(2*s-1)):.5*Math.sin(-13*Math.PI/2*(2*s-1+1))*Math.pow(2,-10*(2*s-1))+1}function zi(s){return Math.sin(13*s*Math.PI/2)*Math.pow(2,10*(s-1))}function Vi(s){return Math.sin(-13*(s+1)*Math.PI/2)*Math.pow(2,-10*s)+1}function Wi(s){return s===0||s===1?s:s<.5?.5*Math.pow(2,20*s-10):-.5*Math.pow(2,10-s*20)+1}function Ki(s){return s===0?s:Math.pow(2,10*(s-1))}function ji(s){return s===1?s:1-Math.pow(2,-10*s)}function Gi(s){return s/=.5,s<1?.5*s*s:(s--,-.5*(s*(s-2)-1))}function Qi(s){return s*s}function Xi(s){return-s*(s-2)}function Yi(s){return s<.5?8*Math.pow(s,4):-8*Math.pow(s-1,4)+1}function Zi(s){return Math.pow(s,4)}function Ji(s){return Math.pow(s-1,3)*(1-s)+1}function xi(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)}function $i(s){return s*s*s*s*s}function ea(s){return--s*s*s*s*s+1}function ta(s){return-.5*(Math.cos(Math.PI*s)-1)}function sa(s){const e=Math.cos(s*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function na(s){return Math.sin(s*Math.PI/2)}const Rt=Object.freeze(Object.defineProperty({__proto__:null,backIn:Ii,backInOut:Li,backOut:Oi,bounceIn:qi,bounceInOut:Fi,bounceOut:qt,circIn:Ni,circInOut:Ri,circOut:Di,cubicIn:Ui,cubicInOut:Bi,cubicOut:ts,elasticIn:zi,elasticInOut:Hi,elasticOut:Vi,expoIn:Ki,expoInOut:Wi,expoOut:ji,quadIn:Qi,quadInOut:Gi,quadOut:Xi,quartIn:Zi,quartInOut:Yi,quartOut:Ji,quintIn:$i,quintInOut:xi,quintOut:ea,sineIn:sa,sineInOut:ta,sineOut:na,linear:cn},Symbol.toStringTag,{value:"Module"}));function ps(s){return Object.prototype.toString.call(s)==="[object Date]"}function Gt(s,e){if(s===e||s!==s)return()=>s;const t=typeof s;if(t!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const n=e.map((a,i)=>Gt(s[i],a));return a=>n.map(i=>i(a))}if(t==="object"){if(!s||!e)throw new Error("Object cannot be null");if(ps(s)&&ps(e)){s=s.getTime(),e=e.getTime();const i=e-s;return r=>new Date(s+r*i)}const n=Object.keys(e),a={};return n.forEach(i=>{a[i]=Gt(s[i],e[i])}),i=>{const r={};return n.forEach(l=>{r[l]=a[l](i)}),r}}if(t==="number"){const n=e-s;return a=>s+a*n}throw new Error(`Cannot interpolate ${t} values`)}function ia(s,e={}){const t=xn(s);let n,a=s;function i(r,l){if(s==null)return t.set(s=r),Promise.resolve();a=r;let o=n,u=!1,{delay:f=0,duration:p=400,easing:b=cn,interpolate:y=Gt}=Ft(Ft({},e),l);if(p===0)return o&&(o.abort(),o=null),t.set(s=a),Promise.resolve();const T=Wn()+f;let q;return n=Kn(k=>{if(k<T)return!0;u||(q=y(s,r),typeof p=="function"&&(p=p(s,r)),u=!0),o&&(o.abort(),o=null);const w=k-T;return w>p?(t.set(s=r),!1):(t.set(s=q(b(w/p))),!0)}),n.promise}return{set:i,update:(r,l)=>i(r(a,s),l),subscribe:t.subscribe}}function _s(s,e,t,n){if(e===0&&t===0)return s;const a=["a","b","c","d","e","f","g","h"],i=["8","7","6","5","4","3","2","1"],r=a[n?7-a.indexOf(s[0])-e:a.indexOf(s[0])+e],l=i[n?7-i.indexOf(s[1])-t:i.indexOf(s[1])+t];if(!(!r||!l))return`${r}${l}`}function vs(s,e,t){const n=e*1.15,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",(s.offsetWidth*n).toString()),a.setAttribute("height",(s.offsetHeight*n).toString()),a.style.position="absolute",a.style.zIndex="100",a.style.translate=`${t?"":"-"}${25*n/2}% -${25*n/2}%`,a.style.opacity="0.2",i.setAttribute("r",(s.offsetWidth*n/2).toString()),i.setAttribute("cx",(s.offsetWidth*n/2).toString()),i.setAttribute("cy",(s.offsetHeight*n/2).toString()),i.setAttribute("fill","black"),a.appendChild(i),a}function aa(s,e){let t;function n(I,z=1e3){let N=!1;const J=()=>{t==null?N=!1:(I(...t),t=null,setTimeout(J,z))};return(...le)=>{if(N){t=le;return}I(...le),N=!0,setTimeout(J,z)}}let a,i,r,l,o,u,f,p,b=!1,y;const T=s.parentNode;let q,k=!1,{startSquare:w,boardFlipped:d,mouseEvents:m,canDrag:S,canSelect:v,duration:P,easingFunc:W}=e;const{coords:j}=e;s.style.cursor=!S&&!v?"default":"pointer";let V=ls(j).x,O=ls(j).y;const G=1.6;let re=vs(s,G,d);s.draggable=!1;function pe(I){const z=I.clientX-a,N=I.clientY-i;if(a=I.clientX,i=I.clientY,o+=z,u+=N,b||(Math.abs(o)>1||Math.abs(u)>1)&&(j.update(J=>({x:J.x+(a-s.offsetWidth/2-s.getBoundingClientRect().x)/s.clientWidth,y:I.pointerType==="touch"?J.y-(i-s.offsetHeight*1.5-s.getBoundingClientRect().y)/s.clientWidth:J.y-(i-s.offsetHeight/2-s.getBoundingClientRect().y)/s.clientWidth,scale:I.pointerType==="touch"?G:1}),{duration:P,easing:W}),b=!0,s.style.zIndex="30",s.style.cursor="grabbing",s.dispatchEvent(new CustomEvent("startMoving"))),!!b){if(I.pointerType==="touch"){const J=Math.floor((o+r)/s.offsetWidth),le=Math.floor((u+l)/s.offsetHeight),L=_s(w,J,le,d);if(L){if(L!==q){const H=Ot(L);re.style.left=`${H.x*12.5}%`,re.style.top=`${H.y*12.5}%`,T.appendChild(re)}}else q&&(q=void 0)}j.update(J=>({x:J.x+z/s.clientWidth,y:J.y-N/s.clientWidth,scale:I.pointerType==="touch"?G:1}),{duration:0}),s.dispatchEvent(new CustomEvent("moving",{detail:{x:a,y:i}}))}}const ue=n(pe,10);function h(){const I=window.scrollX-f,z=window.scrollY-p;f=window.scrollX,p=window.scrollY,j.update(N=>({x:N.x+I,y:N.y+z,scale:1}),{duration:0})}function _(){window.removeEventListener("pointermove",ue),window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",_),document.body.removeEventListener("pointerleave",_),window.removeEventListener("scroll",h),t=null;const I=Math.floor((o+r)/s.offsetWidth),z=Math.floor((u+l)/s.offsetHeight),N=_s(w,I,z,d);k=!1,s.dispatchEvent(new CustomEvent("dropped",{detail:N})),j.update(()=>({x:V,y:O,scale:1}),{duration:P,easing:W}).then(()=>{k||s.dispatchEvent(new CustomEvent("animationEnded")),k||(s.style.zIndex="2")}),a=0,i=0,o=0,u=0,s.style.cursor=!S&&!v?"default":"pointer",setTimeout(()=>{k||(s.style.zIndex="2")},P),b=!1,re.remove()}function g(I){if(I.button!==0||!I.isPrimary||!m)return;if((v||S)&&s.dispatchEvent(new CustomEvent("clicked")),!S){s.dispatchEvent(new CustomEvent("dropped",{detail:w}));return}V=d?7-jt(w[0]):jt(w[0]),O=d?8-parseInt(w[1],10):parseInt(w[1],10)-1,q=w;const z=I.target.getBoundingClientRect();I.pointerType==="touch"?(a=I.clientX,i=I.clientY,r=I.clientX-z.x,l=I.clientY-z.y):(a=I.clientX,i=I.clientY,r=I.offsetX,l=I.offsetY),o=0,u=0,f=window.scrollX,p=window.scrollY,k=!0,window.addEventListener("pointermove",ue),window.addEventListener("pointerup",_),window.addEventListener("pointercancel",_),document.body.addEventListener("pointerleave",_),window.addEventListener("scroll",h)}function A(I){I.preventDefault()}function F(I){I.preventDefault()}return s.addEventListener("contextmenu",A),s.addEventListener("dragstart",F),s.addEventListener("pointerdown",g),{destroy(){s.removeEventListener("pointerdown",g),s.removeEventListener("contextmenu",A),s.removeEventListener("dragstart",F),window.clearTimeout(y)},update(I){w=I.startSquare,P=I.duration,W=I.easingFunc,(I.canDrag!==S||I.canSelect!==v)&&(s.style.cursor=!I.canDrag&&!I.canSelect?"default":"pointer"),I.canDrag!==S&&(S=I.canDrag),I.canSelect!==v&&(v=I.canSelect),I.mouseEvents!==m&&(m=I.mouseEvents),d!==I.boardFlipped&&(re=vs(s,G,I.boardFlipped)),d=I.boardFlipped}}}const Es=""+new URL("../../assets/wP-f78bae6c.svg",import.meta.url).href,ra=""+new URL("../../assets/wR-5eb92d73.svg",import.meta.url).href,la=""+new URL("../../assets/wN-a4c975a2.svg",import.meta.url).href,oa=""+new URL("../../assets/wB-1ff2f149.svg",import.meta.url).href,ua=""+new URL("../../assets/wQ-8568b485.svg",import.meta.url).href,fa=""+new URL("../../assets/wK-4cdf6dc9.svg",import.meta.url).href,da=""+new URL("../../assets/bP-84e521e8.svg",import.meta.url).href,ha=""+new URL("../../assets/bR-e39efb08.svg",import.meta.url).href,ca=""+new URL("../../assets/bN-d3912d91.svg",import.meta.url).href,ga=""+new URL("../../assets/bB-c430b746.svg",import.meta.url).href,ba=""+new URL("../../assets/bQ-c7b9a43e.svg",import.meta.url).href,ma=""+new URL("../../assets/bK-3500a2e6.svg",import.meta.url).href;function Qt(s){switch(s){case"wP":return Es;case"wR":return ra;case"wN":return la;case"wB":return oa;case"wQ":return ua;case"wK":return fa;case"bP":return da;case"bR":return ha;case"bN":return ca;case"bB":return ga;case"bQ":return ba;case"bK":return ma;default:return Es}}function pa(s){let e,t,n,a,i;return{c(){e=B("img"),this.h()},l(r){e=U(r,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){ye(e,"left",s[9].x*12.5+"%"),ye(e,"bottom",s[9].y*12.5+"%"),ye(e,"scale",s[9].scale),ye(e,"z-Index",s[4]?0:s[8]),ye(e,"opacity",s[4]?.3:1),ye(e,"cursor","pointer"),c(e,"class","noselect svelte-1g241z"),gt(e.src,t=Qt(s[2]))||c(e,"src",t),c(e,"alt",s[2])},m(r,l){var o,u,f;X(r,e,l),a||(i=[Jt(n=aa.call(null,e,{startSquare:s[1],mouseEvents:s[0],canDrag:s[13](s[7],s[6]),canSelect:s[14](s[7],s[5]),boardFlipped:s[3],duration:(o=s[6])!=null&&o.transition.enabled?s[6].transition.settings.duration:0,easingFunc:Rt[(f=(u=s[6])==null?void 0:u.transition.settings.easing)!=null?f:"cubicInOut"],coords:s[11]})),de(e,"dropped",s[12]),de(e,"clicked",s[17]),de(e,"startMoving",s[18]),de(e,"animationEnded",s[19]),de(e,"moving",s[20])],a=!0)},p(r,[l]){var o,u,f;l&512&&ye(e,"left",r[9].x*12.5+"%"),l&512&&ye(e,"bottom",r[9].y*12.5+"%"),l&512&&ye(e,"scale",r[9].scale),l&272&&ye(e,"z-Index",r[4]?0:r[8]),l&16&&ye(e,"opacity",r[4]?.3:1),l&4&&!gt(e.src,t=Qt(r[2]))&&c(e,"src",t),l&4&&c(e,"alt",r[2]),n&&xt(n.update)&&l&235&&n.update.call(null,{startSquare:r[1],mouseEvents:r[0],canDrag:r[13](r[7],r[6]),canSelect:r[14](r[7],r[5]),boardFlipped:r[3],duration:(o=r[6])!=null&&o.transition.enabled?r[6].transition.settings.duration:0,easingFunc:Rt[(f=(u=r[6])==null?void 0:u.transition.settings.easing)!=null?f:"cubicInOut"],coords:r[11]})},i:Te,o:Te,d(r){r&&E(e),a=!1,Je(i)}}}function _a(s,e,t){var h,_;let n,a,{square:i}=e,{name:r}=e,{mouseEvents:l=!0}=e,{getGridCoordsFromSquare:o}=e,{flipped:u}=e,{isGhost:f=!1}=e;f&&(l=!1);let{selectableState:p=void 0}=e,{draggableState:b=void 0}=e,{legalState:y=void 0}=e,{movableState:T=void 0}=e,q=!1;const k=Dt();let w=(h=b==null?void 0:b.transition)!=null&&h.enabled?b.transition.settings.duration:0;const d=ia({x:0,y:0,scale:1},{duration:w,easing:Rt[(_=b==null?void 0:b.transition.settings.easing)!=null?_:"cubicInOut"]});jn(s,d,g=>t(9,a=g));let m=!1;const S=g=>g[0]==="w"?_e.WHITE:_e.BLACK,v=g=>{var F;const A=o(g);d.update(()=>({x:A.x,y:A.y,scale:1}),{duration:m?w:0,easing:Rt[(F=b==null?void 0:b.transition.settings.easing)!=null?F:"cubicInOut"]}),m||(m=!0),w=b!=null&&b.transition.enabled?b.transition.settings.duration:0},P=g=>{w=0,g.detail||k("deselect"),i===g.detail?(!q&&V(T,p)?k("select"):k("deselect"),q=!q):q=!1,j(T,b)&&k("endDragging",i+g.detail),i!==g.detail&&g.detail&&k("move",i+g.detail)},W=g=>y!=null&&y.enabled?!!(y.preMoves.enabled&&S(r)===g.color||g.color===_e.WHITE&&y.whiteToMove&&S(r)===_e.WHITE||g.color===_e.BLACK&&!y.whiteToMove&&S(r)===_e.BLACK||g.color===_e.BOTH&&(S(r)===_e.WHITE&&y.whiteToMove||S(r)===_e.BLACK&&!y.whiteToMove)):g.color===S(r)||g.color===_e.BOTH,j=(g,A)=>!(g!=null&&g.enabled)||!(A!=null&&A.enabled)||!l?!1:W(g),V=(g,A)=>!(g!=null&&g.enabled)||!(A!=null&&A.enabled)||!l?!1:W(g),O=g=>g===void 0||g.name!==r||g.square!==i;function G(g){Ze.call(this,s,g)}function re(g){Ze.call(this,s,g)}function pe(g){Ze.call(this,s,g)}const ue=g=>{k("moving",g.detail)};return s.$$set=g=>{"square"in g&&t(1,i=g.square),"name"in g&&t(2,r=g.name),"mouseEvents"in g&&t(0,l=g.mouseEvents),"getGridCoordsFromSquare"in g&&t(15,o=g.getGridCoordsFromSquare),"flipped"in g&&t(3,u=g.flipped),"isGhost"in g&&t(4,f=g.isGhost),"selectableState"in g&&t(5,p=g.selectableState),"draggableState"in g&&t(6,b=g.draggableState),"legalState"in g&&t(16,y=g.legalState),"movableState"in g&&t(7,T=g.movableState)},s.$$.update=()=>{s.$$.dirty&32&&O(p==null?void 0:p.selectedPiece)&&(q=!1),s.$$.dirty&10&&v(i),s.$$.dirty&128&&t(8,n=typeof T=="boolean"?T?2:1:T!=null&&T.enabled?2:1)},[l,i,r,u,f,p,b,T,n,a,k,d,P,j,V,o,y,G,re,pe,ue]}class kn extends Fe{constructor(e){super(),qe(this,e,_a,pa,Re,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:15,flipped:3,isGhost:4,selectableState:5,draggableState:6,legalState:16,movableState:7})}}function va(s){let e,t;return{c(){e=B("div"),this.h()},l(n){e=U(n,"DIV",{style:!0,class:!0}),K(e).forEach(E),this.h()},h(){ye(e,"left",s[3]*12.5+"%"),ye(e,"bottom",s[4]*12.5+"%"),c(e,"class",t="noselect "+Qe.squareStyles[s[1]][s[0]]+(s[2]?"":" pointer-events-none")+" svelte-10vytug")},m(n,a){X(n,e,a)},p(n,[a]){a&8&&ye(e,"left",n[3]*12.5+"%"),a&16&&ye(e,"bottom",n[4]*12.5+"%"),a&7&&t!==(t="noselect "+Qe.squareStyles[n[1]][n[0]]+(n[2]?"":" pointer-events-none")+" svelte-10vytug")&&c(e,"class",t)},i:Te,o:Te,d(n){n&&E(e)}}}function Ea(s,e,t){let{square:n}=e,{color:a}=e,{getGridCoordsFromSquare:i}=e,{flipped:r}=e,{theme:l}=e,{mouseEvents:o=!0}=e,u,f;const p=()=>{const b=i(n);t(3,u=b.x),t(4,f=b.y)};return s.$$set=b=>{"square"in b&&t(5,n=b.square),"color"in b&&t(0,a=b.color),"getGridCoordsFromSquare"in b&&t(6,i=b.getGridCoordsFromSquare),"flipped"in b&&t(7,r=b.flipped),"theme"in b&&t(1,l=b.theme),"mouseEvents"in b&&t(2,o=b.mouseEvents)},s.$$.update=()=>{s.$$.dirty&128&&p()},[a,l,o,u,f,n,i,r]}class ka extends Fe{constructor(e){super(),qe(this,e,Ea,va,Re,{square:5,color:0,getGridCoordsFromSquare:6,flipped:7,theme:1,mouseEvents:2})}}const Ma=["a","b","c","d","e","f","g","h"],wa=["8","7","6","5","4","3","2","1"];function Sa(s){s.querySelectorAll("[sf]").forEach(e=>e.remove())}function Xt(s){return`${Ma[s.x]}${wa[s.y]}`}function Mn(s,e){return Math.abs((s.x-e.x)*(s.y-e.y))===2}function Yt(s,e){return`${Xt(s)}${Xt(e)}`}function ya(s,e){return!!(Mn(s,e)||Math.abs(s.x-e.x)===Math.abs(s.y-e.y)||s.x===e.x!=(s.y===e.y))}function wn(s,e,t,n,a,i){let r={x:-1,y:-1},l,o;Mn(e,t)&&n?(Math.abs(t.x-e.x)===2?r={x:t.x,y:e.y}:r={x:e.x,y:t.y},r.y-e.y<0?o=Math.PI+Math.atan((r.x-e.x)/(r.y-e.y)):o=Math.atan((r.x-e.x)/Math.abs(r.y-e.y)),l={x:t.x-Math.sign(t.x-r.x)*(r.x!==t.x?.4:0),y:t.y-Math.sign(t.y-r.y)*(r.y!==t.y?.4:0)}):(t.y-e.y<0?o=Math.PI+Math.atan((t.x-e.x)/(t.y-e.y)):o=Math.atan((t.x-e.x)/Math.abs(t.y-e.y)),l={x:t.x-Math.sin(o)*.4,y:t.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};s.setAttribute("points",`${u.x+.5},${u.y+.5} ${r.x!==-1&&r.y!==-1&&n?`${r.x+.5},${r.y+.5} `:""}${l.x+.5},${l.y+.5}`),s.setAttribute("data-sqID",`${Yt(e,t)}`),i!==void 0&&s.setAttribute("opacity",`${i}`),a!==void 0&&(s.setAttribute("marker-start",`url(#start-${a[0]})`),s.setAttribute("marker-end",`url(#end-${a[0]})`),s.setAttribute("stroke",a))}function It(s,e,t,n,a,i){if(!(e===void 0||t.x===-1&&t.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),n?e.setAttribute("stroke","red"):a?e.setAttribute("stroke","orange"):i?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),s.querySelectorAll(`\u0441ircle[cx="${t.x+.5}"][cy="${t.y+.5}"]`).forEach(r=>{e!==void 0&&r!==e&&(r.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const r=n?"red":a?"orange":i?"blue":"green";e.setAttribute("stroke",`${r}`),e.setAttribute("marker-start",`url(#start-${r[0]})`),e.setAttribute("marker-end",`url(#end-${r[0]})`),s.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(l=>{e instanceof SVGPolylineElement&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function Sn(s,e,t,n,a){const i=document.createElementNS("http://www.w3.org/2000/svg","polyline");return wn(i,s,e,t,n,a),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.25"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("opacity",a!==void 0?`${a}`:"0.4"),i.setAttribute("marker-start",n?`url(#start-${n[0]})`:"url(#start-g)"),i.setAttribute("marker-end",n?`url(#end-${n[0]})`:"url(#end-g)"),i.setAttribute("stroke",n||"green"),i}function Zt(s,e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",`${s.x+.5}`),n.setAttribute("cy",`${s.y+.5}`),n.setAttribute("r","0.465"),n.setAttribute("opacity",t?`${t}`:"0.4"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","0.07"),n.setAttribute("stroke",e!=null?e:"green"),n}function Ca(s,e,t){e.forEach(n=>{if(n.type==="circle"){const a=Ot(n.square),i=Zt(a,n.color,n.opacity);s.appendChild(i)}else if(n.type==="arrow"){const a=Sn(Ot(n.from),Ot(n.to),t,n.color,n.opacity);a.setAttribute("fixed",""),s.appendChild(a)}})}function ks(s){s.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("sf")||e.remove()})}function Aa(s,e){let{svg:t,flipped:n,enabled:a,settings:i}=e,r=!1,l={x:-1,y:-1},o,u;function f(k,w){const d=s.getBoundingClientRect(),m=n?d.width-(k-d.left):k-d.left,S=n?d.height-(w-d.top):w-d.top;return{x:Math.max(0,Math.min(7,Math.floor(m/(s.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(S/(s.clientHeight/8))))}}function p(k){if(u===void 0||l.x===-1&&l.y===-1)return;const w=f(k.clientX,k.clientY);i.onlyChessMove&&!ya(l,w)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),l.x===w.x&&l.y===w.y?(Yt(l,w),u instanceof SVGPolylineElement&&(u.remove(),u=Zt(w)),It(t,u,l,k.shiftKey,k.ctrlKey,k.altKey),t.appendChild(u),t.querySelectorAll(`circle[cx="${l.x+.5}"][cy="${l.y+.5}"]`).forEach(d=>{d!==u&&(o=d,u!==void 0&&d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,t.querySelectorAll(`polyline[data-sqID="${Yt(l,w)}"]`).forEach(d=>{u===void 0||l.x===-1&&l.y===-1||d===u||(o=d,d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=Sn(l,w,i.knightLShape),It(t,u,l,k.shiftKey,k.ctrlKey,k.altKey),t.appendChild(u)):u instanceof SVGPolylineElement&&wn(u,l,w,i.knightLShape)))}function b(k){k.preventDefault()}function y(k){k.preventDefault(),It(t,u,l,k.shiftKey,k.ctrlKey,k.altKey)}function T(k){if(k.button===0)r=!1;else if(k.button===2){if(l.x===-1&&l.y===-1)return;t.querySelectorAll("[remove]").forEach(w=>{w.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:Xt(l),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,l={x:-1,y:-1},r=!1,window.removeEventListener("mousemove",p),window.removeEventListener("keydown",y),window.removeEventListener("keyup",y),window.removeEventListener("contextmenu",b)}window.removeEventListener("mouseup",T)}function q(k){if(k.button===0)r=!0,ks(t),window.addEventListener("mouseup",T);else if(k.button===2&&!r){const w=f(k.clientX,k.clientY);l=w,u=Zt(w),It(t,u,l,k.shiftKey,k.ctrlKey,k.altKey),o=void 0,t.querySelectorAll(`circle[cx="${w.x+.5}"][cy="${w.y+.5}"]`).forEach(d=>{o=d,u!==void 0&&d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&t.appendChild(u),window.addEventListener("mousemove",p),window.addEventListener("mouseup",T),window.addEventListener("keydown",y),window.addEventListener("keyup",y),window.addEventListener("contextmenu",b)}}return a&&s.addEventListener("mousedown",q),{update(k){k.svg!==t&&(t=k.svg),k.enabled!==a&&(a=k.enabled,a?s.addEventListener("mousedown",q):(ks(t),s.removeEventListener("mousedown",q))),i=k.settings,n=k.flipped}}}function Ms(s,e,t){const n=s.slice();return n[8]=e[t],n}function ws(s){let e,t,n,a;return{c(){e=Ve("marker"),t=Ve("path"),n=Ve("marker"),a=Ve("path"),this.h()},l(i){e=We(i,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var r=K(e);t=We(r,"path",{fill:!0,d:!0}),K(t).forEach(E),r.forEach(E),n=We(i,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var l=K(n);a=We(l,"path",{fill:!0,d:!0}),K(a).forEach(E),l.forEach(E),this.h()},h(){c(t,"fill",s[8]),c(t,"d","M 5 0 Q 0 0 0 5 L 0 15 Q 0 20 5 20 Z"),c(e,"id","start-"+s[8][0]),c(e,"viewBox","0 0 5 20"),c(e,"refX","4"),c(e,"refY","10"),c(e,"markerUnits","strokeWidth"),c(e,"markerWidth","0.5"),c(e,"markerHeight","1"),c(e,"orient","auto"),c(a,"fill",s[8]),c(a,"d","M 0 4 L 10 10 L 0 16 Z"),c(n,"id","end-"+s[8][0]),c(n,"viewBox","0 0 10 20"),c(n,"refX","0.2"),c(n,"refY","10"),c(n,"markerUnits","strokeWidth"),c(n,"orient","auto"),c(n,"fill","currentColor")},m(i,r){X(i,e,r),C(e,t),X(i,n,r),C(n,a)},p:Te,d(i){i&&E(e),i&&E(n)}}}function Pa(s){let e,t,n,a=s[2],i=[];for(let r=0;r<a.length;r+=1)i[r]=ws(Ms(s,a,r));return{c(){e=Ve("svg"),t=Ve("defs");for(let r=0;r<i.length;r+=1)i[r].c();n=Ve("g"),this.h()},l(r){e=We(r,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var l=K(e);t=We(l,"defs",{});var o=K(t);for(let u=0;u<i.length;u+=1)i[u].l(o);o.forEach(E),n=We(l,"g",{}),K(n).forEach(E),l.forEach(E),this.h()},h(){c(e,"xmlns","http://www.w3.org/2000/svg"),ye(e,"transform","rotate("+(s[1]?"180deg":"0deg")+")"),c(e,"viewBox","0 0 8 8"),c(e,"class","svelte-19gv2n4")},m(r,l){X(r,e,l),C(e,t);for(let o=0;o<i.length;o+=1)i[o].m(t,null);C(e,n),s[5](n)},p(r,[l]){if(l&4){a=r[2];let o;for(o=0;o<a.length;o+=1){const u=Ms(r,a,o);i[o]?i[o].p(u,l):(i[o]=ws(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=a.length}l&2&&ye(e,"transform","rotate("+(r[1]?"180deg":"0deg")+")")},i:Te,o:Te,d(r){r&&E(e),ut(i,r),s[5](null)}}}function Ta(s,e,t){let{flipped:n=!1}=e,{svg:a}=e,{knightLShape:i=!1}=e,{tools:r=[]}=e,l=!1;function o(p){!l||(Sa(a),Ca(a,p,i))}$t(()=>{l=!0,o(r)});const u=["green","red","blue","orange"];function f(p){fe[p?"unshift":"push"](()=>{a=p,t(0,a)})}return s.$$set=p=>{"flipped"in p&&t(1,n=p.flipped),"svg"in p&&t(0,a=p.svg),"knightLShape"in p&&t(3,i=p.knightLShape),"tools"in p&&t(4,r=p.tools)},s.$$.update=()=>{s.$$.dirty&16&&o(r)},[a,n,u,i,r,f]}class La extends Fe{constructor(e){super(),qe(this,e,Ta,Pa,Re,{flipped:1,svg:0,knightLShape:3,tools:4})}}function Ss(s,{delay:e=0,duration:t=400,easing:n=ts,x:a=0,y:i=0,opacity:r=0}={}){const l=getComputedStyle(s),o=+l.opacity,u=l.transform==="none"?"":l.transform,f=o*(1-r);return{delay:e,duration:t,easing:n,css:(p,b)=>`
			transform: ${u} translate(${(1-p)*a}px, ${(1-p)*i}px);
			opacity: ${o-f*b}`}}function dt(s,{delay:e=0,duration:t=400,easing:n=ts}={}){const a=getComputedStyle(s),i=+a.opacity,r=parseFloat(a.height),l=parseFloat(a.paddingTop),o=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),f=parseFloat(a.marginBottom),p=parseFloat(a.borderTopWidth),b=parseFloat(a.borderBottomWidth);return{delay:e,duration:t,easing:n,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*i};height: ${y*r}px;padding-top: ${y*l}px;padding-bottom: ${y*o}px;margin-top: ${y*u}px;margin-bottom: ${y*f}px;border-top-width: ${y*p}px;border-bottom-width: ${y*b}px;`}}function Ia(s){let e,t,n,a,i,r;return{c(){e=B("button"),t=B("img"),this.h()},l(l){e=U(l,"BUTTON",{});var o=K(e);t=U(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(E),this.h()},h(){gt(t.src,n=s[1])||c(t,"src",n),c(t,"alt",a="Promotion to "+s[0].toUpperCase()),c(t,"class","svelte-17pqsbb")},m(l,o){X(l,e,o),C(e,t),i||(r=de(e,"click",s[2]),i=!0)},p(l,[o]){o&1&&a!==(a="Promotion to "+l[0].toUpperCase())&&c(t,"alt",a)},i:Te,o:Te,d(l){l&&E(e),i=!1,r()}}}function Oa(s,e,t){let{piece:n}=e,{isWhite:a}=e,{showModal:i}=e;const r=Dt(),l=(a?"w":"b")+n.toUpperCase(),o=Qt(l),u=()=>{r("newPromotion",n),t(3,i=!1)};return s.$$set=f=>{"piece"in f&&t(0,n=f.piece),"isWhite"in f&&t(4,a=f.isWhite),"showModal"in f&&t(3,i=f.showModal)},[n,o,u,i,a]}class Fa extends Fe{constructor(e){super(),qe(this,e,Oa,Ia,Re,{piece:0,isWhite:4,showModal:3})}}function ys(s,e,t){const n=s.slice();return n[6]=e[t],n}function Cs(s){let e,t,n,a,i,r=["q","r","b","n"],l=[];for(let u=0;u<4;u+=1)l[u]=As(ys(s,r,u));const o=u=>ie(l[u],1,1,()=>{l[u]=null});return{c(){e=B("div"),t=B("div");for(let u=0;u<4;u+=1)l[u].c();this.h()},l(u){e=U(u,"DIV",{class:!0});var f=K(e);t=U(f,"DIV",{class:!0});var p=K(t);for(let b=0;b<4;b+=1)l[b].l(p);p.forEach(E),f.forEach(E),this.h()},h(){c(t,"class","modal-content svelte-it5mr1"),c(e,"class","modal svelte-it5mr1")},m(u,f){X(u,e,f),C(e,t);for(let p=0;p<4;p+=1)l[p].m(t,null);i=!0},p(u,f){if(f&3){r=["q","r","b","n"];let p;for(p=0;p<4;p+=1){const b=ys(u,r,p);l[p]?(l[p].p(b,f),Z(l[p],1)):(l[p]=As(b),l[p].c(),Z(l[p],1),l[p].m(t,null))}for(He(),p=4;p<4;p+=1)o(p);ze()}},i(u){if(!i){for(let f=0;f<4;f+=1)Z(l[f]);tt(()=>{a&&a.end(1),n=Gn(t,Ss,{x:100,duration:300}),n.start()}),i=!0}},o(u){l=l.filter(Boolean);for(let f=0;f<4;f+=1)ie(l[f]);n&&n.invalidate(),a=Qn(t,Ss,{x:-200,duration:100}),i=!1},d(u){u&&E(e),ut(l,u),u&&a&&a.end()}}}function As(s){let e,t,n,a;function i(o){s[3](o)}function r(o){s[4](o)}let l={piece:s[6]};return s[1]!==void 0&&(l.isWhite=s[1]),s[0]!==void 0&&(l.showModal=s[0]),e=new Fa({props:l}),fe.push(()=>ce(e,"isWhite",i)),fe.push(()=>ce(e,"showModal",r)),e.$on("newPromotion",s[5]),{c(){Ee(e.$$.fragment)},l(o){ke(e.$$.fragment,o)},m(o,u){Me(e,o,u),a=!0},p(o,u){const f={};!t&&u&2&&(t=!0,f.isWhite=o[1],ge(()=>t=!1)),!n&&u&1&&(n=!0,f.showModal=o[0],ge(()=>n=!1)),e.$set(f)},i(o){a||(Z(e.$$.fragment,o),a=!0)},o(o){ie(e.$$.fragment,o),a=!1},d(o){we(e,o)}}}function qa(s){let e,t,n=s[0]&&Cs(s);return{c(){n&&n.c(),e=Ce()},l(a){n&&n.l(a),e=Ce()},m(a,i){n&&n.m(a,i),X(a,e,i),t=!0},p(a,[i]){a[0]?n?(n.p(a,i),i&1&&Z(n,1)):(n=Cs(a),n.c(),Z(n,1),n.m(e.parentNode,e)):n&&(He(),ie(n,1,1,()=>{n=null}),ze())},i(a){t||(Z(n),t=!0)},o(a){ie(n),t=!1},d(a){n&&n.d(a),a&&E(e)}}}function Ra(s,e,t){let n=!1,a;function i(u){t(0,n=!0),u?t(1,a=!0):t(1,a=!1)}function r(u){a=u,t(1,a)}function l(u){n=u,t(0,n)}function o(u){Ze.call(this,s,u)}return[n,a,i,r,l,o]}class Na extends Fe{constructor(e){super(),qe(this,e,Ra,qa,Re,{openPromotionModal:2})}get openPromotionModal(){return this.$$.ctx[2]}}const Da=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,Ba=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,Ua=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,Ha=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function Ps(s){let e,t,n,a;return{c(){e=B("audio"),t=B("track"),n=B("source"),this.h()},l(i){e=U(i,"AUDIO",{preload:!0});var r=K(e);t=U(r,"TRACK",{kind:!0}),n=U(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){c(t,"kind","captions"),gt(n.src,a=Da)||c(n,"src",a),c(e,"preload","auto")},m(i,r){X(i,e,r),C(e,t),C(e,n),s[3](e)},p:Te,d(i){i&&E(e),s[3](null)}}}function Ts(s){let e,t,n,a;return{c(){e=B("audio"),t=B("track"),n=B("source"),this.h()},l(i){e=U(i,"AUDIO",{preload:!0});var r=K(e);t=U(r,"TRACK",{kind:!0}),n=U(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){c(t,"kind","captions"),gt(n.src,a=Ba)||c(n,"src",a),c(e,"preload","auto")},m(i,r){X(i,e,r),C(e,t),C(e,n),s[4](e)},p:Te,d(i){i&&E(e),s[4](null)}}}function Ls(s){let e,t,n,a;return{c(){e=B("audio"),t=B("track"),n=B("source"),this.h()},l(i){e=U(i,"AUDIO",{preload:!0});var r=K(e);t=U(r,"TRACK",{kind:!0}),n=U(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){c(t,"kind","captions"),gt(n.src,a=Ua)||c(n,"src",a),c(e,"preload","auto")},m(i,r){X(i,e,r),C(e,t),C(e,n),s[5](e)},p:Te,d(i){i&&E(e),s[5](null)}}}function Is(s){let e,t,n,a;return{c(){e=B("audio"),t=B("track"),n=B("source"),this.h()},l(i){e=U(i,"AUDIO",{preload:!0});var r=K(e);t=U(r,"TRACK",{kind:!0}),n=U(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){c(t,"kind","captions"),gt(n.src,a=Ha)||c(n,"src",a),c(e,"preload","auto")},m(i,r){X(i,e,r),C(e,t),C(e,n),s[6](e)},p:Te,d(i){i&&E(e),s[6](null)}}}function za(s){let e,t,n,a,i=s[0].MOVE&&Ps(s),r=s[0].CAPTURE&&Ts(s),l=s[0].CASTLE&&Ls(s),o=s[0].UNDO&&Is(s);return{c(){i&&i.c(),e=$(),r&&r.c(),t=$(),l&&l.c(),n=$(),o&&o.c(),a=Ce()},l(u){i&&i.l(u),e=ee(u),r&&r.l(u),t=ee(u),l&&l.l(u),n=ee(u),o&&o.l(u),a=Ce()},m(u,f){i&&i.m(u,f),X(u,e,f),r&&r.m(u,f),X(u,t,f),l&&l.m(u,f),X(u,n,f),o&&o.m(u,f),X(u,a,f)},p(u,[f]){u[0].MOVE?i?i.p(u,f):(i=Ps(u),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),u[0].CAPTURE?r?r.p(u,f):(r=Ts(u),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),u[0].CASTLE?l?l.p(u,f):(l=Ls(u),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),u[0].UNDO?o?o.p(u,f):(o=Is(u),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:Te,o:Te,d(u){i&&i.d(u),u&&E(e),r&&r.d(u),u&&E(t),l&&l.d(u),u&&E(n),o&&o.d(u),u&&E(a)}}}function Va(s,e,t){let{settings:n}=e;const a={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},i=()=>{a.CASTLE&&(a.CASTLE.pause(),t(1,a.CASTLE.currentTime=0,a)),a.MOVE&&(a.MOVE.pause(),t(1,a.MOVE.currentTime=0,a)),a.CAPTURE&&(a.CAPTURE.pause(),t(1,a.CAPTURE.currentTime=0,a)),a.UNDO&&(a.UNDO.pause(),t(1,a.UNDO.currentTime=0,a))},r=b=>b===void 0||n[b];function l(b){switch(i(),b){case"MOVE":a.MOVE&&r("MOVE")&&a.MOVE.play();break;case"CAPTURE":a.CAPTURE&&r("CAPTURE")?a.CAPTURE.play():a.MOVE&&r("MOVE")&&a.MOVE.play();break;case"CASTLE":a.CASTLE&&r("CASTLE")?a.CASTLE.play():a.MOVE&&r("MOVE")&&a.MOVE.play();break;case"UNDO":a.UNDO&&r("UNDO")?(t(1,a.UNDO.volume=.3,a),a.UNDO.play()):a.MOVE&&r("MOVE")&&a.MOVE.play();break}}function o(b){fe[b?"unshift":"push"](()=>{a.MOVE=b,t(1,a)})}function u(b){fe[b?"unshift":"push"](()=>{a.CAPTURE=b,t(1,a)})}function f(b){fe[b?"unshift":"push"](()=>{a.CASTLE=b,t(1,a)})}function p(b){fe[b?"unshift":"push"](()=>{a.UNDO=b,t(1,a)})}return s.$$set=b=>{"settings"in b&&t(0,n=b.settings)},[n,a,l,o,u,f,p]}class Wa extends Fe{constructor(e){super(),qe(this,e,Va,za,Re,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Os=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,Fs=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function Ka(s,e){const{minWidth:t,maxWidth:n,curWidth:a}=e;let{mouseEvents:i}=e,r=a,l,o,u,f;function p(T){T.stopPropagation(),s.dispatchEvent(new CustomEvent("resizing",{detail:{size:Math.max(Math.max(t,Math.min(n,u+(T.pageX-l))),Math.max(t,Math.min(n,f+(T.pageY-o))))}}))}function b(T){T.stopPropagation(),s.dispatchEvent(new CustomEvent("endResizing",{detail:{size:Math.max(Math.max(t,Math.min(n,u+Math.floor((T.pageX-l)/8)*8)),Math.max(t,Math.min(n,f+Math.floor((T.pageY-o)/8)*8)))}})),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",b)}function y(T){!i||(T.stopPropagation(),T.button===0&&(l=T.pageX,u=r,o=T.pageY,f=r,window.addEventListener("mousemove",p),window.addEventListener("mouseup",b)))}return s.addEventListener("mousedown",y),{update(T){r=T.curWidth,i!==T.mouseEvents&&(i=T.mouseEvents)},destroy(){s.removeEventListener("mousedown",y)}}}function ja(s){let e,t,n,a,i,r,l;return{c(){e=B("div"),t=Ve("svg"),n=Ve("path"),this.h()},l(o){e=U(o,"DIV",{style:!0,class:!0});var u=K(e);t=We(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var f=K(t);n=We(f,"path",{d:!0}),K(n).forEach(E),f.forEach(E),u.forEach(E),this.h()},h(){c(n,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"viewBox","0 0 16 16"),c(t,"fill","currentColor"),ye(e,"color",Qe.colors[s[0].state.board.boardTheme].black),c(e,"class",a=os(s[2]?"cursor-nwse-resize":"")+" svelte-1ssh93t")},m(o,u){X(o,e,u),C(e,t),C(t,n),r||(l=[de(e,"pointerdown",gn(s[3])),Jt(i=Ka.call(null,e,{mouseEvents:s[2],minWidth:s[0].state.board.resizible.min,maxWidth:s[0].state.board.resizible.max,curWidth:s[0].state.board.size})),de(e,"resizing",s[4]),de(e,"endResizing",s[5])],r=!0)},p(o,[u]){u&1&&ye(e,"color",Qe.colors[o[0].state.board.boardTheme].black),u&4&&a!==(a=os(o[2]?"cursor-nwse-resize":"")+" svelte-1ssh93t")&&c(e,"class",a),i&&xt(i.update)&&u&5&&i.update.call(null,{mouseEvents:o[2],minWidth:o[0].state.board.resizible.min,maxWidth:o[0].state.board.resizible.max,curWidth:o[0].state.board.size})},i:Te,o:Te,d(o){o&&E(e),r=!1,Je(l)}}}function Ga(s,e,t){let{chessboard:n}=e,{setSize:a}=e,{mouseEvents:i=!0}=e;function r(u){Ze.call(this,s,u)}const l=u=>a(u.detail.size),o=u=>a(u.detail.size);return s.$$set=u=>{"chessboard"in u&&t(0,n=u.chessboard),"setSize"in u&&t(1,a=u.setSize),"mouseEvents"in u&&t(2,i=u.mouseEvents)},[n,a,i,r,l,o]}class Qa extends Fe{constructor(e){super(),qe(this,e,Ga,ja,Re,{chessboard:0,setSize:1,mouseEvents:2})}}function qs(s,e,t){const n=s.slice();return n[73]=e[t],n}function Rs(s,e,t){const n=s.slice();return n[76]=e[t],n}function Ns(s){let e=[],t=new Map,n,a,i=s[5].state.pieces;const r=l=>l[76];for(let l=0;l<i.length;l+=1){let o=Rs(s,i,l),u=r(o);t.set(u,e[l]=Ds(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Ce()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);n=Ce()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);X(l,n,o),a=!0},p(l,o){o[0]&29742&&(i=l[5].state.pieces,He(),e=bn(e,o,r,1,l,i,t,n.parentNode,mn,Ds,n,Rs),ze())},i(l){if(!a){for(let o=0;o<i.length;o+=1)Z(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)ie(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&E(n)}}}function Ds(s,e){let t,n,a;function i(){return e[53](e[76])}function r(){return e[54](e[76])}function l(...u){return e[55](e[76],...u)}function o(){return e[57](e[76])}return n=new kn({props:{square:e[76].square,name:e[76].name,mouseEvents:e[5].state.board.mouseEvents,legalState:e[5].state.legal,draggableState:e[5].state.draggable,selectableState:e[5].state.selectable,movableState:e[5].state.movable,getGridCoordsFromSquare:e[5].getGridCoordsFromSquare,flipped:e[5].flipped}}),n.$on("move",e[12]),n.$on("clicked",i),n.$on("startMoving",r),n.$on("moving",l),n.$on("endDragging",e[56]),n.$on("select",o),n.$on("deselect",e[58]),{key:s,first:null,c(){t=Ce(),Ee(n.$$.fragment),this.h()},l(u){t=Ce(),ke(n.$$.fragment,u),this.h()},h(){this.first=t},m(u,f){X(u,t,f),Me(n,u,f),a=!0},p(u,f){e=u;const p={};f[0]&32&&(p.square=e[76].square),f[0]&32&&(p.name=e[76].name),f[0]&32&&(p.mouseEvents=e[5].state.board.mouseEvents),f[0]&32&&(p.legalState=e[5].state.legal),f[0]&32&&(p.draggableState=e[5].state.draggable),f[0]&32&&(p.selectableState=e[5].state.selectable),f[0]&32&&(p.movableState=e[5].state.movable),f[0]&32&&(p.getGridCoordsFromSquare=e[5].getGridCoordsFromSquare),f[0]&32&&(p.flipped=e[5].flipped),n.$set(p)},i(u){a||(Z(n.$$.fragment,u),a=!0)},o(u){ie(n.$$.fragment,u),a=!1},d(u){u&&E(t),we(n,u)}}}function Bs(s){let e,t;return e=new kn({props:{isGhost:!0,square:s[5].ghostPiece.square,name:s[5].ghostPiece.name,getGridCoordsFromSquare:s[5].getGridCoordsFromSquare,flipped:s[5].flipped}}),{c(){Ee(e.$$.fragment)},l(n){ke(e.$$.fragment,n)},m(n,a){Me(e,n,a),t=!0},p(n,a){const i={};a[0]&32&&(i.square=n[5].ghostPiece.square),a[0]&32&&(i.name=n[5].ghostPiece.name),a[0]&32&&(i.getGridCoordsFromSquare=n[5].getGridCoordsFromSquare),a[0]&32&&(i.flipped=n[5].flipped),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){we(e,n)}}}function Us(s){let e=[],t=new Map,n,a,i=[...s[5].state.markedSquares];const r=l=>l[73];for(let l=0;l<i.length;l+=1){let o=qs(s,i,l),u=r(o);t.set(u,e[l]=Hs(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Ce()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);n=Ce()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);X(l,n,o),a=!0},p(l,o){o[0]&34&&(i=[...l[5].state.markedSquares],He(),e=bn(e,o,r,1,l,i,t,n.parentNode,mn,Hs,n,qs),ze())},i(l){if(!a){for(let o=0;o<i.length;o+=1)Z(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)ie(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&E(n)}}}function Hs(s,e){let t,n,a;return n=new ka({props:{theme:e[5].state.board.boardTheme,square:e[73].square,color:e[73].color,getGridCoordsFromSquare:e[5].getGridCoordsFromSquare,flipped:e[5].flipped,mouseEvents:e[5].state.board.mouseEvents}}),n.$on("dragenter",e[59]),{key:s,first:null,c(){t=Ce(),Ee(n.$$.fragment),this.h()},l(i){t=Ce(),ke(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,r){X(i,t,r),Me(n,i,r),a=!0},p(i,r){e=i;const l={};r[0]&32&&(l.theme=e[5].state.board.boardTheme),r[0]&32&&(l.square=e[73].square),r[0]&32&&(l.color=e[73].color),r[0]&32&&(l.getGridCoordsFromSquare=e[5].getGridCoordsFromSquare),r[0]&32&&(l.flipped=e[5].flipped),r[0]&32&&(l.mouseEvents=e[5].state.board.mouseEvents),n.$set(l)},i(i){a||(Z(n.$$.fragment,i),a=!0)},o(i){ie(n.$$.fragment,i),a=!1},d(i){i&&E(t),we(n,i)}}}function zs(s){let e,t;return e=new Ti({props:{theme:s[5].state.board.boardTheme,flipped:s[5].flipped}}),{c(){Ee(e.$$.fragment)},l(n){ke(e.$$.fragment,n)},m(n,a){Me(e,n,a),t=!0},p(n,a){const i={};a[0]&32&&(i.theme=n[5].state.board.boardTheme),a[0]&32&&(i.flipped=n[5].flipped),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){we(e,n)}}}function Vs(s){let e,t;return e=new Qa({props:{chessboard:s[5],setSize:s[4],mouseEvents:s[5].state.board.mouseEvents}}),{c(){Ee(e.$$.fragment)},l(n){ke(e.$$.fragment,n)},m(n,a){Me(e,n,a),t=!0},p(n,a){const i={};a[0]&32&&(i.chessboard=n[5]),a[0]&32&&(i.mouseEvents=n[5].state.board.mouseEvents),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){we(e,n)}}}function Ws(s){let e,t,n;function a(r){s[60](r)}let i={flipped:s[5].flipped,tools:s[5].state.drawTools.tools,knightLShape:s[5].state.drawTools.settings.knightLShape};return s[7]!==void 0&&(i.svg=s[7]),e=new La({props:i}),fe.push(()=>ce(e,"svg",a)),{c(){Ee(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,l){Me(e,r,l),n=!0},p(r,l){const o={};l[0]&32&&(o.flipped=r[5].flipped),l[0]&32&&(o.tools=r[5].state.drawTools.tools),l[0]&32&&(o.knightLShape=r[5].state.drawTools.settings.knightLShape),!t&&l[0]&128&&(t=!0,o.svg=r[7],ge(()=>t=!1)),e.$set(o)},i(r){n||(Z(e.$$.fragment,r),n=!0)},o(r){ie(e.$$.fragment,r),n=!1},d(r){we(e,r)}}}function Ks(s){let e,t,n={};return e=new Na({props:n}),s[61](e),e.$on("newPromotion",s[15]),{c(){Ee(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,i){Me(e,a,i),t=!0},p(a,i){const r={};e.$set(r)},i(a){t||(Z(e.$$.fragment,a),t=!0)},o(a){ie(e.$$.fragment,a),t=!1},d(a){s[61](null),we(e,a)}}}function js(s){let e,t,n={settings:s[5].state.sounds.settings};return e=new Wa({props:n}),s[66](e),{c(){Ee(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,i){Me(e,a,i),t=!0},p(a,i){const r={};i[0]&32&&(r.settings=a[5].state.sounds.settings),e.$set(r)},i(a){t||(Z(e.$$.fragment,a),t=!0)},o(a){ie(e.$$.fragment,a),t=!1},d(a){s[66](null),we(e,a)}}}function Xa(s){let e,t,n,a,i,r,l,o,u,f,p,b,y,T,q,k,w,d=s[5].state.board.startFen&&Ns(s),m=s[5].ghostPiece&&Bs(s),S=s[5].highlightEnabled&&Us(s),v=s[5].state.board.notation&&zs(s),P=s[5].state.board.resizible.enabled&&Vs(s),W=s[5].state.drawTools.enabled&&Ws(s),j=s[5].legalEnabled&&Ks(s),V=s[5].soundsEnabled&&js(s);return{c(){e=B("div"),t=B("div"),d&&d.c(),n=$(),m&&m.c(),a=$(),S&&S.c(),i=$(),v&&v.c(),r=$(),P&&P.c(),l=$(),W&&W.c(),o=$(),j&&j.c(),y=$(),V&&V.c(),T=Ce(),this.h()},l(O){e=U(O,"DIV",{class:!0,style:!0});var G=K(e);t=U(G,"DIV",{style:!0,class:!0});var re=K(t);d&&d.l(re),re.forEach(E),n=ee(G),m&&m.l(G),a=ee(G),S&&S.l(G),i=ee(G),v&&v.l(G),r=ee(G),P&&P.l(G),l=ee(G),W&&W.l(G),o=ee(G),j&&j.l(G),G.forEach(E),y=ee(O),V&&V.l(O),T=Ce(),this.h()},h(){ye(t,"width","100%"),ye(t,"height","100%"),c(t,"class","noselect"),c(e,"class",u="noselect board "+(s[5].state.board.style.shadow?"shadow":"")+" text-sm "+s[0]+" svelte-1bsiysh"),c(e,"style",f="--boardTheme: url("+(s[5].state.board.boardTheme==="standard"?Os:Fs)+"); "+(s[5].state.board.style.borderRadius!=="0rem"&&s[5].state.board.style.borderRadius!=="0px"?`border-radius: ${s[5].state.board.style.borderRadius};`:"")),tt(()=>s[65].call(e))},m(O,G){X(O,e,G),C(e,t),d&&d.m(t,null),C(e,n),m&&m.m(e,null),C(e,a),S&&S.m(e,null),C(e,i),v&&v.m(e,null),C(e,r),P&&P.m(e,null),C(e,l),W&&W.m(e,null),C(e,o),j&&j.m(e,null),s[64](e),b=Xn(e,s[65].bind(e)),X(O,y,G),V&&V.m(O,G),X(O,T,G),q=!0,k||(w=[de(e,"pointerdown",s[11]),de(e,"contextmenu",us(s[51])),de(e,"drag",us(s[52])),Jt(p=Aa.call(null,e,{svg:s[7],flipped:s[5].flipped,enabled:s[5].state.drawTools.enabled&&s[5].state.board.mouseEvents,settings:s[5].state.drawTools.settings})),de(e,"drawCircle",s[62]),de(e,"drawArrow",s[63])],k=!0)},p(O,G){O[5].state.board.startFen?d?(d.p(O,G),G[0]&32&&Z(d,1)):(d=Ns(O),d.c(),Z(d,1),d.m(t,null)):d&&(He(),ie(d,1,1,()=>{d=null}),ze()),O[5].ghostPiece?m?(m.p(O,G),G[0]&32&&Z(m,1)):(m=Bs(O),m.c(),Z(m,1),m.m(e,a)):m&&(He(),ie(m,1,1,()=>{m=null}),ze()),O[5].highlightEnabled?S?(S.p(O,G),G[0]&32&&Z(S,1)):(S=Us(O),S.c(),Z(S,1),S.m(e,i)):S&&(He(),ie(S,1,1,()=>{S=null}),ze()),O[5].state.board.notation?v?(v.p(O,G),G[0]&32&&Z(v,1)):(v=zs(O),v.c(),Z(v,1),v.m(e,r)):v&&(He(),ie(v,1,1,()=>{v=null}),ze()),O[5].state.board.resizible.enabled?P?(P.p(O,G),G[0]&32&&Z(P,1)):(P=Vs(O),P.c(),Z(P,1),P.m(e,l)):P&&(He(),ie(P,1,1,()=>{P=null}),ze()),O[5].state.drawTools.enabled?W?(W.p(O,G),G[0]&32&&Z(W,1)):(W=Ws(O),W.c(),Z(W,1),W.m(e,o)):W&&(He(),ie(W,1,1,()=>{W=null}),ze()),O[5].legalEnabled?j?(j.p(O,G),G[0]&32&&Z(j,1)):(j=Ks(O),j.c(),Z(j,1),j.m(e,null)):j&&(He(),ie(j,1,1,()=>{j=null}),ze()),(!q||G[0]&33&&u!==(u="noselect board "+(O[5].state.board.style.shadow?"shadow":"")+" text-sm "+O[0]+" svelte-1bsiysh"))&&c(e,"class",u),(!q||G[0]&32&&f!==(f="--boardTheme: url("+(O[5].state.board.boardTheme==="standard"?Os:Fs)+"); "+(O[5].state.board.style.borderRadius!=="0rem"&&O[5].state.board.style.borderRadius!=="0px"?`border-radius: ${O[5].state.board.style.borderRadius};`:"")))&&c(e,"style",f),p&&xt(p.update)&&G[0]&160&&p.update.call(null,{svg:O[7],flipped:O[5].flipped,enabled:O[5].state.drawTools.enabled&&O[5].state.board.mouseEvents,settings:O[5].state.drawTools.settings}),O[5].soundsEnabled?V?(V.p(O,G),G[0]&32&&Z(V,1)):(V=js(O),V.c(),Z(V,1),V.m(T.parentNode,T)):V&&(He(),ie(V,1,1,()=>{V=null}),ze())},i(O){q||(Z(d),Z(m),Z(S),Z(v),Z(P),Z(W),Z(j),Z(V),q=!0)},o(O){ie(d),ie(m),ie(S),ie(v),ie(P),ie(W),ie(j),ie(V),q=!1},d(O){O&&E(e),d&&d.d(),m&&m.d(),S&&S.d(),v&&v.d(),P&&P.d(),W&&W.d(),j&&j.d(),s[64](null),b(),O&&E(y),V&&V.d(O),O&&E(T),k=!1,Je(w)}}}function Ya(s,e,t){let{config:n}=e,{className:a=""}=e;const i=new Ei(n),r=Dt();let l,o,u,f,p="";Yn(()=>{document.documentElement.hasAttribute("style")&&i.state.board.resizible.enabled&&document.documentElement.removeAttribute("style")});const b=M=>{i.clearAllSquares(M),M===te.LEGAL&&i.clearAllSquares(te.LEGALHOVER),M===te.PREMOVE&&i.clearAllSquares(te.PREMOVEHOVER),t(5,i)},y=(M,x)=>{!T(Lt(x))||(i.highlightSquare(M,x),t(5,i))},T=M=>i.highlightEnabled&&(M===void 0||i.highlightSettings[typeof M=="string"?M:Lt(M)]),q=M=>{if(!i.selectableEnabled&&i.draggableEnabled&&H(M),!i.selectableEnabled)return;k(!0);const x=i.getPieceFromSquare(M);x!==void 0&&(t(5,i.selectedPiece=x,i),H())},k=(M=!0)=>{b(te.SELECT),b(te.LEGAL),b(te.PREMOVE),t(5,i.selectedPiece=void 0,i),M&&(b(te.NEXTMOVE),t(5,i.currentPreMove="",i))},w=M=>{b(te.CHECK),M&&i.legalEnabled&&y(M,te.CHECK),t(5,i)},d=()=>{b(te.CHECK)},m=M=>{i.flipBoard(M),t(5,i)},S=(M,x)=>{M.forEach(oe=>i.highlightSquare(oe,x)),t(5,i)},v=(M,x=!0,oe=te.MOVE)=>{M.length<4||!T(Lt(oe))||(x&&b(oe),S([M.substring(0,2),M.substring(2,4)],oe))},P=(M,x,oe=te.MOVE)=>{const Se=[];x&&b(oe),M.forEach(Oe=>{Oe.length<4||(Se.push(Oe.substring(0,2)),Se.push(Oe.substring(2,4)))}),S(Se,oe)},W=M=>{y(M.substring(2,4),te.LEGAL)},j=(M,x,oe=te.LEGAL)=>{b(oe),T(Lt(oe))&&(M.forEach(Se=>{Se.length<4||(x===void 0||Se.substring(0,2)===x)&&i.highlightSquare(Se.substring(2,4),oe)}),t(5,i))},V=(M,x=!0)=>{i.makeMove(M),x&&v(M),t(5,i)},O=M=>{i.removePiece(M),t(5,i)},G=M=>i.whiteToMove&&M[0]==="w"||!i.whiteToMove&&M[0]==="b",re=(M=!1)=>{!i.legalEnabled||(i.state.callbacks.getWhiteToMove&&t(5,i.whiteToMove=i.state.callbacks.getWhiteToMove(),i),i.state.callbacks.getPreMoves&&i.preMovesEnabled?t(5,i.preMoves=i.state.callbacks.getPreMoves(),i):t(5,i.preMoves=[],i),i.state.callbacks.getLegalMoves&&i.state.legal.enabled?t(5,i.legalMoves=i.state.callbacks.getLegalMoves(),i):t(5,i.legalMoves=[],i),M&&H(),i.state.callbacks.getInCheck&&i.state.callbacks.getInCheck()?i.whiteToMove?w(i.getWhiteKingSquare()):w(i.getBlackKingSquare()):d())},pe=M=>{i.soundsEnabled&&u&&u.playMoveSound(M)},ue=M=>{i.setGhostPiece(M),t(5,i)},h=()=>{i.removeGhostPiece(),t(5,i)},_=M=>{if(M.substring(0,2)===M.substring(2,4))return;i.state.callbacks.beforeMove&&i.state.callbacks.beforeMove(M),k();const x=i.getRookMoveIfIsCastling(M),oe=i.getCapturedPawnSquareIfIsEnPassant(M);if(x&&i.legalEnabled&&i.state.legal.settings.allowCastling?(V(x,!1),pe("CASTLE")):oe&&i.legalEnabled&&i.state.legal.settings.allowEnPassant?(O(oe),pe("CAPTURE")):i.isCapture(M)?pe("CAPTURE"):pe("MOVE"),h(),V(M),i.state.callbacks.afterMove&&i.state.callbacks.afterMove(M),re(),i.legalEnabled&&i.preMovesEnabled&&i.currentPreMove!==""){if(i.legalMoves.includes(i.state.legal.preMoves.curMove)||i.legalMoves.includes(`${i.state.legal.preMoves.curMove}q`)){const Se=i.currentPreMove;t(5,i.currentPreMove="",i),Zn().then(()=>{_(Se)})}b(te.NEXTMOVE)}},g=M=>{!i.legalEnabled||!i.preMovesEnabled||!i.movableEnabled||(b(te.PREMOVE),v(M,!0,te.NEXTMOVE),t(5,i.currentPreMove=M,i),r("nextMove",{move:M}))},A=M=>{f.openPromotionModal(!0),p=M,i.makeMove(M),b(te.LEGAL),b(te.SELECT),v(M)},F=(M,x)=>{i.clearSquare(M,x),t(5,i)},I=()=>{i.clearAllPieces(),t(5,i)},z=(M,x)=>{i.setPiece(M,x),t(5,i)},N=(M,x)=>{var Se;const oe=(Se=i.getPieceFromSquare(M))==null?void 0:Se.name;!oe||(x!==void 0?i.setPiece(M,`${x===_e.WHITE?"w":"b"}${oe[1]}`):i.setPiece(M,`${oe[0]==="w"?"b":"w"}${oe[1]}`),t(5,i))},J=(M,x)=>{const oe=Math.floor(M/i.state.board.size*8),Se=Math.floor(x/i.state.board.size*8),Oe=i.flipped?Math.abs(oe-7):oe,Ne=i.flipped?Se:Math.abs(Se-7);return`${Object.keys(i.letters)[Oe]}${(Ne+1).toString()}`},le=M=>{if(!i.state.board.mouseEvents)return;if(M.button===2){k();return}if(!i.movableEnabled)return;const x=l.getBoundingClientRect(),oe=M.clientX-x.left,Se=M.clientY-x.top,Oe=J(oe,Se),Ne=i.getPieceFromSquare(Oe);if(r("squareClick",{square:Oe,piece:Ne?Ne.name:void 0}),!i.selectableEnabled&&!i.draggableEnabled){k();return}if(i.selectedPiece&&i.selectedPiece.square!==Oe&&!i.legalEnabled){_(i.selectedPiece.square+Oe),k();return}if(i.selectedPiece&&i.selectedPiece.square!==Oe&&!G(i.selectedPiece.name)){i.preMovesEnabled&&i.preMoves.includes(i.selectedPiece.square+Oe)&&Ne!==void 0&&Ne.name[0]!==i.selectedPiece.name[0]&&g(i.selectedPiece.square+Oe),k(!1);return}i.selectedPiece&&i.selectedPiece.square!==Oe&&(Ne===void 0||Ne.name[0]!==i.selectedPiece.name[0])&&G(i.selectedPiece.name)&&(i.isPromotion(i.selectedPiece.square+Oe)&&i.legalMoves.includes(`${i.selectedPiece.square+Oe}q`)?A(i.selectedPiece.square+Oe):i.legalMoves.includes(i.selectedPiece.square+Oe)&&_(i.selectedPiece.square+Oe),k())},L=M=>{const x=M.detail;i.legalEnabled?i.isPromotion(x)&&i.legalMoves.includes(`${x}q`)?A(x):i.legalMoves.includes(x)?_(x):i.preMovesEnabled&&i.preMoves.includes(x)?g(x):k():_(x),b(te.LEGAL),b(te.PREMOVE),t(5,i)},H=M=>{var x;if(i.selectableEnabled||i.draggableEnabled){const oe=i.getPieceFromSquare(M!=null?M:(x=i.selectedPiece)==null?void 0:x.square);if(!oe||(i.selectableEnabled&&y(oe.square,te.SELECT),!i.legalEnabled))return;b(te.LEGAL),b(te.PREMOVE),G(oe.name)&&j(i.legalMoves,oe.square),G(oe.name)||j(i.preMoves,oe.square,te.PREMOVE)}},se=(M,x=!0,oe="MOVE")=>{if(i.updatePiecesWithFen(M),x&&k(),b(),h(),re(!1),t(5,i.currentPreMove="",i),i.state.callbacks.getLastMove){const Se=i.state.callbacks.getLastMove();t(5,i.lastMove=Se,i),oe!==!1&&(oe!=="MOVE"?pe(oe):i.isCastling(Se)?pe("CASTLE"):pe(oe)),v(Se)}else oe!==!1&&pe(oe);H(),t(5,i)},Q=()=>i.getShortFEN(),R=M=>{!M||i.state.board.size===M||(t(5,i.state.board.size=M,i),i.state.board.resizible.enabled&&document.documentElement.style.setProperty("--boardSize",`${i.state.board.size}px`))},Y=M=>{var x;return(x=i.getPieceFromSquare(M))==null?void 0:x.name},ae=M=>{t(5,i.state.drawTools.tools=M,i)},ve=M=>{t(5,i.state.drawTools.tools=i.state.drawTools.tools.filter(x=>M.type&&x.type!==M.type||M.from&&(x.type==="arrow"&&x.from!==M.from||x.type==="circle"&&x.square!==M.from)||M.to&&x.type==="arrow"&&x.to!==M.to||M.fixed!==void 0&&x.fixed!==M.fixed),i)},ne=M=>{M===!1?t(5,i.state.movable.enabled=!1,i):(t(5,i.state.movable.enabled=!0,i),t(5,i.state.movable.color=M===!0?_e.BOTH:M,i))},Ae=M=>{M.length<4||(t(5,i.lastMove=M,i),v(M))},Le=M=>{t(5,i.legalMoves=M,i)},Be=M=>{t(5,i.preMoves=M,i)},De=()=>i.state,Ie=M=>{t(5,i.state=M,i),b(),re(!1),v(i.lastMove),v(i.currentPreMove,!0,te.NEXTMOVE),H()},Ue=M=>{M!==void 0&&(i.setConfigSettings(M),t(5,i),Ie(i.state))},st=M=>M.getConfig(),je=(M,x)=>{const oe=l.getBoundingClientRect();i.legalEnabled&&(G(x.name)&&i.legalHover(J(M.detail.x-oe.x,M.detail.y-oe.y)),!G(x.name)&&i.preMovesEnabled&&i.preMoveHover(J(M.detail.x-oe.x,M.detail.y-oe.y))),t(5,i)},xe=M=>{i.ghostPieceEnabled&&ue(M),b(te.SELECT)},Ge=M=>{const x=i.getPieceFromSquare(p.substring(2,4));if(!x)return;const oe=x.name[0]+M.detail.toUpperCase(),Se=p+M.detail;i.state.callbacks.beforeMove&&i.state.callbacks.beforeMove(Se),i.setPiece(x.square,oe),t(5,i),pe("MOVE"),i.state.callbacks.afterMove&&i.state.callbacks.afterMove(Se),re()};$t(()=>{re(!0),i.state.callbacks.getLastMove&&v(i.state.callbacks.getLastMove()),i.state.board.resizible&&R(i.state.board.size-i.state.board.size%8)});function vt(M){Ze.call(this,s,M)}function Et(M){Ze.call(this,s,M)}const $e=M=>{r("piececlick",{piece:M}),q(M.square)},kt=M=>{r("startDragging",{piece:M}),xe(M)},bt=(M,x)=>je(x,M);function Mt(M){Ze.call(this,s,M)}const Xe=M=>{y(M.square,te.SELECT)},wt=()=>{k()},Ye=M=>{y(M.detail.square,te.LEGALHOVER)};function nt(M){o=M,t(7,o)}function St(M){fe[M?"unshift":"push"](()=>{f=M,t(9,f)})}const Pt=M=>r("drawCircle",{square:M.detail.square,color:M.detail.color}),Bt=M=>r("drawArrow",{move:M.detail.move,color:M.detail.color});function Ut(M){fe[M?"unshift":"push"](()=>{l=M,t(6,l)})}function Ht(){i.state.board.size=this.clientWidth,t(5,i)}function zt(M){fe[M?"unshift":"push"](()=>{u=M,t(8,u)})}return s.$$set=M=>{"config"in M&&t(16,n=M.config),"className"in M&&t(0,a=M.className)},s.$$.update=()=>{s.$$.dirty[0]&32&&R(i.state.board.size-i.state.board.size%8)},[a,y,q,k,R,i,l,o,u,f,r,le,L,je,xe,Ge,n,b,w,d,m,S,v,P,W,j,V,O,re,pe,_,g,A,F,I,z,N,J,se,Q,Y,ae,ve,ne,Ae,Le,Be,De,Ie,Ue,st,vt,Et,$e,kt,bt,Mt,Xe,wt,Ye,nt,St,Pt,Bt,Ut,Ht,zt]}class Za extends Fe{constructor(e){super(),qe(this,e,Ya,Xa,Re,{config:16,className:0,clearAllSquares:17,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:18,removeCheckSquare:19,flipBoard:20,highlightManySquares:21,highlightMove:22,highlightMoves:23,highlightLegalMove:24,highlightLegalMoves:25,movePiece:26,removePiece:27,updateLegalState:28,playMoveSound:29,makeMove:30,makeNextMove:31,makeMovePromotion:32,removeSquareHighlight:33,removeAllPiece:34,createPiece:35,changeColorOfPiece:36,getSquareFromCoords:37,setFEN:38,getShortFEN:39,setSize:4,getPieceFromSquare:40,setTools:41,removeTools:42,setMovableColor:43,setLastMove:44,setLegalMoves:45,setPreMoves:46,getState:47,setState:48,setConfigSettings:49,getConfigFromState:50},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[17]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[18]}get removeCheckSquare(){return this.$$.ctx[19]}get flipBoard(){return this.$$.ctx[20]}get highlightManySquares(){return this.$$.ctx[21]}get highlightMove(){return this.$$.ctx[22]}get highlightMoves(){return this.$$.ctx[23]}get highlightLegalMove(){return this.$$.ctx[24]}get highlightLegalMoves(){return this.$$.ctx[25]}get movePiece(){return this.$$.ctx[26]}get removePiece(){return this.$$.ctx[27]}get updateLegalState(){return this.$$.ctx[28]}get playMoveSound(){return this.$$.ctx[29]}get makeMove(){return this.$$.ctx[30]}get makeNextMove(){return this.$$.ctx[31]}get makeMovePromotion(){return this.$$.ctx[32]}get removeSquareHighlight(){return this.$$.ctx[33]}get removeAllPiece(){return this.$$.ctx[34]}get createPiece(){return this.$$.ctx[35]}get changeColorOfPiece(){return this.$$.ctx[36]}get getSquareFromCoords(){return this.$$.ctx[37]}get setFEN(){return this.$$.ctx[38]}get getShortFEN(){return this.$$.ctx[39]}get setSize(){return this.$$.ctx[4]}get getPieceFromSquare(){return this.$$.ctx[40]}get setTools(){return this.$$.ctx[41]}get removeTools(){return this.$$.ctx[42]}get setMovableColor(){return this.$$.ctx[43]}get setLastMove(){return this.$$.ctx[44]}get setLegalMoves(){return this.$$.ctx[45]}get setPreMoves(){return this.$$.ctx[46]}get getState(){return this.$$.ctx[47]}get setState(){return this.$$.ctx[48]}get setConfigSettings(){return this.$$.ctx[49]}get getConfigFromState(){return this.$$.ctx[50]}}const Gs=["standard","darkBlue"],Qs=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function Xs(s){let e,t,n;return{c(){e=B("input"),this.h()},l(a){e=U(a,"INPUT",{type:!0,class:!0}),this.h()},h(){c(e,"type","checkbox"),c(e,"class","mr-1")},m(a,i){X(a,e,i),e.checked=s[0],t||(n=[de(e,"change",s[8]),de(e,"click",gn(s[7])),de(e,"change",s[9])],t=!0)},p(a,i){i&1&&(e.checked=a[0])},d(a){a&&E(e),t=!1,Je(n)}}}function Ys(s){let e,t,n;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(a){e=We(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var i=K(e);t=We(i,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),K(t).forEach(E),i.forEach(E),this.h()},h(){c(t,"fill-rule","evenodd"),c(t,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),c(t,"clip-rule","evenodd"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 20 20"),c(e,"fill","currentColor"),c(e,"class",n="w-5 h-5 transition "+(s[1]?"rotate-180":"rotate-0"))},m(a,i){X(a,e,i),C(e,t)},p(a,i){i&2&&n!==(n="w-5 h-5 transition "+(a[1]?"rotate-180":"rotate-0"))&&c(e,"class",n)},d(a){a&&E(e)}}}function Zs(s){let e,t,n;const a=s[6].default,i=un(a,s,s[5],null);return{c(){e=B("div"),i&&i.c(),this.h()},l(r){e=U(r,"DIV",{class:!0});var l=K(e);i&&i.l(l),l.forEach(E),this.h()},h(){c(e,"class","py-2 px-4")},m(r,l){X(r,e,l),i&&i.m(e,null),n=!0},p(r,l){i&&i.p&&(!n||l&32)&&fn(i,a,r,r[5],n?hn(a,r[5],l,null):dn(r[5]),null)},i(r){n||(Z(i,r),r&&tt(()=>{t||(t=ft(e,dt,{},!0)),t.run(1)}),n=!0)},o(r){ie(i,r),r&&(t||(t=ft(e,dt,{},!1)),t.run(0)),n=!1},d(r){r&&E(e),i&&i.d(r),r&&t&&t.end()}}}function Ja(s){let e,t,n,a,i,r,l,o,u,f,p,b,y,T,q=s[0]!==void 0&&Xs(s),k=s[3]&&Ys(s),w=s[1]&&Zs(s);return{c(){e=B("div"),t=B("button"),n=B("div"),q&&q.c(),a=$(),i=B("span"),r=be(s[2]),o=$(),k&&k.c(),p=$(),w&&w.c(),this.h()},l(d){e=U(d,"DIV",{class:!0});var m=K(e);t=U(m,"BUTTON",{class:!0});var S=K(t);n=U(S,"DIV",{class:!0});var v=K(n);q&&q.l(v),a=ee(v),i=U(v,"SPAN",{class:!0});var P=K(i);r=me(P,s[2]),P.forEach(E),v.forEach(E),o=ee(S),k&&k.l(S),S.forEach(E),p=ee(m),w&&w.l(m),m.forEach(E),this.h()},h(){c(i,"class",l=s[0]===void 0?"ml-[21px]":""),c(n,"class","flex gap-1"),c(t,"class",u="flex justify-between px-4 py-2 "+(s[3]?"transition hover:bg-slate-800/40":"")+" rounded"),t.disabled=f=!s[3],c(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(d,m){X(d,e,m),C(e,t),C(t,n),q&&q.m(n,null),C(n,a),C(n,i),C(i,r),C(t,o),k&&k.m(t,null),C(e,p),w&&w.m(e,null),b=!0,y||(T=de(t,"click",s[10]),y=!0)},p(d,[m]){d[0]!==void 0?q?q.p(d,m):(q=Xs(d),q.c(),q.m(n,a)):q&&(q.d(1),q=null),(!b||m&4)&&Nt(r,d[2]),(!b||m&1&&l!==(l=d[0]===void 0?"ml-[21px]":""))&&c(i,"class",l),d[3]?k?k.p(d,m):(k=Ys(d),k.c(),k.m(t,null)):k&&(k.d(1),k=null),(!b||m&8&&u!==(u="flex justify-between px-4 py-2 "+(d[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&c(t,"class",u),(!b||m&8&&f!==(f=!d[3]))&&(t.disabled=f),d[1]?w?(w.p(d,m),m&2&&Z(w,1)):(w=Zs(d),w.c(),Z(w,1),w.m(e,null)):w&&(He(),ie(w,1,1,()=>{w=null}),ze())},i(d){b||(Z(w),b=!0)},o(d){ie(w),b=!1},d(d){d&&E(e),q&&q.d(),k&&k.d(),w&&w.d(),y=!1,T()}}}function xa(s,e,t){let{$$slots:n={},$$scope:a}=e;const i=Dt();let{name:r="board"}=e,{enabled:l=void 0}=e,{showExpand:o=!0}=e,{expanded:u=!1}=e;function f(T){Ze.call(this,s,T)}const p=()=>i("changed",l);function b(){l=this.checked,t(0,l)}const y=()=>{t(1,u=!u)};return s.$$set=T=>{"name"in T&&t(2,r=T.name),"enabled"in T&&t(0,l=T.enabled),"showExpand"in T&&t(3,o=T.showExpand),"expanded"in T&&t(1,u=T.expanded),"$$scope"in T&&t(5,a=T.$$scope)},[l,u,r,o,i,a,n,f,p,b,y]}class ht extends Fe{constructor(e){super(),qe(this,e,xa,Ja,Re,{name:2,enabled:0,showExpand:3,expanded:1})}}function Js(s,e,t){const n=s.slice();return n[23]=e[t],n}function xs(s){let e,t=s[23]+"",n;return{c(){e=B("option"),n=be(t),this.h()},l(a){e=U(a,"OPTION",{});var i=K(e);n=me(i,t),i.forEach(E),this.h()},h(){e.__value=s[23],e.value=e.__value},m(a,i){X(a,e,i),C(e,n)},p:Te,d(a){a&&E(e)}}}function $s(s){let e,t,n,a,i,r,l,o,u,f,p,b,y,T,q,k;return{c(){e=B("div"),t=B("div"),n=B("input"),a=$(),i=B("label"),r=be("shadow"),l=$(),o=B("div"),u=B("input"),f=$(),p=B("label"),b=be("border-radius (rem)"),this.h()},l(w){e=U(w,"DIV",{class:!0});var d=K(e);t=U(d,"DIV",{class:!0});var m=K(t);n=U(m,"INPUT",{id:!0,type:!0,class:!0}),a=ee(m),i=U(m,"LABEL",{for:!0,class:!0});var S=K(i);r=me(S,"shadow"),S.forEach(E),m.forEach(E),l=ee(d),o=U(d,"DIV",{class:!0});var v=K(o);u=U(v,"INPUT",{id:!0,type:!0,class:!0,min:!0,max:!0}),f=ee(v),p=U(v,"LABEL",{for:!0,class:!0});var P=K(p);b=me(P,"border-radius (rem)"),P.forEach(E),v.forEach(E),d.forEach(E),this.h()},h(){c(n,"id","shadow"),c(n,"type","checkbox"),c(n,"class","svelte-lnr7xr"),c(i,"for","shadow"),c(i,"class","select-none"),c(t,"class","flex gap-2 mb-2"),c(u,"id","borderRadius"),c(u,"type","number"),c(u,"class","w-16 svelte-lnr7xr"),c(u,"min",0),c(u,"max",1),c(p,"for","borderRadius"),c(p,"class","select-none whitespace-nowrap"),c(o,"class","flex gap-2 mb-2"),c(e,"class","pl-2 pr-4 flex-col")},m(w,d){X(w,e,d),C(e,t),C(t,n),n.checked=s[4],C(t,a),C(t,i),C(i,r),C(e,l),C(e,o),C(o,u),lt(u,s[10]),C(o,f),C(o,p),C(p,b),T=!0,q||(k=[de(n,"change",s[18]),de(u,"input",s[19])],q=!0)},p(w,d){d&16&&(n.checked=w[4]),d&1024&&ot(u.value)!==w[10]&&lt(u,w[10])},i(w){T||(w&&tt(()=>{y||(y=ft(e,dt,{},!0)),y.run(1)}),T=!0)},o(w){w&&(y||(y=ft(e,dt,{},!1)),y.run(0)),T=!1},d(w){w&&E(e),w&&y&&y.end(),q=!1,Je(k)}}}function en(s){let e,t,n,a,i,r,l,o,u,f,p,b,y,T,q,k;return{c(){e=B("div"),t=B("div"),n=B("input"),a=$(),i=B("label"),r=be("min"),l=$(),o=B("div"),u=B("input"),f=$(),p=B("label"),b=be("max"),this.h()},l(w){e=U(w,"DIV",{class:!0});var d=K(e);t=U(d,"DIV",{class:!0});var m=K(t);n=U(m,"INPUT",{id:!0,type:!0,class:!0}),a=ee(m),i=U(m,"LABEL",{for:!0,class:!0});var S=K(i);r=me(S,"min"),S.forEach(E),m.forEach(E),l=ee(d),o=U(d,"DIV",{class:!0});var v=K(o);u=U(v,"INPUT",{id:!0,type:!0,class:!0}),f=ee(v),p=U(v,"LABEL",{for:!0,class:!0});var P=K(p);b=me(P,"max"),P.forEach(E),v.forEach(E),d.forEach(E),this.h()},h(){c(n,"id","resizibleMin"),c(n,"type","number"),c(n,"class","w-16 svelte-lnr7xr"),c(i,"for","resizibleMin"),c(i,"class","select-none"),c(t,"class","flex gap-2 mb-2"),c(u,"id","resizibleMax"),c(u,"type","number"),c(u,"class","w-16 svelte-lnr7xr"),c(p,"for","resizibleMax"),c(p,"class","select-none"),c(o,"class","flex gap-2"),c(e,"class","pl-2 pr-4 flex-col")},m(w,d){X(w,e,d),C(e,t),C(t,n),lt(n,s[6]),C(t,a),C(t,i),C(i,r),C(e,l),C(e,o),C(o,u),lt(u,s[7]),C(o,f),C(o,p),C(p,b),T=!0,q||(k=[de(n,"input",s[21]),de(u,"input",s[22])],q=!0)},p(w,d){d&64&&ot(n.value)!==w[6]&&lt(n,w[6]),d&128&&ot(u.value)!==w[7]&&lt(u,w[7])},i(w){T||(w&&tt(()=>{y||(y=ft(e,dt,{},!0)),y.run(1)}),T=!0)},o(w){w&&(y||(y=ft(e,dt,{},!1)),y.run(0)),T=!1},d(w){w&&E(e),w&&y&&y.end(),q=!1,Je(k)}}}function $a(s){let e,t,n,a,i,r,l,o,u,f,p,b,y,T,q,k,w,d,m,S,v,P,W,j,V,O,G,re,pe,ue,h,_,g,A,F,I,z,N,J,le,L=Gs,H=[];for(let R=0;R<L.length;R+=1)H[R]=xs(Js(s,L,R));let se=s[11]&&$s(s),Q=s[5]&&en(s);return{c(){e=B("div"),t=B("select");for(let R=0;R<H.length;R+=1)H[R].c();n=$(),a=B("label"),i=be("board theme"),r=$(),l=B("div"),o=B("input"),u=$(),f=B("label"),p=be("mouseEvents"),b=$(),y=B("div"),T=B("input"),q=$(),k=B("label"),w=be("notation"),d=$(),m=B("div"),S=B("input"),v=$(),P=B("label"),W=be("flipped"),j=$(),V=B("div"),O=B("input"),G=$(),re=B("label"),pe=be("style"),ue=$(),se&&se.c(),h=$(),_=B("div"),g=B("input"),A=$(),F=B("label"),I=be("resizible"),z=$(),Q&&Q.c(),N=Ce(),this.h()},l(R){e=U(R,"DIV",{class:!0});var Y=K(e);t=U(Y,"SELECT",{class:!0});var ae=K(t);for(let Ge=0;Ge<H.length;Ge+=1)H[Ge].l(ae);ae.forEach(E),n=ee(Y),a=U(Y,"LABEL",{for:!0,class:!0});var ve=K(a);i=me(ve,"board theme"),ve.forEach(E),Y.forEach(E),r=ee(R),l=U(R,"DIV",{class:!0});var ne=K(l);o=U(ne,"INPUT",{id:!0,type:!0,class:!0}),u=ee(ne),f=U(ne,"LABEL",{for:!0,class:!0});var Ae=K(f);p=me(Ae,"mouseEvents"),Ae.forEach(E),ne.forEach(E),b=ee(R),y=U(R,"DIV",{class:!0});var Le=K(y);T=U(Le,"INPUT",{id:!0,type:!0,class:!0}),q=ee(Le),k=U(Le,"LABEL",{for:!0,class:!0});var Be=K(k);w=me(Be,"notation"),Be.forEach(E),Le.forEach(E),d=ee(R),m=U(R,"DIV",{class:!0});var De=K(m);S=U(De,"INPUT",{id:!0,type:!0,class:!0}),v=ee(De),P=U(De,"LABEL",{for:!0,class:!0});var Ie=K(P);W=me(Ie,"flipped"),Ie.forEach(E),De.forEach(E),j=ee(R),V=U(R,"DIV",{});var Ue=K(V);O=U(Ue,"INPUT",{id:!0,type:!0,class:!0}),G=ee(Ue),re=U(Ue,"LABEL",{for:!0,class:!0});var st=K(re);pe=me(st,"style"),st.forEach(E),Ue.forEach(E),ue=ee(R),se&&se.l(R),h=ee(R),_=U(R,"DIV",{class:!0});var je=K(_);g=U(je,"INPUT",{id:!0,type:!0,class:!0}),A=ee(je),F=U(je,"LABEL",{for:!0,class:!0});var xe=K(F);I=me(xe,"resizible"),xe.forEach(E),je.forEach(E),z=ee(R),Q&&Q.l(R),N=Ce(),this.h()},h(){c(t,"class","svelte-lnr7xr"),s[0]===void 0&&tt(()=>s[13].call(t)),c(a,"for","boardTheme"),c(a,"class","select-none"),c(e,"class","mb-2"),c(o,"id","mouseEvents"),c(o,"type","checkbox"),c(o,"class","svelte-lnr7xr"),c(f,"for","mouseEvents"),c(f,"class","select-none"),c(l,"class","mb-2"),c(T,"id","notation"),c(T,"type","checkbox"),c(T,"class","svelte-lnr7xr"),c(k,"for","notation"),c(k,"class","select-none"),c(y,"class","mb-2"),c(S,"id","flipped"),c(S,"type","checkbox"),c(S,"class","svelte-lnr7xr"),c(P,"for","flipped"),c(P,"class","select-none"),c(m,"class","mb-2"),c(O,"id","styleEnabled"),c(O,"type","checkbox"),c(O,"class","svelte-lnr7xr"),c(re,"for","styleEnabled"),c(re,"class","select-none"),c(g,"id","resizibleEnabled"),c(g,"type","checkbox"),c(g,"class","svelte-lnr7xr"),c(F,"for","resizibleEnabled"),c(F,"class","select-none"),c(_,"class","mt-2 mb-1")},m(R,Y){X(R,e,Y),C(e,t);for(let ae=0;ae<H.length;ae+=1)H[ae].m(t,null);_t(t,s[0]),C(e,n),C(e,a),C(a,i),X(R,r,Y),X(R,l,Y),C(l,o),o.checked=s[1],C(l,u),C(l,f),C(f,p),X(R,b,Y),X(R,y,Y),C(y,T),T.checked=s[2],C(y,q),C(y,k),C(k,w),X(R,d,Y),X(R,m,Y),C(m,S),S.checked=s[3],C(m,v),C(m,P),C(P,W),X(R,j,Y),X(R,V,Y),C(V,O),O.checked=s[11],C(V,G),C(V,re),C(re,pe),X(R,ue,Y),se&&se.m(R,Y),X(R,h,Y),X(R,_,Y),C(_,g),g.checked=s[5],C(_,A),C(_,F),C(F,I),X(R,z,Y),Q&&Q.m(R,Y),X(R,N,Y),J||(le=[de(t,"change",s[13]),de(o,"change",s[14]),de(T,"change",s[15]),de(S,"change",s[16]),de(O,"change",s[17]),de(g,"change",s[20])],J=!0)},p(R,Y){if(Y&0){L=Gs;let ae;for(ae=0;ae<L.length;ae+=1){const ve=Js(R,L,ae);H[ae]?H[ae].p(ve,Y):(H[ae]=xs(ve),H[ae].c(),H[ae].m(t,null))}for(;ae<H.length;ae+=1)H[ae].d(1);H.length=L.length}Y&1&&_t(t,R[0]),Y&2&&(o.checked=R[1]),Y&4&&(T.checked=R[2]),Y&8&&(S.checked=R[3]),Y&2048&&(O.checked=R[11]),R[11]?se?(se.p(R,Y),Y&2048&&Z(se,1)):(se=$s(R),se.c(),Z(se,1),se.m(h.parentNode,h)):se&&(He(),ie(se,1,1,()=>{se=null}),ze()),Y&32&&(g.checked=R[5]),R[5]?Q?(Q.p(R,Y),Y&32&&Z(Q,1)):(Q=en(R),Q.c(),Z(Q,1),Q.m(N.parentNode,N)):Q&&(He(),ie(Q,1,1,()=>{Q=null}),ze())},d(R){R&&E(e),ut(H,R),R&&E(r),R&&E(l),R&&E(b),R&&E(y),R&&E(d),R&&E(m),R&&E(j),R&&E(V),R&&E(ue),se&&se.d(R),R&&E(h),R&&E(_),R&&E(z),Q&&Q.d(R),R&&E(N),J=!1,Je(le)}}}function er(s){let e,t;return e=new ht({props:{name:s[8],expanded:s[9],$$slots:{default:[$a]},$$scope:{ctx:s}}}),{c(){Ee(e.$$.fragment)},l(n){ke(e.$$.fragment,n)},m(n,a){Me(e,n,a),t=!0},p(n,[a]){const i={};a&256&&(i.name=n[8]),a&512&&(i.expanded=n[9]),a&67112191&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){we(e,n)}}}function tr(s,e,t){let{name:n="Board"}=e,{boardTheme:a}=e,{mouseEvents:i}=e,{notation:r}=e,{flipped:l}=e,{shadow:o}=e,{borderRadius:u="0px"}=e,{resizible:f=!1}=e,{min:p=0}=e,{max:b=0}=e,{expanded:y=!1}=e,T=!0,q=parseFloat(u.endsWith("px")?u.slice(0,-2):u.slice(0,-3));function k(){a=es(this),t(0,a)}function w(){i=this.checked,t(1,i)}function d(){r=this.checked,t(2,r)}function m(){l=this.checked,t(3,l)}function S(){T=this.checked,t(11,T)}function v(){o=this.checked,t(4,o)}function P(){q=ot(this.value),t(10,q)}function W(){f=this.checked,t(5,f)}function j(){p=ot(this.value),t(6,p)}function V(){b=ot(this.value),t(7,b)}return s.$$set=O=>{"name"in O&&t(8,n=O.name),"boardTheme"in O&&t(0,a=O.boardTheme),"mouseEvents"in O&&t(1,i=O.mouseEvents),"notation"in O&&t(2,r=O.notation),"flipped"in O&&t(3,l=O.flipped),"shadow"in O&&t(4,o=O.shadow),"borderRadius"in O&&t(12,u=O.borderRadius),"resizible"in O&&t(5,f=O.resizible),"min"in O&&t(6,p=O.min),"max"in O&&t(7,b=O.max),"expanded"in O&&t(9,y=O.expanded)},s.$$.update=()=>{s.$$.dirty&1024&&t(12,u=`${q!=null?q:0}rem`)},[a,i,r,l,o,f,p,b,n,y,q,T,u,k,w,d,m,S,v,P,W,j,V]}class sr extends Fe{constructor(e){super(),qe(this,e,tr,er,Re,{name:8,boardTheme:0,mouseEvents:1,notation:2,flipped:3,shadow:4,borderRadius:12,resizible:5,min:6,max:7,expanded:9})}}function nr(s){let e,t,n,a,i,r,l,o,u,f;return{c(){e=B("div"),t=B("select"),n=B("option"),a=be("Both"),i=B("option"),r=be("White"),l=B("option"),o=be("Black"),this.h()},l(p){e=U(p,"DIV",{});var b=K(e);t=U(b,"SELECT",{class:!0});var y=K(t);n=U(y,"OPTION",{});var T=K(n);a=me(T,"Both"),T.forEach(E),i=U(y,"OPTION",{});var q=K(i);r=me(q,"White"),q.forEach(E),l=U(y,"OPTION",{});var k=K(l);o=me(k,"Black"),k.forEach(E),y.forEach(E),b.forEach(E),this.h()},h(){n.__value=_e.BOTH,n.value=n.__value,i.__value=_e.WHITE,i.value=i.__value,l.__value=_e.BLACK,l.value=l.__value,c(t,"class","svelte-xrxnwg"),s[1]===void 0&&tt(()=>s[4].call(t))},m(p,b){X(p,e,b),C(e,t),C(t,n),C(n,a),C(t,i),C(i,r),C(t,l),C(l,o),_t(t,s[1]),u||(f=de(t,"change",s[4]),u=!0)},p(p,b){b&2&&_t(t,p[1])},d(p){p&&E(e),u=!1,f()}}}function ir(s){let e,t,n;function a(r){s[5](r)}let i={name:s[2],expanded:s[3],$$slots:{default:[nr]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new ht({props:i}),fe.push(()=>ce(e,"enabled",a)),{c(){Ee(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,l){Me(e,r,l),n=!0},p(r,[l]){const o={};l&4&&(o.name=r[2]),l&8&&(o.expanded=r[3]),l&66&&(o.$$scope={dirty:l,ctx:r}),!t&&l&1&&(t=!0,o.enabled=r[0],ge(()=>t=!1)),e.$set(o)},i(r){n||(Z(e.$$.fragment,r),n=!0)},o(r){ie(e.$$.fragment,r),n=!1},d(r){we(e,r)}}}function ar(s,e,t){let{name:n="Movable"}=e,{enabled:a=!1}=e,{color:i}=e,{expanded:r=!1}=e;function l(){i=es(this),t(1,i)}function o(u){a=u,t(0,a)}return s.$$set=u=>{"name"in u&&t(2,n=u.name),"enabled"in u&&t(0,a=u.enabled),"color"in u&&t(1,i=u.color),"expanded"in u&&t(3,r=u.expanded)},[a,i,n,r,l,o]}class rr extends Fe{constructor(e){super(),qe(this,e,ar,ir,Re,{name:2,enabled:0,color:1,expanded:3})}}function tn(s,e,t){const n=s.slice();return n[12]=e[t],n}function sn(s){let e,t,n,a,i,r,l,o,u,f,p,b,y,T,q,k,w=Qs,d=[];for(let m=0;m<w.length;m+=1)d[m]=nn(tn(s,w,m));return{c(){e=B("div"),t=B("div"),n=B("input"),a=$(),i=B("label"),r=be("duration"),l=$(),o=B("div"),u=B("select");for(let m=0;m<d.length;m+=1)d[m].c();f=$(),p=B("label"),b=be("easing"),this.h()},l(m){e=U(m,"DIV",{class:!0});var S=K(e);t=U(S,"DIV",{class:!0});var v=K(t);n=U(v,"INPUT",{id:!0,type:!0,class:!0}),a=ee(v),i=U(v,"LABEL",{for:!0,class:!0});var P=K(i);r=me(P,"duration"),P.forEach(E),v.forEach(E),l=ee(S),o=U(S,"DIV",{class:!0});var W=K(o);u=U(W,"SELECT",{id:!0,class:!0});var j=K(u);for(let O=0;O<d.length;O+=1)d[O].l(j);j.forEach(E),f=ee(W),p=U(W,"LABEL",{for:!0,class:!0});var V=K(p);b=me(V,"easing"),V.forEach(E),W.forEach(E),S.forEach(E),this.h()},h(){c(n,"id","transitionDuration"),c(n,"type","number"),c(n,"class","w-16 svelte-1qpp6cx"),c(i,"for","transitionDuration"),c(i,"class","select-none"),c(t,"class","flex gap-2 mb-2"),c(u,"id","easingFuncs"),c(u,"class","svelte-1qpp6cx"),s[4]===void 0&&tt(()=>s[10].call(u)),c(p,"for","easingFuncs"),c(p,"class","select-none"),c(o,"class","flex gap-2"),c(e,"class","pl-2 pr-4 flex-col")},m(m,S){X(m,e,S),C(e,t),C(t,n),lt(n,s[3]),C(t,a),C(t,i),C(i,r),C(e,l),C(e,o),C(o,u);for(let v=0;v<d.length;v+=1)d[v].m(u,null);_t(u,s[4]),C(o,f),C(o,p),C(p,b),T=!0,q||(k=[de(n,"input",s[9]),de(u,"change",s[10])],q=!0)},p(m,S){if(S&8&&ot(n.value)!==m[3]&&lt(n,m[3]),S&0){w=Qs;let v;for(v=0;v<w.length;v+=1){const P=tn(m,w,v);d[v]?d[v].p(P,S):(d[v]=nn(P),d[v].c(),d[v].m(u,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=w.length}S&16&&_t(u,m[4])},i(m){T||(m&&tt(()=>{y||(y=ft(e,dt,{},!0)),y.run(1)}),T=!0)},o(m){m&&(y||(y=ft(e,dt,{},!1)),y.run(0)),T=!1},d(m){m&&E(e),ut(d,m),m&&y&&y.end(),q=!1,Je(k)}}}function nn(s){let e,t=s[12]+"",n;return{c(){e=B("option"),n=be(t),this.h()},l(a){e=U(a,"OPTION",{});var i=K(e);n=me(i,t),i.forEach(E),this.h()},h(){e.__value=s[12],e.value=e.__value},m(a,i){X(a,e,i),C(e,n)},p:Te,d(a){a&&E(e)}}}function lr(s){let e,t,n,a,i,r,l,o,u,f,p,b,y,T,q,k=s[2]&&sn(s);return{c(){e=B("div"),t=B("input"),n=$(),a=B("label"),i=be("ghost piece"),r=$(),l=B("div"),o=B("input"),u=$(),f=B("label"),p=be("transition"),b=$(),k&&k.c(),y=Ce(),this.h()},l(w){e=U(w,"DIV",{class:!0});var d=K(e);t=U(d,"INPUT",{id:!0,type:!0,class:!0}),n=ee(d),a=U(d,"LABEL",{for:!0,class:!0});var m=K(a);i=me(m,"ghost piece"),m.forEach(E),d.forEach(E),r=ee(w),l=U(w,"DIV",{class:!0});var S=K(l);o=U(S,"INPUT",{id:!0,type:!0,class:!0}),u=ee(S),f=U(S,"LABEL",{for:!0,class:!0});var v=K(f);p=me(v,"transition"),v.forEach(E),S.forEach(E),b=ee(w),k&&k.l(w),y=Ce(),this.h()},h(){c(t,"id","ghostPiece"),c(t,"type","checkbox"),c(t,"class","svelte-1qpp6cx"),c(a,"for","ghostPiece"),c(a,"class","select-none"),c(e,"class","mb-2"),c(o,"id","draggableEnabled"),c(o,"type","checkbox"),c(o,"class","svelte-1qpp6cx"),c(f,"for","draggableEnabled"),c(f,"class","select-none"),c(l,"class","mb-2")},m(w,d){X(w,e,d),C(e,t),t.checked=s[1],C(e,n),C(e,a),C(a,i),X(w,r,d),X(w,l,d),C(l,o),o.checked=s[2],C(l,u),C(l,f),C(f,p),X(w,b,d),k&&k.m(w,d),X(w,y,d),T||(q=[de(t,"change",s[7]),de(o,"change",s[8])],T=!0)},p(w,d){d&2&&(t.checked=w[1]),d&4&&(o.checked=w[2]),w[2]?k?(k.p(w,d),d&4&&Z(k,1)):(k=sn(w),k.c(),Z(k,1),k.m(y.parentNode,y)):k&&(He(),ie(k,1,1,()=>{k=null}),ze())},d(w){w&&E(e),w&&E(r),w&&E(l),w&&E(b),k&&k.d(w),w&&E(y),T=!1,Je(q)}}}function or(s){let e,t,n;function a(r){s[11](r)}let i={name:s[5],expanded:s[6],$$slots:{default:[lr]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new ht({props:i}),fe.push(()=>ce(e,"enabled",a)),{c(){Ee(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,l){Me(e,r,l),n=!0},p(r,[l]){const o={};l&32&&(o.name=r[5]),l&64&&(o.expanded=r[6]),l&32798&&(o.$$scope={dirty:l,ctx:r}),!t&&l&1&&(t=!0,o.enabled=r[0],ge(()=>t=!1)),e.$set(o)},i(r){n||(Z(e.$$.fragment,r),n=!0)},o(r){ie(e.$$.fragment,r),n=!1},d(r){we(e,r)}}}function ur(s,e,t){let{name:n="Draggable"}=e,{enabled:a=!1}=e,{ghostPiece:i=!1}=e,{transition:r=!1}=e,{duration:l=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function f(){i=this.checked,t(1,i)}function p(){r=this.checked,t(2,r)}function b(){l=ot(this.value),t(3,l)}function y(){o=es(this),t(4,o)}function T(q){a=q,t(0,a)}return s.$$set=q=>{"name"in q&&t(5,n=q.name),"enabled"in q&&t(0,a=q.enabled),"ghostPiece"in q&&t(1,i=q.ghostPiece),"transition"in q&&t(2,r=q.transition),"duration"in q&&t(3,l=q.duration),"easing"in q&&t(4,o=q.easing),"expanded"in q&&t(6,u=q.expanded)},[a,i,r,l,o,n,u,f,p,b,y,T]}class fr extends Fe{constructor(e){super(),qe(this,e,ur,or,Re,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function an(s,e,t){const n=s.slice();return n[7]=e[t],n[8]=e,n[9]=t,n}function rn(s){let e,t,n,a,i=s[7]+"",r,l,o,u;function f(){s[5].call(t,s[7])}return{c(){e=B("div"),t=B("input"),n=$(),a=B("label"),r=be(i),l=$(),this.h()},l(p){e=U(p,"DIV",{class:!0});var b=K(e);t=U(b,"INPUT",{id:!0,type:!0}),n=ee(b),a=U(b,"LABEL",{for:!0,class:!0});var y=K(a);r=me(y,i),y.forEach(E),l=ee(b),b.forEach(E),this.h()},h(){c(t,"id",s[7]+"Enabled"),c(t,"type","checkbox"),c(a,"for",s[7]+"Enabled"),c(a,"class","select-none"),c(e,"class","mb-2")},m(p,b){X(p,e,b),C(e,t),t.checked=s[1][s[7]],C(e,n),C(e,a),C(a,r),C(e,l),o||(u=de(t,"change",f),o=!0)},p(p,b){s=p,b&18&&(t.checked=s[1][s[7]])},d(p){p&&E(e),o=!1,u()}}}function dr(s){let e,t=s[4],n=[];for(let a=0;a<t.length;a+=1)n[a]=rn(an(s,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Ce()},l(a){for(let i=0;i<n.length;i+=1)n[i].l(a);e=Ce()},m(a,i){for(let r=0;r<n.length;r+=1)n[r].m(a,i);X(a,e,i)},p(a,i){if(i&18){t=a[4];let r;for(r=0;r<t.length;r+=1){const l=an(a,t,r);n[r]?n[r].p(l,i):(n[r]=rn(l),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(a){ut(n,a),a&&E(e)}}}function hr(s){let e,t,n;function a(r){s[6](r)}let i={name:s[2],expanded:s[3],$$slots:{default:[dr]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new ht({props:i}),fe.push(()=>ce(e,"enabled",a)),{c(){Ee(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,l){Me(e,r,l),n=!0},p(r,[l]){const o={};l&4&&(o.name=r[2]),l&8&&(o.expanded=r[3]),l&1026&&(o.$$scope={dirty:l,ctx:r}),!t&&l&1&&(t=!0,o.enabled=r[0],ge(()=>t=!1)),e.$set(o)},i(r){n||(Z(e.$$.fragment,r),n=!0)},o(r){ie(e.$$.fragment,r),n=!1},d(r){we(e,r)}}}function cr(s,e,t){let{name:n="Highlight"}=e,{enabled:a=!1}=e,{settings:i}=e;const r=["select","legal","move","preMove","nextMove","check"];let{expanded:l=!1}=e;function o(f){i[f]=this.checked,t(1,i)}function u(f){a=f,t(0,a)}return s.$$set=f=>{"name"in f&&t(2,n=f.name),"enabled"in f&&t(0,a=f.enabled),"settings"in f&&t(1,i=f.settings),"expanded"in f&&t(3,l=f.expanded)},[a,i,n,l,r,o,u]}class gr extends Fe{constructor(e){super(),qe(this,e,cr,hr,Re,{name:2,enabled:0,settings:1,expanded:3})}}function br(s){let e,t,n,a,i,r,l,o,u,f,p,b,y;return{c(){e=B("div"),t=B("input"),n=$(),a=B("label"),i=be("L shape knight move"),r=$(),l=B("div"),o=B("input"),u=$(),f=B("label"),p=be("only chess move"),this.h()},l(T){e=U(T,"DIV",{class:!0});var q=K(e);t=U(q,"INPUT",{id:!0,type:!0}),n=ee(q),a=U(q,"LABEL",{for:!0,class:!0});var k=K(a);i=me(k,"L shape knight move"),k.forEach(E),q.forEach(E),r=ee(T),l=U(T,"DIV",{class:!0});var w=K(l);o=U(w,"INPUT",{id:!0,type:!0}),u=ee(w),f=U(w,"LABEL",{for:!0,class:!0});var d=K(f);p=me(d,"only chess move"),d.forEach(E),w.forEach(E),this.h()},h(){c(t,"id","knightLShapeMoveEnabled"),c(t,"type","checkbox"),c(a,"for","knightLShapeMoveEnabled"),c(a,"class","select-none"),c(e,"class","mb-2"),c(o,"id","onlyChessMoveEnabled"),c(o,"type","checkbox"),c(f,"for","onlyChessMoveEnabled"),c(f,"class","select-none"),c(l,"class","mb-2")},m(T,q){X(T,e,q),C(e,t),t.checked=s[1],C(e,n),C(e,a),C(a,i),X(T,r,q),X(T,l,q),C(l,o),o.checked=s[2],C(l,u),C(l,f),C(f,p),b||(y=[de(t,"change",s[5]),de(o,"change",s[6])],b=!0)},p(T,q){q&2&&(t.checked=T[1]),q&4&&(o.checked=T[2])},d(T){T&&E(e),T&&E(r),T&&E(l),b=!1,Je(y)}}}function mr(s){let e,t,n;function a(r){s[7](r)}let i={name:s[3],expanded:s[4],$$slots:{default:[br]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new ht({props:i}),fe.push(()=>ce(e,"enabled",a)),{c(){Ee(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,l){Me(e,r,l),n=!0},p(r,[l]){const o={};l&8&&(o.name=r[3]),l&16&&(o.expanded=r[4]),l&262&&(o.$$scope={dirty:l,ctx:r}),!t&&l&1&&(t=!0,o.enabled=r[0],ge(()=>t=!1)),e.$set(o)},i(r){n||(Z(e.$$.fragment,r),n=!0)},o(r){ie(e.$$.fragment,r),n=!1},d(r){we(e,r)}}}function pr(s,e,t){let{name:n="DrawTools"}=e,{enabled:a=!1}=e,{knightLShape:i=!1}=e,{onlyChessMove:r=!1}=e,{expanded:l=!1}=e;function o(){i=this.checked,t(1,i)}function u(){r=this.checked,t(2,r)}function f(p){a=p,t(0,a)}return s.$$set=p=>{"name"in p&&t(3,n=p.name),"enabled"in p&&t(0,a=p.enabled),"knightLShape"in p&&t(1,i=p.knightLShape),"onlyChessMove"in p&&t(2,r=p.onlyChessMove),"expanded"in p&&t(4,l=p.expanded)},[a,i,r,n,l,o,u,f]}class _r extends Fe{constructor(e){super(),qe(this,e,pr,mr,Re,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function ln(s,e,t){const n=s.slice();return n[7]=e[t],n[8]=e,n[9]=t,n}function on(s){let e,t,n,a,i=s[7].toLowerCase()+"",r,l,o,u;function f(){s[5].call(t,s[7])}return{c(){e=B("div"),t=B("input"),n=$(),a=B("label"),r=be(i),l=$(),this.h()},l(p){e=U(p,"DIV",{class:!0});var b=K(e);t=U(b,"INPUT",{id:!0,type:!0}),n=ee(b),a=U(b,"LABEL",{for:!0,class:!0});var y=K(a);r=me(y,i),y.forEach(E),l=ee(b),b.forEach(E),this.h()},h(){c(t,"id",s[7]+"Enabled"),c(t,"type","checkbox"),c(a,"for",s[7]+"Enabled"),c(a,"class","select-none"),c(e,"class","mb-2")},m(p,b){X(p,e,b),C(e,t),t.checked=s[1][s[7]],C(e,n),C(e,a),C(a,r),C(e,l),o||(u=de(t,"change",f),o=!0)},p(p,b){s=p,b&18&&(t.checked=s[1][s[7]])},d(p){p&&E(e),o=!1,u()}}}function vr(s){let e,t=s[4],n=[];for(let a=0;a<t.length;a+=1)n[a]=on(ln(s,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Ce()},l(a){for(let i=0;i<n.length;i+=1)n[i].l(a);e=Ce()},m(a,i){for(let r=0;r<n.length;r+=1)n[r].m(a,i);X(a,e,i)},p(a,i){if(i&18){t=a[4];let r;for(r=0;r<t.length;r+=1){const l=ln(a,t,r);n[r]?n[r].p(l,i):(n[r]=on(l),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(a){ut(n,a),a&&E(e)}}}function Er(s){let e,t,n;function a(r){s[6](r)}let i={name:s[2],expanded:s[3],$$slots:{default:[vr]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new ht({props:i}),fe.push(()=>ce(e,"enabled",a)),{c(){Ee(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,l){Me(e,r,l),n=!0},p(r,[l]){const o={};l&4&&(o.name=r[2]),l&8&&(o.expanded=r[3]),l&1026&&(o.$$scope={dirty:l,ctx:r}),!t&&l&1&&(t=!0,o.enabled=r[0],ge(()=>t=!1)),e.$set(o)},i(r){n||(Z(e.$$.fragment,r),n=!0)},o(r){ie(e.$$.fragment,r),n=!1},d(r){we(e,r)}}}function kr(s,e,t){let{name:n="Sounds"}=e,{enabled:a=!1}=e,{settings:i}=e;const r=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:l=!1}=e;function o(f){i[f]=this.checked,t(1,i)}function u(f){a=f,t(0,a)}return s.$$set=f=>{"name"in f&&t(2,n=f.name),"enabled"in f&&t(0,a=f.enabled),"settings"in f&&t(1,i=f.settings),"expanded"in f&&t(3,l=f.expanded)},[a,i,n,l,r,o,u]}class Mr extends Fe{constructor(e){super(),qe(this,e,kr,Er,Re,{name:2,enabled:0,settings:1,expanded:3})}}function wr(s){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=We(n,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=K(e);t=We(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),K(t).forEach(E),a.forEach(E),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"stroke-width","2"),c(t,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),ye(e,"transform","translate(1px, 0px)"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class","h-5"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"aria-hidden","true"),c(e,"stroke","currentColor")},m(n,a){X(n,e,a),C(e,t)},d(n){n&&E(e)}}}function Sr(s){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(n){e=We(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=K(e);t=We(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),K(t).forEach(E),a.forEach(E),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"stroke-width","2"),c(t,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class","h-5 text-green-500"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"aria-hidden","true"),c(e,"stroke","currentColor")},m(n,a){X(n,e,a),C(e,t)},d(n){n&&E(e)}}}function yr(s){let e,t,n;function a(l,o){return l[1]?Sr:wr}let i=a(s),r=i(s);return{c(){e=B("button"),r.c(),this.h()},l(l){e=U(l,"BUTTON",{type:!0,class:!0});var o=K(e);r.l(o),o.forEach(E),this.h()},h(){c(e,"type","button"),c(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(l,o){X(l,e,o),r.m(e,null),s[4](e),t||(n=de(e,"click",s[2]),t=!0)},p(l,[o]){i!==(i=a(l))&&(r.d(1),r=i(l),r&&(r.c(),r.m(e,null)))},i:Te,o:Te,d(l){l&&E(e),r.d(),s[4](null),t=!1,n()}}}function Cr(s,e,t){let{copyText:n}=e,a,i=!1;function r(){navigator.clipboard.writeText(n),t(1,i=!0),setTimeout(()=>{t(1,i=!1)},2e3),a.setAttribute("data-cooltipz-dir","top"),a.setAttribute("aria-label","Copied!"),setTimeout(()=>{a.removeAttribute("aria-label"),a.removeAttribute("data-cooltipz-dir")},2e3)}function l(o){fe[o?"unshift":"push"](()=>{a=o,t(0,a)})}return s.$$set=o=>{"copyText"in o&&t(3,n=o.copyText)},[a,i,r,n,l]}class Ar extends Fe{constructor(e){super(),qe(this,e,Cr,yr,Re,{copyText:3})}}function Pr(s){let e,t,n;function a(r){s[2](r)}let i={name:s[1],showExpand:!1};return s[0]!==void 0&&(i.enabled=s[0]),e=new ht({props:i}),fe.push(()=>ce(e,"enabled",a)),e.$on("changed",s[3]),{c(){Ee(e.$$.fragment)},l(r){ke(e.$$.fragment,r)},m(r,l){Me(e,r,l),n=!0},p(r,[l]){const o={};l&2&&(o.name=r[1]),!t&&l&1&&(t=!0,o.enabled=r[0],ge(()=>t=!1)),e.$set(o)},i(r){n||(Z(e.$$.fragment,r),n=!0)},o(r){ie(e.$$.fragment,r),n=!1},d(r){we(e,r)}}}function Tr(s,e,t){let{name:n="Legal"}=e,{enabled:a=!1}=e;function i(l){a=l,t(0,a)}function r(l){Ze.call(this,s,l)}return s.$$set=l=>{"name"in l&&t(1,n=l.name),"enabled"in l&&t(0,a=l.enabled)},[a,n,i,r]}class Lr extends Fe{constructor(e){super(),qe(this,e,Tr,Pr,Re,{name:1,enabled:0})}}function Ir(s){let e,t,n,a,i,r,l,o,u,f,p,b,y,T,q,k,w,d,m,S,v,P,W,j,V,O,G,re,pe,ue,h,_,g,A,F,I,z,N,J,le,L,H,se,Q,R,Y,ae,ve,ne,Ae,Le,Be,De,Ie,Ue,st,je,xe,Ge,vt,Et,$e,kt,bt,Mt,Xe,wt,Ye,nt,St,Pt;function Bt(D){s[7](D)}function Ut(D){s[8](D)}function Ht(D){s[9](D)}function zt(D){s[10](D)}function M(D){s[11](D)}function x(D){s[12](D)}function oe(D){s[13](D)}function Se(D){s[14](D)}function Oe(D){s[15](D)}let Ne={expanded:!0};s[0].board.boardTheme!==void 0&&(Ne.boardTheme=s[0].board.boardTheme),s[0].board.mouseEvents!==void 0&&(Ne.mouseEvents=s[0].board.mouseEvents),s[0].board.notation!==void 0&&(Ne.notation=s[0].board.notation),s[0].board.flipped!==void 0&&(Ne.flipped=s[0].board.flipped),s[0].board.style.shadow!==void 0&&(Ne.shadow=s[0].board.style.shadow),s[0].board.style.borderRadius!==void 0&&(Ne.borderRadius=s[0].board.style.borderRadius),s[0].board.resizible.enabled!==void 0&&(Ne.resizible=s[0].board.resizible.enabled),s[0].board.resizible.min!==void 0&&(Ne.min=s[0].board.resizible.min),s[0].board.resizible.max!==void 0&&(Ne.max=s[0].board.resizible.max),r=new sr({props:Ne}),fe.push(()=>ce(r,"boardTheme",Bt)),fe.push(()=>ce(r,"mouseEvents",Ut)),fe.push(()=>ce(r,"notation",Ht)),fe.push(()=>ce(r,"flipped",zt)),fe.push(()=>ce(r,"shadow",M)),fe.push(()=>ce(r,"borderRadius",x)),fe.push(()=>ce(r,"resizible",oe)),fe.push(()=>ce(r,"min",Se)),fe.push(()=>ce(r,"max",Oe));function ss(D){s[16](D)}function yn(D){s[17](D)}let Vt={expanded:!0};s[0].movable.enabled!==void 0&&(Vt.enabled=s[0].movable.enabled),s[0].movable.color!==void 0&&(Vt.color=s[0].movable.color),w=new rr({props:Vt}),fe.push(()=>ce(w,"enabled",ss)),fe.push(()=>ce(w,"color",yn));function Cn(D){s[18](D)}function An(D){s[19](D)}function Pn(D){s[20](D)}function Tn(D){s[21](D)}function Ln(D){s[22](D)}let mt={};s[0].draggable.enabled!==void 0&&(mt.enabled=s[0].draggable.enabled),s[0].draggable.ghostPiece.enabled!==void 0&&(mt.ghostPiece=s[0].draggable.ghostPiece.enabled),s[0].draggable.transition.enabled!==void 0&&(mt.transition=s[0].draggable.transition.enabled),s[0].draggable.transition.settings.duration!==void 0&&(mt.duration=s[0].draggable.transition.settings.duration),s[0].draggable.transition.settings.easing!==void 0&&(mt.easing=s[0].draggable.transition.settings.easing),v=new fr({props:mt}),fe.push(()=>ce(v,"enabled",Cn)),fe.push(()=>ce(v,"ghostPiece",An)),fe.push(()=>ce(v,"transition",Pn)),fe.push(()=>ce(v,"duration",Tn)),fe.push(()=>ce(v,"easing",Ln));function In(D){s[23](D)}let ns={name:"Selectable",showExpand:!1};s[0].selectable.enabled!==void 0&&(ns.enabled=s[0].selectable.enabled),re=new ht({props:ns}),fe.push(()=>ce(re,"enabled",In));function On(D){s[24](D)}let is={};s[0].legal.enabled!==void 0&&(is.enabled=s[0].legal.enabled),h=new Lr({props:is}),fe.push(()=>ce(h,"enabled",On)),h.$on("changed",s[25]);function Fn(D){s[26](D)}function qn(D){s[27](D)}let Wt={};s[0].highlight.enabled!==void 0&&(Wt.enabled=s[0].highlight.enabled),s[0].highlight.settings!==void 0&&(Wt.settings=s[0].highlight.settings),A=new gr({props:Wt}),fe.push(()=>ce(A,"enabled",Fn)),fe.push(()=>ce(A,"settings",qn));function Rn(D){s[28](D)}function Nn(D){s[29](D)}function Dn(D){s[30](D)}let Tt={};s[0].drawTools.enabled!==void 0&&(Tt.enabled=s[0].drawTools.enabled),s[0].drawTools.settings.knightLShape!==void 0&&(Tt.knightLShape=s[0].drawTools.settings.knightLShape),s[0].drawTools.settings.onlyChessMove!==void 0&&(Tt.onlyChessMove=s[0].drawTools.settings.onlyChessMove),N=new _r({props:Tt}),fe.push(()=>ce(N,"enabled",Rn)),fe.push(()=>ce(N,"knightLShape",Nn)),fe.push(()=>ce(N,"onlyChessMove",Dn));function Bn(D){s[31](D)}function Un(D){s[32](D)}let Kt={};s[0].sounds.enabled!==void 0&&(Kt.enabled=s[0].sounds.enabled),s[0].sounds.settings!==void 0&&(Kt.settings=s[0].sounds.settings),se=new Mr({props:Kt}),fe.push(()=>ce(se,"enabled",Bn)),fe.push(()=>ce(se,"settings",Un));let Hn={config:s[6]};return ne=new Za({props:Hn}),s[33](ne),Xe=new Ar({props:{copyText:s[4]}}),Ye=new ii({props:{source:s[4],language:"svelte"}}),{c(){e=B("link"),t=$(),n=B("div"),a=B("div"),i=B("div"),Ee(r.$$.fragment),k=$(),Ee(w.$$.fragment),S=$(),Ee(v.$$.fragment),G=$(),Ee(re.$$.fragment),ue=$(),Ee(h.$$.fragment),g=$(),Ee(A.$$.fragment),z=$(),Ee(N.$$.fragment),H=$(),Ee(se.$$.fragment),Y=$(),ae=B("div"),ve=B("div"),Ee(ne.$$.fragment),Ae=$(),Le=B("div"),Be=B("div"),De=B("div"),Ie=B("button"),Ue=B("span"),st=be("ts"),xe=$(),Ge=B("span"),vt=be("/"),Et=$(),$e=B("span"),kt=be("js"),Mt=$(),Ee(Xe.$$.fragment),wt=$(),Ee(Ye.$$.fragment),this.h()},l(D){const he=Jn('[data-svelte="svelte-tebjht"]',document.head);e=U(he,"LINK",{rel:!0,href:!0}),he.forEach(E),t=ee(D),n=U(D,"DIV",{class:!0});var Ke=K(n);a=U(Ke,"DIV",{class:!0});var it=K(a);i=U(it,"DIV",{class:!0});var Pe=K(i);ke(r.$$.fragment,Pe),k=ee(Pe),ke(w.$$.fragment,Pe),S=ee(Pe),ke(v.$$.fragment,Pe),G=ee(Pe),ke(re.$$.fragment,Pe),ue=ee(Pe),ke(h.$$.fragment,Pe),g=ee(Pe),ke(A.$$.fragment,Pe),z=ee(Pe),ke(N.$$.fragment,Pe),H=ee(Pe),ke(se.$$.fragment,Pe),Pe.forEach(E),Y=ee(it),ae=U(it,"DIV",{class:!0});var ct=K(ae);ve=U(ct,"DIV",{class:!0});var yt=K(ve);ke(ne.$$.fragment,yt),yt.forEach(E),Ae=ee(ct),Le=U(ct,"DIV",{class:!0});var pt=K(Le);Be=U(pt,"DIV",{class:!0});var et=K(Be);De=U(et,"DIV",{class:!0});var at=K(De);Ie=U(at,"BUTTON",{class:!0});var rt=K(Ie);Ue=U(rt,"SPAN",{class:!0});var Ct=K(Ue);st=me(Ct,"ts"),Ct.forEach(E),xe=ee(rt),Ge=U(rt,"SPAN",{class:!0});var At=K(Ge);vt=me(At,"/"),At.forEach(E),Et=ee(rt),$e=U(rt,"SPAN",{class:!0});var as=K($e);kt=me(as,"js"),as.forEach(E),rt.forEach(E),Mt=ee(at),ke(Xe.$$.fragment,at),at.forEach(E),wt=ee(et),ke(Ye.$$.fragment,et),et.forEach(E),pt.forEach(E),ct.forEach(E),it.forEach(E),Ke.forEach(E),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",c(e,"rel","stylesheet"),c(e,"href","prism-one-dark.css"),c(i,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),c(ve,"class","w-full lg:w-[var(--boardSize,50rem)]"),c(Ue,"class",je=s[1]?"text-yellow-600":""),c(Ge,"class","text-gray-600"),c($e,"class",bt=s[1]?"":"text-yellow-600"),c(Ie,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),c(De,"class","absolute right-2 top-2 flex gap-4"),c(Be,"class","shadow-lg rounded "),c(Le,"class","row-start-2 relative"),c(ae,"class","grid grid-rows-[min-content_auto] gap-10"),c(a,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),c(n,"class","my-10 grid grid-cols-center")},m(D,he){C(document.head,e),X(D,t,he),X(D,n,he),C(n,a),C(a,i),Me(r,i,null),C(i,k),Me(w,i,null),C(i,S),Me(v,i,null),C(i,G),Me(re,i,null),C(i,ue),Me(h,i,null),C(i,g),Me(A,i,null),C(i,z),Me(N,i,null),C(i,H),Me(se,i,null),C(a,Y),C(a,ae),C(ae,ve),Me(ne,ve,null),C(ae,Ae),C(ae,Le),C(Le,Be),C(Be,De),C(De,Ie),C(Ie,Ue),C(Ue,st),C(Ie,xe),C(Ie,Ge),C(Ge,vt),C(Ie,Et),C(Ie,$e),C($e,kt),C(De,Mt),Me(Xe,De,null),C(Be,wt),Me(Ye,Be,null),nt=!0,St||(Pt=de(Ie,"click",s[34]),St=!0)},p(D,he){const Ke={};!l&&he[0]&1&&(l=!0,Ke.boardTheme=D[0].board.boardTheme,ge(()=>l=!1)),!o&&he[0]&1&&(o=!0,Ke.mouseEvents=D[0].board.mouseEvents,ge(()=>o=!1)),!u&&he[0]&1&&(u=!0,Ke.notation=D[0].board.notation,ge(()=>u=!1)),!f&&he[0]&1&&(f=!0,Ke.flipped=D[0].board.flipped,ge(()=>f=!1)),!p&&he[0]&1&&(p=!0,Ke.shadow=D[0].board.style.shadow,ge(()=>p=!1)),!b&&he[0]&1&&(b=!0,Ke.borderRadius=D[0].board.style.borderRadius,ge(()=>b=!1)),!y&&he[0]&1&&(y=!0,Ke.resizible=D[0].board.resizible.enabled,ge(()=>y=!1)),!T&&he[0]&1&&(T=!0,Ke.min=D[0].board.resizible.min,ge(()=>T=!1)),!q&&he[0]&1&&(q=!0,Ke.max=D[0].board.resizible.max,ge(()=>q=!1)),r.$set(Ke);const it={};!d&&he[0]&1&&(d=!0,it.enabled=D[0].movable.enabled,ge(()=>d=!1)),!m&&he[0]&1&&(m=!0,it.color=D[0].movable.color,ge(()=>m=!1)),w.$set(it);const Pe={};!P&&he[0]&1&&(P=!0,Pe.enabled=D[0].draggable.enabled,ge(()=>P=!1)),!W&&he[0]&1&&(W=!0,Pe.ghostPiece=D[0].draggable.ghostPiece.enabled,ge(()=>W=!1)),!j&&he[0]&1&&(j=!0,Pe.transition=D[0].draggable.transition.enabled,ge(()=>j=!1)),!V&&he[0]&1&&(V=!0,Pe.duration=D[0].draggable.transition.settings.duration,ge(()=>V=!1)),!O&&he[0]&1&&(O=!0,Pe.easing=D[0].draggable.transition.settings.easing,ge(()=>O=!1)),v.$set(Pe);const ct={};!pe&&he[0]&1&&(pe=!0,ct.enabled=D[0].selectable.enabled,ge(()=>pe=!1)),re.$set(ct);const yt={};!_&&he[0]&1&&(_=!0,yt.enabled=D[0].legal.enabled,ge(()=>_=!1)),h.$set(yt);const pt={};!F&&he[0]&1&&(F=!0,pt.enabled=D[0].highlight.enabled,ge(()=>F=!1)),!I&&he[0]&1&&(I=!0,pt.settings=D[0].highlight.settings,ge(()=>I=!1)),A.$set(pt);const et={};!J&&he[0]&1&&(J=!0,et.enabled=D[0].drawTools.enabled,ge(()=>J=!1)),!le&&he[0]&1&&(le=!0,et.knightLShape=D[0].drawTools.settings.knightLShape,ge(()=>le=!1)),!L&&he[0]&1&&(L=!0,et.onlyChessMove=D[0].drawTools.settings.onlyChessMove,ge(()=>L=!1)),N.$set(et);const at={};!Q&&he[0]&1&&(Q=!0,at.enabled=D[0].sounds.enabled,ge(()=>Q=!1)),!R&&he[0]&1&&(R=!0,at.settings=D[0].sounds.settings,ge(()=>R=!1)),se.$set(at);const rt={};ne.$set(rt),(!nt||he[0]&2&&je!==(je=D[1]?"text-yellow-600":""))&&c(Ue,"class",je),(!nt||he[0]&2&&bt!==(bt=D[1]?"":"text-yellow-600"))&&c($e,"class",bt);const Ct={};he[0]&16&&(Ct.copyText=D[4]),Xe.$set(Ct);const At={};he[0]&16&&(At.source=D[4]),Ye.$set(At)},i(D){nt||(Z(r.$$.fragment,D),Z(w.$$.fragment,D),Z(v.$$.fragment,D),Z(re.$$.fragment,D),Z(h.$$.fragment,D),Z(A.$$.fragment,D),Z(N.$$.fragment,D),Z(se.$$.fragment,D),Z(ne.$$.fragment,D),Z(Xe.$$.fragment,D),Z(Ye.$$.fragment,D),nt=!0)},o(D){ie(r.$$.fragment,D),ie(w.$$.fragment,D),ie(v.$$.fragment,D),ie(re.$$.fragment,D),ie(h.$$.fragment,D),ie(A.$$.fragment,D),ie(N.$$.fragment,D),ie(se.$$.fragment,D),ie(ne.$$.fragment,D),ie(Xe.$$.fragment,D),ie(Ye.$$.fragment,D),nt=!1},d(D){E(e),D&&E(t),D&&E(n),we(r),we(w),we(v),we(re),we(h),we(A),we(N),we(se),s[33](null),we(ne),we(Xe),we(Ye),St=!1,Pt()}}}function Or(s,e,t){const n=new vn.Chess,a={movable:_e.BOTH,legal:!0,callbacks:{afterMove:L=>n.move({from:L.substring(0,2),to:L.substring(2,4),...L.length>4&&{promotion:L[4]}}),getLegalMoves:()=>n.moves({verbose:!0}).map(L=>{var H;return L.from+L.to+((H=L.promotion)!=null?H:"")}),getWhiteToMove:()=>n.turn()==="w",getInCheck:()=>n.inCheck(),getLastMove:()=>{var H;const L=n.history({verbose:!0}).pop();return L?L.from+L.to+((H=L.promotion)!=null?H:""):""}},board:{style:{shadow:!0,borderRadius:"0.25rem"},resizible:!0}},i=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,r=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let l,o=new En(a),u=!1,f=!0,p="";$t(()=>{t(3,u=!0),t(0,o=l.getState())});const b=(L,H)=>{const se=L.getConfig(),Q=`
	import type { ChessboardConfig } from '@powchess/chessboard/boardConfig';`;u&&l.setState(L);let R=JSON.stringify(se,(ne,Ae)=>ne==="callbacks"?"{functions}":Ae,4);R=R.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',H?i:r);const Y=`
	import { Color } from '@powchess/chessboard/enums';`;H&&(R=R.replaceAll(`movable: ${_e.WHITE}`,"movable: Color.WHITE").replaceAll(`movable: ${_e.BLACK}`,"movable: Color.BLACK").replaceAll(`movable: ${_e.BOTH}`,"movable: Color.BOTH"));function ae(){return R.includes("movable: Color.WHITE")||R.includes("movable: Color.BLACK")||R.includes("movable: Color.BOTH")}let ve=`<script${H?' lang="ts"':""}>
	import Chessboard from '@powchess/chessboard';${H?Q:""}${ae()&&H?Y:""}${o.legal.enabled?H?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${H?": ChessboardConfig":""} = ${R};
<\/script>

<Chessboard {config} />`;return H||(ve=ve.replaceAll("Color.WHITE",`${_e.WHITE}`).replaceAll("Color.BLACK",`${_e.BLACK}`).replaceAll("Color.BOTH",`${_e.BOTH}`)),ve};function y(L){s.$$.not_equal(o.board.boardTheme,L)&&(o.board.boardTheme=L,t(0,o))}function T(L){s.$$.not_equal(o.board.mouseEvents,L)&&(o.board.mouseEvents=L,t(0,o))}function q(L){s.$$.not_equal(o.board.notation,L)&&(o.board.notation=L,t(0,o))}function k(L){s.$$.not_equal(o.board.flipped,L)&&(o.board.flipped=L,t(0,o))}function w(L){s.$$.not_equal(o.board.style.shadow,L)&&(o.board.style.shadow=L,t(0,o))}function d(L){s.$$.not_equal(o.board.style.borderRadius,L)&&(o.board.style.borderRadius=L,t(0,o))}function m(L){s.$$.not_equal(o.board.resizible.enabled,L)&&(o.board.resizible.enabled=L,t(0,o))}function S(L){s.$$.not_equal(o.board.resizible.min,L)&&(o.board.resizible.min=L,t(0,o))}function v(L){s.$$.not_equal(o.board.resizible.max,L)&&(o.board.resizible.max=L,t(0,o))}function P(L){s.$$.not_equal(o.movable.enabled,L)&&(o.movable.enabled=L,t(0,o))}function W(L){s.$$.not_equal(o.movable.color,L)&&(o.movable.color=L,t(0,o))}function j(L){s.$$.not_equal(o.draggable.enabled,L)&&(o.draggable.enabled=L,t(0,o))}function V(L){s.$$.not_equal(o.draggable.ghostPiece.enabled,L)&&(o.draggable.ghostPiece.enabled=L,t(0,o))}function O(L){s.$$.not_equal(o.draggable.transition.enabled,L)&&(o.draggable.transition.enabled=L,t(0,o))}function G(L){s.$$.not_equal(o.draggable.transition.settings.duration,L)&&(o.draggable.transition.settings.duration=L,t(0,o))}function re(L){s.$$.not_equal(o.draggable.transition.settings.easing,L)&&(o.draggable.transition.settings.easing=L,t(0,o))}function pe(L){s.$$.not_equal(o.selectable.enabled,L)&&(o.selectable.enabled=L,t(0,o))}function ue(L){s.$$.not_equal(o.legal.enabled,L)&&(o.legal.enabled=L,t(0,o))}const h=()=>{o.legal.enabled||(n.reset(),u&&l.setFEN(o.board.startFen,!0,!1))};function _(L){s.$$.not_equal(o.highlight.enabled,L)&&(o.highlight.enabled=L,t(0,o))}function g(L){s.$$.not_equal(o.highlight.settings,L)&&(o.highlight.settings=L,t(0,o))}function A(L){s.$$.not_equal(o.drawTools.enabled,L)&&(o.drawTools.enabled=L,t(0,o))}function F(L){s.$$.not_equal(o.drawTools.settings.knightLShape,L)&&(o.drawTools.settings.knightLShape=L,t(0,o))}function I(L){s.$$.not_equal(o.drawTools.settings.onlyChessMove,L)&&(o.drawTools.settings.onlyChessMove=L,t(0,o))}function z(L){s.$$.not_equal(o.sounds.enabled,L)&&(o.sounds.enabled=L,t(0,o))}function N(L){s.$$.not_equal(o.sounds.settings,L)&&(o.sounds.settings=L,t(0,o))}function J(L){fe[L?"unshift":"push"](()=>{l=L,t(2,l)})}const le=()=>{t(1,f=!f)};return s.$$.update=()=>{s.$$.dirty[0]&3&&t(4,p=b(o,f))},[o,f,l,u,p,n,a,y,T,q,k,w,d,m,S,v,P,W,j,V,O,G,re,pe,ue,h,_,g,A,F,I,z,N,J,le]}class Rr extends Fe{constructor(e){super(),qe(this,e,Or,Ir,Re,{},null,[-1,-1])}}export{Rr as default};
