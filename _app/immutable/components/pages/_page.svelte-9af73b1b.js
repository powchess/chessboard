import{S as ye,i as Ae,s as Pe,k as I,H as Fe,l as z,m as N,I as Oe,h as A,n as _,p as J,b as B,F,J as ie,K as vs,L as lt,M as ut,A as se,N as $e,O as Re,a as j,e as ce,c as X,P as Ie,Q as be,R as ss,T as ct,f as x,g as ve,t as H,d as Ee,U as dt,V as Es,W as ws,X as He,Y as et,v as we,w as _e,x as Me,Z as tt,y as ke,o as as,_ as ht,$ as Ze,a0 as _s,a1 as Ms,G as ks,q as Ce,r as Te,u as ft,a2 as gt,a3 as ys,a4 as pt,a5 as As,a6 as rs,z as Ps,a7 as is,B as Ls,C as Ss,D as Cs,E as Ts,a8 as bt,a9 as Fs,aa as Os,ab as qs,ac as mt,ad as Rs}from"../../chunks/index-ac479efc.js";import{w as Is}from"../../chunks/index-9acba19d.js";const vt=["standard","darkBlue"];var G=(s=>(s[s.WHITE=0]="WHITE",s[s.BLACK=1]="BLACK",s[s.BOTH=2]="BOTH",s[s.SPECTATOR=3]="SPECTATOR",s[s.SERVER=4]="SERVER",s))(G||{}),L=(s=>(s[s.LEGAL=0]="LEGAL",s[s.LEGALHOVER=1]="LEGALHOVER",s[s.CHECK=2]="CHECK",s[s.MOVE=3]="MOVE",s[s.NEXTMOVE=4]="NEXTMOVE",s[s.PREMOVE=5]="PREMOVE",s[s.PREMOVEHOVER=6]="PREMOVEHOVER",s[s.SELECT=7]="SELECT",s))(L||{});const zs="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class ns{constructor(e){const a={allowPremoves:!0,moveSounds:!0,showCheckSqaure:!0,showLastMove:!0,showLegalMoves:!0,showNotation:!0};this.pieces=[],this.markedSquares=new Set,this.board={boardTheme:"standard",piecesTheme:"standard",flipped:!1,notation:a.showNotation,shadow:!1,startFen:zs,size:0},this.movable={enabled:!0,color:G.BOTH},this.draggable={enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}},this.selectable={enabled:!0,selectedPiece:void 0},this.legal={enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:a.allowPremoves,moves:[],curMove:""},lastMove:""},this.callbacks={},this.highlight={enabled:!0,settings:{select:!0,legal:a.showLegalMoves,move:a.showLastMove,preMove:a.allowPremoves,nextMove:a.allowPremoves,check:a.showCheckSqaure}},this.drawTools={enabled:!0,engineArrows:[],settings:{LshapeKnightMove:!0,onlyChessMove:!1}},this.sounds={enabled:a.moveSounds,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}},this.resizible={enabled:!1,settings:{min:100,max:1e3}},e!==void 0&&this.setConfigSettings(e)}setConfigSettings(e){var a,r,t,i,l,n,o,u,f,g,p,m,q,T,C,y,c;switch(((a=e.board)==null?void 0:a.boardTheme)!==void 0&&(this.board.boardTheme=e.board.boardTheme),((r=e.board)==null?void 0:r.piecesTheme)!==void 0&&(this.board.piecesTheme=e.board.piecesTheme),((t=e.board)==null?void 0:t.notation)!==void 0&&(this.board.notation=e.board.notation),((i=e.board)==null?void 0:i.shadow)!==void 0&&(this.board.shadow=e.board.shadow),((l=e.board)==null?void 0:l.flipped)!==void 0&&(this.board.flipped=e.board.flipped),((n=e.board)==null?void 0:n.startFen)!==void 0&&(this.board.startFen=e.board.startFen),e.movable){case!0:this.movable.enabled=!0,this.movable.color=G.BOTH;break;case!1:this.movable.enabled=!1;break;case G.WHITE:this.movable.enabled=!0,this.movable.color=G.WHITE;break;case G.BLACK:this.movable.enabled=!0,this.movable.color=G.BLACK;break}e.draggable!==void 0&&(e.draggable===!0?this.draggable.enabled=!0:e.draggable===!1?this.draggable.enabled=!1:(this.draggable.enabled=!0,((o=e.draggable)==null?void 0:o.ghostPiece)!==void 0&&(this.draggable.ghostPiece.enabled=e.draggable.ghostPiece),e.draggable.transition!==void 0&&(((u=e.draggable)==null?void 0:u.transition)===!0?this.draggable.transition.enabled=!0:((f=e.draggable)==null?void 0:f.transition)===!1?this.draggable.transition.enabled=!1:(this.draggable.transition.enabled=!0,(p=(g=e.draggable)==null?void 0:g.transition)!=null&&p.duration&&(this.draggable.transition.settings.duration=(q=(m=e.draggable)==null?void 0:m.transition)==null?void 0:q.duration),(C=(T=e.draggable)==null?void 0:T.transition)!=null&&C.easing&&(this.draggable.transition.settings.easing=(c=(y=e.draggable)==null?void 0:y.transition)==null?void 0:c.easing))))),e.selectable!==void 0&&(this.selectable.enabled=e.selectable),e.legal!==void 0&&(e.legal===!0?this.legal.enabled=!0:e.legal===!1?this.legal.enabled=!1:(this.legal.enabled=!0,e.legal.settings&&(e.legal.settings.allowCastling!==void 0&&(this.legal.settings.allowCastling=e.legal.settings.allowCastling),e.legal.settings.allowEnPassant!==void 0&&(this.legal.settings.allowEnPassant=e.legal.settings.allowEnPassant),e.legal.settings.allowPromotion!==void 0&&(this.legal.settings.allowPromotion=e.legal.settings.allowPromotion)),e.legal.preMoves!==void 0&&(this.legal.preMoves.enabled=e.legal.preMoves))),e.callbacks!==void 0&&(e.callbacks.getLegalMoves&&(this.callbacks.getLegalMoves=e.callbacks.getLegalMoves),e.callbacks.getPreMoves&&(this.callbacks.getPreMoves=e.callbacks.getPreMoves),e.callbacks.beforeMove&&(this.callbacks.beforeMove=e.callbacks.beforeMove),e.callbacks.afterMove&&(this.callbacks.afterMove=e.callbacks.afterMove),e.callbacks.getLastMove&&(this.callbacks.getLastMove=e.callbacks.getLastMove),e.callbacks.getLastMoveSAN&&(this.callbacks.getLastMoveSAN=e.callbacks.getLastMoveSAN),e.callbacks.getKingLocations&&(this.callbacks.getKingLocations=e.callbacks.getKingLocations),e.callbacks.getInCheck&&(this.callbacks.getInCheck=e.callbacks.getInCheck),e.callbacks.getWhiteToMove&&(this.callbacks.getWhiteToMove=e.callbacks.getWhiteToMove)),e.highlight!==void 0&&(e.highlight===!0?this.highlight.enabled=!0:e.highlight===!1?this.highlight.enabled=!1:(this.highlight.enabled=!0,e.highlight.check!==void 0&&(this.highlight.settings.check=e.highlight.check),e.highlight.legal!==void 0&&(this.highlight.settings.legal=e.highlight.legal),e.highlight.move!==void 0&&(this.highlight.settings.move=e.highlight.move),e.highlight.nextMove!==void 0&&(this.highlight.settings.nextMove=e.highlight.nextMove),e.highlight.preMove!==void 0&&(this.highlight.settings.preMove=e.highlight.preMove),e.highlight.select!==void 0&&(this.highlight.settings.select=e.highlight.select))),e.drawTools!==void 0&&(e.drawTools===!0?this.drawTools.enabled=!0:e.drawTools===!1?this.drawTools.enabled=!1:(this.drawTools.enabled=!0,e.drawTools.LshapeKnightMove!==void 0&&(this.drawTools.settings.LshapeKnightMove=e.drawTools.LshapeKnightMove),e.drawTools.onlyChessMove!==void 0&&(this.drawTools.settings.onlyChessMove=e.drawTools.onlyChessMove))),e.sounds!==void 0&&(e.sounds===!0?this.sounds.enabled=!0:e.sounds===!1?this.sounds.enabled=!1:(this.sounds.enabled=!0,e.sounds.CAPTURE!==void 0&&(this.sounds.settings.CAPTURE=e.sounds.CAPTURE),e.sounds.CASTLE!==void 0&&(this.sounds.settings.CASTLE=e.sounds.CASTLE),e.sounds.MOVE!==void 0&&(this.sounds.settings.MOVE=e.sounds.MOVE),e.sounds.UNDO!==void 0&&(this.sounds.settings.UNDO=e.sounds.UNDO))),e.resizible!==void 0&&(e.resizible===!0?this.resizible.enabled=!0:e.resizible===!1?this.resizible.enabled=!1:(this.resizible.enabled=!0,e.resizible.min!==void 0&&(this.resizible.settings.min=e.resizible.min),e.resizible.max!==void 0&&(this.resizible.settings.max=e.resizible.max)))}}function Ds(s,e){const{minWidth:a,maxWidth:r,curWidth:t}=e;let i=t,l,n,o,u;function f(m){m.stopPropagation(),s.dispatchEvent(new CustomEvent("resizing",{detail:{size:Math.max(Math.max(a,Math.min(r,o+(m.pageX-l))),Math.max(a,Math.min(r,u+(m.pageY-n))))}}))}function g(m){m.stopPropagation(),s.dispatchEvent(new CustomEvent("endResizing",{detail:{size:Math.max(Math.max(a,Math.min(r,o+Math.floor((m.pageX-l)/8)*8)),Math.max(a,Math.min(r,u+Math.floor((m.pageY-n)/8)*8)))}})),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",g)}function p(m){m.stopPropagation(),m.button===0&&(l=m.pageX,o=i,n=m.pageY,u=i,window.addEventListener("mousemove",f),window.addEventListener("mouseup",g))}return s.addEventListener("mousedown",p),{update(m){i=m.curWidth},destroy(){s.removeEventListener("mousedown",p)}}}const Ns={[L.LEGAL]:"legalSQ cursor-pointer",[L.LEGALHOVER]:"legalSQ_hover cursor-pointer",[L.SELECT]:"selectedSQ",[L.MOVE]:"highlightMove",[L.NEXTMOVE]:"nextMoveSQ",[L.PREMOVE]:"preMoveSQ cursor-pointer",[L.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[L.CHECK]:"checkSQ"},xs={white:"#f0d9b5",black:"#b58863"},Us="standard.svg",Bs={[L.LEGAL]:"legalSQ cursor-pointer",[L.LEGALHOVER]:"legalSQ_hover cursor-pointer",[L.SELECT]:"selectedSQ-darkBlue",[L.MOVE]:"highlightMove-darkBlue",[L.NEXTMOVE]:"nextMoveSQ",[L.PREMOVE]:"preMoveSQ cursor-pointer",[L.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[L.CHECK]:"checkSQ"},Vs={white:"#94A3B8",black:"#475569"},Hs="darkBlue.svg",me={squareStyles:{standard:Ns,darkBlue:Bs},colors:{standard:xs,darkBlue:Vs},imageName:{standard:Us,darkBlue:Hs}};function Ws(s){let e,a,r,t,i,l;return{c(){e=I("div"),a=Fe("svg"),r=Fe("path"),this.h()},l(n){e=z(n,"DIV",{style:!0,class:!0});var o=N(e);a=Oe(o,"svg",{xmlns:!0,viewBox:!0,fill:!0});var u=N(a);r=Oe(u,"path",{d:!0}),N(r).forEach(A),u.forEach(A),o.forEach(A),this.h()},h(){_(r,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),_(a,"xmlns","http://www.w3.org/2000/svg"),_(a,"viewBox","0 0 16 16"),_(a,"fill","currentColor"),J(e,"color",me.colors[s[0].state.board.boardTheme].black),_(e,"class","hidden lg:inline svelte-bwuzxv")},m(n,o){B(n,e,o),F(e,a),F(a,r),i||(l=[ie(e,"pointerdown",vs(s[2])),lt(t=Ds.call(null,e,{minWidth:s[0].state.resizible.settings.min,maxWidth:s[0].state.resizible.settings.max,curWidth:s[0].state.board.size})),ie(e,"resizing",s[3]),ie(e,"endResizing",s[4])],i=!0)},p(n,[o]){o&1&&J(e,"color",me.colors[n[0].state.board.boardTheme].black),t&&ut(t.update)&&o&1&&t.update.call(null,{minWidth:n[0].state.resizible.settings.min,maxWidth:n[0].state.resizible.settings.max,curWidth:n[0].state.board.size})},i:se,o:se,d(n){n&&A(e),i=!1,$e(l)}}}function Ks(s,e,a){let{chessboard:r}=e,{setSize:t}=e;function i(o){Re.call(this,s,o)}const l=o=>t(o.detail.size),n=o=>t(o.detail.size);return s.$$set=o=>{"chessboard"in o&&a(0,r=o.chessboard),"setSize"in o&&a(1,t=o.setSize)},[r,t,i,l,n]}class Gs extends ye{constructor(e){super(),Ae(this,e,Ks,Ws,Pe,{chessboard:0,setSize:1})}}const Et=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href,wt=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,js=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,Xs=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,Ys=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,Qs=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function _t(s){let e,a,r,t;return{c(){e=I("audio"),a=I("track"),r=I("source"),this.h()},l(i){e=z(i,"AUDIO",{preload:!0});var l=N(e);a=z(l,"TRACK",{kind:!0}),r=z(l,"SOURCE",{src:!0}),l.forEach(A),this.h()},h(){_(a,"kind","captions"),Ie(r.src,t=js)||_(r,"src",t),_(e,"preload","auto")},m(i,l){B(i,e,l),F(e,a),F(e,r),s[3](e)},p:se,d(i){i&&A(e),s[3](null)}}}function Mt(s){let e,a,r,t;return{c(){e=I("audio"),a=I("track"),r=I("source"),this.h()},l(i){e=z(i,"AUDIO",{preload:!0});var l=N(e);a=z(l,"TRACK",{kind:!0}),r=z(l,"SOURCE",{src:!0}),l.forEach(A),this.h()},h(){_(a,"kind","captions"),Ie(r.src,t=Xs)||_(r,"src",t),_(e,"preload","auto")},m(i,l){B(i,e,l),F(e,a),F(e,r),s[4](e)},p:se,d(i){i&&A(e),s[4](null)}}}function kt(s){let e,a,r,t;return{c(){e=I("audio"),a=I("track"),r=I("source"),this.h()},l(i){e=z(i,"AUDIO",{preload:!0});var l=N(e);a=z(l,"TRACK",{kind:!0}),r=z(l,"SOURCE",{src:!0}),l.forEach(A),this.h()},h(){_(a,"kind","captions"),Ie(r.src,t=Ys)||_(r,"src",t),_(e,"preload","auto")},m(i,l){B(i,e,l),F(e,a),F(e,r),s[5](e)},p:se,d(i){i&&A(e),s[5](null)}}}function yt(s){let e,a,r,t;return{c(){e=I("audio"),a=I("track"),r=I("source"),this.h()},l(i){e=z(i,"AUDIO",{preload:!0});var l=N(e);a=z(l,"TRACK",{kind:!0}),r=z(l,"SOURCE",{src:!0}),l.forEach(A),this.h()},h(){_(a,"kind","captions"),Ie(r.src,t=Qs)||_(r,"src",t),_(e,"preload","auto")},m(i,l){B(i,e,l),F(e,a),F(e,r),s[6](e)},p:se,d(i){i&&A(e),s[6](null)}}}function Zs(s){let e,a,r,t,i=s[0].MOVE&&_t(s),l=s[0].CAPTURE&&Mt(s),n=s[0].CASTLE&&kt(s),o=s[0].UNDO&&yt(s);return{c(){i&&i.c(),e=j(),l&&l.c(),a=j(),n&&n.c(),r=j(),o&&o.c(),t=ce()},l(u){i&&i.l(u),e=X(u),l&&l.l(u),a=X(u),n&&n.l(u),r=X(u),o&&o.l(u),t=ce()},m(u,f){i&&i.m(u,f),B(u,e,f),l&&l.m(u,f),B(u,a,f),n&&n.m(u,f),B(u,r,f),o&&o.m(u,f),B(u,t,f)},p(u,[f]){u[0].MOVE?i?i.p(u,f):(i=_t(u),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),u[0].CAPTURE?l?l.p(u,f):(l=Mt(u),l.c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null),u[0].CASTLE?n?n.p(u,f):(n=kt(u),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null),u[0].UNDO?o?o.p(u,f):(o=yt(u),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},i:se,o:se,d(u){i&&i.d(u),u&&A(e),l&&l.d(u),u&&A(a),n&&n.d(u),u&&A(r),o&&o.d(u),u&&A(t)}}}function Js(s,e,a){let{settings:r}=e;const t={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},i=()=>{t.CASTLE&&(t.CASTLE.pause(),a(1,t.CASTLE.currentTime=0,t)),t.MOVE&&(t.MOVE.pause(),a(1,t.MOVE.currentTime=0,t)),t.CAPTURE&&(t.CAPTURE.pause(),a(1,t.CAPTURE.currentTime=0,t)),t.UNDO&&(t.UNDO.pause(),a(1,t.UNDO.currentTime=0,t))},l=p=>p===void 0||r[p];function n(p){switch(i(),p){case"MOVE":t.MOVE&&l("MOVE")&&t.MOVE.play();break;case"CAPTURE":t.CAPTURE&&l("CAPTURE")&&t.CAPTURE.play();break;case"CASTLE":t.CASTLE&&l("CASTLE")&&t.CASTLE.play();break;case"UNDO":t.UNDO&&l("UNDO")&&(a(1,t.UNDO.volume=.3,t),t.UNDO.play());break}}function o(p){be[p?"unshift":"push"](()=>{t.MOVE=p,a(1,t)})}function u(p){be[p?"unshift":"push"](()=>{t.CAPTURE=p,a(1,t)})}function f(p){be[p?"unshift":"push"](()=>{t.CASTLE=p,a(1,t)})}function g(p){be[p?"unshift":"push"](()=>{t.UNDO=p,a(1,t)})}return s.$$set=p=>{"settings"in p&&a(0,r=p.settings)},[r,t,n,o,u,f,g]}class $s extends ye{constructor(e){super(),Ae(this,e,Js,Zs,Pe,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}function ea(s){const e=2.5949095;return(s*=2)<1?.5*(s*s*((e+1)*s-e)):.5*((s-=2)*s*((e+1)*s+e)+2)}function ta(s){return s*s*((1.70158+1)*s-1.70158)}function sa(s){return--s*s*((1.70158+1)*s+1.70158)+1}function Je(s){const e=.36363636363636365,a=8/11,r=9/10,t=4356/361,i=35442/1805,l=16061/1805,n=s*s;return s<e?7.5625*n:s<a?9.075*n-9.9*s+3.4:s<r?t*n-i*s+l:10.8*s*s-20.52*s+10.72}function aa(s){return s<.5?.5*(1-Je(1-s*2)):.5*Je(s*2-1)+.5}function ra(s){return 1-Je(1-s)}function ia(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)}function na(s){return 1-Math.sqrt(1-s*s)}function oa(s){return Math.sqrt(1- --s*s)}function la(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function ua(s){return s*s*s}function os(s){const e=s-1;return e*e*e+1}function ca(s){return s<.5?.5*Math.sin(13*Math.PI/2*2*s)*Math.pow(2,10*(2*s-1)):.5*Math.sin(-13*Math.PI/2*(2*s-1+1))*Math.pow(2,-10*(2*s-1))+1}function da(s){return Math.sin(13*s*Math.PI/2)*Math.pow(2,10*(s-1))}function fa(s){return Math.sin(-13*(s+1)*Math.PI/2)*Math.pow(2,-10*s)+1}function ha(s){return s===0||s===1?s:s<.5?.5*Math.pow(2,20*s-10):-.5*Math.pow(2,10-s*20)+1}function ga(s){return s===0?s:Math.pow(2,10*(s-1))}function pa(s){return s===1?s:1-Math.pow(2,-10*s)}function ba(s){return s/=.5,s<1?.5*s*s:(s--,-.5*(s*(s-2)-1))}function ma(s){return s*s}function va(s){return-s*(s-2)}function Ea(s){return s<.5?8*Math.pow(s,4):-8*Math.pow(s-1,4)+1}function wa(s){return Math.pow(s,4)}function _a(s){return Math.pow(s-1,3)*(1-s)+1}function Ma(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)}function ka(s){return s*s*s*s*s}function ya(s){return--s*s*s*s*s+1}function Aa(s){return-.5*(Math.cos(Math.PI*s)-1)}function Pa(s){const e=Math.cos(s*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function La(s){return Math.sin(s*Math.PI/2)}const Sa=Object.freeze(Object.defineProperty({__proto__:null,backIn:ta,backInOut:ea,backOut:sa,bounceIn:ra,bounceInOut:aa,bounceOut:Je,circIn:na,circInOut:ia,circOut:oa,cubicIn:ua,cubicInOut:la,cubicOut:os,elasticIn:da,elasticInOut:ca,elasticOut:fa,expoIn:ga,expoInOut:ha,expoOut:pa,quadIn:ma,quadInOut:ba,quadOut:va,quartIn:wa,quartInOut:Ea,quartOut:_a,quintIn:ka,quintInOut:Ma,quintOut:ya,sineIn:Pa,sineInOut:Aa,sineOut:La,linear:ss},Symbol.toStringTag,{value:"Module"}));function At(s,{delay:e=0,duration:a=400,easing:r=os,x:t=0,y:i=0,opacity:l=0}={}){const n=getComputedStyle(s),o=+n.opacity,u=n.transform==="none"?"":n.transform,f=o*(1-l);return{delay:e,duration:a,easing:r,css:(g,p)=>`
			transform: ${u} translate(${(1-g)*t}px, ${(1-g)*i}px);
			opacity: ${o-f*p}`}}const Pt=""+new URL("../../assets/wP-f78bae6c.svg",import.meta.url).href,Ca=""+new URL("../../assets/wR-5eb92d73.svg",import.meta.url).href,Ta=""+new URL("../../assets/wN-a4c975a2.svg",import.meta.url).href,Fa=""+new URL("../../assets/wB-1ff2f149.svg",import.meta.url).href,Oa=""+new URL("../../assets/wQ-8568b485.svg",import.meta.url).href,qa=""+new URL("../../assets/wK-4cdf6dc9.svg",import.meta.url).href,Ra=""+new URL("../../assets/bP-84e521e8.svg",import.meta.url).href,Ia=""+new URL("../../assets/bR-e39efb08.svg",import.meta.url).href,za=""+new URL("../../assets/bN-d3912d91.svg",import.meta.url).href,Da=""+new URL("../../assets/bB-c430b746.svg",import.meta.url).href,Na=""+new URL("../../assets/bQ-c7b9a43e.svg",import.meta.url).href,xa=""+new URL("../../assets/bK-3500a2e6.svg",import.meta.url).href;function st(s){switch(s){case"wP":return Pt;case"wR":return Ca;case"wN":return Ta;case"wB":return Fa;case"wQ":return Oa;case"wK":return qa;case"bP":return Ra;case"bR":return Ia;case"bN":return za;case"bB":return Da;case"bQ":return Na;case"bK":return xa;default:return Pt}}function Ua(s){let e,a,r,t,i,l;return{c(){e=I("button"),a=I("img"),this.h()},l(n){e=z(n,"BUTTON",{});var o=N(e);a=z(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(A),this.h()},h(){Ie(a.src,r=s[1])||_(a,"src",r),_(a,"alt",t="Promotion to "+s[0].toUpperCase()),_(a,"class","rounded-md border border-gray-300 hover:border-sky-600 hover:bg-gray-600")},m(n,o){B(n,e,o),F(e,a),i||(l=ie(e,"click",s[2]),i=!0)},p(n,[o]){o&1&&t!==(t="Promotion to "+n[0].toUpperCase())&&_(a,"alt",t)},i:se,o:se,d(n){n&&A(e),i=!1,l()}}}function Ba(s,e,a){let{piece:r}=e,{isWhite:t}=e,{showModal:i}=e;const l=ct(),n=(t?"w":"b")+r.toUpperCase(),o=st(n),u=()=>{l("newPromotion",r),a(3,i=!1)};return s.$$set=f=>{"piece"in f&&a(0,r=f.piece),"isWhite"in f&&a(4,t=f.isWhite),"showModal"in f&&a(3,i=f.showModal)},[r,o,u,i,t]}class Va extends ye{constructor(e){super(),Ae(this,e,Ba,Ua,Pe,{piece:0,isWhite:4,showModal:3})}}function Lt(s,e,a){const r=s.slice();return r[6]=e[a],r}function St(s){let e,a,r,t,i,l=["q","r","b","n"],n=[];for(let u=0;u<4;u+=1)n[u]=Ct(Lt(s,l,u));const o=u=>H(n[u],1,1,()=>{n[u]=null});return{c(){e=I("div"),a=I("div");for(let u=0;u<4;u+=1)n[u].c();this.h()},l(u){e=z(u,"DIV",{class:!0});var f=N(e);a=z(f,"DIV",{class:!0});var g=N(a);for(let p=0;p<4;p+=1)n[p].l(g);g.forEach(A),f.forEach(A),this.h()},h(){_(a,"class","modal-content p-3 gap-3 svelte-tvjsje"),_(e,"class","modal svelte-tvjsje")},m(u,f){B(u,e,f),F(e,a);for(let g=0;g<4;g+=1)n[g].m(a,null);i=!0},p(u,f){if(f&3){l=["q","r","b","n"];let g;for(g=0;g<4;g+=1){const p=Lt(u,l,g);n[g]?(n[g].p(p,f),x(n[g],1)):(n[g]=Ct(p),n[g].c(),x(n[g],1),n[g].m(a,null))}for(ve(),g=4;g<4;g+=1)o(g);Ee()}},i(u){if(!i){for(let f=0;f<4;f+=1)x(n[f]);dt(()=>{t&&t.end(1),r=Es(a,At,{x:100,duration:300}),r.start()}),i=!0}},o(u){n=n.filter(Boolean);for(let f=0;f<4;f+=1)H(n[f]);r&&r.invalidate(),t=ws(a,At,{x:-200,duration:100}),i=!1},d(u){u&&A(e),He(n,u),u&&t&&t.end()}}}function Ct(s){let e,a,r,t;function i(o){s[3](o)}function l(o){s[4](o)}let n={piece:s[6]};return s[1]!==void 0&&(n.isWhite=s[1]),s[0]!==void 0&&(n.showModal=s[0]),e=new Va({props:n}),be.push(()=>et(e,"isWhite",i)),be.push(()=>et(e,"showModal",l)),e.$on("newPromotion",s[5]),{c(){we(e.$$.fragment)},l(o){_e(e.$$.fragment,o)},m(o,u){Me(e,o,u),t=!0},p(o,u){const f={};!a&&u&2&&(a=!0,f.isWhite=o[1],tt(()=>a=!1)),!r&&u&1&&(r=!0,f.showModal=o[0],tt(()=>r=!1)),e.$set(f)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){H(e.$$.fragment,o),t=!1},d(o){ke(e,o)}}}function Ha(s){let e,a,r=s[0]&&St(s);return{c(){r&&r.c(),e=ce()},l(t){r&&r.l(t),e=ce()},m(t,i){r&&r.m(t,i),B(t,e,i),a=!0},p(t,[i]){t[0]?r?(r.p(t,i),i&1&&x(r,1)):(r=St(t),r.c(),x(r,1),r.m(e.parentNode,e)):r&&(ve(),H(r,1,1,()=>{r=null}),Ee())},i(t){a||(x(r),a=!0)},o(t){H(r),a=!1},d(t){r&&r.d(t),t&&A(e)}}}function Wa(s,e,a){let r=!1,t;function i(u){a(0,r=!0),u?a(1,t=!0):a(1,t=!1)}function l(u){t=u,a(1,t)}function n(u){r=u,a(0,r)}function o(u){Re.call(this,s,u)}return[r,t,i,l,n,o]}class Ka extends ye{constructor(e){super(),Ae(this,e,Wa,Ha,Pe,{openPromotionModal:2})}get openPromotionModal(){return this.$$.ctx[2]}}const Ga=["a","b","c","d","e","f","g","h"],ja=["8","7","6","5","4","3","2","1"];function at(s){return{x:Ga.indexOf(s[0]),y:ja.indexOf(s[1])}}function rt(s){return s.charCodeAt(0)-97}function Xa(s){return 8-parseInt(s,10)}const Ya=s=>{let e="",a=0;for(let r=0;r<s.length;r++){r!==0&&(e+="/");for(let t=0;t<s[r].length;t++){const i=s[r][t];i!=null&&a===0?i[0]==="w"?e+=i[1]:e+=i[1].toLowerCase():i!=null&&a!==0?(e+=a.toString(),a=0,i[0]==="w"?e+=i[1]:e+=i[1].toLowerCase()):a++}a!==0&&(e+=a.toString(),a=0)}return e},Qa=["a","b","c","d","e","f","g","h"],Za=["8","7","6","5","4","3","2","1"];function Ja(s){s.querySelectorAll("[sf]").forEach(e=>e.remove())}function it(s){return`${Qa[s.x]}${Za[s.y]}`}function ls(s,e){return Math.abs((s.x-e.x)*(s.y-e.y))===2}function nt(s,e){return`${it(s)}${it(e)}`}function $a(s,e){return!!(ls(s,e)||Math.abs(s.x-e.x)===Math.abs(s.y-e.y)||s.x===e.x!=(s.y===e.y))}function us(s,e,a,r,t,i){let l={x:-1,y:-1},n,o;ls(e,a)&&r?(Math.abs(a.x-e.x)===2?l={x:a.x,y:e.y}:l={x:e.x,y:a.y},l.y-e.y<0?o=Math.PI+Math.atan((l.x-e.x)/(l.y-e.y)):o=Math.atan((l.x-e.x)/Math.abs(l.y-e.y)),n={x:a.x-Math.sign(a.x-l.x)*(l.x!==a.x?.4:0),y:a.y-Math.sign(a.y-l.y)*(l.y!==a.y?.4:0)}):(a.y-e.y<0?o=Math.PI+Math.atan((a.x-e.x)/(a.y-e.y)):o=Math.atan((a.x-e.x)/Math.abs(a.y-e.y)),n={x:a.x-Math.sin(o)*.4,y:a.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};s.setAttribute("points",`${u.x+.5},${u.y+.5} ${l.x!==-1&&l.y!==-1&&r?`${l.x+.5},${l.y+.5} `:""}${n.x+.5},${n.y+.5}`),s.setAttribute("data-sqID",`${nt(e,a)}`),i!==void 0&&s.setAttribute("opacity",`${i}`),t!==void 0&&(s.setAttribute("marker-start",`url(#start-${t[0]})`),s.setAttribute("marker-end",`url(#end-${t[0]})`),s.setAttribute("stroke",t))}function Qe(s,e,a,r,t,i){if(!(e===void 0||a.x===-1&&a.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),r?e.setAttribute("stroke","red"):t?e.setAttribute("stroke","orange"):i?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),s.querySelectorAll(`\u0441ircle[cx="${a.x+.5}"][cy="${a.y+.5}"]`).forEach(l=>{e!==void 0&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const l=r?"red":t?"orange":i?"blue":"green";e.setAttribute("stroke",`${l}`),e.setAttribute("marker-start",`url(#start-${l[0]})`),e.setAttribute("marker-end",`url(#end-${l[0]})`),s.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(n=>{e instanceof SVGPolylineElement&&n!==e&&(n.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function cs(s,e,a,r,t){const i=document.createElementNS("http://www.w3.org/2000/svg","polyline");return us(i,s,e,a,r,t),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.25"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("opacity",t!==void 0?`${t}`:"0.4"),i.setAttribute("marker-start",r?`url(#start-${r[0]})`:"url(#start-g)"),i.setAttribute("marker-end",r?`url(#end-${r[0]})`:"url(#end-g)"),i.setAttribute("stroke",r||"green"),i}function er(s,e,a){e.forEach(r=>{const t=cs(at(r.move.substring(0,2)),at(r.move.substring(2,4)),a,r.color,r.opacity);t.setAttribute("sf",""),s.appendChild(t)})}function Tt(s){s.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("sf")||e.remove()})}function tr(s,e){let{svg:a,flipped:r,enabled:t,settings:i}=e,l=!1,n={x:-1,y:-1},o,u;function f(y,c){const d=s.getBoundingClientRect(),w=r?d.width-(y-d.left):y-d.left,v=r?d.height-(c-d.top):c-d.top;return{x:Math.max(0,Math.min(7,Math.floor(w/(s.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(v/(s.clientHeight/8))))}}function g(y){u=document.createElementNS("http://www.w3.org/2000/svg","circle"),u.setAttribute("cx",`${y.x+.5}`),u.setAttribute("cy",`${y.y+.5}`),u.setAttribute("r","0.465"),u.setAttribute("opacity","0.4"),u.setAttribute("fill","none"),u.setAttribute("stroke-width","0.07"),u.setAttribute("stroke","green")}function p(y){if(u===void 0||n.x===-1&&n.y===-1)return;const c=f(y.clientX,y.clientY);i.onlyChessMove&&!$a(n,c)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),n.x===c.x&&n.y===c.y?(nt(n,c),u instanceof SVGPolylineElement&&(u.remove(),g(c)),Qe(a,u,n,y.shiftKey,y.ctrlKey,y.altKey),a.appendChild(u),a.querySelectorAll(`circle[cx="${n.x+.5}"][cy="${n.y+.5}"]`).forEach(d=>{d!==u&&(o=d,u!==void 0&&d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,a.querySelectorAll(`polyline[data-sqID="${nt(n,c)}"]`).forEach(d=>{u===void 0||n.x===-1&&n.y===-1||d===u||(o=d,d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=cs(n,c,i.LshapeKnightMove),Qe(a,u,n,y.shiftKey,y.ctrlKey,y.altKey),a.appendChild(u)):u instanceof SVGPolylineElement&&us(u,n,c,i.LshapeKnightMove)))}function m(y){y.preventDefault()}function q(y){y.preventDefault(),Qe(a,u,n,y.shiftKey,y.ctrlKey,y.altKey)}function T(y){if(y.button===0)l=!1;else if(y.button===2){if(n.x===-1&&n.y===-1)return;a.querySelectorAll("[remove]").forEach(c=>{c.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:it(n),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,n={x:-1,y:-1},l=!1,window.removeEventListener("mousemove",p),window.removeEventListener("keydown",q),window.removeEventListener("keyup",q),window.removeEventListener("contextmenu",m)}window.removeEventListener("mouseup",T)}function C(y){if(y.button===0)l=!0,Tt(a),window.addEventListener("mouseup",T);else if(y.button===2&&!l){const c=f(y.clientX,y.clientY);n=c,g(c),Qe(a,u,n,y.shiftKey,y.ctrlKey,y.altKey),o=void 0,a.querySelectorAll(`circle[cx="${c.x+.5}"][cy="${c.y+.5}"]`).forEach(d=>{o=d,u!==void 0&&d.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&a.appendChild(u),window.addEventListener("mousemove",p),window.addEventListener("mouseup",T),window.addEventListener("keydown",q),window.addEventListener("keyup",q),window.addEventListener("contextmenu",m)}}return t&&s.addEventListener("mousedown",C),{update(y){y.svg!==a&&(a=y.svg),y.enabled!==t&&(t=y.enabled,t?s.addEventListener("mousedown",C):(Tt(a),s.removeEventListener("mousedown",C))),i=y.settings,r=y.flipped}}}function Ft(s,e,a){const r=s.slice();return r[8]=e[a],r}function Ot(s){let e,a,r,t;return{c(){e=Fe("marker"),a=Fe("path"),r=Fe("marker"),t=Fe("path"),this.h()},l(i){e=Oe(i,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var l=N(e);a=Oe(l,"path",{fill:!0,d:!0}),N(a).forEach(A),l.forEach(A),r=Oe(i,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var n=N(r);t=Oe(n,"path",{fill:!0,d:!0}),N(t).forEach(A),n.forEach(A),this.h()},h(){_(a,"fill",s[8]),_(a,"d","M 5 0 Q 0 0 0 5 L 0 15 Q 0 20 5 20 Z"),_(e,"id","start-"+s[8][0]),_(e,"viewBox","0 0 5 20"),_(e,"refX","4"),_(e,"refY","10"),_(e,"markerUnits","strokeWidth"),_(e,"markerWidth","0.5"),_(e,"markerHeight","1"),_(e,"orient","auto"),_(t,"fill",s[8]),_(t,"d","M 0 4 L 10 10 L 0 16 Z"),_(r,"id","end-"+s[8][0]),_(r,"viewBox","0 0 10 20"),_(r,"refX","0.2"),_(r,"refY","10"),_(r,"markerUnits","strokeWidth"),_(r,"orient","auto"),_(r,"fill","currentColor")},m(i,l){B(i,e,l),F(e,a),B(i,r,l),F(r,t)},p:se,d(i){i&&A(e),i&&A(r)}}}function sr(s){let e,a,r,t=s[2],i=[];for(let l=0;l<t.length;l+=1)i[l]=Ot(Ft(s,t,l));return{c(){e=Fe("svg"),a=Fe("defs");for(let l=0;l<i.length;l+=1)i[l].c();r=Fe("g"),this.h()},l(l){e=Oe(l,"svg",{xmlns:!0,style:!0,class:!0,viewBox:!0});var n=N(e);a=Oe(n,"defs",{});var o=N(a);for(let u=0;u<i.length;u+=1)i[u].l(o);o.forEach(A),r=Oe(n,"g",{}),N(r).forEach(A),n.forEach(A),this.h()},h(){_(e,"xmlns","http://www.w3.org/2000/svg"),J(e,"transform","rotate("+(s[1]?"180deg":"0deg")+")"),_(e,"class","rounded svelte-1ez37sv"),_(e,"viewBox","0 0 8 8")},m(l,n){B(l,e,n),F(e,a);for(let o=0;o<i.length;o+=1)i[o].m(a,null);F(e,r),s[5](r)},p(l,[n]){if(n&4){t=l[2];let o;for(o=0;o<t.length;o+=1){const u=Ft(l,t,o);i[o]?i[o].p(u,n):(i[o]=Ot(u),i[o].c(),i[o].m(a,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}n&2&&J(e,"transform","rotate("+(l[1]?"180deg":"0deg")+")")},i:se,o:se,d(l){l&&A(e),He(i,l),s[5](null)}}}function ar(s,e,a){let{flipped:r=!1}=e,{svg:t}=e,{LshapeKnightMove:i=!1}=e,{computerArrows:l=[]}=e,n=!1;function o(g){!n||(Ja(t),er(t,g,i))}as(()=>{n=!0,o(l)});const u=["green","red","blue","orange"];function f(g){be[g?"unshift":"push"](()=>{t=g,a(0,t)})}return s.$$set=g=>{"flipped"in g&&a(1,r=g.flipped),"svg"in g&&a(0,t=g.svg),"LshapeKnightMove"in g&&a(3,i=g.LshapeKnightMove),"computerArrows"in g&&a(4,l=g.computerArrows)},s.$$.update=()=>{s.$$.dirty&16&&o(l)},[t,r,u,i,l,f]}class rr extends ye{constructor(e){super(),Ae(this,e,ar,sr,Pe,{flipped:1,svg:0,LshapeKnightMove:3,computerArrows:4})}}function ir(s){let e,a;return{c(){e=I("div"),this.h()},l(r){e=z(r,"DIV",{style:!0,class:!0}),N(e).forEach(A),this.h()},h(){J(e,"left",s[2]*12.5+"%"),J(e,"bottom",s[3]*12.5+"%"),_(e,"class",a="noselect "+me.squareStyles[s[1]][s[0]]+" svelte-fwbvtn")},m(r,t){B(r,e,t)},p(r,[t]){t&4&&J(e,"left",r[2]*12.5+"%"),t&8&&J(e,"bottom",r[3]*12.5+"%"),t&3&&a!==(a="noselect "+me.squareStyles[r[1]][r[0]]+" svelte-fwbvtn")&&_(e,"class",a)},i:se,o:se,d(r){r&&A(e)}}}function nr(s,e,a){let{square:r}=e,{color:t}=e,{getGridCoordsFromSquare:i}=e,{flipped:l}=e,{theme:n}=e,o,u;const f=()=>{const g=i(r);a(2,o=g.x),a(3,u=g.y)};return s.$$set=g=>{"square"in g&&a(4,r=g.square),"color"in g&&a(0,t=g.color),"getGridCoordsFromSquare"in g&&a(5,i=g.getGridCoordsFromSquare),"flipped"in g&&a(6,l=g.flipped),"theme"in g&&a(1,n=g.theme)},s.$$.update=()=>{s.$$.dirty&64&&f()},[t,n,o,u,r,i,l]}class or extends ye{constructor(e){super(),Ae(this,e,nr,ir,Pe,{square:4,color:0,getGridCoordsFromSquare:5,flipped:6,theme:1})}}function qt(s,e,a,r){if(e===0&&a===0)return s;const t=r?["a","b","c","d","e","f","g","h"].reverse():["a","b","c","d","e","f","g","h"],i=r?["8","7","6","5","4","3","2","1"].reverse():["8","7","6","5","4","3","2","1"],l=t[t.indexOf(s[0])+e],n=i[i.indexOf(s[1])+a];if(!(!l||!n))return l+n}function Rt(s,e,a){const r=e*1.15,t=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","circle");return t.setAttribute("width",(s.offsetWidth*r).toString()),t.setAttribute("height",(s.offsetHeight*r).toString()),t.style.position="absolute",t.style.zIndex="100",t.style.transform=`translate(${a?"":"-"}${25*r/2}%, -${25*r/2}%)`,t.style.opacity="0.2",i.setAttribute("r",(s.offsetWidth*r/2).toString()),i.setAttribute("cx",(s.offsetWidth*r/2).toString()),i.setAttribute("cy",(s.offsetHeight*r/2).toString()),i.setAttribute("fill","black"),t.appendChild(i),t}function lr(s,e){let a;function r(O,K=1e3){let D=!1;const W=()=>{a==null?D=!1:(O(...a),a=null,setTimeout(W,K))};return(...$)=>{if(D){a=$;return}O(...$),D=!0,setTimeout(W,K)}}let t,i,l,n,o,u,f,g,p=!1,m;const q=s.parentNode;let T,{startSquare:C,boardFlipped:y,onlyShow:c}=e;const{coords:d}=e;let w=ht(d).x,v=ht(d).y;const E=120,M=1.6;let S=Rt(s,M,y);s.draggable=!1;function k(O){let K,D;if(O instanceof MouseEvent?(K=O.clientX-t,D=O.clientY-i,t=O.clientX,i=O.clientY):(K=O.touches[0].clientX-t,D=O.touches[0].clientY-i,t=O.touches[0].clientX,i=O.touches[0].clientY),o+=K,u+=D,p||(Math.abs(o)>1||Math.abs(u)>1)&&(d.update(W=>({x:W.x+(t-s.offsetWidth/2-s.getBoundingClientRect().x)/s.clientWidth,y:O instanceof MouseEvent?W.y-(i-s.offsetHeight/2-s.getBoundingClientRect().y)/s.clientWidth:W.y-(i-s.offsetHeight*1.5-s.getBoundingClientRect().y)/s.clientWidth,scale:O instanceof MouseEvent?1:M}),{duration:E}),p=!0,s.style.zIndex="30",s.style.cursor="grabbing",s.dispatchEvent(new CustomEvent("startMoving"))),!!p){if(!(O instanceof MouseEvent)){const W=Math.floor((o+l)/s.offsetWidth),$=Math.floor((u+n)/s.offsetHeight),re=qt(C,W,$,y);if(re){if(re!==T&&!(O instanceof MouseEvent)){const ee=at(re);S.style.left=`${ee.x*12.5}%`,S.style.top=`${ee.y*12.5}%`,q.appendChild(S)}}else T&&(T="")}d.update(W=>({x:W.x+K/s.clientWidth,y:W.y-D/s.clientWidth,scale:O instanceof MouseEvent?1:M}),{duration:0}),s.dispatchEvent(new CustomEvent("moving",{detail:{x:t,y:i}}))}}const b=r(k,10);function P(){const O=window.scrollX-f,K=window.scrollY-g;f=window.scrollX,g=window.scrollY,d.update(D=>({x:D.x+O,y:D.y+K,scale:1}),{duration:0})}function V(){window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",V),document.body.removeEventListener("mouseleave",V),window.removeEventListener("scroll",P),window.removeEventListener("touchmove",b),window.removeEventListener("touchend",V),window.removeEventListener("touchcancel",V),a=null;const O=Math.floor((o+l)/s.offsetWidth),K=Math.floor((u+n)/s.offsetHeight),D=qt(C,O,K,y);D&&D!==C&&s.dispatchEvent(new CustomEvent("dropped",{detail:D})),d.update(()=>({x:w,y:v,scale:1}),{duration:E}).then(()=>{s.dispatchEvent(new CustomEvent("animationEnded"))}),t=0,i=0,o=0,u=0,p=!1,s.style.removeProperty("cursor"),setTimeout(()=>{s.style.zIndex="10"},E),S.remove()}function ae(O){var D;if(O.preventDefault(),O instanceof MouseEvent&&O.button!==0||!(O instanceof MouseEvent)&&((D=O.touches)==null?void 0:D.length)>1)return;w=y?7-rt(C[0]):rt(C[0]),v=y?8-parseInt(C[1],10):parseInt(C[1],10)-1,T=C;const K=O.target.getBoundingClientRect();!(O instanceof MouseEvent)&&O.touches[0]&&O.targetTouches[0]?(t=O.touches[0].clientX,i=O.touches[0].clientY,l=O.targetTouches[0].clientX-K.x,n=O.targetTouches[0].clientY-K.y):O instanceof MouseEvent&&(t=O.clientX,i=O.clientY,l=O.offsetX,n=O.offsetY),o=0,u=0,f=window.scrollX,g=window.scrollY,s.dispatchEvent(new CustomEvent("clicked")),window.addEventListener("mousemove",b),window.addEventListener("mouseup",V),document.body.addEventListener("mouseleave",V),window.addEventListener("scroll",P),window.addEventListener("touchmove",b),window.addEventListener("touchend",V)}function ne(O){O.preventDefault()}function Le(O){O.preventDefault()}return s.addEventListener("contextmenu",ne),s.addEventListener("dragstart",Le),c||(s.addEventListener("mousedown",ae),s.addEventListener("touchstart",ae)),{destroy(){s.removeEventListener("mousedown",ae),s.removeEventListener("touchstart",ae),s.removeEventListener("contextmenu",ne),s.removeEventListener("dragstart",Le),window.clearTimeout(m)},update(O){C=O.startSquare,O.onlyShow!==c&&(c=O.onlyShow,c?(s.removeEventListener("mousedown",ae),s.removeEventListener("touchstart",ae)):(s.addEventListener("mousedown",ae),s.addEventListener("touchstart",ae))),y!==O.boardFlipped&&(S=Rt(s,M,O.boardFlipped)),y=O.boardFlipped}}}function It(s){return Object.prototype.toString.call(s)==="[object Date]"}function ot(s,e){if(s===e||s!==s)return()=>s;const a=typeof s;if(a!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const r=e.map((t,i)=>ot(s[i],t));return t=>r.map(i=>i(t))}if(a==="object"){if(!s||!e)throw new Error("Object cannot be null");if(It(s)&&It(e)){s=s.getTime(),e=e.getTime();const i=e-s;return l=>new Date(s+l*i)}const r=Object.keys(e),t={};return r.forEach(i=>{t[i]=ot(s[i],e[i])}),i=>{const l={};return r.forEach(n=>{l[n]=t[n](i)}),l}}if(a==="number"){const r=e-s;return t=>s+t*r}throw new Error(`Cannot interpolate ${a} values`)}function ur(s,e={}){const a=Is(s);let r,t=s;function i(l,n){if(s==null)return a.set(s=l),Promise.resolve();t=l;let o=r,u=!1,{delay:f=0,duration:g=400,easing:p=ss,interpolate:m=ot}=Ze(Ze({},e),n);if(g===0)return o&&(o.abort(),o=null),a.set(s=t),Promise.resolve();const q=_s()+f;let T;return r=Ms(C=>{if(C<q)return!0;u||(T=m(s,l),typeof g=="function"&&(g=g(s,l)),u=!0),o&&(o.abort(),o=null);const y=C-q;return y>g?(a.set(s=l),!1):(a.set(s=T(p(y/g))),!0)}),r.promise}return{set:i,update:(l,n)=>i(l(t,s),n),subscribe:a.subscribe}}function cr(s){let e,a,r,t,i;return{c(){e=I("img"),this.h()},l(l){e=z(l,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){J(e,"left",s[5].x*12.5+"%"),J(e,"bottom",s[5].y*12.5+"%"),J(e,"z-Index",s[4]),J(e,"opacity",s[3]?.3:1),_(e,"class","noselect "+(s[9]()?"cursor-pointer":"")+" svelte-1g241z"),Ie(e.src,a=st(s[1]))||_(e,"src",a),_(e,"alt",s[1])},m(l,n){B(l,e,n),t||(i=[lt(r=lr.call(null,e,{startSquare:s[0],onlyShow:!s[9](),boardFlipped:s[2],coords:s[7]})),ie(e,"dropped",s[8]),ie(e,"clicked",s[15]),ie(e,"startMoving",s[16]),ie(e,"animationEnded",s[17]),ie(e,"moving",s[18])],t=!0)},p(l,[n]){n&32&&J(e,"left",l[5].x*12.5+"%"),n&32&&J(e,"bottom",l[5].y*12.5+"%"),n&16&&J(e,"z-Index",l[4]),n&8&&J(e,"opacity",l[3]?.3:1),n&2&&!Ie(e.src,a=st(l[1]))&&_(e,"src",a),n&2&&_(e,"alt",l[1]),r&&ut(r.update)&&n&5&&r.update.call(null,{startSquare:l[0],onlyShow:!l[9](),boardFlipped:l[2],coords:l[7]})},i:se,o:se,d(l){l&&A(e),t=!1,$e(i)}}}function dr(s,e,a){let r,t,{square:i}=e,{name:l}=e,{getGridCoordsFromSquare:n}=e,{flipped:o}=e,{whiteToMove:u=!1}=e,{movable:f}=e,{ghostPiece:g=!1}=e,{easing:p="cubicInOut"}=e,{duration:m=120}=e;const q=ct();let T=m;const C=ur({x:0,y:0,scale:1},{duration:T,easing:Sa[p]});ks(s,C,b=>a(5,t=b));let y=!1;const c=b=>b[0]==="w"?G.WHITE:G.BLACK,d=b=>{const P=n(b);C.update(()=>({x:P.x,y:P.y,scale:1}),{duration:y?T:0}),y||(y=!0),T=m},w=b=>{T=0,q("endDragging",b.detail),q("move",i+b.detail)},v=()=>f===!0||f!==!1&&f.enabled&&(f.color===c(l)||f.color===G.BOTH&&(u&&c(l)===G.WHITE||!u&&c(l)===G.BLACK));function E(b){Re.call(this,s,b)}function M(b){Re.call(this,s,b)}function S(b){Re.call(this,s,b)}const k=b=>q("moving",b.detail);return s.$$set=b=>{"square"in b&&a(0,i=b.square),"name"in b&&a(1,l=b.name),"getGridCoordsFromSquare"in b&&a(10,n=b.getGridCoordsFromSquare),"flipped"in b&&a(2,o=b.flipped),"whiteToMove"in b&&a(11,u=b.whiteToMove),"movable"in b&&a(12,f=b.movable),"ghostPiece"in b&&a(3,g=b.ghostPiece),"easing"in b&&a(13,p=b.easing),"duration"in b&&a(14,m=b.duration)},s.$$.update=()=>{s.$$.dirty&5&&d(i),s.$$.dirty&4096&&a(4,r=typeof f=="boolean"?f?1:0:f.enabled?1:0)},[i,l,o,g,r,t,q,C,w,v,n,u,f,p,m,E,M,S,k]}class ds extends ye{constructor(e){super(),Ae(this,e,dr,cr,Pe,{square:0,name:1,getGridCoordsFromSquare:10,flipped:2,whiteToMove:11,movable:12,ghostPiece:3,easing:13,duration:14})}}function zt(s,e,a){const r=s.slice();return r[3]=e[a],r[5]=a,r}function Dt(s,e,a){const r=s.slice();return r[3]=e[a],r[5]=a,r}function Nt(s){let e,a=s[2][s[1]?Math.abs(s[5]-7):s[5]]+"",r,t;return{c(){e=I("span"),r=Ce(a),t=j(),this.h()},l(i){e=z(i,"SPAN",{style:!0,class:!0});var l=N(e);r=Te(l,a),t=X(l),l.forEach(A),this.h()},h(){J(e,"color",s[5]%2===0?me.colors[s[0]].white:me.colors[s[0]].black),_(e,"class","svelte-t3eav4")},m(i,l){B(i,e,l),F(e,r),F(e,t)},p(i,l){l&2&&a!==(a=i[2][i[1]?Math.abs(i[5]-7):i[5]]+"")&&ft(r,a),l&1&&J(e,"color",i[5]%2===0?me.colors[i[0]].white:me.colors[i[0]].black)},d(i){i&&A(e)}}}function xt(s){let e,a=(s[1]?s[5]+1:Math.abs(s[5]-8))+"",r,t,i;return{c(){e=I("span"),r=Ce(a),t=j(),this.h()},l(l){e=z(l,"SPAN",{style:!0,class:!0});var n=N(e);r=Te(n,a),t=X(n),n.forEach(A),this.h()},h(){J(e,"color",s[5]%2===0?me.colors[s[0]].white:me.colors[s[0]].black),_(e,"class",i=gt(s[1]?"":"text-right")+" svelte-t3eav4")},m(l,n){B(l,e,n),F(e,r),F(e,t)},p(l,n){n&2&&a!==(a=(l[1]?l[5]+1:Math.abs(l[5]-8))+"")&&ft(r,a),n&1&&J(e,"color",l[5]%2===0?me.colors[l[0]].white:me.colors[l[0]].black),n&2&&i!==(i=gt(l[1]?"":"text-right")+" svelte-t3eav4")&&_(e,"class",i)},d(l){l&&A(e)}}}function fr(s){let e,a,r,t=s[2],i=[];for(let o=0;o<t.length;o+=1)i[o]=Nt(Dt(s,t,o));let l=s[2],n=[];for(let o=0;o<l.length;o+=1)n[o]=xt(zt(s,l,o));return{c(){e=I("div");for(let o=0;o<i.length;o+=1)i[o].c();a=j(),r=I("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=z(o,"DIV",{class:!0});var u=N(e);for(let g=0;g<i.length;g+=1)i[g].l(u);u.forEach(A),a=X(o),r=z(o,"DIV",{class:!0});var f=N(r);for(let g=0;g<n.length;g+=1)n[g].l(f);f.forEach(A),this.h()},h(){_(e,"class","files noselect svelte-t3eav4"),_(r,"class","ranks noselect svelte-t3eav4")},m(o,u){B(o,e,u);for(let f=0;f<i.length;f+=1)i[f].m(e,null);B(o,a,u),B(o,r,u);for(let f=0;f<n.length;f+=1)n[f].m(r,null)},p(o,[u]){if(u&7){t=o[2];let f;for(f=0;f<t.length;f+=1){const g=Dt(o,t,f);i[f]?i[f].p(g,u):(i[f]=Nt(g),i[f].c(),i[f].m(e,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=t.length}if(u&3){l=o[2];let f;for(f=0;f<l.length;f+=1){const g=zt(o,l,f);n[f]?n[f].p(g,u):(n[f]=xt(g),n[f].c(),n[f].m(r,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=l.length}},i:se,o:se,d(o){o&&A(e),He(i,o),o&&A(a),o&&A(r),He(n,o)}}}function hr(s,e,a){let{theme:r}=e,{flipped:t}=e;const i=["a","b","c","d","e","f","g","h"];return s.$$set=l=>{"theme"in l&&a(0,r=l.theme),"flipped"in l&&a(1,t=l.flipped)},[r,t,i]}class gr extends ye{constructor(e){super(),Ae(this,e,hr,fr,Pe,{theme:0,flipped:1})}}const pr="8/8/8/8/8/8/8/8 w - - 0 1";class br{constructor(e){this.letters={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},this.changeLegalHoverIfNeeded=a=>{a.color!==L.LEGAL&&a.color!==L.PREMOVE||this.state.pieces.forEach(r=>{r.square===a.square&&(a.color=a.color===L.LEGAL?L.LEGALHOVER:L.PREMOVEHOVER)})},this.highlightSquare=(a,r)=>{const t={square:a,color:r};this.state.markedSquares.forEach(i=>{i.square===a&&i.color!==L.MOVE&&i.color!==L.CHECK&&this.state.markedSquares.delete(i)}),this.changeLegalHoverIfNeeded(t),this.state.markedSquares.add(t)},this.legalHover=a=>{this.state.markedSquares.forEach(r=>{if(r.square===a&&r.color===L.LEGAL)r.color=L.LEGALHOVER;else if(r.square!==a&&r.color===L.LEGALHOVER){let t=!1;this.state.pieces.forEach(i=>{i.square===r.square&&(t=!0)}),t||(r.color=L.LEGAL)}})},this.preMoveHover=a=>{this.state.markedSquares.forEach(r=>{if(r.square===a&&r.color===L.PREMOVE)r.color=L.PREMOVEHOVER;else if(r.square!==a&&r.color===L.PREMOVEHOVER){let t=!1;this.state.pieces.forEach(i=>{i.square===r.square&&(t=!0)}),t||(r.color=L.PREMOVE)}})},this.toggleSquareHighlight=(a,r)=>{const t={square:a,color:r};let i=!1;return this.state.markedSquares.forEach(l=>{l.square===a&&(this.state.markedSquares.delete(l),l.color===r&&(i=!0))}),this.changeLegalHoverIfNeeded(t),i?!0:(this.state.markedSquares.add(t),!1)},this.getSelectedSquare=()=>{let a="";return this.state.markedSquares.forEach(r=>{r.color===L.SELECT&&(a=r.square)}),a},this.clearSquare=(a,r)=>{a.length===2&&this.state.markedSquares.forEach(t=>{t.square===a&&(t.color===r||r===void 0)&&this.state.markedSquares.delete(t)})},this.clearAllSquares=a=>{a===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(r=>{r.color===a&&this.state.markedSquares.delete(r)})},this.setPiece=(a,r)=>{if(this.notValidThing({square:a,piece:r}))return;const t=this.state.pieces.find(i=>i.square===a);t?t.name=r:this.state.pieces.push({square:a,name:r})},this.removePiece=a=>{this.notValidThing({square:a})||this.state.pieces.forEach((r,t)=>{r.square===a&&this.state.pieces.splice(t,1)})},this.clearAllPieces=()=>{this.state.pieces.length=0},this.getGridCoordsFromSquare=a=>{if(this.notValidThing({square:a}))return{x:0,y:0};const r=a[0],t=a[1],i=this.state.board.flipped?Math.abs(this.letters[r]-7):this.letters[r],l=this.state.board.flipped?Math.abs(parseInt(t,10)-8):parseInt(t,10)-1;return typeof i!="number"||l<0||l>7?{x:0,y:0}:{x:i,y:l}},this.makeMove=a=>{if(this.notValidThing({move:a}))return;let r=!1,t;const i=a.substring(0,2),l=a.substring(2,4),n=a.substring(4);this.state.pieces.forEach(o=>{o.square===l&&(t=o,this.removePiece(o.square))}),this.state.pieces.forEach(o=>{o.square===i&&(o.square=l,r=!0,n&&(o.name=o.name[0]+n.toUpperCase()))}),r?this.state.legal.lastMove=a:t&&this.state.pieces.push(t)},this.getSquareFromIndices=(a,r)=>Object.keys(this.letters)[a]+(r+1).toString(),this.updatePiecesWithFen=a=>{const r=[...Array(8)].map(()=>Array(8).fill(null)),t=["1","2","3","4","5","6","7","8"];let i=0,l=0;for(let u=0;u<(a.includes(" ")?a.indexOf(" "):a.length);u++)if(a[u]==="/")i++,l=0;else if(!t.includes(a[u]))a[u]===a[u].toUpperCase()?r[i][l]=`w${a[u]}`:r[i][l]=`b${a[u].toUpperCase()}`,l++;else for(let f=0;f<parseInt(a[u],10);f++)r[i][l]=null,l++;const n=[],o=[];for(let u=0;u<r.length;++u)for(let f=0;f<r.length;++f){const g=r[u][f],p=this.getPieceFromSquare(this.getSquareFromIndices(f,Math.abs(u-7)));g&&!p&&n.push({square:this.getSquareFromIndices(f,Math.abs(u-7)),name:g}),!g&&p&&o.push(p),g&&p&&g!==p.name&&(n.push({square:this.getSquareFromIndices(f,Math.abs(u-7)),name:g}),o.push(p))}for(let u=0;u<o.length;u++)for(let f=0;f<n.length;f++)!n[f]||!o[u]||n[f].name===o[u].name&&(o[u].square=n[f].square,o.splice(u,1),u--,n.splice(f,1),f--);n.forEach(u=>{this.state.pieces.push(u)}),o.forEach(u=>{this.state.pieces.splice(this.state.pieces.indexOf(u),1)})},this.notValidThing=a=>{const{square:r,piece:t,move:i}=a;return!!(r&&r.length!==2||t&&t.length!==2||i&&i.length!==4&&i.length!==5)},this.setGhostPiece=a=>{this.state.draggable.ghostPiece.piece=a},this.removeGhostPiece=()=>{this.state.draggable.ghostPiece.piece=void 0},this.isCastling=a=>{switch(a){case"e1g1":case"e1c1":case"e8g8":case"e8c8":return!0;default:return!1}},this.getRookMoveIfIsCastling=a=>{switch(a){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return}},this.isEnPassant=a=>{if(a[0]===a[2]||this.getPieceFromSquare(a.substring(2,4)))return!1;const r=this.getPieceFromSquare(a.substring(0,2));return!(r===void 0||r.name!=="wP"&&r.name!=="bP")},this.getCapturedPawnSquareIfIsEnPassant=a=>{if(a[0]===a[2]||this.getPieceFromSquare(a.substring(2,4)))return;const r=this.getPieceFromSquare(a.substring(0,2));if(r===void 0||r.name!=="wP"&&r.name!=="bP")return;const t=this.getPieceFromSquare(`${a[2]}${parseInt(a[3],10)+(r.name==="wP"?-1:1)}`);return t==null?void 0:t.square},this.isCapture=a=>!!this.getPieceFromSquare(a.substring(2,4)),this.isPromotion=a=>{if((a[1]!=="7"||a[3]!=="8")&&(a[1]!=="2"||a[3]!=="1"))return!1;const r=this.getPieceFromSquare(a.substring(0,2));return!(r&&(r.name[1]!=="P"||r.name[0]==="w"&&a[3]==="1"||r.name[0]==="b"&&a[3]==="8"))},this.callbackExists=a=>this.state.callbacks[a]!==void 0,this.flipBoard=a=>{a!==void 0?this.state.board.flipped=a:this.state.board.flipped=!this.state.board.flipped},this.setConfigSettings=a=>{this.state.setConfigSettings(a)},this.state=new ns(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getShortFEN(){if(this.state.pieces.length===0)return pr;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(a=>{e[Xa(a.square[1])][rt(a.square[0])]=a.name}),Ya(e)}getPieceFromSquare(e){let a;return this.state.pieces.forEach(r=>{r.square===e&&(a=r)}),a}}function Ut(s,e,a){const r=s.slice();return r[63]=e[a],r}function Bt(s,e,a){const r=s.slice();return r[66]=e[a],r}function Vt(s){let e=[],a=new Map,r,t,i=s[2].state.pieces;const l=n=>n[66];for(let n=0;n<i.length;n+=1){let o=Bt(s,i,n),u=l(o);a.set(u,e[n]=Ht(u,o))}return{c(){for(let n=0;n<e.length;n+=1)e[n].c();r=ce()},l(n){for(let o=0;o<e.length;o+=1)e[o].l(n);r=ce()},m(n,o){for(let u=0;u<e.length;u+=1)e[u].m(n,o);B(n,r,o),t=!0},p(n,o){o[0]&55556&&(i=n[2].state.pieces,ve(),e=rs(e,o,l,1,n,i,a,r.parentNode,is,Ht,r,Bt),Ee())},i(n){if(!t){for(let o=0;o<i.length;o+=1)x(e[o]);t=!0}},o(n){for(let o=0;o<e.length;o+=1)H(e[o]);t=!1},d(n){for(let o=0;o<e.length;o+=1)e[o].d(n);n&&A(r)}}}function Ht(s,e){let a,r,t;function i(){return e[44](e[66])}function l(){return e[45](e[66])}return r=new ds({props:{square:e[66].square,name:e[66].name,easing:e[2].state.draggable.transition.settings.easing,whiteToMove:e[2].state.legal.whiteToMove,movable:e[2].state.movable,getGridCoordsFromSquare:e[2].getGridCoordsFromSquare,flipped:e[2].state.board.flipped}}),r.$on("move",e[11]),r.$on("clicked",i),r.$on("startMoving",l),r.$on("moving",e[12]),r.$on("endDragging",e[46]),r.$on("animationEnded",e[14]),{key:s,first:null,c(){a=ce(),we(r.$$.fragment),this.h()},l(n){a=ce(),_e(r.$$.fragment,n),this.h()},h(){this.first=a},m(n,o){B(n,a,o),Me(r,n,o),t=!0},p(n,o){e=n;const u={};o[0]&4&&(u.square=e[66].square),o[0]&4&&(u.name=e[66].name),o[0]&4&&(u.easing=e[2].state.draggable.transition.settings.easing),o[0]&4&&(u.whiteToMove=e[2].state.legal.whiteToMove),o[0]&4&&(u.movable=e[2].state.movable),o[0]&4&&(u.getGridCoordsFromSquare=e[2].getGridCoordsFromSquare),o[0]&4&&(u.flipped=e[2].state.board.flipped),r.$set(u)},i(n){t||(x(r.$$.fragment,n),t=!0)},o(n){H(r.$$.fragment,n),t=!1},d(n){n&&A(a),ke(r,n)}}}function Wt(s){let e,a;return e=new ds({props:{ghostPiece:!0,duration:0,square:s[2].state.draggable.ghostPiece.piece.square,name:s[2].state.draggable.ghostPiece.piece.name,movable:!1,getGridCoordsFromSquare:s[2].getGridCoordsFromSquare,flipped:s[2].state.board.flipped}}),{c(){we(e.$$.fragment)},l(r){_e(e.$$.fragment,r)},m(r,t){Me(e,r,t),a=!0},p(r,t){const i={};t[0]&4&&(i.square=r[2].state.draggable.ghostPiece.piece.square),t[0]&4&&(i.name=r[2].state.draggable.ghostPiece.piece.name),t[0]&4&&(i.getGridCoordsFromSquare=r[2].getGridCoordsFromSquare),t[0]&4&&(i.flipped=r[2].state.board.flipped),e.$set(i)},i(r){a||(x(e.$$.fragment,r),a=!0)},o(r){H(e.$$.fragment,r),a=!1},d(r){ke(e,r)}}}function mr(s){let e=[],a=new Map,r,t,i=[...s[2].state.markedSquares];const l=n=>n[63];for(let n=0;n<i.length;n+=1){let o=Ut(s,i,n),u=l(o);a.set(u,e[n]=Kt(u,o))}return{c(){for(let n=0;n<e.length;n+=1)e[n].c();r=ce()},l(n){for(let o=0;o<e.length;o+=1)e[o].l(n);r=ce()},m(n,o){for(let u=0;u<e.length;u+=1)e[u].m(n,o);B(n,r,o),t=!0},p(n,o){o[0]&5&&(i=[...n[2].state.markedSquares],ve(),e=rs(e,o,l,1,n,i,a,r.parentNode,is,Kt,r,Ut),Ee())},i(n){if(!t){for(let o=0;o<i.length;o+=1)x(e[o]);t=!0}},o(n){for(let o=0;o<e.length;o+=1)H(e[o]);t=!1},d(n){for(let o=0;o<e.length;o+=1)e[o].d(n);n&&A(r)}}}function Kt(s,e){let a,r,t;return r=new or({props:{theme:e[2].state.board.boardTheme,square:e[63].square,color:e[63].color,getGridCoordsFromSquare:e[2].getGridCoordsFromSquare,flipped:e[2].state.board.flipped}}),r.$on("dragenter",e[47]),{key:s,first:null,c(){a=ce(),we(r.$$.fragment),this.h()},l(i){a=ce(),_e(r.$$.fragment,i),this.h()},h(){this.first=a},m(i,l){B(i,a,l),Me(r,i,l),t=!0},p(i,l){e=i;const n={};l[0]&4&&(n.theme=e[2].state.board.boardTheme),l[0]&4&&(n.square=e[63].square),l[0]&4&&(n.color=e[63].color),l[0]&4&&(n.getGridCoordsFromSquare=e[2].getGridCoordsFromSquare),l[0]&4&&(n.flipped=e[2].state.board.flipped),r.$set(n)},i(i){t||(x(r.$$.fragment,i),t=!0)},o(i){H(r.$$.fragment,i),t=!1},d(i){i&&A(a),ke(r,i)}}}function Gt(s){let e,a;return e=new gr({props:{theme:s[2].state.board.boardTheme,flipped:s[2].state.board.flipped}}),{c(){we(e.$$.fragment)},l(r){_e(e.$$.fragment,r)},m(r,t){Me(e,r,t),a=!0},p(r,t){const i={};t[0]&4&&(i.theme=r[2].state.board.boardTheme),t[0]&4&&(i.flipped=r[2].state.board.flipped),e.$set(i)},i(r){a||(x(e.$$.fragment,r),a=!0)},o(r){H(e.$$.fragment,r),a=!1},d(r){ke(e,r)}}}function jt(s){let e,a;return e=new Gs({props:{chessboard:s[2],setSize:s[1]}}),{c(){we(e.$$.fragment)},l(r){_e(e.$$.fragment,r)},m(r,t){Me(e,r,t),a=!0},p(r,t){const i={};t[0]&4&&(i.chessboard=r[2]),e.$set(i)},i(r){a||(x(e.$$.fragment,r),a=!0)},o(r){H(e.$$.fragment,r),a=!1},d(r){ke(e,r)}}}function Xt(s){let e,a,r;function t(l){s[48](l)}let i={flipped:s[2].state.board.flipped,computerArrows:s[7],LshapeKnightMove:s[2].state.drawTools.settings.LshapeKnightMove};return s[4]!==void 0&&(i.svg=s[4]),e=new rr({props:i}),be.push(()=>et(e,"svg",t)),{c(){we(e.$$.fragment)},l(l){_e(e.$$.fragment,l)},m(l,n){Me(e,l,n),r=!0},p(l,n){const o={};n[0]&4&&(o.flipped=l[2].state.board.flipped),n[0]&128&&(o.computerArrows=l[7]),n[0]&4&&(o.LshapeKnightMove=l[2].state.drawTools.settings.LshapeKnightMove),!a&&n[0]&16&&(a=!0,o.svg=l[4],tt(()=>a=!1)),e.$set(o)},i(l){r||(x(e.$$.fragment,l),r=!0)},o(l){H(e.$$.fragment,l),r=!1},d(l){ke(e,l)}}}function Yt(s){let e,a,r={};return e=new Ka({props:r}),s[49](e),e.$on("newPromotion",s[13]),{c(){we(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){Me(e,t,i),a=!0},p(t,i){const l={};e.$set(l)},i(t){a||(x(e.$$.fragment,t),a=!0)},o(t){H(e.$$.fragment,t),a=!1},d(t){s[49](null),ke(e,t)}}}function Qt(s){let e,a,r={settings:s[2].state.sounds.settings};return e=new $s({props:r}),s[54](e),{c(){we(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){Me(e,t,i),a=!0},p(t,i){const l={};i[0]&4&&(l.settings=t[2].state.sounds.settings),e.$set(l)},i(t){a||(x(e.$$.fragment,t),a=!0)},o(t){H(e.$$.fragment,t),a=!1},d(t){s[54](null),ke(e,t)}}}function vr(s){let e,a,r,t,i=s[9](),l,n,o,u,f,g,p,m,q,T,C,y,c=s[2].state.board.startFen&&Vt(s),d=s[2].state.draggable.ghostPiece.enabled&&s[2].state.draggable.ghostPiece.piece!==void 0&&Wt(s),w=i&&mr(s),v=s[2].state.board.notation&&Gt(s),E=s[2].state.resizible.enabled&&jt(s),M=s[2].state.drawTools.enabled&&Xt(s),S=s[2].state.legal.enabled&&Yt(s),k=s[2].state.sounds.enabled&&Qt(s);return{c(){e=I("div"),a=I("div"),c&&c.c(),r=j(),d&&d.c(),t=j(),w&&w.c(),l=j(),v&&v.c(),n=j(),E&&E.c(),o=j(),M&&M.c(),u=j(),S&&S.c(),m=j(),k&&k.c(),q=ce(),this.h()},l(b){e=z(b,"DIV",{class:!0,style:!0});var P=N(e);a=z(P,"DIV",{class:!0});var V=N(a);c&&c.l(V),V.forEach(A),r=X(P),d&&d.l(P),t=X(P),w&&w.l(P),l=X(P),v&&v.l(P),n=X(P),E&&E.l(P),o=X(P),M&&M.l(P),u=X(P),S&&S.l(P),P.forEach(A),m=X(b),k&&k.l(b),q=ce(),this.h()},h(){_(a,"class","noselect h-full w-full"),_(e,"class",f="noselect lg:rounded board text-xs"+(s[2].state.board.shadow?" shadow-lg":"")+" sm:text-sm svelte-wzcws1"),J(e,"--boardTheme","url("+(s[2].state.board.boardTheme==="standard"?wt:Et)+")"),dt(()=>s[53].call(e))},m(b,P){B(b,e,P),F(e,a),c&&c.m(a,null),F(e,r),d&&d.m(e,null),F(e,t),w&&w.m(e,null),F(e,l),v&&v.m(e,null),F(e,n),E&&E.m(e,null),F(e,o),M&&M.m(e,null),F(e,u),S&&S.m(e,null),s[52](e),p=ys(e,s[53].bind(e)),B(b,m,P),k&&k.m(b,P),B(b,q,P),T=!0,C||(y=[ie(e,"pointerdown",s[10]),ie(e,"contextmenu",pt(s[42])),ie(e,"drag",pt(s[43])),lt(g=tr.call(null,e,{svg:s[4],flipped:s[2].state.board.flipped,enabled:s[2].state.drawTools.enabled,settings:s[2].state.drawTools.settings})),ie(e,"drawCircle",s[50]),ie(e,"drawArrow",s[51])],C=!0)},p(b,P){b[2].state.board.startFen?c?(c.p(b,P),P[0]&4&&x(c,1)):(c=Vt(b),c.c(),x(c,1),c.m(a,null)):c&&(ve(),H(c,1,1,()=>{c=null}),Ee()),b[2].state.draggable.ghostPiece.enabled&&b[2].state.draggable.ghostPiece.piece!==void 0?d?(d.p(b,P),P[0]&4&&x(d,1)):(d=Wt(b),d.c(),x(d,1),d.m(e,t)):d&&(ve(),H(d,1,1,()=>{d=null}),Ee()),i&&w.p(b,P),b[2].state.board.notation?v?(v.p(b,P),P[0]&4&&x(v,1)):(v=Gt(b),v.c(),x(v,1),v.m(e,n)):v&&(ve(),H(v,1,1,()=>{v=null}),Ee()),b[2].state.resizible.enabled?E?(E.p(b,P),P[0]&4&&x(E,1)):(E=jt(b),E.c(),x(E,1),E.m(e,o)):E&&(ve(),H(E,1,1,()=>{E=null}),Ee()),b[2].state.drawTools.enabled?M?(M.p(b,P),P[0]&4&&x(M,1)):(M=Xt(b),M.c(),x(M,1),M.m(e,u)):M&&(ve(),H(M,1,1,()=>{M=null}),Ee()),b[2].state.legal.enabled?S?(S.p(b,P),P[0]&4&&x(S,1)):(S=Yt(b),S.c(),x(S,1),S.m(e,null)):S&&(ve(),H(S,1,1,()=>{S=null}),Ee()),(!T||P[0]&4&&f!==(f="noselect lg:rounded board text-xs"+(b[2].state.board.shadow?" shadow-lg":"")+" sm:text-sm svelte-wzcws1"))&&_(e,"class",f),(!T||P[0]&4)&&J(e,"--boardTheme","url("+(b[2].state.board.boardTheme==="standard"?wt:Et)+")"),g&&ut(g.update)&&P[0]&20&&g.update.call(null,{svg:b[4],flipped:b[2].state.board.flipped,enabled:b[2].state.drawTools.enabled,settings:b[2].state.drawTools.settings}),b[2].state.sounds.enabled?k?(k.p(b,P),P[0]&4&&x(k,1)):(k=Qt(b),k.c(),x(k,1),k.m(q.parentNode,q)):k&&(ve(),H(k,1,1,()=>{k=null}),Ee())},i(b){T||(x(c),x(d),x(w),x(v),x(E),x(M),x(S),x(k),T=!0)},o(b){H(c),H(d),H(w),H(v),H(E),H(M),H(S),H(k),T=!1},d(b){b&&A(e),c&&c.d(),d&&d.d(),w&&w.d(),v&&v.d(),E&&E.d(),M&&M.d(),S&&S.d(),s[52](null),p(),b&&A(m),k&&k.d(b),b&&A(q),C=!1,$e(y)}}}function Er(s,e,a){const t=new br(void 0),i=ct();let l,n,o,u,f="";As(()=>{document.documentElement.hasAttribute("style")&&t.state.resizible.enabled&&document.documentElement.removeAttribute("style")});let g=[],p={[G.WHITE]:"",[G.BLACK]:""};const m=h=>{t.clearAllSquares(h),h===L.LEGAL&&t.clearAllSquares(L.LEGALHOVER),h===L.PREMOVE&&t.clearAllSquares(L.PREMOVEHOVER),a(2,t)},q=(h,R)=>{t.highlightSquare(h,R),a(2,t)},T=h=>t.state.highlight.enabled&&(h===void 0||t.state.highlight.settings[h]),C=h=>{m(L.CHECK),h!==void 0&&T("check")&&q(p[h],L.CHECK),a(2,t)},y=h=>{t.flipBoard(h),a(2,t)},c=(h,R)=>{h.forEach(Z=>t.highlightSquare(Z,R)),a(2,t)},d=(h,R=L.MOVE)=>{h.length<4||c([h.substring(0,2),h.substring(2,4)],R)},w=(h,R=L.MOVE)=>{const Z=[];h.forEach(ue=>{ue.length<4||(Z.push(ue.substring(0,2)),Z.push(ue.substring(2,4)))}),c(Z,R)},v=h=>{q(h.substring(2,4),L.LEGAL)},E=h=>{m(L.LEGAL),w(h,L.LEGAL)},M=(h,R=!0)=>{t.makeMove(h),R&&(m(L.MOVE),T("move")&&d(h)),a(2,t)},S=h=>{t.removePiece(h),a(2,t)},k=h=>h[0]==="w"?G.WHITE:G.BLACK,b=()=>t.state.movable.enabled&&(t.state.movable.color===G.BOTH||t.state.legal.whiteToMove&&t.state.movable.color===k("w")||!t.state.legal.whiteToMove&&t.state.movable.color===k("b")),P=()=>{!t.state.legal.enabled||(t.state.callbacks.getWhiteToMove&&a(2,t.state.legal.whiteToMove=t.state.callbacks.getWhiteToMove(),t),t.state.callbacks.getPreMoves&&!b()&&t.state.legal.preMoves.enabled?a(2,t.state.legal.preMoves.moves=t.state.callbacks.getPreMoves(),t):a(2,t.state.legal.preMoves.moves.length=0,t),t.state.callbacks.getLegalMoves&&b()?a(2,t.state.legal.moves=t.state.callbacks.getLegalMoves(),t):a(2,t.state.legal.moves.length=0,t),b()&&t.state.selectable.selectedPiece!==void 0&&t.state.legal.preMoves.enabled&&(m(L.PREMOVE),m(L.LEGAL),T("legal")&&t.state.legal.moves.forEach(h=>{t.state.selectable.selectedPiece&&h.substring(0,2)===t.state.selectable.selectedPiece.square&&q(h.substring(2,4),L.LEGAL)})),t.state.callbacks.getKingLocations&&(p=t.state.callbacks.getKingLocations()),t.state.callbacks.getInCheck&&C(t.state.callbacks.getInCheck()))},V=h=>{if(h.substring(0,2)===h.substring(2,4))return;t.state.callbacks.beforeMove&&t.state.callbacks.beforeMove(h),m(L.LEGAL),m(L.SELECT);const R=t.getRookMoveIfIsCastling(h),Z=t.getCapturedPawnSquareIfIsEnPassant(h);if(R&&t.state.legal.enabled&&t.state.legal.settings.allowCastling?(M(R,!1),o.playMoveSound("CASTLE")):Z&&t.state.legal.enabled&&t.state.legal.settings.allowEnPassant?(S(Z),o.playMoveSound("CAPTURE")):t.isCapture(h)?o.playMoveSound("CAPTURE"):o.playMoveSound("MOVE"),t.removeGhostPiece(),a(2,t),M(h),t.state.callbacks.afterMove&&t.state.callbacks.afterMove(h),P(),t.state.legal.enabled&&t.state.legal.preMoves.enabled&&t.state.legal.preMoves.curMove!==""){if(t.state.legal.moves.includes(t.state.legal.preMoves.curMove)||t.state.legal.moves.includes(`${t.state.legal.preMoves.curMove}q`)){const ue=t.state.legal.preMoves.curMove;a(2,t.state.legal.preMoves.curMove="",t),Ps().then(()=>{V(ue)})}m(L.NEXTMOVE)}},ae=h=>{!t.state.legal.enabled||!t.state.legal.preMoves.enabled||!t.state.movable.enabled||(m(L.PREMOVE),m(L.NEXTMOVE),t.state.highlight.enabled&&t.state.highlight.settings.nextMove&&d(h,L.NEXTMOVE),a(2,t.state.legal.preMoves.curMove=h,t),i("nextMove",{move:h}))},ne=h=>{u.openPromotionModal(!0),f=h,t.makeMove(h),m(L.LEGAL),m(L.SELECT),m(L.MOVE),d(h)},Le=(h,R)=>{t.clearSquare(h,R),a(2,t)},O=()=>{t.clearAllPieces(),a(2,t)},K=(h,R)=>{t.setPiece(h,R),a(2,t)},D=(h,R)=>{var ue;const Z=(ue=t.getPieceFromSquare(h))==null?void 0:ue.name;!Z||(R!==void 0?t.setPiece(h,`${R===G.WHITE?"w":"b"}${Z[1]}`):t.setPiece(h,`${Z[0]==="w"?"b":"w"}${Z[1]}`),a(2,t))},W=(h,R)=>{const Z=Math.floor(h/t.state.board.size*8),ue=Math.floor(R/t.state.board.size*8),oe=t.state.board.flipped?Math.abs(Z-7):Z,pe=t.state.board.flipped?ue:Math.abs(ue-7);return Object.keys(t.letters)[oe]+(pe+1).toString()},$=h=>t.state.movable.enabled?!!(t.state.legal.enabled&&t.state.legal.preMoves.enabled&&(t.state.movable.color===G.BOTH||t.state.movable.color===k(h))||t.state.movable.color===G.BOTH||t.state.movable.color===k(h)):!1,re=h=>{if(h.button===2){m(),a(2,t.state.selectable.selectedPiece=void 0,t);return}const R=l.getBoundingClientRect(),Z=h.clientX-R.left,ue=h.clientY-R.top,oe=W(Z,ue),pe=t.getPieceFromSquare(oe);if(i("squareClick",{square:oe,piece:pe?pe.name:void 0}),!t.state.legal.enabled||!t.state.selectable.enabled){a(2,t.state.selectable.selectedPiece=void 0,t);return}if(t.state.selectable.selectedPiece!==void 0&&t.state.selectable.selectedPiece.square!==oe&&!t.state.legal.enabled){V(t.state.selectable.selectedPiece.square+oe),a(2,t.state.selectable.selectedPiece=void 0,t);return}if(t.state.selectable.selectedPiece!==void 0&&t.state.selectable.selectedPiece.square!==oe&&(pe===void 0||pe.name[0]!==t.state.selectable.selectedPiece.name[0])){t.isPromotion(t.state.selectable.selectedPiece.square+oe)&&t.state.legal.moves.includes(`${t.state.selectable.selectedPiece.square+oe}q`)?ne(t.state.selectable.selectedPiece.square+oe):t.state.legal.moves.includes(t.state.selectable.selectedPiece.square+oe)?V(t.state.selectable.selectedPiece.square+oe):t.state.legal.preMoves.enabled&&t.state.legal.preMoves.moves.includes(t.state.selectable.selectedPiece.square+oe)?ae(t.state.selectable.selectedPiece.square+oe):(m(L.LEGAL),m(L.PREMOVE),m(L.SELECT)),a(2,t.state.selectable.selectedPiece=void 0,t);return}if(t.state.selectable.selectedPiece!==pe&&pe!==void 0&&t.state.movable.enabled&&(t.state.movable.color===G.BOTH||t.state.movable.color===k(pe.name))){T("legal")&&t.state.legal&&b()&&(m(L.LEGAL),t.state.legal.moves.forEach(Ue=>{Ue.substring(0,2)===oe&&q(Ue.substring(2,4),L.LEGAL)})),T("preMove")&&t.state.legal.enabled&&t.state.legal.preMoves.enabled&&t.state.movable.color!==G.BOTH&&!b()&&(m(L.PREMOVE),t.state.highlight.enabled&&t.state.highlight.settings.preMove&&t.state.legal.preMoves.moves.forEach(Ue=>{Ue.substring(0,2)===oe&&q(Ue.substring(2,4),L.PREMOVE)})),T("select")&&(t.state.legal.enabled&&$(pe.name[0])||!t.state.legal.enabled)&&(m(L.SELECT),q(oe,L.SELECT)),(t.state.legal.enabled&&$(pe.name[0])||!t.state.legal.enabled)&&a(2,t.state.selectable.selectedPiece=pe,t);return}t.state.selectable.selectedPiece!==void 0&&t.state.selectable.selectedPiece===pe&&(m(L.LEGAL),m(L.PREMOVE),m(L.SELECT),a(2,t.state.selectable.selectedPiece=void 0,t))},ee=h=>{const R=h.detail;if(R.substring(0,2)===R.substring(2,4)){q(R.substring(0,2),L.SELECT),a(2,t);return}t.state.legal.enabled?t.isPromotion(R)&&t.state.legal.moves.includes(`${R}q`)?ne(R):t.state.legal.moves.includes(R)?V(R):t.state.legal.preMoves.enabled&&t.state.legal.preMoves.moves.includes(R)&&ae(R):V(R),m(L.LEGAL),m(L.PREMOVE),a(2,t)},qe=(h,R="MOVE")=>{if(t.updatePiecesWithFen(h),m(),t.removeGhostPiece(),P(),t.state.callbacks.getLastMove){const Z=t.state.callbacks.getLastMove();R!=="MOVE"?o.playMoveSound(R):t.isCastling(Z)?o.playMoveSound("CASTLE"):o.playMoveSound(R),d(Z)}else o.playMoveSound(R);a(2,t),a(2,t)},ge=()=>t.getShortFEN(),le=h=>{!h||t.state.board.size===h||(a(2,t.state.board.size=h,t),t.state.resizible.enabled&&document.documentElement.style.setProperty("--boardSize",`${t.state.board.size}px`))},Y=h=>{var R;return(R=t.getPieceFromSquare(h))==null?void 0:R.name},U=h=>{a(7,g=h)},te=()=>{a(7,g.length=0,g)},fe=()=>{P()},de=h=>{h===!1?a(2,t.state.movable.enabled=!1,t):(a(2,t.state.movable.enabled=!0,t),a(2,t.state.movable.color=h===!0?G.BOTH:h,t))},Q=h=>{h!==void 0&&(t.setConfigSettings(h),a(2,t))},Se=h=>{const R=l.getBoundingClientRect();t.state.legal.enabled&&(b()&&t.legalHover(W(h.detail.x-R.x,h.detail.y-R.y)),!b()&&t.state.legal.preMoves.enabled&&t.preMoveHover(W(h.detail.x-R.x,h.detail.y-R.y))),a(2,t)},he=h=>{const R=t.getPieceFromSquare(f.substring(2,4));if(!R)return;const Z=R.name[0]+h.detail.toUpperCase(),ue=f+h.detail;t.state.callbacks.beforeMove&&t.state.callbacks.beforeMove(ue),t.setPiece(R.square,Z),a(2,t),o.playMoveSound("MOVE"),t.state.callbacks.afterMove&&t.state.callbacks.afterMove(ue),P()},ze=h=>{t.setGhostPiece(h),a(2,t)},We=()=>{t.removeGhostPiece(),a(2,t)},Be=h=>{t.state.draggable.ghostPiece&&ze(h),m(L.SELECT),t.state.selectable.selectedPiece===void 0&&T("legal")&&t.state.legal.moves.forEach(R=>{R.substring(0,2)===h.square&&q(R.substring(2,4),L.LEGAL)})};as(()=>{P(),t.state.callbacks.getLastMove&&d(t.state.callbacks.getLastMove()),t.state.resizible&&le(t.state.board.size-t.state.board.size%8)});function De(h){Re.call(this,s,h)}function Ke(h){Re.call(this,s,h)}const Ne=h=>{i("piececlick",{piece:h})},Ge=h=>{i("startDragging",{piece:h}),Be(h)},xe=()=>{i("endDragging"),a(2,t.state.selectable.selectedPiece=void 0,t)},je=h=>{q(h.detail.square,L.LEGALHOVER)};function Xe(h){n=h,a(4,n)}function Ye(h){be[h?"unshift":"push"](()=>{u=h,a(6,u)})}const Ve=h=>i("drawCircle",{square:h.detail.square,color:h.detail.color}),gs=h=>i("drawArrow",{move:h.detail.move,color:h.detail.color});function ps(h){be[h?"unshift":"push"](()=>{l=h,a(3,l)})}function bs(){t.state.board.size=this.clientWidth,a(2,t)}function ms(h){be[h?"unshift":"push"](()=>{o=h,a(5,o)})}return s.$$.update=()=>{s.$$.dirty[0]&4&&le(t.state.board.size-t.state.board.size%8)},Q(void 0),[q,le,t,l,n,o,u,g,i,T,re,ee,Se,he,We,Be,void 0,m,y,c,d,w,v,E,M,S,V,ae,ne,Le,O,K,D,W,qe,ge,Y,U,te,fe,de,Q,De,Ke,Ne,Ge,xe,je,Xe,Ye,Ve,gs,ps,bs,ms]}class wr extends ye{constructor(e){super(),Ae(this,e,Er,vr,Pe,{config:16,clearAllSquares:17,highlightSquare:0,flipBoard:18,highlightManySquares:19,highlightMove:20,highlightManyMoves:21,highlightLegalMove:22,highlightLegalMoves:23,movePiece:24,removePiece:25,makeMove:26,makeNextMove:27,makeMovePromotion:28,removeSquareHighlight:29,removeAllPiece:30,createPiece:31,changeColorOfPiece:32,getSquareFromCoords:33,setFEN:34,getShortFEN:35,setSize:1,getPieceFromSquare:36,setComputerArrows:37,removeComputerArrows:38,updateLegalState:39,setMovableColor:40,setConfigSettings:41},null,[-1,-1,-1])}get config(){return this.$$.ctx[16]}get clearAllSquares(){return this.$$.ctx[17]}get highlightSquare(){return this.$$.ctx[0]}get flipBoard(){return this.$$.ctx[18]}get highlightManySquares(){return this.$$.ctx[19]}get highlightMove(){return this.$$.ctx[20]}get highlightManyMoves(){return this.$$.ctx[21]}get highlightLegalMove(){return this.$$.ctx[22]}get highlightLegalMoves(){return this.$$.ctx[23]}get movePiece(){return this.$$.ctx[24]}get removePiece(){return this.$$.ctx[25]}get makeMove(){return this.$$.ctx[26]}get makeNextMove(){return this.$$.ctx[27]}get makeMovePromotion(){return this.$$.ctx[28]}get removeSquareHighlight(){return this.$$.ctx[29]}get removeAllPiece(){return this.$$.ctx[30]}get createPiece(){return this.$$.ctx[31]}get changeColorOfPiece(){return this.$$.ctx[32]}get getSquareFromCoords(){return this.$$.ctx[33]}get setFEN(){return this.$$.ctx[34]}get getShortFEN(){return this.$$.ctx[35]}get setSize(){return this.$$.ctx[1]}get getPieceFromSquare(){return this.$$.ctx[36]}get setComputerArrows(){return this.$$.ctx[37]}get removeComputerArrows(){return this.$$.ctx[38]}get updateLegalState(){return this.$$.ctx[39]}get setMovableColor(){return this.$$.ctx[40]}get setConfigSettings(){return this.$$.ctx[41]}}typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var Zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fs={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var a=function(r){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,l={},n={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function c(d){return d instanceof o?new o(d.type,c(d.content),d.alias):Array.isArray(d)?d.map(c):d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(c){return Object.prototype.toString.call(c).slice(8,-1)},objId:function(c){return c.__id||Object.defineProperty(c,"__id",{value:++i}),c.__id},clone:function c(d,w){w=w||{};var v,E;switch(n.util.type(d)){case"Object":if(E=n.util.objId(d),w[E])return w[E];v={},w[E]=v;for(var M in d)d.hasOwnProperty(M)&&(v[M]=c(d[M],w));return v;case"Array":return E=n.util.objId(d),w[E]?w[E]:(v=[],w[E]=v,d.forEach(function(S,k){v[k]=c(S,w)}),v);default:return d}},getLanguage:function(c){for(;c;){var d=t.exec(c.className);if(d)return d[1].toLowerCase();c=c.parentElement}return"none"},setLanguage:function(c,d){c.className=c.className.replace(RegExp(t,"gi"),""),c.classList.add("language-"+d)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(v){var c=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(v.stack)||[])[1];if(c){var d=document.getElementsByTagName("script");for(var w in d)if(d[w].src==c)return d[w]}return null}},isActive:function(c,d,w){for(var v="no-"+d;c;){var E=c.classList;if(E.contains(d))return!0;if(E.contains(v))return!1;c=c.parentElement}return!!w}},languages:{plain:l,plaintext:l,text:l,txt:l,extend:function(c,d){var w=n.util.clone(n.languages[c]);for(var v in d)w[v]=d[v];return w},insertBefore:function(c,d,w,v){v=v||n.languages;var E=v[c],M={};for(var S in E)if(E.hasOwnProperty(S)){if(S==d)for(var k in w)w.hasOwnProperty(k)&&(M[k]=w[k]);w.hasOwnProperty(S)||(M[S]=E[S])}var b=v[c];return v[c]=M,n.languages.DFS(n.languages,function(P,V){V===b&&P!=c&&(this[P]=M)}),M},DFS:function c(d,w,v,E){E=E||{};var M=n.util.objId;for(var S in d)if(d.hasOwnProperty(S)){w.call(d,S,d[S],v||S);var k=d[S],b=n.util.type(k);b==="Object"&&!E[M(k)]?(E[M(k)]=!0,c(k,w,null,E)):b==="Array"&&!E[M(k)]&&(E[M(k)]=!0,c(k,w,S,E))}}},plugins:{},highlightAll:function(c,d){n.highlightAllUnder(document,c,d)},highlightAllUnder:function(c,d,w){var v={callback:w,container:c,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",v),v.elements=Array.prototype.slice.apply(v.container.querySelectorAll(v.selector)),n.hooks.run("before-all-elements-highlight",v);for(var E=0,M;M=v.elements[E++];)n.highlightElement(M,d===!0,v.callback)},highlightElement:function(c,d,w){var v=n.util.getLanguage(c),E=n.languages[v];n.util.setLanguage(c,v);var M=c.parentElement;M&&M.nodeName.toLowerCase()==="pre"&&n.util.setLanguage(M,v);var S=c.textContent,k={element:c,language:v,grammar:E,code:S};function b(V){k.highlightedCode=V,n.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,n.hooks.run("after-highlight",k),n.hooks.run("complete",k),w&&w.call(k.element)}if(n.hooks.run("before-sanity-check",k),M=k.element.parentElement,M&&M.nodeName.toLowerCase()==="pre"&&!M.hasAttribute("tabindex")&&M.setAttribute("tabindex","0"),!k.code){n.hooks.run("complete",k),w&&w.call(k.element);return}if(n.hooks.run("before-highlight",k),!k.grammar){b(n.util.encode(k.code));return}if(d&&r.Worker){var P=new Worker(n.filename);P.onmessage=function(V){b(V.data)},P.postMessage(JSON.stringify({language:k.language,code:k.code,immediateClose:!0}))}else b(n.highlight(k.code,k.grammar,k.language))},highlight:function(c,d,w){var v={code:c,grammar:d,language:w};if(n.hooks.run("before-tokenize",v),!v.grammar)throw new Error('The language "'+v.language+'" has no grammar.');return v.tokens=n.tokenize(v.code,v.grammar),n.hooks.run("after-tokenize",v),o.stringify(n.util.encode(v.tokens),v.language)},tokenize:function(c,d){var w=d.rest;if(w){for(var v in w)d[v]=w[v];delete d.rest}var E=new g;return p(E,E.head,c),f(c,E,d,E.head,0),q(E)},hooks:{all:{},add:function(c,d){var w=n.hooks.all;w[c]=w[c]||[],w[c].push(d)},run:function(c,d){var w=n.hooks.all[c];if(!(!w||!w.length))for(var v=0,E;E=w[v++];)E(d)}},Token:o};r.Prism=n;function o(c,d,w,v){this.type=c,this.content=d,this.alias=w,this.length=(v||"").length|0}o.stringify=function c(d,w){if(typeof d=="string")return d;if(Array.isArray(d)){var v="";return d.forEach(function(b){v+=c(b,w)}),v}var E={type:d.type,content:c(d.content,w),tag:"span",classes:["token",d.type],attributes:{},language:w},M=d.alias;M&&(Array.isArray(M)?Array.prototype.push.apply(E.classes,M):E.classes.push(M)),n.hooks.run("wrap",E);var S="";for(var k in E.attributes)S+=" "+k+'="'+(E.attributes[k]||"").replace(/"/g,"&quot;")+'"';return"<"+E.tag+' class="'+E.classes.join(" ")+'"'+S+">"+E.content+"</"+E.tag+">"};function u(c,d,w,v){c.lastIndex=d;var E=c.exec(w);if(E&&v&&E[1]){var M=E[1].length;E.index+=M,E[0]=E[0].slice(M)}return E}function f(c,d,w,v,E,M){for(var S in w)if(!(!w.hasOwnProperty(S)||!w[S])){var k=w[S];k=Array.isArray(k)?k:[k];for(var b=0;b<k.length;++b){if(M&&M.cause==S+","+b)return;var P=k[b],V=P.inside,ae=!!P.lookbehind,ne=!!P.greedy,Le=P.alias;if(ne&&!P.pattern.global){var O=P.pattern.toString().match(/[imsuy]*$/)[0];P.pattern=RegExp(P.pattern.source,O+"g")}for(var K=P.pattern||P,D=v.next,W=E;D!==d.tail&&!(M&&W>=M.reach);W+=D.value.length,D=D.next){var $=D.value;if(d.length>c.length)return;if(!($ instanceof o)){var re=1,ee;if(ne){if(ee=u(K,W,c,ae),!ee||ee.index>=c.length)break;var Y=ee.index,qe=ee.index+ee[0].length,ge=W;for(ge+=D.value.length;Y>=ge;)D=D.next,ge+=D.value.length;if(ge-=D.value.length,W=ge,D.value instanceof o)continue;for(var le=D;le!==d.tail&&(ge<qe||typeof le.value=="string");le=le.next)re++,ge+=le.value.length;re--,$=c.slice(W,ge),ee.index-=W}else if(ee=u(K,0,$,ae),!ee)continue;var Y=ee.index,U=ee[0],te=$.slice(0,Y),fe=$.slice(Y+U.length),de=W+$.length;M&&de>M.reach&&(M.reach=de);var Q=D.prev;te&&(Q=p(d,Q,te),W+=te.length),m(d,Q,re);var Se=new o(S,V?n.tokenize(U,V):U,Le,U);if(D=p(d,Q,Se),fe&&p(d,D,fe),re>1){var he={cause:S+","+b,reach:de};f(c,d,w,D.prev,W,he),M&&he.reach>M.reach&&(M.reach=he.reach)}}}}}}function g(){var c={value:null,prev:null,next:null},d={value:null,prev:c,next:null};c.next=d,this.head=c,this.tail=d,this.length=0}function p(c,d,w){var v=d.next,E={value:w,prev:d,next:v};return d.next=E,v.prev=E,c.length++,E}function m(c,d,w){for(var v=d.next,E=0;E<w&&v!==c.tail;E++)v=v.next;d.next=v,v.prev=d,c.length-=E}function q(c){for(var d=[],w=c.head.next;w!==c.tail;)d.push(w.value),w=w.next;return d}if(!r.document)return r.addEventListener&&(n.disableWorkerMessageHandler||r.addEventListener("message",function(c){var d=JSON.parse(c.data),w=d.language,v=d.code,E=d.immediateClose;r.postMessage(n.highlight(v,n.languages[w],w)),E&&r.close()},!1)),n;var T=n.util.currentScript();T&&(n.filename=T.src,T.hasAttribute("data-manual")&&(n.manual=!0));function C(){n.manual||n.highlightAll()}if(!n.manual){var y=document.readyState;y==="loading"||y==="interactive"&&T&&T.defer?document.addEventListener("DOMContentLoaded",C):window.requestAnimationFrame?window.requestAnimationFrame(C):window.setTimeout(C,16)}return n}(e);s.exports&&(s.exports=a),typeof Zt<"u"&&(Zt.Prism=a),a.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},a.languages.markup.tag.inside["attr-value"].inside.entity=a.languages.markup.entity,a.languages.markup.doctype.inside["internal-subset"].inside=a.languages.markup,a.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(a.languages.markup.tag,"addInlined",{value:function(t,i){var l={};l["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:a.languages[i]},l.cdata=/^<!\[CDATA\[|\]\]>$/i;var n={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:l}};n["language-"+i]={pattern:/[\s\S]+/,inside:a.languages[i]};var o={};o[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:n},a.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(a.languages.markup.tag,"addAttribute",{value:function(r,t){a.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:a.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),a.languages.html=a.languages.markup,a.languages.mathml=a.languages.markup,a.languages.svg=a.languages.markup,a.languages.xml=a.languages.extend("markup",{}),a.languages.ssml=a.languages.xml,a.languages.atom=a.languages.xml,a.languages.rss=a.languages.xml,function(r){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(a),a.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},a.languages.javascript=a.languages.extend("clike",{"class-name":[a.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),a.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,a.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:a.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:a.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:a.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:a.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:a.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),a.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:a.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),a.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),a.languages.markup&&(a.languages.markup.tag.addInlined("script","javascript"),a.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),a.languages.js=a.languages.javascript,function(){if(typeof a>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading\u2026",t=function(T,C){return"\u2716 Error "+T+" while fetching file: "+C},i="\u2716 Error: File does not exist or is empty",l={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},n="data-src-status",o="loading",u="loaded",f="failed",g="pre[data-src]:not(["+n+'="'+u+'"]):not(['+n+'="'+o+'"])';function p(T,C,y){var c=new XMLHttpRequest;c.open("GET",T,!0),c.onreadystatechange=function(){c.readyState==4&&(c.status<400&&c.responseText?C(c.responseText):c.status>=400?y(t(c.status,c.statusText)):y(i))},c.send(null)}function m(T){var C=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(T||"");if(C){var y=Number(C[1]),c=C[2],d=C[3];return c?d?[y,Number(d)]:[y,void 0]:[y,y]}}a.hooks.add("before-highlightall",function(T){T.selector+=", "+g}),a.hooks.add("before-sanity-check",function(T){var C=T.element;if(C.matches(g)){T.code="",C.setAttribute(n,o);var y=C.appendChild(document.createElement("CODE"));y.textContent=r;var c=C.getAttribute("data-src"),d=T.language;if(d==="none"){var w=(/\.(\w+)$/.exec(c)||[,"none"])[1];d=l[w]||w}a.util.setLanguage(y,d),a.util.setLanguage(C,d);var v=a.plugins.autoloader;v&&v.loadLanguages(d),p(c,function(E){C.setAttribute(n,u);var M=m(C.getAttribute("data-range"));if(M){var S=E.split(/\r\n?|\n/g),k=M[0],b=M[1]==null?S.length:M[1];k<0&&(k+=S.length),k=Math.max(0,Math.min(k-1,S.length)),b<0&&(b+=S.length),b=Math.max(0,Math.min(b,S.length)),E=S.slice(k,b).join(`
`),C.hasAttribute("data-start")||C.setAttribute("data-start",String(k+1))}y.textContent=E,a.highlightElement(y)},function(E){C.setAttribute(n,f),y.textContent=E})}}),a.plugins.fileHighlight={highlight:function(C){for(var y=(C||document).querySelectorAll(g),c=0,d;d=y[c++];)a.highlightElement(d)}};var q=!1;a.fileHighlight=function(){q||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),q=!0),a.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(fs);const hs=fs.exports,Jt="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+Jt+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+Jt+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",s=>{s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,a){const r={};r["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[a]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;const t={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};t["language-"+a]={pattern:/[\s\S]+/,inside:Prism.languages[a]};const i={};i[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:t},Prism.languages.insertBefore("svelte","cdata",i)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function _r(s){let e,a;return{c(){e=new Fs(!1),a=ce(),this.h()},l(r){e=Os(r,!1),a=ce(),this.h()},h(){e.a=a},m(r,t){e.m(s[2],r,t),B(r,a,t)},p(r,t){t&4&&e.p(r[2])},d(r){r&&A(a),r&&e.d()}}}function Mr(s){let e;return{c(){e=Ce(s[2])},l(a){e=Te(a,s[2])},m(a,r){B(a,e,r)},p(a,r){r&4&&ft(e,a[2])},d(a){a&&A(e)}}}function kr(s){let e,a,r,t,i,l,n;const o=s[6].default,u=Ls(o,s,s[5],null);function f(m,q){return m[0]==="none"?Mr:_r}let g=f(s),p=g(s);return{c(){e=I("code"),u&&u.c(),a=j(),r=I("pre"),t=I("code"),p.c(),this.h()},l(m){e=z(m,"CODE",{style:!0});var q=N(e);u&&u.l(q),q.forEach(A),a=X(m),r=z(m,"PRE",{class:!0,"command-line":!0,"data-output":!0});var T=N(r);t=z(T,"CODE",{class:!0});var C=N(t);p.l(C),C.forEach(A),T.forEach(A),this.h()},h(){J(e,"display","none"),_(t,"class",i="language-"+s[0]),_(r,"class",l="language-"+s[0]),_(r,"command-line",""),_(r,"data-output","2-17")},m(m,q){B(m,e,q),u&&u.m(e,null),s[7](e),B(m,a,q),B(m,r,q),F(r,t),p.m(t,null),n=!0},p(m,[q]){u&&u.p&&(!n||q&32)&&Ss(u,o,m,m[5],n?Ts(o,m[5],q,null):Cs(m[5]),null),g===(g=f(m))&&p?p.p(m,q):(p.d(1),p=g(m),p&&(p.c(),p.m(t,null))),(!n||q&1&&i!==(i="language-"+m[0]))&&_(t,"class",i),(!n||q&1&&l!==(l="language-"+m[0]))&&_(r,"class",l)},i(m){n||(x(u,m),n=!0)},o(m){H(u,m),n=!1},d(m){m&&A(e),u&&u.d(m),s[7](null),m&&A(a),m&&A(r),p.d()}}}const $t=hs;hs.highlightElement;const yr={transform:s=>s};function Ar(s,e,a){let{$$slots:r={},$$scope:t}=e,{language:i="javascript"}=e,{source:l=""}=e,{transform:n=p=>p}=e,o,u;function f(){const p=$t.languages[i];let m=l||o.textContent;m=yr.transform(m),m=n(m),a(2,u=i==="none"?m:$t.highlight(m,p,i))}function g(p){be[p?"unshift":"push"](()=>{o=p,a(1,o)})}return s.$$set=p=>{a(9,e=Ze(Ze({},e),bt(p))),"language"in p&&a(0,i=p.language),"source"in p&&a(3,l=p.source),"transform"in p&&a(4,n=p.transform),"$$scope"in p&&a(5,t=p.$$scope)},s.$$.update=()=>{e&&(l||o)&&f()},e=bt(e),[i,o,u,l,n,t,r,g]}class Pr extends ye{constructor(e){super(),Ae(this,e,Ar,kr,Pe,{language:0,source:3,transform:4})}}function es(s,e,a){const r=s.slice();return r[8]=e[a],r}function ts(s){let e,a=s[8]+"",r;return{c(){e=I("option"),r=Ce(a),this.h()},l(t){e=z(t,"OPTION",{});var i=N(e);r=Te(i,a),i.forEach(A),this.h()},h(){e.__value=s[8],e.value=e.__value},m(t,i){B(t,e,i),F(e,r)},p:se,d(t){t&&A(e)}}}function Lr(s){let e,a,r,t,i,l,n,o,u,f,g,p,m,q,T,C,y,c,d,w,v,E,M,S,k,b,P,V,ae,ne,Le,O,K,D,W,$,re,ee,qe,ge,le=vt,Y=[];for(let U=0;U<le.length;U+=1)Y[U]=ts(es(s,le,U));return D=new wr({props:{config:s[0]}}),re=new Pr({props:{source:s[1]}}),{c(){e=I("link"),a=j(),r=I("div"),t=I("div"),i=I("div"),l=I("div"),n=Ce(`board
				`),o=I("div"),u=I("div"),f=I("label"),g=Ce("notation"),p=j(),m=I("select");for(let U=0;U<Y.length;U+=1)Y[U].c();q=j(),T=I("div"),C=I("input"),y=j(),c=I("label"),d=Ce("notation"),w=j(),v=I("div"),E=I("input"),M=j(),S=I("label"),k=Ce("flipped"),b=j(),P=I("div"),V=I("input"),ae=j(),ne=I("label"),Le=Ce("shadow"),O=j(),K=I("div"),we(D.$$.fragment),W=j(),$=I("div"),we(re.$$.fragment),this.h()},l(U){const te=qs('[data-svelte="svelte-tebjht"]',document.head);e=z(te,"LINK",{rel:!0,href:!0}),te.forEach(A),a=X(U),r=z(U,"DIV",{class:!0});var fe=N(r);t=z(fe,"DIV",{class:!0});var de=N(t);i=z(de,"DIV",{class:!0});var Q=N(i);l=z(Q,"DIV",{class:!0});var Se=N(l);n=Te(Se,`board
				`),o=z(Se,"DIV",{class:!0});var he=N(o);u=z(he,"DIV",{});var ze=N(u);f=z(ze,"LABEL",{for:!0,class:!0});var We=N(f);g=Te(We,"notation"),We.forEach(A),p=X(ze),m=z(ze,"SELECT",{});var Be=N(m);for(let Ve=0;Ve<Y.length;Ve+=1)Y[Ve].l(Be);Be.forEach(A),ze.forEach(A),q=X(he),T=z(he,"DIV",{});var De=N(T);C=z(De,"INPUT",{id:!0,type:!0}),y=X(De),c=z(De,"LABEL",{for:!0,class:!0});var Ke=N(c);d=Te(Ke,"notation"),Ke.forEach(A),De.forEach(A),w=X(he),v=z(he,"DIV",{});var Ne=N(v);E=z(Ne,"INPUT",{id:!0,type:!0}),M=X(Ne),S=z(Ne,"LABEL",{for:!0,class:!0});var Ge=N(S);k=Te(Ge,"flipped"),Ge.forEach(A),Ne.forEach(A),b=X(he),P=z(he,"DIV",{});var xe=N(P);V=z(xe,"INPUT",{id:!0,type:!0}),ae=X(xe),ne=z(xe,"LABEL",{for:!0,class:!0});var je=N(ne);Le=Te(je,"shadow"),je.forEach(A),xe.forEach(A),he.forEach(A),Se.forEach(A),Q.forEach(A),O=X(de),K=z(de,"DIV",{class:!0});var Xe=N(K);_e(D.$$.fragment,Xe),Xe.forEach(A),W=X(de),$=z(de,"DIV",{class:!0});var Ye=N($);_e(re.$$.fragment,Ye),Ye.forEach(A),de.forEach(A),fe.forEach(A),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",_(e,"rel","stylesheet"),_(e,"href","prism-one-dark.css"),_(f,"for","boardTheme"),_(f,"class","select-none"),s[0].board.boardTheme===void 0&&dt(()=>s[2].call(m)),_(C,"id","notation"),_(C,"type","checkbox"),_(c,"for","notation"),_(c,"class","select-none"),_(E,"id","flipped"),_(E,"type","checkbox"),_(S,"for","flipped"),_(S,"class","select-none"),_(V,"id","shadow"),_(V,"type","checkbox"),_(ne,"for","shadow"),_(ne,"class","select-none"),_(o,"class","p-2 pl-4"),_(l,"class","bg-slate-900/20 rounded shadow-lg p-2 pl-4 flex flex-col"),_(i,"class","col-start-1 row-span-2 flex flex-col gap-2 w-60 text-gray-300 text-sm"),_(K,"class","col-start-2 w-[var(--boardSize,40rem)]"),_($,"class","col-start-2 row-start-2 shadow-lg rounded"),_(t,"class","col-start-2 gap-10 grid grid-cols-[1fr-auto]"),_(r,"class","mt-10 grid grid-cols-center")},m(U,te){F(document.head,e),B(U,a,te),B(U,r,te),F(r,t),F(t,i),F(i,l),F(l,n),F(l,o),F(o,u),F(u,f),F(f,g),F(u,p),F(u,m);for(let fe=0;fe<Y.length;fe+=1)Y[fe].m(m,null);mt(m,s[0].board.boardTheme),F(o,q),F(o,T),F(T,C),C.checked=s[0].board.notation,F(T,y),F(T,c),F(c,d),F(o,w),F(o,v),F(v,E),E.checked=s[0].board.flipped,F(v,M),F(v,S),F(S,k),F(o,b),F(o,P),F(P,V),V.checked=s[0].board.shadow,F(P,ae),F(P,ne),F(ne,Le),F(t,O),F(t,K),Me(D,K,null),F(t,W),F(t,$),Me(re,$,null),ee=!0,qe||(ge=[ie(m,"change",s[2]),ie(C,"change",s[3]),ie(E,"change",s[4]),ie(V,"change",s[5])],qe=!0)},p(U,[te]){if(te&0){le=vt;let Q;for(Q=0;Q<le.length;Q+=1){const Se=es(U,le,Q);Y[Q]?Y[Q].p(Se,te):(Y[Q]=ts(Se),Y[Q].c(),Y[Q].m(m,null))}for(;Q<Y.length;Q+=1)Y[Q].d(1);Y.length=le.length}te&1&&mt(m,U[0].board.boardTheme),te&1&&(C.checked=U[0].board.notation),te&1&&(E.checked=U[0].board.flipped),te&1&&(V.checked=U[0].board.shadow);const fe={};te&1&&(fe.config=U[0]),D.$set(fe);const de={};te&2&&(de.source=U[1]),re.$set(de)},i(U){ee||(x(D.$$.fragment,U),x(re.$$.fragment,U),ee=!0)},o(U){H(D.$$.fragment,U),H(re.$$.fragment,U),ee=!1},d(U){A(e),U&&A(a),U&&A(r),He(Y,U),ke(D),ke(re),qe=!1,$e(ge)}}}function Sr(s,e,a){let r;const t=new ns,i={board:{boardTheme:"standard",piecesTheme:"standard",flipped:!1,notation:!0,shadow:!0,startFen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",startSize:500},movable:G.BOTH,draggable:!0,selectable:!0,legal:!1,callbacks:{},highlight:!0,drawTools:!0,sounds:!0,resizible:!0},l=g=>{const p=JSON.parse(JSON.stringify(g));return p.board!==void 0&&(p.board.boardTheme!==void 0&&p.board.boardTheme===t.board.boardTheme&&delete p.board.boardTheme,p.board.piecesTheme!==void 0&&p.board.piecesTheme===t.board.piecesTheme&&delete p.board.piecesTheme,p.board.flipped!==void 0&&p.board.flipped===t.board.flipped&&delete p.board.flipped,p.board.notation!==void 0&&p.board.notation===t.board.notation&&delete p.board.notation,p.board.shadow!==void 0&&p.board.shadow===t.board.shadow&&delete p.board.shadow,p.board.startFen!==void 0&&p.board.startFen===t.board.startFen&&delete p.board.startFen,Object.keys(p.board).length===0&&delete p.board),`const config: ChessboardConfig = ${JSON.stringify(p,null,4)}`.replace(/"([^"]+)":/g,"$1:")};function n(){i.board.boardTheme=Rs(this),a(0,i)}function o(){i.board.notation=this.checked,a(0,i)}function u(){i.board.flipped=this.checked,a(0,i)}function f(){i.board.shadow=this.checked,a(0,i)}return s.$$.update=()=>{s.$$.dirty&1&&a(1,r=l(i))},[i,r,n,o,u,f]}class Fr extends ye{constructor(e){super(),Ae(this,e,Sr,Lr,Pe,{})}}export{Fr as default};
