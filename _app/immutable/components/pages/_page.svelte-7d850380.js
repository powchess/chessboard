var qn=Object.defineProperty;var Fn=(t,e,s)=>e in t?qn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var D=(t,e,s)=>(Fn(t,typeof e!="symbol"?e+"":e,s),s);import{S as Ie,i as qe,s as Fe,C as fn,k as H,a as se,l as K,m as V,h as P,c as ne,p as Pe,n as v,b as Y,G as O,D as dn,E as hn,F as gn,f as Z,t as te,I as Lt,J as us,K as oe,L as Nn,e as Le,M as Rn,q as we,r as Ce,u as Nt,N as it,O as bn,B as Te,P as rt,Q as pn,R as Dn,T as Bn,U as cs,V as ct,W as ss,X as fe,Y as ns,Z as at,_ as St,H as Un,$ as Ve,a0 as Re,a1 as De,o as is,g as Be,d as Ue,a2 as Hn,a3 as Kn,a4 as be,w as _e,x as Ee,y as Me,a5 as pe,z as ke,a6 as fs,a7 as mn,a8 as ds,a9 as zn,aa as vn,A as Vn,ab as _n,ac as Ot,ad as bt,ae as rs,af as En,ag as hs,ah as Wn}from"../../chunks/index-fec2cb7a.js";import{w as jn}from"../../chunks/index-27c90a1c.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mn={exports:{}};(function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var s=function(i){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,n={},l={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function f(m){return m instanceof o?new o(m.type,f(m.content),m.alias):Array.isArray(m)?m.map(f):m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(f){return Object.prototype.toString.call(f).slice(8,-1)},objId:function(f){return f.__id||Object.defineProperty(f,"__id",{value:++a}),f.__id},clone:function f(m,w){w=w||{};var y,A;switch(l.util.type(m)){case"Object":if(A=l.util.objId(m),w[A])return w[A];y={},w[A]=y;for(var N in m)m.hasOwnProperty(N)&&(y[N]=f(m[N],w));return y;case"Array":return A=l.util.objId(m),w[A]?w[A]:(y=[],w[A]=y,m.forEach(function(W,B){y[B]=f(W,w)}),y);default:return m}},getLanguage:function(f){for(;f;){var m=r.exec(f.className);if(m)return m[1].toLowerCase();f=f.parentElement}return"none"},setLanguage:function(f,m){f.className=f.className.replace(RegExp(r,"gi"),""),f.classList.add("language-"+m)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(y){var f=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(y.stack)||[])[1];if(f){var m=document.getElementsByTagName("script");for(var w in m)if(m[w].src==f)return m[w]}return null}},isActive:function(f,m,w){for(var y="no-"+m;f;){var A=f.classList;if(A.contains(m))return!0;if(A.contains(y))return!1;f=f.parentElement}return!!w}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(f,m){var w=l.util.clone(l.languages[f]);for(var y in m)w[y]=m[y];return w},insertBefore:function(f,m,w,y){y=y||l.languages;var A=y[f],N={};for(var W in A)if(A.hasOwnProperty(W)){if(W==m)for(var B in w)w.hasOwnProperty(B)&&(N[B]=w[B]);w.hasOwnProperty(W)||(N[W]=A[W])}var R=y[f];return y[f]=N,l.languages.DFS(l.languages,function(G,re){re===R&&G!=f&&(this[G]=N)}),N},DFS:function f(m,w,y,A){A=A||{};var N=l.util.objId;for(var W in m)if(m.hasOwnProperty(W)){w.call(m,W,m[W],y||W);var B=m[W],R=l.util.type(B);R==="Object"&&!A[N(B)]?(A[N(B)]=!0,f(B,w,null,A)):R==="Array"&&!A[N(B)]&&(A[N(B)]=!0,f(B,w,W,A))}}},plugins:{},highlightAll:function(f,m){l.highlightAllUnder(document,f,m)},highlightAllUnder:function(f,m,w){var y={callback:w,container:f,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",y),y.elements=Array.prototype.slice.apply(y.container.querySelectorAll(y.selector)),l.hooks.run("before-all-elements-highlight",y);for(var A=0,N;N=y.elements[A++];)l.highlightElement(N,m===!0,y.callback)},highlightElement:function(f,m,w){var y=l.util.getLanguage(f),A=l.languages[y];l.util.setLanguage(f,y);var N=f.parentElement;N&&N.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(N,y);var W=f.textContent,B={element:f,language:y,grammar:A,code:W};function R(re){B.highlightedCode=re,l.hooks.run("before-insert",B),B.element.innerHTML=B.highlightedCode,l.hooks.run("after-highlight",B),l.hooks.run("complete",B),w&&w.call(B.element)}if(l.hooks.run("before-sanity-check",B),N=B.element.parentElement,N&&N.nodeName.toLowerCase()==="pre"&&!N.hasAttribute("tabindex")&&N.setAttribute("tabindex","0"),!B.code){l.hooks.run("complete",B),w&&w.call(B.element);return}if(l.hooks.run("before-highlight",B),!B.grammar){R(l.util.encode(B.code));return}if(m&&i.Worker){var G=new Worker(l.filename);G.onmessage=function(re){R(re.data)},G.postMessage(JSON.stringify({language:B.language,code:B.code,immediateClose:!0}))}else R(l.highlight(B.code,B.grammar,B.language))},highlight:function(f,m,w){var y={code:f,grammar:m,language:w};if(l.hooks.run("before-tokenize",y),!y.grammar)throw new Error('The language "'+y.language+'" has no grammar.');return y.tokens=l.tokenize(y.code,y.grammar),l.hooks.run("after-tokenize",y),o.stringify(l.util.encode(y.tokens),y.language)},tokenize:function(f,m){var w=m.rest;if(w){for(var y in w)m[y]=w[y];delete m.rest}var A=new d;return p(A,A.head,f),c(f,A,m,A.head,0),I(A)},hooks:{all:{},add:function(f,m){var w=l.hooks.all;w[f]=w[f]||[],w[f].push(m)},run:function(f,m){var w=l.hooks.all[f];if(!(!w||!w.length))for(var y=0,A;A=w[y++];)A(m)}},Token:o};i.Prism=l;function o(f,m,w,y){this.type=f,this.content=m,this.alias=w,this.length=(y||"").length|0}o.stringify=function f(m,w){if(typeof m=="string")return m;if(Array.isArray(m)){var y="";return m.forEach(function(R){y+=f(R,w)}),y}var A={type:m.type,content:f(m.content,w),tag:"span",classes:["token",m.type],attributes:{},language:w},N=m.alias;N&&(Array.isArray(N)?Array.prototype.push.apply(A.classes,N):A.classes.push(N)),l.hooks.run("wrap",A);var W="";for(var B in A.attributes)W+=" "+B+'="'+(A.attributes[B]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+W+">"+A.content+"</"+A.tag+">"};function u(f,m,w,y){f.lastIndex=m;var A=f.exec(w);if(A&&y&&A[1]){var N=A[1].length;A.index+=N,A[0]=A[0].slice(N)}return A}function c(f,m,w,y,A,N){for(var W in w)if(!(!w.hasOwnProperty(W)||!w[W])){var B=w[W];B=Array.isArray(B)?B:[B];for(var R=0;R<B.length;++R){if(N&&N.cause==W+","+R)return;var G=B[R],re=G.inside,de=!!G.lookbehind,$=!!G.greedy,g=G.alias;if($&&!G.pattern.global){var k=G.pattern.toString().match(/[imsuy]*$/)[0];G.pattern=RegExp(G.pattern.source,k+"g")}for(var M=G.pattern||G,E=y.next,b=A;E!==m.tail&&!(N&&b>=N.reach);b+=E.value.length,E=E.next){var q=E.value;if(m.length>f.length)return;if(!(q instanceof o)){var h=1,F;if($){if(F=u(M,b,f,de),!F||F.index>=f.length)break;var j=F.index,Q=F.index+F[0].length,x=b;for(x+=E.value.length;j>=x;)E=E.next,x+=E.value.length;if(x-=E.value.length,b=x,E.value instanceof o)continue;for(var ee=E;ee!==m.tail&&(x<Q||typeof ee.value=="string");ee=ee.next)h++,x+=ee.value.length;h--,q=f.slice(b,x),F.index-=b}else if(F=u(M,0,q,de),!F)continue;var j=F.index,ue=F[0],X=q.slice(0,j),ae=q.slice(j+ue.length),ce=b+q.length;N&&ce>N.reach&&(N.reach=ce);var me=E.prev;X&&(me=p(m,me,X),b+=X.length),S(m,me,h);var Oe=new o(W,re?l.tokenize(ue,re):ue,g,ue);if(E=p(m,me,Oe),ae&&p(m,E,ae),h>1){var le={cause:W+","+R,reach:ce};c(f,m,w,E.prev,b,le),N&&le.reach>N.reach&&(N.reach=le.reach)}}}}}}function d(){var f={value:null,prev:null,next:null},m={value:null,prev:f,next:null};f.next=m,this.head=f,this.tail=m,this.length=0}function p(f,m,w){var y=m.next,A={value:w,prev:m,next:y};return m.next=A,y.prev=A,f.length++,A}function S(f,m,w){for(var y=m.next,A=0;A<w&&y!==f.tail;A++)y=y.next;m.next=y,y.prev=m,f.length-=A}function I(f){for(var m=[],w=f.head.next;w!==f.tail;)m.push(w.value),w=w.next;return m}if(!i.document)return i.addEventListener&&(l.disableWorkerMessageHandler||i.addEventListener("message",function(f){var m=JSON.parse(f.data),w=m.language,y=m.code,A=m.immediateClose;i.postMessage(l.highlight(y,l.languages[w],w)),A&&i.close()},!1)),l;var L=l.util.currentScript();L&&(l.filename=L.src,L.hasAttribute("data-manual")&&(l.manual=!0));function C(){l.manual||l.highlightAll()}if(!l.manual){var T=document.readyState;T==="loading"||T==="interactive"&&L&&L.defer?document.addEventListener("DOMContentLoaded",C):window.requestAnimationFrame?window.requestAnimationFrame(C):window.setTimeout(C,16)}return l}(e);t.exports&&(t.exports=s),typeof gs<"u"&&(gs.Prism=s),s.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},s.languages.markup.tag.inside["attr-value"].inside.entity=s.languages.markup.entity,s.languages.markup.doctype.inside["internal-subset"].inside=s.languages.markup,s.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(s.languages.markup.tag,"addInlined",{value:function(r,a){var n={};n["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:s.languages[a]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};l["language-"+a]={pattern:/[\s\S]+/,inside:s.languages[a]};var o={};o[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:l},s.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(s.languages.markup.tag,"addAttribute",{value:function(i,r){s.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:s.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),s.languages.html=s.languages.markup,s.languages.mathml=s.languages.markup,s.languages.svg=s.languages.markup,s.languages.xml=s.languages.extend("markup",{}),s.languages.ssml=s.languages.xml,s.languages.atom=s.languages.xml,s.languages.rss=s.languages.xml,function(i){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var a=i.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))}(s),s.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},s.languages.javascript=s.languages.extend("clike",{"class-name":[s.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),s.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,s.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:s.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:s.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:s.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:s.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:s.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),s.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:s.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),s.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),s.languages.markup&&(s.languages.markup.tag.addInlined("script","javascript"),s.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),s.languages.js=s.languages.javascript,function(){if(typeof s>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading\u2026",r=function(L,C){return"\u2716 Error "+L+" while fetching file: "+C},a="\u2716 Error: File does not exist or is empty",n={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",c="failed",d="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function p(L,C,T){var f=new XMLHttpRequest;f.open("GET",L,!0),f.onreadystatechange=function(){f.readyState==4&&(f.status<400&&f.responseText?C(f.responseText):f.status>=400?T(r(f.status,f.statusText)):T(a))},f.send(null)}function S(L){var C=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(L||"");if(C){var T=Number(C[1]),f=C[2],m=C[3];return f?m?[T,Number(m)]:[T,void 0]:[T,T]}}s.hooks.add("before-highlightall",function(L){L.selector+=", "+d}),s.hooks.add("before-sanity-check",function(L){var C=L.element;if(C.matches(d)){L.code="",C.setAttribute(l,o);var T=C.appendChild(document.createElement("CODE"));T.textContent=i;var f=C.getAttribute("data-src"),m=L.language;if(m==="none"){var w=(/\.(\w+)$/.exec(f)||[,"none"])[1];m=n[w]||w}s.util.setLanguage(T,m),s.util.setLanguage(C,m);var y=s.plugins.autoloader;y&&y.loadLanguages(m),p(f,function(A){C.setAttribute(l,u);var N=S(C.getAttribute("data-range"));if(N){var W=A.split(/\r\n?|\n/g),B=N[0],R=N[1]==null?W.length:N[1];B<0&&(B+=W.length),B=Math.max(0,Math.min(B-1,W.length)),R<0&&(R+=W.length),R=Math.max(0,Math.min(R,W.length)),A=W.slice(B,R).join(`
`),C.hasAttribute("data-start")||C.setAttribute("data-start",String(B+1))}T.textContent=A,s.highlightElement(T)},function(A){C.setAttribute(l,c),T.textContent=A})}}),s.plugins.fileHighlight={highlight:function(C){for(var T=(C||document).querySelectorAll(d),f=0,m;m=T[f++];)s.highlightElement(m)}};var I=!1;s.fileHighlight=function(){I||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),I=!0),s.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Mn);const kn=Mn.exports,bs="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+bs+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+bs+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",t=>{t.type==="entity"&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,s){const i={};i["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[s]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;const r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};r["language-"+s]={pattern:/[\s\S]+/,inside:Prism.languages[s]};const a={};a[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:r},Prism.languages.insertBefore("svelte","cdata",a)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function Gn(t){let e,s;return{c(){e=new Nn(!1),s=Le(),this.h()},l(i){e=Rn(i,!1),s=Le(),this.h()},h(){e.a=s},m(i,r){e.m(t[2],i,r),Y(i,s,r)},p(i,r){r&4&&e.p(i[2])},d(i){i&&P(s),i&&e.d()}}}function Qn(t){let e;return{c(){e=we(t[2])},l(s){e=Ce(s,t[2])},m(s,i){Y(s,e,i)},p(s,i){i&4&&Nt(e,s[2])},d(s){s&&P(e)}}}function Xn(t){let e,s,i,r,a,n,l;const o=t[6].default,u=fn(o,t,t[5],null);function c(S,I){return S[0]==="none"?Qn:Gn}let d=c(t),p=d(t);return{c(){e=H("code"),u&&u.c(),s=se(),i=H("pre"),r=H("code"),p.c(),this.h()},l(S){e=K(S,"CODE",{style:!0});var I=V(e);u&&u.l(I),I.forEach(P),s=ne(S),i=K(S,"PRE",{class:!0,"command-line":!0,"data-output":!0});var L=V(i);r=K(L,"CODE",{class:!0});var C=V(r);p.l(C),C.forEach(P),L.forEach(P),this.h()},h(){Pe(e,"display","none"),v(r,"class",a="language-"+t[0]),v(i,"class",n="language-"+t[0]),v(i,"command-line",""),v(i,"data-output","2-17")},m(S,I){Y(S,e,I),u&&u.m(e,null),t[7](e),Y(S,s,I),Y(S,i,I),O(i,r),p.m(r,null),l=!0},p(S,[I]){u&&u.p&&(!l||I&32)&&dn(u,o,S,S[5],l?gn(o,S[5],I,null):hn(S[5]),null),d===(d=c(S))&&p?p.p(S,I):(p.d(1),p=d(S),p&&(p.c(),p.m(r,null))),(!l||I&1&&a!==(a="language-"+S[0]))&&v(r,"class",a),(!l||I&1&&n!==(n="language-"+S[0]))&&v(i,"class",n)},i(S){l||(Z(u,S),l=!0)},o(S){te(u,S),l=!1},d(S){S&&P(e),u&&u.d(S),t[7](null),S&&P(s),S&&P(i),p.d()}}}const ps=kn;kn.highlightElement;const Yn={transform:t=>t};function Zn(t,e,s){let{$$slots:i={},$$scope:r}=e,{language:a="javascript"}=e,{source:n=""}=e,{transform:l=p=>p}=e,o,u;function c(){const p=ps.languages[a];let S=n||o.textContent;S=Yn.transform(S),S=l(S),s(2,u=a==="none"?S:ps.highlight(S,p,a))}function d(p){oe[p?"unshift":"push"](()=>{o=p,s(1,o)})}return t.$$set=p=>{s(9,e=Lt(Lt({},e),us(p))),"language"in p&&s(0,a=p.language),"source"in p&&s(3,n=p.source),"transform"in p&&s(4,l=p.transform),"$$scope"in p&&s(5,r=p.$$scope)},t.$$.update=()=>{e&&(n||o)&&c()},e=us(e),[a,o,u,n,l,r,i,d]}class Jn extends Ie{constructor(e){super(),qe(this,e,Zn,Xn,Fe,{language:0,source:3,transform:4})}}var Sn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Chess=t.validateFen=t.SQUARES=t.DEFAULT_POSITION=t.KING=t.QUEEN=t.ROOK=t.BISHOP=t.KNIGHT=t.PAWN=t.BLACK=t.WHITE=void 0,t.WHITE="w",t.BLACK="b",t.PAWN="p",t.KNIGHT="n",t.BISHOP="b",t.ROOK="r",t.QUEEN="q",t.KING="k",t.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";const e=-1,s={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"};t.SQUARES=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"];const i={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},r={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},a={b:[16,32,17,15],w:[-16,-32,-17,-15]},n={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},l=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],o=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],u={p:1,n:2,b:4,r:8,q:16,k:32},c="pnbrqkPNBRQK",d=[t.KNIGHT,t.BISHOP,t.ROOK,t.QUEEN],p=7,S=6,I=1,L=0,C={w:[{square:r.a1,flag:i.QSIDE_CASTLE},{square:r.h1,flag:i.KSIDE_CASTLE}],b:[{square:r.a8,flag:i.QSIDE_CASTLE},{square:r.h8,flag:i.KSIDE_CASTLE}]},T={b:I,w:S},f=["1-0","0-1","1/2-1/2","*"];function m($){return $>>4}function w($){return $&15}function y($){return"0123456789".indexOf($)!==-1}function A($){const g=w($),k=m($);return"abcdefgh".substring(g,g+1)+"87654321".substring(k,k+1)}function N($){return $===t.WHITE?t.BLACK:t.WHITE}function W($){const g=[];g[0]="No errors.",g[1]="FEN string must contain six space-delimited fields.",g[2]="6th field (move number) must be a positive integer.",g[3]="5th field (half move counter) must be a non-negative integer.",g[4]="4th field (en-passant square) is invalid.",g[5]="3rd field (castling availability) is invalid.",g[6]="2nd field (side to move) is invalid.",g[7]="1st field (piece positions) does not contain 8 '/'-delimited rows.",g[8]="1st field (piece positions) is invalid [consecutive numbers].",g[9]="1st field (piece positions) is invalid [invalid piece].",g[10]="1st field (piece positions) is invalid [row too large].",g[11]="Illegal en-passant square";const k=$.split(/\s+/);if(k.length!==6)return{valid:!1,errorNumber:1,error:g[1]};const M=parseInt(k[5],10);if(isNaN(M)||M<=0)return{valid:!1,errorNumber:2,error:g[2]};const E=parseInt(k[4],10);if(isNaN(E)||E<0)return{valid:!1,errorNumber:3,error:g[3]};if(!/^(-|[abcdefgh][36])$/.test(k[3]))return{valid:!1,errorNumber:4,error:g[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(k[2]))return{valid:!1,errorNumber:5,error:g[5]};if(!/^(w|b)$/.test(k[1]))return{valid:!1,errorNumber:6,error:g[6]};const b=k[0].split("/");if(b.length!==8)return{valid:!1,errorNumber:7,error:g[7]};for(let q=0;q<b.length;q++){let h=0,F=!1;for(let Q=0;Q<b[q].length;Q++)if(y(b[q][Q])){if(F)return{valid:!1,errorNumber:8,error:g[8]};h+=parseInt(b[q][Q],10),F=!0}else{if(!/^[prnbqkPRNBQK]$/.test(b[q][Q]))return{valid:!1,errorNumber:9,error:g[9]};h+=1,F=!1}if(h!==8)return{valid:!1,errorNumber:10,error:g[10]}}return k[3][1]=="3"&&k[1]=="w"||k[3][1]=="6"&&k[1]=="b"?{valid:!1,errorNumber:11,error:g[11]}:{valid:!0,errorNumber:0,error:g[0]}}t.validateFen=W;function B($,g){const k=$.from,M=$.to,E=$.piece;let b=0,q=0,h=0;for(let F=0,Q=g.length;F<Q;F++){const x=g[F].from,ee=g[F].to,j=g[F].piece;E===j&&k!==x&&M===ee&&(b++,m(k)===m(x)&&q++,w(k)===w(x)&&h++)}return b>0?q>0&&h>0?A(k):h>0?A(k).charAt(1):A(k).charAt(0):""}function R($,g,k,M,E,b=void 0,q=i.NORMAL){const h=m(M);if(E===t.PAWN&&(h===p||h===L))for(let F=0;F<d.length;F++){const Q=d[F];$.push({color:g,from:k,to:M,piece:E,captured:b,promotion:Q,flags:q|i.PROMOTION})}else $.push({color:g,from:k,to:M,piece:E,captured:b,promotion:void 0,flags:q})}function G($){let g=$.charAt(0);return g>="a"&&g<="h"?$.match(/[a-h]\d.*[a-h]\d/)?void 0:t.PAWN:(g=g.toLowerCase(),g==="o"?t.KING:g)}function re($){return $.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class de{constructor(g=t.DEFAULT_POSITION){this._board=new Array(128),this._turn=t.WHITE,this._header={},this._kings={w:e,b:e},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(g)}clear(g=!1){this._board=new Array(128),this._kings={w:e,b:e},this._turn=t.WHITE,this._castling={w:0,b:0},this._epSquare=e,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=g?this._header:{},this._updateSetup(this.fen())}load(g,k=!1){const M=g.split(/\s+/),E=M[0];let b=0;if(!W(g).valid)return!1;this.clear(k);for(let q=0;q<E.length;q++){const h=E.charAt(q);if(h==="/")b+=8;else if(y(h))b+=parseInt(h,10);else{const F=h<"a"?t.WHITE:t.BLACK;this.put({type:h.toLowerCase(),color:F},A(b)),b++}}return this._turn=M[1],M[2].indexOf("K")>-1&&(this._castling.w|=i.KSIDE_CASTLE),M[2].indexOf("Q")>-1&&(this._castling.w|=i.QSIDE_CASTLE),M[2].indexOf("k")>-1&&(this._castling.b|=i.KSIDE_CASTLE),M[2].indexOf("q")>-1&&(this._castling.b|=i.QSIDE_CASTLE),this._epSquare=M[3]==="-"?e:r[M[3]],this._halfMoves=parseInt(M[4],10),this._moveNumber=parseInt(M[5],10),this._updateSetup(this.fen()),!0}fen(){let g=0,k="";for(let b=r.a8;b<=r.h1;b++){if(this._board[b]){g>0&&(k+=g,g=0);const{color:q,type:h}=this._board[b];k+=q===t.WHITE?h.toUpperCase():h.toLowerCase()}else g++;b+1&136&&(g>0&&(k+=g),b!==r.h1&&(k+="/"),g=0,b+=8)}let M="";this._castling[t.WHITE]&i.KSIDE_CASTLE&&(M+="K"),this._castling[t.WHITE]&i.QSIDE_CASTLE&&(M+="Q"),this._castling[t.BLACK]&i.KSIDE_CASTLE&&(M+="k"),this._castling[t.BLACK]&i.QSIDE_CASTLE&&(M+="q"),M=M||"-";const E=this._epSquare===e?"-":A(this._epSquare);return[k,this._turn,M,E,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(g){this._history.length>0||(g!==t.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=g):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(t.DEFAULT_POSITION)}get(g){return this._board[r[g]]||!1}put({type:g,color:k},M){if(c.indexOf(g.toLowerCase())===-1||!(M in r))return!1;const E=r[M];return g==t.KING&&!(this._kings[k]==e||this._kings[k]==E)?!1:(this._board[E]={type:g,color:k},g===t.KING&&(this._kings[k]=E),this._updateSetup(this.fen()),!0)}remove(g){const k=this.get(g);return delete this._board[r[g]],k&&k.type===t.KING&&(this._kings[k.color]=e),this._updateSetup(this.fen()),k}_attacked(g,k){for(let M=r.a8;M<=r.h1;M++){if(M&136){M+=7;continue}if(this._board[M]===void 0||this._board[M].color!==g)continue;const E=this._board[M],b=M-k,q=b+119;if(l[q]&u[E.type]){if(E.type===t.PAWN){if(b>0){if(E.color===t.WHITE)return!0}else if(E.color===t.BLACK)return!0;continue}if(E.type==="n"||E.type==="k")return!0;const h=o[q];let F=M+h,Q=!1;for(;F!==k;){if(this._board[F]!=null){Q=!0;break}F+=h}if(!Q)return!0}}return!1}_isKingAttacked(g){return this._attacked(N(g),this._kings[g])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const g={b:0,n:0,r:0,q:0,k:0,p:0},k=[];let M=0,E=0;for(let b=r.a8;b<=r.h1;b++){if(E=(E+1)%2,b&136){b+=7;continue}const q=this._board[b];q&&(g[q.type]=q.type in g?g[q.type]+1:1,q.type===t.BISHOP&&k.push(E),M++)}if(M===2)return!0;if(M===3&&(g[t.BISHOP]===1||g[t.KNIGHT]===1))return!0;if(M===g[t.BISHOP]+2){let b=0;const q=k.length;for(let h=0;h<q;h++)b+=k[h];if(b===0||b===q)return!0}return!1}isThreefoldRepetition(){const g=[],k={};let M=!1;for(;;){const E=this._undoMove();if(!E)break;g.push(E)}for(;;){const E=this.fen().split(" ").slice(0,4).join(" ");k[E]=E in k?k[E]+1:1,k[E]>=3&&(M=!0);const b=g.pop();if(b)this._makeMove(b);else break}return M}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:g=!1,square:k=void 0}={}){const M=this._moves({square:k});return g?M.map(E=>this._makePretty(E)):M.map(E=>this._moveToSan(E,M))}_moves({legal:g=!0,piece:k=void 0,square:M=void 0}={}){var E;const b=M?M.toLowerCase():void 0,q=k==null?void 0:k.toLowerCase(),h=[],F=this._turn,Q=N(F);let x=r.a8,ee=r.h1,j=!1;if(b)if(b in r)x=ee=r[b],j=!0;else return[];for(let X=x;X<=ee;X++){if(X&136){X+=7;continue}if(!this._board[X]||this._board[X].color===Q)continue;const{type:ae}=this._board[X];let ce;if(ae===t.PAWN){if(q&&q!==ae)continue;ce=X+a[F][0],this._board[ce]||(R(h,F,X,ce,t.PAWN),ce=X+a[F][1],T[F]===m(X)&&!this._board[ce]&&R(h,F,X,ce,t.PAWN,void 0,i.BIG_PAWN));for(let me=2;me<4;me++)ce=X+a[F][me],!(ce&136)&&(((E=this._board[ce])===null||E===void 0?void 0:E.color)===Q?R(h,F,X,ce,t.PAWN,this._board[ce].type,i.CAPTURE):ce===this._epSquare&&R(h,F,X,ce,t.PAWN,t.PAWN,i.EP_CAPTURE))}else{if(q&&q!==ae)continue;for(let me=0,Oe=n[ae].length;me<Oe;me++){const le=n[ae][me];for(ce=X;ce+=le,!(ce&136);){if(!this._board[ce])R(h,F,X,ce,ae);else{if(this._board[ce].color===F)break;R(h,F,X,ce,ae,this._board[ce].type,i.CAPTURE);break}if(ae===t.KNIGHT||ae===t.KING)break}}}}if((q===void 0||q===t.KING)&&(!j||ee===this._kings[F])){if(this._castling[F]&i.KSIDE_CASTLE){const X=this._kings[F],ae=X+2;!this._board[X+1]&&!this._board[ae]&&!this._attacked(Q,this._kings[F])&&!this._attacked(Q,X+1)&&!this._attacked(Q,ae)&&R(h,F,this._kings[F],ae,t.KING,void 0,i.KSIDE_CASTLE)}if(this._castling[F]&i.QSIDE_CASTLE){const X=this._kings[F],ae=X-2;!this._board[X-1]&&!this._board[X-2]&&!this._board[X-3]&&!this._attacked(Q,this._kings[F])&&!this._attacked(Q,X-1)&&!this._attacked(Q,ae)&&R(h,F,this._kings[F],ae,t.KING,void 0,i.QSIDE_CASTLE)}}if(!g)return h;const ue=[];for(let X=0,ae=h.length;X<ae;X++)this._makeMove(h[X]),this._isKingAttacked(F)||ue.push(h[X]),this._undoMove();return ue}move(g,{sloppy:k=!1}={}){let M=null;if(typeof g=="string")M=this._moveFromSan(g,k);else if(typeof g=="object"){const b=this._moves();for(let q=0,h=b.length;q<h;q++)if(g.from===A(b[q].from)&&g.to===A(b[q].to)&&(!("promotion"in b[q])||g.promotion===b[q].promotion)){M=b[q];break}}if(!M)return null;const E=this._makePretty(M);return this._makeMove(M),E}_push(g){this._history.push({move:g,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(g){const k=this._turn,M=N(k);if(this._push(g),this._board[g.to]=this._board[g.from],delete this._board[g.from],g.flags&i.EP_CAPTURE&&(this._turn===t.BLACK?delete this._board[g.to-16]:delete this._board[g.to+16]),g.promotion&&(this._board[g.to]={type:g.promotion,color:k}),this._board[g.to].type===t.KING){if(this._kings[k]=g.to,g.flags&i.KSIDE_CASTLE){const E=g.to-1,b=g.to+1;this._board[E]=this._board[b],delete this._board[b]}else if(g.flags&i.QSIDE_CASTLE){const E=g.to+1,b=g.to-2;this._board[E]=this._board[b],delete this._board[b]}this._castling[k]=0}if(this._castling[k]){for(let E=0,b=C[k].length;E<b;E++)if(g.from===C[k][E].square&&this._castling[k]&C[k][E].flag){this._castling[k]^=C[k][E].flag;break}}if(this._castling[M]){for(let E=0,b=C[M].length;E<b;E++)if(g.to===C[M][E].square&&this._castling[M]&C[M][E].flag){this._castling[M]^=C[M][E].flag;break}}g.flags&i.BIG_PAWN?k===t.BLACK?this._epSquare=g.to-16:this._epSquare=g.to+16:this._epSquare=e,g.piece===t.PAWN?this._halfMoves=0:g.flags&(i.CAPTURE|i.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,k===t.BLACK&&this._moveNumber++,this._turn=M}undo(){const g=this._undoMove();return g?this._makePretty(g):null}_undoMove(){const g=this._history.pop();if(g===void 0)return null;const k=g.move;this._kings=g.kings,this._turn=g.turn,this._castling=g.castling,this._epSquare=g.epSquare,this._halfMoves=g.halfMoves,this._moveNumber=g.moveNumber;const M=this._turn,E=N(M);if(this._board[k.from]=this._board[k.to],this._board[k.from].type=k.piece,delete this._board[k.to],k.captured)if(k.flags&i.EP_CAPTURE){let b;M===t.BLACK?b=k.to-16:b=k.to+16,this._board[b]={type:t.PAWN,color:E}}else this._board[k.to]={type:k.captured,color:E};if(k.flags&(i.KSIDE_CASTLE|i.QSIDE_CASTLE)){let b,q;k.flags&i.KSIDE_CASTLE?(b=k.to+1,q=k.to-1):(b=k.to-2,q=k.to+1),this._board[b]=this._board[q],delete this._board[q]}return k}pgn({newline:g=`
`,maxWidth:k=0}={}){const M=[];let E=!1;for(const j in this._header)M.push("["+j+' "'+this._header[j]+'"]'+g),E=!0;E&&this._history.length&&M.push(g);const b=j=>{const ue=this._comments[this.fen()];if(typeof ue<"u"){const X=j.length>0?" ":"";j=`${j}${X}{${ue}}`}return j},q=[];for(;this._history.length>0;)q.push(this._undoMove());const h=[];let F="";for(q.length===0&&h.push(b(""));q.length>0;){F=b(F);const j=q.pop();if(!j)break;if(!this._history.length&&j.color==="b"){const ue=`${this._moveNumber}. ...`;F=F?`${F} ${ue}`:ue}else j.color==="w"&&(F.length&&h.push(F),F=this._moveNumber+".");F=F+" "+this._moveToSan(j,this._moves({legal:!0})),this._makeMove(j)}if(F.length&&h.push(b(F)),typeof this._header.Result<"u"&&h.push(this._header.Result),k===0)return M.join("")+h.join(" ");const Q=function(){return M.length>0&&M[M.length-1]===" "?(M.pop(),!0):!1},x=function(j,ue){for(const X of ue.split(" "))if(!!X){if(j+X.length>k){for(;Q();)j--;M.push(g),j=0}M.push(X),j+=X.length,M.push(" "),j++}return Q()&&j--,j};let ee=0;for(let j=0;j<h.length;j++){if(ee+h[j].length>k&&h[j].includes("{")){ee=x(ee,h[j]);continue}ee+h[j].length>k&&j!==0?(M[M.length-1]===" "&&M.pop(),M.push(g),ee=0):j!==0&&(M.push(" "),ee++),M.push(h[j]),ee+=h[j].length}return M.join("")}header(...g){for(let k=0;k<g.length;k+=2)typeof g[k]=="string"&&typeof g[k+1]=="string"&&(this._header[g[k]]=g[k+1]);return this._header}loadPgn(g,{sloppy:k=!1,newlineChar:M=`\r?
`}={}){function E(le){return le.replace(/\\/g,"\\")}function b(le){const Se={},Ne=le.split(new RegExp(E(M)));let Ge="",Qe="";for(let We=0;We<Ne.length;We++){const Ke=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;Ge=Ne[We].replace(Ke,"$1"),Qe=Ne[We].replace(Ke,"$2"),Ge.trim().length>0&&(Se[Ge]=Qe)}return Se}g=g.trim();const h=new RegExp("^(\\[((?:"+E(M)+")|.)*\\])(?:\\s*"+E(M)+"){2}").exec(g),F=h&&h.length>=2?h[1]:"";this.reset();const Q=b(F);let x="";for(const le in Q)le.toLowerCase()==="fen"&&(x=Q[le]),this.header(le,Q[le]);if(k){if(x&&!this.load(x,!0))return!1}else if(Q.SetUp==="1"&&!("FEN"in Q&&this.load(Q.FEN,!0)))return!1;function ee(le){return Array.from(le).map(function(Se){return Se.charCodeAt(0)<128?Se.charCodeAt(0).toString(16):encodeURIComponent(Se).replace(/%/g,"").toLowerCase()}).join("")}function j(le){return le.length==0?"":decodeURIComponent("%"+(le.match(/.{1,2}/g)||[]).join("%"))}const ue=function(le){return le=le.replace(new RegExp(E(M),"g")," "),`{${ee(le.slice(1,le.length-1))}}`},X=function(le){if(le.startsWith("{")&&le.endsWith("}"))return j(le.slice(1,le.length-1))};let ae=g.replace(F,"").replace(new RegExp(`({[^}]*})+?|;([^${E(M)}]*)`,"g"),function(le,Se,Ne){return Se!==void 0?ue(Se):" "+ue(`{${Ne.slice(1)}}`)}).replace(new RegExp(E(M),"g")," ");const ce=/(\([^()]+\))+?/g;for(;ce.test(ae);)ae=ae.replace(ce,"");ae=ae.replace(/\d+\.(\.\.)?/g,""),ae=ae.replace(/\.\.\./g,""),ae=ae.replace(/\$\d+/g,"");let me=ae.trim().split(new RegExp(/\s+/));me=me.join(",").replace(/,,+/g,",").split(",");let Oe="";for(let le=0;le<me.length;le++){const Se=X(me[le]);if(Se!==void 0){this._comments[this.fen()]=Se;continue}const Ne=this._moveFromSan(me[le],k);if(Ne==null)if(f.indexOf(me[le])>-1)Oe=me[le];else return!1;else Oe="",this._makeMove(Ne)}return Oe&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",Oe),!0}_moveToSan(g,k){let M="";if(g.flags&i.KSIDE_CASTLE)M="O-O";else if(g.flags&i.QSIDE_CASTLE)M="O-O-O";else{if(g.piece!==t.PAWN){const E=B(g,k);M+=g.piece.toUpperCase()+E}g.flags&(i.CAPTURE|i.EP_CAPTURE)&&(g.piece===t.PAWN&&(M+=A(g.from)[0]),M+="x"),M+=A(g.to),g.promotion&&(M+="="+g.promotion.toUpperCase())}return this._makeMove(g),this.isCheck()&&(this.isCheckmate()?M+="#":M+="+"),this._undoMove(),M}_moveFromSan(g,k=!1){const M=re(g);let E=G(M),b=this._moves({legal:!0,piece:E});for(let j=0,ue=b.length;j<ue;j++)if(M===re(this._moveToSan(b[j],b)))return b[j];if(!k)return null;let q,h,F,Q,x,ee=!1;h=M.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),h?(q=h[1],F=h[2],Q=h[3],x=h[4],F.length==1&&(ee=!0)):(h=M.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),h&&(q=h[1],F=h[2],Q=h[3],x=h[4],F.length==1&&(ee=!0))),E=G(M),b=this._moves({legal:!0,piece:q||E});for(let j=0,ue=b.length;j<ue;j++)if(F&&Q){if((!q||q.toLowerCase()==b[j].piece)&&r[F]==b[j].from&&r[Q]==b[j].to&&(!x||x.toLowerCase()==b[j].promotion))return b[j];if(ee){const X=A(b[j].from);if((!q||q.toLowerCase()==b[j].piece)&&r[Q]==b[j].to&&(F==X[0]||F==X[1])&&(!x||x.toLowerCase()==b[j].promotion))return b[j]}}return null}ascii(){let g=`   +------------------------+
`;for(let k=r.a8;k<=r.h1;k++){if(w(k)===0&&(g+=" "+"87654321"[m(k)]+" |"),this._board[k]){const M=this._board[k].type,b=this._board[k].color===t.WHITE?M.toUpperCase():M.toLowerCase();g+=" "+b+" "}else g+=" . ";k+1&136&&(g+=`|
`,k+=8)}return g+=`   +------------------------+
`,g+="     a  b  c  d  e  f  g  h",g}perft(g){const k=this._moves({legal:!1});let M=0;const E=this._turn;for(let b=0,q=k.length;b<q;b++)this._makeMove(k[b]),this._isKingAttacked(E)||(g-1>0?M+=this.perft(g-1):M++),this._undoMove();return M}_makePretty(g){const{color:k,piece:M,from:E,to:b,flags:q,captured:h,promotion:F}=g;let Q="";for(const ee in i)i[ee]&q&&(Q+=s[ee]);const x={color:k,piece:M,from:A(E),to:A(b),san:this._moveToSan(g,this._moves({legal:!0})),flags:Q};return h&&(x.captured=h),F&&(x.promotion=F),x}turn(){return this._turn}board(){const g=[];let k=[];for(let M=r.a8;M<=r.h1;M++)this._board[M]==null?k.push(null):k.push({square:A(M),type:this._board[M].type,color:this._board[M].color}),M+1&136&&(g.push(k),k=[],M+=8);return g}squareColor(g){if(g in r){const k=r[g];return(m(k)+w(k))%2===0?"light":"dark"}return null}history({verbose:g=!1}={}){const k=[],M=[];for(;this._history.length>0;)k.push(this._undoMove());for(;;){const E=k.pop();if(!E)break;g?M.push(this._makePretty(E)):M.push(this._moveToSan(E,this._moves())),this._makeMove(E)}return M}_pruneComments(){const g=[],k={},M=E=>{E in this._comments&&(k[E]=this._comments[E])};for(;this._history.length>0;)g.push(this._undoMove());for(M(this.fen());;){const E=g.pop();if(!E)break;this._makeMove(E),M(this.fen())}this._comments=k}getComment(){return this._comments[this.fen()]}setComment(g){this._comments[this.fen()]=g.replace("{","[").replace("}","]")}deleteComment(){const g=this._comments[this.fen()];return delete this._comments[this.fen()],g}getComments(){return this._pruneComments(),Object.keys(this._comments).map(g=>({fen:g,comment:this._comments[g]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(g=>{const k=this._comments[g];return delete this._comments[g],{fen:g,comment:k}})}}t.Chess=de})(Sn);var he=(t=>(t[t.WHITE=0]="WHITE",t[t.BLACK=1]="BLACK",t[t.BOTH=2]="BOTH",t[t.SPECTATOR=3]="SPECTATOR",t[t.SERVER=4]="SERVER",t))(he||{}),J=(t=>(t[t.LEGAL=0]="LEGAL",t[t.LEGALHOVER=1]="LEGALHOVER",t[t.CHECK=2]="CHECK",t[t.MOVE=3]="MOVE",t[t.NEXTMOVE=4]="NEXTMOVE",t[t.PREMOVE=5]="PREMOVE",t[t.PREMOVEHOVER=6]="PREMOVEHOVER",t[t.SELECT=7]="SELECT",t))(J||{});const yt=t=>{if(typeof t=="string")return t;switch(t){case 0:case 1:return"legal";case 2:return"check";case 3:return"move";case 4:return"nextMove";case 5:case 6:return"preMove";case 7:return"select";default:return"check"}};class xn{constructor(e){D(this,"boardTheme");D(this,"piecesTheme");D(this,"mouseEvents");D(this,"flipped");D(this,"notation");D(this,"startFen");D(this,"size");D(this,"scale");D(this,"resizible");D(this,"defaultState",{boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:li,size:0,scale:70,resizible:!1});D(this,"setConfigSettings",e=>{e!==void 0&&(e.boardTheme!==void 0&&(this.boardTheme=e.boardTheme),e.piecesTheme!==void 0&&(this.piecesTheme=e.piecesTheme),e.mouseEvents!==void 0&&(this.mouseEvents=e.mouseEvents),e.flipped!==void 0&&(this.flipped=e.flipped),e.notation!==void 0&&(this.notation=e.notation),e.startFen!==void 0&&(this.startFen=e.startFen),e.resizible!==void 0&&(this.resizible=e.resizible))});D(this,"getConfig",()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...this.resizible!==this.defaultState.resizible&&{resizible:this.resizible}};if(Object.keys(e).length!==0)return e});this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.scale=this.defaultState.scale,this.resizible=this.defaultState.resizible,this.setConfigSettings(e)}}class $n{constructor(e){D(this,"enabled");D(this,"color");D(this,"defaultState",{enabled:!0,color:he.BOTH});D(this,"setConfigSettings",e=>{switch(e){case!0:this.enabled=!0,this.color=he.BOTH;break;case!1:this.enabled=!1;break;case he.WHITE:this.enabled=!0,this.color=he.WHITE;break;case he.BLACK:this.enabled=!0,this.color=he.BLACK;break}});D(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class ei{constructor(e){D(this,"enabled");D(this,"ghostPiece");D(this,"transition");D(this,"defaultState",{enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}});D(this,"setConfigSettings",e=>{var s,i,r,a;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(s=e==null?void 0:e.transition)!=null&&s.duration&&(this.transition.settings.duration=(i=e==null?void 0:e.transition)==null?void 0:i.duration),(r=e==null?void 0:e.transition)!=null&&r.easing&&(this.transition.settings.easing=(a=e==null?void 0:e.transition)==null?void 0:a.easing)))))});D(this,"getConfig",()=>{const e={},s={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(s.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(s.easing=this.transition.settings.easing),Object.keys(s).length!==0&&(e.transition=s)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class ti{constructor(e){D(this,"enabled");D(this,"selectedPiece");D(this,"defaultState",{enabled:!0,selectedPiece:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(this.enabled=e)});D(this,"getConfig",()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class si{constructor(e){D(this,"enabled");D(this,"whiteToMove");D(this,"moves");D(this,"settings");D(this,"preMoves");D(this,"lastMove");D(this,"checkSquare");D(this,"defaultState",{enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))});D(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled});this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class ni{constructor(e){D(this,"enabled");D(this,"settings");D(this,"defaultState",{enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))});D(this,"getConfig",()=>{const e={},s=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(s.forEach(i=>{this.settings[i]!==this.defaultState.settings[i]&&(e[i]=this.settings[i])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class ii{constructor(e){D(this,"enabled");D(this,"tools");D(this,"settings");D(this,"defaultState",{enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.knightLShape!==void 0&&(this.settings.knightLShape=e.knightLShape),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))});D(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(e.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class ri{constructor(e){D(this,"enabled");D(this,"settings");D(this,"defaultState",{enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))});D(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class ai{constructor(e){D(this,"getLegalMoves");D(this,"getPreMoves");D(this,"beforeMove");D(this,"afterMove");D(this,"getLastMove");D(this,"getInCheck");D(this,"getWhiteToMove");D(this,"defaultState",{getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(e.getLegalMoves&&(this.getLegalMoves=e.getLegalMoves),e.getPreMoves&&(this.getPreMoves=e.getPreMoves),e.beforeMove&&(this.beforeMove=e.beforeMove),e.afterMove&&(this.afterMove=e.afterMove),e.getLastMove&&(this.getLastMove=e.getLastMove),e.getInCheck&&(this.getInCheck=e.getInCheck),e.getWhiteToMove&&(this.getWhiteToMove=e.getWhiteToMove))});D(this,"getConfig",()=>{const e={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(e).length>0?e:void 0});this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const li="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class wn{constructor(e){D(this,"pieces");D(this,"markedSquares");D(this,"board");D(this,"movable");D(this,"draggable");D(this,"selectable");D(this,"legal");D(this,"callbacks");D(this,"highlight");D(this,"drawTools");D(this,"sounds");D(this,"getConfig",()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}));this.pieces=[],this.markedSquares=new Set,this.board=new xn(e==null?void 0:e.board),this.movable=new $n(e==null?void 0:e.movable),this.draggable=new ei(e==null?void 0:e.draggable),this.selectable=new ti(e==null?void 0:e.selectable),this.legal=new si(e==null?void 0:e.legal),this.callbacks=new ai(e==null?void 0:e.callbacks),this.highlight=new ni(e==null?void 0:e.highlight),this.drawTools=new ii(e==null?void 0:e.drawTools),this.sounds=new ri(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){!this.legalEnabled||(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){!this.preMovesEnabled||(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.preMovesEnabled?this.legal.preMoves.curMove:""}set currentPreMove(e){e.length<4&&e!==""||(this.preMovesEnabled?this.legal.preMoves.curMove=e:this.legal.preMoves.curMove="")}get selectableEnabled(){return this.selectable.enabled}get draggableEnabled(){return this.draggable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){!this.legalEnabled||(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4&&e!==""||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const oi=["a","b","c","d","e","f","g","h"],ui=["8","7","6","5","4","3","2","1"];function Tt(t){return{x:oi.indexOf(t[0]),y:ui.indexOf(t[1])}}function Zt(t){return t.charCodeAt(0)-97}function ci(t){return 8-parseInt(t,10)}const fi=t=>{let e="",s=0;for(let i=0;i<t.length;i++){i!==0&&(e+="/");for(let r=0;r<t[i].length;r++){const a=t[i][r];a!=null&&s===0?a[0]==="w"?e+=a[1]:e+=a[1].toLowerCase():a!=null&&s!==0?(e+=s.toString(),s=0,a[0]==="w"?e+=a[1]:e+=a[1].toLowerCase()):s++}s!==0&&(e+=s.toString(),s=0)}return e},di="8/8/8/8/8/8/8/8 w - - 0 1";class hi{constructor(e){D(this,"letters",{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7});D(this,"state");D(this,"changeLegalHoverIfNeeded",e=>{e.color!==J.LEGAL&&e.color!==J.PREMOVE||this.state.pieces.forEach(s=>{s.square===e.square&&(e.color=e.color===J.LEGAL?J.LEGALHOVER:J.PREMOVEHOVER)})});D(this,"highlightSquare",(e,s)=>{const i={square:e,color:s};this.state.markedSquares.forEach(r=>{r.square===e&&r.color!==J.MOVE&&r.color!==J.CHECK&&this.state.markedSquares.delete(r)}),this.changeLegalHoverIfNeeded(i),this.state.markedSquares.add(i)});D(this,"legalHover",e=>{this.state.markedSquares.forEach(s=>{if(s.square===e&&s.color===J.LEGAL)s.color=J.LEGALHOVER;else if(s.square!==e&&s.color===J.LEGALHOVER){let i=!1;this.state.pieces.forEach(r=>{r.square===s.square&&(i=!0)}),i||(s.color=J.LEGAL)}})});D(this,"preMoveHover",e=>{this.state.markedSquares.forEach(s=>{if(s.square===e&&s.color===J.PREMOVE)s.color=J.PREMOVEHOVER;else if(s.square!==e&&s.color===J.PREMOVEHOVER){let i=!1;this.state.pieces.forEach(r=>{r.square===s.square&&(i=!0)}),i||(s.color=J.PREMOVE)}})});D(this,"toggleSquareHighlight",(e,s)=>{const i={square:e,color:s};let r=!1;return this.state.markedSquares.forEach(a=>{a.square===e&&(this.state.markedSquares.delete(a),a.color===s&&(r=!0))}),this.changeLegalHoverIfNeeded(i),r?!0:(this.state.markedSquares.add(i),!1)});D(this,"getSelectedSquare",()=>{let e="";return this.state.markedSquares.forEach(s=>{s.color===J.SELECT&&(e=s.square)}),e});D(this,"clearSquare",(e,s)=>{e.length===2&&this.state.markedSquares.forEach(i=>{i.square===e&&(i.color===s||s===void 0)&&this.state.markedSquares.delete(i)})});D(this,"clearAllSquares",e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(s=>{s.color===e&&this.state.markedSquares.delete(s)})});D(this,"setPiece",(e,s)=>{if(this.notValidThing({square:e,piece:s}))return;const i=this.state.pieces.find(r=>r.square===e);i?i.name=s:this.state.pieces.push({square:e,name:s})});D(this,"removePiece",e=>{this.notValidThing({square:e})||this.state.pieces.forEach((s,i)=>{s.square===e&&this.state.pieces.splice(i,1)})});D(this,"clearAllPieces",()=>{this.state.pieces.length=0});D(this,"getGridCoordsFromSquare",e=>{if(this.notValidThing({square:e}))return{x:0,y:0};const s=e[0],i=e[1],r=this.state.board.flipped?Math.abs(this.letters[s]-7):this.letters[s],a=this.state.board.flipped?Math.abs(parseInt(i,10)-8):parseInt(i,10)-1;return typeof r!="number"||a<0||a>7?{x:0,y:0}:{x:r,y:a}});D(this,"makeMove",e=>{if(this.notValidThing({move:e}))return;let s=!1,i;const r=e.substring(0,2),a=e.substring(2,4),n=e.substring(4);this.state.pieces.forEach(l=>{l.square===a&&(i=l,this.removePiece(l.square))}),this.state.pieces.forEach(l=>{l.square===r&&(l.square=a,s=!0,n&&(l.name=l.name[0]+n.toUpperCase()))}),s?this.state.legal.lastMove=e:i&&this.state.pieces.push(i)});D(this,"getSquareFromIndices",(e,s)=>`${Object.keys(this.letters)[e]}${(s+1).toString()}`);D(this,"updatePiecesWithFen",e=>{const s=[...Array(8)].map(()=>Array(8).fill(null)),i=["1","2","3","4","5","6","7","8"];let r=0,a=0;for(let o=0;o<(e.includes(" ")?e.indexOf(" "):e.length);o++)if(e[o]==="/")r++,a=0;else if(!i.includes(e[o]))e[o]===e[o].toUpperCase()?s[r][a]=`w${e[o]}`:s[r][a]=`b${e[o].toUpperCase()}`,a++;else for(let u=0;u<parseInt(e[o],10);u++)s[r][a]=null,a++;const n=[],l=[];for(let o=0;o<s.length;++o)for(let u=0;u<s.length;++u){const c=s[o][u],d=this.getPieceFromSquare(this.getSquareFromIndices(u,Math.abs(o-7)));c&&!d&&n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),!c&&d&&l.push(d),c&&d&&c!==d.name&&(n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),l.push(d))}for(let o=0;o<l.length;o++)for(let u=0;u<n.length;u++)!n[u]||!l[o]||n[u].name===l[o].name&&(l[o].square=n[u].square,l.splice(o,1),o--,n.splice(u,1),u--);n.forEach(o=>{this.state.pieces.push(o)}),l.forEach(o=>{this.state.pieces.splice(this.state.pieces.indexOf(o),1)})});D(this,"notValidThing",e=>{const{square:s,piece:i,move:r}=e;return!!(s&&s.length!==2||i&&i.length!==2||r&&r.length!==4&&r.length!==5)});D(this,"setGhostPiece",e=>{this.state.draggable.ghostPiece.piece=e});D(this,"removeGhostPiece",()=>{this.state.draggable.ghostPiece.piece=void 0});D(this,"isCastling",e=>{switch(e){case"e1g1":case"e1c1":case"e8g8":case"e8c8":return!0;default:return!1}});D(this,"getRookMoveIfIsCastling",e=>{switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return}});D(this,"isEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s===void 0||s.name!=="wP"&&s.name!=="bP")});D(this,"getCapturedPawnSquareIfIsEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const s=this.getPieceFromSquare(e.substring(0,2));if(s===void 0||s.name!=="wP"&&s.name!=="bP")return;const i=this.getPieceFromSquare(`${e[2]}${(parseInt(e[3],10)+(s.name==="wP"?-1:1)).toString()}`);return i==null?void 0:i.square});D(this,"isCapture",e=>!!this.getPieceFromSquare(e.substring(2,4)));D(this,"isPromotion",e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s&&(s.name[1]!=="P"||s.name[0]==="w"&&e[3]==="1"||s.name[0]==="b"&&e[3]==="8"))});D(this,"callbackExists",e=>this.state.callbacks[e]!==void 0);D(this,"flipBoard",e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped});D(this,"setConfigSettings",e=>{this.state.setConfigSettings(e)});this.state=new wn(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const e=this.state.pieces.find(s=>s.name==="wK");if(e)return e.square}getBlackKingSquare(){const e=this.state.pieces.find(s=>s.name==="bK");if(e)return e.square}getShortFEN(){if(this.state.pieces.length===0)return di;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(s=>{e[ci(s.square[1])][Zt(s.square[0])]=s.name}),fi(e)}getPieceFromSquare(e){if(!e)return;let s;return this.state.pieces.forEach(i=>{i.square===e&&(s=i)}),s}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get draggableEnabled(){return this.state.draggableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}}const gi={[J.LEGAL]:"legalSQ cursor-pointer",[J.LEGALHOVER]:"legalSQ_hover cursor-pointer",[J.SELECT]:"selectedSQ",[J.MOVE]:"highlightMove",[J.NEXTMOVE]:"nextMoveSQ",[J.PREMOVE]:"preMoveSQ cursor-pointer",[J.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[J.CHECK]:"checkSQ"},bi={white:"#f0d9b5",black:"#b58863"},pi="standard.svg",mi={[J.LEGAL]:"legalSQ cursor-pointer",[J.LEGALHOVER]:"legalSQ_hover cursor-pointer",[J.SELECT]:"selectedSQ-darkBlue",[J.MOVE]:"highlightMove-darkBlue",[J.NEXTMOVE]:"nextMoveSQ",[J.PREMOVE]:"preMoveSQ cursor-pointer",[J.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[J.CHECK]:"checkSQ"},vi={white:"#94A3B8",black:"#475569"},_i="darkBlue.svg",He={squareStyles:{standard:gi,darkBlue:mi},colors:{standard:bi,darkBlue:vi},imageName:{standard:pi,darkBlue:_i}};function ms(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function vs(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function _s(t){let e,s=t[4][t[1]?Math.abs(t[8]-7):t[8]]+"",i,r;return{c(){e=H("span"),i=we(s),r=se(),this.h()},l(a){e=K(a,"SPAN",{"data-file":!0,style:!0,class:!0});var n=V(e);i=Ce(n,s),r=ne(n),n.forEach(P),this.h()},h(){v(e,"data-file",t[6]),Pe(e,"--font-size",t[3]+"px"),Pe(e,"color",t[8]%2===0?He.colors[t[0]].white:He.colors[t[0]].black),v(e,"class","svelte-1dkkugo")},m(a,n){Y(a,e,n),O(e,i),O(e,r)},p(a,n){n&2&&s!==(s=a[4][a[1]?Math.abs(a[8]-7):a[8]]+"")&&Nt(i,s),n&8&&Pe(e,"--font-size",a[3]+"px"),n&1&&Pe(e,"color",a[8]%2===0?He.colors[a[0]].white:He.colors[a[0]].black)},d(a){a&&P(e)}}}function Es(t){let e,s=(t[1]?t[8]+1:Math.abs(t[8]-8))+"",i,r,a;return{c(){e=H("span"),i=we(s),r=se(),this.h()},l(n){e=K(n,"SPAN",{"data-file":!0,style:!0,class:!0});var l=V(e);i=Ce(l,s),r=ne(l),l.forEach(P),this.h()},h(){v(e,"data-file",t[6]),v(e,"style",a="--font-size: "+t[3]+"px; color: "+(t[8]%2===0?He.colors[t[0]].white:He.colors[t[0]].black)+";"+(t[1]?" text-align: right;":"")),v(e,"class","svelte-1dkkugo")},m(n,l){Y(n,e,l),O(e,i),O(e,r)},p(n,l){l&2&&s!==(s=(n[1]?n[8]+1:Math.abs(n[8]-8))+"")&&Nt(i,s),l&11&&a!==(a="--font-size: "+n[3]+"px; color: "+(n[8]%2===0?He.colors[n[0]].white:He.colors[n[0]].black)+";"+(n[1]?" text-align: right;":""))&&v(e,"style",a)},d(n){n&&P(e)}}}function Ei(t){let e,s,i,r,a=t[4],n=[];for(let u=0;u<a.length;u+=1)n[u]=_s(vs(t,a,u));let l=t[4],o=[];for(let u=0;u<l.length;u+=1)o[u]=Es(ms(t,l,u));return{c(){e=H("div");for(let u=0;u<n.length;u+=1)n[u].c();s=se(),i=H("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=K(u,"DIV",{class:!0});var c=V(e);for(let p=0;p<n.length;p+=1)n[p].l(c);c.forEach(P),s=ne(u),i=K(u,"DIV",{class:!0});var d=V(i);for(let p=0;p<o.length;p+=1)o[p].l(d);d.forEach(P),this.h()},h(){v(e,"class","files noselect svelte-1dkkugo"),v(i,"class","ranks noselect svelte-1dkkugo"),it(()=>t[5].call(i))},m(u,c){Y(u,e,c);for(let d=0;d<n.length;d+=1)n[d].m(e,null);Y(u,s,c),Y(u,i,c);for(let d=0;d<o.length;d+=1)o[d].m(i,null);r=bn(i,t[5].bind(i))},p(u,[c]){if(c&27){a=u[4];let d;for(d=0;d<a.length;d+=1){const p=vs(u,a,d);n[d]?n[d].p(p,c):(n[d]=_s(p),n[d].c(),n[d].m(e,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=a.length}if(c&27){l=u[4];let d;for(d=0;d<l.length;d+=1){const p=ms(u,l,d);o[d]?o[d].p(p,c):(o[d]=Es(p),o[d].c(),o[d].m(i,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=l.length}},i:Te,o:Te,d(u){u&&P(e),rt(n,u),u&&P(s),u&&P(i),rt(o,u),r()}}}function Mi(t,e,s){let i,{theme:r}=e,{flipped:a}=e;const n=["a","b","c","d","e","f","g","h"];let l;function o(){l=this.clientHeight,s(2,l)}return t.$$set=u=>{"theme"in u&&s(0,r=u.theme),"flipped"in u&&s(1,a=u.flipped)},t.$$.update=()=>{t.$$.dirty&4&&s(3,i=Math.floor(Math.log(l/8)*3))},[r,a,l,i,n,o]}class ki extends Ie{constructor(e){super(),qe(this,e,Mi,Ei,Fe,{theme:0,flipped:1})}}function Si(t){const e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}function wi(t){return t*t*((1.70158+1)*t-1.70158)}function Ci(t){return--t*t*((1.70158+1)*t+1.70158)+1}function It(t){const e=.36363636363636365,s=8/11,i=9/10,r=4356/361,a=35442/1805,n=16061/1805,l=t*t;return t<e?7.5625*l:t<s?9.075*l-9.9*t+3.4:t<i?r*l-a*t+n:10.8*t*t-20.52*t+10.72}function Pi(t){return t<.5?.5*(1-It(1-t*2)):.5*It(t*2-1)+.5}function yi(t){return 1-It(1-t)}function Ai(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function Ti(t){return 1-Math.sqrt(1-t*t)}function Li(t){return Math.sqrt(1- --t*t)}function Oi(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Ii(t){return t*t*t}function as(t){const e=t-1;return e*e*e+1}function qi(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1}function Fi(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))}function Ni(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1}function Ri(t){return t===0||t===1?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-t*20)+1}function Di(t){return t===0?t:Math.pow(2,10*(t-1))}function Bi(t){return t===1?t:1-Math.pow(2,-10*t)}function Ui(t){return t/=.5,t<1?.5*t*t:(t--,-.5*(t*(t-2)-1))}function Hi(t){return t*t}function Ki(t){return-t*(t-2)}function zi(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1}function Vi(t){return Math.pow(t,4)}function Wi(t){return Math.pow(t-1,3)*(1-t)+1}function ji(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function Gi(t){return t*t*t*t*t}function Qi(t){return--t*t*t*t*t+1}function Xi(t){return-.5*(Math.cos(Math.PI*t)-1)}function Yi(t){const e=Math.cos(t*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function Zi(t){return Math.sin(t*Math.PI/2)}const qt=Object.freeze(Object.defineProperty({__proto__:null,backIn:wi,backInOut:Si,backOut:Ci,bounceIn:yi,bounceInOut:Pi,bounceOut:It,circIn:Ti,circInOut:Ai,circOut:Li,cubicIn:Ii,cubicInOut:Oi,cubicOut:as,elasticIn:Fi,elasticInOut:qi,elasticOut:Ni,expoIn:Di,expoInOut:Ri,expoOut:Bi,quadIn:Hi,quadInOut:Ui,quadOut:Ki,quartIn:Vi,quartInOut:zi,quartOut:Wi,quintIn:Gi,quintInOut:ji,quintOut:Qi,sineIn:Yi,sineInOut:Xi,sineOut:Zi,linear:pn},Symbol.toStringTag,{value:"Module"}));function Ms(t){return Object.prototype.toString.call(t)==="[object Date]"}function Jt(t,e){if(t===e||t!==t)return()=>t;const s=typeof t;if(s!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map((r,a)=>Jt(t[a],r));return r=>i.map(a=>a(r))}if(s==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Ms(t)&&Ms(e)){t=t.getTime(),e=e.getTime();const a=e-t;return n=>new Date(t+n*a)}const i=Object.keys(e),r={};return i.forEach(a=>{r[a]=Jt(t[a],e[a])}),a=>{const n={};return i.forEach(l=>{n[l]=r[l](a)}),n}}if(s==="number"){const i=e-t;return r=>t+r*i}throw new Error(`Cannot interpolate ${s} values`)}function Ji(t,e={}){const s=jn(t);let i,r=t;function a(n,l){if(t==null)return s.set(t=n),Promise.resolve();r=n;let o=i,u=!1,{delay:c=0,duration:d=400,easing:p=pn,interpolate:S=Jt}=Lt(Lt({},e),l);if(d===0)return o&&(o.abort(),o=null),s.set(t=r),Promise.resolve();const I=Dn()+c;let L;return i=Bn(C=>{if(C<I)return!0;u||(L=S(t,n),typeof d=="function"&&(d=d(t,n)),u=!0),o&&(o.abort(),o=null);const T=C-I;return T>d?(s.set(t=n),!1):(s.set(t=L(p(T/d))),!0)}),i.promise}return{set:a,update:(n,l)=>a(n(r,t),l),subscribe:s.subscribe}}function ks(t,e,s,i){if(e===0&&s===0)return t;const r=i?["a","b","c","d","e","f","g","h"].reverse():["a","b","c","d","e","f","g","h"],a=i?["8","7","6","5","4","3","2","1"].reverse():["8","7","6","5","4","3","2","1"],n=r[r.indexOf(t[0])+e],l=a[a.indexOf(t[1])+s];if(!(!n||!l))return`${n}${l}`}function Ss(t,e,s){const i=e*1.15,r=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=document.createElementNS("http://www.w3.org/2000/svg","circle");return r.setAttribute("width",(t.offsetWidth*i).toString()),r.setAttribute("height",(t.offsetHeight*i).toString()),r.style.position="absolute",r.style.zIndex="100",r.style.translate=`${s?"":"-"}${25*i/2}% -${25*i/2}%`,r.style.opacity="0.2",a.setAttribute("r",(t.offsetWidth*i/2).toString()),a.setAttribute("cx",(t.offsetWidth*i/2).toString()),a.setAttribute("cy",(t.offsetHeight*i/2).toString()),a.setAttribute("fill","black"),r.appendChild(a),r}function xi(t,e){let s;function i(h,F=1e3){let Q=!1;const x=()=>{s==null?Q=!1:(h(...s),s=null,setTimeout(x,F))};return(...ee)=>{if(Q){s=ee;return}h(...ee),Q=!0,setTimeout(x,F)}}let r,a,n,l,o,u,c,d,p=!1,S;const I=t.parentNode;let L,C=!1,{startSquare:T,boardFlipped:f,mouseEvents:m,canDrag:w,canSelect:y,canCapture:A,duration:N,easingFunc:W}=e;const{coords:B}=e;!w&&!y&&!A?t.style.removeProperty("cursor"):t.style.cursor="pointer";let R=cs(B).x,G=cs(B).y;const re=1.6;let de=Ss(t,re,f);t.draggable=!1;function $(h){const F=h.clientX-r,Q=h.clientY-a;if(r=h.clientX,a=h.clientY,o+=F,u+=Q,p||(Math.abs(o)>1||Math.abs(u)>1)&&(B.update(x=>({x:x.x+(r-t.offsetWidth/2-t.getBoundingClientRect().x)/t.clientWidth,y:h.pointerType==="touch"?x.y-(a-t.offsetHeight*1.5-t.getBoundingClientRect().y)/t.clientWidth:x.y-(a-t.offsetHeight/2-t.getBoundingClientRect().y)/t.clientWidth,scale:h.pointerType==="touch"?re:1}),{duration:N,easing:W}),p=!0,t.style.zIndex="30",t.style.cursor="grabbing",t.dispatchEvent(new CustomEvent("startMoving"))),!!p){if(h.pointerType==="touch"){const x=Math.floor((o+n)/t.offsetWidth),ee=Math.floor((u+l)/t.offsetHeight),j=ks(T,x,ee,f);if(j){if(j!==L){const ue=Tt(j);de.style.left=`${ue.x*12.5}%`,de.style.top=`${ue.y*12.5}%`,I.appendChild(de)}}else L&&(L=void 0)}B.update(x=>({x:x.x+F/t.clientWidth,y:x.y-Q/t.clientWidth,scale:h.pointerType==="touch"?re:1}),{duration:0}),t.dispatchEvent(new CustomEvent("moving",{detail:{x:r,y:a}}))}}const g=i($,10);function k(){const h=window.scrollX-c,F=window.scrollY-d;c=window.scrollX,d=window.scrollY,B.update(Q=>({x:Q.x+h,y:Q.y+F,scale:1}),{duration:0})}function M(){window.removeEventListener("pointermove",g),window.removeEventListener("pointerup",M),window.removeEventListener("pointercancel",M),document.body.removeEventListener("pointerleave",M),window.removeEventListener("scroll",k),s=null;const h=Math.floor((o+n)/t.offsetWidth),F=Math.floor((u+l)/t.offsetHeight),Q=ks(T,h,F,f);C=!1,t.dispatchEvent(new CustomEvent("dropped",{detail:Q})),B.update(()=>({x:R,y:G,scale:1}),{duration:N,easing:W}).then(()=>{C||t.dispatchEvent(new CustomEvent("animationEnded")),C||(t.style.zIndex="2")}),r=0,a=0,o=0,u=0,!w&&!y&&!A?t.style.removeProperty("cursor"):t.style.cursor="pointer",setTimeout(()=>{C||(t.style.zIndex="2")},N),p=!1,de.remove()}function E(h){if(h.button!==0||!h.isPrimary||!m)return;if(A){t.dispatchEvent(new CustomEvent("captured"));return}if((y||w)&&t.dispatchEvent(new CustomEvent("clicked")),!w){t.dispatchEvent(new CustomEvent("dropped",{detail:T}));return}R=f?7-Zt(T[0]):Zt(T[0]),G=f?8-parseInt(T[1],10):parseInt(T[1],10)-1,L=T;const F=h.target.getBoundingClientRect();h.pointerType==="touch"?(r=h.clientX,a=h.clientY,n=h.clientX-F.x,l=h.clientY-F.y):(r=h.clientX,a=h.clientY,n=h.offsetX,l=h.offsetY),o=0,u=0,c=window.scrollX,d=window.scrollY,C=!0,window.addEventListener("pointermove",g),window.addEventListener("pointerup",M),window.addEventListener("pointercancel",M),document.body.addEventListener("pointerleave",M),window.addEventListener("scroll",k)}function b(h){h.preventDefault()}function q(h){h.preventDefault()}return t.addEventListener("contextmenu",b),t.addEventListener("dragstart",q),t.addEventListener("pointerdown",E),{destroy(){t.removeEventListener("pointerdown",E),t.removeEventListener("contextmenu",b),t.removeEventListener("dragstart",q),window.clearTimeout(S)},update(h){T=h.startSquare,N=h.duration,W=h.easingFunc,(h.canDrag!==w||h.canSelect!==y||h.canCapture!==A)&&(!h.canDrag&&!h.canSelect&&!h.canCapture?t.style.removeProperty("cursor"):t.style.cursor="pointer"),h.canDrag!==w&&(w=h.canDrag),h.canSelect!==y&&(y=h.canSelect),h.canCapture!==A&&(A=h.canCapture),h.mouseEvents!==m&&(m=h.mouseEvents),f!==h.boardFlipped&&(de=Ss(t,re,h.boardFlipped)),f=h.boardFlipped}}}const ws=""+new URL("../../assets/wP-f78bae6c.svg",import.meta.url).href,$i=""+new URL("../../assets/wR-5eb92d73.svg",import.meta.url).href,er=""+new URL("../../assets/wN-a4c975a2.svg",import.meta.url).href,tr=""+new URL("../../assets/wB-1ff2f149.svg",import.meta.url).href,sr=""+new URL("../../assets/wQ-8568b485.svg",import.meta.url).href,nr=""+new URL("../../assets/wK-4cdf6dc9.svg",import.meta.url).href,ir=""+new URL("../../assets/bP-84e521e8.svg",import.meta.url).href,rr=""+new URL("../../assets/bR-e39efb08.svg",import.meta.url).href,ar=""+new URL("../../assets/bN-d3912d91.svg",import.meta.url).href,lr=""+new URL("../../assets/bB-c430b746.svg",import.meta.url).href,or=""+new URL("../../assets/bQ-c7b9a43e.svg",import.meta.url).href,ur=""+new URL("../../assets/bK-3500a2e6.svg",import.meta.url).href;function xt(t){switch(t){case"wP":return ws;case"wR":return $i;case"wN":return er;case"wB":return tr;case"wQ":return sr;case"wK":return nr;case"bP":return ir;case"bR":return rr;case"bN":return ar;case"bB":return lr;case"bQ":return or;case"bK":return ur;default:return ws}}function cr(t){let e,s,i,r,a;return{c(){e=H("img"),this.h()},l(n){e=K(n,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){Pe(e,"left",t[10].x*12.5+"%"),Pe(e,"bottom",t[10].y*12.5+"%"),Pe(e,"scale",t[10].scale),Pe(e,"z-Index",t[4]?0:t[9]),Pe(e,"opacity",t[4]?.3:1),v(e,"class","noselect svelte-1g241z"),ct(e.src,s=xt(t[2]))||v(e,"src",s),v(e,"alt",t[2])},m(n,l){var o,u,c;Y(n,e,l),r||(a=[ss(i=xi.call(null,e,{startSquare:t[1],mouseEvents:t[0],canDrag:t[14](t[8],t[6]),canSelect:t[15](t[8],t[5]),canCapture:t[16](t[7],t[8],t[5]),boardFlipped:t[3],duration:(o=t[6])!=null&&o.transition.enabled?t[6].transition.settings.duration:0,easingFunc:qt[(c=(u=t[6])==null?void 0:u.transition.settings.easing)!=null?c:"cubicInOut"],coords:t[12]})),fe(e,"dropped",t[13]),fe(e,"clicked",t[18]),fe(e,"startMoving",t[19]),fe(e,"animationEnded",t[20]),fe(e,"captured",t[21]),fe(e,"moving",t[22])],r=!0)},p(n,[l]){var o,u,c;l&1024&&Pe(e,"left",n[10].x*12.5+"%"),l&1024&&Pe(e,"bottom",n[10].y*12.5+"%"),l&1024&&Pe(e,"scale",n[10].scale),l&528&&Pe(e,"z-Index",n[4]?0:n[9]),l&16&&Pe(e,"opacity",n[4]?.3:1),l&4&&!ct(e.src,s=xt(n[2]))&&v(e,"src",s),l&4&&v(e,"alt",n[2]),i&&ns(i.update)&&l&491&&i.update.call(null,{startSquare:n[1],mouseEvents:n[0],canDrag:n[14](n[8],n[6]),canSelect:n[15](n[8],n[5]),canCapture:n[16](n[7],n[8],n[5]),boardFlipped:n[3],duration:(o=n[6])!=null&&o.transition.enabled?n[6].transition.settings.duration:0,easingFunc:qt[(c=(u=n[6])==null?void 0:u.transition.settings.easing)!=null?c:"cubicInOut"],coords:n[12]})},i:Te,o:Te,d(n){n&&P(e),r=!1,at(a)}}}function fr(t,e,s){var M,E;let i,r,{square:a}=e,{name:n}=e,{mouseEvents:l=!0}=e,{getGridCoordsFromSquare:o}=e,{flipped:u}=e,{isGhost:c=!1}=e;c&&(l=!1);let{selectableState:d=void 0}=e,{draggableState:p=void 0}=e,{legalState:S=void 0}=e,{movableState:I=void 0}=e,L=!1;const C=St();let T=(M=p==null?void 0:p.transition)!=null&&M.enabled?p.transition.settings.duration:0;const f=Ji({x:0,y:0,scale:1},{duration:T,easing:qt[(E=p==null?void 0:p.transition.settings.easing)!=null?E:"cubicInOut"]});Un(t,f,b=>s(10,r=b));let m=!1;const w=b=>b[0]==="w"?he.WHITE:he.BLACK,y=b=>{var h;const q=o(b);f.update(()=>({x:q.x,y:q.y,scale:1}),{duration:m?T:0,easing:qt[(h=p==null?void 0:p.transition.settings.easing)!=null?h:"cubicInOut"]}),m||(m=!0),T=p!=null&&p.transition.enabled?p.transition.settings.duration:0},A=b=>{T=0,b.detail||C("deselect"),a===b.detail?(!L&&B(I,d)?C("select"):C("deselect"),L=!L):L=!1,W(I,p)&&C("endDragging",a+b.detail),a!==b.detail&&b.detail&&C("move",a+b.detail)},N=b=>S!=null&&S.enabled?!!(S.preMoves.enabled&&w(n)===b.color||b.color===he.WHITE&&S.whiteToMove&&w(n)===he.WHITE||b.color===he.BLACK&&!S.whiteToMove&&w(n)===he.BLACK||b.color===he.BOTH&&(w(n)===he.WHITE&&S.whiteToMove||w(n)===he.BLACK&&!S.whiteToMove)):b.color===w(n)||b.color===he.BOTH,W=(b,q)=>!(b!=null&&b.enabled)||!(q!=null&&q.enabled)||!l?!1:N(b),B=(b,q)=>!(b!=null&&b.enabled)||!(q!=null&&q.enabled)||!l?!1:N(b),R=(b,q,h)=>{var F;return!(q!=null&&q.enabled)||!(h!=null&&h.enabled)||!l?!1:b!=null&&b.enabled?!!((d==null?void 0:d.selectedPiece)!==void 0&&((F=d==null?void 0:d.selectedPiece)==null?void 0:F.square)!==a&&(b.moves.includes(d.selectedPiece.square+a)||b.moves.includes(`${d.selectedPiece.square+a}q`))||(d==null?void 0:d.selectedPiece)!==void 0&&b.preMoves.enabled&&w(d==null?void 0:d.selectedPiece.name)===q.color&&(b.preMoves.moves.includes(d.selectedPiece.square+a)||b.preMoves.moves.includes(`${d.selectedPiece.square+a}q`))):!0},G=b=>b===void 0||b.name!==n||b.square!==a;function re(b){Ve.call(this,t,b)}function de(b){Ve.call(this,t,b)}function $(b){Ve.call(this,t,b)}function g(b){Ve.call(this,t,b)}const k=b=>{C("moving",b.detail)};return t.$$set=b=>{"square"in b&&s(1,a=b.square),"name"in b&&s(2,n=b.name),"mouseEvents"in b&&s(0,l=b.mouseEvents),"getGridCoordsFromSquare"in b&&s(17,o=b.getGridCoordsFromSquare),"flipped"in b&&s(3,u=b.flipped),"isGhost"in b&&s(4,c=b.isGhost),"selectableState"in b&&s(5,d=b.selectableState),"draggableState"in b&&s(6,p=b.draggableState),"legalState"in b&&s(7,S=b.legalState),"movableState"in b&&s(8,I=b.movableState)},t.$$.update=()=>{t.$$.dirty&32&&G(d==null?void 0:d.selectedPiece)&&(L=!1),t.$$.dirty&10&&y(a),t.$$.dirty&256&&s(9,i=typeof I=="boolean"?I?2:1:I!=null&&I.enabled?2:1)},[l,a,n,u,c,d,p,S,I,i,r,C,f,A,W,B,R,o,re,de,$,g,k]}class Cn extends Ie{constructor(e){super(),qe(this,e,fr,cr,Fe,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:17,flipped:3,isGhost:4,selectableState:5,draggableState:6,legalState:7,movableState:8})}}function dr(t){let e,s,i;return{c(){e=H("div"),this.h()},l(r){e=K(r,"DIV",{style:!0,class:!0}),V(e).forEach(P),this.h()},h(){v(e,"style",s="left: "+t[4]*12.5+"%; bottom: "+t[5]*12.5+"%;"+(t[3]?` border-${t[3]}-radius: inherit;`:"")),v(e,"class",i="noselect "+He.squareStyles[t[1]][t[0]]+(t[2]?"":" pointer-events-none")+" svelte-10vytug")},m(r,a){Y(r,e,a)},p(r,[a]){a&56&&s!==(s="left: "+r[4]*12.5+"%; bottom: "+r[5]*12.5+"%;"+(r[3]?` border-${r[3]}-radius: inherit;`:""))&&v(e,"style",s),a&7&&i!==(i="noselect "+He.squareStyles[r[1]][r[0]]+(r[2]?"":" pointer-events-none")+" svelte-10vytug")&&v(e,"class",i)},i:Te,o:Te,d(r){r&&P(e)}}}function hr(t,e,s){let{square:i}=e,{color:r}=e,{getGridCoordsFromSquare:a}=e,{flipped:n}=e,{theme:l}=e,{mouseEvents:o=!0}=e,{corner:u=""}=e,c,d;const p=()=>{const S=a(i);s(4,c=S.x),s(5,d=S.y)};return t.$$set=S=>{"square"in S&&s(6,i=S.square),"color"in S&&s(0,r=S.color),"getGridCoordsFromSquare"in S&&s(7,a=S.getGridCoordsFromSquare),"flipped"in S&&s(8,n=S.flipped),"theme"in S&&s(1,l=S.theme),"mouseEvents"in S&&s(2,o=S.mouseEvents),"corner"in S&&s(3,u=S.corner)},t.$$.update=()=>{t.$$.dirty&256&&p()},[r,l,o,u,c,d,i,a,n]}class gr extends Ie{constructor(e){super(),qe(this,e,hr,dr,Fe,{square:6,color:0,getGridCoordsFromSquare:7,flipped:8,theme:1,mouseEvents:2,corner:3})}}const br=["a","b","c","d","e","f","g","h"],pr=["8","7","6","5","4","3","2","1"];function mr(t){t.querySelectorAll("[fixed]").forEach(e=>e.remove())}function $t(t){return`${br[t.x]}${pr[t.y]}`}function Pn(t,e){return Math.abs((t.x-e.x)*(t.y-e.y))===2}function es(t,e){return`${$t(t)}${$t(e)}`}function vr(t,e){return!!(Pn(t,e)||Math.abs(t.x-e.x)===Math.abs(t.y-e.y)||t.x===e.x!=(t.y===e.y))}function yn(t,e,s,i,r,a){let n={x:-1,y:-1},l,o;Pn(e,s)&&i?(Math.abs(s.x-e.x)===2?n={x:s.x,y:e.y}:n={x:e.x,y:s.y},n.y-e.y<0?o=Math.PI+Math.atan((n.x-e.x)/(n.y-e.y)):o=Math.atan((n.x-e.x)/Math.abs(n.y-e.y)),l={x:s.x-Math.sign(s.x-n.x)*(n.x!==s.x?.4:0),y:s.y-Math.sign(s.y-n.y)*(n.y!==s.y?.4:0)}):(s.y-e.y<0?o=Math.PI+Math.atan((s.x-e.x)/(s.y-e.y)):o=Math.atan((s.x-e.x)/Math.abs(s.y-e.y)),l={x:s.x-Math.sin(o)*.4,y:s.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};t.setAttribute("points",`${u.x+.5},${u.y+.5} ${n.x!==-1&&n.y!==-1&&i?`${n.x+.5},${n.y+.5} `:""}${l.x+.5},${l.y+.5}`),t.setAttribute("data-sqID",`${es(e,s)}`),a!==void 0&&t.setAttribute("opacity",`${a}`),r!==void 0&&(t.setAttribute("marker-start",`url(#start-${r[0]})`),t.setAttribute("marker-end",`url(#end-${r[0]})`),t.setAttribute("stroke",r))}function At(t,e,s,i,r,a){if(!(e===void 0||s.x===-1&&s.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),i?e.setAttribute("stroke","red"):r?e.setAttribute("stroke","orange"):a?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),t.querySelectorAll(`\u0441ircle[cx="${s.x+.5}"][cy="${s.y+.5}"]`).forEach(n=>{e!==void 0&&n!==e&&(n.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const n=i?"red":r?"orange":a?"blue":"green";e.setAttribute("stroke",`${n}`),e.setAttribute("marker-start",`url(#start-${n[0]})`),e.setAttribute("marker-end",`url(#end-${n[0]})`),t.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(l=>{e instanceof SVGPolylineElement&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function An(t,e,s,i,r){const a=document.createElementNS("http://www.w3.org/2000/svg","polyline");return yn(a,t,e,s,i,r),a.setAttribute("fill","none"),a.setAttribute("stroke-width","0.25"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("opacity",r!==void 0?`${r}`:"0.4"),a.setAttribute("marker-start",i?`url(#start-${i[0]})`:"url(#start-g)"),a.setAttribute("marker-end",i?`url(#end-${i[0]})`:"url(#end-g)"),a.setAttribute("stroke",i||"green"),a}function ts(t,e,s){const i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",`${t.x+.5}`),i.setAttribute("cy",`${t.y+.5}`),i.setAttribute("r","0.465"),i.setAttribute("opacity",s?`${s}`:"0.4"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.07"),i.setAttribute("stroke",e!=null?e:"green"),i}function _r(t,e,s){e.forEach(i=>{if(i.type==="circle"){const r=Tt(i.square),a=ts(r,i.color,i.opacity);t.appendChild(a)}else if(i.type==="arrow"){const r=An(Tt(i.from),Tt(i.to),s,i.color,i.opacity);r.setAttribute("fixed",""),t.appendChild(r)}})}function Cs(t){t.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("fixed")||e.remove()})}function Er(t,e){let{svg:s,flipped:i,enabled:r,settings:a}=e,n=!1,l={x:-1,y:-1},o,u;function c(C,T){const f=t.getBoundingClientRect(),m=i?f.width-(C-f.left):C-f.left,w=i?f.height-(T-f.top):T-f.top;return{x:Math.max(0,Math.min(7,Math.floor(m/(t.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(w/(t.clientHeight/8))))}}function d(C){if(u===void 0||l.x===-1&&l.y===-1)return;const T=c(C.clientX,C.clientY);a.onlyChessMove&&!vr(l,T)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),l.x===T.x&&l.y===T.y?(es(l,T),u instanceof SVGPolylineElement&&(u.remove(),u=ts(T)),At(s,u,l,C.shiftKey,C.ctrlKey,C.altKey),s.appendChild(u),s.querySelectorAll(`circle[cx="${l.x+.5}"][cy="${l.y+.5}"]`).forEach(f=>{f!==u&&(o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,s.querySelectorAll(`polyline[data-sqID="${es(l,T)}"]`).forEach(f=>{u===void 0||l.x===-1&&l.y===-1||f===u||(o=f,f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=An(l,T,a.knightLShape),At(s,u,l,C.shiftKey,C.ctrlKey,C.altKey),s.appendChild(u)):u instanceof SVGPolylineElement&&yn(u,l,T,a.knightLShape)))}function p(C){C.preventDefault()}function S(C){C.preventDefault(),At(s,u,l,C.shiftKey,C.ctrlKey,C.altKey)}function I(C){if(C.button===0)n=!1;else if(C.button===2){if(l.x===-1&&l.y===-1)return;s.querySelectorAll("[remove]").forEach(T=>{T.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:$t(l),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,l={x:-1,y:-1},n=!1,window.removeEventListener("mousemove",d),window.removeEventListener("keydown",S),window.removeEventListener("keyup",S),window.removeEventListener("contextmenu",p)}window.removeEventListener("mouseup",I)}function L(C){if(C.button===0)n=!0,Cs(s),window.addEventListener("mouseup",I);else if(C.button===2&&!n){const T=c(C.clientX,C.clientY);l=T,u=ts(T),At(s,u,l,C.shiftKey,C.ctrlKey,C.altKey),o=void 0,s.querySelectorAll(`circle[cx="${T.x+.5}"][cy="${T.y+.5}"]`).forEach(f=>{o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&s.appendChild(u),window.addEventListener("mousemove",d),window.addEventListener("mouseup",I),window.addEventListener("keydown",S),window.addEventListener("keyup",S),window.addEventListener("contextmenu",p)}}return r&&t.addEventListener("mousedown",L),{update(C){C.svg!==s&&(s=C.svg),C.enabled!==r&&(r=C.enabled,r?t.addEventListener("mousedown",L):(Cs(s),t.removeEventListener("mousedown",L))),a=C.settings,i=C.flipped}}}function Ps(t,e,s){const i=t.slice();return i[8]=e[s],i}function ys(t){let e,s,i,r;return{c(){e=Re("marker"),s=Re("path"),i=Re("marker"),r=Re("path"),this.h()},l(a){e=De(a,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var n=V(e);s=De(n,"path",{fill:!0,d:!0}),V(s).forEach(P),n.forEach(P),i=De(a,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var l=V(i);r=De(l,"path",{fill:!0,d:!0}),V(r).forEach(P),l.forEach(P),this.h()},h(){v(s,"fill",t[8]),v(s,"d","M 0 5 v 10 c 0 2.8 2.2 5 5 5 L 6 20 V 0 L 5 0 C 2.2 0 0 2.2 0 5 z"),v(e,"id","start-"+t[8][0]),v(e,"viewBox","0 0 5 20"),v(e,"refX","4"),v(e,"refY","10"),v(e,"markerUnits","strokeWidth"),v(e,"markerWidth","0.5"),v(e,"markerHeight","1"),v(e,"orient","auto"),v(r,"fill",t[8]),v(r,"d","M 9.5 9.5 l -8.7 -5 C 0.5 4.3 0 4.6 0 5 v 10 c 0 0.4 0.5 0.7 0.9 0.5 l 8.7 -5 C 9.9 10.3 9.9 9.7 9.5 9.5 z"),v(i,"id","end-"+t[8][0]),v(i,"viewBox","0 0 10 20"),v(i,"refX","0.2"),v(i,"refY","10"),v(i,"markerUnits","strokeWidth"),v(i,"orient","auto"),v(i,"fill","currentColor")},m(a,n){Y(a,e,n),O(e,s),Y(a,i,n),O(i,r)},p:Te,d(a){a&&P(e),a&&P(i)}}}function Mr(t){let e,s,i,r=t[2],a=[];for(let n=0;n<r.length;n+=1)a[n]=ys(Ps(t,r,n));return{c(){e=Re("svg"),s=Re("defs");for(let n=0;n<a.length;n+=1)a[n].c();i=Re("g"),this.h()},l(n){e=De(n,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var l=V(e);s=De(l,"defs",{});var o=V(s);for(let u=0;u<a.length;u+=1)a[u].l(o);o.forEach(P),i=De(l,"g",{}),V(i).forEach(P),l.forEach(P),this.h()},h(){v(e,"xmlns","http://www.w3.org/2000/svg"),Pe(e,"transform","rotate("+(t[1]?"180deg":"0deg")+")"),v(e,"viewBox","0 0 8 8"),v(e,"class","svelte-19gv2n4")},m(n,l){Y(n,e,l),O(e,s);for(let o=0;o<a.length;o+=1)a[o].m(s,null);O(e,i),t[5](i)},p(n,[l]){if(l&4){r=n[2];let o;for(o=0;o<r.length;o+=1){const u=Ps(n,r,o);a[o]?a[o].p(u,l):(a[o]=ys(u),a[o].c(),a[o].m(s,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=r.length}l&2&&Pe(e,"transform","rotate("+(n[1]?"180deg":"0deg")+")")},i:Te,o:Te,d(n){n&&P(e),rt(a,n),t[5](null)}}}function kr(t,e,s){let{flipped:i=!1}=e,{svg:r}=e,{knightLShape:a=!1}=e,{tools:n=[]}=e,l=!1;function o(d){!l||(mr(r),_r(r,d,a))}is(()=>{l=!0,o(n)});const u=["green","red","blue","orange"];function c(d){oe[d?"unshift":"push"](()=>{r=d,s(0,r)})}return t.$$set=d=>{"flipped"in d&&s(1,i=d.flipped),"svg"in d&&s(0,r=d.svg),"knightLShape"in d&&s(3,a=d.knightLShape),"tools"in d&&s(4,n=d.tools)},t.$$.update=()=>{t.$$.dirty&16&&o(n)},[r,i,u,a,n,c]}class Sr extends Ie{constructor(e){super(),qe(this,e,kr,Mr,Fe,{flipped:1,svg:0,knightLShape:3,tools:4})}}function As(t,{delay:e=0,duration:s=400,easing:i=as,x:r=0,y:a=0,opacity:n=0}={}){const l=getComputedStyle(t),o=+l.opacity,u=l.transform==="none"?"":l.transform,c=o*(1-n);return{delay:e,duration:s,easing:i,css:(d,p)=>`
			transform: ${u} translate(${(1-d)*r}px, ${(1-d)*a}px);
			opacity: ${o-c*p}`}}function Ft(t,{delay:e=0,duration:s=400,easing:i=as}={}){const r=getComputedStyle(t),a=+r.opacity,n=parseFloat(r.height),l=parseFloat(r.paddingTop),o=parseFloat(r.paddingBottom),u=parseFloat(r.marginTop),c=parseFloat(r.marginBottom),d=parseFloat(r.borderTopWidth),p=parseFloat(r.borderBottomWidth);return{delay:e,duration:s,easing:i,css:S=>`overflow: hidden;opacity: ${Math.min(S*20,1)*a};height: ${S*n}px;padding-top: ${S*l}px;padding-bottom: ${S*o}px;margin-top: ${S*u}px;margin-bottom: ${S*c}px;border-top-width: ${S*d}px;border-bottom-width: ${S*p}px;`}}function wr(t){let e,s,i,r,a,n;return{c(){e=H("button"),s=H("img"),this.h()},l(l){e=K(l,"BUTTON",{});var o=V(e);s=K(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(P),this.h()},h(){ct(s.src,i=t[1])||v(s,"src",i),v(s,"alt",r="Promotion to "+t[0].toUpperCase()),v(s,"class","svelte-17pqsbb")},m(l,o){Y(l,e,o),O(e,s),a||(n=fe(e,"click",t[2]),a=!0)},p(l,[o]){o&1&&r!==(r="Promotion to "+l[0].toUpperCase())&&v(s,"alt",r)},i:Te,o:Te,d(l){l&&P(e),a=!1,n()}}}function Cr(t,e,s){let{piece:i}=e,{isWhite:r}=e,{showModal:a}=e;const n=St(),l=(r?"w":"b")+i.toUpperCase(),o=xt(l),u=()=>{n("newPromotion",i),s(3,a=!1)};return t.$$set=c=>{"piece"in c&&s(0,i=c.piece),"isWhite"in c&&s(4,r=c.isWhite),"showModal"in c&&s(3,a=c.showModal)},[i,o,u,a,r]}class Pr extends Ie{constructor(e){super(),qe(this,e,Cr,wr,Fe,{piece:0,isWhite:4,showModal:3})}}function Ts(t,e,s){const i=t.slice();return i[7]=e[s],i}function Ls(t){let e,s,i,r,a,n,l=["q","r","b","n"],o=[];for(let c=0;c<4;c+=1)o[c]=Os(Ts(t,l,c));const u=c=>te(o[c],1,1,()=>{o[c]=null});return{c(){e=H("div"),s=H("div");for(let c=0;c<4;c+=1)o[c].c();this.h()},l(c){e=K(c,"DIV",{class:!0});var d=V(e);s=K(d,"DIV",{class:!0});var p=V(s);for(let S=0;S<4;S+=1)o[S].l(p);p.forEach(P),d.forEach(P),this.h()},h(){v(s,"class","modal-content svelte-9nlhge"),v(e,"class",a="modal "+t[0]+" svelte-9nlhge")},m(c,d){Y(c,e,d),O(e,s);for(let p=0;p<4;p+=1)o[p].m(s,null);n=!0},p(c,d){if(d&6){l=["q","r","b","n"];let p;for(p=0;p<4;p+=1){const S=Ts(c,l,p);o[p]?(o[p].p(S,d),Z(o[p],1)):(o[p]=Os(S),o[p].c(),Z(o[p],1),o[p].m(s,null))}for(Be(),p=4;p<4;p+=1)u(p);Ue()}(!n||d&1&&a!==(a="modal "+c[0]+" svelte-9nlhge"))&&v(e,"class",a)},i(c){if(!n){for(let d=0;d<4;d+=1)Z(o[d]);it(()=>{r&&r.end(1),i=Hn(s,As,{x:100,duration:300}),i.start()}),n=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<4;d+=1)te(o[d]);i&&i.invalidate(),r=Kn(s,As,{x:-200,duration:100}),n=!1},d(c){c&&P(e),rt(o,c),c&&r&&r.end()}}}function Os(t){let e,s,i,r;function a(o){t[4](o)}function n(o){t[5](o)}let l={piece:t[7]};return t[2]!==void 0&&(l.isWhite=t[2]),t[1]!==void 0&&(l.showModal=t[1]),e=new Pr({props:l}),oe.push(()=>be(e,"isWhite",a)),oe.push(()=>be(e,"showModal",n)),e.$on("newPromotion",t[6]),{c(){_e(e.$$.fragment)},l(o){Ee(e.$$.fragment,o)},m(o,u){Me(e,o,u),r=!0},p(o,u){const c={};!s&&u&4&&(s=!0,c.isWhite=o[2],pe(()=>s=!1)),!i&&u&2&&(i=!0,c.showModal=o[1],pe(()=>i=!1)),e.$set(c)},i(o){r||(Z(e.$$.fragment,o),r=!0)},o(o){te(e.$$.fragment,o),r=!1},d(o){ke(e,o)}}}function yr(t){let e,s,i=t[1]&&Ls(t);return{c(){i&&i.c(),e=Le()},l(r){i&&i.l(r),e=Le()},m(r,a){i&&i.m(r,a),Y(r,e,a),s=!0},p(r,[a]){r[1]?i?(i.p(r,a),a&2&&Z(i,1)):(i=Ls(r),i.c(),Z(i,1),i.m(e.parentNode,e)):i&&(Be(),te(i,1,1,()=>{i=null}),Ue())},i(r){s||(Z(i),s=!0)},o(r){te(i),s=!1},d(r){i&&i.d(r),r&&P(e)}}}function Ar(t,e,s){let i=!1,r,{className:a=""}=e;function n(c){s(1,i=!0),c?s(2,r=!0):s(2,r=!1)}function l(c){r=c,s(2,r)}function o(c){i=c,s(1,i)}function u(c){Ve.call(this,t,c)}return t.$$set=c=>{"className"in c&&s(0,a=c.className)},[a,i,r,n,l,o,u]}class Tr extends Ie{constructor(e){super(),qe(this,e,Ar,yr,Fe,{className:0,openPromotionModal:3})}get openPromotionModal(){return this.$$.ctx[3]}}const Lr=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,Or=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,Ir=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,qr=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function Is(t){let e,s,i,r;return{c(){e=H("audio"),s=H("track"),i=H("source"),this.h()},l(a){e=K(a,"AUDIO",{preload:!0});var n=V(e);s=K(n,"TRACK",{kind:!0}),i=K(n,"SOURCE",{src:!0}),n.forEach(P),this.h()},h(){v(s,"kind","captions"),ct(i.src,r=Lr)||v(i,"src",r),v(e,"preload","auto")},m(a,n){Y(a,e,n),O(e,s),O(e,i),t[3](e)},p:Te,d(a){a&&P(e),t[3](null)}}}function qs(t){let e,s,i,r;return{c(){e=H("audio"),s=H("track"),i=H("source"),this.h()},l(a){e=K(a,"AUDIO",{preload:!0});var n=V(e);s=K(n,"TRACK",{kind:!0}),i=K(n,"SOURCE",{src:!0}),n.forEach(P),this.h()},h(){v(s,"kind","captions"),ct(i.src,r=Or)||v(i,"src",r),v(e,"preload","auto")},m(a,n){Y(a,e,n),O(e,s),O(e,i),t[4](e)},p:Te,d(a){a&&P(e),t[4](null)}}}function Fs(t){let e,s,i,r;return{c(){e=H("audio"),s=H("track"),i=H("source"),this.h()},l(a){e=K(a,"AUDIO",{preload:!0});var n=V(e);s=K(n,"TRACK",{kind:!0}),i=K(n,"SOURCE",{src:!0}),n.forEach(P),this.h()},h(){v(s,"kind","captions"),ct(i.src,r=Ir)||v(i,"src",r),v(e,"preload","auto")},m(a,n){Y(a,e,n),O(e,s),O(e,i),t[5](e)},p:Te,d(a){a&&P(e),t[5](null)}}}function Ns(t){let e,s,i,r;return{c(){e=H("audio"),s=H("track"),i=H("source"),this.h()},l(a){e=K(a,"AUDIO",{preload:!0});var n=V(e);s=K(n,"TRACK",{kind:!0}),i=K(n,"SOURCE",{src:!0}),n.forEach(P),this.h()},h(){v(s,"kind","captions"),ct(i.src,r=qr)||v(i,"src",r),v(e,"preload","auto")},m(a,n){Y(a,e,n),O(e,s),O(e,i),t[6](e)},p:Te,d(a){a&&P(e),t[6](null)}}}function Fr(t){let e,s,i,r,a=t[0].MOVE&&Is(t),n=t[0].CAPTURE&&qs(t),l=t[0].CASTLE&&Fs(t),o=t[0].UNDO&&Ns(t);return{c(){a&&a.c(),e=se(),n&&n.c(),s=se(),l&&l.c(),i=se(),o&&o.c(),r=Le()},l(u){a&&a.l(u),e=ne(u),n&&n.l(u),s=ne(u),l&&l.l(u),i=ne(u),o&&o.l(u),r=Le()},m(u,c){a&&a.m(u,c),Y(u,e,c),n&&n.m(u,c),Y(u,s,c),l&&l.m(u,c),Y(u,i,c),o&&o.m(u,c),Y(u,r,c)},p(u,[c]){u[0].MOVE?a?a.p(u,c):(a=Is(u),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),u[0].CAPTURE?n?n.p(u,c):(n=qs(u),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null),u[0].CASTLE?l?l.p(u,c):(l=Fs(u),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),u[0].UNDO?o?o.p(u,c):(o=Ns(u),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i:Te,o:Te,d(u){a&&a.d(u),u&&P(e),n&&n.d(u),u&&P(s),l&&l.d(u),u&&P(i),o&&o.d(u),u&&P(r)}}}function Nr(t,e,s){let{settings:i}=e;const r={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},a=()=>{r.CASTLE&&(r.CASTLE.pause(),s(1,r.CASTLE.currentTime=0,r)),r.MOVE&&(r.MOVE.pause(),s(1,r.MOVE.currentTime=0,r)),r.CAPTURE&&(r.CAPTURE.pause(),s(1,r.CAPTURE.currentTime=0,r)),r.UNDO&&(r.UNDO.pause(),s(1,r.UNDO.currentTime=0,r))},n=p=>p===void 0||i[p];function l(p){switch(a(),p){case"MOVE":r.MOVE&&n("MOVE")&&r.MOVE.play();break;case"CAPTURE":r.CAPTURE&&n("CAPTURE")?r.CAPTURE.play():r.MOVE&&n("MOVE")&&r.MOVE.play();break;case"CASTLE":r.CASTLE&&n("CASTLE")?r.CASTLE.play():r.MOVE&&n("MOVE")&&r.MOVE.play();break;case"UNDO":r.UNDO&&n("UNDO")?(s(1,r.UNDO.volume=.3,r),r.UNDO.play()):r.MOVE&&n("MOVE")&&r.MOVE.play();break}}function o(p){oe[p?"unshift":"push"](()=>{r.MOVE=p,s(1,r)})}function u(p){oe[p?"unshift":"push"](()=>{r.CAPTURE=p,s(1,r)})}function c(p){oe[p?"unshift":"push"](()=>{r.CASTLE=p,s(1,r)})}function d(p){oe[p?"unshift":"push"](()=>{r.UNDO=p,s(1,r)})}return t.$$set=p=>{"settings"in p&&s(0,i=p.settings)},[i,r,l,o,u,c,d]}class Rr extends Ie{constructor(e){super(),qe(this,e,Nr,Fr,Fe,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Rs=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,Ds=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function Dr(t,e){let{mouseEvents:s}=e,i=e.curScale,r,a,n;function l(c){c.stopPropagation(),t.dispatchEvent(new CustomEvent("resizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-r)/3)),Math.max(0,Math.min(100,n+(c.pageY-a)/3))))}}))}function o(c){c.stopPropagation(),t.dispatchEvent(new CustomEvent("endResizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-r)/3)),Math.max(0,Math.min(100,n+(c.pageY-a)/3))))}})),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",o)}function u(c){!s||(c.stopPropagation(),c.button===0&&(r=c.pageX,a=c.pageY,n=i,window.addEventListener("pointermove",l),window.addEventListener("pointerup",o)))}return t.addEventListener("pointerdown",u),{update(c){i=c.curScale,s!==c.mouseEvents&&(s=c.mouseEvents)},destroy(){t.removeEventListener("mousedown",u)}}}function Br(t){let e,s,i,r,a,n,l;return{c(){e=H("div"),s=Re("svg"),i=Re("path"),this.h()},l(o){e=K(o,"DIV",{style:!0,class:!0});var u=V(e);s=De(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var c=V(s);i=De(c,"path",{d:!0}),V(i).forEach(P),c.forEach(P),u.forEach(P),this.h()},h(){v(i,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),v(s,"xmlns","http://www.w3.org/2000/svg"),v(s,"viewBox","0 0 16 16"),v(s,"fill","currentColor"),Pe(e,"color",He.colors[t[0].state.board.boardTheme].black),v(e,"class",r=fs(t[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")},m(o,u){Y(o,e,u),O(e,s),O(s,i),n||(l=[fe(e,"pointerdown",mn(t[3])),ss(a=Dr.call(null,e,{mouseEvents:t[1],curScale:t[0].state.board.scale})),fe(e,"resizing",t[4]),fe(e,"endResizing",t[5])],n=!0)},p(o,[u]){u&1&&Pe(e,"color",He.colors[o[0].state.board.boardTheme].black),u&2&&r!==(r=fs(o[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")&&v(e,"class",r),a&&ns(a.update)&&u&3&&a.update.call(null,{mouseEvents:o[1],curScale:o[0].state.board.scale})},i:Te,o:Te,d(o){o&&P(e),n=!1,at(l)}}}function Ur(t,e,s){const i=St();let{chessboard:r}=e,{mouseEvents:a=!0}=e;function n(u){Ve.call(this,t,u)}const l=u=>i("resizing",u.detail.scale),o=u=>i("endResizing",u.detail.scale);return t.$$set=u=>{"chessboard"in u&&s(0,r=u.chessboard),"mouseEvents"in u&&s(1,a=u.mouseEvents)},[r,a,i,n,l,o]}class Hr extends Ie{constructor(e){super(),qe(this,e,Ur,Br,Fe,{chessboard:0,mouseEvents:1})}}function Bs(t,e,s){const i=t.slice();return i[82]=e[s],i}function Us(t,e,s){const i=t.slice();return i[85]=e[s],i}function Hs(t){let e=[],s=new Map,i,r,a=t[6].state.pieces;const n=l=>l[85];for(let l=0;l<a.length;l+=1){let o=Us(t,a,l),u=n(o);s.set(u,e[l]=Ks(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Le()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Le()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Y(l,i,o),r=!0},p(l,o){o[0]&452684&&(a=l[6].state.pieces,Be(),e=vn(e,o,n,1,l,a,s,i.parentNode,_n,Ks,i,Us),Ue())},i(l){if(!r){for(let o=0;o<a.length;o+=1)Z(e[o]);r=!0}},o(l){for(let o=0;o<e.length;o+=1)te(e[o]);r=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&P(i)}}}function Ks(t,e){let s,i,r;function a(){return e[57](e[85])}function n(){return e[58](e[85])}function l(...c){return e[59](e[85],...c)}function o(){return e[61](e[85])}function u(){return e[63](e[85])}return i=new Cn({props:{square:e[85].square,name:e[85].name,mouseEvents:e[6].state.board.mouseEvents,legalState:e[6].state.legal,draggableState:e[6].state.draggable,selectableState:e[6].state.selectable,movableState:e[6].state.movable,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped}}),i.$on("move",e[13]),i.$on("clicked",a),i.$on("startMoving",n),i.$on("moving",l),i.$on("endDragging",e[60]),i.$on("select",o),i.$on("deselect",e[62]),i.$on("captured",u),{key:t,first:null,c(){s=Le(),_e(i.$$.fragment),this.h()},l(c){s=Le(),Ee(i.$$.fragment,c),this.h()},h(){this.first=s},m(c,d){Y(c,s,d),Me(i,c,d),r=!0},p(c,d){e=c;const p={};d[0]&64&&(p.square=e[85].square),d[0]&64&&(p.name=e[85].name),d[0]&64&&(p.mouseEvents=e[6].state.board.mouseEvents),d[0]&64&&(p.legalState=e[6].state.legal),d[0]&64&&(p.draggableState=e[6].state.draggable),d[0]&64&&(p.selectableState=e[6].state.selectable),d[0]&64&&(p.movableState=e[6].state.movable),d[0]&64&&(p.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),d[0]&64&&(p.flipped=e[6].flipped),i.$set(p)},i(c){r||(Z(i.$$.fragment,c),r=!0)},o(c){te(i.$$.fragment,c),r=!1},d(c){c&&P(s),ke(i,c)}}}function zs(t){let e,s;return e=new Cn({props:{isGhost:!0,square:t[6].ghostPiece.square,name:t[6].ghostPiece.name,getGridCoordsFromSquare:t[6].getGridCoordsFromSquare,flipped:t[6].flipped}}),{c(){_e(e.$$.fragment)},l(i){Ee(e.$$.fragment,i)},m(i,r){Me(e,i,r),s=!0},p(i,r){const a={};r[0]&64&&(a.square=i[6].ghostPiece.square),r[0]&64&&(a.name=i[6].ghostPiece.name),r[0]&64&&(a.getGridCoordsFromSquare=i[6].getGridCoordsFromSquare),r[0]&64&&(a.flipped=i[6].flipped),e.$set(a)},i(i){s||(Z(e.$$.fragment,i),s=!0)},o(i){te(e.$$.fragment,i),s=!1},d(i){ke(e,i)}}}function Vs(t){let e=[],s=new Map,i,r,a=[...t[6].state.markedSquares];const n=l=>l[82];for(let l=0;l<a.length;l+=1){let o=Bs(t,a,l),u=n(o);s.set(u,e[l]=Ws(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Le()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Le()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Y(l,i,o),r=!0},p(l,o){o[0]&66&&(a=[...l[6].state.markedSquares],Be(),e=vn(e,o,n,1,l,a,s,i.parentNode,_n,Ws,i,Bs),Ue())},i(l){if(!r){for(let o=0;o<a.length;o+=1)Z(e[o]);r=!0}},o(l){for(let o=0;o<e.length;o+=1)te(e[o]);r=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&P(i)}}}function Ws(t,e){let s,i,r;return i=new gr({props:{theme:e[6].state.board.boardTheme,square:e[82].square,color:e[82].color,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped,mouseEvents:e[6].state.board.mouseEvents,corner:e[82].square==="a8"?"top-left":e[82].square==="h8"?"top-right":e[82].square==="a1"?"bottom-left":e[82].square==="h1"?"bottom-right":""}}),i.$on("dragenter",e[64]),{key:t,first:null,c(){s=Le(),_e(i.$$.fragment),this.h()},l(a){s=Le(),Ee(i.$$.fragment,a),this.h()},h(){this.first=s},m(a,n){Y(a,s,n),Me(i,a,n),r=!0},p(a,n){e=a;const l={};n[0]&64&&(l.theme=e[6].state.board.boardTheme),n[0]&64&&(l.square=e[82].square),n[0]&64&&(l.color=e[82].color),n[0]&64&&(l.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),n[0]&64&&(l.flipped=e[6].flipped),n[0]&64&&(l.mouseEvents=e[6].state.board.mouseEvents),n[0]&64&&(l.corner=e[82].square==="a8"?"top-left":e[82].square==="h8"?"top-right":e[82].square==="a1"?"bottom-left":e[82].square==="h1"?"bottom-right":""),i.$set(l)},i(a){r||(Z(i.$$.fragment,a),r=!0)},o(a){te(i.$$.fragment,a),r=!1},d(a){a&&P(s),ke(i,a)}}}function js(t){let e,s;return e=new ki({props:{theme:t[6].state.board.boardTheme,flipped:t[6].flipped}}),{c(){_e(e.$$.fragment)},l(i){Ee(e.$$.fragment,i)},m(i,r){Me(e,i,r),s=!0},p(i,r){const a={};r[0]&64&&(a.theme=i[6].state.board.boardTheme),r[0]&64&&(a.flipped=i[6].flipped),e.$set(a)},i(i){s||(Z(e.$$.fragment,i),s=!0)},o(i){te(e.$$.fragment,i),s=!1},d(i){ke(e,i)}}}function Gs(t){let e,s;return e=new Hr({props:{chessboard:t[6],mouseEvents:t[6].state.board.mouseEvents}}),e.$on("resizing",t[65]),{c(){_e(e.$$.fragment)},l(i){Ee(e.$$.fragment,i)},m(i,r){Me(e,i,r),s=!0},p(i,r){const a={};r[0]&64&&(a.chessboard=i[6]),r[0]&64&&(a.mouseEvents=i[6].state.board.mouseEvents),e.$set(a)},i(i){s||(Z(e.$$.fragment,i),s=!0)},o(i){te(e.$$.fragment,i),s=!1},d(i){ke(e,i)}}}function Qs(t){let e,s,i;function r(n){t[66](n)}let a={flipped:t[6].flipped,tools:t[6].state.drawTools.tools,knightLShape:t[6].state.drawTools.settings.knightLShape};return t[8]!==void 0&&(a.svg=t[8]),e=new Sr({props:a}),oe.push(()=>be(e,"svg",r)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,l){const o={};l[0]&64&&(o.flipped=n[6].flipped),l[0]&64&&(o.tools=n[6].state.drawTools.tools),l[0]&64&&(o.knightLShape=n[6].state.drawTools.settings.knightLShape),!s&&l[0]&256&&(s=!0,o.svg=n[8],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function Xs(t){let e,s,i={};return e=new Tr({props:i}),t[67](e),e.$on("newPromotion",t[16]),{c(){_e(e.$$.fragment)},l(r){Ee(e.$$.fragment,r)},m(r,a){Me(e,r,a),s=!0},p(r,a){const n={};e.$set(n)},i(r){s||(Z(e.$$.fragment,r),s=!0)},o(r){te(e.$$.fragment,r),s=!1},d(r){t[67](null),ke(e,r)}}}function Ys(t){let e,s,i={settings:t[6].state.sounds.settings};return e=new Rr({props:i}),t[73](e),{c(){_e(e.$$.fragment)},l(r){Ee(e.$$.fragment,r)},m(r,a){Me(e,r,a),s=!0},p(r,a){const n={};a[0]&64&&(n.settings=r[6].state.sounds.settings),e.$set(n)},i(r){s||(Z(e.$$.fragment,r),s=!0)},o(r){te(e.$$.fragment,r),s=!1},d(r){t[73](null),ke(e,r)}}}function Kr(t){let e,s,i,r,a,n,l,o,u,c,d,p,S,I,L,C,T,f=t[6].state.board.startFen&&Hs(t),m=t[6].ghostPiece&&zs(t),w=t[6].highlightEnabled&&Vs(t),y=t[6].state.board.notation&&js(t),A=t[6].state.board.resizible&&Gs(t),N=t[6].state.drawTools.enabled&&Qs(t),W=t[6].legalEnabled&&Xs(t),B=t[6].soundsEnabled&&Ys(t);return{c(){e=H("div"),s=H("div"),i=H("div"),f&&f.c(),r=se(),m&&m.c(),a=se(),w&&w.c(),n=se(),y&&y.c(),l=se(),A&&A.c(),o=se(),N&&N.c(),u=se(),W&&W.c(),S=se(),B&&B.c(),I=Le(),this.h()},l(R){e=K(R,"DIV",{class:!0});var G=V(e);s=K(G,"DIV",{class:!0,style:!0});var re=V(s);i=K(re,"DIV",{style:!0,class:!0});var de=V(i);f&&f.l(de),de.forEach(P),r=ne(re),m&&m.l(re),a=ne(re),w&&w.l(re),n=ne(re),y&&y.l(re),l=ne(re),A&&A.l(re),o=ne(re),N&&N.l(re),u=ne(re),W&&W.l(re),re.forEach(P),G.forEach(P),S=ne(R),B&&B.l(R),I=Le(),this.h()},h(){Pe(i,"width","100%"),Pe(i,"height","100%"),v(i,"class","noselect"),v(s,"class",c="noselect board text-sm "+t[0]+" svelte-42iz37"),Pe(s,"--boardTheme","url("+(t[6].state.board.boardTheme==="standard"?Rs:Ds)+")"),it(()=>t[71].call(s)),v(e,"class","boardWrapper svelte-42iz37")},m(R,G){Y(R,e,G),O(e,s),O(s,i),f&&f.m(i,null),O(s,r),m&&m.m(s,null),O(s,a),w&&w.m(s,null),O(s,n),y&&y.m(s,null),O(s,l),A&&A.m(s,null),O(s,o),N&&N.m(s,null),O(s,u),W&&W.m(s,null),t[70](s),p=bn(s,t[71].bind(s)),t[72](e),Y(R,S,G),B&&B.m(R,G),Y(R,I,G),L=!0,C||(T=[fe(s,"pointerdown",t[12]),fe(s,"contextmenu",ds(t[55])),fe(s,"drag",ds(t[56])),ss(d=Er.call(null,s,{svg:t[8],flipped:t[6].flipped,enabled:t[6].state.drawTools.enabled&&t[6].state.board.mouseEvents,settings:t[6].state.drawTools.settings})),fe(s,"drawCircle",t[68]),fe(s,"drawArrow",t[69])],C=!0)},p(R,G){R[6].state.board.startFen?f?(f.p(R,G),G[0]&64&&Z(f,1)):(f=Hs(R),f.c(),Z(f,1),f.m(i,null)):f&&(Be(),te(f,1,1,()=>{f=null}),Ue()),R[6].ghostPiece?m?(m.p(R,G),G[0]&64&&Z(m,1)):(m=zs(R),m.c(),Z(m,1),m.m(s,a)):m&&(Be(),te(m,1,1,()=>{m=null}),Ue()),R[6].highlightEnabled?w?(w.p(R,G),G[0]&64&&Z(w,1)):(w=Vs(R),w.c(),Z(w,1),w.m(s,n)):w&&(Be(),te(w,1,1,()=>{w=null}),Ue()),R[6].state.board.notation?y?(y.p(R,G),G[0]&64&&Z(y,1)):(y=js(R),y.c(),Z(y,1),y.m(s,l)):y&&(Be(),te(y,1,1,()=>{y=null}),Ue()),R[6].state.board.resizible?A?(A.p(R,G),G[0]&64&&Z(A,1)):(A=Gs(R),A.c(),Z(A,1),A.m(s,o)):A&&(Be(),te(A,1,1,()=>{A=null}),Ue()),R[6].state.drawTools.enabled?N?(N.p(R,G),G[0]&64&&Z(N,1)):(N=Qs(R),N.c(),Z(N,1),N.m(s,u)):N&&(Be(),te(N,1,1,()=>{N=null}),Ue()),R[6].legalEnabled?W?(W.p(R,G),G[0]&64&&Z(W,1)):(W=Xs(R),W.c(),Z(W,1),W.m(s,null)):W&&(Be(),te(W,1,1,()=>{W=null}),Ue()),(!L||G[0]&1&&c!==(c="noselect board text-sm "+R[0]+" svelte-42iz37"))&&v(s,"class",c),(!L||G[0]&64)&&Pe(s,"--boardTheme","url("+(R[6].state.board.boardTheme==="standard"?Rs:Ds)+")"),d&&ns(d.update)&&G[0]&320&&d.update.call(null,{svg:R[8],flipped:R[6].flipped,enabled:R[6].state.drawTools.enabled&&R[6].state.board.mouseEvents,settings:R[6].state.drawTools.settings}),R[6].soundsEnabled?B?(B.p(R,G),G[0]&64&&Z(B,1)):(B=Ys(R),B.c(),Z(B,1),B.m(I.parentNode,I)):B&&(Be(),te(B,1,1,()=>{B=null}),Ue())},i(R){L||(Z(f),Z(m),Z(w),Z(y),Z(A),Z(N),Z(W),Z(B),L=!0)},o(R){te(f),te(m),te(w),te(y),te(A),te(N),te(W),te(B),L=!1},d(R){R&&P(e),f&&f.d(),m&&m.d(),w&&w.d(),y&&y.d(),A&&A.d(),N&&N.d(),W&&W.d(),t[70](null),p(),t[72](null),R&&P(S),B&&B.d(R),R&&P(I),C=!1,at(T)}}}function zr(t,e,s){let i,{config:r}=e,{className:a=""}=e;const n=new hi(r),l=St();let o,u,c,d,p,S="";const I=_=>{n.clearAllSquares(_),_===J.LEGAL&&n.clearAllSquares(J.LEGALHOVER),_===J.PREMOVE&&n.clearAllSquares(J.PREMOVEHOVER),s(6,n)},L=(_,z)=>{!C(yt(z))||(n.highlightSquare(_,z),s(6,n))},C=_=>n.highlightEnabled&&(_===void 0||n.highlightSettings[typeof _=="string"?_:yt(_)]),T=_=>{if(!n.selectableEnabled&&n.draggableEnabled&&X(_),!n.selectableEnabled)return;f(!0);const z=n.getPieceFromSquare(_);z!==void 0&&(s(6,n.selectedPiece=z,n),X())},f=(_=!0)=>{I(J.SELECT),I(J.LEGAL),I(J.PREMOVE),s(6,n.selectedPiece=void 0,n),_&&(I(J.NEXTMOVE),s(6,n.currentPreMove="",n))},m=_=>{I(J.CHECK),_&&n.legalEnabled&&L(_,J.CHECK),s(6,n)},w=()=>{I(J.CHECK)},y=_=>{n.flipBoard(_),s(6,n)},A=(_,z)=>{_.forEach(ie=>n.highlightSquare(ie,z)),s(6,n)},N=(_,z=!0,ie=J.MOVE)=>{_.length<4||!C(yt(ie))||(z&&I(ie),A([_.substring(0,2),_.substring(2,4)],ie))},W=(_,z,ie=J.MOVE)=>{const ve=[];z&&I(ie),_.forEach(ye=>{ye.length<4||(ve.push(ye.substring(0,2)),ve.push(ye.substring(2,4)))}),A(ve,ie)},B=_=>{L(_.substring(2,4),J.LEGAL)},R=(_,z,ie=J.LEGAL)=>{I(ie),C(yt(ie))&&(_.forEach(ve=>{ve.length<4||(z===void 0||ve.substring(0,2)===z)&&n.highlightSquare(ve.substring(2,4),ie)}),s(6,n))},G=(_,z=!0)=>{n.makeMove(_),z&&N(_),s(6,n)},re=_=>{var z;n.removePiece(_),n.ghostPieceEnabled&&((z=n.ghostPiece)==null?void 0:z.square)===_&&(n.removeGhostPiece(),s(6,n)),s(6,n)},de=_=>n.whiteToMove&&_[0]==="w"||!n.whiteToMove&&_[0]==="b",$=(_=!1)=>{!n.legalEnabled||(n.state.callbacks.getWhiteToMove&&s(6,n.whiteToMove=n.state.callbacks.getWhiteToMove(),n),n.state.callbacks.getPreMoves&&n.preMovesEnabled?s(6,n.preMoves=n.state.callbacks.getPreMoves(),n):s(6,n.preMoves=[],n),n.state.callbacks.getLegalMoves&&n.state.legal.enabled?s(6,n.legalMoves=n.state.callbacks.getLegalMoves(),n):s(6,n.legalMoves=[],n),_&&X(),n.state.callbacks.getInCheck&&n.state.callbacks.getInCheck()?n.whiteToMove?m(n.getWhiteKingSquare()):m(n.getBlackKingSquare()):w(),n.state.callbacks.getLastMove?(s(6,n.lastMove=n.state.callbacks.getLastMove(),n),N(n.lastMove)):I(J.MOVE))},g=_=>{n.soundsEnabled&&d&&d.playMoveSound(_)},k=_=>{n.setGhostPiece(_),s(6,n)},M=()=>{n.removeGhostPiece(),s(6,n)},E=_=>{if(_.substring(0,2)===_.substring(2,4))return;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(_),f(!1);const z=n.getRookMoveIfIsCastling(_),ie=n.getCapturedPawnSquareIfIsEnPassant(_);if(z&&n.legalEnabled&&n.state.legal.settings.allowCastling?(G(z,!1),g("CASTLE")):ie&&n.legalEnabled&&n.state.legal.settings.allowEnPassant?(re(ie),g("CAPTURE")):n.isCapture(_)?g("CAPTURE"):g("MOVE"),M(),G(_),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(_),$(),n.legalEnabled&&n.preMovesEnabled&&n.currentPreMove!==""){if(n.legalMoves.includes(n.currentPreMove)||n.legalMoves.includes(`${n.currentPreMove}q`)){const ve=n.currentPreMove;Vn().then(()=>{E(ve)})}s(6,n.currentPreMove="",n),I(J.NEXTMOVE)}},b=_=>{!n.legalEnabled||!n.preMovesEnabled||!n.movableEnabled||(I(J.PREMOVE),N(_,!0,J.NEXTMOVE),s(6,n.currentPreMove=_,n),l("nextMove",{move:_}))},q=_=>{const z=n.getPieceFromSquare(_.substring(0,2));if(!z)return;const ie=z.name[0]==="w"?he.WHITE:he.BLACK;p.openPromotionModal(ie===he.WHITE),S=_,n.makeMove(_),I(J.LEGAL),I(J.SELECT),N(_)},h=(_,z)=>{n.clearSquare(_,z),s(6,n)},F=()=>{n.clearAllPieces(),s(6,n)},Q=(_,z)=>{n.setPiece(_,z),s(6,n)},x=(_,z)=>{var ve;const ie=(ve=n.getPieceFromSquare(_))==null?void 0:ve.name;!ie||(z!==void 0?n.setPiece(_,`${z===he.WHITE?"w":"b"}${ie[1]}`):n.setPiece(_,`${ie[0]==="w"?"b":"w"}${ie[1]}`),s(6,n))},ee=(_,z)=>{const ie=Math.floor(_/n.state.board.size*8),ve=Math.floor(z/n.state.board.size*8),ye=n.flipped?Math.abs(ie-7):ie,et=n.flipped?ve:Math.abs(ve-7);return`${Object.keys(n.letters)[ye]}${(et+1).toString()}`},j=_=>{if(!n.state.board.mouseEvents)return;if(_.button===2){f();return}if(!n.movableEnabled)return;const z=o.getBoundingClientRect(),ie=_.clientX-z.left,ve=_.clientY-z.top,ye=ee(ie,ve),et=n.getPieceFromSquare(ye);if(l("squareClick",{square:ye,piece:et?et.name:void 0}),!n.selectableEnabled&&!n.draggableEnabled){f();return}if(n.selectedPiece&&n.selectedPiece.square!==ye&&!n.legalEnabled){E(n.selectedPiece.square+ye),f();return}if(n.selectedPiece&&n.selectedPiece.square!==ye&&!de(n.selectedPiece.name)){n.preMovesEnabled&&n.preMoves.includes(n.selectedPiece.square+ye)&&b(n.selectedPiece.square+ye),f(!1);return}n.selectedPiece&&n.selectedPiece.square!==ye&&(et===void 0||et.name[0]!==n.selectedPiece.name[0])&&de(n.selectedPiece.name)&&(n.isPromotion(n.selectedPiece.square+ye)&&n.legalMoves.includes(`${n.selectedPiece.square+ye}q`)?q(n.selectedPiece.square+ye):n.legalMoves.includes(n.selectedPiece.square+ye)&&E(n.selectedPiece.square+ye),f())},ue=_=>{const z=_.detail;n.legalEnabled?n.isPromotion(z)&&n.legalMoves.includes(`${z}q`)?q(z):n.legalMoves.includes(z)?E(z):n.preMovesEnabled&&n.preMoves.includes(z)?b(z):f():E(z),I(J.LEGAL),I(J.PREMOVE),s(6,n)},X=_=>{var z;if(n.selectableEnabled||n.draggableEnabled){const ie=n.getPieceFromSquare(_!=null?_:(z=n.selectedPiece)==null?void 0:z.square);if(!ie||(n.selectableEnabled&&L(ie.square,J.SELECT),!n.legalEnabled))return;I(J.LEGAL),I(J.PREMOVE),de(ie.name)&&R(n.legalMoves,ie.square),de(ie.name)||R(n.preMoves,ie.square,J.PREMOVE)}},ae=(_,z=!0,ie="MOVE")=>{if(n.updatePiecesWithFen(_),z&&f(),I(),M(),$(!1),s(6,n.currentPreMove="",n),n.state.callbacks.getLastMove){const ve=n.state.callbacks.getLastMove();s(6,n.lastMove=ve,n),ie!==!1&&(ie!=="MOVE"?g(ie):n.isCastling(ve)?g("CASTLE"):g(ie)),N(ve)}else ie!==!1&&g(ie);X(),s(6,n)},ce=()=>n.getShortFEN(),me=_=>{!_||n.state.board.size===_||(s(6,n.state.board.size=_,n),n.state.board.resizible&&document.body.style.setProperty("--boardSize",`${n.state.board.size}px`))},Oe=_=>{!_||n.state.board.scale===_||(s(6,n.state.board.scale=_,n),n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`))},le=_=>{var z;return(z=n.getPieceFromSquare(_))==null?void 0:z.name},Se=_=>{s(6,n.state.drawTools.tools=_,n)},Ne=_=>{s(6,n.state.drawTools.tools=n.state.drawTools.tools.filter(z=>_?(!_.type||z.type!==_.type)&&(!_.from||z.type==="arrow"&&z.from!==_.from||z.type==="circle"&&z.square!==_.from)&&(!_.to||z.type==="arrow"&&z.to!==_.to)&&(_.fixed===void 0||z.fixed!==_.fixed):!1),n)},Ge=_=>{_===!1?s(6,n.state.movable.enabled=!1,n):(s(6,n.state.movable.enabled=!0,n),s(6,n.state.movable.color=_===!0?he.BOTH:_,n))},Qe=_=>{_.length<4||(s(6,n.lastMove=_,n),N(_))},We=_=>{s(6,n.legalMoves=_,n)},Ke=_=>{s(6,n.preMoves=_,n)},pt=()=>n.state,ft=_=>{s(6,n.state=_,n),I(),$(!1),N(n.lastMove),N(n.currentPreMove,!0,J.NEXTMOVE),X()},Xe=_=>{_!==void 0&&(n.setConfigSettings(_),s(6,n),ft(n.state))},mt=_=>_.getConfig(),ot=(_,z)=>{const ie=o.getBoundingClientRect();n.legalEnabled&&(de(z.name)&&n.legalHover(ee(_.detail.x-ie.x,_.detail.y-ie.y)),!de(z.name)&&n.preMovesEnabled&&n.preMoveHover(ee(_.detail.x-ie.x,_.detail.y-ie.y))),s(6,n)},dt=_=>{n.ghostPieceEnabled&&k(_),I(J.SELECT)},je=_=>{const z=n.getPieceFromSquare(S.substring(2,4));if(!z)return;const ie=z.name[0]+_.detail.toUpperCase(),ve=S+_.detail;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(ve),n.setPiece(z.square,ie),s(6,n),g("MOVE"),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(ve),$()},ht=_=>{if(!n.selectedPiece)return;const z=n.selectedPiece.square+_;n.legalEnabled?n.isPromotion(z)&&n.legalMoves.includes(`${z}q`)?q(z):n.legalMoves.includes(z)?E(z):n.preMovesEnabled&&n.preMoves.includes(z)?b(z):f():E(z),f(!1)},ze=_=>{const z=n.getPieceFromSquare(_.square);z&&z.square===_.square&&z.name===_.name&&L(_.square,J.SELECT)};function Je(_){if(!o||!_)return;if(i==null||i(),typeof window.ResizeObserver>"u")throw new Error("window.ResizeObserver is missing.");const z=new ResizeObserver(ie=>{const ve=_.getBoundingClientRect();ie.forEach(()=>{o.style.setProperty("width",`${Math.floor(ve.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`),o.style.setProperty("height",`${Math.floor(ve.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`)})});return z.observe(_),()=>{z.unobserve(_),z.disconnect()}}is(()=>{$(!0),n.state.callbacks.getLastMove&&N(n.state.callbacks.getLastMove()),n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`)}),zn(()=>{i==null||i(),n.state.board.resizible&&document.body.style.removeProperty("--boardScale")});function vt(_){Ve.call(this,t,_)}function wt(_){Ve.call(this,t,_)}const Rt=_=>{l("piececlick",{piece:_}),T(_.square)},Dt=_=>{l("startDragging",{piece:_}),dt(_)},Bt=(_,z)=>ot(z,_);function Ut(_){Ve.call(this,t,_)}const Ht=_=>ze(_),xe=()=>{f()},Kt=_=>ht(_.square),zt=_=>{L(_.detail.square,J.LEGALHOVER)},_t=_=>{Oe(_.detail)};function Vt(_){c=_,s(8,c)}function Wt(_){oe[_?"unshift":"push"](()=>{p=_,s(10,p)})}const jt=_=>l("drawCircle",{square:_.detail.square,color:_.detail.color}),Gt=_=>l("drawArrow",{move:_.detail.move,color:_.detail.color});function Qt(_){oe[_?"unshift":"push"](()=>{o=_,s(7,o)})}function $e(){n.state.board.size=this.clientWidth,s(6,n)}function Xt(_){oe[_?"unshift":"push"](()=>{u=_,s(5,u)})}function Ct(_){oe[_?"unshift":"push"](()=>{d=_,s(9,d)})}return t.$$set=_=>{"config"in _&&s(19,r=_.config),"className"in _&&s(0,a=_.className)},t.$$.update=()=>{t.$$.dirty[0]&32&&(i=Je(u))},[a,L,T,f,Oe,u,n,o,c,d,p,l,j,ue,ot,dt,je,ht,ze,r,I,m,w,y,A,N,W,B,R,G,re,$,g,E,b,q,h,F,Q,x,ee,ae,ce,me,le,Se,Ne,Ge,Qe,We,Ke,pt,ft,Xe,mt,vt,wt,Rt,Dt,Bt,Ut,Ht,xe,Kt,zt,_t,Vt,Wt,jt,Gt,Qt,$e,Xt,Ct]}class Vr extends Ie{constructor(e){super(),qe(this,e,zr,Kr,Fe,{config:19,className:0,clearAllSquares:20,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:21,removeCheckSquare:22,flipBoard:23,highlightManySquares:24,highlightMove:25,highlightMoves:26,highlightLegalMove:27,highlightLegalMoves:28,movePiece:29,removePiece:30,updateLegalState:31,playMoveSound:32,makeMove:33,makeNextMove:34,makeMovePromotion:35,removeSquareHighlight:36,removeAllPiece:37,createPiece:38,changeColorOfPiece:39,getSquareFromCoords:40,setFEN:41,getShortFEN:42,setSize:43,setScale:4,getPieceFromSquare:44,setTools:45,removeTools:46,setMovableColor:47,setLastMove:48,setLegalMoves:49,setPreMoves:50,getState:51,setState:52,setConfigSettings:53,getConfigFromState:54},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[20]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[21]}get removeCheckSquare(){return this.$$.ctx[22]}get flipBoard(){return this.$$.ctx[23]}get highlightManySquares(){return this.$$.ctx[24]}get highlightMove(){return this.$$.ctx[25]}get highlightMoves(){return this.$$.ctx[26]}get highlightLegalMove(){return this.$$.ctx[27]}get highlightLegalMoves(){return this.$$.ctx[28]}get movePiece(){return this.$$.ctx[29]}get removePiece(){return this.$$.ctx[30]}get updateLegalState(){return this.$$.ctx[31]}get playMoveSound(){return this.$$.ctx[32]}get makeMove(){return this.$$.ctx[33]}get makeNextMove(){return this.$$.ctx[34]}get makeMovePromotion(){return this.$$.ctx[35]}get removeSquareHighlight(){return this.$$.ctx[36]}get removeAllPiece(){return this.$$.ctx[37]}get createPiece(){return this.$$.ctx[38]}get changeColorOfPiece(){return this.$$.ctx[39]}get getSquareFromCoords(){return this.$$.ctx[40]}get setFEN(){return this.$$.ctx[41]}get getShortFEN(){return this.$$.ctx[42]}get setSize(){return this.$$.ctx[43]}get setScale(){return this.$$.ctx[4]}get getPieceFromSquare(){return this.$$.ctx[44]}get setTools(){return this.$$.ctx[45]}get removeTools(){return this.$$.ctx[46]}get setMovableColor(){return this.$$.ctx[47]}get setLastMove(){return this.$$.ctx[48]}get setLegalMoves(){return this.$$.ctx[49]}get setPreMoves(){return this.$$.ctx[50]}get getState(){return this.$$.ctx[51]}get setState(){return this.$$.ctx[52]}get setConfigSettings(){return this.$$.ctx[53]}get getConfigFromState(){return this.$$.ctx[54]}}const Zs=["standard","darkBlue"],Js=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function xs(t){let e,s,i;return{c(){e=H("input"),this.h()},l(r){e=K(r,"INPUT",{type:!0,class:!0}),this.h()},h(){v(e,"type","checkbox"),v(e,"class","mr-1")},m(r,a){Y(r,e,a),e.checked=t[0],s||(i=[fe(e,"change",t[8]),fe(e,"click",mn(t[7])),fe(e,"change",t[9])],s=!0)},p(r,a){a&1&&(e.checked=r[0])},d(r){r&&P(e),s=!1,at(i)}}}function $s(t){let e,s,i;return{c(){e=Re("svg"),s=Re("path"),this.h()},l(r){e=De(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=V(e);s=De(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),V(s).forEach(P),a.forEach(P),this.h()},h(){v(s,"fill-rule","evenodd"),v(s,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),v(s,"clip-rule","evenodd"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"viewBox","0 0 20 20"),v(e,"fill","currentColor"),v(e,"class",i="w-5 h-5 transition "+(t[1]?"rotate-180":"rotate-0"))},m(r,a){Y(r,e,a),O(e,s)},p(r,a){a&2&&i!==(i="w-5 h-5 transition "+(r[1]?"rotate-180":"rotate-0"))&&v(e,"class",i)},d(r){r&&P(e)}}}function en(t){let e,s,i;const r=t[6].default,a=fn(r,t,t[5],null);return{c(){e=H("div"),a&&a.c(),this.h()},l(n){e=K(n,"DIV",{class:!0});var l=V(e);a&&a.l(l),l.forEach(P),this.h()},h(){v(e,"class","py-2 px-4")},m(n,l){Y(n,e,l),a&&a.m(e,null),i=!0},p(n,l){a&&a.p&&(!i||l&32)&&dn(a,r,n,n[5],i?gn(r,n[5],l,null):hn(n[5]),null)},i(n){i||(Z(a,n),n&&it(()=>{s||(s=Ot(e,Ft,{},!0)),s.run(1)}),i=!0)},o(n){te(a,n),n&&(s||(s=Ot(e,Ft,{},!1)),s.run(0)),i=!1},d(n){n&&P(e),a&&a.d(n),n&&s&&s.end()}}}function Wr(t){let e,s,i,r,a,n,l,o,u,c,d,p,S,I,L=t[0]!==void 0&&xs(t),C=t[3]&&$s(t),T=t[1]&&en(t);return{c(){e=H("div"),s=H("button"),i=H("div"),L&&L.c(),r=se(),a=H("span"),n=we(t[2]),o=se(),C&&C.c(),d=se(),T&&T.c(),this.h()},l(f){e=K(f,"DIV",{class:!0});var m=V(e);s=K(m,"BUTTON",{class:!0});var w=V(s);i=K(w,"DIV",{class:!0});var y=V(i);L&&L.l(y),r=ne(y),a=K(y,"SPAN",{class:!0});var A=V(a);n=Ce(A,t[2]),A.forEach(P),y.forEach(P),o=ne(w),C&&C.l(w),w.forEach(P),d=ne(m),T&&T.l(m),m.forEach(P),this.h()},h(){v(a,"class",l=t[0]===void 0?"ml-[21px]":""),v(i,"class","flex gap-1"),v(s,"class",u="flex justify-between px-4 py-2 "+(t[3]?"transition hover:bg-slate-800/40":"")+" rounded"),s.disabled=c=!t[3],v(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(f,m){Y(f,e,m),O(e,s),O(s,i),L&&L.m(i,null),O(i,r),O(i,a),O(a,n),O(s,o),C&&C.m(s,null),O(e,d),T&&T.m(e,null),p=!0,S||(I=fe(s,"click",t[10]),S=!0)},p(f,[m]){f[0]!==void 0?L?L.p(f,m):(L=xs(f),L.c(),L.m(i,r)):L&&(L.d(1),L=null),(!p||m&4)&&Nt(n,f[2]),(!p||m&1&&l!==(l=f[0]===void 0?"ml-[21px]":""))&&v(a,"class",l),f[3]?C?C.p(f,m):(C=$s(f),C.c(),C.m(s,null)):C&&(C.d(1),C=null),(!p||m&8&&u!==(u="flex justify-between px-4 py-2 "+(f[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&v(s,"class",u),(!p||m&8&&c!==(c=!f[3]))&&(s.disabled=c),f[1]?T?(T.p(f,m),m&2&&Z(T,1)):(T=en(f),T.c(),Z(T,1),T.m(e,null)):T&&(Be(),te(T,1,1,()=>{T=null}),Ue())},i(f){p||(Z(T),p=!0)},o(f){te(T),p=!1},d(f){f&&P(e),L&&L.d(),C&&C.d(),T&&T.d(),S=!1,I()}}}function jr(t,e,s){let{$$slots:i={},$$scope:r}=e;const a=St();let{name:n="board"}=e,{enabled:l=void 0}=e,{showExpand:o=!0}=e,{expanded:u=!1}=e;function c(I){Ve.call(this,t,I)}const d=()=>a("changed",l);function p(){l=this.checked,s(0,l)}const S=()=>{s(1,u=!u)};return t.$$set=I=>{"name"in I&&s(2,n=I.name),"enabled"in I&&s(0,l=I.enabled),"showExpand"in I&&s(3,o=I.showExpand),"expanded"in I&&s(1,u=I.expanded),"$$scope"in I&&s(5,r=I.$$scope)},[l,u,n,o,a,r,i,c,d,p,S]}class lt extends Ie{constructor(e){super(),qe(this,e,jr,Wr,Fe,{name:2,enabled:0,showExpand:3,expanded:1})}}function tn(t,e,s){const i=t.slice();return i[12]=e[s],i}function sn(t){let e,s=t[12]+"",i;return{c(){e=H("option"),i=we(s),this.h()},l(r){e=K(r,"OPTION",{});var a=V(e);i=Ce(a,s),a.forEach(P),this.h()},h(){e.__value=t[12],e.value=e.__value},m(r,a){Y(r,e,a),O(e,i)},p:Te,d(r){r&&P(e)}}}function Gr(t){let e,s,i,r,a,n,l,o,u,c,d,p,S,I,L,C,T,f,m,w,y,A,N,W,B,R,G,re,de,$,g,k=Zs,M=[];for(let E=0;E<k.length;E+=1)M[E]=sn(tn(t,k,E));return{c(){e=H("div"),s=H("select");for(let E=0;E<M.length;E+=1)M[E].c();i=se(),r=H("label"),a=we("board theme"),n=se(),l=H("div"),o=H("input"),u=se(),c=H("label"),d=we("mouseEvents"),p=se(),S=H("div"),I=H("input"),L=se(),C=H("label"),T=we("notation"),f=se(),m=H("div"),w=H("input"),y=se(),A=H("label"),N=we("flipped"),W=se(),B=H("div"),R=H("input"),G=se(),re=H("label"),de=we("resizible"),this.h()},l(E){e=K(E,"DIV",{class:!0});var b=V(e);s=K(b,"SELECT",{class:!0});var q=V(s);for(let ce=0;ce<M.length;ce+=1)M[ce].l(q);q.forEach(P),i=ne(b),r=K(b,"LABEL",{for:!0,class:!0});var h=V(r);a=Ce(h,"board theme"),h.forEach(P),b.forEach(P),n=ne(E),l=K(E,"DIV",{class:!0});var F=V(l);o=K(F,"INPUT",{id:!0,type:!0,class:!0}),u=ne(F),c=K(F,"LABEL",{for:!0,class:!0});var Q=V(c);d=Ce(Q,"mouseEvents"),Q.forEach(P),F.forEach(P),p=ne(E),S=K(E,"DIV",{class:!0});var x=V(S);I=K(x,"INPUT",{id:!0,type:!0,class:!0}),L=ne(x),C=K(x,"LABEL",{for:!0,class:!0});var ee=V(C);T=Ce(ee,"notation"),ee.forEach(P),x.forEach(P),f=ne(E),m=K(E,"DIV",{class:!0});var j=V(m);w=K(j,"INPUT",{id:!0,type:!0,class:!0}),y=ne(j),A=K(j,"LABEL",{for:!0,class:!0});var ue=V(A);N=Ce(ue,"flipped"),ue.forEach(P),j.forEach(P),W=ne(E),B=K(E,"DIV",{class:!0});var X=V(B);R=K(X,"INPUT",{id:!0,type:!0,class:!0}),G=ne(X),re=K(X,"LABEL",{for:!0,class:!0});var ae=V(re);de=Ce(ae,"resizible"),ae.forEach(P),X.forEach(P),this.h()},h(){v(s,"class","svelte-lnr7xr"),t[0]===void 0&&it(()=>t[7].call(s)),v(r,"for","boardTheme"),v(r,"class","select-none"),v(e,"class","mb-2"),v(o,"id","mouseEvents"),v(o,"type","checkbox"),v(o,"class","svelte-lnr7xr"),v(c,"for","mouseEvents"),v(c,"class","select-none"),v(l,"class","mb-2"),v(I,"id","notation"),v(I,"type","checkbox"),v(I,"class","svelte-lnr7xr"),v(C,"for","notation"),v(C,"class","select-none"),v(S,"class","mb-2"),v(w,"id","flipped"),v(w,"type","checkbox"),v(w,"class","svelte-lnr7xr"),v(A,"for","flipped"),v(A,"class","select-none"),v(m,"class","mb-2"),v(R,"id","resizibleEnabled"),v(R,"type","checkbox"),v(R,"class","svelte-lnr7xr"),v(re,"for","resizibleEnabled"),v(re,"class","select-none"),v(B,"class","mt-2 mb-1")},m(E,b){Y(E,e,b),O(e,s);for(let q=0;q<M.length;q+=1)M[q].m(s,null);bt(s,t[0]),O(e,i),O(e,r),O(r,a),Y(E,n,b),Y(E,l,b),O(l,o),o.checked=t[1],O(l,u),O(l,c),O(c,d),Y(E,p,b),Y(E,S,b),O(S,I),I.checked=t[2],O(S,L),O(S,C),O(C,T),Y(E,f,b),Y(E,m,b),O(m,w),w.checked=t[3],O(m,y),O(m,A),O(A,N),Y(E,W,b),Y(E,B,b),O(B,R),R.checked=t[4],O(B,G),O(B,re),O(re,de),$||(g=[fe(s,"change",t[7]),fe(o,"change",t[8]),fe(I,"change",t[9]),fe(w,"change",t[10]),fe(R,"change",t[11])],$=!0)},p(E,b){if(b&0){k=Zs;let q;for(q=0;q<k.length;q+=1){const h=tn(E,k,q);M[q]?M[q].p(h,b):(M[q]=sn(h),M[q].c(),M[q].m(s,null))}for(;q<M.length;q+=1)M[q].d(1);M.length=k.length}b&1&&bt(s,E[0]),b&2&&(o.checked=E[1]),b&4&&(I.checked=E[2]),b&8&&(w.checked=E[3]),b&16&&(R.checked=E[4])},d(E){E&&P(e),rt(M,E),E&&P(n),E&&P(l),E&&P(p),E&&P(S),E&&P(f),E&&P(m),E&&P(W),E&&P(B),$=!1,at(g)}}}function Qr(t){let e,s;return e=new lt({props:{name:t[5],expanded:t[6],$$slots:{default:[Gr]},$$scope:{ctx:t}}}),{c(){_e(e.$$.fragment)},l(i){Ee(e.$$.fragment,i)},m(i,r){Me(e,i,r),s=!0},p(i,[r]){const a={};r&32&&(a.name=i[5]),r&64&&(a.expanded=i[6]),r&32799&&(a.$$scope={dirty:r,ctx:i}),e.$set(a)},i(i){s||(Z(e.$$.fragment,i),s=!0)},o(i){te(e.$$.fragment,i),s=!1},d(i){ke(e,i)}}}function Xr(t,e,s){let{name:i="Board"}=e,{boardTheme:r}=e,{mouseEvents:a}=e,{notation:n}=e,{flipped:l}=e,{resizible:o=!1}=e,{expanded:u=!1}=e;function c(){r=rs(this),s(0,r)}function d(){a=this.checked,s(1,a)}function p(){n=this.checked,s(2,n)}function S(){l=this.checked,s(3,l)}function I(){o=this.checked,s(4,o)}return t.$$set=L=>{"name"in L&&s(5,i=L.name),"boardTheme"in L&&s(0,r=L.boardTheme),"mouseEvents"in L&&s(1,a=L.mouseEvents),"notation"in L&&s(2,n=L.notation),"flipped"in L&&s(3,l=L.flipped),"resizible"in L&&s(4,o=L.resizible),"expanded"in L&&s(6,u=L.expanded)},[r,a,n,l,o,i,u,c,d,p,S,I]}class Yr extends Ie{constructor(e){super(),qe(this,e,Xr,Qr,Fe,{name:5,boardTheme:0,mouseEvents:1,notation:2,flipped:3,resizible:4,expanded:6})}}function Zr(t){let e,s,i,r,a,n,l,o,u,c;return{c(){e=H("div"),s=H("select"),i=H("option"),r=we("Both"),a=H("option"),n=we("White"),l=H("option"),o=we("Black"),this.h()},l(d){e=K(d,"DIV",{});var p=V(e);s=K(p,"SELECT",{class:!0});var S=V(s);i=K(S,"OPTION",{});var I=V(i);r=Ce(I,"Both"),I.forEach(P),a=K(S,"OPTION",{});var L=V(a);n=Ce(L,"White"),L.forEach(P),l=K(S,"OPTION",{});var C=V(l);o=Ce(C,"Black"),C.forEach(P),S.forEach(P),p.forEach(P),this.h()},h(){i.__value=he.BOTH,i.value=i.__value,a.__value=he.WHITE,a.value=a.__value,l.__value=he.BLACK,l.value=l.__value,v(s,"class","svelte-xrxnwg"),t[1]===void 0&&it(()=>t[4].call(s))},m(d,p){Y(d,e,p),O(e,s),O(s,i),O(i,r),O(s,a),O(a,n),O(s,l),O(l,o),bt(s,t[1]),u||(c=fe(s,"change",t[4]),u=!0)},p(d,p){p&2&&bt(s,d[1])},d(d){d&&P(e),u=!1,c()}}}function Jr(t){let e,s,i;function r(n){t[5](n)}let a={name:t[2],expanded:t[3],$$slots:{default:[Zr]},$$scope:{ctx:t}};return t[0]!==void 0&&(a.enabled=t[0]),e=new lt({props:a}),oe.push(()=>be(e,"enabled",r)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&66&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function xr(t,e,s){let{name:i="Movable"}=e,{enabled:r=!1}=e,{color:a}=e,{expanded:n=!1}=e;function l(){a=rs(this),s(1,a)}function o(u){r=u,s(0,r)}return t.$$set=u=>{"name"in u&&s(2,i=u.name),"enabled"in u&&s(0,r=u.enabled),"color"in u&&s(1,a=u.color),"expanded"in u&&s(3,n=u.expanded)},[r,a,i,n,l,o]}class $r extends Ie{constructor(e){super(),qe(this,e,xr,Jr,Fe,{name:2,enabled:0,color:1,expanded:3})}}function nn(t,e,s){const i=t.slice();return i[12]=e[s],i}function rn(t){let e,s,i,r,a,n,l,o,u,c,d,p,S,I,L,C,T=Js,f=[];for(let m=0;m<T.length;m+=1)f[m]=an(nn(t,T,m));return{c(){e=H("div"),s=H("div"),i=H("input"),r=se(),a=H("label"),n=we("duration"),l=se(),o=H("div"),u=H("select");for(let m=0;m<f.length;m+=1)f[m].c();c=se(),d=H("label"),p=we("easing"),this.h()},l(m){e=K(m,"DIV",{class:!0});var w=V(e);s=K(w,"DIV",{class:!0});var y=V(s);i=K(y,"INPUT",{id:!0,type:!0,class:!0}),r=ne(y),a=K(y,"LABEL",{for:!0,class:!0});var A=V(a);n=Ce(A,"duration"),A.forEach(P),y.forEach(P),l=ne(w),o=K(w,"DIV",{class:!0});var N=V(o);u=K(N,"SELECT",{id:!0,class:!0});var W=V(u);for(let R=0;R<f.length;R+=1)f[R].l(W);W.forEach(P),c=ne(N),d=K(N,"LABEL",{for:!0,class:!0});var B=V(d);p=Ce(B,"easing"),B.forEach(P),N.forEach(P),w.forEach(P),this.h()},h(){v(i,"id","transitionDuration"),v(i,"type","number"),v(i,"class","w-16 svelte-1qpp6cx"),v(a,"for","transitionDuration"),v(a,"class","select-none"),v(s,"class","flex gap-2 mb-2"),v(u,"id","easingFuncs"),v(u,"class","svelte-1qpp6cx"),t[4]===void 0&&it(()=>t[10].call(u)),v(d,"for","easingFuncs"),v(d,"class","select-none"),v(o,"class","flex gap-2"),v(e,"class","pl-2 pr-4 flex-col")},m(m,w){Y(m,e,w),O(e,s),O(s,i),hs(i,t[3]),O(s,r),O(s,a),O(a,n),O(e,l),O(e,o),O(o,u);for(let y=0;y<f.length;y+=1)f[y].m(u,null);bt(u,t[4]),O(o,c),O(o,d),O(d,p),I=!0,L||(C=[fe(i,"input",t[9]),fe(u,"change",t[10])],L=!0)},p(m,w){if(w&8&&En(i.value)!==m[3]&&hs(i,m[3]),w&0){T=Js;let y;for(y=0;y<T.length;y+=1){const A=nn(m,T,y);f[y]?f[y].p(A,w):(f[y]=an(A),f[y].c(),f[y].m(u,null))}for(;y<f.length;y+=1)f[y].d(1);f.length=T.length}w&16&&bt(u,m[4])},i(m){I||(m&&it(()=>{S||(S=Ot(e,Ft,{},!0)),S.run(1)}),I=!0)},o(m){m&&(S||(S=Ot(e,Ft,{},!1)),S.run(0)),I=!1},d(m){m&&P(e),rt(f,m),m&&S&&S.end(),L=!1,at(C)}}}function an(t){let e,s=t[12]+"",i;return{c(){e=H("option"),i=we(s),this.h()},l(r){e=K(r,"OPTION",{});var a=V(e);i=Ce(a,s),a.forEach(P),this.h()},h(){e.__value=t[12],e.value=e.__value},m(r,a){Y(r,e,a),O(e,i)},p:Te,d(r){r&&P(e)}}}function ea(t){let e,s,i,r,a,n,l,o,u,c,d,p,S,I,L,C=t[2]&&rn(t);return{c(){e=H("div"),s=H("input"),i=se(),r=H("label"),a=we("ghost piece"),n=se(),l=H("div"),o=H("input"),u=se(),c=H("label"),d=we("transition"),p=se(),C&&C.c(),S=Le(),this.h()},l(T){e=K(T,"DIV",{class:!0});var f=V(e);s=K(f,"INPUT",{id:!0,type:!0,class:!0}),i=ne(f),r=K(f,"LABEL",{for:!0,class:!0});var m=V(r);a=Ce(m,"ghost piece"),m.forEach(P),f.forEach(P),n=ne(T),l=K(T,"DIV",{class:!0});var w=V(l);o=K(w,"INPUT",{id:!0,type:!0,class:!0}),u=ne(w),c=K(w,"LABEL",{for:!0,class:!0});var y=V(c);d=Ce(y,"transition"),y.forEach(P),w.forEach(P),p=ne(T),C&&C.l(T),S=Le(),this.h()},h(){v(s,"id","ghostPiece"),v(s,"type","checkbox"),v(s,"class","svelte-1qpp6cx"),v(r,"for","ghostPiece"),v(r,"class","select-none"),v(e,"class","mb-2"),v(o,"id","draggableEnabled"),v(o,"type","checkbox"),v(o,"class","svelte-1qpp6cx"),v(c,"for","draggableEnabled"),v(c,"class","select-none"),v(l,"class","mb-2")},m(T,f){Y(T,e,f),O(e,s),s.checked=t[1],O(e,i),O(e,r),O(r,a),Y(T,n,f),Y(T,l,f),O(l,o),o.checked=t[2],O(l,u),O(l,c),O(c,d),Y(T,p,f),C&&C.m(T,f),Y(T,S,f),I||(L=[fe(s,"change",t[7]),fe(o,"change",t[8])],I=!0)},p(T,f){f&2&&(s.checked=T[1]),f&4&&(o.checked=T[2]),T[2]?C?(C.p(T,f),f&4&&Z(C,1)):(C=rn(T),C.c(),Z(C,1),C.m(S.parentNode,S)):C&&(Be(),te(C,1,1,()=>{C=null}),Ue())},d(T){T&&P(e),T&&P(n),T&&P(l),T&&P(p),C&&C.d(T),T&&P(S),I=!1,at(L)}}}function ta(t){let e,s,i;function r(n){t[11](n)}let a={name:t[5],expanded:t[6],$$slots:{default:[ea]},$$scope:{ctx:t}};return t[0]!==void 0&&(a.enabled=t[0]),e=new lt({props:a}),oe.push(()=>be(e,"enabled",r)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&32&&(o.name=n[5]),l&64&&(o.expanded=n[6]),l&32798&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function sa(t,e,s){let{name:i="Draggable"}=e,{enabled:r=!1}=e,{ghostPiece:a=!1}=e,{transition:n=!1}=e,{duration:l=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function c(){a=this.checked,s(1,a)}function d(){n=this.checked,s(2,n)}function p(){l=En(this.value),s(3,l)}function S(){o=rs(this),s(4,o)}function I(L){r=L,s(0,r)}return t.$$set=L=>{"name"in L&&s(5,i=L.name),"enabled"in L&&s(0,r=L.enabled),"ghostPiece"in L&&s(1,a=L.ghostPiece),"transition"in L&&s(2,n=L.transition),"duration"in L&&s(3,l=L.duration),"easing"in L&&s(4,o=L.easing),"expanded"in L&&s(6,u=L.expanded)},[r,a,n,l,o,i,u,c,d,p,S,I]}class na extends Ie{constructor(e){super(),qe(this,e,sa,ta,Fe,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function ln(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function on(t){let e,s,i,r,a=t[7]+"",n,l,o,u;function c(){t[5].call(s,t[7])}return{c(){e=H("div"),s=H("input"),i=se(),r=H("label"),n=we(a),l=se(),this.h()},l(d){e=K(d,"DIV",{class:!0});var p=V(e);s=K(p,"INPUT",{id:!0,type:!0}),i=ne(p),r=K(p,"LABEL",{for:!0,class:!0});var S=V(r);n=Ce(S,a),S.forEach(P),l=ne(p),p.forEach(P),this.h()},h(){v(s,"id",t[7]+"Enabled"),v(s,"type","checkbox"),v(r,"for",t[7]+"Enabled"),v(r,"class","select-none"),v(e,"class","mb-2")},m(d,p){Y(d,e,p),O(e,s),s.checked=t[1][t[7]],O(e,i),O(e,r),O(r,n),O(e,l),o||(u=fe(s,"change",c),o=!0)},p(d,p){t=d,p&18&&(s.checked=t[1][t[7]])},d(d){d&&P(e),o=!1,u()}}}function ia(t){let e,s=t[4],i=[];for(let r=0;r<s.length;r+=1)i[r]=on(ln(t,s,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Le()},l(r){for(let a=0;a<i.length;a+=1)i[a].l(r);e=Le()},m(r,a){for(let n=0;n<i.length;n+=1)i[n].m(r,a);Y(r,e,a)},p(r,a){if(a&18){s=r[4];let n;for(n=0;n<s.length;n+=1){const l=ln(r,s,n);i[n]?i[n].p(l,a):(i[n]=on(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(r){rt(i,r),r&&P(e)}}}function ra(t){let e,s,i;function r(n){t[6](n)}let a={name:t[2],expanded:t[3],$$slots:{default:[ia]},$$scope:{ctx:t}};return t[0]!==void 0&&(a.enabled=t[0]),e=new lt({props:a}),oe.push(()=>be(e,"enabled",r)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function aa(t,e,s){let{name:i="Highlight"}=e,{enabled:r=!1}=e,{settings:a}=e;const n=["select","legal","move","preMove","nextMove","check"];let{expanded:l=!1}=e;function o(c){a[c]=this.checked,s(1,a)}function u(c){r=c,s(0,r)}return t.$$set=c=>{"name"in c&&s(2,i=c.name),"enabled"in c&&s(0,r=c.enabled),"settings"in c&&s(1,a=c.settings),"expanded"in c&&s(3,l=c.expanded)},[r,a,i,l,n,o,u]}class la extends Ie{constructor(e){super(),qe(this,e,aa,ra,Fe,{name:2,enabled:0,settings:1,expanded:3})}}function oa(t){let e,s,i,r,a,n,l,o,u,c,d,p,S;return{c(){e=H("div"),s=H("input"),i=se(),r=H("label"),a=we("L shape knight move"),n=se(),l=H("div"),o=H("input"),u=se(),c=H("label"),d=we("only chess move"),this.h()},l(I){e=K(I,"DIV",{class:!0});var L=V(e);s=K(L,"INPUT",{id:!0,type:!0}),i=ne(L),r=K(L,"LABEL",{for:!0,class:!0});var C=V(r);a=Ce(C,"L shape knight move"),C.forEach(P),L.forEach(P),n=ne(I),l=K(I,"DIV",{class:!0});var T=V(l);o=K(T,"INPUT",{id:!0,type:!0}),u=ne(T),c=K(T,"LABEL",{for:!0,class:!0});var f=V(c);d=Ce(f,"only chess move"),f.forEach(P),T.forEach(P),this.h()},h(){v(s,"id","knightLShapeMoveEnabled"),v(s,"type","checkbox"),v(r,"for","knightLShapeMoveEnabled"),v(r,"class","select-none"),v(e,"class","mb-2"),v(o,"id","onlyChessMoveEnabled"),v(o,"type","checkbox"),v(c,"for","onlyChessMoveEnabled"),v(c,"class","select-none"),v(l,"class","mb-2")},m(I,L){Y(I,e,L),O(e,s),s.checked=t[1],O(e,i),O(e,r),O(r,a),Y(I,n,L),Y(I,l,L),O(l,o),o.checked=t[2],O(l,u),O(l,c),O(c,d),p||(S=[fe(s,"change",t[5]),fe(o,"change",t[6])],p=!0)},p(I,L){L&2&&(s.checked=I[1]),L&4&&(o.checked=I[2])},d(I){I&&P(e),I&&P(n),I&&P(l),p=!1,at(S)}}}function ua(t){let e,s,i;function r(n){t[7](n)}let a={name:t[3],expanded:t[4],$$slots:{default:[oa]},$$scope:{ctx:t}};return t[0]!==void 0&&(a.enabled=t[0]),e=new lt({props:a}),oe.push(()=>be(e,"enabled",r)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&8&&(o.name=n[3]),l&16&&(o.expanded=n[4]),l&262&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function ca(t,e,s){let{name:i="DrawTools"}=e,{enabled:r=!1}=e,{knightLShape:a=!1}=e,{onlyChessMove:n=!1}=e,{expanded:l=!1}=e;function o(){a=this.checked,s(1,a)}function u(){n=this.checked,s(2,n)}function c(d){r=d,s(0,r)}return t.$$set=d=>{"name"in d&&s(3,i=d.name),"enabled"in d&&s(0,r=d.enabled),"knightLShape"in d&&s(1,a=d.knightLShape),"onlyChessMove"in d&&s(2,n=d.onlyChessMove),"expanded"in d&&s(4,l=d.expanded)},[r,a,n,i,l,o,u,c]}class fa extends Ie{constructor(e){super(),qe(this,e,ca,ua,Fe,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function un(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function cn(t){let e,s,i,r,a=t[7].toLowerCase()+"",n,l,o,u;function c(){t[5].call(s,t[7])}return{c(){e=H("div"),s=H("input"),i=se(),r=H("label"),n=we(a),l=se(),this.h()},l(d){e=K(d,"DIV",{class:!0});var p=V(e);s=K(p,"INPUT",{id:!0,type:!0}),i=ne(p),r=K(p,"LABEL",{for:!0,class:!0});var S=V(r);n=Ce(S,a),S.forEach(P),l=ne(p),p.forEach(P),this.h()},h(){v(s,"id",t[7]+"Enabled"),v(s,"type","checkbox"),v(r,"for",t[7]+"Enabled"),v(r,"class","select-none"),v(e,"class","mb-2")},m(d,p){Y(d,e,p),O(e,s),s.checked=t[1][t[7]],O(e,i),O(e,r),O(r,n),O(e,l),o||(u=fe(s,"change",c),o=!0)},p(d,p){t=d,p&18&&(s.checked=t[1][t[7]])},d(d){d&&P(e),o=!1,u()}}}function da(t){let e,s=t[4],i=[];for(let r=0;r<s.length;r+=1)i[r]=cn(un(t,s,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Le()},l(r){for(let a=0;a<i.length;a+=1)i[a].l(r);e=Le()},m(r,a){for(let n=0;n<i.length;n+=1)i[n].m(r,a);Y(r,e,a)},p(r,a){if(a&18){s=r[4];let n;for(n=0;n<s.length;n+=1){const l=un(r,s,n);i[n]?i[n].p(l,a):(i[n]=cn(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(r){rt(i,r),r&&P(e)}}}function ha(t){let e,s,i;function r(n){t[6](n)}let a={name:t[2],expanded:t[3],$$slots:{default:[da]},$$scope:{ctx:t}};return t[0]!==void 0&&(a.enabled=t[0]),e=new lt({props:a}),oe.push(()=>be(e,"enabled",r)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function ga(t,e,s){let{name:i="Sounds"}=e,{enabled:r=!1}=e,{settings:a}=e;const n=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:l=!1}=e;function o(c){a[c]=this.checked,s(1,a)}function u(c){r=c,s(0,r)}return t.$$set=c=>{"name"in c&&s(2,i=c.name),"enabled"in c&&s(0,r=c.enabled),"settings"in c&&s(1,a=c.settings),"expanded"in c&&s(3,l=c.expanded)},[r,a,i,l,n,o,u]}class ba extends Ie{constructor(e){super(),qe(this,e,ga,ha,Fe,{name:2,enabled:0,settings:1,expanded:3})}}function pa(t){let e,s;return{c(){e=Re("svg"),s=Re("path"),this.h()},l(i){e=De(i,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var r=V(e);s=De(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),V(s).forEach(P),r.forEach(P),this.h()},h(){v(s,"stroke-linecap","round"),v(s,"stroke-linejoin","round"),v(s,"stroke-width","2"),v(s,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),Pe(e,"transform","translate(1px, 0px)"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"class","h-5"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"aria-hidden","true"),v(e,"stroke","currentColor")},m(i,r){Y(i,e,r),O(e,s)},d(i){i&&P(e)}}}function ma(t){let e,s;return{c(){e=Re("svg"),s=Re("path"),this.h()},l(i){e=De(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var r=V(e);s=De(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),V(s).forEach(P),r.forEach(P),this.h()},h(){v(s,"stroke-linecap","round"),v(s,"stroke-linejoin","round"),v(s,"stroke-width","2"),v(s,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"class","h-5 text-green-500"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"aria-hidden","true"),v(e,"stroke","currentColor")},m(i,r){Y(i,e,r),O(e,s)},d(i){i&&P(e)}}}function va(t){let e,s,i;function r(l,o){return l[1]?ma:pa}let a=r(t),n=a(t);return{c(){e=H("button"),n.c(),this.h()},l(l){e=K(l,"BUTTON",{type:!0,class:!0});var o=V(e);n.l(o),o.forEach(P),this.h()},h(){v(e,"type","button"),v(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(l,o){Y(l,e,o),n.m(e,null),t[4](e),s||(i=fe(e,"click",t[2]),s=!0)},p(l,[o]){a!==(a=r(l))&&(n.d(1),n=a(l),n&&(n.c(),n.m(e,null)))},i:Te,o:Te,d(l){l&&P(e),n.d(),t[4](null),s=!1,i()}}}function _a(t,e,s){let{copyText:i}=e,r,a=!1;function n(){navigator.clipboard.writeText(i),s(1,a=!0),setTimeout(()=>{s(1,a=!1)},2e3),r.setAttribute("data-cooltipz-dir","top"),r.setAttribute("aria-label","Copied!"),setTimeout(()=>{r.removeAttribute("aria-label"),r.removeAttribute("data-cooltipz-dir")},2e3)}function l(o){oe[o?"unshift":"push"](()=>{r=o,s(0,r)})}return t.$$set=o=>{"copyText"in o&&s(3,i=o.copyText)},[r,a,n,i,l]}class Ea extends Ie{constructor(e){super(),qe(this,e,_a,va,Fe,{copyText:3})}}function Ma(t){let e,s,i;function r(n){t[2](n)}let a={name:t[1],showExpand:!1};return t[0]!==void 0&&(a.enabled=t[0]),e=new lt({props:a}),oe.push(()=>be(e,"enabled",r)),e.$on("changed",t[3]),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&2&&(o.name=n[1]),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function ka(t,e,s){let{name:i="Legal"}=e,{enabled:r=!1}=e;function a(l){r=l,s(0,r)}function n(l){Ve.call(this,t,l)}return t.$$set=l=>{"name"in l&&s(1,i=l.name),"enabled"in l&&s(0,r=l.enabled)},[r,i,a,n]}class Sa extends Ie{constructor(e){super(),qe(this,e,ka,Ma,Fe,{name:1,enabled:0})}}function wa(t){let e,s,i,r,a,n,l,o,u,c,d,p,S,I,L,C,T,f,m,w,y,A,N,W,B,R,G,re,de,$,g,k,M,E,b,q,h,F,Q,x,ee,j,ue,X,ae,ce,me,Oe,le,Se,Ne,Ge,Qe,We,Ke,pt,ft,Xe,mt,ot,dt,je,ht,ze,Je,vt,wt;function Rt(U){t[7](U)}function Dt(U){t[8](U)}function Bt(U){t[9](U)}function Ut(U){t[10](U)}function Ht(U){t[11](U)}let xe={expanded:!0};t[0].board.boardTheme!==void 0&&(xe.boardTheme=t[0].board.boardTheme),t[0].board.mouseEvents!==void 0&&(xe.mouseEvents=t[0].board.mouseEvents),t[0].board.notation!==void 0&&(xe.notation=t[0].board.notation),t[0].board.flipped!==void 0&&(xe.flipped=t[0].board.flipped),t[0].board.resizible!==void 0&&(xe.resizible=t[0].board.resizible),n=new Yr({props:xe}),oe.push(()=>be(n,"boardTheme",Rt)),oe.push(()=>be(n,"mouseEvents",Dt)),oe.push(()=>be(n,"notation",Bt)),oe.push(()=>be(n,"flipped",Ut)),oe.push(()=>be(n,"resizible",Ht));function Kt(U){t[12](U)}function zt(U){t[13](U)}let _t={expanded:!0};t[0].movable.enabled!==void 0&&(_t.enabled=t[0].movable.enabled),t[0].movable.color!==void 0&&(_t.color=t[0].movable.color),S=new $r({props:_t}),oe.push(()=>be(S,"enabled",Kt)),oe.push(()=>be(S,"color",zt));function Vt(U){t[14](U)}function Wt(U){t[15](U)}function jt(U){t[16](U)}function Gt(U){t[17](U)}function Qt(U){t[18](U)}let $e={};t[0].draggable.enabled!==void 0&&($e.enabled=t[0].draggable.enabled),t[0].draggable.ghostPiece.enabled!==void 0&&($e.ghostPiece=t[0].draggable.ghostPiece.enabled),t[0].draggable.transition.enabled!==void 0&&($e.transition=t[0].draggable.transition.enabled),t[0].draggable.transition.settings.duration!==void 0&&($e.duration=t[0].draggable.transition.settings.duration),t[0].draggable.transition.settings.easing!==void 0&&($e.easing=t[0].draggable.transition.settings.easing),T=new na({props:$e}),oe.push(()=>be(T,"enabled",Vt)),oe.push(()=>be(T,"ghostPiece",Wt)),oe.push(()=>be(T,"transition",jt)),oe.push(()=>be(T,"duration",Gt)),oe.push(()=>be(T,"easing",Qt));function Xt(U){t[19](U)}let Ct={name:"Selectable",showExpand:!1};t[0].selectable.enabled!==void 0&&(Ct.enabled=t[0].selectable.enabled),W=new lt({props:Ct}),oe.push(()=>be(W,"enabled",Xt));function _(U){t[20](U)}let z={};t[0].legal.enabled!==void 0&&(z.enabled=t[0].legal.enabled),G=new Sa({props:z}),oe.push(()=>be(G,"enabled",_)),G.$on("changed",t[21]);function ie(U){t[22](U)}function ve(U){t[23](U)}let ye={};t[0].highlight.enabled!==void 0&&(ye.enabled=t[0].highlight.enabled),t[0].highlight.settings!==void 0&&(ye.settings=t[0].highlight.settings),$=new la({props:ye}),oe.push(()=>be($,"enabled",ie)),oe.push(()=>be($,"settings",ve));function et(U){t[24](U)}function ls(U){t[25](U)}function Tn(U){t[26](U)}let Pt={};t[0].drawTools.enabled!==void 0&&(Pt.enabled=t[0].drawTools.enabled),t[0].drawTools.settings.knightLShape!==void 0&&(Pt.knightLShape=t[0].drawTools.settings.knightLShape),t[0].drawTools.settings.onlyChessMove!==void 0&&(Pt.onlyChessMove=t[0].drawTools.settings.onlyChessMove),E=new fa({props:Pt}),oe.push(()=>be(E,"enabled",et)),oe.push(()=>be(E,"knightLShape",ls)),oe.push(()=>be(E,"onlyChessMove",Tn));function Ln(U){t[27](U)}function On(U){t[28](U)}let Yt={};t[0].sounds.enabled!==void 0&&(Yt.enabled=t[0].sounds.enabled),t[0].sounds.settings!==void 0&&(Yt.settings=t[0].sounds.settings),Q=new ba({props:Yt}),oe.push(()=>be(Q,"enabled",Ln)),oe.push(()=>be(Q,"settings",On));let In={config:t[6],className:"rounded-md"};return ae=new Vr({props:In}),t[29](ae),je=new Ea({props:{copyText:t[4]}}),ze=new Jn({props:{source:t[4],language:"svelte"}}),{c(){e=H("link"),s=se(),i=H("div"),r=H("div"),a=H("div"),_e(n.$$.fragment),p=se(),_e(S.$$.fragment),C=se(),_e(T.$$.fragment),N=se(),_e(W.$$.fragment),R=se(),_e(G.$$.fragment),de=se(),_e($.$$.fragment),M=se(),_e(E.$$.fragment),F=se(),_e(Q.$$.fragment),j=se(),ue=H("div"),X=H("div"),_e(ae.$$.fragment),ce=se(),me=H("div"),Oe=H("div"),le=H("div"),Se=H("button"),Ne=H("span"),Ge=we("ts"),We=se(),Ke=H("span"),pt=we("/"),ft=se(),Xe=H("span"),mt=we("js"),dt=se(),_e(je.$$.fragment),ht=se(),_e(ze.$$.fragment),this.h()},l(U){const ge=Wn("svelte-tebjht",document.head);e=K(ge,"LINK",{rel:!0,href:!0}),ge.forEach(P),s=ne(U),i=K(U,"DIV",{class:!0});var Ye=V(i);r=K(Ye,"DIV",{class:!0});var tt=V(r);a=K(tt,"DIV",{class:!0});var Ae=V(a);Ee(n.$$.fragment,Ae),p=ne(Ae),Ee(S.$$.fragment,Ae),C=ne(Ae),Ee(T.$$.fragment,Ae),N=ne(Ae),Ee(W.$$.fragment,Ae),R=ne(Ae),Ee(G.$$.fragment,Ae),de=ne(Ae),Ee($.$$.fragment,Ae),M=ne(Ae),Ee(E.$$.fragment,Ae),F=ne(Ae),Ee(Q.$$.fragment,Ae),Ae.forEach(P),j=ne(tt),ue=K(tt,"DIV",{class:!0});var ut=V(ue);X=K(ut,"DIV",{class:!0});var Et=V(X);Ee(ae.$$.fragment,Et),Et.forEach(P),ce=ne(ut),me=K(ut,"DIV",{class:!0});var gt=V(me);Oe=K(gt,"DIV",{class:!0});var Ze=V(Oe);le=K(Ze,"DIV",{class:!0});var st=V(le);Se=K(st,"BUTTON",{class:!0});var nt=V(Se);Ne=K(nt,"SPAN",{class:!0});var Mt=V(Ne);Ge=Ce(Mt,"ts"),Mt.forEach(P),We=ne(nt),Ke=K(nt,"SPAN",{class:!0});var kt=V(Ke);pt=Ce(kt,"/"),kt.forEach(P),ft=ne(nt),Xe=K(nt,"SPAN",{class:!0});var os=V(Xe);mt=Ce(os,"js"),os.forEach(P),nt.forEach(P),dt=ne(st),Ee(je.$$.fragment,st),st.forEach(P),ht=ne(Ze),Ee(ze.$$.fragment,Ze),Ze.forEach(P),gt.forEach(P),ut.forEach(P),tt.forEach(P),Ye.forEach(P),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",v(e,"rel","stylesheet"),v(e,"href","prism-one-dark.css"),v(a,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),v(X,"class","w-full lg:w-[calc(70vh*(var(--boardScale,70)/100*0.7+0.3))]"),v(Ne,"class",Qe=t[1]?"text-yellow-600":""),v(Ke,"class","text-gray-600"),v(Xe,"class",ot=t[1]?"":"text-yellow-600"),v(Se,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),v(le,"class","absolute right-2 top-2 flex gap-4"),v(Oe,"class","shadow-lg rounded "),v(me,"class","row-start-2 relative"),v(ue,"class","grid grid-rows-[90wh_auto] gap-10"),v(r,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),v(i,"class","my-10 grid grid-cols-center")},m(U,ge){O(document.head,e),Y(U,s,ge),Y(U,i,ge),O(i,r),O(r,a),Me(n,a,null),O(a,p),Me(S,a,null),O(a,C),Me(T,a,null),O(a,N),Me(W,a,null),O(a,R),Me(G,a,null),O(a,de),Me($,a,null),O(a,M),Me(E,a,null),O(a,F),Me(Q,a,null),O(r,j),O(r,ue),O(ue,X),Me(ae,X,null),O(ue,ce),O(ue,me),O(me,Oe),O(Oe,le),O(le,Se),O(Se,Ne),O(Ne,Ge),O(Se,We),O(Se,Ke),O(Ke,pt),O(Se,ft),O(Se,Xe),O(Xe,mt),O(le,dt),Me(je,le,null),O(Oe,ht),Me(ze,Oe,null),Je=!0,vt||(wt=fe(Se,"click",t[30]),vt=!0)},p(U,ge){const Ye={};!l&&ge[0]&1&&(l=!0,Ye.boardTheme=U[0].board.boardTheme,pe(()=>l=!1)),!o&&ge[0]&1&&(o=!0,Ye.mouseEvents=U[0].board.mouseEvents,pe(()=>o=!1)),!u&&ge[0]&1&&(u=!0,Ye.notation=U[0].board.notation,pe(()=>u=!1)),!c&&ge[0]&1&&(c=!0,Ye.flipped=U[0].board.flipped,pe(()=>c=!1)),!d&&ge[0]&1&&(d=!0,Ye.resizible=U[0].board.resizible,pe(()=>d=!1)),n.$set(Ye);const tt={};!I&&ge[0]&1&&(I=!0,tt.enabled=U[0].movable.enabled,pe(()=>I=!1)),!L&&ge[0]&1&&(L=!0,tt.color=U[0].movable.color,pe(()=>L=!1)),S.$set(tt);const Ae={};!f&&ge[0]&1&&(f=!0,Ae.enabled=U[0].draggable.enabled,pe(()=>f=!1)),!m&&ge[0]&1&&(m=!0,Ae.ghostPiece=U[0].draggable.ghostPiece.enabled,pe(()=>m=!1)),!w&&ge[0]&1&&(w=!0,Ae.transition=U[0].draggable.transition.enabled,pe(()=>w=!1)),!y&&ge[0]&1&&(y=!0,Ae.duration=U[0].draggable.transition.settings.duration,pe(()=>y=!1)),!A&&ge[0]&1&&(A=!0,Ae.easing=U[0].draggable.transition.settings.easing,pe(()=>A=!1)),T.$set(Ae);const ut={};!B&&ge[0]&1&&(B=!0,ut.enabled=U[0].selectable.enabled,pe(()=>B=!1)),W.$set(ut);const Et={};!re&&ge[0]&1&&(re=!0,Et.enabled=U[0].legal.enabled,pe(()=>re=!1)),G.$set(Et);const gt={};!g&&ge[0]&1&&(g=!0,gt.enabled=U[0].highlight.enabled,pe(()=>g=!1)),!k&&ge[0]&1&&(k=!0,gt.settings=U[0].highlight.settings,pe(()=>k=!1)),$.$set(gt);const Ze={};!b&&ge[0]&1&&(b=!0,Ze.enabled=U[0].drawTools.enabled,pe(()=>b=!1)),!q&&ge[0]&1&&(q=!0,Ze.knightLShape=U[0].drawTools.settings.knightLShape,pe(()=>q=!1)),!h&&ge[0]&1&&(h=!0,Ze.onlyChessMove=U[0].drawTools.settings.onlyChessMove,pe(()=>h=!1)),E.$set(Ze);const st={};!x&&ge[0]&1&&(x=!0,st.enabled=U[0].sounds.enabled,pe(()=>x=!1)),!ee&&ge[0]&1&&(ee=!0,st.settings=U[0].sounds.settings,pe(()=>ee=!1)),Q.$set(st);const nt={};ae.$set(nt),(!Je||ge[0]&2&&Qe!==(Qe=U[1]?"text-yellow-600":""))&&v(Ne,"class",Qe),(!Je||ge[0]&2&&ot!==(ot=U[1]?"":"text-yellow-600"))&&v(Xe,"class",ot);const Mt={};ge[0]&16&&(Mt.copyText=U[4]),je.$set(Mt);const kt={};ge[0]&16&&(kt.source=U[4]),ze.$set(kt)},i(U){Je||(Z(n.$$.fragment,U),Z(S.$$.fragment,U),Z(T.$$.fragment,U),Z(W.$$.fragment,U),Z(G.$$.fragment,U),Z($.$$.fragment,U),Z(E.$$.fragment,U),Z(Q.$$.fragment,U),Z(ae.$$.fragment,U),Z(je.$$.fragment,U),Z(ze.$$.fragment,U),Je=!0)},o(U){te(n.$$.fragment,U),te(S.$$.fragment,U),te(T.$$.fragment,U),te(W.$$.fragment,U),te(G.$$.fragment,U),te($.$$.fragment,U),te(E.$$.fragment,U),te(Q.$$.fragment,U),te(ae.$$.fragment,U),te(je.$$.fragment,U),te(ze.$$.fragment,U),Je=!1},d(U){P(e),U&&P(s),U&&P(i),ke(n),ke(S),ke(T),ke(W),ke(G),ke($),ke(E),ke(Q),t[29](null),ke(ae),ke(je),ke(ze),vt=!1,wt()}}}function Ca(t,e,s){const i=new Sn.Chess,r={movable:he.BOTH,legal:!0,callbacks:{afterMove:h=>i.move({from:h.substring(0,2),to:h.substring(2,4),...h.length>4&&{promotion:h[4]}}),getLegalMoves:()=>i.moves({verbose:!0}).map(h=>{var F;return h.from+h.to+((F=h.promotion)!=null?F:"")}),getWhiteToMove:()=>i.turn()==="w",getInCheck:()=>i.inCheck(),getLastMove:()=>{var F;const h=i.history({verbose:!0}).pop();return h?h.from+h.to+((F=h.promotion)!=null?F:""):""}},board:{resizible:!0}},a=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,n=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let l,o=new wn(r),u=!1,c=!0,d="";is(()=>{s(3,u=!0),s(0,o=l.getState())});const p=(h,F)=>{const Q=h.getConfig(),x=`
	import type { ChessboardConfig } from '@powchess/chessboard/boardConfig';`;u&&l.setState(h);let ee=JSON.stringify(Q,(ae,ce)=>ae==="callbacks"?"{functions}":ce,4);ee=ee.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',F?a:n);const j=`
	import { Color } from '@powchess/chessboard/enums';`;F&&(ee=ee.replaceAll(`movable: ${he.WHITE}`,"movable: Color.WHITE").replaceAll(`movable: ${he.BLACK}`,"movable: Color.BLACK").replaceAll(`movable: ${he.BOTH}`,"movable: Color.BOTH"));function ue(){return ee.includes("movable: Color.WHITE")||ee.includes("movable: Color.BLACK")||ee.includes("movable: Color.BOTH")}let X=`<script${F?' lang="ts"':""}>
	import Chessboard from '@powchess/chessboard';${F?x:""}${ue()&&F?j:""}${o.legal.enabled?F?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${F?": ChessboardConfig":""} = ${ee};
<\/script>

<Chessboard {config} className="rounded-md" />`;return F||(X=X.replaceAll("Color.WHITE",`${he.WHITE}`).replaceAll("Color.BLACK",`${he.BLACK}`).replaceAll("Color.BOTH",`${he.BOTH}`)),X};function S(h){t.$$.not_equal(o.board.boardTheme,h)&&(o.board.boardTheme=h,s(0,o))}function I(h){t.$$.not_equal(o.board.mouseEvents,h)&&(o.board.mouseEvents=h,s(0,o))}function L(h){t.$$.not_equal(o.board.notation,h)&&(o.board.notation=h,s(0,o))}function C(h){t.$$.not_equal(o.board.flipped,h)&&(o.board.flipped=h,s(0,o))}function T(h){t.$$.not_equal(o.board.resizible,h)&&(o.board.resizible=h,s(0,o))}function f(h){t.$$.not_equal(o.movable.enabled,h)&&(o.movable.enabled=h,s(0,o))}function m(h){t.$$.not_equal(o.movable.color,h)&&(o.movable.color=h,s(0,o))}function w(h){t.$$.not_equal(o.draggable.enabled,h)&&(o.draggable.enabled=h,s(0,o))}function y(h){t.$$.not_equal(o.draggable.ghostPiece.enabled,h)&&(o.draggable.ghostPiece.enabled=h,s(0,o))}function A(h){t.$$.not_equal(o.draggable.transition.enabled,h)&&(o.draggable.transition.enabled=h,s(0,o))}function N(h){t.$$.not_equal(o.draggable.transition.settings.duration,h)&&(o.draggable.transition.settings.duration=h,s(0,o))}function W(h){t.$$.not_equal(o.draggable.transition.settings.easing,h)&&(o.draggable.transition.settings.easing=h,s(0,o))}function B(h){t.$$.not_equal(o.selectable.enabled,h)&&(o.selectable.enabled=h,s(0,o))}function R(h){t.$$.not_equal(o.legal.enabled,h)&&(o.legal.enabled=h,s(0,o))}const G=()=>{o.legal.enabled||(i.reset(),u&&l.setFEN(o.board.startFen,!0,!1))};function re(h){t.$$.not_equal(o.highlight.enabled,h)&&(o.highlight.enabled=h,s(0,o))}function de(h){t.$$.not_equal(o.highlight.settings,h)&&(o.highlight.settings=h,s(0,o))}function $(h){t.$$.not_equal(o.drawTools.enabled,h)&&(o.drawTools.enabled=h,s(0,o))}function g(h){t.$$.not_equal(o.drawTools.settings.knightLShape,h)&&(o.drawTools.settings.knightLShape=h,s(0,o))}function k(h){t.$$.not_equal(o.drawTools.settings.onlyChessMove,h)&&(o.drawTools.settings.onlyChessMove=h,s(0,o))}function M(h){t.$$.not_equal(o.sounds.enabled,h)&&(o.sounds.enabled=h,s(0,o))}function E(h){t.$$.not_equal(o.sounds.settings,h)&&(o.sounds.settings=h,s(0,o))}function b(h){oe[h?"unshift":"push"](()=>{l=h,s(2,l)})}const q=()=>{s(1,c=!c)};return t.$$.update=()=>{t.$$.dirty[0]&3&&s(4,d=p(o,c))},[o,c,l,u,d,i,r,S,I,L,C,T,f,m,w,y,A,N,W,B,R,G,re,de,$,g,k,M,E,b,q]}class Ta extends Ie{constructor(e){super(),qe(this,e,Ca,wa,Fe,{},null,[-1,-1])}}export{Ta as default};
