import{S as Ie,i as Oe,s as Fe,B as ii,k as B,a as $,l as U,m as W,h as E,c as ee,p as Se,n as g,b as Y,F as S,C as ni,D as ai,E as ri,f as x,t as ie,H as Ot,I as is,J as le,K as qi,e as Ae,L as Di,q as me,r as _e,u as Nt,A as Ce,M as lt,N as li,O as Bi,P as Ui,Q as ns,R as ct,T as Yt,U as fe,V as Zt,W as Xe,X as Jt,G as Hi,Y as Je,Z as Ue,_ as He,o as xt,g as De,d as Be,$ as xe,a0 as Ki,a1 as Vi,a2 as be,v as ve,w as Ee,x as we,a3 as pe,y as ke,a4 as oi,a5 as Wi,a6 as as,a7 as zi,a8 as ui,z as ji,a9 as di,aa as ot,ab as vt,ac as $t,ad as rt,ae as at,af as Gi}from"../../chunks/index-18bffe9d.js";import{w as Qi}from"../../chunks/index-c2b86799.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var rs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fi={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,a={},l={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function c(f){return f instanceof o?new o(f.type,c(f.content),f.alias):Array.isArray(f)?f.map(c):f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(c){return Object.prototype.toString.call(c).slice(8,-1)},objId:function(c){return c.__id||Object.defineProperty(c,"__id",{value:++i}),c.__id},clone:function c(f,w){w=w||{};var P,A;switch(l.util.type(f)){case"Object":if(A=l.util.objId(f),w[A])return w[A];P={},w[A]=P;for(var H in f)f.hasOwnProperty(H)&&(P[H]=c(f[H],w));return P;case"Array":return A=l.util.objId(f),w[A]?w[A]:(P=[],w[A]=P,f.forEach(function(K,V){P[V]=c(K,w)}),P);default:return f}},getLanguage:function(c){for(;c;){var f=r.exec(c.className);if(f)return f[1].toLowerCase();c=c.parentElement}return"none"},setLanguage:function(c,f){c.className=c.className.replace(RegExp(r,"gi"),""),c.classList.add("language-"+f)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(P){var c=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(P.stack)||[])[1];if(c){var f=document.getElementsByTagName("script");for(var w in f)if(f[w].src==c)return f[w]}return null}},isActive:function(c,f,w){for(var P="no-"+f;c;){var A=c.classList;if(A.contains(f))return!0;if(A.contains(P))return!1;c=c.parentElement}return!!w}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(c,f){var w=l.util.clone(l.languages[c]);for(var P in f)w[P]=f[P];return w},insertBefore:function(c,f,w,P){P=P||l.languages;var A=P[c],H={};for(var K in A)if(A.hasOwnProperty(K)){if(K==f)for(var V in w)w.hasOwnProperty(V)&&(H[V]=w[V]);w.hasOwnProperty(K)||(H[K]=A[K])}var j=P[c];return P[c]=H,l.languages.DFS(l.languages,function(z,Q){Q===j&&z!=c&&(this[z]=H)}),H},DFS:function c(f,w,P,A){A=A||{};var H=l.util.objId;for(var K in f)if(f.hasOwnProperty(K)){w.call(f,K,f[K],P||K);var V=f[K],j=l.util.type(V);j==="Object"&&!A[H(V)]?(A[H(V)]=!0,c(V,w,null,A)):j==="Array"&&!A[H(V)]&&(A[H(V)]=!0,c(V,w,K,A))}}},plugins:{},highlightAll:function(c,f){l.highlightAllUnder(document,c,f)},highlightAllUnder:function(c,f,w){var P={callback:w,container:c,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",P),P.elements=Array.prototype.slice.apply(P.container.querySelectorAll(P.selector)),l.hooks.run("before-all-elements-highlight",P);for(var A=0,H;H=P.elements[A++];)l.highlightElement(H,f===!0,P.callback)},highlightElement:function(c,f,w){var P=l.util.getLanguage(c),A=l.languages[P];l.util.setLanguage(c,P);var H=c.parentElement;H&&H.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(H,P);var K=c.textContent,V={element:c,language:P,grammar:A,code:K};function j(Q){V.highlightedCode=Q,l.hooks.run("before-insert",V),V.element.innerHTML=V.highlightedCode,l.hooks.run("after-highlight",V),l.hooks.run("complete",V),w&&w.call(V.element)}if(l.hooks.run("before-sanity-check",V),H=V.element.parentElement,H&&H.nodeName.toLowerCase()==="pre"&&!H.hasAttribute("tabindex")&&H.setAttribute("tabindex","0"),!V.code){l.hooks.run("complete",V),w&&w.call(V.element);return}if(l.hooks.run("before-highlight",V),!V.grammar){j(l.util.encode(V.code));return}if(f&&n.Worker){var z=new Worker(l.filename);z.onmessage=function(Q){j(Q.data)},z.postMessage(JSON.stringify({language:V.language,code:V.code,immediateClose:!0}))}else j(l.highlight(V.code,V.grammar,V.language))},highlight:function(c,f,w){var P={code:c,grammar:f,language:w};if(l.hooks.run("before-tokenize",P),!P.grammar)throw new Error('The language "'+P.language+'" has no grammar.');return P.tokens=l.tokenize(P.code,P.grammar),l.hooks.run("after-tokenize",P),o.stringify(l.util.encode(P.tokens),P.language)},tokenize:function(c,f){var w=f.rest;if(w){for(var P in w)f[P]=w[P];delete f.rest}var A=new b;return m(A,A.head,c),d(c,A,f,A.head,0),F(A)},hooks:{all:{},add:function(c,f){var w=l.hooks.all;w[c]=w[c]||[],w[c].push(f)},run:function(c,f){var w=l.hooks.all[c];if(!(!w||!w.length))for(var P=0,A;A=w[P++];)A(f)}},Token:o};n.Prism=l;function o(c,f,w,P){this.type=c,this.content=f,this.alias=w,this.length=(P||"").length|0}o.stringify=function c(f,w){if(typeof f=="string")return f;if(Array.isArray(f)){var P="";return f.forEach(function(j){P+=c(j,w)}),P}var A={type:f.type,content:c(f.content,w),tag:"span",classes:["token",f.type],attributes:{},language:w},H=f.alias;H&&(Array.isArray(H)?Array.prototype.push.apply(A.classes,H):A.classes.push(H)),l.hooks.run("wrap",A);var K="";for(var V in A.attributes)K+=" "+V+'="'+(A.attributes[V]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+K+">"+A.content+"</"+A.tag+">"};function u(c,f,w,P){c.lastIndex=f;var A=c.exec(w);if(A&&P&&A[1]){var H=A[1].length;A.index+=H,A[0]=A[0].slice(H)}return A}function d(c,f,w,P,A,H){for(var K in w)if(!(!w.hasOwnProperty(K)||!w[K])){var V=w[K];V=Array.isArray(V)?V:[V];for(var j=0;j<V.length;++j){if(H&&H.cause==K+","+j)return;var z=V[j],Q=z.inside,ce=!!z.lookbehind,q=!!z.greedy,h=z.alias;if(q&&!z.pattern.global){var k=z.pattern.toString().match(/[imsuy]*$/)[0];z.pattern=RegExp(z.pattern.source,k+"g")}for(var M=z.pattern||z,v=P.next,L=A;v!==f.tail&&!(H&&L>=H.reach);L+=v.value.length,v=v.next){var N=v.value;if(f.length>c.length)return;if(!(N instanceof o)){var R=1,p;if(q){if(p=u(M,L,c,ce),!p||p.index>=c.length)break;var G=p.index,O=p.index+p[0].length,X=L;for(X+=v.value.length;G>=X;)v=v.next,X+=v.value.length;if(X-=v.value.length,L=X,v.value instanceof o)continue;for(var se=v;se!==f.tail&&(X<O||typeof se.value=="string");se=se.next)R++,X+=se.value.length;R--,N=c.slice(L,X),p.index-=L}else if(p=u(M,0,N,ce),!p)continue;var G=p.index,ae=p[0],te=N.slice(0,G),re=N.slice(G+ae.length),oe=L+N.length;H&&oe>H.reach&&(H.reach=oe);var de=v.prev;te&&(de=m(f,de,te),L+=te.length),y(f,de,R);var Me=new o(K,Q?l.tokenize(ae,Q):ae,h,ae);if(v=m(f,de,Me),re&&m(f,v,re),R>1){var ne={cause:K+","+j,reach:oe};d(c,f,w,v.prev,L,ne),H&&ne.reach>H.reach&&(H.reach=ne.reach)}}}}}}function b(){var c={value:null,prev:null,next:null},f={value:null,prev:c,next:null};c.next=f,this.head=c,this.tail=f,this.length=0}function m(c,f,w){var P=f.next,A={value:w,prev:f,next:P};return f.next=A,P.prev=A,c.length++,A}function y(c,f,w){for(var P=f.next,A=0;A<w&&P!==c.tail;A++)P=P.next;f.next=P,P.prev=f,c.length-=A}function F(c){for(var f=[],w=c.head.next;w!==c.tail;)f.push(w.value),w=w.next;return f}if(!n.document)return n.addEventListener&&(l.disableWorkerMessageHandler||n.addEventListener("message",function(c){var f=JSON.parse(c.data),w=f.language,P=f.code,A=f.immediateClose;n.postMessage(l.highlight(P,l.languages[w],w)),A&&n.close()},!1)),l;var I=l.util.currentScript();I&&(l.filename=I.src,I.hasAttribute("data-manual")&&(l.manual=!0));function T(){l.manual||l.highlightAll()}if(!l.manual){var _=document.readyState;_==="loading"||_==="interactive"&&I&&I.defer?document.addEventListener("DOMContentLoaded",T):window.requestAnimationFrame?window.requestAnimationFrame(T):window.setTimeout(T,16)}return l}(e);s.exports&&(s.exports=t),typeof rs<"u"&&(rs.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(r,i){var a={};a["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};l["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var o={};o[r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return r}),"i"),lookbehind:!0,greedy:!0,inside:l},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,r){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[r,"language-"+r],inside:t.languages[r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+r.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var i=n.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading\u2026",r=function(I,T){return"\u2716 Error "+I+" while fetching file: "+T},i="\u2716 Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",d="failed",b="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function m(I,T,_){var c=new XMLHttpRequest;c.open("GET",I,!0),c.onreadystatechange=function(){c.readyState==4&&(c.status<400&&c.responseText?T(c.responseText):c.status>=400?_(r(c.status,c.statusText)):_(i))},c.send(null)}function y(I){var T=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(I||"");if(T){var _=Number(T[1]),c=T[2],f=T[3];return c?f?[_,Number(f)]:[_,void 0]:[_,_]}}t.hooks.add("before-highlightall",function(I){I.selector+=", "+b}),t.hooks.add("before-sanity-check",function(I){var T=I.element;if(T.matches(b)){I.code="",T.setAttribute(l,o);var _=T.appendChild(document.createElement("CODE"));_.textContent=n;var c=T.getAttribute("data-src"),f=I.language;if(f==="none"){var w=(/\.(\w+)$/.exec(c)||[,"none"])[1];f=a[w]||w}t.util.setLanguage(_,f),t.util.setLanguage(T,f);var P=t.plugins.autoloader;P&&P.loadLanguages(f),m(c,function(A){T.setAttribute(l,u);var H=y(T.getAttribute("data-range"));if(H){var K=A.split(/\r\n?|\n/g),V=H[0],j=H[1]==null?K.length:H[1];V<0&&(V+=K.length),V=Math.max(0,Math.min(V-1,K.length)),j<0&&(j+=K.length),j=Math.max(0,Math.min(j,K.length)),A=K.slice(V,j).join(`
`),T.hasAttribute("data-start")||T.setAttribute("data-start",String(V+1))}_.textContent=A,t.highlightElement(_)},function(A){T.setAttribute(l,d),_.textContent=A})}}),t.plugins.fileHighlight={highlight:function(T){for(var _=(T||document).querySelectorAll(b),c=0,f;f=_[c++];)t.highlightElement(f)}};var F=!1;t.fileHighlight=function(){F||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),F=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(fi);const ci=fi.exports,ls="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+ls+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+ls+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",s=>{s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,t){const n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;const r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};const i={};i[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:r},Prism.languages.insertBefore("svelte","cdata",i)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function Xi(s){let e,t;return{c(){e=new qi(!1),t=Ae(),this.h()},l(n){e=Di(n,!1),t=Ae(),this.h()},h(){e.a=t},m(n,r){e.m(s[2],n,r),Y(n,t,r)},p(n,r){r&4&&e.p(n[2])},d(n){n&&E(t),n&&e.d()}}}function Yi(s){let e;return{c(){e=me(s[2])},l(t){e=_e(t,s[2])},m(t,n){Y(t,e,n)},p(t,n){n&4&&Nt(e,t[2])},d(t){t&&E(e)}}}function Zi(s){let e,t,n,r,i,a,l;const o=s[6].default,u=ii(o,s,s[5],null);function d(y,F){return y[0]==="none"?Yi:Xi}let b=d(s),m=b(s);return{c(){e=B("code"),u&&u.c(),t=$(),n=B("pre"),r=B("code"),m.c(),this.h()},l(y){e=U(y,"CODE",{style:!0});var F=W(e);u&&u.l(F),F.forEach(E),t=ee(y),n=U(y,"PRE",{class:!0,"command-line":!0,"data-output":!0});var I=W(n);r=U(I,"CODE",{class:!0});var T=W(r);m.l(T),T.forEach(E),I.forEach(E),this.h()},h(){Se(e,"display","none"),g(r,"class",i="language-"+s[0]),g(n,"class",a="language-"+s[0]),g(n,"command-line",""),g(n,"data-output","2-17")},m(y,F){Y(y,e,F),u&&u.m(e,null),s[7](e),Y(y,t,F),Y(y,n,F),S(n,r),m.m(r,null),l=!0},p(y,[F]){u&&u.p&&(!l||F&32)&&ni(u,o,y,y[5],l?ri(o,y[5],F,null):ai(y[5]),null),b===(b=d(y))&&m?m.p(y,F):(m.d(1),m=b(y),m&&(m.c(),m.m(r,null))),(!l||F&1&&i!==(i="language-"+y[0]))&&g(r,"class",i),(!l||F&1&&a!==(a="language-"+y[0]))&&g(n,"class",a)},i(y){l||(x(u,y),l=!0)},o(y){ie(u,y),l=!1},d(y){y&&E(e),u&&u.d(y),s[7](null),y&&E(t),y&&E(n),m.d()}}}const os=ci;ci.highlightElement;const Ji={transform:s=>s};function xi(s,e,t){let{$$slots:n={},$$scope:r}=e,{language:i="javascript"}=e,{source:a=""}=e,{transform:l=m=>m}=e,o,u;function d(){const m=os.languages[i];let y=a||o.textContent;y=Ji.transform(y),y=l(y),t(2,u=i==="none"?y:os.highlight(y,m,i))}function b(m){le[m?"unshift":"push"](()=>{o=m,t(1,o)})}return s.$$set=m=>{t(9,e=Ot(Ot({},e),is(m))),"language"in m&&t(0,i=m.language),"source"in m&&t(3,a=m.source),"transform"in m&&t(4,l=m.transform),"$$scope"in m&&t(5,r=m.$$scope)},s.$$.update=()=>{e&&(a||o)&&d()},e=is(e),[i,o,u,a,l,r,n,b]}class $i extends Ie{constructor(e){super(),Oe(this,e,xi,Zi,Fe,{language:0,source:3,transform:4})}}var hi={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Chess=s.validateFen=s.SQUARES=s.DEFAULT_POSITION=s.KING=s.QUEEN=s.ROOK=s.BISHOP=s.KNIGHT=s.PAWN=s.BLACK=s.WHITE=void 0,s.WHITE="w",s.BLACK="b",s.PAWN="p",s.KNIGHT="n",s.BISHOP="b",s.ROOK="r",s.QUEEN="q",s.KING="k",s.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";const e=-1,t={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"};s.SQUARES=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"];const n={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},r={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},i={b:[16,32,17,15],w:[-16,-32,-17,-15]},a={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},l=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],o=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],u={p:1,n:2,b:4,r:8,q:16,k:32},d="pnbrqkPNBRQK",b=[s.KNIGHT,s.BISHOP,s.ROOK,s.QUEEN],m=7,y=6,F=1,I=0,T={w:[{square:r.a1,flag:n.QSIDE_CASTLE},{square:r.h1,flag:n.KSIDE_CASTLE}],b:[{square:r.a8,flag:n.QSIDE_CASTLE},{square:r.h8,flag:n.KSIDE_CASTLE}]},_={b:F,w:y},c=["1-0","0-1","1/2-1/2","*"];function f(q){return q>>4}function w(q){return q&15}function P(q){return"0123456789".indexOf(q)!==-1}function A(q){const h=w(q),k=f(q);return"abcdefgh".substring(h,h+1)+"87654321".substring(k,k+1)}function H(q){return q===s.WHITE?s.BLACK:s.WHITE}function K(q){const h=[];h[0]="No errors.",h[1]="FEN string must contain six space-delimited fields.",h[2]="6th field (move number) must be a positive integer.",h[3]="5th field (half move counter) must be a non-negative integer.",h[4]="4th field (en-passant square) is invalid.",h[5]="3rd field (castling availability) is invalid.",h[6]="2nd field (side to move) is invalid.",h[7]="1st field (piece positions) does not contain 8 '/'-delimited rows.",h[8]="1st field (piece positions) is invalid [consecutive numbers].",h[9]="1st field (piece positions) is invalid [invalid piece].",h[10]="1st field (piece positions) is invalid [row too large].",h[11]="Illegal en-passant square";const k=q.split(/\s+/);if(k.length!==6)return{valid:!1,errorNumber:1,error:h[1]};const M=parseInt(k[5],10);if(isNaN(M)||M<=0)return{valid:!1,errorNumber:2,error:h[2]};const v=parseInt(k[4],10);if(isNaN(v)||v<0)return{valid:!1,errorNumber:3,error:h[3]};if(!/^(-|[abcdefgh][36])$/.test(k[3]))return{valid:!1,errorNumber:4,error:h[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(k[2]))return{valid:!1,errorNumber:5,error:h[5]};if(!/^(w|b)$/.test(k[1]))return{valid:!1,errorNumber:6,error:h[6]};const L=k[0].split("/");if(L.length!==8)return{valid:!1,errorNumber:7,error:h[7]};for(let N=0;N<L.length;N++){let R=0,p=!1;for(let O=0;O<L[N].length;O++)if(P(L[N][O])){if(p)return{valid:!1,errorNumber:8,error:h[8]};R+=parseInt(L[N][O],10),p=!0}else{if(!/^[prnbqkPRNBQK]$/.test(L[N][O]))return{valid:!1,errorNumber:9,error:h[9]};R+=1,p=!1}if(R!==8)return{valid:!1,errorNumber:10,error:h[10]}}return k[3][1]=="3"&&k[1]=="w"||k[3][1]=="6"&&k[1]=="b"?{valid:!1,errorNumber:11,error:h[11]}:{valid:!0,errorNumber:0,error:h[0]}}s.validateFen=K;function V(q,h){const k=q.from,M=q.to,v=q.piece;let L=0,N=0,R=0;for(let p=0,O=h.length;p<O;p++){const X=h[p].from,se=h[p].to,G=h[p].piece;v===G&&k!==X&&M===se&&(L++,f(k)===f(X)&&N++,w(k)===w(X)&&R++)}return L>0?N>0&&R>0?A(k):R>0?A(k).charAt(1):A(k).charAt(0):""}function j(q,h,k,M,v,L=void 0,N=n.NORMAL){const R=f(M);if(v===s.PAWN&&(R===m||R===I))for(let p=0;p<b.length;p++){const O=b[p];q.push({color:h,from:k,to:M,piece:v,captured:L,promotion:O,flags:N|n.PROMOTION})}else q.push({color:h,from:k,to:M,piece:v,captured:L,promotion:void 0,flags:N})}function z(q){let h=q.charAt(0);return h>="a"&&h<="h"?q.match(/[a-h]\d.*[a-h]\d/)?void 0:s.PAWN:(h=h.toLowerCase(),h==="o"?s.KING:h)}function Q(q){return q.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class ce{constructor(h=s.DEFAULT_POSITION){this._board=new Array(128),this._turn=s.WHITE,this._header={},this._kings={w:e,b:e},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(h)}clear(h=!1){this._board=new Array(128),this._kings={w:e,b:e},this._turn=s.WHITE,this._castling={w:0,b:0},this._epSquare=e,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=h?this._header:{},this._updateSetup(this.fen())}load(h,k=!1){const M=h.split(/\s+/),v=M[0];let L=0;if(!K(h).valid)return!1;this.clear(k);for(let N=0;N<v.length;N++){const R=v.charAt(N);if(R==="/")L+=8;else if(P(R))L+=parseInt(R,10);else{const p=R<"a"?s.WHITE:s.BLACK;this.put({type:R.toLowerCase(),color:p},A(L)),L++}}return this._turn=M[1],M[2].indexOf("K")>-1&&(this._castling.w|=n.KSIDE_CASTLE),M[2].indexOf("Q")>-1&&(this._castling.w|=n.QSIDE_CASTLE),M[2].indexOf("k")>-1&&(this._castling.b|=n.KSIDE_CASTLE),M[2].indexOf("q")>-1&&(this._castling.b|=n.QSIDE_CASTLE),this._epSquare=M[3]==="-"?e:r[M[3]],this._halfMoves=parseInt(M[4],10),this._moveNumber=parseInt(M[5],10),this._updateSetup(this.fen()),!0}fen(){let h=0,k="";for(let L=r.a8;L<=r.h1;L++){if(this._board[L]){h>0&&(k+=h,h=0);const{color:N,type:R}=this._board[L];k+=N===s.WHITE?R.toUpperCase():R.toLowerCase()}else h++;L+1&136&&(h>0&&(k+=h),L!==r.h1&&(k+="/"),h=0,L+=8)}let M="";this._castling[s.WHITE]&n.KSIDE_CASTLE&&(M+="K"),this._castling[s.WHITE]&n.QSIDE_CASTLE&&(M+="Q"),this._castling[s.BLACK]&n.KSIDE_CASTLE&&(M+="k"),this._castling[s.BLACK]&n.QSIDE_CASTLE&&(M+="q"),M=M||"-";const v=this._epSquare===e?"-":A(this._epSquare);return[k,this._turn,M,v,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(h){this._history.length>0||(h!==s.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=h):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(s.DEFAULT_POSITION)}get(h){return this._board[r[h]]||!1}put({type:h,color:k},M){if(d.indexOf(h.toLowerCase())===-1||!(M in r))return!1;const v=r[M];return h==s.KING&&!(this._kings[k]==e||this._kings[k]==v)?!1:(this._board[v]={type:h,color:k},h===s.KING&&(this._kings[k]=v),this._updateSetup(this.fen()),!0)}remove(h){const k=this.get(h);return delete this._board[r[h]],k&&k.type===s.KING&&(this._kings[k.color]=e),this._updateSetup(this.fen()),k}_attacked(h,k){for(let M=r.a8;M<=r.h1;M++){if(M&136){M+=7;continue}if(this._board[M]===void 0||this._board[M].color!==h)continue;const v=this._board[M],L=M-k,N=L+119;if(l[N]&u[v.type]){if(v.type===s.PAWN){if(L>0){if(v.color===s.WHITE)return!0}else if(v.color===s.BLACK)return!0;continue}if(v.type==="n"||v.type==="k")return!0;const R=o[N];let p=M+R,O=!1;for(;p!==k;){if(this._board[p]!=null){O=!0;break}p+=R}if(!O)return!0}}return!1}_isKingAttacked(h){return this._attacked(H(h),this._kings[h])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const h={b:0,n:0,r:0,q:0,k:0,p:0},k=[];let M=0,v=0;for(let L=r.a8;L<=r.h1;L++){if(v=(v+1)%2,L&136){L+=7;continue}const N=this._board[L];N&&(h[N.type]=N.type in h?h[N.type]+1:1,N.type===s.BISHOP&&k.push(v),M++)}if(M===2)return!0;if(M===3&&(h[s.BISHOP]===1||h[s.KNIGHT]===1))return!0;if(M===h[s.BISHOP]+2){let L=0;const N=k.length;for(let R=0;R<N;R++)L+=k[R];if(L===0||L===N)return!0}return!1}isThreefoldRepetition(){const h=[],k={};let M=!1;for(;;){const v=this._undoMove();if(!v)break;h.push(v)}for(;;){const v=this.fen().split(" ").slice(0,4).join(" ");k[v]=v in k?k[v]+1:1,k[v]>=3&&(M=!0);const L=h.pop();if(L)this._makeMove(L);else break}return M}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:h=!1,square:k=void 0}={}){const M=this._moves({square:k});return h?M.map(v=>this._makePretty(v)):M.map(v=>this._moveToSan(v,M))}_moves({legal:h=!0,piece:k=void 0,square:M=void 0}={}){var v;const L=M?M.toLowerCase():void 0,N=k==null?void 0:k.toLowerCase(),R=[],p=this._turn,O=H(p);let X=r.a8,se=r.h1,G=!1;if(L)if(L in r)X=se=r[L],G=!0;else return[];for(let te=X;te<=se;te++){if(te&136){te+=7;continue}if(!this._board[te]||this._board[te].color===O)continue;const{type:re}=this._board[te];let oe;if(re===s.PAWN){if(N&&N!==re)continue;oe=te+i[p][0],this._board[oe]||(j(R,p,te,oe,s.PAWN),oe=te+i[p][1],_[p]===f(te)&&!this._board[oe]&&j(R,p,te,oe,s.PAWN,void 0,n.BIG_PAWN));for(let de=2;de<4;de++)oe=te+i[p][de],!(oe&136)&&(((v=this._board[oe])===null||v===void 0?void 0:v.color)===O?j(R,p,te,oe,s.PAWN,this._board[oe].type,n.CAPTURE):oe===this._epSquare&&j(R,p,te,oe,s.PAWN,s.PAWN,n.EP_CAPTURE))}else{if(N&&N!==re)continue;for(let de=0,Me=a[re].length;de<Me;de++){const ne=a[re][de];for(oe=te;oe+=ne,!(oe&136);){if(!this._board[oe])j(R,p,te,oe,re);else{if(this._board[oe].color===p)break;j(R,p,te,oe,re,this._board[oe].type,n.CAPTURE);break}if(re===s.KNIGHT||re===s.KING)break}}}}if((N===void 0||N===s.KING)&&(!G||se===this._kings[p])){if(this._castling[p]&n.KSIDE_CASTLE){const te=this._kings[p],re=te+2;!this._board[te+1]&&!this._board[re]&&!this._attacked(O,this._kings[p])&&!this._attacked(O,te+1)&&!this._attacked(O,re)&&j(R,p,this._kings[p],re,s.KING,void 0,n.KSIDE_CASTLE)}if(this._castling[p]&n.QSIDE_CASTLE){const te=this._kings[p],re=te-2;!this._board[te-1]&&!this._board[te-2]&&!this._board[te-3]&&!this._attacked(O,this._kings[p])&&!this._attacked(O,te-1)&&!this._attacked(O,re)&&j(R,p,this._kings[p],re,s.KING,void 0,n.QSIDE_CASTLE)}}if(!h)return R;const ae=[];for(let te=0,re=R.length;te<re;te++)this._makeMove(R[te]),this._isKingAttacked(p)||ae.push(R[te]),this._undoMove();return ae}move(h,{sloppy:k=!1}={}){let M=null;if(typeof h=="string")M=this._moveFromSan(h,k);else if(typeof h=="object"){const L=this._moves();for(let N=0,R=L.length;N<R;N++)if(h.from===A(L[N].from)&&h.to===A(L[N].to)&&(!("promotion"in L[N])||h.promotion===L[N].promotion)){M=L[N];break}}if(!M)return null;const v=this._makePretty(M);return this._makeMove(M),v}_push(h){this._history.push({move:h,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(h){const k=this._turn,M=H(k);if(this._push(h),this._board[h.to]=this._board[h.from],delete this._board[h.from],h.flags&n.EP_CAPTURE&&(this._turn===s.BLACK?delete this._board[h.to-16]:delete this._board[h.to+16]),h.promotion&&(this._board[h.to]={type:h.promotion,color:k}),this._board[h.to].type===s.KING){if(this._kings[k]=h.to,h.flags&n.KSIDE_CASTLE){const v=h.to-1,L=h.to+1;this._board[v]=this._board[L],delete this._board[L]}else if(h.flags&n.QSIDE_CASTLE){const v=h.to+1,L=h.to-2;this._board[v]=this._board[L],delete this._board[L]}this._castling[k]=0}if(this._castling[k]){for(let v=0,L=T[k].length;v<L;v++)if(h.from===T[k][v].square&&this._castling[k]&T[k][v].flag){this._castling[k]^=T[k][v].flag;break}}if(this._castling[M]){for(let v=0,L=T[M].length;v<L;v++)if(h.to===T[M][v].square&&this._castling[M]&T[M][v].flag){this._castling[M]^=T[M][v].flag;break}}h.flags&n.BIG_PAWN?k===s.BLACK?this._epSquare=h.to-16:this._epSquare=h.to+16:this._epSquare=e,h.piece===s.PAWN?this._halfMoves=0:h.flags&(n.CAPTURE|n.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,k===s.BLACK&&this._moveNumber++,this._turn=M}undo(){const h=this._undoMove();return h?this._makePretty(h):null}_undoMove(){const h=this._history.pop();if(h===void 0)return null;const k=h.move;this._kings=h.kings,this._turn=h.turn,this._castling=h.castling,this._epSquare=h.epSquare,this._halfMoves=h.halfMoves,this._moveNumber=h.moveNumber;const M=this._turn,v=H(M);if(this._board[k.from]=this._board[k.to],this._board[k.from].type=k.piece,delete this._board[k.to],k.captured)if(k.flags&n.EP_CAPTURE){let L;M===s.BLACK?L=k.to-16:L=k.to+16,this._board[L]={type:s.PAWN,color:v}}else this._board[k.to]={type:k.captured,color:v};if(k.flags&(n.KSIDE_CASTLE|n.QSIDE_CASTLE)){let L,N;k.flags&n.KSIDE_CASTLE?(L=k.to+1,N=k.to-1):(L=k.to-2,N=k.to+1),this._board[L]=this._board[N],delete this._board[N]}return k}pgn({newline:h=`
`,maxWidth:k=0}={}){const M=[];let v=!1;for(const G in this._header)M.push("["+G+' "'+this._header[G]+'"]'+h),v=!0;v&&this._history.length&&M.push(h);const L=G=>{const ae=this._comments[this.fen()];if(typeof ae<"u"){const te=G.length>0?" ":"";G=`${G}${te}{${ae}}`}return G},N=[];for(;this._history.length>0;)N.push(this._undoMove());const R=[];let p="";for(N.length===0&&R.push(L(""));N.length>0;){p=L(p);const G=N.pop();if(!G)break;if(!this._history.length&&G.color==="b"){const ae=`${this._moveNumber}. ...`;p=p?`${p} ${ae}`:ae}else G.color==="w"&&(p.length&&R.push(p),p=this._moveNumber+".");p=p+" "+this._moveToSan(G,this._moves({legal:!0})),this._makeMove(G)}if(p.length&&R.push(L(p)),typeof this._header.Result<"u"&&R.push(this._header.Result),k===0)return M.join("")+R.join(" ");const O=function(){return M.length>0&&M[M.length-1]===" "?(M.pop(),!0):!1},X=function(G,ae){for(const te of ae.split(" "))if(!!te){if(G+te.length>k){for(;O();)G--;M.push(h),G=0}M.push(te),G+=te.length,M.push(" "),G++}return O()&&G--,G};let se=0;for(let G=0;G<R.length;G++){if(se+R[G].length>k&&R[G].includes("{")){se=X(se,R[G]);continue}se+R[G].length>k&&G!==0?(M[M.length-1]===" "&&M.pop(),M.push(h),se=0):G!==0&&(M.push(" "),se++),M.push(R[G]),se+=R[G].length}return M.join("")}header(...h){for(let k=0;k<h.length;k+=2)typeof h[k]=="string"&&typeof h[k+1]=="string"&&(this._header[h[k]]=h[k+1]);return this._header}loadPgn(h,{sloppy:k=!1,newlineChar:M=`\r?
`}={}){function v(ne){return ne.replace(/\\/g,"\\")}function L(ne){const Pe={},Te=ne.split(new RegExp(v(M)));let Ke="",Ve="";for(let Re=0;Re<Te.length;Re++){const We=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;Ke=Te[Re].replace(We,"$1"),Ve=Te[Re].replace(We,"$2"),Ke.trim().length>0&&(Pe[Ke]=Ve)}return Pe}h=h.trim();const R=new RegExp("^(\\[((?:"+v(M)+")|.)*\\])(?:\\s*"+v(M)+"){2}").exec(h),p=R&&R.length>=2?R[1]:"";this.reset();const O=L(p);let X="";for(const ne in O)ne.toLowerCase()==="fen"&&(X=O[ne]),this.header(ne,O[ne]);if(k){if(X&&!this.load(X,!0))return!1}else if(O.SetUp==="1"&&!("FEN"in O&&this.load(O.FEN,!0)))return!1;function se(ne){return Array.from(ne).map(function(Pe){return Pe.charCodeAt(0)<128?Pe.charCodeAt(0).toString(16):encodeURIComponent(Pe).replace(/%/g,"").toLowerCase()}).join("")}function G(ne){return ne.length==0?"":decodeURIComponent("%"+(ne.match(/.{1,2}/g)||[]).join("%"))}const ae=function(ne){return ne=ne.replace(new RegExp(v(M),"g")," "),`{${se(ne.slice(1,ne.length-1))}}`},te=function(ne){if(ne.startsWith("{")&&ne.endsWith("}"))return G(ne.slice(1,ne.length-1))};let re=h.replace(p,"").replace(new RegExp(`({[^}]*})+?|;([^${v(M)}]*)`,"g"),function(ne,Pe,Te){return Pe!==void 0?ae(Pe):" "+ae(`{${Te.slice(1)}}`)}).replace(new RegExp(v(M),"g")," ");const oe=/(\([^()]+\))+?/g;for(;oe.test(re);)re=re.replace(oe,"");re=re.replace(/\d+\.(\.\.)?/g,""),re=re.replace(/\.\.\./g,""),re=re.replace(/\$\d+/g,"");let de=re.trim().split(new RegExp(/\s+/));de=de.join(",").replace(/,,+/g,",").split(",");let Me="";for(let ne=0;ne<de.length;ne++){const Pe=te(de[ne]);if(Pe!==void 0){this._comments[this.fen()]=Pe;continue}const Te=this._moveFromSan(de[ne],k);if(Te==null)if(c.indexOf(de[ne])>-1)Me=de[ne];else return!1;else Me="",this._makeMove(Te)}return Me&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",Me),!0}_moveToSan(h,k){let M="";if(h.flags&n.KSIDE_CASTLE)M="O-O";else if(h.flags&n.QSIDE_CASTLE)M="O-O-O";else{if(h.piece!==s.PAWN){const v=V(h,k);M+=h.piece.toUpperCase()+v}h.flags&(n.CAPTURE|n.EP_CAPTURE)&&(h.piece===s.PAWN&&(M+=A(h.from)[0]),M+="x"),M+=A(h.to),h.promotion&&(M+="="+h.promotion.toUpperCase())}return this._makeMove(h),this.isCheck()&&(this.isCheckmate()?M+="#":M+="+"),this._undoMove(),M}_moveFromSan(h,k=!1){const M=Q(h);let v=z(M),L=this._moves({legal:!0,piece:v});for(let G=0,ae=L.length;G<ae;G++)if(M===Q(this._moveToSan(L[G],L)))return L[G];if(!k)return null;let N,R,p,O,X,se=!1;R=M.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),R?(N=R[1],p=R[2],O=R[3],X=R[4],p.length==1&&(se=!0)):(R=M.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),R&&(N=R[1],p=R[2],O=R[3],X=R[4],p.length==1&&(se=!0))),v=z(M),L=this._moves({legal:!0,piece:N||v});for(let G=0,ae=L.length;G<ae;G++)if(p&&O){if((!N||N.toLowerCase()==L[G].piece)&&r[p]==L[G].from&&r[O]==L[G].to&&(!X||X.toLowerCase()==L[G].promotion))return L[G];if(se){const te=A(L[G].from);if((!N||N.toLowerCase()==L[G].piece)&&r[O]==L[G].to&&(p==te[0]||p==te[1])&&(!X||X.toLowerCase()==L[G].promotion))return L[G]}}return null}ascii(){let h=`   +------------------------+
`;for(let k=r.a8;k<=r.h1;k++){if(w(k)===0&&(h+=" "+"87654321"[f(k)]+" |"),this._board[k]){const M=this._board[k].type,L=this._board[k].color===s.WHITE?M.toUpperCase():M.toLowerCase();h+=" "+L+" "}else h+=" . ";k+1&136&&(h+=`|
`,k+=8)}return h+=`   +------------------------+
`,h+="     a  b  c  d  e  f  g  h",h}perft(h){const k=this._moves({legal:!1});let M=0;const v=this._turn;for(let L=0,N=k.length;L<N;L++)this._makeMove(k[L]),this._isKingAttacked(v)||(h-1>0?M+=this.perft(h-1):M++),this._undoMove();return M}_makePretty(h){const{color:k,piece:M,from:v,to:L,flags:N,captured:R,promotion:p}=h;let O="";for(const se in n)n[se]&N&&(O+=t[se]);const X={color:k,piece:M,from:A(v),to:A(L),san:this._moveToSan(h,this._moves({legal:!0})),flags:O};return R&&(X.captured=R),p&&(X.promotion=p),X}turn(){return this._turn}board(){const h=[];let k=[];for(let M=r.a8;M<=r.h1;M++)this._board[M]==null?k.push(null):k.push({square:A(M),type:this._board[M].type,color:this._board[M].color}),M+1&136&&(h.push(k),k=[],M+=8);return h}squareColor(h){if(h in r){const k=r[h];return(f(k)+w(k))%2===0?"light":"dark"}return null}history({verbose:h=!1}={}){const k=[],M=[];for(;this._history.length>0;)k.push(this._undoMove());for(;;){const v=k.pop();if(!v)break;h?M.push(this._makePretty(v)):M.push(this._moveToSan(v,this._moves())),this._makeMove(v)}return M}_pruneComments(){const h=[],k={},M=v=>{v in this._comments&&(k[v]=this._comments[v])};for(;this._history.length>0;)h.push(this._undoMove());for(M(this.fen());;){const v=h.pop();if(!v)break;this._makeMove(v),M(this.fen())}this._comments=k}getComment(){return this._comments[this.fen()]}setComment(h){this._comments[this.fen()]=h.replace("{","[").replace("}","]")}deleteComment(){const h=this._comments[this.fen()];return delete this._comments[this.fen()],h}getComments(){return this._pruneComments(),Object.keys(this._comments).map(h=>({fen:h,comment:this._comments[h]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(h=>{const k=this._comments[h];return delete this._comments[h],{fen:h,comment:k}})}}s.Chess=ce})(hi);var ue=(s=>(s[s.WHITE=0]="WHITE",s[s.BLACK=1]="BLACK",s[s.BOTH=2]="BOTH",s[s.SPECTATOR=3]="SPECTATOR",s[s.SERVER=4]="SERVER",s))(ue||{}),Z=(s=>(s[s.LEGAL=0]="LEGAL",s[s.LEGALHOVER=1]="LEGALHOVER",s[s.CHECK=2]="CHECK",s[s.MOVE=3]="MOVE",s[s.NEXTMOVE=4]="NEXTMOVE",s[s.PREMOVE=5]="PREMOVE",s[s.PREMOVEHOVER=6]="PREMOVEHOVER",s[s.SELECT=7]="SELECT",s))(Z||{});class en{constructor(e){this.defaultState={boardTheme:"standard",piecesTheme:"standard",flipped:!1,notation:!0,shadow:!1,startFen:dn,size:0,style:{shadow:!1,borderRadius:"0rem"},resizible:{enabled:!1,min:256,max:1024}},this.setConfigSettings=t=>{t!==void 0&&(t.boardTheme!==void 0&&(this.boardTheme=t.boardTheme),t.piecesTheme!==void 0&&(this.piecesTheme=t.piecesTheme),t.flipped!==void 0&&(this.flipped=t.flipped),t.notation!==void 0&&(this.notation=t.notation),t.startFen!==void 0&&(this.startFen=t.startFen),t.style!==void 0&&(t.style.shadow!==void 0&&(this.style.shadow=t.style.shadow),t.style.borderRadius!==void 0&&(this.style.borderRadius=t.style.borderRadius)))},this.getConfig=()=>{const t={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...(this.style.shadow!==this.defaultState.style.shadow||this.style.borderRadius!==this.defaultState.style.borderRadius)&&{style:{...this.style.shadow!==this.defaultState.style.shadow&&{shadow:this.style.shadow},...this.style.borderRadius!==this.defaultState.style.borderRadius&&{borderRadius:this.style.borderRadius}}}};if(Object.keys(t).length!==0)return t},this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.style={...this.defaultState.style},this.resizible={...this.defaultState.resizible},this.setConfigSettings(e)}}class tn{constructor(e){this.defaultState={enabled:!0,color:ue.BOTH},this.setConfigSettings=t=>{switch(t){case!0:this.enabled=!0,this.color=ue.BOTH;break;case!1:this.enabled=!1;break;case ue.WHITE:this.enabled=!0,this.color=ue.WHITE;break;case ue.BLACK:this.enabled=!0,this.color=ue.BLACK;break}},this.getConfig=()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1},this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class sn{constructor(e){this.defaultState={enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}},this.setConfigSettings=t=>{var n,r,i,a;t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,(t==null?void 0:t.ghostPiece)!==void 0&&(this.ghostPiece.enabled=t.ghostPiece),t.transition!==void 0&&((t==null?void 0:t.transition)===!0?this.transition.enabled=!0:(t==null?void 0:t.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(n=t==null?void 0:t.transition)!=null&&n.duration&&(this.transition.settings.duration=(r=t==null?void 0:t.transition)==null?void 0:r.duration),(i=t==null?void 0:t.transition)!=null&&i.easing&&(this.transition.settings.easing=(a=t==null?void 0:t.transition)==null?void 0:a.easing)))))},this.getConfig=()=>{const t={},n={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(t.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(n.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(n.easing=this.transition.settings.easing),Object.keys(n).length!==0&&(t.transition=n)),!this.transition.enabled&&this.defaultState.transition.enabled&&(t.transition=!1),Object.keys(t).length!==0))return t;if(!this.enabled&&this.defaultState.enabled)return!1},this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class nn{constructor(e){this.defaultState={enabled:!0,selectedPiece:void 0},this.setConfigSettings=t=>{t!==void 0&&(this.enabled=t)},this.getConfig=()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class an{constructor(e){this.defaultState={enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:""},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.settings&&(t.settings.allowCastling!==void 0&&(this.settings.allowCastling=t.settings.allowCastling),t.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=t.settings.allowEnPassant),t.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=t.settings.allowPromotion)),t.preMoves!==void 0&&(this.preMoves.enabled=t.preMoves)))},this.getConfig=()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled},this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.setConfigSettings(e)}}class rn{constructor(e){this.defaultState={enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.check!==void 0&&(this.settings.check=t.check),t.legal!==void 0&&(this.settings.legal=t.legal),t.move!==void 0&&(this.settings.move=t.move),t.nextMove!==void 0&&(this.settings.nextMove=t.nextMove),t.preMove!==void 0&&(this.settings.preMove=t.preMove),t.select!==void 0&&(this.settings.select=t.select)))},this.getConfig=()=>{const t={},n=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(n.forEach(r=>{this.settings[r]!==this.defaultState.settings[r]&&(t[r]=this.settings[r])}),Object.keys(t).length!==0))return t;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class ln{constructor(e){this.defaultState={enabled:!0,engineArrows:[],settings:{knightLShape:!1,onlyChessMove:!1}},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.knightLShape!==void 0&&(this.settings.knightLShape=t.knightLShape),t.onlyChessMove!==void 0&&(this.settings.onlyChessMove=t.onlyChessMove)))},this.getConfig=()=>{const t={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(t.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(t.onlyChessMove=this.settings.onlyChessMove),Object.keys(t).length!==0))return t;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.engineArrows=JSON.parse(JSON.stringify(this.defaultState.engineArrows)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class on{constructor(e){this.defaultState={enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}},this.setConfigSettings=t=>{t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.CAPTURE!==void 0&&(this.settings.CAPTURE=t.CAPTURE),t.CASTLE!==void 0&&(this.settings.CASTLE=t.CASTLE),t.MOVE!==void 0&&(this.settings.MOVE=t.MOVE),t.UNDO!==void 0&&(this.settings.UNDO=t.UNDO)))},this.getConfig=()=>{const t={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(t.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(t.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(t.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(t.UNDO=this.settings.UNDO),Object.keys(t).length!==0))return t;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class un{constructor(e){this.defaultState={getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getLastMoveSAN:void 0,getKingLocations:void 0,getInCheck:void 0,getWhiteToMove:void 0},this.setConfigSettings=t=>{t!==void 0&&(t.getLegalMoves&&(this.getLegalMoves=t.getLegalMoves),t.getPreMoves&&(this.getPreMoves=t.getPreMoves),t.beforeMove&&(this.beforeMove=t.beforeMove),t.afterMove&&(this.afterMove=t.afterMove),t.getLastMove&&(this.getLastMove=t.getLastMove),t.getLastMoveSAN&&(this.getLastMoveSAN=t.getLastMoveSAN),t.getKingLocations&&(this.getKingLocations=t.getKingLocations),t.getInCheck&&(this.getInCheck=t.getInCheck),t.getWhiteToMove&&(this.getWhiteToMove=t.getWhiteToMove))},this.getConfig=()=>{const t={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getLastMoveSAN&&{getLastMoveSAN:this.getLastMoveSAN},...this.getKingLocations&&{getKingLocations:this.getKingLocations},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(t).length>0?t:void 0},this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getLastMoveSAN=this.defaultState.getLastMoveSAN,this.getKingLocations=this.defaultState.getKingLocations,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const dn="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class gi{constructor(e){this.getConfig=()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}),this.pieces=[],this.markedSquares=new Set,this.board=new en(e==null?void 0:e.board),this.movable=new tn(e==null?void 0:e.movable),this.draggable=new sn(e==null?void 0:e.draggable),this.selectable=new nn(e==null?void 0:e.selectable),this.legal=new an(e==null?void 0:e.legal),this.callbacks=new un(e==null?void 0:e.callbacks),this.highlight=new rn(e==null?void 0:e.highlight),this.drawTools=new ln(e==null?void 0:e.drawTools),this.sounds=new on(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}}const fn=["a","b","c","d","e","f","g","h"],cn=["8","7","6","5","4","3","2","1"];function Wt(s){return{x:fn.indexOf(s[0]),y:cn.indexOf(s[1])}}function zt(s){return s.charCodeAt(0)-97}function hn(s){return 8-parseInt(s,10)}const gn=s=>{let e="",t=0;for(let n=0;n<s.length;n++){n!==0&&(e+="/");for(let r=0;r<s[n].length;r++){const i=s[n][r];i!=null&&t===0?i[0]==="w"?e+=i[1]:e+=i[1].toLowerCase():i!=null&&t!==0?(e+=t.toString(),t=0,i[0]==="w"?e+=i[1]:e+=i[1].toLowerCase()):t++}t!==0&&(e+=t.toString(),t=0)}return e},bn="8/8/8/8/8/8/8/8 w - - 0 1";class pn{constructor(e){this.letters={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},this.changeLegalHoverIfNeeded=t=>{t.color!==Z.LEGAL&&t.color!==Z.PREMOVE||this.state.pieces.forEach(n=>{n.square===t.square&&(t.color=t.color===Z.LEGAL?Z.LEGALHOVER:Z.PREMOVEHOVER)})},this.highlightSquare=(t,n)=>{const r={square:t,color:n};this.state.markedSquares.forEach(i=>{i.square===t&&i.color!==Z.MOVE&&i.color!==Z.CHECK&&this.state.markedSquares.delete(i)}),this.changeLegalHoverIfNeeded(r),this.state.markedSquares.add(r)},this.legalHover=t=>{this.state.markedSquares.forEach(n=>{if(n.square===t&&n.color===Z.LEGAL)n.color=Z.LEGALHOVER;else if(n.square!==t&&n.color===Z.LEGALHOVER){let r=!1;this.state.pieces.forEach(i=>{i.square===n.square&&(r=!0)}),r||(n.color=Z.LEGAL)}})},this.preMoveHover=t=>{this.state.markedSquares.forEach(n=>{if(n.square===t&&n.color===Z.PREMOVE)n.color=Z.PREMOVEHOVER;else if(n.square!==t&&n.color===Z.PREMOVEHOVER){let r=!1;this.state.pieces.forEach(i=>{i.square===n.square&&(r=!0)}),r||(n.color=Z.PREMOVE)}})},this.toggleSquareHighlight=(t,n)=>{const r={square:t,color:n};let i=!1;return this.state.markedSquares.forEach(a=>{a.square===t&&(this.state.markedSquares.delete(a),a.color===n&&(i=!0))}),this.changeLegalHoverIfNeeded(r),i?!0:(this.state.markedSquares.add(r),!1)},this.getSelectedSquare=()=>{let t="";return this.state.markedSquares.forEach(n=>{n.color===Z.SELECT&&(t=n.square)}),t},this.clearSquare=(t,n)=>{t.length===2&&this.state.markedSquares.forEach(r=>{r.square===t&&(r.color===n||n===void 0)&&this.state.markedSquares.delete(r)})},this.clearAllSquares=t=>{t===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(n=>{n.color===t&&this.state.markedSquares.delete(n)})},this.setPiece=(t,n)=>{if(this.notValidThing({square:t,piece:n}))return;const r=this.state.pieces.find(i=>i.square===t);r?r.name=n:this.state.pieces.push({square:t,name:n})},this.removePiece=t=>{this.notValidThing({square:t})||this.state.pieces.forEach((n,r)=>{n.square===t&&this.state.pieces.splice(r,1)})},this.clearAllPieces=()=>{this.state.pieces.length=0},this.getGridCoordsFromSquare=t=>{if(this.notValidThing({square:t}))return{x:0,y:0};const n=t[0],r=t[1],i=this.state.board.flipped?Math.abs(this.letters[n]-7):this.letters[n],a=this.state.board.flipped?Math.abs(parseInt(r,10)-8):parseInt(r,10)-1;return typeof i!="number"||a<0||a>7?{x:0,y:0}:{x:i,y:a}},this.makeMove=t=>{if(this.notValidThing({move:t}))return;let n=!1,r;const i=t.substring(0,2),a=t.substring(2,4),l=t.substring(4);this.state.pieces.forEach(o=>{o.square===a&&(r=o,this.removePiece(o.square))}),this.state.pieces.forEach(o=>{o.square===i&&(o.square=a,n=!0,l&&(o.name=o.name[0]+l.toUpperCase()))}),n?this.state.legal.lastMove=t:r&&this.state.pieces.push(r)},this.getSquareFromIndices=(t,n)=>Object.keys(this.letters)[t]+(n+1).toString(),this.updatePiecesWithFen=t=>{const n=[...Array(8)].map(()=>Array(8).fill(null)),r=["1","2","3","4","5","6","7","8"];let i=0,a=0;for(let u=0;u<(t.includes(" ")?t.indexOf(" "):t.length);u++)if(t[u]==="/")i++,a=0;else if(!r.includes(t[u]))t[u]===t[u].toUpperCase()?n[i][a]=`w${t[u]}`:n[i][a]=`b${t[u].toUpperCase()}`,a++;else for(let d=0;d<parseInt(t[u],10);d++)n[i][a]=null,a++;const l=[],o=[];for(let u=0;u<n.length;++u)for(let d=0;d<n.length;++d){const b=n[u][d],m=this.getPieceFromSquare(this.getSquareFromIndices(d,Math.abs(u-7)));b&&!m&&l.push({square:this.getSquareFromIndices(d,Math.abs(u-7)),name:b}),!b&&m&&o.push(m),b&&m&&b!==m.name&&(l.push({square:this.getSquareFromIndices(d,Math.abs(u-7)),name:b}),o.push(m))}for(let u=0;u<o.length;u++)for(let d=0;d<l.length;d++)!l[d]||!o[u]||l[d].name===o[u].name&&(o[u].square=l[d].square,o.splice(u,1),u--,l.splice(d,1),d--);l.forEach(u=>{this.state.pieces.push(u)}),o.forEach(u=>{this.state.pieces.splice(this.state.pieces.indexOf(u),1)})},this.notValidThing=t=>{const{square:n,piece:r,move:i}=t;return!!(n&&n.length!==2||r&&r.length!==2||i&&i.length!==4&&i.length!==5)},this.setGhostPiece=t=>{this.state.draggable.ghostPiece.piece=t},this.removeGhostPiece=()=>{this.state.draggable.ghostPiece.piece=void 0},this.isCastling=t=>{switch(t){case"e1g1":case"e1c1":case"e8g8":case"e8c8":return!0;default:return!1}},this.getRookMoveIfIsCastling=t=>{switch(t){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return}},this.isEnPassant=t=>{if(t[0]===t[2]||this.getPieceFromSquare(t.substring(2,4)))return!1;const n=this.getPieceFromSquare(t.substring(0,2));return!(n===void 0||n.name!=="wP"&&n.name!=="bP")},this.getCapturedPawnSquareIfIsEnPassant=t=>{if(t[0]===t[2]||this.getPieceFromSquare(t.substring(2,4)))return;const n=this.getPieceFromSquare(t.substring(0,2));if(n===void 0||n.name!=="wP"&&n.name!=="bP")return;const r=this.getPieceFromSquare(`${t[2]}${parseInt(t[3],10)+(n.name==="wP"?-1:1)}`);return r==null?void 0:r.square},this.isCapture=t=>!!this.getPieceFromSquare(t.substring(2,4)),this.isPromotion=t=>{if((t[1]!=="7"||t[3]!=="8")&&(t[1]!=="2"||t[3]!=="1"))return!1;const n=this.getPieceFromSquare(t.substring(0,2));return!(n&&(n.name[1]!=="P"||n.name[0]==="w"&&t[3]==="1"||n.name[0]==="b"&&t[3]==="8"))},this.callbackExists=t=>this.state.callbacks[t]!==void 0,this.flipBoard=t=>{t!==void 0?this.state.board.flipped=t:this.state.board.flipped=!this.state.board.flipped},this.setConfigSettings=t=>{this.state.setConfigSettings(t)},this.state=new gi(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getShortFEN(){if(this.state.pieces.length===0)return bn;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(t=>{e[hn(t.square[1])][zt(t.square[0])]=t.name}),gn(e)}getPieceFromSquare(e){let t;return this.state.pieces.forEach(n=>{n.square===e&&(t=n)}),t}}const mn={[Z.LEGAL]:"legalSQ cursor-pointer",[Z.LEGALHOVER]:"legalSQ_hover cursor-pointer",[Z.SELECT]:"selectedSQ",[Z.MOVE]:"highlightMove",[Z.NEXTMOVE]:"nextMoveSQ",[Z.PREMOVE]:"preMoveSQ cursor-pointer",[Z.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[Z.CHECK]:"checkSQ"},_n={white:"#f0d9b5",black:"#b58863"},vn="standard.svg",En={[Z.LEGAL]:"legalSQ cursor-pointer",[Z.LEGALHOVER]:"legalSQ_hover cursor-pointer",[Z.SELECT]:"selectedSQ-darkBlue",[Z.MOVE]:"highlightMove-darkBlue",[Z.NEXTMOVE]:"nextMoveSQ",[Z.PREMOVE]:"preMoveSQ cursor-pointer",[Z.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[Z.CHECK]:"checkSQ"},wn={white:"#94A3B8",black:"#475569"},kn="darkBlue.svg",je={squareStyles:{standard:mn,darkBlue:En},colors:{standard:_n,darkBlue:wn},imageName:{standard:vn,darkBlue:kn}};function us(s,e,t){const n=s.slice();return n[3]=e[t],n[5]=t,n}function ds(s,e,t){const n=s.slice();return n[3]=e[t],n[5]=t,n}function fs(s){let e,t=s[2][s[1]?Math.abs(s[5]-7):s[5]]+"",n,r;return{c(){e=B("span"),n=me(t),r=$(),this.h()},l(i){e=U(i,"SPAN",{"data-file":!0,style:!0,class:!0});var a=W(e);n=_e(a,t),r=ee(a),a.forEach(E),this.h()},h(){g(e,"data-file",s[3]),Se(e,"color",s[5]%2===0?je.colors[s[0]].white:je.colors[s[0]].black),g(e,"class","svelte-1hixjwp")},m(i,a){Y(i,e,a),S(e,n),S(e,r)},p(i,a){a&2&&t!==(t=i[2][i[1]?Math.abs(i[5]-7):i[5]]+"")&&Nt(n,t),a&1&&Se(e,"color",i[5]%2===0?je.colors[i[0]].white:je.colors[i[0]].black)},d(i){i&&E(e)}}}function cs(s){let e,t=(s[1]?s[5]+1:Math.abs(s[5]-8))+"",n,r,i;return{c(){e=B("span"),n=me(t),r=$(),this.h()},l(a){e=U(a,"SPAN",{"data-file":!0,style:!0,class:!0});var l=W(e);n=_e(l,t),r=ee(l),l.forEach(E),this.h()},h(){g(e,"data-file",s[3]),g(e,"style",i="color: "+(s[5]%2===0?je.colors[s[0]].white:je.colors[s[0]].black)+";"+(s[1]?" text-align: right;":"")),g(e,"class","svelte-1hixjwp")},m(a,l){Y(a,e,l),S(e,n),S(e,r)},p(a,l){l&2&&t!==(t=(a[1]?a[5]+1:Math.abs(a[5]-8))+"")&&Nt(n,t),l&3&&i!==(i="color: "+(a[5]%2===0?je.colors[a[0]].white:je.colors[a[0]].black)+";"+(a[1]?" text-align: right;":""))&&g(e,"style",i)},d(a){a&&E(e)}}}function Mn(s){let e,t,n,r=s[2],i=[];for(let o=0;o<r.length;o+=1)i[o]=fs(ds(s,r,o));let a=s[2],l=[];for(let o=0;o<a.length;o+=1)l[o]=cs(us(s,a,o));return{c(){e=B("div");for(let o=0;o<i.length;o+=1)i[o].c();t=$(),n=B("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=U(o,"DIV",{class:!0});var u=W(e);for(let b=0;b<i.length;b+=1)i[b].l(u);u.forEach(E),t=ee(o),n=U(o,"DIV",{class:!0});var d=W(n);for(let b=0;b<l.length;b+=1)l[b].l(d);d.forEach(E),this.h()},h(){g(e,"class","files noselect svelte-1hixjwp"),g(n,"class","ranks noselect svelte-1hixjwp")},m(o,u){Y(o,e,u);for(let d=0;d<i.length;d+=1)i[d].m(e,null);Y(o,t,u),Y(o,n,u);for(let d=0;d<l.length;d+=1)l[d].m(n,null)},p(o,[u]){if(u&7){r=o[2];let d;for(d=0;d<r.length;d+=1){const b=ds(o,r,d);i[d]?i[d].p(b,u):(i[d]=fs(b),i[d].c(),i[d].m(e,null))}for(;d<i.length;d+=1)i[d].d(1);i.length=r.length}if(u&7){a=o[2];let d;for(d=0;d<a.length;d+=1){const b=us(o,a,d);l[d]?l[d].p(b,u):(l[d]=cs(b),l[d].c(),l[d].m(n,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=a.length}},i:Ce,o:Ce,d(o){o&&E(e),lt(i,o),o&&E(t),o&&E(n),lt(l,o)}}}function Sn(s,e,t){let{theme:n}=e,{flipped:r}=e;const i=["a","b","c","d","e","f","g","h"];return s.$$set=a=>{"theme"in a&&t(0,n=a.theme),"flipped"in a&&t(1,r=a.flipped)},[n,r,i]}class An extends Ie{constructor(e){super(),Oe(this,e,Sn,Mn,Fe,{theme:0,flipped:1})}}function yn(s){const e=2.5949095;return(s*=2)<1?.5*(s*s*((e+1)*s-e)):.5*((s-=2)*s*((e+1)*s+e)+2)}function Cn(s){return s*s*((1.70158+1)*s-1.70158)}function Pn(s){return--s*s*((1.70158+1)*s+1.70158)+1}function Ft(s){const e=.36363636363636365,t=8/11,n=9/10,r=4356/361,i=35442/1805,a=16061/1805,l=s*s;return s<e?7.5625*l:s<t?9.075*l-9.9*s+3.4:s<n?r*l-i*s+a:10.8*s*s-20.52*s+10.72}function Tn(s){return s<.5?.5*(1-Ft(1-s*2)):.5*Ft(s*2-1)+.5}function Ln(s){return 1-Ft(1-s)}function In(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)}function On(s){return 1-Math.sqrt(1-s*s)}function Fn(s){return Math.sqrt(1- --s*s)}function Rn(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function Nn(s){return s*s*s}function es(s){const e=s-1;return e*e*e+1}function qn(s){return s<.5?.5*Math.sin(13*Math.PI/2*2*s)*Math.pow(2,10*(2*s-1)):.5*Math.sin(-13*Math.PI/2*(2*s-1+1))*Math.pow(2,-10*(2*s-1))+1}function Dn(s){return Math.sin(13*s*Math.PI/2)*Math.pow(2,10*(s-1))}function Bn(s){return Math.sin(-13*(s+1)*Math.PI/2)*Math.pow(2,-10*s)+1}function Un(s){return s===0||s===1?s:s<.5?.5*Math.pow(2,20*s-10):-.5*Math.pow(2,10-s*20)+1}function Hn(s){return s===0?s:Math.pow(2,10*(s-1))}function Kn(s){return s===1?s:1-Math.pow(2,-10*s)}function Vn(s){return s/=.5,s<1?.5*s*s:(s--,-.5*(s*(s-2)-1))}function Wn(s){return s*s}function zn(s){return-s*(s-2)}function jn(s){return s<.5?8*Math.pow(s,4):-8*Math.pow(s-1,4)+1}function Gn(s){return Math.pow(s,4)}function Qn(s){return Math.pow(s-1,3)*(1-s)+1}function Xn(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)}function Yn(s){return s*s*s*s*s}function Zn(s){return--s*s*s*s*s+1}function Jn(s){return-.5*(Math.cos(Math.PI*s)-1)}function xn(s){const e=Math.cos(s*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function $n(s){return Math.sin(s*Math.PI/2)}const Rt=Object.freeze(Object.defineProperty({__proto__:null,backIn:Cn,backInOut:yn,backOut:Pn,bounceIn:Ln,bounceInOut:Tn,bounceOut:Ft,circIn:On,circInOut:In,circOut:Fn,cubicIn:Nn,cubicInOut:Rn,cubicOut:es,elasticIn:Dn,elasticInOut:qn,elasticOut:Bn,expoIn:Hn,expoInOut:Un,expoOut:Kn,quadIn:Wn,quadInOut:Vn,quadOut:zn,quartIn:Gn,quartInOut:jn,quartOut:Qn,quintIn:Yn,quintInOut:Xn,quintOut:Zn,sineIn:xn,sineInOut:Jn,sineOut:$n,linear:li},Symbol.toStringTag,{value:"Module"}));function hs(s){return Object.prototype.toString.call(s)==="[object Date]"}function jt(s,e){if(s===e||s!==s)return()=>s;const t=typeof s;if(t!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const n=e.map((r,i)=>jt(s[i],r));return r=>n.map(i=>i(r))}if(t==="object"){if(!s||!e)throw new Error("Object cannot be null");if(hs(s)&&hs(e)){s=s.getTime(),e=e.getTime();const i=e-s;return a=>new Date(s+a*i)}const n=Object.keys(e),r={};return n.forEach(i=>{r[i]=jt(s[i],e[i])}),i=>{const a={};return n.forEach(l=>{a[l]=r[l](i)}),a}}if(t==="number"){const n=e-s;return r=>s+r*n}throw new Error(`Cannot interpolate ${t} values`)}function ea(s,e={}){const t=Qi(s);let n,r=s;function i(a,l){if(s==null)return t.set(s=a),Promise.resolve();r=a;let o=n,u=!1,{delay:d=0,duration:b=400,easing:m=li,interpolate:y=jt}=Ot(Ot({},e),l);if(b===0)return o&&(o.abort(),o=null),t.set(s=r),Promise.resolve();const F=Bi()+d;let I;return n=Ui(T=>{if(T<F)return!0;u||(I=y(s,a),typeof b=="function"&&(b=b(s,a)),u=!0),o&&(o.abort(),o=null);const _=T-F;return _>b?(t.set(s=a),!1):(t.set(s=I(m(_/b))),!0)}),n.promise}return{set:i,update:(a,l)=>i(a(r,s),l),subscribe:t.subscribe}}function gs(s,e,t,n){if(e===0&&t===0)return s;const r=n?["a","b","c","d","e","f","g","h"].reverse():["a","b","c","d","e","f","g","h"],i=n?["8","7","6","5","4","3","2","1"].reverse():["8","7","6","5","4","3","2","1"],a=r[r.indexOf(s[0])+e],l=i[i.indexOf(s[1])+t];if(!(!a||!l))return a+l}function bs(s,e,t){const n=e*1.15,r=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","circle");return r.setAttribute("width",(s.offsetWidth*n).toString()),r.setAttribute("height",(s.offsetHeight*n).toString()),r.style.position="absolute",r.style.zIndex="100",r.style.translate=`${t?"":"-"}${25*n/2}% -${25*n/2}%`,r.style.opacity="0.2",i.setAttribute("r",(s.offsetWidth*n/2).toString()),i.setAttribute("cx",(s.offsetWidth*n/2).toString()),i.setAttribute("cy",(s.offsetHeight*n/2).toString()),i.setAttribute("fill","black"),r.appendChild(i),r}function ta(s,e){let t;function n(v,L=1e3){let N=!1;const R=()=>{t==null?N=!1:(v(...t),t=null,setTimeout(R,L))};return(...p)=>{if(N){t=p;return}v(...p),N=!0,setTimeout(R,L)}}let r,i,a,l,o,u,d,b,m=!1,y;const F=s.parentNode;let I,T=!1,{startSquare:_,boardFlipped:c,onlyShow:f,duration:w,easingFunc:P}=e;const{coords:A}=e;s.style.cursor=f?"default":"pointer";let H=ns(A).x,K=ns(A).y;const V=1.6;let j=bs(s,V,c);s.draggable=!1;function z(v){const L=v.clientX-r,N=v.clientY-i;if(r=v.clientX,i=v.clientY,o+=L,u+=N,m||(Math.abs(o)>1||Math.abs(u)>1)&&(A.update(R=>({x:R.x+(r-s.offsetWidth/2-s.getBoundingClientRect().x)/s.clientWidth,y:v.pointerType==="touch"?R.y-(i-s.offsetHeight*1.5-s.getBoundingClientRect().y)/s.clientWidth:R.y-(i-s.offsetHeight/2-s.getBoundingClientRect().y)/s.clientWidth,scale:v.pointerType==="touch"?V:1}),{duration:w,easing:P}),m=!0,s.style.zIndex="30",s.style.cursor="grabbing",s.dispatchEvent(new CustomEvent("startMoving"))),!!m){if(v.pointerType==="touch"){const R=Math.floor((o+a)/s.offsetWidth),p=Math.floor((u+l)/s.offsetHeight),O=gs(_,R,p,c);if(O){if(O!==I){const X=Wt(O);j.style.left=`${X.x*12.5}%`,j.style.top=`${X.y*12.5}%`,F.appendChild(j)}}else I&&(I="")}A.update(R=>({x:R.x+L/s.clientWidth,y:R.y-N/s.clientWidth,scale:v.pointerType==="touch"?V:1}),{duration:0}),s.dispatchEvent(new CustomEvent("moving",{detail:{x:r,y:i}}))}}const Q=n(z,10);function ce(){const v=window.scrollX-d,L=window.scrollY-b;d=window.scrollX,b=window.scrollY,A.update(N=>({x:N.x+v,y:N.y+L,scale:1}),{duration:0})}function q(){window.removeEventListener("pointermove",Q),window.removeEventListener("pointerup",q),window.removeEventListener("pointercancel",q),document.body.removeEventListener("pointerleave",q),window.removeEventListener("scroll",ce),t=null;const v=Math.floor((o+a)/s.offsetWidth),L=Math.floor((u+l)/s.offsetHeight),N=gs(_,v,L,c);T=!1,s.dispatchEvent(new CustomEvent("dropped",{detail:N})),A.update(()=>({x:H,y:K,scale:1}),{duration:w,easing:P}).then(()=>{T||s.dispatchEvent(new CustomEvent("animationEnded")),T||(s.style.zIndex="2")}),r=0,i=0,o=0,u=0,s.style.cursor=f?"default":"pointer",setTimeout(()=>{s.style.zIndex="2"},w),m=!1,j.remove()}function h(v){if(v.button!==0||!v.isPrimary)return;H=c?7-zt(_[0]):zt(_[0]),K=c?8-parseInt(_[1],10):parseInt(_[1],10)-1,I=_;const L=v.target.getBoundingClientRect();v.pointerType==="touch"?(r=v.clientX,i=v.clientY,a=v.clientX-L.x,l=v.clientY-L.y):(r=v.clientX,i=v.clientY,a=v.offsetX,l=v.offsetY),o=0,u=0,d=window.scrollX,b=window.scrollY,T=!0,s.dispatchEvent(new CustomEvent("clicked")),window.addEventListener("pointermove",Q),window.addEventListener("pointerup",q),window.addEventListener("pointercancel",q),document.body.addEventListener("pointerleave",q),window.addEventListener("scroll",ce)}function k(v){v.preventDefault()}function M(v){v.preventDefault()}return s.addEventListener("contextmenu",k),s.addEventListener("dragstart",M),f||s.addEventListener("pointerdown",h),{destroy(){s.removeEventListener("pointerdown",h),s.removeEventListener("contextmenu",k),s.removeEventListener("dragstart",M),window.clearTimeout(y)},update(v){_=v.startSquare,w=v.duration,P=v.easingFunc,v.onlyShow!==f&&(f=v.onlyShow,f?(s.removeEventListener("pointerdown",h),s.style.cursor="default"):(s.addEventListener("pointerdown",h),s.style.cursor="pointer")),c!==v.boardFlipped&&(j=bs(s,V,v.boardFlipped)),c=v.boardFlipped}}}const ps=""+new URL("../../assets/wP-f78bae6c.svg",import.meta.url).href,sa=""+new URL("../../assets/wR-5eb92d73.svg",import.meta.url).href,ia=""+new URL("../../assets/wN-a4c975a2.svg",import.meta.url).href,na=""+new URL("../../assets/wB-1ff2f149.svg",import.meta.url).href,aa=""+new URL("../../assets/wQ-8568b485.svg",import.meta.url).href,ra=""+new URL("../../assets/wK-4cdf6dc9.svg",import.meta.url).href,la=""+new URL("../../assets/bP-84e521e8.svg",import.meta.url).href,oa=""+new URL("../../assets/bR-e39efb08.svg",import.meta.url).href,ua=""+new URL("../../assets/bN-d3912d91.svg",import.meta.url).href,da=""+new URL("../../assets/bB-c430b746.svg",import.meta.url).href,fa=""+new URL("../../assets/bQ-c7b9a43e.svg",import.meta.url).href,ca=""+new URL("../../assets/bK-3500a2e6.svg",import.meta.url).href;function Gt(s){switch(s){case"wP":return ps;case"wR":return sa;case"wN":return ia;case"wB":return na;case"wQ":return aa;case"wK":return ra;case"bP":return la;case"bR":return oa;case"bN":return ua;case"bB":return da;case"bQ":return fa;case"bK":return ca;default:return ps}}function ha(s){let e,t,n,r,i;return{c(){e=B("img"),this.h()},l(a){e=U(a,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){Se(e,"left",s[7].x*12.5+"%"),Se(e,"bottom",s[7].y*12.5+"%"),Se(e,"scale",s[7].scale),Se(e,"z-Index",s[3]?0:s[6]),Se(e,"opacity",s[3]?.3:1),Se(e,"cursor","pointer"),g(e,"class","noselect svelte-1g241z"),ct(e.src,t=Gt(s[1]))||g(e,"src",t),g(e,"alt",s[1])},m(a,l){var o,u,d;Y(a,e,l),r||(i=[Yt(n=ta.call(null,e,{startSquare:s[0],onlyShow:!s[11](s[5]),boardFlipped:s[2],duration:(o=s[4])!=null&&o.transition.enabled?s[4].transition.settings.duration:0,easingFunc:Rt[(d=(u=s[4])==null?void 0:u.transition.settings.easing)!=null?d:"cubicInOut"],coords:s[9]})),fe(e,"dropped",s[10]),fe(e,"clicked",s[15]),fe(e,"startMoving",s[16]),fe(e,"animationEnded",s[17]),fe(e,"moving",s[18])],r=!0)},p(a,[l]){var o,u,d;l&128&&Se(e,"left",a[7].x*12.5+"%"),l&128&&Se(e,"bottom",a[7].y*12.5+"%"),l&128&&Se(e,"scale",a[7].scale),l&72&&Se(e,"z-Index",a[3]?0:a[6]),l&8&&Se(e,"opacity",a[3]?.3:1),l&2&&!ct(e.src,t=Gt(a[1]))&&g(e,"src",t),l&2&&g(e,"alt",a[1]),n&&Zt(n.update)&&l&53&&n.update.call(null,{startSquare:a[0],onlyShow:!a[11](a[5]),boardFlipped:a[2],duration:(o=a[4])!=null&&o.transition.enabled?a[4].transition.settings.duration:0,easingFunc:Rt[(d=(u=a[4])==null?void 0:u.transition.settings.easing)!=null?d:"cubicInOut"],coords:a[9]})},i:Ce,o:Ce,d(a){a&&E(e),r=!1,Xe(i)}}}function ga(s,e,t){var Q,ce;let n,r,{square:i}=e,{name:a}=e,{getGridCoordsFromSquare:l}=e,{flipped:o}=e,{isGhost:u=!1}=e,{draggableState:d=void 0}=e,{legalState:b=void 0}=e,{movableState:m=void 0}=e,{selectedPiece:y=void 0}=e,F=!1;const I=Jt();let T=(Q=d==null?void 0:d.transition)!=null&&Q.enabled?d.transition.settings.duration:0;const _=ea({x:0,y:0,scale:1},{duration:T,easing:Rt[(ce=d==null?void 0:d.transition.settings.easing)!=null?ce:"cubicInOut"]});Hi(s,_,q=>t(7,r=q));let c=!1;const f=q=>q[0]==="w"?ue.WHITE:ue.BLACK,w=q=>{var k;const h=l(q);_.update(()=>({x:h.x,y:h.y,scale:1}),{duration:c?T:0,easing:Rt[(k=d==null?void 0:d.transition.settings.easing)!=null?k:"cubicInOut"]}),c||(c=!0),T=d!=null&&d.transition.enabled?d.transition.settings.duration:0},P=q=>{T=0,q.detail||I("deselect"),i===q.detail?(I(F?"deselect":"select"),F=!F):F=!1,I("endDragging",i+q.detail),i!==q.detail&&q.detail&&I("move",i+q.detail)},A=q=>q!=null&&q.enabled?b!=null&&b.enabled?!!(b.preMoves.enabled&&f(a)===q.color||q.color===ue.WHITE&&b.whiteToMove&&f(a)===ue.WHITE||q.color===ue.BLACK&&!b.whiteToMove&&f(a)===ue.BLACK||q.color===ue.BOTH&&(f(a)===ue.WHITE&&b.whiteToMove||f(a)===ue.BLACK&&!b.whiteToMove)):q.color===f(a)||q.color===ue.BOTH:!1,H=q=>q===void 0||q.name!==a||q.square!==i;function K(q){Je.call(this,s,q)}function V(q){Je.call(this,s,q)}function j(q){Je.call(this,s,q)}const z=q=>{I("moving",q.detail)};return s.$$set=q=>{"square"in q&&t(0,i=q.square),"name"in q&&t(1,a=q.name),"getGridCoordsFromSquare"in q&&t(12,l=q.getGridCoordsFromSquare),"flipped"in q&&t(2,o=q.flipped),"isGhost"in q&&t(3,u=q.isGhost),"draggableState"in q&&t(4,d=q.draggableState),"legalState"in q&&t(13,b=q.legalState),"movableState"in q&&t(5,m=q.movableState),"selectedPiece"in q&&t(14,y=q.selectedPiece)},s.$$.update=()=>{s.$$.dirty&16384&&H(y)&&(F=!1),s.$$.dirty&5&&w(i),s.$$.dirty&32&&t(6,n=typeof m=="boolean"?m?2:1:m!=null&&m.enabled?2:1)},[i,a,o,u,d,m,n,r,I,_,P,A,l,b,y,K,V,j,z]}class bi extends Ie{constructor(e){super(),Oe(this,e,ga,ha,Fe,{square:0,name:1,getGridCoordsFromSquare:12,flipped:2,isGhost:3,draggableState:4,legalState:13,movableState:5,selectedPiece:14})}}function ba(s){let e,t;return{c(){e=B("div"),this.h()},l(n){e=U(n,"DIV",{style:!0,class:!0}),W(e).forEach(E),this.h()},h(){Se(e,"left",s[2]*12.5+"%"),Se(e,"bottom",s[3]*12.5+"%"),g(e,"class",t="noselect "+je.squareStyles[s[1]][s[0]]+" svelte-10vytug")},m(n,r){Y(n,e,r)},p(n,[r]){r&4&&Se(e,"left",n[2]*12.5+"%"),r&8&&Se(e,"bottom",n[3]*12.5+"%"),r&3&&t!==(t="noselect "+je.squareStyles[n[1]][n[0]]+" svelte-10vytug")&&g(e,"class",t)},i:Ce,o:Ce,d(n){n&&E(e)}}}function pa(s,e,t){let{square:n}=e,{color:r}=e,{getGridCoordsFromSquare:i}=e,{flipped:a}=e,{theme:l}=e,o,u;const d=()=>{const b=i(n);t(2,o=b.x),t(3,u=b.y)};return s.$$set=b=>{"square"in b&&t(4,n=b.square),"color"in b&&t(0,r=b.color),"getGridCoordsFromSquare"in b&&t(5,i=b.getGridCoordsFromSquare),"flipped"in b&&t(6,a=b.flipped),"theme"in b&&t(1,l=b.theme)},s.$$.update=()=>{s.$$.dirty&64&&d()},[r,l,o,u,n,i,a]}class ma extends Ie{constructor(e){super(),Oe(this,e,pa,ba,Fe,{square:4,color:0,getGridCoordsFromSquare:5,flipped:6,theme:1})}}const _a=["a","b","c","d","e","f","g","h"],va=["8","7","6","5","4","3","2","1"];function Ea(s){s.querySelectorAll("[sf]").forEach(e=>e.remove())}function Qt(s){return`${_a[s.x]}${va[s.y]}`}function pi(s,e){return Math.abs((s.x-e.x)*(s.y-e.y))===2}function Xt(s,e){return`${Qt(s)}${Qt(e)}`}function wa(s,e){return!!(pi(s,e)||Math.abs(s.x-e.x)===Math.abs(s.y-e.y)||s.x===e.x!=(s.y===e.y))}function mi(s,e,t,n,r,i){let a={x:-1,y:-1},l,o;pi(e,t)&&n?(Math.abs(t.x-e.x)===2?a={x:t.x,y:e.y}:a={x:e.x,y:t.y},a.y-e.y<0?o=Math.PI+Math.atan((a.x-e.x)/(a.y-e.y)):o=Math.atan((a.x-e.x)/Math.abs(a.y-e.y)),l={x:t.x-Math.sign(t.x-a.x)*(a.x!==t.x?.4:0),y:t.y-Math.sign(t.y-a.y)*(a.y!==t.y?.4:0)}):(t.y-e.y<0?o=Math.PI+Math.atan((t.x-e.x)/(t.y-e.y)):o=Math.atan((t.x-e.x)/Math.abs(t.y-e.y)),l={x:t.x-Math.sin(o)*.4,y:t.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};s.setAttribute("points",`${u.x+.5},${u.y+.5} ${a.x!==-1&&a.y!==-1&&n?`${a.x+.5},${a.y+.5} `:""}${l.x+.5},${l.y+.5}`),s.setAttribute("data-sqID",`${Xt(e,t)}`),i!==void 0&&s.setAttribute("opacity",`${i}`),r!==void 0&&(s.setAttribute("marker-start",`url(#start-${r[0]})`),s.setAttribute("marker-end",`url(#end-${r[0]})`),s.setAttribute("stroke",r))}function It(s,e,t,n,r,i){if(!(e===void 0||t.x===-1&&t.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),n?e.setAttribute("stroke","red"):r?e.setAttribute("stroke","orange"):i?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),s.querySelectorAll(`\u0441ircle[cx="${t.x+.5}"][cy="${t.y+.5}"]`).forEach(a=>{e!==void 0&&a!==e&&(a.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const a=n?"red":r?"orange":i?"blue":"green";e.setAttribute("stroke",`${a}`),e.setAttribute("marker-start",`url(#start-${a[0]})`),e.setAttribute("marker-end",`url(#end-${a[0]})`),s.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(l=>{e instanceof SVGPolylineElement&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function _i(s,e,t,n,r){const i=document.createElementNS("http://www.w3.org/2000/svg","polyline");return mi(i,s,e,t,n,r),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.25"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("opacity",r!==void 0?`${r}`:"0.4"),i.setAttribute("marker-start",n?`url(#start-${n[0]})`:"url(#start-g)"),i.setAttribute("marker-end",n?`url(#end-${n[0]})`:"url(#end-g)"),i.setAttribute("stroke",n||"green"),i}function ka(s,e,t){e.forEach(n=>{const r=_i(Wt(n.move.substring(0,2)),Wt(n.move.substring(2,4)),t,n.color,n.opacity);r.setAttribute("sf",""),s.appendChild(r)})}function ms(s){s.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("sf")||e.remove()})}function Ma(s,e){let{svg:t,flipped:n,enabled:r,settings:i}=e,a=!1,l={x:-1,y:-1},o,u;function d(_,c){const f=s.getBoundingClientRect(),w=n?f.width-(_-f.left):_-f.left,P=n?f.height-(c-f.top):c-f.top;return{x:Math.max(0,Math.min(7,Math.floor(w/(s.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(P/(s.clientHeight/8))))}}function b(_){u=document.createElementNS("http://www.w3.org/2000/svg","circle"),u.setAttribute("cx",`${_.x+.5}`),u.setAttribute("cy",`${_.y+.5}`),u.setAttribute("r","0.465"),u.setAttribute("opacity","0.4"),u.setAttribute("fill","none"),u.setAttribute("stroke-width","0.07"),u.setAttribute("stroke","green")}function m(_){if(u===void 0||l.x===-1&&l.y===-1)return;const c=d(_.clientX,_.clientY);i.onlyChessMove&&!wa(l,c)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),l.x===c.x&&l.y===c.y?(Xt(l,c),u instanceof SVGPolylineElement&&(u.remove(),b(c)),It(t,u,l,_.shiftKey,_.ctrlKey,_.altKey),t.appendChild(u),t.querySelectorAll(`circle[cx="${l.x+.5}"][cy="${l.y+.5}"]`).forEach(f=>{f!==u&&(o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,t.querySelectorAll(`polyline[data-sqID="${Xt(l,c)}"]`).forEach(f=>{u===void 0||l.x===-1&&l.y===-1||f===u||(o=f,f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=_i(l,c,i.knightLShape),It(t,u,l,_.shiftKey,_.ctrlKey,_.altKey),t.appendChild(u)):u instanceof SVGPolylineElement&&mi(u,l,c,i.knightLShape)))}function y(_){_.preventDefault()}function F(_){_.preventDefault(),It(t,u,l,_.shiftKey,_.ctrlKey,_.altKey)}function I(_){if(_.button===0)a=!1;else if(_.button===2){if(l.x===-1&&l.y===-1)return;t.querySelectorAll("[remove]").forEach(c=>{c.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:Qt(l),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,l={x:-1,y:-1},a=!1,window.removeEventListener("mousemove",m),window.removeEventListener("keydown",F),window.removeEventListener("keyup",F),window.removeEventListener("contextmenu",y)}window.removeEventListener("mouseup",I)}function T(_){if(_.button===0)a=!0,ms(t),window.addEventListener("mouseup",I);else if(_.button===2&&!a){const c=d(_.clientX,_.clientY);l=c,b(c),It(t,u,l,_.shiftKey,_.ctrlKey,_.altKey),o=void 0,t.querySelectorAll(`circle[cx="${c.x+.5}"][cy="${c.y+.5}"]`).forEach(f=>{o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&t.appendChild(u),window.addEventListener("mousemove",m),window.addEventListener("mouseup",I),window.addEventListener("keydown",F),window.addEventListener("keyup",F),window.addEventListener("contextmenu",y)}}return r&&s.addEventListener("mousedown",T),{update(_){_.svg!==t&&(t=_.svg),_.enabled!==r&&(r=_.enabled,r?s.addEventListener("mousedown",T):(ms(t),s.removeEventListener("mousedown",T))),i=_.settings,n=_.flipped}}}function _s(s,e,t){const n=s.slice();return n[8]=e[t],n}function vs(s){let e,t,n,r;return{c(){e=Ue("marker"),t=Ue("path"),n=Ue("marker"),r=Ue("path"),this.h()},l(i){e=He(i,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var a=W(e);t=He(a,"path",{fill:!0,d:!0}),W(t).forEach(E),a.forEach(E),n=He(i,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var l=W(n);r=He(l,"path",{fill:!0,d:!0}),W(r).forEach(E),l.forEach(E),this.h()},h(){g(t,"fill",s[8]),g(t,"d","M 5 0 Q 0 0 0 5 L 0 15 Q 0 20 5 20 Z"),g(e,"id","start-"+s[8][0]),g(e,"viewBox","0 0 5 20"),g(e,"refX","4"),g(e,"refY","10"),g(e,"markerUnits","strokeWidth"),g(e,"markerWidth","0.5"),g(e,"markerHeight","1"),g(e,"orient","auto"),g(r,"fill",s[8]),g(r,"d","M 0 4 L 10 10 L 0 16 Z"),g(n,"id","end-"+s[8][0]),g(n,"viewBox","0 0 10 20"),g(n,"refX","0.2"),g(n,"refY","10"),g(n,"markerUnits","strokeWidth"),g(n,"orient","auto"),g(n,"fill","currentColor")},m(i,a){Y(i,e,a),S(e,t),Y(i,n,a),S(n,r)},p:Ce,d(i){i&&E(e),i&&E(n)}}}function Sa(s){let e,t,n,r=s[2],i=[];for(let a=0;a<r.length;a+=1)i[a]=vs(_s(s,r,a));return{c(){e=Ue("svg"),t=Ue("defs");for(let a=0;a<i.length;a+=1)i[a].c();n=Ue("g"),this.h()},l(a){e=He(a,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var l=W(e);t=He(l,"defs",{});var o=W(t);for(let u=0;u<i.length;u+=1)i[u].l(o);o.forEach(E),n=He(l,"g",{}),W(n).forEach(E),l.forEach(E),this.h()},h(){g(e,"xmlns","http://www.w3.org/2000/svg"),Se(e,"transform","rotate("+(s[1]?"180deg":"0deg")+")"),g(e,"viewBox","0 0 8 8"),g(e,"class","svelte-19gv2n4")},m(a,l){Y(a,e,l),S(e,t);for(let o=0;o<i.length;o+=1)i[o].m(t,null);S(e,n),s[5](n)},p(a,[l]){if(l&4){r=a[2];let o;for(o=0;o<r.length;o+=1){const u=_s(a,r,o);i[o]?i[o].p(u,l):(i[o]=vs(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}l&2&&Se(e,"transform","rotate("+(a[1]?"180deg":"0deg")+")")},i:Ce,o:Ce,d(a){a&&E(e),lt(i,a),s[5](null)}}}function Aa(s,e,t){let{flipped:n=!1}=e,{svg:r}=e,{knightLShape:i=!1}=e,{computerArrows:a=[]}=e,l=!1;function o(b){!l||(Ea(r),ka(r,b,i))}xt(()=>{l=!0,o(a)});const u=["green","red","blue","orange"];function d(b){le[b?"unshift":"push"](()=>{r=b,t(0,r)})}return s.$$set=b=>{"flipped"in b&&t(1,n=b.flipped),"svg"in b&&t(0,r=b.svg),"knightLShape"in b&&t(3,i=b.knightLShape),"computerArrows"in b&&t(4,a=b.computerArrows)},s.$$.update=()=>{s.$$.dirty&16&&o(a)},[r,n,u,i,a,d]}class ya extends Ie{constructor(e){super(),Oe(this,e,Aa,Sa,Fe,{flipped:1,svg:0,knightLShape:3,computerArrows:4})}}function Es(s,{delay:e=0,duration:t=400,easing:n=es,x:r=0,y:i=0,opacity:a=0}={}){const l=getComputedStyle(s),o=+l.opacity,u=l.transform==="none"?"":l.transform,d=o*(1-a);return{delay:e,duration:t,easing:n,css:(b,m)=>`
			transform: ${u} translate(${(1-b)*r}px, ${(1-b)*i}px);
			opacity: ${o-d*m}`}}function ut(s,{delay:e=0,duration:t=400,easing:n=es}={}){const r=getComputedStyle(s),i=+r.opacity,a=parseFloat(r.height),l=parseFloat(r.paddingTop),o=parseFloat(r.paddingBottom),u=parseFloat(r.marginTop),d=parseFloat(r.marginBottom),b=parseFloat(r.borderTopWidth),m=parseFloat(r.borderBottomWidth);return{delay:e,duration:t,easing:n,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*i};height: ${y*a}px;padding-top: ${y*l}px;padding-bottom: ${y*o}px;margin-top: ${y*u}px;margin-bottom: ${y*d}px;border-top-width: ${y*b}px;border-bottom-width: ${y*m}px;`}}function Ca(s){let e,t,n,r,i,a;return{c(){e=B("button"),t=B("img"),this.h()},l(l){e=U(l,"BUTTON",{});var o=W(e);t=U(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(E),this.h()},h(){ct(t.src,n=s[1])||g(t,"src",n),g(t,"alt",r="Promotion to "+s[0].toUpperCase()),g(t,"class","svelte-17pqsbb")},m(l,o){Y(l,e,o),S(e,t),i||(a=fe(e,"click",s[2]),i=!0)},p(l,[o]){o&1&&r!==(r="Promotion to "+l[0].toUpperCase())&&g(t,"alt",r)},i:Ce,o:Ce,d(l){l&&E(e),i=!1,a()}}}function Pa(s,e,t){let{piece:n}=e,{isWhite:r}=e,{showModal:i}=e;const a=Jt(),l=(r?"w":"b")+n.toUpperCase(),o=Gt(l),u=()=>{a("newPromotion",n),t(3,i=!1)};return s.$$set=d=>{"piece"in d&&t(0,n=d.piece),"isWhite"in d&&t(4,r=d.isWhite),"showModal"in d&&t(3,i=d.showModal)},[n,o,u,i,r]}class Ta extends Ie{constructor(e){super(),Oe(this,e,Pa,Ca,Fe,{piece:0,isWhite:4,showModal:3})}}function ws(s,e,t){const n=s.slice();return n[6]=e[t],n}function ks(s){let e,t,n,r,i,a=["q","r","b","n"],l=[];for(let u=0;u<4;u+=1)l[u]=Ms(ws(s,a,u));const o=u=>ie(l[u],1,1,()=>{l[u]=null});return{c(){e=B("div"),t=B("div");for(let u=0;u<4;u+=1)l[u].c();this.h()},l(u){e=U(u,"DIV",{class:!0});var d=W(e);t=U(d,"DIV",{class:!0});var b=W(t);for(let m=0;m<4;m+=1)l[m].l(b);b.forEach(E),d.forEach(E),this.h()},h(){g(t,"class","modal-content svelte-it5mr1"),g(e,"class","modal svelte-it5mr1")},m(u,d){Y(u,e,d),S(e,t);for(let b=0;b<4;b+=1)l[b].m(t,null);i=!0},p(u,d){if(d&3){a=["q","r","b","n"];let b;for(b=0;b<4;b+=1){const m=ws(u,a,b);l[b]?(l[b].p(m,d),x(l[b],1)):(l[b]=Ms(m),l[b].c(),x(l[b],1),l[b].m(t,null))}for(De(),b=4;b<4;b+=1)o(b);Be()}},i(u){if(!i){for(let d=0;d<4;d+=1)x(l[d]);xe(()=>{r&&r.end(1),n=Ki(t,Es,{x:100,duration:300}),n.start()}),i=!0}},o(u){l=l.filter(Boolean);for(let d=0;d<4;d+=1)ie(l[d]);n&&n.invalidate(),r=Vi(t,Es,{x:-200,duration:100}),i=!1},d(u){u&&E(e),lt(l,u),u&&r&&r.end()}}}function Ms(s){let e,t,n,r;function i(o){s[3](o)}function a(o){s[4](o)}let l={piece:s[6]};return s[1]!==void 0&&(l.isWhite=s[1]),s[0]!==void 0&&(l.showModal=s[0]),e=new Ta({props:l}),le.push(()=>be(e,"isWhite",i)),le.push(()=>be(e,"showModal",a)),e.$on("newPromotion",s[5]),{c(){ve(e.$$.fragment)},l(o){Ee(e.$$.fragment,o)},m(o,u){we(e,o,u),r=!0},p(o,u){const d={};!t&&u&2&&(t=!0,d.isWhite=o[1],pe(()=>t=!1)),!n&&u&1&&(n=!0,d.showModal=o[0],pe(()=>n=!1)),e.$set(d)},i(o){r||(x(e.$$.fragment,o),r=!0)},o(o){ie(e.$$.fragment,o),r=!1},d(o){ke(e,o)}}}function La(s){let e,t,n=s[0]&&ks(s);return{c(){n&&n.c(),e=Ae()},l(r){n&&n.l(r),e=Ae()},m(r,i){n&&n.m(r,i),Y(r,e,i),t=!0},p(r,[i]){r[0]?n?(n.p(r,i),i&1&&x(n,1)):(n=ks(r),n.c(),x(n,1),n.m(e.parentNode,e)):n&&(De(),ie(n,1,1,()=>{n=null}),Be())},i(r){t||(x(n),t=!0)},o(r){ie(n),t=!1},d(r){n&&n.d(r),r&&E(e)}}}function Ia(s,e,t){let n=!1,r;function i(u){t(0,n=!0),u?t(1,r=!0):t(1,r=!1)}function a(u){r=u,t(1,r)}function l(u){n=u,t(0,n)}function o(u){Je.call(this,s,u)}return[n,r,i,a,l,o]}class Oa extends Ie{constructor(e){super(),Oe(this,e,Ia,La,Fe,{openPromotionModal:2})}get openPromotionModal(){return this.$$.ctx[2]}}const Fa=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,Ra=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,Na=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,qa=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function Ss(s){let e,t,n,r;return{c(){e=B("audio"),t=B("track"),n=B("source"),this.h()},l(i){e=U(i,"AUDIO",{preload:!0});var a=W(e);t=U(a,"TRACK",{kind:!0}),n=U(a,"SOURCE",{src:!0}),a.forEach(E),this.h()},h(){g(t,"kind","captions"),ct(n.src,r=Fa)||g(n,"src",r),g(e,"preload","auto")},m(i,a){Y(i,e,a),S(e,t),S(e,n),s[3](e)},p:Ce,d(i){i&&E(e),s[3](null)}}}function As(s){let e,t,n,r;return{c(){e=B("audio"),t=B("track"),n=B("source"),this.h()},l(i){e=U(i,"AUDIO",{preload:!0});var a=W(e);t=U(a,"TRACK",{kind:!0}),n=U(a,"SOURCE",{src:!0}),a.forEach(E),this.h()},h(){g(t,"kind","captions"),ct(n.src,r=Ra)||g(n,"src",r),g(e,"preload","auto")},m(i,a){Y(i,e,a),S(e,t),S(e,n),s[4](e)},p:Ce,d(i){i&&E(e),s[4](null)}}}function ys(s){let e,t,n,r;return{c(){e=B("audio"),t=B("track"),n=B("source"),this.h()},l(i){e=U(i,"AUDIO",{preload:!0});var a=W(e);t=U(a,"TRACK",{kind:!0}),n=U(a,"SOURCE",{src:!0}),a.forEach(E),this.h()},h(){g(t,"kind","captions"),ct(n.src,r=Na)||g(n,"src",r),g(e,"preload","auto")},m(i,a){Y(i,e,a),S(e,t),S(e,n),s[5](e)},p:Ce,d(i){i&&E(e),s[5](null)}}}function Cs(s){let e,t,n,r;return{c(){e=B("audio"),t=B("track"),n=B("source"),this.h()},l(i){e=U(i,"AUDIO",{preload:!0});var a=W(e);t=U(a,"TRACK",{kind:!0}),n=U(a,"SOURCE",{src:!0}),a.forEach(E),this.h()},h(){g(t,"kind","captions"),ct(n.src,r=qa)||g(n,"src",r),g(e,"preload","auto")},m(i,a){Y(i,e,a),S(e,t),S(e,n),s[6](e)},p:Ce,d(i){i&&E(e),s[6](null)}}}function Da(s){let e,t,n,r,i=s[0].MOVE&&Ss(s),a=s[0].CAPTURE&&As(s),l=s[0].CASTLE&&ys(s),o=s[0].UNDO&&Cs(s);return{c(){i&&i.c(),e=$(),a&&a.c(),t=$(),l&&l.c(),n=$(),o&&o.c(),r=Ae()},l(u){i&&i.l(u),e=ee(u),a&&a.l(u),t=ee(u),l&&l.l(u),n=ee(u),o&&o.l(u),r=Ae()},m(u,d){i&&i.m(u,d),Y(u,e,d),a&&a.m(u,d),Y(u,t,d),l&&l.m(u,d),Y(u,n,d),o&&o.m(u,d),Y(u,r,d)},p(u,[d]){u[0].MOVE?i?i.p(u,d):(i=Ss(u),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),u[0].CAPTURE?a?a.p(u,d):(a=As(u),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),u[0].CASTLE?l?l.p(u,d):(l=ys(u),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),u[0].UNDO?o?o.p(u,d):(o=Cs(u),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i:Ce,o:Ce,d(u){i&&i.d(u),u&&E(e),a&&a.d(u),u&&E(t),l&&l.d(u),u&&E(n),o&&o.d(u),u&&E(r)}}}function Ba(s,e,t){let{settings:n}=e;const r={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},i=()=>{r.CASTLE&&(r.CASTLE.pause(),t(1,r.CASTLE.currentTime=0,r)),r.MOVE&&(r.MOVE.pause(),t(1,r.MOVE.currentTime=0,r)),r.CAPTURE&&(r.CAPTURE.pause(),t(1,r.CAPTURE.currentTime=0,r)),r.UNDO&&(r.UNDO.pause(),t(1,r.UNDO.currentTime=0,r))},a=m=>m===void 0||n[m];function l(m){switch(i(),m){case"MOVE":r.MOVE&&a("MOVE")&&r.MOVE.play();break;case"CAPTURE":r.CAPTURE&&a("CAPTURE")?r.CAPTURE.play():r.MOVE&&a("MOVE")&&r.MOVE.play();break;case"CASTLE":r.CASTLE&&a("CASTLE")?r.CASTLE.play():r.MOVE&&a("MOVE")&&r.MOVE.play();break;case"UNDO":r.UNDO&&a("UNDO")?(t(1,r.UNDO.volume=.3,r),r.UNDO.play()):r.MOVE&&a("MOVE")&&r.MOVE.play();break}}function o(m){le[m?"unshift":"push"](()=>{r.MOVE=m,t(1,r)})}function u(m){le[m?"unshift":"push"](()=>{r.CAPTURE=m,t(1,r)})}function d(m){le[m?"unshift":"push"](()=>{r.CASTLE=m,t(1,r)})}function b(m){le[m?"unshift":"push"](()=>{r.UNDO=m,t(1,r)})}return s.$$set=m=>{"settings"in m&&t(0,n=m.settings)},[n,r,l,o,u,d,b]}class Ua extends Ie{constructor(e){super(),Oe(this,e,Ba,Da,Fe,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Ps=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,Ts=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function Ha(s,e){const{minWidth:t,maxWidth:n,curWidth:r}=e;let i=r,a,l,o,u;function d(y){y.stopPropagation(),s.dispatchEvent(new CustomEvent("resizing",{detail:{size:Math.max(Math.max(t,Math.min(n,o+(y.pageX-a))),Math.max(t,Math.min(n,u+(y.pageY-l))))}}))}function b(y){y.stopPropagation(),s.dispatchEvent(new CustomEvent("endResizing",{detail:{size:Math.max(Math.max(t,Math.min(n,o+Math.floor((y.pageX-a)/8)*8)),Math.max(t,Math.min(n,u+Math.floor((y.pageY-l)/8)*8)))}})),window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",b)}function m(y){y.stopPropagation(),y.button===0&&(a=y.pageX,o=i,l=y.pageY,u=i,window.addEventListener("mousemove",d),window.addEventListener("mouseup",b))}return s.addEventListener("mousedown",m),{update(y){i=y.curWidth},destroy(){s.removeEventListener("mousedown",m)}}}function Ka(s){let e,t,n,r,i,a;return{c(){e=B("div"),t=Ue("svg"),n=Ue("path"),this.h()},l(l){e=U(l,"DIV",{style:!0,class:!0});var o=W(e);t=He(o,"svg",{xmlns:!0,viewBox:!0,fill:!0});var u=W(t);n=He(u,"path",{d:!0}),W(n).forEach(E),u.forEach(E),o.forEach(E),this.h()},h(){g(n,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"viewBox","0 0 16 16"),g(t,"fill","currentColor"),Se(e,"color",je.colors[s[0].state.board.boardTheme].black),g(e,"class","svelte-mmuauc")},m(l,o){Y(l,e,o),S(e,t),S(t,n),i||(a=[fe(e,"pointerdown",oi(s[2])),Yt(r=Ha.call(null,e,{minWidth:s[0].state.board.resizible.min,maxWidth:s[0].state.board.resizible.max,curWidth:s[0].state.board.size})),fe(e,"resizing",s[3]),fe(e,"endResizing",s[4])],i=!0)},p(l,[o]){o&1&&Se(e,"color",je.colors[l[0].state.board.boardTheme].black),r&&Zt(r.update)&&o&1&&r.update.call(null,{minWidth:l[0].state.board.resizible.min,maxWidth:l[0].state.board.resizible.max,curWidth:l[0].state.board.size})},i:Ce,o:Ce,d(l){l&&E(e),i=!1,Xe(a)}}}function Va(s,e,t){let{chessboard:n}=e,{setSize:r}=e;function i(o){Je.call(this,s,o)}const a=o=>r(o.detail.size),l=o=>r(o.detail.size);return s.$$set=o=>{"chessboard"in o&&t(0,n=o.chessboard),"setSize"in o&&t(1,r=o.setSize)},[n,r,i,a,l]}class Wa extends Ie{constructor(e){super(),Oe(this,e,Va,Ka,Fe,{chessboard:0,setSize:1})}}function Ls(s,e,t){const n=s.slice();return n[72]=e[t],n}function Is(s,e,t){const n=s.slice();return n[75]=e[t],n}function Os(s){let e=[],t=new Map,n,r,i=s[5].state.pieces;const a=l=>l[75];for(let l=0;l<i.length;l+=1){let o=Is(s,i,l),u=a(o);t.set(u,e[l]=Fs(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Ae()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);n=Ae()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Y(l,n,o),r=!0},p(l,o){o[0]&116780&&(i=l[5].state.pieces,De(),e=ui(e,o,a,1,l,i,t,n.parentNode,di,Fs,n,Is),Be())},i(l){if(!r){for(let o=0;o<i.length;o+=1)x(e[o]);r=!0}},o(l){for(let o=0;o<e.length;o+=1)ie(e[o]);r=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&E(n)}}}function Fs(s,e){let t,n,r;function i(){return e[50](e[75])}function a(){return e[51](e[75])}function l(){return e[53](e[75])}return n=new bi({props:{square:e[75].square,name:e[75].name,legalState:e[5].state.legal,draggableState:e[5].state.draggable,selectedPiece:e[5].state.selectable.selectedPiece,movableState:e[5].state.movable,getGridCoordsFromSquare:e[5].getGridCoordsFromSquare,flipped:e[5].state.board.flipped}}),n.$on("move",e[14]),n.$on("clicked",i),n.$on("startMoving",a),n.$on("moving",e[15]),n.$on("endDragging",e[52]),n.$on("select",l),n.$on("deselect",e[54]),{key:s,first:null,c(){t=Ae(),ve(n.$$.fragment),this.h()},l(o){t=Ae(),Ee(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,u){Y(o,t,u),we(n,o,u),r=!0},p(o,u){e=o;const d={};u[0]&32&&(d.square=e[75].square),u[0]&32&&(d.name=e[75].name),u[0]&32&&(d.legalState=e[5].state.legal),u[0]&32&&(d.draggableState=e[5].state.draggable),u[0]&32&&(d.selectedPiece=e[5].state.selectable.selectedPiece),u[0]&32&&(d.movableState=e[5].state.movable),u[0]&32&&(d.getGridCoordsFromSquare=e[5].getGridCoordsFromSquare),u[0]&32&&(d.flipped=e[5].state.board.flipped),n.$set(d)},i(o){r||(x(n.$$.fragment,o),r=!0)},o(o){ie(n.$$.fragment,o),r=!1},d(o){o&&E(t),ke(n,o)}}}function Rs(s){let e,t;return e=new bi({props:{isGhost:!0,square:s[5].state.draggable.ghostPiece.piece.square,name:s[5].state.draggable.ghostPiece.piece.name,getGridCoordsFromSquare:s[5].getGridCoordsFromSquare,flipped:s[5].state.board.flipped}}),{c(){ve(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,r){we(e,n,r),t=!0},p(n,r){const i={};r[0]&32&&(i.square=n[5].state.draggable.ghostPiece.piece.square),r[0]&32&&(i.name=n[5].state.draggable.ghostPiece.piece.name),r[0]&32&&(i.getGridCoordsFromSquare=n[5].getGridCoordsFromSquare),r[0]&32&&(i.flipped=n[5].state.board.flipped),e.$set(i)},i(n){t||(x(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){ke(e,n)}}}function za(s){let e=[],t=new Map,n,r,i=[...s[5].state.markedSquares];const a=l=>l[72];for(let l=0;l<i.length;l+=1){let o=Ls(s,i,l),u=a(o);t.set(u,e[l]=Ns(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Ae()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);n=Ae()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Y(l,n,o),r=!0},p(l,o){o[0]&34&&(i=[...l[5].state.markedSquares],De(),e=ui(e,o,a,1,l,i,t,n.parentNode,di,Ns,n,Ls),Be())},i(l){if(!r){for(let o=0;o<i.length;o+=1)x(e[o]);r=!0}},o(l){for(let o=0;o<e.length;o+=1)ie(e[o]);r=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&E(n)}}}function Ns(s,e){let t,n,r;return n=new ma({props:{theme:e[5].state.board.boardTheme,square:e[72].square,color:e[72].color,getGridCoordsFromSquare:e[5].getGridCoordsFromSquare,flipped:e[5].state.board.flipped}}),n.$on("dragenter",e[55]),{key:s,first:null,c(){t=Ae(),ve(n.$$.fragment),this.h()},l(i){t=Ae(),Ee(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){Y(i,t,a),we(n,i,a),r=!0},p(i,a){e=i;const l={};a[0]&32&&(l.theme=e[5].state.board.boardTheme),a[0]&32&&(l.square=e[72].square),a[0]&32&&(l.color=e[72].color),a[0]&32&&(l.getGridCoordsFromSquare=e[5].getGridCoordsFromSquare),a[0]&32&&(l.flipped=e[5].state.board.flipped),n.$set(l)},i(i){r||(x(n.$$.fragment,i),r=!0)},o(i){ie(n.$$.fragment,i),r=!1},d(i){i&&E(t),ke(n,i)}}}function qs(s){let e,t;return e=new An({props:{theme:s[5].state.board.boardTheme,flipped:s[5].state.board.flipped}}),{c(){ve(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,r){we(e,n,r),t=!0},p(n,r){const i={};r[0]&32&&(i.theme=n[5].state.board.boardTheme),r[0]&32&&(i.flipped=n[5].state.board.flipped),e.$set(i)},i(n){t||(x(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){ke(e,n)}}}function Ds(s){let e,t;return e=new Wa({props:{chessboard:s[5],setSize:s[4]}}),{c(){ve(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,r){we(e,n,r),t=!0},p(n,r){const i={};r[0]&32&&(i.chessboard=n[5]),e.$set(i)},i(n){t||(x(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){ke(e,n)}}}function Bs(s){let e,t,n;function r(a){s[56](a)}let i={flipped:s[5].state.board.flipped,computerArrows:s[10],knightLShape:s[5].state.drawTools.settings.knightLShape};return s[7]!==void 0&&(i.svg=s[7]),e=new ya({props:i}),le.push(()=>be(e,"svg",r)),{c(){ve(e.$$.fragment)},l(a){Ee(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,l){const o={};l[0]&32&&(o.flipped=a[5].state.board.flipped),l[0]&1024&&(o.computerArrows=a[10]),l[0]&32&&(o.knightLShape=a[5].state.drawTools.settings.knightLShape),!t&&l[0]&128&&(t=!0,o.svg=a[7],pe(()=>t=!1)),e.$set(o)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){ie(e.$$.fragment,a),n=!1},d(a){ke(e,a)}}}function Us(s){let e,t,n={};return e=new Oa({props:n}),s[57](e),e.$on("newPromotion",s[17]),{c(){ve(e.$$.fragment)},l(r){Ee(e.$$.fragment,r)},m(r,i){we(e,r,i),t=!0},p(r,i){const a={};e.$set(a)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){ie(e.$$.fragment,r),t=!1},d(r){s[57](null),ke(e,r)}}}function Hs(s){let e,t,n={settings:s[5].state.sounds.settings};return e=new Ua({props:n}),s[62](e),{c(){ve(e.$$.fragment)},l(r){Ee(e.$$.fragment,r)},m(r,i){we(e,r,i),t=!0},p(r,i){const a={};i[0]&32&&(a.settings=r[5].state.sounds.settings),e.$set(a)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){ie(e.$$.fragment,r),t=!1},d(r){s[62](null),ke(e,r)}}}function ja(s){let e,t,n,r,i=s[12](),a,l,o,u,d,b,m,y,F,I,T,_,c,f=s[5].state.board.startFen&&Os(s),w=s[5].state.draggable.ghostPiece.enabled&&s[5].state.draggable.ghostPiece.piece!==void 0&&Rs(s),P=i&&za(s),A=s[5].state.board.notation&&qs(s),H=s[5].state.board.resizible.enabled&&Ds(s),K=s[5].state.drawTools.enabled&&Bs(s),V=s[5].state.legal.enabled&&Us(s),j=s[5].state.sounds.enabled&&Hs(s);return{c(){e=B("div"),t=B("div"),f&&f.c(),n=$(),w&&w.c(),r=$(),P&&P.c(),a=$(),A&&A.c(),l=$(),H&&H.c(),o=$(),K&&K.c(),u=$(),V&&V.c(),F=$(),j&&j.c(),I=Ae(),this.h()},l(z){e=U(z,"DIV",{class:!0,style:!0});var Q=W(e);t=U(Q,"DIV",{style:!0,class:!0});var ce=W(t);f&&f.l(ce),ce.forEach(E),n=ee(Q),w&&w.l(Q),r=ee(Q),P&&P.l(Q),a=ee(Q),A&&A.l(Q),l=ee(Q),H&&H.l(Q),o=ee(Q),K&&K.l(Q),u=ee(Q),V&&V.l(Q),Q.forEach(E),F=ee(z),j&&j.l(z),I=Ae(),this.h()},h(){Se(t,"width","100%"),Se(t,"height","100%"),g(t,"class","noselect"),g(e,"class",d="noselect board "+(s[5].state.board.style.shadow?"shadow":"")+" text-sm "+s[0]+" svelte-1bsiysh"),g(e,"style",b="--boardTheme: url("+(s[5].state.board.boardTheme==="standard"?Ps:Ts)+"); "+(s[5].state.board.style.borderRadius!=="0rem"&&s[5].state.board.style.borderRadius!=="0px"?`border-radius: ${s[5].state.board.style.borderRadius};`:"")),xe(()=>s[61].call(e))},m(z,Q){Y(z,e,Q),S(e,t),f&&f.m(t,null),S(e,n),w&&w.m(e,null),S(e,r),P&&P.m(e,null),S(e,a),A&&A.m(e,null),S(e,l),H&&H.m(e,null),S(e,o),K&&K.m(e,null),S(e,u),V&&V.m(e,null),s[60](e),y=Wi(e,s[61].bind(e)),Y(z,F,Q),j&&j.m(z,Q),Y(z,I,Q),T=!0,_||(c=[fe(e,"pointerdown",s[13]),fe(e,"contextmenu",as(s[48])),fe(e,"drag",as(s[49])),Yt(m=Ma.call(null,e,{svg:s[7],flipped:s[5].state.board.flipped,enabled:s[5].state.drawTools.enabled,settings:s[5].state.drawTools.settings})),fe(e,"drawCircle",s[58]),fe(e,"drawArrow",s[59])],_=!0)},p(z,Q){z[5].state.board.startFen?f?(f.p(z,Q),Q[0]&32&&x(f,1)):(f=Os(z),f.c(),x(f,1),f.m(t,null)):f&&(De(),ie(f,1,1,()=>{f=null}),Be()),z[5].state.draggable.ghostPiece.enabled&&z[5].state.draggable.ghostPiece.piece!==void 0?w?(w.p(z,Q),Q[0]&32&&x(w,1)):(w=Rs(z),w.c(),x(w,1),w.m(e,r)):w&&(De(),ie(w,1,1,()=>{w=null}),Be()),i&&P.p(z,Q),z[5].state.board.notation?A?(A.p(z,Q),Q[0]&32&&x(A,1)):(A=qs(z),A.c(),x(A,1),A.m(e,l)):A&&(De(),ie(A,1,1,()=>{A=null}),Be()),z[5].state.board.resizible.enabled?H?(H.p(z,Q),Q[0]&32&&x(H,1)):(H=Ds(z),H.c(),x(H,1),H.m(e,o)):H&&(De(),ie(H,1,1,()=>{H=null}),Be()),z[5].state.drawTools.enabled?K?(K.p(z,Q),Q[0]&32&&x(K,1)):(K=Bs(z),K.c(),x(K,1),K.m(e,u)):K&&(De(),ie(K,1,1,()=>{K=null}),Be()),z[5].state.legal.enabled?V?(V.p(z,Q),Q[0]&32&&x(V,1)):(V=Us(z),V.c(),x(V,1),V.m(e,null)):V&&(De(),ie(V,1,1,()=>{V=null}),Be()),(!T||Q[0]&33&&d!==(d="noselect board "+(z[5].state.board.style.shadow?"shadow":"")+" text-sm "+z[0]+" svelte-1bsiysh"))&&g(e,"class",d),(!T||Q[0]&32&&b!==(b="--boardTheme: url("+(z[5].state.board.boardTheme==="standard"?Ps:Ts)+"); "+(z[5].state.board.style.borderRadius!=="0rem"&&z[5].state.board.style.borderRadius!=="0px"?`border-radius: ${z[5].state.board.style.borderRadius};`:"")))&&g(e,"style",b),m&&Zt(m.update)&&Q[0]&160&&m.update.call(null,{svg:z[7],flipped:z[5].state.board.flipped,enabled:z[5].state.drawTools.enabled,settings:z[5].state.drawTools.settings}),z[5].state.sounds.enabled?j?(j.p(z,Q),Q[0]&32&&x(j,1)):(j=Hs(z),j.c(),x(j,1),j.m(I.parentNode,I)):j&&(De(),ie(j,1,1,()=>{j=null}),Be())},i(z){T||(x(f),x(w),x(P),x(A),x(H),x(K),x(V),x(j),T=!0)},o(z){ie(f),ie(w),ie(P),ie(A),ie(H),ie(K),ie(V),ie(j),T=!1},d(z){z&&E(e),f&&f.d(),w&&w.d(),P&&P.d(),A&&A.d(),H&&H.d(),K&&K.d(),V&&V.d(),s[60](null),y(),z&&E(F),j&&j.d(z),z&&E(I),_=!1,Xe(c)}}}function Ga(s,e,t){let{config:n}=e,{className:r=""}=e;const i=new pn(n),a=Jt();let l,o,u,d,b="";zi(()=>{document.documentElement.hasAttribute("style")&&i.state.board.resizible.enabled&&document.documentElement.removeAttribute("style")});let m=[],y={[ue.WHITE]:"",[ue.BLACK]:""};const F=C=>{i.clearAllSquares(C),C===Z.LEGAL&&i.clearAllSquares(Z.LEGALHOVER),C===Z.PREMOVE&&i.clearAllSquares(Z.PREMOVEHOVER),t(5,i)},I=(C,J)=>{i.highlightSquare(C,J),t(5,i)},T=C=>i.state.highlight.enabled&&(C===void 0||i.state.highlight.settings[C]),_=C=>{if(!i.state.selectable.enabled)return;const J=i.getPieceFromSquare(C);J!==void 0&&(F(Z.SELECT),t(5,i.state.selectable.selectedPiece=J,i),T("select")&&I(C,Z.SELECT))},c=()=>{F(Z.SELECT),F(Z.LEGAL),F(Z.PREMOVE),t(5,i.state.selectable.selectedPiece=void 0,i),t(5,i.state.legal.preMoves.curMove="",i)},f=C=>{F(Z.CHECK),C!==void 0&&T("check")&&I(y[C],Z.CHECK),t(5,i)},w=C=>{i.flipBoard(C),t(5,i)},P=(C,J)=>{C.forEach(ge=>i.highlightSquare(ge,J)),t(5,i)},A=(C,J=Z.MOVE)=>{C.length<4||P([C.substring(0,2),C.substring(2,4)],J)},H=(C,J=Z.MOVE)=>{const ge=[];C.forEach(Ne=>{Ne.length<4||(ge.push(Ne.substring(0,2)),ge.push(Ne.substring(2,4)))}),P(ge,J)},K=C=>{I(C.substring(2,4),Z.LEGAL)},V=(C,J=Z.LEGAL)=>{F(J),C.forEach(ge=>{ge.length<4||i.highlightSquare(ge.substring(2,4),J)}),t(5,i)},j=(C,J=!0)=>{i.makeMove(C),J&&(F(Z.MOVE),T("move")&&A(C)),t(5,i)},z=C=>{i.removePiece(C),t(5,i)},Q=C=>C[0]==="w"?ue.WHITE:ue.BLACK,ce=()=>i.state.movable.enabled&&(i.state.movable.color===ue.BOTH||i.state.legal.whiteToMove&&i.state.movable.color===Q("w")||!i.state.legal.whiteToMove&&i.state.movable.color===Q("b")),q=()=>{!i.state.legal.enabled||(i.state.callbacks.getWhiteToMove&&t(5,i.state.legal.whiteToMove=i.state.callbacks.getWhiteToMove(),i),i.state.callbacks.getPreMoves&&!ce()&&i.state.legal.preMoves.enabled?t(5,i.state.legal.preMoves.moves=i.state.callbacks.getPreMoves(),i):t(5,i.state.legal.preMoves.moves.length=0,i),i.state.callbacks.getLegalMoves&&ce()?t(5,i.state.legal.moves=i.state.callbacks.getLegalMoves(),i):t(5,i.state.legal.moves.length=0,i),ce()&&i.state.selectable.selectedPiece!==void 0&&i.state.legal.preMoves.enabled&&(F(Z.PREMOVE),F(Z.LEGAL),T("legal")&&i.state.legal.moves.forEach(C=>{i.state.selectable.selectedPiece&&C.substring(0,2)===i.state.selectable.selectedPiece.square&&I(C.substring(2,4),Z.LEGAL)})),i.state.callbacks.getKingLocations&&(y=i.state.callbacks.getKingLocations()),i.state.callbacks.getInCheck&&f(i.state.callbacks.getInCheck()))},h=C=>{i.state.sounds.enabled&&u.playMoveSound(C)},k=C=>{i.setGhostPiece(C),t(5,i)},M=()=>{i.removeGhostPiece(),t(5,i)},v=C=>{if(C.substring(0,2)===C.substring(2,4))return;i.state.callbacks.beforeMove&&i.state.callbacks.beforeMove(C),c();const J=i.getRookMoveIfIsCastling(C),ge=i.getCapturedPawnSquareIfIsEnPassant(C);if(J&&i.state.legal.enabled&&i.state.legal.settings.allowCastling?(j(J,!1),h("CASTLE")):ge&&i.state.legal.enabled&&i.state.legal.settings.allowEnPassant?(z(ge),h("CAPTURE")):i.isCapture(C)?h("CAPTURE"):h("MOVE"),M(),j(C),i.state.callbacks.afterMove&&i.state.callbacks.afterMove(C),q(),i.state.legal.enabled&&i.state.legal.preMoves.enabled&&i.state.legal.preMoves.curMove!==""){if(i.state.legal.moves.includes(i.state.legal.preMoves.curMove)||i.state.legal.moves.includes(`${i.state.legal.preMoves.curMove}q`)){const Ne=i.state.legal.preMoves.curMove;t(5,i.state.legal.preMoves.curMove="",i),ji().then(()=>{v(Ne)})}F(Z.NEXTMOVE)}},L=C=>{!i.state.legal.enabled||!i.state.legal.preMoves.enabled||!i.state.movable.enabled||(F(Z.PREMOVE),F(Z.NEXTMOVE),i.state.highlight.enabled&&i.state.highlight.settings.nextMove&&A(C,Z.NEXTMOVE),t(5,i.state.legal.preMoves.curMove=C,i),a("nextMove",{move:C}))},N=C=>{d.openPromotionModal(!0),b=C,i.makeMove(C),F(Z.LEGAL),F(Z.SELECT),F(Z.MOVE),A(C)},R=(C,J)=>{i.clearSquare(C,J),t(5,i)},p=()=>{i.clearAllPieces(),t(5,i)},O=(C,J)=>{i.setPiece(C,J),t(5,i)},X=(C,J)=>{var Ne;const ge=(Ne=i.getPieceFromSquare(C))==null?void 0:Ne.name;!ge||(J!==void 0?i.setPiece(C,`${J===ue.WHITE?"w":"b"}${ge[1]}`):i.setPiece(C,`${ge[0]==="w"?"b":"w"}${ge[1]}`),t(5,i))},se=(C,J)=>{const ge=Math.floor(C/i.state.board.size*8),Ne=Math.floor(J/i.state.board.size*8),qe=i.state.board.flipped?Math.abs(ge-7):ge,Le=i.state.board.flipped?Ne:Math.abs(Ne-7);return Object.keys(i.letters)[qe]+(Le+1).toString()},G=C=>{if(!i.state.movable.enabled)return!1;if(i.state.legal.enabled){if(i.state.legal.preMoves.enabled&&(i.state.movable.color===Q(C)&&i.state.legal.whiteToMove===!0&&Q(C)===ue.WHITE||i.state.legal.whiteToMove===!1&&Q(C)===ue.BLACK)||!i.state.legal.preMoves.enabled&&(i.state.legal.whiteToMove===!0&&Q(C)===ue.WHITE||i.state.legal.whiteToMove===!1&&Q(C)===ue.BLACK))return!0}else if(i.state.movable.color===ue.BOTH||i.state.movable.color===Q(C))return!0;return!1},ae=C=>{if(C.button===2){c();return}const J=l.getBoundingClientRect(),ge=C.clientX-J.left,Ne=C.clientY-J.top,qe=se(ge,Ne),Le=i.getPieceFromSquare(qe);if(a("squareClick",{square:qe,piece:Le?Le.name:void 0}),!i.state.selectable.enabled){c();return}if(i.state.selectable.selectedPiece!==void 0&&i.state.selectable.selectedPiece.square!==qe&&!i.state.legal.enabled){v(i.state.selectable.selectedPiece.square+qe),c();return}if(i.state.selectable.selectedPiece!==void 0&&i.state.selectable.selectedPiece.square!==qe&&(Le===void 0||Le.name[0]!==i.state.selectable.selectedPiece.name[0])){i.isPromotion(i.state.selectable.selectedPiece.square+qe)&&i.state.legal.moves.includes(`${i.state.selectable.selectedPiece.square+qe}q`)?N(i.state.selectable.selectedPiece.square+qe):i.state.legal.moves.includes(i.state.selectable.selectedPiece.square+qe)?v(i.state.selectable.selectedPiece.square+qe):i.state.legal.preMoves.enabled&&i.state.legal.preMoves.moves.includes(i.state.selectable.selectedPiece.square+qe)&&L(i.state.selectable.selectedPiece.square+qe),c();return}i.state.selectable.selectedPiece!==Le&&Le!==void 0&&i.state.movable.enabled&&(i.state.movable.color===ue.BOTH||i.state.movable.color===Q(Le.name))&&(T("legal")&&i.state.legal.enabled&&ce()&&(F(Z.LEGAL),i.state.legal.moves.forEach(tt=>{tt.substring(0,2)===qe&&I(tt.substring(2,4),Z.LEGAL)})),T("preMove")&&i.state.legal.enabled&&i.state.legal.preMoves.enabled&&i.state.movable.color!==ue.BOTH&&!ce()&&(F(Z.PREMOVE),i.state.legal.preMoves.moves.forEach(tt=>{tt.substring(0,2)===qe&&I(tt.substring(2,4),Z.PREMOVE)})),(i.state.legal.enabled&&G(Le.name[0])||!i.state.legal.enabled)&&_(Le.square))},te=C=>{const J=C.detail;i.state.legal.enabled?i.isPromotion(J)&&i.state.legal.moves.includes(`${J}q`)?N(J):i.state.legal.moves.includes(J)?v(J):i.state.legal.preMoves.enabled&&i.state.legal.preMoves.moves.includes(J)?L(J):c():v(J),F(Z.LEGAL),F(Z.PREMOVE),t(5,i)},re=(C,J="MOVE")=>{if(i.updatePiecesWithFen(C),F(),M(),q(),i.state.callbacks.getLastMove){const ge=i.state.callbacks.getLastMove();J!==!1&&(J!=="MOVE"?h(J):i.isCastling(ge)?h("CASTLE"):h(J)),A(ge)}else J!==!1&&h(J);t(5,i)},oe=()=>i.getShortFEN(),de=C=>{!C||i.state.board.size===C||(t(5,i.state.board.size=C,i),i.state.board.resizible.enabled&&document.documentElement.style.setProperty("--boardSize",`${i.state.board.size}px`))},Me=C=>{var J;return(J=i.getPieceFromSquare(C))==null?void 0:J.name},ne=C=>{t(10,m=C)},Pe=()=>{t(10,m.length=0,m)},Te=()=>{q()},Ke=C=>{C===!1?t(5,i.state.movable.enabled=!1,i):(t(5,i.state.movable.enabled=!0,i),t(5,i.state.movable.color=C===!0?ue.BOTH:C,i))},Ve=C=>{C!==void 0&&(i.setConfigSettings(C),t(5,i))},Re=()=>i.state,We=C=>{t(5,i.state=C,i),F(),q(),i.state.legal.enabled&&i.state.legal.lastMove!==""&&T("move")&&A(i.state.legal.lastMove),i.state.legal.enabled&&i.state.legal.preMoves.enabled&&i.state.legal.preMoves.curMove!==""&&T("nextMove")&&A(i.state.legal.preMoves.curMove,Z.NEXTMOVE),i.state.selectable.enabled&&i.state.selectable.selectedPiece!==void 0&&(T("select")&&G(i.state.selectable.selectedPiece.name)&&I(i.state.selectable.selectedPiece.square,Z.SELECT),i.state.legal.enabled&&i.state.legal.moves.length>0&&T("legal")&&i.state.legal.moves.forEach(J=>{var ge;J.substring(0,2)===((ge=i.state.selectable.selectedPiece)==null?void 0:ge.square)&&I(J.substring(2,4),Z.LEGAL)}),i.state.legal.enabled&&i.state.legal.preMoves.enabled&&i.state.legal.preMoves.moves.length>0&&T("preMove")&&i.state.legal.preMoves.moves.forEach(J=>{var ge;J.substring(0,2)===((ge=i.state.selectable.selectedPiece)==null?void 0:ge.square)&&I(J.substring(2,4),Z.PREMOVE)}))},Et=C=>C.getConfig(),ht=C=>{const J=l.getBoundingClientRect();i.state.legal.enabled&&(ce()&&i.legalHover(se(C.detail.x-J.x,C.detail.y-J.y)),!ce()&&i.state.legal.preMoves.enabled&&i.preMoveHover(se(C.detail.x-J.x,C.detail.y-J.y))),t(5,i)},gt=C=>{i.state.draggable.ghostPiece&&k(C),F(Z.SELECT),i.state.selectable.selectedPiece===void 0&&(T("legal")&&i.state.legal.enabled&&i.state.legal.moves.forEach(J=>{J.substring(0,2)===C.square&&I(J.substring(2,4),Z.LEGAL)}),T("preMove")&&i.state.legal.preMoves.enabled&&i.state.legal.preMoves.moves.forEach(J=>{J.substring(0,2)===C.square&&I(J.substring(2,4),Z.PREMOVE)}))},$e=C=>{const J=i.getPieceFromSquare(b.substring(2,4));if(!J)return;const ge=J.name[0]+C.detail.toUpperCase(),Ne=b+C.detail;i.state.callbacks.beforeMove&&i.state.callbacks.beforeMove(Ne),i.setPiece(J.square,ge),t(5,i),h("MOVE"),i.state.callbacks.afterMove&&i.state.callbacks.afterMove(Ne),q()};xt(()=>{q(),i.state.callbacks.getLastMove&&A(i.state.callbacks.getLastMove()),i.state.board.resizible&&de(i.state.board.size-i.state.board.size%8)});function wt(C){Je.call(this,s,C)}function kt(C){Je.call(this,s,C)}const Ye=C=>{a("piececlick",{piece:C})},Mt=C=>{a("startDragging",{piece:C}),gt(C)};function bt(C){Je.call(this,s,C)}const St=C=>_(C.square),Ge=()=>c(),At=C=>{I(C.detail.square,Z.LEGALHOVER)};function Qe(C){o=C,t(7,o)}function et(C){le[C?"unshift":"push"](()=>{d=C,t(9,d)})}const yt=C=>a("drawCircle",{square:C.detail.square,color:C.detail.color}),Tt=C=>a("drawArrow",{move:C.detail.move,color:C.detail.color});function qt(C){le[C?"unshift":"push"](()=>{l=C,t(6,l)})}function Dt(){i.state.board.size=this.clientWidth,t(5,i)}function Bt(C){le[C?"unshift":"push"](()=>{u=C,t(8,u)})}return s.$$set=C=>{"config"in C&&t(18,n=C.config),"className"in C&&t(0,r=C.className)},s.$$.update=()=>{s.$$.dirty[0]&32&&de(i.state.board.size-i.state.board.size%8)},[r,I,_,c,de,i,l,o,u,d,m,a,T,ae,te,ht,gt,$e,n,F,w,P,A,H,K,V,j,z,h,v,L,N,R,p,O,X,se,re,oe,Me,ne,Pe,Te,Ke,Ve,Re,We,Et,wt,kt,Ye,Mt,bt,St,Ge,At,Qe,et,yt,Tt,qt,Dt,Bt]}class Qa extends Ie{constructor(e){super(),Oe(this,e,Ga,ja,Fe,{config:18,className:0,clearAllSquares:19,highlightSquare:1,selectPiece:2,deselect:3,flipBoard:20,highlightManySquares:21,highlightMove:22,highlightMoves:23,highlightLegalMove:24,highlightLegalMoves:25,movePiece:26,removePiece:27,playMoveSound:28,makeMove:29,makeNextMove:30,makeMovePromotion:31,removeSquareHighlight:32,removeAllPiece:33,createPiece:34,changeColorOfPiece:35,getSquareFromCoords:36,setFEN:37,getShortFEN:38,setSize:4,getPieceFromSquare:39,setComputerArrows:40,removeComputerArrows:41,updateLegalState:42,setMovableColor:43,setConfigSettings:44,getState:45,setState:46,getConfigFromState:47},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[19]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get flipBoard(){return this.$$.ctx[20]}get highlightManySquares(){return this.$$.ctx[21]}get highlightMove(){return this.$$.ctx[22]}get highlightMoves(){return this.$$.ctx[23]}get highlightLegalMove(){return this.$$.ctx[24]}get highlightLegalMoves(){return this.$$.ctx[25]}get movePiece(){return this.$$.ctx[26]}get removePiece(){return this.$$.ctx[27]}get playMoveSound(){return this.$$.ctx[28]}get makeMove(){return this.$$.ctx[29]}get makeNextMove(){return this.$$.ctx[30]}get makeMovePromotion(){return this.$$.ctx[31]}get removeSquareHighlight(){return this.$$.ctx[32]}get removeAllPiece(){return this.$$.ctx[33]}get createPiece(){return this.$$.ctx[34]}get changeColorOfPiece(){return this.$$.ctx[35]}get getSquareFromCoords(){return this.$$.ctx[36]}get setFEN(){return this.$$.ctx[37]}get getShortFEN(){return this.$$.ctx[38]}get setSize(){return this.$$.ctx[4]}get getPieceFromSquare(){return this.$$.ctx[39]}get setComputerArrows(){return this.$$.ctx[40]}get removeComputerArrows(){return this.$$.ctx[41]}get updateLegalState(){return this.$$.ctx[42]}get setMovableColor(){return this.$$.ctx[43]}get setConfigSettings(){return this.$$.ctx[44]}get getState(){return this.$$.ctx[45]}get setState(){return this.$$.ctx[46]}get getConfigFromState(){return this.$$.ctx[47]}}const Ks=["standard","darkBlue"],Vs=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function Ws(s){let e,t,n;return{c(){e=B("input"),this.h()},l(r){e=U(r,"INPUT",{type:!0,class:!0}),this.h()},h(){g(e,"type","checkbox"),g(e,"class","mr-1")},m(r,i){Y(r,e,i),e.checked=s[0],t||(n=[fe(e,"click",oi(s[6])),fe(e,"change",s[7])],t=!0)},p(r,i){i&1&&(e.checked=r[0])},d(r){r&&E(e),t=!1,Xe(n)}}}function zs(s){let e,t,n;return{c(){e=Ue("svg"),t=Ue("path"),this.h()},l(r){e=He(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var i=W(e);t=He(i,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),W(t).forEach(E),i.forEach(E),this.h()},h(){g(t,"fill-rule","evenodd"),g(t,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),g(t,"clip-rule","evenodd"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"viewBox","0 0 20 20"),g(e,"fill","currentColor"),g(e,"class",n="w-5 h-5 transition "+(s[1]?"rotate-180":"rotate-0"))},m(r,i){Y(r,e,i),S(e,t)},p(r,i){i&2&&n!==(n="w-5 h-5 transition "+(r[1]?"rotate-180":"rotate-0"))&&g(e,"class",n)},d(r){r&&E(e)}}}function js(s){let e,t,n;const r=s[5].default,i=ii(r,s,s[4],null);return{c(){e=B("div"),i&&i.c(),this.h()},l(a){e=U(a,"DIV",{class:!0});var l=W(e);i&&i.l(l),l.forEach(E),this.h()},h(){g(e,"class","py-2 px-4")},m(a,l){Y(a,e,l),i&&i.m(e,null),n=!0},p(a,l){i&&i.p&&(!n||l&16)&&ni(i,r,a,a[4],n?ri(r,a[4],l,null):ai(a[4]),null)},i(a){n||(x(i,a),a&&xe(()=>{t||(t=ot(e,ut,{},!0)),t.run(1)}),n=!0)},o(a){ie(i,a),a&&(t||(t=ot(e,ut,{},!1)),t.run(0)),n=!1},d(a){a&&E(e),i&&i.d(a),a&&t&&t.end()}}}function Xa(s){let e,t,n,r,i,a,l,o,u,d,b,m,y,F,I=s[0]!==void 0&&Ws(s),T=s[3]&&zs(s),_=s[1]&&js(s);return{c(){e=B("div"),t=B("button"),n=B("div"),I&&I.c(),r=$(),i=B("span"),a=me(s[2]),o=$(),T&&T.c(),b=$(),_&&_.c(),this.h()},l(c){e=U(c,"DIV",{class:!0});var f=W(e);t=U(f,"BUTTON",{class:!0});var w=W(t);n=U(w,"DIV",{class:!0});var P=W(n);I&&I.l(P),r=ee(P),i=U(P,"SPAN",{class:!0});var A=W(i);a=_e(A,s[2]),A.forEach(E),P.forEach(E),o=ee(w),T&&T.l(w),w.forEach(E),b=ee(f),_&&_.l(f),f.forEach(E),this.h()},h(){g(i,"class",l=s[0]===void 0?"ml-[21px]":""),g(n,"class","flex gap-1"),g(t,"class",u="flex justify-between px-4 py-2 "+(s[3]?"transition hover:bg-slate-800/40":"")+" rounded"),t.disabled=d=!s[3],g(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(c,f){Y(c,e,f),S(e,t),S(t,n),I&&I.m(n,null),S(n,r),S(n,i),S(i,a),S(t,o),T&&T.m(t,null),S(e,b),_&&_.m(e,null),m=!0,y||(F=fe(t,"click",s[8]),y=!0)},p(c,[f]){c[0]!==void 0?I?I.p(c,f):(I=Ws(c),I.c(),I.m(n,r)):I&&(I.d(1),I=null),(!m||f&4)&&Nt(a,c[2]),(!m||f&1&&l!==(l=c[0]===void 0?"ml-[21px]":""))&&g(i,"class",l),c[3]?T?T.p(c,f):(T=zs(c),T.c(),T.m(t,null)):T&&(T.d(1),T=null),(!m||f&8&&u!==(u="flex justify-between px-4 py-2 "+(c[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&g(t,"class",u),(!m||f&8&&d!==(d=!c[3]))&&(t.disabled=d),c[1]?_?(_.p(c,f),f&2&&x(_,1)):(_=js(c),_.c(),x(_,1),_.m(e,null)):_&&(De(),ie(_,1,1,()=>{_=null}),Be())},i(c){m||(x(_),m=!0)},o(c){ie(_),m=!1},d(c){c&&E(e),I&&I.d(),T&&T.d(),_&&_.d(),y=!1,F()}}}function Ya(s,e,t){let{$$slots:n={},$$scope:r}=e,{name:i="board"}=e,{enabled:a=void 0}=e,{showExpand:l=!0}=e,{expanded:o=!1}=e;function u(m){Je.call(this,s,m)}function d(){a=this.checked,t(0,a)}const b=()=>{t(1,o=!o)};return s.$$set=m=>{"name"in m&&t(2,i=m.name),"enabled"in m&&t(0,a=m.enabled),"showExpand"in m&&t(3,l=m.showExpand),"expanded"in m&&t(1,o=m.expanded),"$$scope"in m&&t(4,r=m.$$scope)},[a,o,i,l,r,n,u,d,b]}class dt extends Ie{constructor(e){super(),Oe(this,e,Ya,Xa,Fe,{name:2,enabled:0,showExpand:3,expanded:1})}}function Gs(s,e,t){const n=s.slice();return n[21]=e[t],n}function Qs(s){let e,t=s[21]+"",n;return{c(){e=B("option"),n=me(t),this.h()},l(r){e=U(r,"OPTION",{});var i=W(e);n=_e(i,t),i.forEach(E),this.h()},h(){e.__value=s[21],e.value=e.__value},m(r,i){Y(r,e,i),S(e,n)},p:Ce,d(r){r&&E(e)}}}function Xs(s){let e,t,n,r,i,a,l,o,u,d,b,m,y,F,I,T;return{c(){e=B("div"),t=B("div"),n=B("input"),r=$(),i=B("label"),a=me("shadow"),l=$(),o=B("div"),u=B("input"),d=$(),b=B("label"),m=me("border-radius (rem)"),this.h()},l(_){e=U(_,"DIV",{class:!0});var c=W(e);t=U(c,"DIV",{class:!0});var f=W(t);n=U(f,"INPUT",{id:!0,type:!0,class:!0}),r=ee(f),i=U(f,"LABEL",{for:!0,class:!0});var w=W(i);a=_e(w,"shadow"),w.forEach(E),f.forEach(E),l=ee(c),o=U(c,"DIV",{class:!0});var P=W(o);u=U(P,"INPUT",{id:!0,type:!0,class:!0,min:!0,max:!0}),d=ee(P),b=U(P,"LABEL",{for:!0,class:!0});var A=W(b);m=_e(A,"border-radius (rem)"),A.forEach(E),P.forEach(E),c.forEach(E),this.h()},h(){g(n,"id","shadow"),g(n,"type","checkbox"),g(n,"class","svelte-lnr7xr"),g(i,"for","shadow"),g(i,"class","select-none"),g(t,"class","flex gap-2 mb-2"),g(u,"id","borderRadius"),g(u,"type","number"),g(u,"class","w-16 svelte-lnr7xr"),g(u,"min",0),g(u,"max",1),g(b,"for","borderRadius"),g(b,"class","select-none whitespace-nowrap"),g(o,"class","flex gap-2 mb-2"),g(e,"class","pl-2 pr-4 flex-col")},m(_,c){Y(_,e,c),S(e,t),S(t,n),n.checked=s[3],S(t,r),S(t,i),S(i,a),S(e,l),S(e,o),S(o,u),at(u,s[9]),S(o,d),S(o,b),S(b,m),F=!0,I||(T=[fe(n,"change",s[16]),fe(u,"input",s[17])],I=!0)},p(_,c){c&8&&(n.checked=_[3]),c&512&&rt(u.value)!==_[9]&&at(u,_[9])},i(_){F||(_&&xe(()=>{y||(y=ot(e,ut,{},!0)),y.run(1)}),F=!0)},o(_){_&&(y||(y=ot(e,ut,{},!1)),y.run(0)),F=!1},d(_){_&&E(e),_&&y&&y.end(),I=!1,Xe(T)}}}function Ys(s){let e,t,n,r,i,a,l,o,u,d,b,m,y,F,I,T;return{c(){e=B("div"),t=B("div"),n=B("input"),r=$(),i=B("label"),a=me("min"),l=$(),o=B("div"),u=B("input"),d=$(),b=B("label"),m=me("max"),this.h()},l(_){e=U(_,"DIV",{class:!0});var c=W(e);t=U(c,"DIV",{class:!0});var f=W(t);n=U(f,"INPUT",{id:!0,type:!0,class:!0}),r=ee(f),i=U(f,"LABEL",{for:!0,class:!0});var w=W(i);a=_e(w,"min"),w.forEach(E),f.forEach(E),l=ee(c),o=U(c,"DIV",{class:!0});var P=W(o);u=U(P,"INPUT",{id:!0,type:!0,class:!0}),d=ee(P),b=U(P,"LABEL",{for:!0,class:!0});var A=W(b);m=_e(A,"max"),A.forEach(E),P.forEach(E),c.forEach(E),this.h()},h(){g(n,"id","resizibleMin"),g(n,"type","number"),g(n,"class","w-16 svelte-lnr7xr"),g(i,"for","resizibleMin"),g(i,"class","select-none"),g(t,"class","flex gap-2 mb-2"),g(u,"id","resizibleMax"),g(u,"type","number"),g(u,"class","w-16 svelte-lnr7xr"),g(b,"for","resizibleMax"),g(b,"class","select-none"),g(o,"class","flex gap-2"),g(e,"class","pl-2 pr-4 flex-col")},m(_,c){Y(_,e,c),S(e,t),S(t,n),at(n,s[5]),S(t,r),S(t,i),S(i,a),S(e,l),S(e,o),S(o,u),at(u,s[6]),S(o,d),S(o,b),S(b,m),F=!0,I||(T=[fe(n,"input",s[19]),fe(u,"input",s[20])],I=!0)},p(_,c){c&32&&rt(n.value)!==_[5]&&at(n,_[5]),c&64&&rt(u.value)!==_[6]&&at(u,_[6])},i(_){F||(_&&xe(()=>{y||(y=ot(e,ut,{},!0)),y.run(1)}),F=!0)},o(_){_&&(y||(y=ot(e,ut,{},!1)),y.run(0)),F=!1},d(_){_&&E(e),_&&y&&y.end(),I=!1,Xe(T)}}}function Za(s){let e,t,n,r,i,a,l,o,u,d,b,m,y,F,I,T,_,c,f,w,P,A,H,K,V,j,z,Q,ce,q,h,k,M,v,L=Ks,N=[];for(let O=0;O<L.length;O+=1)N[O]=Qs(Gs(s,L,O));let R=s[10]&&Xs(s),p=s[4]&&Ys(s);return{c(){e=B("div"),t=B("select");for(let O=0;O<N.length;O+=1)N[O].c();n=$(),r=B("label"),i=me("board theme"),a=$(),l=B("div"),o=B("input"),u=$(),d=B("label"),b=me("notation"),m=$(),y=B("div"),F=B("input"),I=$(),T=B("label"),_=me("flipped"),c=$(),f=B("div"),w=B("input"),P=$(),A=B("label"),H=me("style"),K=$(),R&&R.c(),V=$(),j=B("div"),z=B("input"),Q=$(),ce=B("label"),q=me("resizible"),h=$(),p&&p.c(),k=Ae(),this.h()},l(O){e=U(O,"DIV",{class:!0});var X=W(e);t=U(X,"SELECT",{class:!0});var se=W(t);for(let Te=0;Te<N.length;Te+=1)N[Te].l(se);se.forEach(E),n=ee(X),r=U(X,"LABEL",{for:!0,class:!0});var G=W(r);i=_e(G,"board theme"),G.forEach(E),X.forEach(E),a=ee(O),l=U(O,"DIV",{class:!0});var ae=W(l);o=U(ae,"INPUT",{id:!0,type:!0,class:!0}),u=ee(ae),d=U(ae,"LABEL",{for:!0,class:!0});var te=W(d);b=_e(te,"notation"),te.forEach(E),ae.forEach(E),m=ee(O),y=U(O,"DIV",{class:!0});var re=W(y);F=U(re,"INPUT",{id:!0,type:!0,class:!0}),I=ee(re),T=U(re,"LABEL",{for:!0,class:!0});var oe=W(T);_=_e(oe,"flipped"),oe.forEach(E),re.forEach(E),c=ee(O),f=U(O,"DIV",{});var de=W(f);w=U(de,"INPUT",{id:!0,type:!0,class:!0}),P=ee(de),A=U(de,"LABEL",{for:!0,class:!0});var Me=W(A);H=_e(Me,"style"),Me.forEach(E),de.forEach(E),K=ee(O),R&&R.l(O),V=ee(O),j=U(O,"DIV",{class:!0});var ne=W(j);z=U(ne,"INPUT",{id:!0,type:!0,class:!0}),Q=ee(ne),ce=U(ne,"LABEL",{for:!0,class:!0});var Pe=W(ce);q=_e(Pe,"resizible"),Pe.forEach(E),ne.forEach(E),h=ee(O),p&&p.l(O),k=Ae(),this.h()},h(){g(t,"class","svelte-lnr7xr"),s[0]===void 0&&xe(()=>s[12].call(t)),g(r,"for","boardTheme"),g(r,"class","select-none"),g(e,"class","mb-2"),g(o,"id","notation"),g(o,"type","checkbox"),g(o,"class","svelte-lnr7xr"),g(d,"for","notation"),g(d,"class","select-none"),g(l,"class","mb-2"),g(F,"id","flipped"),g(F,"type","checkbox"),g(F,"class","svelte-lnr7xr"),g(T,"for","flipped"),g(T,"class","select-none"),g(y,"class","mb-2"),g(w,"id","styleEnabled"),g(w,"type","checkbox"),g(w,"class","svelte-lnr7xr"),g(A,"for","styleEnabled"),g(A,"class","select-none"),g(z,"id","resizibleEnabled"),g(z,"type","checkbox"),g(z,"class","svelte-lnr7xr"),g(ce,"for","resizibleEnabled"),g(ce,"class","select-none"),g(j,"class","mt-2 mb-1")},m(O,X){Y(O,e,X),S(e,t);for(let se=0;se<N.length;se+=1)N[se].m(t,null);vt(t,s[0]),S(e,n),S(e,r),S(r,i),Y(O,a,X),Y(O,l,X),S(l,o),o.checked=s[1],S(l,u),S(l,d),S(d,b),Y(O,m,X),Y(O,y,X),S(y,F),F.checked=s[2],S(y,I),S(y,T),S(T,_),Y(O,c,X),Y(O,f,X),S(f,w),w.checked=s[10],S(f,P),S(f,A),S(A,H),Y(O,K,X),R&&R.m(O,X),Y(O,V,X),Y(O,j,X),S(j,z),z.checked=s[4],S(j,Q),S(j,ce),S(ce,q),Y(O,h,X),p&&p.m(O,X),Y(O,k,X),M||(v=[fe(t,"change",s[12]),fe(o,"change",s[13]),fe(F,"change",s[14]),fe(w,"change",s[15]),fe(z,"change",s[18])],M=!0)},p(O,X){if(X&0){L=Ks;let se;for(se=0;se<L.length;se+=1){const G=Gs(O,L,se);N[se]?N[se].p(G,X):(N[se]=Qs(G),N[se].c(),N[se].m(t,null))}for(;se<N.length;se+=1)N[se].d(1);N.length=L.length}X&1&&vt(t,O[0]),X&2&&(o.checked=O[1]),X&4&&(F.checked=O[2]),X&1024&&(w.checked=O[10]),O[10]?R?(R.p(O,X),X&1024&&x(R,1)):(R=Xs(O),R.c(),x(R,1),R.m(V.parentNode,V)):R&&(De(),ie(R,1,1,()=>{R=null}),Be()),X&16&&(z.checked=O[4]),O[4]?p?(p.p(O,X),X&16&&x(p,1)):(p=Ys(O),p.c(),x(p,1),p.m(k.parentNode,k)):p&&(De(),ie(p,1,1,()=>{p=null}),Be())},d(O){O&&E(e),lt(N,O),O&&E(a),O&&E(l),O&&E(m),O&&E(y),O&&E(c),O&&E(f),O&&E(K),R&&R.d(O),O&&E(V),O&&E(j),O&&E(h),p&&p.d(O),O&&E(k),M=!1,Xe(v)}}}function Ja(s){let e,t;return e=new dt({props:{name:s[7],expanded:s[8],$$slots:{default:[Za]},$$scope:{ctx:s}}}),{c(){ve(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,r){we(e,n,r),t=!0},p(n,[r]){const i={};r&128&&(i.name=n[7]),r&256&&(i.expanded=n[8]),r&16778879&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(x(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){ke(e,n)}}}function xa(s,e,t){let{name:n="Board"}=e,{boardTheme:r}=e,{notation:i}=e,{flipped:a}=e,{shadow:l}=e,{borderRadius:o="0px"}=e,{resizible:u=!1}=e,{min:d=0}=e,{max:b=0}=e,{expanded:m=!1}=e,y=!0,F=parseFloat(o.endsWith("px")?o.slice(0,-2):o.slice(0,-3));function I(){r=$t(this),t(0,r)}function T(){i=this.checked,t(1,i)}function _(){a=this.checked,t(2,a)}function c(){y=this.checked,t(10,y)}function f(){l=this.checked,t(3,l)}function w(){F=rt(this.value),t(9,F)}function P(){u=this.checked,t(4,u)}function A(){d=rt(this.value),t(5,d)}function H(){b=rt(this.value),t(6,b)}return s.$$set=K=>{"name"in K&&t(7,n=K.name),"boardTheme"in K&&t(0,r=K.boardTheme),"notation"in K&&t(1,i=K.notation),"flipped"in K&&t(2,a=K.flipped),"shadow"in K&&t(3,l=K.shadow),"borderRadius"in K&&t(11,o=K.borderRadius),"resizible"in K&&t(4,u=K.resizible),"min"in K&&t(5,d=K.min),"max"in K&&t(6,b=K.max),"expanded"in K&&t(8,m=K.expanded)},s.$$.update=()=>{s.$$.dirty&512&&t(11,o=`${F!=null?F:0}rem`)},[r,i,a,l,u,d,b,n,m,F,y,o,I,T,_,c,f,w,P,A,H]}class $a extends Ie{constructor(e){super(),Oe(this,e,xa,Ja,Fe,{name:7,boardTheme:0,notation:1,flipped:2,shadow:3,borderRadius:11,resizible:4,min:5,max:6,expanded:8})}}function er(s){let e,t,n,r,i,a,l,o,u,d;return{c(){e=B("div"),t=B("select"),n=B("option"),r=me("Both"),i=B("option"),a=me("White"),l=B("option"),o=me("Black"),this.h()},l(b){e=U(b,"DIV",{});var m=W(e);t=U(m,"SELECT",{class:!0});var y=W(t);n=U(y,"OPTION",{});var F=W(n);r=_e(F,"Both"),F.forEach(E),i=U(y,"OPTION",{});var I=W(i);a=_e(I,"White"),I.forEach(E),l=U(y,"OPTION",{});var T=W(l);o=_e(T,"Black"),T.forEach(E),y.forEach(E),m.forEach(E),this.h()},h(){n.__value=ue.BOTH,n.value=n.__value,i.__value=ue.WHITE,i.value=i.__value,l.__value=ue.BLACK,l.value=l.__value,g(t,"class","svelte-xrxnwg"),s[1]===void 0&&xe(()=>s[4].call(t))},m(b,m){Y(b,e,m),S(e,t),S(t,n),S(n,r),S(t,i),S(i,a),S(t,l),S(l,o),vt(t,s[1]),u||(d=fe(t,"change",s[4]),u=!0)},p(b,m){m&2&&vt(t,b[1])},d(b){b&&E(e),u=!1,d()}}}function tr(s){let e,t,n;function r(a){s[5](a)}let i={name:s[2],expanded:s[3],$$slots:{default:[er]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new dt({props:i}),le.push(()=>be(e,"enabled",r)),{c(){ve(e.$$.fragment)},l(a){Ee(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&4&&(o.name=a[2]),l&8&&(o.expanded=a[3]),l&66&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],pe(()=>t=!1)),e.$set(o)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){ie(e.$$.fragment,a),n=!1},d(a){ke(e,a)}}}function sr(s,e,t){let{name:n="Movable"}=e,{enabled:r=!1}=e,{color:i}=e,{expanded:a=!1}=e;function l(){i=$t(this),t(1,i)}function o(u){r=u,t(0,r)}return s.$$set=u=>{"name"in u&&t(2,n=u.name),"enabled"in u&&t(0,r=u.enabled),"color"in u&&t(1,i=u.color),"expanded"in u&&t(3,a=u.expanded)},[r,i,n,a,l,o]}class ir extends Ie{constructor(e){super(),Oe(this,e,sr,tr,Fe,{name:2,enabled:0,color:1,expanded:3})}}function Zs(s,e,t){const n=s.slice();return n[12]=e[t],n}function Js(s){let e,t,n,r,i,a,l,o,u,d,b,m,y,F,I,T,_=Vs,c=[];for(let f=0;f<_.length;f+=1)c[f]=xs(Zs(s,_,f));return{c(){e=B("div"),t=B("div"),n=B("input"),r=$(),i=B("label"),a=me("duration"),l=$(),o=B("div"),u=B("select");for(let f=0;f<c.length;f+=1)c[f].c();d=$(),b=B("label"),m=me("easing"),this.h()},l(f){e=U(f,"DIV",{class:!0});var w=W(e);t=U(w,"DIV",{class:!0});var P=W(t);n=U(P,"INPUT",{id:!0,type:!0,class:!0}),r=ee(P),i=U(P,"LABEL",{for:!0,class:!0});var A=W(i);a=_e(A,"duration"),A.forEach(E),P.forEach(E),l=ee(w),o=U(w,"DIV",{class:!0});var H=W(o);u=U(H,"SELECT",{id:!0,class:!0});var K=W(u);for(let j=0;j<c.length;j+=1)c[j].l(K);K.forEach(E),d=ee(H),b=U(H,"LABEL",{for:!0,class:!0});var V=W(b);m=_e(V,"easing"),V.forEach(E),H.forEach(E),w.forEach(E),this.h()},h(){g(n,"id","transitionDuration"),g(n,"type","number"),g(n,"class","w-16 svelte-1qpp6cx"),g(i,"for","transitionDuration"),g(i,"class","select-none"),g(t,"class","flex gap-2 mb-2"),g(u,"id","easingFuncs"),g(u,"class","svelte-1qpp6cx"),s[4]===void 0&&xe(()=>s[10].call(u)),g(b,"for","easingFuncs"),g(b,"class","select-none"),g(o,"class","flex gap-2"),g(e,"class","pl-2 pr-4 flex-col")},m(f,w){Y(f,e,w),S(e,t),S(t,n),at(n,s[3]),S(t,r),S(t,i),S(i,a),S(e,l),S(e,o),S(o,u);for(let P=0;P<c.length;P+=1)c[P].m(u,null);vt(u,s[4]),S(o,d),S(o,b),S(b,m),F=!0,I||(T=[fe(n,"input",s[9]),fe(u,"change",s[10])],I=!0)},p(f,w){if(w&8&&rt(n.value)!==f[3]&&at(n,f[3]),w&0){_=Vs;let P;for(P=0;P<_.length;P+=1){const A=Zs(f,_,P);c[P]?c[P].p(A,w):(c[P]=xs(A),c[P].c(),c[P].m(u,null))}for(;P<c.length;P+=1)c[P].d(1);c.length=_.length}w&16&&vt(u,f[4])},i(f){F||(f&&xe(()=>{y||(y=ot(e,ut,{},!0)),y.run(1)}),F=!0)},o(f){f&&(y||(y=ot(e,ut,{},!1)),y.run(0)),F=!1},d(f){f&&E(e),lt(c,f),f&&y&&y.end(),I=!1,Xe(T)}}}function xs(s){let e,t=s[12]+"",n;return{c(){e=B("option"),n=me(t),this.h()},l(r){e=U(r,"OPTION",{});var i=W(e);n=_e(i,t),i.forEach(E),this.h()},h(){e.__value=s[12],e.value=e.__value},m(r,i){Y(r,e,i),S(e,n)},p:Ce,d(r){r&&E(e)}}}function nr(s){let e,t,n,r,i,a,l,o,u,d,b,m,y,F,I,T=s[2]&&Js(s);return{c(){e=B("div"),t=B("input"),n=$(),r=B("label"),i=me("ghost piece"),a=$(),l=B("div"),o=B("input"),u=$(),d=B("label"),b=me("transition"),m=$(),T&&T.c(),y=Ae(),this.h()},l(_){e=U(_,"DIV",{class:!0});var c=W(e);t=U(c,"INPUT",{id:!0,type:!0,class:!0}),n=ee(c),r=U(c,"LABEL",{for:!0,class:!0});var f=W(r);i=_e(f,"ghost piece"),f.forEach(E),c.forEach(E),a=ee(_),l=U(_,"DIV",{class:!0});var w=W(l);o=U(w,"INPUT",{id:!0,type:!0,class:!0}),u=ee(w),d=U(w,"LABEL",{for:!0,class:!0});var P=W(d);b=_e(P,"transition"),P.forEach(E),w.forEach(E),m=ee(_),T&&T.l(_),y=Ae(),this.h()},h(){g(t,"id","ghostPiece"),g(t,"type","checkbox"),g(t,"class","svelte-1qpp6cx"),g(r,"for","ghostPiece"),g(r,"class","select-none"),g(e,"class","mb-2"),g(o,"id","draggableEnabled"),g(o,"type","checkbox"),g(o,"class","svelte-1qpp6cx"),g(d,"for","draggableEnabled"),g(d,"class","select-none"),g(l,"class","mb-2")},m(_,c){Y(_,e,c),S(e,t),t.checked=s[1],S(e,n),S(e,r),S(r,i),Y(_,a,c),Y(_,l,c),S(l,o),o.checked=s[2],S(l,u),S(l,d),S(d,b),Y(_,m,c),T&&T.m(_,c),Y(_,y,c),F||(I=[fe(t,"change",s[7]),fe(o,"change",s[8])],F=!0)},p(_,c){c&2&&(t.checked=_[1]),c&4&&(o.checked=_[2]),_[2]?T?(T.p(_,c),c&4&&x(T,1)):(T=Js(_),T.c(),x(T,1),T.m(y.parentNode,y)):T&&(De(),ie(T,1,1,()=>{T=null}),Be())},d(_){_&&E(e),_&&E(a),_&&E(l),_&&E(m),T&&T.d(_),_&&E(y),F=!1,Xe(I)}}}function ar(s){let e,t,n;function r(a){s[11](a)}let i={name:s[5],expanded:s[6],$$slots:{default:[nr]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new dt({props:i}),le.push(()=>be(e,"enabled",r)),{c(){ve(e.$$.fragment)},l(a){Ee(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&32&&(o.name=a[5]),l&64&&(o.expanded=a[6]),l&32798&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],pe(()=>t=!1)),e.$set(o)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){ie(e.$$.fragment,a),n=!1},d(a){ke(e,a)}}}function rr(s,e,t){let{name:n="Draggable"}=e,{enabled:r=!1}=e,{ghostPiece:i=!1}=e,{transition:a=!1}=e,{duration:l=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function d(){i=this.checked,t(1,i)}function b(){a=this.checked,t(2,a)}function m(){l=rt(this.value),t(3,l)}function y(){o=$t(this),t(4,o)}function F(I){r=I,t(0,r)}return s.$$set=I=>{"name"in I&&t(5,n=I.name),"enabled"in I&&t(0,r=I.enabled),"ghostPiece"in I&&t(1,i=I.ghostPiece),"transition"in I&&t(2,a=I.transition),"duration"in I&&t(3,l=I.duration),"easing"in I&&t(4,o=I.easing),"expanded"in I&&t(6,u=I.expanded)},[r,i,a,l,o,n,u,d,b,m,y,F]}class lr extends Ie{constructor(e){super(),Oe(this,e,rr,ar,Fe,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function $s(s,e,t){const n=s.slice();return n[7]=e[t],n[8]=e,n[9]=t,n}function ei(s){let e,t,n,r,i=s[7]+"",a,l,o,u;function d(){s[5].call(t,s[7])}return{c(){e=B("div"),t=B("input"),n=$(),r=B("label"),a=me(i),l=$(),this.h()},l(b){e=U(b,"DIV",{class:!0});var m=W(e);t=U(m,"INPUT",{id:!0,type:!0}),n=ee(m),r=U(m,"LABEL",{for:!0,class:!0});var y=W(r);a=_e(y,i),y.forEach(E),l=ee(m),m.forEach(E),this.h()},h(){g(t,"id",s[7]+"Enabled"),g(t,"type","checkbox"),g(r,"for",s[7]+"Enabled"),g(r,"class","select-none"),g(e,"class","mb-2")},m(b,m){Y(b,e,m),S(e,t),t.checked=s[1][s[7]],S(e,n),S(e,r),S(r,a),S(e,l),o||(u=fe(t,"change",d),o=!0)},p(b,m){s=b,m&18&&(t.checked=s[1][s[7]])},d(b){b&&E(e),o=!1,u()}}}function or(s){let e,t=s[4],n=[];for(let r=0;r<t.length;r+=1)n[r]=ei($s(s,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ae()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=Ae()},m(r,i){for(let a=0;a<n.length;a+=1)n[a].m(r,i);Y(r,e,i)},p(r,i){if(i&18){t=r[4];let a;for(a=0;a<t.length;a+=1){const l=$s(r,t,a);n[a]?n[a].p(l,i):(n[a]=ei(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){lt(n,r),r&&E(e)}}}function ur(s){let e,t,n;function r(a){s[6](a)}let i={name:s[2],expanded:s[3],$$slots:{default:[or]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new dt({props:i}),le.push(()=>be(e,"enabled",r)),{c(){ve(e.$$.fragment)},l(a){Ee(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&4&&(o.name=a[2]),l&8&&(o.expanded=a[3]),l&1026&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],pe(()=>t=!1)),e.$set(o)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){ie(e.$$.fragment,a),n=!1},d(a){ke(e,a)}}}function dr(s,e,t){let{name:n="Highlight"}=e,{enabled:r=!1}=e,{settings:i}=e;const a=["select","legal","move","preMove","nextMove","check"];let{expanded:l=!1}=e;function o(d){i[d]=this.checked,t(1,i)}function u(d){r=d,t(0,r)}return s.$$set=d=>{"name"in d&&t(2,n=d.name),"enabled"in d&&t(0,r=d.enabled),"settings"in d&&t(1,i=d.settings),"expanded"in d&&t(3,l=d.expanded)},[r,i,n,l,a,o,u]}class fr extends Ie{constructor(e){super(),Oe(this,e,dr,ur,Fe,{name:2,enabled:0,settings:1,expanded:3})}}function cr(s){let e,t,n,r,i,a,l,o,u,d,b,m,y;return{c(){e=B("div"),t=B("input"),n=$(),r=B("label"),i=me("L shape knight move"),a=$(),l=B("div"),o=B("input"),u=$(),d=B("label"),b=me("only chess move"),this.h()},l(F){e=U(F,"DIV",{class:!0});var I=W(e);t=U(I,"INPUT",{id:!0,type:!0}),n=ee(I),r=U(I,"LABEL",{for:!0,class:!0});var T=W(r);i=_e(T,"L shape knight move"),T.forEach(E),I.forEach(E),a=ee(F),l=U(F,"DIV",{class:!0});var _=W(l);o=U(_,"INPUT",{id:!0,type:!0}),u=ee(_),d=U(_,"LABEL",{for:!0,class:!0});var c=W(d);b=_e(c,"only chess move"),c.forEach(E),_.forEach(E),this.h()},h(){g(t,"id","knightLShapeMoveEnabled"),g(t,"type","checkbox"),g(r,"for","knightLShapeMoveEnabled"),g(r,"class","select-none"),g(e,"class","mb-2"),g(o,"id","onlyChessMoveEnabled"),g(o,"type","checkbox"),g(d,"for","onlyChessMoveEnabled"),g(d,"class","select-none"),g(l,"class","mb-2")},m(F,I){Y(F,e,I),S(e,t),t.checked=s[1],S(e,n),S(e,r),S(r,i),Y(F,a,I),Y(F,l,I),S(l,o),o.checked=s[2],S(l,u),S(l,d),S(d,b),m||(y=[fe(t,"change",s[5]),fe(o,"change",s[6])],m=!0)},p(F,I){I&2&&(t.checked=F[1]),I&4&&(o.checked=F[2])},d(F){F&&E(e),F&&E(a),F&&E(l),m=!1,Xe(y)}}}function hr(s){let e,t,n;function r(a){s[7](a)}let i={name:s[3],expanded:s[4],$$slots:{default:[cr]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new dt({props:i}),le.push(()=>be(e,"enabled",r)),{c(){ve(e.$$.fragment)},l(a){Ee(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&8&&(o.name=a[3]),l&16&&(o.expanded=a[4]),l&262&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],pe(()=>t=!1)),e.$set(o)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){ie(e.$$.fragment,a),n=!1},d(a){ke(e,a)}}}function gr(s,e,t){let{name:n="DrawTools"}=e,{enabled:r=!1}=e,{knightLShape:i=!1}=e,{onlyChessMove:a=!1}=e,{expanded:l=!1}=e;function o(){i=this.checked,t(1,i)}function u(){a=this.checked,t(2,a)}function d(b){r=b,t(0,r)}return s.$$set=b=>{"name"in b&&t(3,n=b.name),"enabled"in b&&t(0,r=b.enabled),"knightLShape"in b&&t(1,i=b.knightLShape),"onlyChessMove"in b&&t(2,a=b.onlyChessMove),"expanded"in b&&t(4,l=b.expanded)},[r,i,a,n,l,o,u,d]}class br extends Ie{constructor(e){super(),Oe(this,e,gr,hr,Fe,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function ti(s,e,t){const n=s.slice();return n[7]=e[t],n[8]=e,n[9]=t,n}function si(s){let e,t,n,r,i=s[7].toLowerCase()+"",a,l,o,u;function d(){s[5].call(t,s[7])}return{c(){e=B("div"),t=B("input"),n=$(),r=B("label"),a=me(i),l=$(),this.h()},l(b){e=U(b,"DIV",{class:!0});var m=W(e);t=U(m,"INPUT",{id:!0,type:!0}),n=ee(m),r=U(m,"LABEL",{for:!0,class:!0});var y=W(r);a=_e(y,i),y.forEach(E),l=ee(m),m.forEach(E),this.h()},h(){g(t,"id",s[7]+"Enabled"),g(t,"type","checkbox"),g(r,"for",s[7]+"Enabled"),g(r,"class","select-none"),g(e,"class","mb-2")},m(b,m){Y(b,e,m),S(e,t),t.checked=s[1][s[7]],S(e,n),S(e,r),S(r,a),S(e,l),o||(u=fe(t,"change",d),o=!0)},p(b,m){s=b,m&18&&(t.checked=s[1][s[7]])},d(b){b&&E(e),o=!1,u()}}}function pr(s){let e,t=s[4],n=[];for(let r=0;r<t.length;r+=1)n[r]=si(ti(s,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ae()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=Ae()},m(r,i){for(let a=0;a<n.length;a+=1)n[a].m(r,i);Y(r,e,i)},p(r,i){if(i&18){t=r[4];let a;for(a=0;a<t.length;a+=1){const l=ti(r,t,a);n[a]?n[a].p(l,i):(n[a]=si(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){lt(n,r),r&&E(e)}}}function mr(s){let e,t,n;function r(a){s[6](a)}let i={name:s[2],expanded:s[3],$$slots:{default:[pr]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new dt({props:i}),le.push(()=>be(e,"enabled",r)),{c(){ve(e.$$.fragment)},l(a){Ee(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&4&&(o.name=a[2]),l&8&&(o.expanded=a[3]),l&1026&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],pe(()=>t=!1)),e.$set(o)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){ie(e.$$.fragment,a),n=!1},d(a){ke(e,a)}}}function _r(s,e,t){let{name:n="Sounds"}=e,{enabled:r=!1}=e,{settings:i}=e;const a=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:l=!1}=e;function o(d){i[d]=this.checked,t(1,i)}function u(d){r=d,t(0,r)}return s.$$set=d=>{"name"in d&&t(2,n=d.name),"enabled"in d&&t(0,r=d.enabled),"settings"in d&&t(1,i=d.settings),"expanded"in d&&t(3,l=d.expanded)},[r,i,n,l,a,o,u]}class vr extends Ie{constructor(e){super(),Oe(this,e,_r,mr,Fe,{name:2,enabled:0,settings:1,expanded:3})}}function Er(s){let e,t;return{c(){e=Ue("svg"),t=Ue("path"),this.h()},l(n){e=He(n,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var r=W(e);t=He(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),W(t).forEach(E),r.forEach(E),this.h()},h(){g(t,"stroke-linecap","round"),g(t,"stroke-linejoin","round"),g(t,"stroke-width","2"),g(t,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),Se(e,"transform","translate(1px, 0px)"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"class","h-5"),g(e,"fill","none"),g(e,"viewBox","0 0 24 24"),g(e,"aria-hidden","true"),g(e,"stroke","currentColor")},m(n,r){Y(n,e,r),S(e,t)},d(n){n&&E(e)}}}function wr(s){let e,t;return{c(){e=Ue("svg"),t=Ue("path"),this.h()},l(n){e=He(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var r=W(e);t=He(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),W(t).forEach(E),r.forEach(E),this.h()},h(){g(t,"stroke-linecap","round"),g(t,"stroke-linejoin","round"),g(t,"stroke-width","2"),g(t,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"class","h-5 text-green-500"),g(e,"fill","none"),g(e,"viewBox","0 0 24 24"),g(e,"aria-hidden","true"),g(e,"stroke","currentColor")},m(n,r){Y(n,e,r),S(e,t)},d(n){n&&E(e)}}}function kr(s){let e,t,n;function r(l,o){return l[1]?wr:Er}let i=r(s),a=i(s);return{c(){e=B("button"),a.c(),this.h()},l(l){e=U(l,"BUTTON",{type:!0,class:!0});var o=W(e);a.l(o),o.forEach(E),this.h()},h(){g(e,"type","button"),g(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(l,o){Y(l,e,o),a.m(e,null),s[4](e),t||(n=fe(e,"click",s[2]),t=!0)},p(l,[o]){i!==(i=r(l))&&(a.d(1),a=i(l),a&&(a.c(),a.m(e,null)))},i:Ce,o:Ce,d(l){l&&E(e),a.d(),s[4](null),t=!1,n()}}}function Mr(s,e,t){let{copyText:n}=e,r,i=!1;function a(){navigator.clipboard.writeText(n),t(1,i=!0),setTimeout(()=>{t(1,i=!1)},2e3),r.setAttribute("data-cooltipz-dir","top"),r.setAttribute("aria-label","Copied!"),setTimeout(()=>{r.removeAttribute("aria-label"),r.removeAttribute("data-cooltipz-dir")},2e3)}function l(o){le[o?"unshift":"push"](()=>{r=o,t(0,r)})}return s.$$set=o=>{"copyText"in o&&t(3,n=o.copyText)},[r,i,a,n,l]}class Sr extends Ie{constructor(e){super(),Oe(this,e,Mr,kr,Fe,{copyText:3})}}function Ar(s){let e,t,n,r,i,a,l;return{c(){e=B("div"),t=B("input"),n=$(),r=B("label"),i=me("preMoves"),this.h()},l(o){e=U(o,"DIV",{});var u=W(e);t=U(u,"INPUT",{id:!0,type:!0}),n=ee(u),r=U(u,"LABEL",{for:!0,class:!0});var d=W(r);i=_e(d,"preMoves"),d.forEach(E),u.forEach(E),this.h()},h(){g(t,"id","preMovesEnabled"),g(t,"type","checkbox"),g(r,"for","preMovesEnabled"),g(r,"class","select-none")},m(o,u){Y(o,e,u),S(e,t),t.checked=s[1],S(e,n),S(e,r),S(r,i),a||(l=fe(t,"change",s[4]),a=!0)},p(o,u){u&2&&(t.checked=o[1])},d(o){o&&E(e),a=!1,l()}}}function yr(s){let e,t,n;function r(a){s[5](a)}let i={name:s[2],expanded:s[3],$$slots:{default:[Ar]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new dt({props:i}),le.push(()=>be(e,"enabled",r)),{c(){ve(e.$$.fragment)},l(a){Ee(e.$$.fragment,a)},m(a,l){we(e,a,l),n=!0},p(a,[l]){const o={};l&4&&(o.name=a[2]),l&8&&(o.expanded=a[3]),l&66&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.enabled=a[0],pe(()=>t=!1)),e.$set(o)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){ie(e.$$.fragment,a),n=!1},d(a){ke(e,a)}}}function Cr(s,e,t){let{name:n="Legal"}=e,{enabled:r=!1}=e,{preMovesEnabled:i=!1}=e,{expanded:a=!1}=e;function l(){i=this.checked,t(1,i)}function o(u){r=u,t(0,r)}return s.$$set=u=>{"name"in u&&t(2,n=u.name),"enabled"in u&&t(0,r=u.enabled),"preMovesEnabled"in u&&t(1,i=u.preMovesEnabled),"expanded"in u&&t(3,a=u.expanded)},[r,i,n,a,l,o]}class Pr extends Ie{constructor(e){super(),Oe(this,e,Cr,yr,Fe,{name:2,enabled:0,preMovesEnabled:1,expanded:3})}}function Tr(s){let e,t,n,r,i,a,l,o,u,d,b,m,y,F,I,T,_,c,f,w,P,A,H,K,V,j,z,Q,ce,q,h,k,M,v,L,N,R,p,O,X,se,G,ae,te,re,oe,de,Me,ne,Pe,Te,Ke,Ve,Re,We,Et,ht,gt,$e,wt,kt,Ye,Mt,bt,St,Ge,At,Qe,et,yt,Tt;function qt(D){s[5](D)}function Dt(D){s[6](D)}function Bt(D){s[7](D)}function C(D){s[8](D)}function J(D){s[9](D)}function ge(D){s[10](D)}function Ne(D){s[11](D)}function qe(D){s[12](D)}let Le={expanded:!0};s[0].board.boardTheme!==void 0&&(Le.boardTheme=s[0].board.boardTheme),s[0].board.notation!==void 0&&(Le.notation=s[0].board.notation),s[0].board.flipped!==void 0&&(Le.flipped=s[0].board.flipped),s[0].board.style.shadow!==void 0&&(Le.shadow=s[0].board.style.shadow),s[0].board.style.borderRadius!==void 0&&(Le.borderRadius=s[0].board.style.borderRadius),s[0].board.resizible.enabled!==void 0&&(Le.resizible=s[0].board.resizible.enabled),s[0].board.resizible.min!==void 0&&(Le.min=s[0].board.resizible.min),s[0].board.resizible.max!==void 0&&(Le.max=s[0].board.resizible.max),a=new $a({props:Le}),le.push(()=>be(a,"boardTheme",qt)),le.push(()=>be(a,"notation",Dt)),le.push(()=>be(a,"flipped",Bt)),le.push(()=>be(a,"shadow",C)),le.push(()=>be(a,"borderRadius",J)),le.push(()=>be(a,"resizible",ge)),le.push(()=>be(a,"min",Ne)),le.push(()=>be(a,"max",qe));function tt(D){s[13](D)}function vi(D){s[14](D)}let Ut={expanded:!0};s[0].movable.enabled!==void 0&&(Ut.enabled=s[0].movable.enabled),s[0].movable.color!==void 0&&(Ut.color=s[0].movable.color),T=new ir({props:Ut}),le.push(()=>be(T,"enabled",tt)),le.push(()=>be(T,"color",vi));function Ei(D){s[15](D)}function wi(D){s[16](D)}function ki(D){s[17](D)}function Mi(D){s[18](D)}function Si(D){s[19](D)}let pt={};s[0].draggable.enabled!==void 0&&(pt.enabled=s[0].draggable.enabled),s[0].draggable.ghostPiece.enabled!==void 0&&(pt.ghostPiece=s[0].draggable.ghostPiece.enabled),s[0].draggable.transition.enabled!==void 0&&(pt.transition=s[0].draggable.transition.enabled),s[0].draggable.transition.settings.duration!==void 0&&(pt.duration=s[0].draggable.transition.settings.duration),s[0].draggable.transition.settings.easing!==void 0&&(pt.easing=s[0].draggable.transition.settings.easing),w=new lr({props:pt}),le.push(()=>be(w,"enabled",Ei)),le.push(()=>be(w,"ghostPiece",wi)),le.push(()=>be(w,"transition",ki)),le.push(()=>be(w,"duration",Mi)),le.push(()=>be(w,"easing",Si));function Ai(D){s[20](D)}let ts={name:"Selectable",showExpand:!1};s[0].selectable.enabled!==void 0&&(ts.enabled=s[0].selectable.enabled),z=new dt({props:ts}),le.push(()=>be(z,"enabled",Ai));function yi(D){s[21](D)}function Ci(D){s[22](D)}let Ht={expanded:!0};s[0].legal.enabled!==void 0&&(Ht.enabled=s[0].legal.enabled),s[0].legal.preMoves.enabled!==void 0&&(Ht.preMovesEnabled=s[0].legal.preMoves.enabled),q=new Pr({props:Ht}),le.push(()=>be(q,"enabled",yi)),le.push(()=>be(q,"preMovesEnabled",Ci));function Pi(D){s[23](D)}function Ti(D){s[24](D)}let Kt={};s[0].highlight.enabled!==void 0&&(Kt.enabled=s[0].highlight.enabled),s[0].highlight.settings!==void 0&&(Kt.settings=s[0].highlight.settings),v=new fr({props:Kt}),le.push(()=>be(v,"enabled",Pi)),le.push(()=>be(v,"settings",Ti));function Li(D){s[25](D)}function Ii(D){s[26](D)}function Oi(D){s[27](D)}let Lt={};s[0].drawTools.enabled!==void 0&&(Lt.enabled=s[0].drawTools.enabled),s[0].drawTools.settings.knightLShape!==void 0&&(Lt.knightLShape=s[0].drawTools.settings.knightLShape),s[0].drawTools.settings.onlyChessMove!==void 0&&(Lt.onlyChessMove=s[0].drawTools.settings.onlyChessMove),p=new br({props:Lt}),le.push(()=>be(p,"enabled",Li)),le.push(()=>be(p,"knightLShape",Ii)),le.push(()=>be(p,"onlyChessMove",Oi));function Fi(D){s[28](D)}function Ri(D){s[29](D)}let Vt={};s[0].sounds.enabled!==void 0&&(Vt.enabled=s[0].sounds.enabled),s[0].sounds.settings!==void 0&&(Vt.settings=s[0].sounds.settings),ae=new vr({props:Vt}),le.push(()=>be(ae,"enabled",Fi)),le.push(()=>be(ae,"settings",Ri));let Ni={config:s[4]};return ne=new Qa({props:Ni}),s[30](ne),Ge=new Sr({props:{copyText:s[3]}}),Qe=new $i({props:{source:s[3],language:"svelte"}}),{c(){e=B("link"),t=$(),n=B("div"),r=B("div"),i=B("div"),ve(a.$$.fragment),I=$(),ve(T.$$.fragment),f=$(),ve(w.$$.fragment),j=$(),ve(z.$$.fragment),ce=$(),ve(q.$$.fragment),M=$(),ve(v.$$.fragment),R=$(),ve(p.$$.fragment),G=$(),ve(ae.$$.fragment),oe=$(),de=B("div"),Me=B("div"),ve(ne.$$.fragment),Pe=$(),Te=B("div"),Ke=B("div"),Ve=B("div"),Re=B("button"),We=B("span"),Et=me("ts"),gt=$(),$e=B("span"),wt=me("/"),kt=$(),Ye=B("span"),Mt=me("js"),St=$(),ve(Ge.$$.fragment),At=$(),ve(Qe.$$.fragment),this.h()},l(D){const he=Gi('[data-svelte="svelte-tebjht"]',document.head);e=U(he,"LINK",{rel:!0,href:!0}),he.forEach(E),t=ee(D),n=U(D,"DIV",{class:!0});var ze=W(n);r=U(ze,"DIV",{class:!0});var st=W(r);i=U(st,"DIV",{class:!0});var ye=W(i);Ee(a.$$.fragment,ye),I=ee(ye),Ee(T.$$.fragment,ye),f=ee(ye),Ee(w.$$.fragment,ye),j=ee(ye),Ee(z.$$.fragment,ye),ce=ee(ye),Ee(q.$$.fragment,ye),M=ee(ye),Ee(v.$$.fragment,ye),R=ee(ye),Ee(p.$$.fragment,ye),G=ee(ye),Ee(ae.$$.fragment,ye),ye.forEach(E),oe=ee(st),de=U(st,"DIV",{class:!0});var ft=W(de);Me=U(ft,"DIV",{class:!0});var mt=W(Me);Ee(ne.$$.fragment,mt),mt.forEach(E),Pe=ee(ft),Te=U(ft,"DIV",{class:!0});var _t=W(Te);Ke=U(_t,"DIV",{class:!0});var Ze=W(Ke);Ve=U(Ze,"DIV",{class:!0});var it=W(Ve);Re=U(it,"BUTTON",{class:!0});var nt=W(Re);We=U(nt,"SPAN",{class:!0});var Ct=W(We);Et=_e(Ct,"ts"),Ct.forEach(E),gt=ee(nt),$e=U(nt,"SPAN",{class:!0});var Pt=W($e);wt=_e(Pt,"/"),Pt.forEach(E),kt=ee(nt),Ye=U(nt,"SPAN",{class:!0});var ss=W(Ye);Mt=_e(ss,"js"),ss.forEach(E),nt.forEach(E),St=ee(it),Ee(Ge.$$.fragment,it),it.forEach(E),At=ee(Ze),Ee(Qe.$$.fragment,Ze),Ze.forEach(E),_t.forEach(E),ft.forEach(E),st.forEach(E),ze.forEach(E),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",g(e,"rel","stylesheet"),g(e,"href","prism-one-dark.css"),g(i,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),g(Me,"class","w-full lg:w-[var(--boardSize,50rem)]"),g(We,"class",ht=s[1]?"text-yellow-600":""),g($e,"class","text-gray-600"),g(Ye,"class",bt=s[1]?"":"text-yellow-600"),g(Re,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),g(Ve,"class","absolute right-2 top-2 flex gap-4"),g(Ke,"class","shadow-lg rounded "),g(Te,"class","row-start-2 relative"),g(de,"class","grid grid-rows-[min-content_auto] gap-10"),g(r,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),g(n,"class","my-10 grid grid-cols-center")},m(D,he){S(document.head,e),Y(D,t,he),Y(D,n,he),S(n,r),S(r,i),we(a,i,null),S(i,I),we(T,i,null),S(i,f),we(w,i,null),S(i,j),we(z,i,null),S(i,ce),we(q,i,null),S(i,M),we(v,i,null),S(i,R),we(p,i,null),S(i,G),we(ae,i,null),S(r,oe),S(r,de),S(de,Me),we(ne,Me,null),S(de,Pe),S(de,Te),S(Te,Ke),S(Ke,Ve),S(Ve,Re),S(Re,We),S(We,Et),S(Re,gt),S(Re,$e),S($e,wt),S(Re,kt),S(Re,Ye),S(Ye,Mt),S(Ve,St),we(Ge,Ve,null),S(Ke,At),we(Qe,Ke,null),et=!0,yt||(Tt=fe(Re,"click",s[31]),yt=!0)},p(D,he){const ze={};!l&&he[0]&1&&(l=!0,ze.boardTheme=D[0].board.boardTheme,pe(()=>l=!1)),!o&&he[0]&1&&(o=!0,ze.notation=D[0].board.notation,pe(()=>o=!1)),!u&&he[0]&1&&(u=!0,ze.flipped=D[0].board.flipped,pe(()=>u=!1)),!d&&he[0]&1&&(d=!0,ze.shadow=D[0].board.style.shadow,pe(()=>d=!1)),!b&&he[0]&1&&(b=!0,ze.borderRadius=D[0].board.style.borderRadius,pe(()=>b=!1)),!m&&he[0]&1&&(m=!0,ze.resizible=D[0].board.resizible.enabled,pe(()=>m=!1)),!y&&he[0]&1&&(y=!0,ze.min=D[0].board.resizible.min,pe(()=>y=!1)),!F&&he[0]&1&&(F=!0,ze.max=D[0].board.resizible.max,pe(()=>F=!1)),a.$set(ze);const st={};!_&&he[0]&1&&(_=!0,st.enabled=D[0].movable.enabled,pe(()=>_=!1)),!c&&he[0]&1&&(c=!0,st.color=D[0].movable.color,pe(()=>c=!1)),T.$set(st);const ye={};!P&&he[0]&1&&(P=!0,ye.enabled=D[0].draggable.enabled,pe(()=>P=!1)),!A&&he[0]&1&&(A=!0,ye.ghostPiece=D[0].draggable.ghostPiece.enabled,pe(()=>A=!1)),!H&&he[0]&1&&(H=!0,ye.transition=D[0].draggable.transition.enabled,pe(()=>H=!1)),!K&&he[0]&1&&(K=!0,ye.duration=D[0].draggable.transition.settings.duration,pe(()=>K=!1)),!V&&he[0]&1&&(V=!0,ye.easing=D[0].draggable.transition.settings.easing,pe(()=>V=!1)),w.$set(ye);const ft={};!Q&&he[0]&1&&(Q=!0,ft.enabled=D[0].selectable.enabled,pe(()=>Q=!1)),z.$set(ft);const mt={};!h&&he[0]&1&&(h=!0,mt.enabled=D[0].legal.enabled,pe(()=>h=!1)),!k&&he[0]&1&&(k=!0,mt.preMovesEnabled=D[0].legal.preMoves.enabled,pe(()=>k=!1)),q.$set(mt);const _t={};!L&&he[0]&1&&(L=!0,_t.enabled=D[0].highlight.enabled,pe(()=>L=!1)),!N&&he[0]&1&&(N=!0,_t.settings=D[0].highlight.settings,pe(()=>N=!1)),v.$set(_t);const Ze={};!O&&he[0]&1&&(O=!0,Ze.enabled=D[0].drawTools.enabled,pe(()=>O=!1)),!X&&he[0]&1&&(X=!0,Ze.knightLShape=D[0].drawTools.settings.knightLShape,pe(()=>X=!1)),!se&&he[0]&1&&(se=!0,Ze.onlyChessMove=D[0].drawTools.settings.onlyChessMove,pe(()=>se=!1)),p.$set(Ze);const it={};!te&&he[0]&1&&(te=!0,it.enabled=D[0].sounds.enabled,pe(()=>te=!1)),!re&&he[0]&1&&(re=!0,it.settings=D[0].sounds.settings,pe(()=>re=!1)),ae.$set(it);const nt={};ne.$set(nt),(!et||he[0]&2&&ht!==(ht=D[1]?"text-yellow-600":""))&&g(We,"class",ht),(!et||he[0]&2&&bt!==(bt=D[1]?"":"text-yellow-600"))&&g(Ye,"class",bt);const Ct={};he[0]&8&&(Ct.copyText=D[3]),Ge.$set(Ct);const Pt={};he[0]&8&&(Pt.source=D[3]),Qe.$set(Pt)},i(D){et||(x(a.$$.fragment,D),x(T.$$.fragment,D),x(w.$$.fragment,D),x(z.$$.fragment,D),x(q.$$.fragment,D),x(v.$$.fragment,D),x(p.$$.fragment,D),x(ae.$$.fragment,D),x(ne.$$.fragment,D),x(Ge.$$.fragment,D),x(Qe.$$.fragment,D),et=!0)},o(D){ie(a.$$.fragment,D),ie(T.$$.fragment,D),ie(w.$$.fragment,D),ie(z.$$.fragment,D),ie(q.$$.fragment,D),ie(v.$$.fragment,D),ie(p.$$.fragment,D),ie(ae.$$.fragment,D),ie(ne.$$.fragment,D),ie(Ge.$$.fragment,D),ie(Qe.$$.fragment,D),et=!1},d(D){E(e),D&&E(t),D&&E(n),ke(a),ke(T),ke(w),ke(z),ke(q),ke(v),ke(p),ke(ae),s[30](null),ke(ne),ke(Ge),ke(Qe),yt=!1,Tt()}}}function Lr(s,e,t){const n=new hi.Chess,r={movable:ue.BOTH,legal:!0,callbacks:{afterMove:p=>n.move({from:p.substring(0,2),to:p.substring(2,4),...p.length>4&&{promotion:p[4]}}),getLegalMoves:()=>n.moves({verbose:!0}).map(p=>{var O;return p.from+p.to+((O=p.promotion)!=null?O:"")}),getWhiteToMove:()=>n.turn()==="w",getInCheck:()=>{if(!!n.inCheck())return n.turn()==="w"?ue.BLACK:ue.WHITE},getLastMove:()=>{var O;const p=n.history({verbose:!0}).pop();return p?p.from+p.to+((O=p.promotion)!=null?O:""):""}},board:{style:{shadow:!0,borderRadius:"0.25rem"},resizible:!0}};let i,a=new gi(r),l=!1,o=!0,u="";xt(()=>{l=!0,t(0,a=i.getState())});const d=(p,O)=>{const X=p.getConfig(),se=`
	import type { ChessboardConfig } from '@powchess/chessboard/boardConfig';`;l&&i.setState(p);let G=[],ae=JSON.stringify(X,(de,Me)=>typeof Me=="function"?(G.push(Me.toString()),`{function_${G.length-1}}`):Me,4).replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace(/"\{function_(\d+)\}"/g,(de,Me)=>G[Me]);const te=`
	import { Color } from '@powchess/chessboard/enums';`;O&&(ae=ae.replaceAll(`movable: ${ue.WHITE}`,"movable: Color.WHITE").replaceAll(`movable: ${ue.BLACK}`,"movable: Color.BLACK").replaceAll(`movable: ${ue.BOTH}`,"movable: Color.BOTH"));function re(){return ae.includes("movable: Color.WHITE")||ae.includes("movable: Color.BLACK")||ae.includes("movable: Color.BOTH")}let oe=`<script${O?' lang="ts"':""}>
	import Chessboard from '@powchess/chessboard';${O?se:""}${re()&&O?te:""}${a.legal.enabled&&O?`
	import { Chess, type Move } from 'chess.js';`:""}

	const config${O?": ChessboardConfig":""} = ${ae};
<\/script>

<Chessboard {config} />`;return O||(oe=oe.replaceAll("Color.WHITE",`${ue.WHITE}`).replaceAll("Color.BLACK",`${ue.BLACK}`).replaceAll("Color.BOTH",`${ue.BOTH}`)),oe=oe.replaceAll("__vite_ssr_import_14__.",""),oe};function b(p){s.$$.not_equal(a.board.boardTheme,p)&&(a.board.boardTheme=p,t(0,a))}function m(p){s.$$.not_equal(a.board.notation,p)&&(a.board.notation=p,t(0,a))}function y(p){s.$$.not_equal(a.board.flipped,p)&&(a.board.flipped=p,t(0,a))}function F(p){s.$$.not_equal(a.board.style.shadow,p)&&(a.board.style.shadow=p,t(0,a))}function I(p){s.$$.not_equal(a.board.style.borderRadius,p)&&(a.board.style.borderRadius=p,t(0,a))}function T(p){s.$$.not_equal(a.board.resizible.enabled,p)&&(a.board.resizible.enabled=p,t(0,a))}function _(p){s.$$.not_equal(a.board.resizible.min,p)&&(a.board.resizible.min=p,t(0,a))}function c(p){s.$$.not_equal(a.board.resizible.max,p)&&(a.board.resizible.max=p,t(0,a))}function f(p){s.$$.not_equal(a.movable.enabled,p)&&(a.movable.enabled=p,t(0,a))}function w(p){s.$$.not_equal(a.movable.color,p)&&(a.movable.color=p,t(0,a))}function P(p){s.$$.not_equal(a.draggable.enabled,p)&&(a.draggable.enabled=p,t(0,a))}function A(p){s.$$.not_equal(a.draggable.ghostPiece.enabled,p)&&(a.draggable.ghostPiece.enabled=p,t(0,a))}function H(p){s.$$.not_equal(a.draggable.transition.enabled,p)&&(a.draggable.transition.enabled=p,t(0,a))}function K(p){s.$$.not_equal(a.draggable.transition.settings.duration,p)&&(a.draggable.transition.settings.duration=p,t(0,a))}function V(p){s.$$.not_equal(a.draggable.transition.settings.easing,p)&&(a.draggable.transition.settings.easing=p,t(0,a))}function j(p){s.$$.not_equal(a.selectable.enabled,p)&&(a.selectable.enabled=p,t(0,a))}function z(p){s.$$.not_equal(a.legal.enabled,p)&&(a.legal.enabled=p,t(0,a))}function Q(p){s.$$.not_equal(a.legal.preMoves.enabled,p)&&(a.legal.preMoves.enabled=p,t(0,a))}function ce(p){s.$$.not_equal(a.highlight.enabled,p)&&(a.highlight.enabled=p,t(0,a))}function q(p){s.$$.not_equal(a.highlight.settings,p)&&(a.highlight.settings=p,t(0,a))}function h(p){s.$$.not_equal(a.drawTools.enabled,p)&&(a.drawTools.enabled=p,t(0,a))}function k(p){s.$$.not_equal(a.drawTools.settings.knightLShape,p)&&(a.drawTools.settings.knightLShape=p,t(0,a))}function M(p){s.$$.not_equal(a.drawTools.settings.onlyChessMove,p)&&(a.drawTools.settings.onlyChessMove=p,t(0,a))}function v(p){s.$$.not_equal(a.sounds.enabled,p)&&(a.sounds.enabled=p,t(0,a))}function L(p){s.$$.not_equal(a.sounds.settings,p)&&(a.sounds.settings=p,t(0,a))}function N(p){le[p?"unshift":"push"](()=>{i=p,t(2,i)})}const R=()=>{t(1,o=!o)};return s.$$.update=()=>{s.$$.dirty[0]&3&&t(3,u=d(a,o))},[a,o,i,u,r,b,m,y,F,I,T,_,c,f,w,P,A,H,K,V,j,z,Q,ce,q,h,k,M,v,L,N,R]}class Fr extends Ie{constructor(e){super(),Oe(this,e,Lr,Tr,Fe,{},null,[-1,-1])}}export{Fr as default};
