import{S as Pe,i as Le,s as Se,k as R,a as X,l as I,m as N,h as y,c as Y,n as _,b as V,A as re,H as We,q as Fe,r as Oe,p as J,F as T,u as lt,I as ft,J as ss,K as Ze,L as vs,M as Es,N as ht,O as De,P as ot,Q as ae,R as ut,T as $e,U as ct,G as ws,V as ze,W as qe,X as Re,o as rs,Y as me,e as le,f as U,g as we,t as x,d as _e,Z as dt,_ as _s,$ as Ms,a0 as et,v as Me,w as ke,x as ye,a1 as tt,y as Ae,a2 as ks,a3 as ys,a4 as gt,a5 as As,a6 as as,z as Ps,a7 as is,B as Ls,C as Ss,D as Cs,E as Ts,a8 as pt,a9 as Fs,aa as Os,ab as qs,ac as bt,ad as Rs}from"../../chunks/index-6e002427.js";import{w as Is}from"../../chunks/index-be90f349.js";const mt=["standard","darkBlue"];var j=(s=>(s[s.WHITE=0]="WHITE",s[s.BLACK=1]="BLACK",s[s.BOTH=2]="BOTH",s[s.SPECTATOR=3]="SPECTATOR",s[s.SERVER=4]="SERVER",s))(j||{}),A=(s=>(s[s.LEGAL=0]="LEGAL",s[s.LEGALHOVER=1]="LEGALHOVER",s[s.CHECK=2]="CHECK",s[s.MOVE=3]="MOVE",s[s.NEXTMOVE=4]="NEXTMOVE",s[s.PREMOVE=5]="PREMOVE",s[s.PREMOVEHOVER=6]="PREMOVEHOVER",s[s.SELECT=7]="SELECT",s))(A||{});const zs="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class ns{constructor(e){const r={allowPremoves:!0,moveSounds:!0,showCheckSqaure:!0,showLastMove:!0,showLegalMoves:!0,showNotation:!0};this.pieces=[],this.markedSquares=new Set,this.board={boardTheme:"standard",piecesTheme:"standard",flipped:!1,notation:r.showNotation,shadow:!1,startFen:zs,size:0},this.movable={enabled:!0,color:j.BOTH},this.draggable={enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}},this.selectable={enabled:!0,selectedPiece:void 0},this.legal={enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:r.allowPremoves,moves:[],curMove:""},lastMove:""},this.callbacks={},this.highlight={enabled:!0,settings:{select:!0,legal:r.showLegalMoves,move:r.showLastMove,preMove:r.allowPremoves,nextMove:r.allowPremoves,check:r.showCheckSqaure}},this.drawTools={enabled:!0,engineArrows:[],settings:{LshapeKnightMove:!0,onlyChessMove:!1}},this.sounds={enabled:r.moveSounds,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}},this.resizible={enabled:!1,settings:{min:100,max:1e3}},e!==void 0&&this.setConfigSettings(e)}setConfigSettings(e){var r,a,t,n,o,i,l,u,f,g,b,w,z,C,S,O,c;switch(((r=e.board)==null?void 0:r.boardTheme)!==void 0&&(this.board.boardTheme=e.board.boardTheme),((a=e.board)==null?void 0:a.piecesTheme)!==void 0&&(this.board.piecesTheme=e.board.piecesTheme),((t=e.board)==null?void 0:t.notation)!==void 0&&(this.board.notation=e.board.notation),((n=e.board)==null?void 0:n.shadow)!==void 0&&(this.board.shadow=e.board.shadow),((o=e.board)==null?void 0:o.flipped)!==void 0&&(this.board.flipped=e.board.flipped),((i=e.board)==null?void 0:i.startFen)!==void 0&&(this.board.startFen=e.board.startFen),e.movable){case!0:this.movable.enabled=!0,this.movable.color=j.BOTH;break;case!1:this.movable.enabled=!1;break;case j.WHITE:this.movable.enabled=!0,this.movable.color=j.WHITE;break;case j.BLACK:this.movable.enabled=!0,this.movable.color=j.BLACK;break}e.draggable!==void 0&&(e.draggable===!0?this.draggable.enabled=!0:e.draggable===!1?this.draggable.enabled=!1:(this.draggable.enabled=!0,((l=e.draggable)==null?void 0:l.ghostPiece)!==void 0&&(this.draggable.ghostPiece.enabled=e.draggable.ghostPiece),e.draggable.transition!==void 0&&(((u=e.draggable)==null?void 0:u.transition)===!0?this.draggable.transition.enabled=!0:((f=e.draggable)==null?void 0:f.transition)===!1?this.draggable.transition.enabled=!1:(this.draggable.transition.enabled=!0,(b=(g=e.draggable)==null?void 0:g.transition)!=null&&b.duration&&(this.draggable.transition.settings.duration=(z=(w=e.draggable)==null?void 0:w.transition)==null?void 0:z.duration),(S=(C=e.draggable)==null?void 0:C.transition)!=null&&S.easing&&(this.draggable.transition.settings.easing=(c=(O=e.draggable)==null?void 0:O.transition)==null?void 0:c.easing))))),e.selectable!==void 0&&(this.selectable.enabled=e.selectable),e.legal!==void 0&&(e.legal===!0?this.legal.enabled=!0:e.legal===!1?this.legal.enabled=!1:(this.legal.enabled=!0,e.legal.settings&&(e.legal.settings.allowCastling!==void 0&&(this.legal.settings.allowCastling=e.legal.settings.allowCastling),e.legal.settings.allowEnPassant!==void 0&&(this.legal.settings.allowEnPassant=e.legal.settings.allowEnPassant),e.legal.settings.allowPromotion!==void 0&&(this.legal.settings.allowPromotion=e.legal.settings.allowPromotion)),e.legal.preMoves!==void 0&&(this.legal.preMoves.enabled=e.legal.preMoves))),e.callbacks!==void 0&&(e.callbacks.getLegalMoves&&(this.callbacks.getLegalMoves=e.callbacks.getLegalMoves),e.callbacks.getPreMoves&&(this.callbacks.getPreMoves=e.callbacks.getPreMoves),e.callbacks.beforeMove&&(this.callbacks.beforeMove=e.callbacks.beforeMove),e.callbacks.afterMove&&(this.callbacks.afterMove=e.callbacks.afterMove),e.callbacks.getLastMove&&(this.callbacks.getLastMove=e.callbacks.getLastMove),e.callbacks.getLastMoveSAN&&(this.callbacks.getLastMoveSAN=e.callbacks.getLastMoveSAN),e.callbacks.getKingLocations&&(this.callbacks.getKingLocations=e.callbacks.getKingLocations),e.callbacks.getInCheck&&(this.callbacks.getInCheck=e.callbacks.getInCheck),e.callbacks.getWhiteToMove&&(this.callbacks.getWhiteToMove=e.callbacks.getWhiteToMove)),e.highlight!==void 0&&(e.highlight===!0?this.highlight.enabled=!0:e.highlight===!1?this.highlight.enabled=!1:(this.highlight.enabled=!0,e.highlight.check!==void 0&&(this.highlight.settings.check=e.highlight.check),e.highlight.legal!==void 0&&(this.highlight.settings.legal=e.highlight.legal),e.highlight.move!==void 0&&(this.highlight.settings.move=e.highlight.move),e.highlight.nextMove!==void 0&&(this.highlight.settings.nextMove=e.highlight.nextMove),e.highlight.preMove!==void 0&&(this.highlight.settings.preMove=e.highlight.preMove),e.highlight.select!==void 0&&(this.highlight.settings.select=e.highlight.select))),e.drawTools!==void 0&&(e.drawTools===!0?this.drawTools.enabled=!0:e.drawTools===!1?this.drawTools.enabled=!1:(this.drawTools.enabled=!0,e.drawTools.LshapeKnightMove!==void 0&&(this.drawTools.settings.LshapeKnightMove=e.drawTools.LshapeKnightMove),e.drawTools.onlyChessMove!==void 0&&(this.drawTools.settings.onlyChessMove=e.drawTools.onlyChessMove))),e.sounds!==void 0&&(e.sounds===!0?this.sounds.enabled=!0:e.sounds===!1?this.sounds.enabled=!1:(this.sounds.enabled=!0,e.sounds.CAPTURE!==void 0&&(this.sounds.settings.CAPTURE=e.sounds.CAPTURE),e.sounds.CASTLE!==void 0&&(this.sounds.settings.CASTLE=e.sounds.CASTLE),e.sounds.MOVE!==void 0&&(this.sounds.settings.MOVE=e.sounds.MOVE),e.sounds.UNDO!==void 0&&(this.sounds.settings.UNDO=e.sounds.UNDO))),e.resizible!==void 0&&(e.resizible===!0?this.resizible.enabled=!0:e.resizible===!1?this.resizible.enabled=!1:(this.resizible.enabled=!0,e.resizible.min!==void 0&&(this.resizible.settings.min=e.resizible.min),e.resizible.max!==void 0&&(this.resizible.settings.max=e.resizible.max)))}}const Ds=["a","b","c","d","e","f","g","h"],Ns=["8","7","6","5","4","3","2","1"];function st(s){return{x:Ds.indexOf(s[0]),y:Ns.indexOf(s[1])}}function vt(s){let e=97;return s.charCodeAt(0)-e}const Us=s=>{let e="",r=0;for(let a=0;a<s.length;a++){a!=0&&(e+="/");for(let t=0;t<s[a].length;t++){const n=s[a][t];n!=null&&r==0?n[0]=="w"?e+=n[1]:e+=n[1].toLowerCase():n!=null&&r!=0?(e+=r.toString(),r=0,n[0]=="w"?e+=n[1]:e+=n[1].toLowerCase()):r++}r!=0&&(e+=r.toString(),r=0)}return e},Bs="8/8/8/8/8/8/8/8 w - - 0 1";class Vs{constructor(e){this.letters={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},this.changeLegalHoverIfNeeded=r=>{r.color!==A.LEGAL&&r.color!==A.PREMOVE||this.state.pieces.forEach(a=>{a.square===r.square&&(r.color=r.color===A.LEGAL?A.LEGALHOVER:A.PREMOVEHOVER)})},this.highlightSquare=(r,a)=>{const t={square:r,color:a};this.state.markedSquares.forEach(n=>{n.square===r&&n.color!==A.MOVE&&n.color!==A.CHECK&&this.state.markedSquares.delete(n)}),this.changeLegalHoverIfNeeded(t),this.state.markedSquares.add(t)},this.legalHover=r=>{this.state.markedSquares.forEach(a=>{if(a.square===r&&a.color===A.LEGAL)a.color=A.LEGALHOVER;else if(a.square!==r&&a.color===A.LEGALHOVER){let t=!1;this.state.pieces.forEach(n=>{if(n.square===a.square){t=!0;return}}),t||(a.color=A.LEGAL)}})},this.preMoveHover=r=>{this.state.markedSquares.forEach(a=>{if(a.square===r&&a.color===A.PREMOVE)a.color=A.PREMOVEHOVER;else if(a.square!==r&&a.color===A.PREMOVEHOVER){let t=!1;this.state.pieces.forEach(n=>{if(n.square===a.square){t=!0;return}}),t||(a.color=A.PREMOVE)}})},this.toggleSquareHighlight=(r,a)=>{const t={square:r,color:a};let n=!1;return this.state.markedSquares.forEach(o=>{o.square===r&&(this.state.markedSquares.delete(o),o.color===a&&(n=!0))}),this.changeLegalHoverIfNeeded(t),n?!0:(this.state.markedSquares.add(t),!1)},this.getSelectedSquare=()=>{let r="";return this.state.markedSquares.forEach(a=>{a.color===A.SELECT&&(r=a.square)}),r},this.clearSquare=(r,a)=>{if(r.length!==2){console.log(`${r} is not a valid square`);return}this.state.markedSquares.forEach(t=>{t.square===r&&(t.color===a||a===void 0)&&this.state.markedSquares.delete(t)})},this.clearAllSquares=r=>{r===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(a=>{a.color===r&&this.state.markedSquares.delete(a)})},this.setPiece=(r,a)=>{if(this.notValidThing({square:r,piece:a}))return;const t=this.state.pieces.find(n=>n.square===r);t?t.name=a:this.state.pieces.push({square:r,name:a})},this.removePiece=r=>{this.notValidThing({square:r})||this.state.pieces.forEach((a,t)=>{if(a.square===r){this.state.pieces.splice(t,1);return}})},this.clearAllPieces=()=>{this.state.pieces.length=0},this.getGridCoordsFromSquare=r=>{if(this.notValidThing({square:r}))return{x:0,y:0};const a=r[0],t=r[1],n=this.state.board.flipped?Math.abs(this.letters[a]-7):this.letters[a],o=this.state.board.flipped?Math.abs(parseInt(t)-8):parseInt(t)-1;return typeof n!="number"||o<0||o>7?{x:0,y:0}:{x:n,y:o}},this.makeMove=r=>{if(this.notValidThing({move:r}))return;let a=!1,t;const n=r.substring(0,2),o=r.substring(2,4),i=r.substring(4);this.state.pieces.forEach(l=>{if(l.square===o){t=l,this.removePiece(l.square);return}}),this.state.pieces.forEach(l=>{if(l.square===n){l.square=o,a=!0,i&&(l.name=l.name[0]+i.toUpperCase());return}}),a?this.state.legal.lastMove=r:(console.error(`${r} is not possible`),t&&this.state.pieces.push(t))},this.getSquareFromIndices=(r,a)=>Object.keys(this.letters)[r]+(a+1).toString(),this.updatePiecesWithFen=r=>{const a=[...Array(8)].map(f=>Array(8).fill(null)),t=["1","2","3","4","5","6","7","8"];let n=0,o=0;for(let f=0;f<(r.includes(" ")?r.indexOf(" "):r.length);f++)if(r[f]=="/")n++,o=0;else if(!t.includes(r[f]))r[f]==r[f].toUpperCase()?a[n][o]="w"+r[f]:a[n][o]="b"+r[f].toUpperCase(),o++;else for(var i=0;i<parseInt(r[f]);i++)a[n][o]=null,o++;const l=[],u=[];for(let f=0;f<a.length;++f)for(let g=0;g<a.length;++g){const b=a[f][g],w=this.getPieceFromSquare(this.getSquareFromIndices(g,Math.abs(f-7)));b&&!w&&l.push({square:this.getSquareFromIndices(g,Math.abs(f-7)),name:b}),!b&&w&&u.push(w),b&&w&&b!==w.name&&(l.push({square:this.getSquareFromIndices(g,Math.abs(f-7)),name:b}),u.push(w))}for(let f=0;f<u.length;f++)for(let g=0;g<l.length;g++)!l[g]||!u[f]||l[g].name===u[f].name&&(u[f].square=l[g].square,u.splice(f,1),f--,l.splice(g,1),g--);l.forEach(f=>{this.state.pieces.push(f)}),u.forEach(f=>{this.state.pieces.splice(this.state.pieces.indexOf(f),1)})},this.notValidThing=r=>{const{square:a,piece:t,move:n}=r;return!!(a&&a.length!==2||t&&t.length!==2||n&&n.length!==4&&n.length!==5)},this.setGhostPiece=r=>{this.state.draggable.ghostPiece.piece=r},this.removeGhostPiece=()=>{this.state.draggable.ghostPiece.piece=void 0},this.isCastling=r=>{switch(r){case"e1g1":case"e1c1":case"e8g8":case"e8c8":return!0;default:return!1}},this.getRookMoveIfIsCastling=r=>{switch(r){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return}},this.isEnPassant=r=>{if(r[0]===r[2]||this.getPieceFromSquare(r.substring(2,4)))return!1;let a=this.getPieceFromSquare(r.substring(0,2));return!(a==null||a.name!=="wP"&&a.name!=="bP")},this.getCapturedPawnSquareIfIsEnPassant=r=>{if(r[0]===r[2]||this.getPieceFromSquare(r.substring(2,4)))return;let a=this.getPieceFromSquare(r.substring(0,2));if(a==null||a.name!=="wP"&&a.name!=="bP")return;let t=this.getPieceFromSquare(r[2]+`${parseInt(r[3])+(a.name==="wP"?-1:1)}`);return t==null?void 0:t.square},this.isCapture=r=>!!this.getPieceFromSquare(r.substring(2,4)),this.isPromotion=r=>{if((r[1]!="7"||r[3]!="8")&&(r[1]!="2"||r[3]!="1"))return!1;let a=this.getPieceFromSquare(r.substring(0,2));return!(a&&(a.name[1]!=="P"||a.name[0]==="w"&&r[3]==="1"||a.name[0]==="b"&&r[3]==="8"))},this.callbackExists=r=>this.state.callbacks[r]!==void 0,this.flipBoard=r=>{r!==void 0?this.state.board.flipped=r:this.state.board.flipped=!this.state.board.flipped},this.setConfigSettings=r=>{this.state.setConfigSettings(r)},this.state=new ns(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getShortFEN(){if(this.state.pieces.length===0)return Bs;const e=[...Array(8)].map(r=>Array(8).fill(null));return this.state.pieces.forEach(r=>{e[rankToIndex(r.square[1])][fileToIndex(r.square[0])]=r.name}),Us(e)}getPieceFromSquare(e){let r;return this.state.pieces.forEach(a=>{a.square===e&&(r=a)}),r}}const Hs={[A.LEGAL]:"legalSQ cursor-pointer",[A.LEGALHOVER]:"legalSQ_hover cursor-pointer",[A.SELECT]:"selectedSQ",[A.MOVE]:"highlightMove",[A.NEXTMOVE]:"nextMoveSQ",[A.PREMOVE]:"preMoveSQ cursor-pointer",[A.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[A.CHECK]:"checkSQ"},xs={white:"#f0d9b5",black:"#b58863"},Ws="standard.svg",Ks={[A.LEGAL]:"legalSQ cursor-pointer",[A.LEGALHOVER]:"legalSQ_hover cursor-pointer",[A.SELECT]:"selectedSQ-darkBlue",[A.MOVE]:"highlightMove-darkBlue",[A.NEXTMOVE]:"nextMoveSQ",[A.PREMOVE]:"preMoveSQ cursor-pointer",[A.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[A.CHECK]:"checkSQ"},Gs={white:"#94A3B8",black:"#475569"},js="darkBlue.svg",ve={squareStyles:{standard:Hs,darkBlue:Ks},colors:{standard:xs,darkBlue:Gs},imageName:{standard:Ws,darkBlue:js}};function Et(s,e,r){const a=s.slice();return a[3]=e[r],a[5]=r,a}function wt(s,e,r){const a=s.slice();return a[3]=e[r],a[5]=r,a}function _t(s){let e,r=s[2][s[1]?Math.abs(s[5]-7):s[5]]+"",a,t;return{c(){e=R("span"),a=Fe(r),t=X(),this.h()},l(n){e=I(n,"SPAN",{style:!0,class:!0});var o=N(e);a=Oe(o,r),t=Y(o),o.forEach(y),this.h()},h(){J(e,"color",s[5]%2===0?ve.colors[s[0]].white:ve.colors[s[0]].black),_(e,"class","svelte-t3eav4")},m(n,o){V(n,e,o),T(e,a),T(e,t)},p(n,o){o&2&&r!==(r=n[2][n[1]?Math.abs(n[5]-7):n[5]]+"")&&lt(a,r),o&1&&J(e,"color",n[5]%2===0?ve.colors[n[0]].white:ve.colors[n[0]].black)},d(n){n&&y(e)}}}function Mt(s){let e,r=(s[1]?s[5]+1:Math.abs(s[5]-8))+"",a,t,n;return{c(){e=R("span"),a=Fe(r),t=X(),this.h()},l(o){e=I(o,"SPAN",{style:!0,class:!0});var i=N(e);a=Oe(i,r),t=Y(i),i.forEach(y),this.h()},h(){J(e,"color",s[5]%2===0?ve.colors[s[0]].white:ve.colors[s[0]].black),_(e,"class",n=ft(s[1]?"":"text-right")+" svelte-t3eav4")},m(o,i){V(o,e,i),T(e,a),T(e,t)},p(o,i){i&2&&r!==(r=(o[1]?o[5]+1:Math.abs(o[5]-8))+"")&&lt(a,r),i&1&&J(e,"color",o[5]%2===0?ve.colors[o[0]].white:ve.colors[o[0]].black),i&2&&n!==(n=ft(o[1]?"":"text-right")+" svelte-t3eav4")&&_(e,"class",n)},d(o){o&&y(e)}}}function Xs(s){let e,r,a,t=s[2],n=[];for(let l=0;l<t.length;l+=1)n[l]=_t(wt(s,t,l));let o=s[2],i=[];for(let l=0;l<o.length;l+=1)i[l]=Mt(Et(s,o,l));return{c(){e=R("div");for(let l=0;l<n.length;l+=1)n[l].c();r=X(),a=R("div");for(let l=0;l<i.length;l+=1)i[l].c();this.h()},l(l){e=I(l,"DIV",{class:!0});var u=N(e);for(let g=0;g<n.length;g+=1)n[g].l(u);u.forEach(y),r=Y(l),a=I(l,"DIV",{class:!0});var f=N(a);for(let g=0;g<i.length;g+=1)i[g].l(f);f.forEach(y),this.h()},h(){_(e,"class","files noselect svelte-t3eav4"),_(a,"class","ranks noselect svelte-t3eav4")},m(l,u){V(l,e,u);for(let f=0;f<n.length;f+=1)n[f].m(e,null);V(l,r,u),V(l,a,u);for(let f=0;f<i.length;f+=1)i[f].m(a,null)},p(l,[u]){if(u&7){t=l[2];let f;for(f=0;f<t.length;f+=1){const g=wt(l,t,f);n[f]?n[f].p(g,u):(n[f]=_t(g),n[f].c(),n[f].m(e,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=t.length}if(u&3){o=l[2];let f;for(f=0;f<o.length;f+=1){const g=Et(l,o,f);i[f]?i[f].p(g,u):(i[f]=Mt(g),i[f].c(),i[f].m(a,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=o.length}},i:re,o:re,d(l){l&&y(e),We(n,l),l&&y(r),l&&y(a),We(i,l)}}}function Ys(s,e,r){let{theme:a}=e,{flipped:t}=e;const n=["a","b","c","d","e","f","g","h"];return s.$$set=o=>{"theme"in o&&r(0,a=o.theme),"flipped"in o&&r(1,t=o.flipped)},[a,t,n]}class Qs extends Pe{constructor(e){super(),Le(this,e,Ys,Xs,Se,{theme:0,flipped:1})}}function Zs(s){const e=2.5949095;return(s*=2)<1?.5*(s*s*((e+1)*s-e)):.5*((s-=2)*s*((e+1)*s+e)+2)}function Js(s){return s*s*((1.70158+1)*s-1.70158)}function $s(s){return--s*s*((1.70158+1)*s+1.70158)+1}function Je(s){const e=.36363636363636365,r=8/11,a=9/10,t=4356/361,n=35442/1805,o=16061/1805,i=s*s;return s<e?7.5625*i:s<r?9.075*i-9.9*s+3.4:s<a?t*i-n*s+o:10.8*s*s-20.52*s+10.72}function er(s){return s<.5?.5*(1-Je(1-s*2)):.5*Je(s*2-1)+.5}function tr(s){return 1-Je(1-s)}function sr(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)}function rr(s){return 1-Math.sqrt(1-s*s)}function ar(s){return Math.sqrt(1- --s*s)}function ir(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function nr(s){return s*s*s}function ls(s){const e=s-1;return e*e*e+1}function lr(s){return s<.5?.5*Math.sin(13*Math.PI/2*2*s)*Math.pow(2,10*(2*s-1)):.5*Math.sin(-13*Math.PI/2*(2*s-1+1))*Math.pow(2,-10*(2*s-1))+1}function or(s){return Math.sin(13*s*Math.PI/2)*Math.pow(2,10*(s-1))}function ur(s){return Math.sin(-13*(s+1)*Math.PI/2)*Math.pow(2,-10*s)+1}function cr(s){return s===0||s===1?s:s<.5?.5*Math.pow(2,20*s-10):-.5*Math.pow(2,10-s*20)+1}function dr(s){return s===0?s:Math.pow(2,10*(s-1))}function fr(s){return s===1?s:1-Math.pow(2,-10*s)}function hr(s){return s/=.5,s<1?.5*s*s:(s--,-.5*(s*(s-2)-1))}function gr(s){return s*s}function pr(s){return-s*(s-2)}function br(s){return s<.5?8*Math.pow(s,4):-8*Math.pow(s-1,4)+1}function mr(s){return Math.pow(s,4)}function vr(s){return Math.pow(s-1,3)*(1-s)+1}function Er(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)}function wr(s){return s*s*s*s*s}function _r(s){return--s*s*s*s*s+1}function Mr(s){return-.5*(Math.cos(Math.PI*s)-1)}function kr(s){const e=Math.cos(s*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function yr(s){return Math.sin(s*Math.PI/2)}const Ar=Object.freeze(Object.defineProperty({__proto__:null,backIn:Js,backInOut:Zs,backOut:$s,bounceIn:tr,bounceInOut:er,bounceOut:Je,circIn:rr,circInOut:sr,circOut:ar,cubicIn:nr,cubicInOut:ir,cubicOut:ls,elasticIn:or,elasticInOut:lr,elasticOut:ur,expoIn:dr,expoInOut:cr,expoOut:fr,quadIn:gr,quadInOut:hr,quadOut:pr,quartIn:mr,quartInOut:br,quartOut:vr,quintIn:wr,quintInOut:Er,quintOut:_r,sineIn:kr,sineInOut:Mr,sineOut:yr,linear:ss},Symbol.toStringTag,{value:"Module"}));function kt(s){return Object.prototype.toString.call(s)==="[object Date]"}function rt(s,e){if(s===e||s!==s)return()=>s;const r=typeof s;if(r!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const a=e.map((t,n)=>rt(s[n],t));return t=>a.map(n=>n(t))}if(r==="object"){if(!s||!e)throw new Error("Object cannot be null");if(kt(s)&&kt(e)){s=s.getTime(),e=e.getTime();const n=e-s;return o=>new Date(s+o*n)}const a=Object.keys(e),t={};return a.forEach(n=>{t[n]=rt(s[n],e[n])}),n=>{const o={};return a.forEach(i=>{o[i]=t[i](n)}),o}}if(r==="number"){const a=e-s;return t=>s+t*a}throw new Error(`Cannot interpolate ${r} values`)}function Pr(s,e={}){const r=Is(s);let a,t=s;function n(o,i){if(s==null)return r.set(s=o),Promise.resolve();t=o;let l=a,u=!1,{delay:f=0,duration:g=400,easing:b=ss,interpolate:w=rt}=Ze(Ze({},e),i);if(g===0)return l&&(l.abort(),l=null),r.set(s=t),Promise.resolve();const z=vs()+f;let C;return a=Es(S=>{if(S<z)return!0;u||(C=w(s,o),typeof g=="function"&&(g=g(s,o)),u=!0),l&&(l.abort(),l=null);const O=S-z;return O>g?(r.set(s=o),!1):(r.set(s=C(b(O/g))),!0)}),a.promise}return{set:n,update:(o,i)=>n(o(t,s),i),subscribe:r.subscribe}}function yt(s,e,r,a){if(e==0&&r==0)return s;const t=a?["a","b","c","d","e","f","g","h"].reverse():["a","b","c","d","e","f","g","h"],n=a?["8","7","6","5","4","3","2","1"].reverse():["8","7","6","5","4","3","2","1"];let o=t[t.indexOf(s[0])+e],i=n[n.indexOf(s[1])+r];if(!(!o||!i))return o+i}function At(s,e,r){e*=1.15;let a=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",(s.offsetWidth*e).toString()),a.setAttribute("height",(s.offsetHeight*e).toString()),a.style.position="absolute",a.style.zIndex="100",a.style.transform=`translate(${r?"":"-"}${25*e/2}%, -${25*e/2}%)`,a.style.opacity="0.2",t.setAttribute("r",(s.offsetWidth*e/2).toString()),t.setAttribute("cx",(s.offsetWidth*e/2).toString()),t.setAttribute("cy",(s.offsetHeight*e/2).toString()),t.setAttribute("fill","black"),a.appendChild(t),a}function Lr(s,e){let r;function a(F,K=1e3){let D=!1;const W=()=>{r==null?D=!1:(F(...r),r=null,setTimeout(W,K))};return(...$)=>{if(D){r=$;return}F(...$),D=!0,setTimeout(W,K)}}const t=a(L,10);let n,o,i,l,u,f,g,b,w=!1,z;const C=s.parentNode;let S,{startSquare:O,boardFlipped:c,onlyShow:d,coords:m}=e,v=ht(m).x,E=ht(m).y;const k=120,P=1.6;let M=At(s,P,c);s.draggable=!1,s.addEventListener("contextmenu",Ee),s.addEventListener("dragstart",oe),d||(s.addEventListener("mousedown",h),s.addEventListener("touchstart",h));function h(F){var D;if(F.preventDefault(),F instanceof MouseEvent&&F.button!==0||!(F instanceof MouseEvent)&&((D=F.touches)==null?void 0:D.length)>1)return;v=c?7-vt(O[0]):vt(O[0]),E=c?8-parseInt(O[1]):parseInt(O[1])-1,S=O;let K=F.target.getBoundingClientRect();!(F instanceof MouseEvent)&&F.touches[0]&&F.targetTouches[0]?(n=F.touches[0].clientX,o=F.touches[0].clientY,i=F.targetTouches[0].clientX-K.x,l=F.targetTouches[0].clientY-K.y):F instanceof MouseEvent&&(n=F.clientX,o=F.clientY,i=F.offsetX,l=F.offsetY),u=0,f=0,g=window.scrollX,b=window.scrollY,s.dispatchEvent(new CustomEvent("clicked")),window.addEventListener("mousemove",t),window.addEventListener("mouseup",H),document.body.addEventListener("mouseleave",H),window.addEventListener("scroll",de),window.addEventListener("touchmove",t),window.addEventListener("touchend",H)}function L(F){let K,D;if(F instanceof MouseEvent?(K=F.clientX-n,D=F.clientY-o,n=F.clientX,o=F.clientY):(K=F.touches[0].clientX-n,D=F.touches[0].clientY-o,n=F.touches[0].clientX,o=F.touches[0].clientY),u+=K,f+=D,w||(Math.abs(u)>1||Math.abs(f)>1)&&(m.update(W=>({x:W.x+(n-s.offsetWidth/2-s.getBoundingClientRect().x)/s.clientWidth,y:F instanceof MouseEvent?W.y-(o-s.offsetHeight/2-s.getBoundingClientRect().y)/s.clientWidth:W.y-(o-s.offsetHeight*1.5-s.getBoundingClientRect().y)/s.clientWidth,scale:F instanceof MouseEvent?1:P}),{duration:k}),w=!0,s.style.zIndex="30",s.style.cursor="grabbing",s.dispatchEvent(new CustomEvent("startMoving"))),!!w){if(!(F instanceof MouseEvent)){let W=Math.floor((u+i)/s.offsetWidth),$=Math.floor((f+l)/s.offsetHeight),ee=yt(O,W,$,c);if(ee){if(ee!==S&&!(F instanceof MouseEvent)){const se=st(ee);M.style.left=`${se.x*12.5}%`,M.style.top=`${se.y*12.5}%`,C.appendChild(M)}}else S&&(S="")}m.update(W=>({x:W.x+K/s.clientWidth,y:W.y-D/s.clientWidth,scale:F instanceof MouseEvent?1:P}),{duration:0}),s.dispatchEvent(new CustomEvent("moving",{detail:{x:n,y:o}}))}}function H(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",H),document.body.removeEventListener("mouseleave",H),window.removeEventListener("scroll",de),window.removeEventListener("touchmove",t),window.removeEventListener("touchend",H),window.removeEventListener("touchcancel",H),r=null;let F=Math.floor((u+i)/s.offsetWidth),K=Math.floor((f+l)/s.offsetHeight),D=yt(O,F,K,c);D&&D!=O&&s.dispatchEvent(new CustomEvent("dropped",{detail:D})),m.update(()=>({x:v,y:E,scale:1}),{duration:k}).then(()=>{s.dispatchEvent(new CustomEvent("animationEnded"))}),n=0,o=0,u=0,f=0,w=!1,s.style.removeProperty("cursor"),setTimeout(()=>s.style.zIndex="10",k),M.remove()}function Ee(F){F.preventDefault()}function oe(F){F.preventDefault()}function de(){let F=window.scrollX-g,K=window.scrollY-b;g=window.scrollX,b=window.scrollY,m.update(D=>({x:D.x+F,y:D.y+K,scale:1}),{duration:0})}return{destroy(){s.removeEventListener("mousedown",h),s.removeEventListener("touchstart",h),s.removeEventListener("contextmenu",Ee),s.removeEventListener("dragstart",oe),window.clearTimeout(z)},update(F){O=F.startSquare,F.onlyShow!=d&&(d=F.onlyShow,d?(s.removeEventListener("mousedown",h),s.removeEventListener("touchstart",h)):(s.addEventListener("mousedown",h),s.addEventListener("touchstart",h))),c!==F.boardFlipped&&(M=At(s,P,F.boardFlipped)),c=F.boardFlipped}}}const Pt=""+new URL("../../assets/wP-f78bae6c.svg",import.meta.url).href,Sr=""+new URL("../../assets/wR-5eb92d73.svg",import.meta.url).href,Cr=""+new URL("../../assets/wN-a4c975a2.svg",import.meta.url).href,Tr=""+new URL("../../assets/wB-1ff2f149.svg",import.meta.url).href,Fr=""+new URL("../../assets/wQ-8568b485.svg",import.meta.url).href,Or=""+new URL("../../assets/wK-4cdf6dc9.svg",import.meta.url).href,qr=""+new URL("../../assets/bP-84e521e8.svg",import.meta.url).href,Rr=""+new URL("../../assets/bR-e39efb08.svg",import.meta.url).href,Ir=""+new URL("../../assets/bN-d3912d91.svg",import.meta.url).href,zr=""+new URL("../../assets/bB-c430b746.svg",import.meta.url).href,Dr=""+new URL("../../assets/bQ-c7b9a43e.svg",import.meta.url).href,Nr=""+new URL("../../assets/bK-3500a2e6.svg",import.meta.url).href,at=s=>{switch(s){case"wP":return Pt;case"wR":return Sr;case"wN":return Cr;case"wB":return Tr;case"wQ":return Fr;case"wK":return Or;case"bP":return qr;case"bR":return Rr;case"bN":return Ir;case"bB":return zr;case"bQ":return Dr;case"bK":return Nr;default:return Pt}};function Ur(s){let e,r,a,t,n,o;return{c(){e=R("img"),this.h()},l(i){e=I(i,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){J(e,"left",s[7].x*12.5+"%"),J(e,"bottom",s[7].y*12.5+"%"),J(e,"z-Index",s[6]),J(e,"opacity",s[5]?.3:1),_(e,"class",r="noselect "+(s[11](s[4],s[3])?"cursor-pointer":"")+" svelte-1g241z"),De(e.src,a=at(s[1]))||_(e,"src",a),_(e,"alt",s[1])},m(i,l){V(i,e,l),n||(o=[ot(t=Lr.call(null,e,{startSquare:s[0],onlyShow:!s[11](s[4],s[3]),boardFlipped:s[2],coords:s[9]})),ae(e,"dropped",s[10]),ae(e,"clicked",s[15]),ae(e,"startMoving",s[16]),ae(e,"animationEnded",s[17]),ae(e,"moving",s[18])],n=!0)},p(i,[l]){l&128&&J(e,"left",i[7].x*12.5+"%"),l&128&&J(e,"bottom",i[7].y*12.5+"%"),l&64&&J(e,"z-Index",i[6]),l&32&&J(e,"opacity",i[5]?.3:1),l&24&&r!==(r="noselect "+(i[11](i[4],i[3])?"cursor-pointer":"")+" svelte-1g241z")&&_(e,"class",r),l&2&&!De(e.src,a=at(i[1]))&&_(e,"src",a),l&2&&_(e,"alt",i[1]),t&&ut(t.update)&&l&29&&t.update.call(null,{startSquare:i[0],onlyShow:!i[11](i[4],i[3]),boardFlipped:i[2],coords:i[9]})},i:re,o:re,d(i){i&&y(e),n=!1,$e(o)}}}function Br(s,e,r){let a,t;const n=ct();let{square:o}=e,{name:i}=e,{getGridCoordsFromSquare:l}=e,{flipped:u}=e,{whiteToMove:f=!1}=e,{movable:g}=e,{ghostPiece:b=!1}=e,{easing:w="cubicInOut"}=e,{duration:z=120}=e,C=z;const S=Pr({x:0,y:0,scale:1},{duration:C,easing:Ar[w]});ws(s,S,h=>r(7,t=h));let O=!1;const c=h=>h[0]==="w"?j.WHITE:j.BLACK,d=(h,L)=>{const H=l(h);S.update(()=>({x:H.x,y:H.y,scale:1}),{duration:O?C:0}),O||(O=!0),C=z},m=h=>{C=0,n("endDragging",h.detail),n("move",o+h.detail)},v=(h,L)=>h===!0||h!==!1&&h.enabled&&(h.color===c(i)||h.color===j.BOTH&&(L&&c(i)===j.WHITE||!L&&c(i)===j.BLACK));function E(h){ze.call(this,s,h)}function k(h){ze.call(this,s,h)}function P(h){ze.call(this,s,h)}const M=h=>n("moving",h.detail);return s.$$set=h=>{"square"in h&&r(0,o=h.square),"name"in h&&r(1,i=h.name),"getGridCoordsFromSquare"in h&&r(12,l=h.getGridCoordsFromSquare),"flipped"in h&&r(2,u=h.flipped),"whiteToMove"in h&&r(3,f=h.whiteToMove),"movable"in h&&r(4,g=h.movable),"ghostPiece"in h&&r(5,b=h.ghostPiece),"easing"in h&&r(13,w=h.easing),"duration"in h&&r(14,z=h.duration)},s.$$.update=()=>{s.$$.dirty&5&&d(o),s.$$.dirty&16&&r(6,a=typeof g=="boolean"?g?1:0:g.enabled?1:0)},[o,i,u,f,g,b,a,t,n,S,m,v,l,w,z,E,k,P,M]}class os extends Pe{constructor(e){super(),Le(this,e,Br,Ur,Se,{square:0,name:1,getGridCoordsFromSquare:12,flipped:2,whiteToMove:3,movable:4,ghostPiece:5,easing:13,duration:14})}}function Vr(s){let e,r;return{c(){e=R("div"),this.h()},l(a){e=I(a,"DIV",{style:!0,class:!0}),N(e).forEach(y),this.h()},h(){J(e,"left",s[2]*12.5+"%"),J(e,"bottom",s[3]*12.5+"%"),_(e,"class",r="noselect "+ve.squareStyles[s[1]][s[0]]+" svelte-fwbvtn")},m(a,t){V(a,e,t)},p(a,[t]){t&4&&J(e,"left",a[2]*12.5+"%"),t&8&&J(e,"bottom",a[3]*12.5+"%"),t&3&&r!==(r="noselect "+ve.squareStyles[a[1]][a[0]]+" svelte-fwbvtn")&&_(e,"class",r)},i:re,o:re,d(a){a&&y(e)}}}function Hr(s,e,r){let{square:a}=e,{color:t}=e,{getGridCoordsFromSquare:n}=e,{flipped:o}=e,{theme:i}=e,l,u;const f=g=>{const b=n(a);r(2,l=b.x),r(3,u=b.y)};return s.$$set=g=>{"square"in g&&r(4,a=g.square),"color"in g&&r(0,t=g.color),"getGridCoordsFromSquare"in g&&r(5,n=g.getGridCoordsFromSquare),"flipped"in g&&r(6,o=g.flipped),"theme"in g&&r(1,i=g.theme)},s.$$.update=()=>{s.$$.dirty&64&&f()},[t,i,l,u,a,n,o]}class xr extends Pe{constructor(e){super(),Le(this,e,Hr,Vr,Se,{square:4,color:0,getGridCoordsFromSquare:5,flipped:6,theme:1})}}const Wr=["a","b","c","d","e","f","g","h"],Kr=["8","7","6","5","4","3","2","1"];function Gr(s,e){let{svg:r,flipped:a,enabled:t,settings:n}=e,o=!1,i={x:-1,y:-1},l,u;t&&s.addEventListener("mousedown",g);function f(c,d){const m=s.getBoundingClientRect(),v=a?m.width-(c-m.left):c-m.left,E=a?m.height-(d-m.top):d-m.top;return{x:Math.max(0,Math.min(7,Math.floor(v/(s.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(E/(s.clientHeight/8))))}}function g(c){if(c.button==0)o=!0,Lt(r),window.addEventListener("mouseup",w);else if(c.button==2&&!o){let d=f(c.clientX,c.clientY);i=d,z(d),Qe(r,u,i,c.shiftKey,c.ctrlKey,c.altKey),l=void 0,r.querySelectorAll(`circle[cx="${d.x+.5}"][cy="${d.y+.5}"]`).forEach(m=>{l=m,u!=null&&m.getAttribute("stroke")==u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&r.appendChild(u),window.addEventListener("mousemove",b),window.addEventListener("mouseup",w),window.addEventListener("keydown",O),window.addEventListener("keyup",O),window.addEventListener("contextmenu",S)}}function b(c){if(u==null||i.x===-1&&i.y===-1)return;let d=f(c.clientX,c.clientY);n.onlyChessMove&&!C(i,d)||(l=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),i.x==d.x&&i.y==d.y?(nt(i,d),u instanceof SVGPolylineElement&&(u.remove(),z(d)),Qe(r,u,i,c.shiftKey,c.ctrlKey,c.altKey),r.appendChild(u),r.querySelectorAll(`circle[cx="${i.x+.5}"][cy="${i.y+.5}"]`).forEach(m=>{m!=u&&(l=m,u!=null&&m.getAttribute("stroke")==u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),l=void 0,r.querySelectorAll(`polyline[data-sqID="${nt(i,d)}"]`).forEach(m=>{u==null||i.x===-1&&i.y===-1||m==u||(l=m,m.getAttribute("stroke")==u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=cs(i,d,n.LshapeKnightMove),Qe(r,u,i,c.shiftKey,c.ctrlKey,c.altKey),r.appendChild(u)):u instanceof SVGPolylineElement&&ds(u,i,d,n.LshapeKnightMove)))}function w(c){if(c.button==0)o=!1;else if(c.button==2){if(i.x===-1&&i.y===-1)return;r.querySelectorAll("[remove]").forEach(d=>{d.remove()}),l&&l.remove(),l=void 0,(u==null?void 0:u.tagName)=="circle"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:it(i),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)=="polyline"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,i={x:-1,y:-1},o=!1,window.removeEventListener("mousemove",b),window.removeEventListener("keydown",O),window.removeEventListener("keyup",O),window.removeEventListener("contextmenu",S)}window.removeEventListener("mouseup",w)}function z(c){u=document.createElementNS("http://www.w3.org/2000/svg","circle"),u.setAttribute("cx",`${c.x+.5}`),u.setAttribute("cy",`${c.y+.5}`),u.setAttribute("r","0.465"),u.setAttribute("opacity","0.4"),u.setAttribute("fill","none"),u.setAttribute("stroke-width","0.07"),u.setAttribute("stroke","green")}function C(c,d){return!!(us(c,d)||Math.abs(c.x-d.x)===Math.abs(c.y-d.y)||c.x===d.x!=(c.y===d.y))}function S(c){c.preventDefault()}function O(c){c.preventDefault(),Qe(r,u,i,c.shiftKey,c.ctrlKey,c.altKey)}return{update(c){c.svg!==r&&(r=c.svg),c.enabled!==t&&(t=c.enabled,t?s.addEventListener("mousedown",g):(Lt(r),s.removeEventListener("mousedown",g))),n=c.settings,a=c.flipped},destroy(){}}}function us(s,e){return Math.abs((s.x-e.x)*(s.y-e.y))==2}function it(s){return`${Wr[s.x]}${Kr[s.y]}`}function nt(s,e){return`${it(s)}${it(e)}`}function Qe(s,e,r,a,t,n){if(!(e===void 0||r.x===-1&&r.y===-1)){if(e.tagName=="circle")e.setAttribute("fill","transparent"),a?e.setAttribute("stroke","red"):t?e.setAttribute("stroke","orange"):n?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),s.querySelectorAll(`\u0441ircle[cx="${r.x+.5}"][cy="${r.y+.5}"]`).forEach(o=>{e!=null&&o!=e&&(o.getAttribute("stroke")==e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName=="polyline"){let o=a?"red":t?"orange":n?"blue":"green";e.setAttribute("stroke",`${o}`),e.setAttribute("marker-start",`url(#start-${o[0]})`),e.setAttribute("marker-end",`url(#end-${o[0]})`),s.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(i=>{e instanceof SVGPolylineElement&&i!=e&&(i.getAttribute("stroke")==e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function cs(s,e,r,a,t){let n=document.createElementNS("http://www.w3.org/2000/svg","polyline");return ds(n,s,e,r,a,t),n.setAttribute("fill","none"),n.setAttribute("stroke-width","0.25"),n.setAttribute("stroke-linejoin","round"),n.setAttribute("opacity",t!==void 0?`${t}`:"0.4"),n.setAttribute("marker-start",a?`url(#start-${a[0]})`:"url(#start-g)"),n.setAttribute("marker-end",a?`url(#end-${a[0]})`:"url(#end-g)"),n.setAttribute("stroke",a||"green"),n}function ds(s,e,r,a,t,n){let o={x:-1,y:-1},i,l,u;us(e,r)&&a?(Math.abs(r.x-e.x)==2?o={x:r.x,y:e.y}:o={x:e.x,y:r.y},o.y-e.y<0?u=Math.PI+Math.atan((o.x-e.x)/(o.y-e.y)):u=Math.atan((o.x-e.x)/Math.abs(o.y-e.y)),l={x:r.x-Math.sign(r.x-o.x)*(o.x!=r.x?.4:0),y:r.y-Math.sign(r.y-o.y)*(o.y!=r.y?.4:0)}):(r.y-e.y<0?u=Math.PI+Math.atan((r.x-e.x)/(r.y-e.y)):u=Math.atan((r.x-e.x)/Math.abs(r.y-e.y)),l={x:r.x-Math.sin(u)*.4,y:r.y-Math.cos(u)*.4}),i={x:e.x+Math.sin(u)*.4,y:e.y+Math.cos(u)*.4},s.setAttribute("points",`${i.x+.5},${i.y+.5} ${o.x!=-1&&o.y!=-1&&a?`${o.x+.5},${o.y+.5} `:""}${l.x+.5},${l.y+.5}`),s.setAttribute("data-sqID",`${nt(e,r)}`),n!==void 0&&s.setAttribute("opacity",`${n}`),t!==void 0&&(s.setAttribute("marker-start",`url(#start-${t[0]})`),s.setAttribute("marker-end",`url(#end-${t[0]})`),s.setAttribute("stroke",t))}function jr(s){s.querySelectorAll("[sf]").forEach(e=>e.remove())}function Xr(s,e,r){e.forEach(a=>{const t=cs(st(a.move.substring(0,2)),st(a.move.substring(2,4)),r,a.color,a.opacity);t.setAttribute("sf",""),s.appendChild(t)})}function Lt(s){s.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("sf")||e.remove()})}function St(s,e,r){const a=s.slice();return a[8]=e[r],a}function Ct(s){let e,r,a,t;return{c(){e=qe("marker"),r=qe("path"),a=qe("marker"),t=qe("path"),this.h()},l(n){e=Re(n,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var o=N(e);r=Re(o,"path",{fill:!0,d:!0}),N(r).forEach(y),o.forEach(y),a=Re(n,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var i=N(a);t=Re(i,"path",{fill:!0,d:!0}),N(t).forEach(y),i.forEach(y),this.h()},h(){_(r,"fill",s[8]),_(r,"d","M 5 0 Q 0 0 0 5 L 0 15 Q 0 20 5 20 Z"),_(e,"id","start-"+s[8][0]),_(e,"viewBox","0 0 5 20"),_(e,"refX","4"),_(e,"refY","10"),_(e,"markerUnits","strokeWidth"),_(e,"markerWidth","0.5"),_(e,"markerHeight","1"),_(e,"orient","auto"),_(t,"fill",s[8]),_(t,"d","M 0 4 L 10 10 L 0 16 Z"),_(a,"id","end-"+s[8][0]),_(a,"viewBox","0 0 10 20"),_(a,"refX","0.2"),_(a,"refY","10"),_(a,"markerUnits","strokeWidth"),_(a,"orient","auto"),_(a,"fill","currentColor")},m(n,o){V(n,e,o),T(e,r),V(n,a,o),T(a,t)},p:re,d(n){n&&y(e),n&&y(a)}}}function Yr(s){let e,r,a,t=s[2],n=[];for(let o=0;o<t.length;o+=1)n[o]=Ct(St(s,t,o));return{c(){e=qe("svg"),r=qe("defs");for(let o=0;o<n.length;o+=1)n[o].c();a=qe("g"),this.h()},l(o){e=Re(o,"svg",{xmlns:!0,style:!0,class:!0,viewBox:!0});var i=N(e);r=Re(i,"defs",{});var l=N(r);for(let u=0;u<n.length;u+=1)n[u].l(l);l.forEach(y),a=Re(i,"g",{}),N(a).forEach(y),i.forEach(y),this.h()},h(){_(e,"xmlns","http://www.w3.org/2000/svg"),J(e,"transform","rotate("+(s[1]?"180deg":"0deg")+")"),_(e,"class","rounded svelte-1ez37sv"),_(e,"viewBox","0 0 8 8")},m(o,i){V(o,e,i),T(e,r);for(let l=0;l<n.length;l+=1)n[l].m(r,null);T(e,a),s[5](a)},p(o,[i]){if(i&4){t=o[2];let l;for(l=0;l<t.length;l+=1){const u=St(o,t,l);n[l]?n[l].p(u,i):(n[l]=Ct(u),n[l].c(),n[l].m(r,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}i&2&&J(e,"transform","rotate("+(o[1]?"180deg":"0deg")+")")},i:re,o:re,d(o){o&&y(e),We(n,o),s[5](null)}}}function Qr(s,e,r){let{flipped:a=!1}=e,{svg:t}=e,{LshapeKnightMove:n=!1}=e,{computerArrows:o=[]}=e,i=!1;rs(()=>{i=!0,l(o)});function l(g){!i||(jr(t),Xr(t,g,n))}const u=["green","red","blue","orange"];function f(g){me[g?"unshift":"push"](()=>{t=g,r(0,t)})}return s.$$set=g=>{"flipped"in g&&r(1,a=g.flipped),"svg"in g&&r(0,t=g.svg),"LshapeKnightMove"in g&&r(3,n=g.LshapeKnightMove),"computerArrows"in g&&r(4,o=g.computerArrows)},s.$$.update=()=>{s.$$.dirty&16&&l(o)},[t,a,u,n,o,f]}class Zr extends Pe{constructor(e){super(),Le(this,e,Qr,Yr,Se,{flipped:1,svg:0,LshapeKnightMove:3,computerArrows:4})}}function Tt(s,{delay:e=0,duration:r=400,easing:a=ls,x:t=0,y:n=0,opacity:o=0}={}){const i=getComputedStyle(s),l=+i.opacity,u=i.transform==="none"?"":i.transform,f=l*(1-o);return{delay:e,duration:r,easing:a,css:(g,b)=>`
			transform: ${u} translate(${(1-g)*t}px, ${(1-g)*n}px);
			opacity: ${l-f*b}`}}function Jr(s){let e,r,a,t,n,o;return{c(){e=R("button"),r=R("img"),this.h()},l(i){e=I(i,"BUTTON",{});var l=N(e);r=I(l,"IMG",{src:!0,alt:!0,class:!0}),l.forEach(y),this.h()},h(){De(r.src,a=s[1])||_(r,"src",a),_(r,"alt",t="Promotion to "+s[0].toUpperCase()),_(r,"class","rounded-md border border-gray-300 hover:border-sky-600 hover:bg-gray-600")},m(i,l){V(i,e,l),T(e,r),n||(o=ae(e,"click",s[2]),n=!0)},p(i,[l]){l&1&&t!==(t="Promotion to "+i[0].toUpperCase())&&_(r,"alt",t)},i:re,o:re,d(i){i&&y(e),n=!1,o()}}}function $r(s,e,r){let{piece:a}=e,{isWhite:t}=e,{showModal:n}=e;const o=ct(),i=(t?"w":"b")+a.toUpperCase(),l=at(i),u=()=>{o("newPromotion",a),r(3,n=!1)};return s.$$set=f=>{"piece"in f&&r(0,a=f.piece),"isWhite"in f&&r(4,t=f.isWhite),"showModal"in f&&r(3,n=f.showModal)},[a,l,u,n,t]}class ea extends Pe{constructor(e){super(),Le(this,e,$r,Jr,Se,{piece:0,isWhite:4,showModal:3})}}function Ft(s,e,r){const a=s.slice();return a[6]=e[r],a}function Ot(s){let e,r,a,t,n,o=["q","r","b","n"],i=[];for(let u=0;u<4;u+=1)i[u]=qt(Ft(s,o,u));const l=u=>x(i[u],1,1,()=>{i[u]=null});return{c(){e=R("div"),r=R("div");for(let u=0;u<4;u+=1)i[u].c();this.h()},l(u){e=I(u,"DIV",{class:!0});var f=N(e);r=I(f,"DIV",{class:!0});var g=N(r);for(let b=0;b<4;b+=1)i[b].l(g);g.forEach(y),f.forEach(y),this.h()},h(){_(r,"class","modal-content p-3 gap-3 svelte-tvjsje"),_(e,"class","modal svelte-tvjsje")},m(u,f){V(u,e,f),T(e,r);for(let g=0;g<4;g+=1)i[g].m(r,null);n=!0},p(u,f){if(f&3){o=["q","r","b","n"];let g;for(g=0;g<4;g+=1){const b=Ft(u,o,g);i[g]?(i[g].p(b,f),U(i[g],1)):(i[g]=qt(b),i[g].c(),U(i[g],1),i[g].m(r,null))}for(we(),g=4;g<4;g+=1)l(g);_e()}},i(u){if(!n){for(let f=0;f<4;f+=1)U(i[f]);dt(()=>{t&&t.end(1),a=_s(r,Tt,{x:100,duration:300}),a.start()}),n=!0}},o(u){i=i.filter(Boolean);for(let f=0;f<4;f+=1)x(i[f]);a&&a.invalidate(),t=Ms(r,Tt,{x:-200,duration:100}),n=!1},d(u){u&&y(e),We(i,u),u&&t&&t.end()}}}function qt(s){let e,r,a,t;function n(l){s[3](l)}function o(l){s[4](l)}let i={piece:s[6]};return s[1]!==void 0&&(i.isWhite=s[1]),s[0]!==void 0&&(i.showModal=s[0]),e=new ea({props:i}),me.push(()=>et(e,"isWhite",n)),me.push(()=>et(e,"showModal",o)),e.$on("newPromotion",s[5]),{c(){Me(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,u){ye(e,l,u),t=!0},p(l,u){const f={};!r&&u&2&&(r=!0,f.isWhite=l[1],tt(()=>r=!1)),!a&&u&1&&(a=!0,f.showModal=l[0],tt(()=>a=!1)),e.$set(f)},i(l){t||(U(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){Ae(e,l)}}}function ta(s){let e,r,a=s[0]&&Ot(s);return{c(){a&&a.c(),e=le()},l(t){a&&a.l(t),e=le()},m(t,n){a&&a.m(t,n),V(t,e,n),r=!0},p(t,[n]){t[0]?a?(a.p(t,n),n&1&&U(a,1)):(a=Ot(t),a.c(),U(a,1),a.m(e.parentNode,e)):a&&(we(),x(a,1,1,()=>{a=null}),_e())},i(t){r||(U(a),r=!0)},o(t){x(a),r=!1},d(t){a&&a.d(t),t&&y(e)}}}function sa(s,e,r){let a=!1,t;function n(u){r(0,a=!0),u?r(1,t=!0):r(1,t=!1)}function o(u){t=u,r(1,t)}function i(u){a=u,r(0,a)}function l(u){ze.call(this,s,u)}return[a,t,n,o,i,l]}class ra extends Pe{constructor(e){super(),Le(this,e,sa,ta,Se,{openPromotionModal:2})}get openPromotionModal(){return this.$$.ctx[2]}}const aa=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,ia=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,na=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,la=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function Rt(s){let e,r,a,t;return{c(){e=R("audio"),r=R("track"),a=R("source"),this.h()},l(n){e=I(n,"AUDIO",{preload:!0});var o=N(e);r=I(o,"TRACK",{kind:!0}),a=I(o,"SOURCE",{src:!0}),o.forEach(y),this.h()},h(){_(r,"kind","captions"),De(a.src,t=aa)||_(a,"src",t),_(e,"preload","auto")},m(n,o){V(n,e,o),T(e,r),T(e,a),s[3](e)},p:re,d(n){n&&y(e),s[3](null)}}}function It(s){let e,r,a,t;return{c(){e=R("audio"),r=R("track"),a=R("source"),this.h()},l(n){e=I(n,"AUDIO",{preload:!0});var o=N(e);r=I(o,"TRACK",{kind:!0}),a=I(o,"SOURCE",{src:!0}),o.forEach(y),this.h()},h(){_(r,"kind","captions"),De(a.src,t=ia)||_(a,"src",t),_(e,"preload","auto")},m(n,o){V(n,e,o),T(e,r),T(e,a),s[4](e)},p:re,d(n){n&&y(e),s[4](null)}}}function zt(s){let e,r,a,t;return{c(){e=R("audio"),r=R("track"),a=R("source"),this.h()},l(n){e=I(n,"AUDIO",{preload:!0});var o=N(e);r=I(o,"TRACK",{kind:!0}),a=I(o,"SOURCE",{src:!0}),o.forEach(y),this.h()},h(){_(r,"kind","captions"),De(a.src,t=na)||_(a,"src",t),_(e,"preload","auto")},m(n,o){V(n,e,o),T(e,r),T(e,a),s[5](e)},p:re,d(n){n&&y(e),s[5](null)}}}function Dt(s){let e,r,a,t;return{c(){e=R("audio"),r=R("track"),a=R("source"),this.h()},l(n){e=I(n,"AUDIO",{preload:!0});var o=N(e);r=I(o,"TRACK",{kind:!0}),a=I(o,"SOURCE",{src:!0}),o.forEach(y),this.h()},h(){_(r,"kind","captions"),De(a.src,t=la)||_(a,"src",t),_(e,"preload","auto")},m(n,o){V(n,e,o),T(e,r),T(e,a),s[6](e)},p:re,d(n){n&&y(e),s[6](null)}}}function oa(s){let e,r,a,t,n=s[0].MOVE&&Rt(s),o=s[0].CAPTURE&&It(s),i=s[0].CASTLE&&zt(s),l=s[0].UNDO&&Dt(s);return{c(){n&&n.c(),e=X(),o&&o.c(),r=X(),i&&i.c(),a=X(),l&&l.c(),t=le()},l(u){n&&n.l(u),e=Y(u),o&&o.l(u),r=Y(u),i&&i.l(u),a=Y(u),l&&l.l(u),t=le()},m(u,f){n&&n.m(u,f),V(u,e,f),o&&o.m(u,f),V(u,r,f),i&&i.m(u,f),V(u,a,f),l&&l.m(u,f),V(u,t,f)},p(u,[f]){u[0].MOVE?n?n.p(u,f):(n=Rt(u),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),u[0].CAPTURE?o?o.p(u,f):(o=It(u),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null),u[0].CASTLE?i?i.p(u,f):(i=zt(u),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null),u[0].UNDO?l?l.p(u,f):(l=Dt(u),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:re,o:re,d(u){n&&n.d(u),u&&y(e),o&&o.d(u),u&&y(r),i&&i.d(u),u&&y(a),l&&l.d(u),u&&y(t)}}}function ua(s,e,r){let{settings:a}=e;const t={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},n=()=>{t.CASTLE&&(t.CASTLE.pause(),r(1,t.CASTLE.currentTime=0,t)),t.MOVE&&(t.MOVE.pause(),r(1,t.MOVE.currentTime=0,t)),t.CAPTURE&&(t.CAPTURE.pause(),r(1,t.CAPTURE.currentTime=0,t)),t.UNDO&&(t.UNDO.pause(),r(1,t.UNDO.currentTime=0,t))},o=b=>b===void 0||a[b];function i(b){switch(n(),b){case"MOVE":t.MOVE&&o("MOVE")&&t.MOVE.play();break;case"CAPTURE":t.CAPTURE&&o("CAPTURE")&&t.CAPTURE.play();break;case"CASTLE":t.CASTLE&&o("CASTLE")&&t.CASTLE.play();break;case"UNDO":t.UNDO&&o("UNDO")&&(r(1,t.UNDO.volume=.3,t),t.UNDO.play());break}}function l(b){me[b?"unshift":"push"](()=>{t.MOVE=b,r(1,t)})}function u(b){me[b?"unshift":"push"](()=>{t.CAPTURE=b,r(1,t)})}function f(b){me[b?"unshift":"push"](()=>{t.CASTLE=b,r(1,t)})}function g(b){me[b?"unshift":"push"](()=>{t.UNDO=b,r(1,t)})}return s.$$set=b=>{"settings"in b&&r(0,a=b.settings)},[a,t,i,l,u,f,g]}class ca extends Pe{constructor(e){super(),Le(this,e,ua,oa,Se,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Nt=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,Ut=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function da(s,e){let{minWidth:r,maxWidth:a,curWidth:t}=e,n=t,o,i,l,u;s.addEventListener("mousedown",f);function f(w){w.stopPropagation(),w.button==0&&(o=w.pageX,l=n,i=w.pageY,u=n,window.addEventListener("mousemove",g),window.addEventListener("mouseup",b))}function g(w){w.stopPropagation(),s.dispatchEvent(new CustomEvent("resizing",{detail:{size:Math.max(Math.max(r,Math.min(a,l+(w.pageX-o))),Math.max(r,Math.min(a,u+(w.pageY-i))))}}))}function b(w){w.stopPropagation(),s.dispatchEvent(new CustomEvent("endResizing",{detail:{size:Math.max(Math.max(r,Math.min(a,l+Math.floor((w.pageX-o)/8)*8)),Math.max(r,Math.min(a,u+Math.floor((w.pageY-i)/8)*8)))}})),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",b)}return{update(w){n=w.curWidth},destroy(){s.removeEventListener("mousedown",f)}}}function fa(s){let e,r,a,t,n,o;return{c(){e=R("div"),r=qe("svg"),a=qe("path"),this.h()},l(i){e=I(i,"DIV",{style:!0,class:!0});var l=N(e);r=Re(l,"svg",{xmlns:!0,viewBox:!0,fill:!0});var u=N(r);a=Re(u,"path",{d:!0}),N(a).forEach(y),u.forEach(y),l.forEach(y),this.h()},h(){_(a,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),_(r,"xmlns","http://www.w3.org/2000/svg"),_(r,"viewBox","0 0 16 16"),_(r,"fill","currentColor"),J(e,"color",ve.colors[s[0].state.board.boardTheme].black),_(e,"class","hidden lg:inline svelte-bwuzxv")},m(i,l){V(i,e,l),T(e,r),T(r,a),n||(o=[ae(e,"pointerdown",ks(s[2])),ot(t=da.call(null,e,{minWidth:s[0].state.resizible.settings.min,maxWidth:s[0].state.resizible.settings.max,curWidth:s[0].state.board.size})),ae(e,"resizing",s[3]),ae(e,"endResizing",s[4])],n=!0)},p(i,[l]){l&1&&J(e,"color",ve.colors[i[0].state.board.boardTheme].black),t&&ut(t.update)&&l&1&&t.update.call(null,{minWidth:i[0].state.resizible.settings.min,maxWidth:i[0].state.resizible.settings.max,curWidth:i[0].state.board.size})},i:re,o:re,d(i){i&&y(e),n=!1,$e(o)}}}function ha(s,e,r){let{chessboard:a}=e,{setSize:t}=e;function n(l){ze.call(this,s,l)}const o=l=>t(l.detail.size),i=l=>t(l.detail.size);return s.$$set=l=>{"chessboard"in l&&r(0,a=l.chessboard),"setSize"in l&&r(1,t=l.setSize)},[a,t,n,o,i]}class ga extends Pe{constructor(e){super(),Le(this,e,ha,fa,Se,{chessboard:0,setSize:1})}}function Bt(s,e,r){const a=s.slice();return a[63]=e[r],a}function Vt(s,e,r){const a=s.slice();return a[66]=e[r],a}function Ht(s){let e=[],r=new Map,a,t,n=s[2].state.pieces;const o=i=>i[66];for(let i=0;i<n.length;i+=1){let l=Vt(s,n,i),u=o(l);r.set(u,e[i]=xt(u,l))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();a=le()},l(i){for(let l=0;l<e.length;l+=1)e[l].l(i);a=le()},m(i,l){for(let u=0;u<e.length;u+=1)e[u].m(i,l);V(i,a,l),t=!0},p(i,l){l[0]&27908&&(n=i[2].state.pieces,we(),e=as(e,l,o,1,i,n,r,a.parentNode,is,xt,a,Vt),_e())},i(i){if(!t){for(let l=0;l<n.length;l+=1)U(e[l]);t=!0}},o(i){for(let l=0;l<e.length;l+=1)x(e[l]);t=!1},d(i){for(let l=0;l<e.length;l+=1)e[l].d(i);i&&y(a)}}}function xt(s,e){let r,a,t;function n(){return e[44](e[66])}function o(){return e[45](e[66])}return a=new os({props:{square:e[66].square,name:e[66].name,easing:e[2].state.draggable.transition.settings.easing,whiteToMove:e[2].state.legal.whiteToMove,movable:e[2].state.movable,getGridCoordsFromSquare:e[2].getGridCoordsFromSquare,flipped:e[2].state.board.flipped}}),a.$on("move",e[10]),a.$on("clicked",n),a.$on("startMoving",o),a.$on("moving",e[11]),a.$on("endDragging",e[46]),a.$on("animationEnded",e[13]),{key:s,first:null,c(){r=le(),Me(a.$$.fragment),this.h()},l(i){r=le(),ke(a.$$.fragment,i),this.h()},h(){this.first=r},m(i,l){V(i,r,l),ye(a,i,l),t=!0},p(i,l){e=i;const u={};l[0]&4&&(u.square=e[66].square),l[0]&4&&(u.name=e[66].name),l[0]&4&&(u.easing=e[2].state.draggable.transition.settings.easing),l[0]&4&&(u.whiteToMove=e[2].state.legal.whiteToMove),l[0]&4&&(u.movable=e[2].state.movable),l[0]&4&&(u.getGridCoordsFromSquare=e[2].getGridCoordsFromSquare),l[0]&4&&(u.flipped=e[2].state.board.flipped),a.$set(u)},i(i){t||(U(a.$$.fragment,i),t=!0)},o(i){x(a.$$.fragment,i),t=!1},d(i){i&&y(r),Ae(a,i)}}}function Wt(s){let e,r;return e=new os({props:{ghostPiece:!0,duration:0,square:s[2].state.draggable.ghostPiece.piece.square,name:s[2].state.draggable.ghostPiece.piece.name,movable:!1,getGridCoordsFromSquare:s[2].getGridCoordsFromSquare,flipped:s[2].state.board.flipped}}),{c(){Me(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,t){ye(e,a,t),r=!0},p(a,t){const n={};t[0]&4&&(n.square=a[2].state.draggable.ghostPiece.piece.square),t[0]&4&&(n.name=a[2].state.draggable.ghostPiece.piece.name),t[0]&4&&(n.getGridCoordsFromSquare=a[2].getGridCoordsFromSquare),t[0]&4&&(n.flipped=a[2].state.board.flipped),e.$set(n)},i(a){r||(U(e.$$.fragment,a),r=!0)},o(a){x(e.$$.fragment,a),r=!1},d(a){Ae(e,a)}}}function pa(s){let e=[],r=new Map,a,t,n=[...s[2].state.markedSquares];const o=i=>i[63];for(let i=0;i<n.length;i+=1){let l=Bt(s,n,i),u=o(l);r.set(u,e[i]=Kt(u,l))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();a=le()},l(i){for(let l=0;l<e.length;l+=1)e[l].l(i);a=le()},m(i,l){for(let u=0;u<e.length;u+=1)e[u].m(i,l);V(i,a,l),t=!0},p(i,l){l[0]&5&&(n=[...i[2].state.markedSquares],we(),e=as(e,l,o,1,i,n,r,a.parentNode,is,Kt,a,Bt),_e())},i(i){if(!t){for(let l=0;l<n.length;l+=1)U(e[l]);t=!0}},o(i){for(let l=0;l<e.length;l+=1)x(e[l]);t=!1},d(i){for(let l=0;l<e.length;l+=1)e[l].d(i);i&&y(a)}}}function Kt(s,e){let r,a,t;return a=new xr({props:{theme:e[2].state.board.boardTheme,square:e[63].square,color:e[63].color,getGridCoordsFromSquare:e[2].getGridCoordsFromSquare,flipped:e[2].state.board.flipped}}),a.$on("dragenter",e[47]),{key:s,first:null,c(){r=le(),Me(a.$$.fragment),this.h()},l(n){r=le(),ke(a.$$.fragment,n),this.h()},h(){this.first=r},m(n,o){V(n,r,o),ye(a,n,o),t=!0},p(n,o){e=n;const i={};o[0]&4&&(i.theme=e[2].state.board.boardTheme),o[0]&4&&(i.square=e[63].square),o[0]&4&&(i.color=e[63].color),o[0]&4&&(i.getGridCoordsFromSquare=e[2].getGridCoordsFromSquare),o[0]&4&&(i.flipped=e[2].state.board.flipped),a.$set(i)},i(n){t||(U(a.$$.fragment,n),t=!0)},o(n){x(a.$$.fragment,n),t=!1},d(n){n&&y(r),Ae(a,n)}}}function Gt(s){let e,r;return e=new Qs({props:{theme:s[2].state.board.boardTheme,flipped:s[2].state.board.flipped}}),{c(){Me(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,t){ye(e,a,t),r=!0},p(a,t){const n={};t[0]&4&&(n.theme=a[2].state.board.boardTheme),t[0]&4&&(n.flipped=a[2].state.board.flipped),e.$set(n)},i(a){r||(U(e.$$.fragment,a),r=!0)},o(a){x(e.$$.fragment,a),r=!1},d(a){Ae(e,a)}}}function jt(s){let e,r;return e=new ga({props:{chessboard:s[2],setSize:s[1]}}),{c(){Me(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,t){ye(e,a,t),r=!0},p(a,t){const n={};t[0]&4&&(n.chessboard=a[2]),e.$set(n)},i(a){r||(U(e.$$.fragment,a),r=!0)},o(a){x(e.$$.fragment,a),r=!1},d(a){Ae(e,a)}}}function Xt(s){let e,r,a;function t(o){s[48](o)}let n={flipped:s[2].state.board.flipped,computerArrows:s[7],LshapeKnightMove:s[2].state.drawTools.settings.LshapeKnightMove};return s[4]!==void 0&&(n.svg=s[4]),e=new Zr({props:n}),me.push(()=>et(e,"svg",t)),{c(){Me(e.$$.fragment)},l(o){ke(e.$$.fragment,o)},m(o,i){ye(e,o,i),a=!0},p(o,i){const l={};i[0]&4&&(l.flipped=o[2].state.board.flipped),i[0]&128&&(l.computerArrows=o[7]),i[0]&4&&(l.LshapeKnightMove=o[2].state.drawTools.settings.LshapeKnightMove),!r&&i[0]&16&&(r=!0,l.svg=o[4],tt(()=>r=!1)),e.$set(l)},i(o){a||(U(e.$$.fragment,o),a=!0)},o(o){x(e.$$.fragment,o),a=!1},d(o){Ae(e,o)}}}function Yt(s){let e,r,a={};return e=new ra({props:a}),s[49](e),e.$on("newPromotion",s[12]),{c(){Me(e.$$.fragment)},l(t){ke(e.$$.fragment,t)},m(t,n){ye(e,t,n),r=!0},p(t,n){const o={};e.$set(o)},i(t){r||(U(e.$$.fragment,t),r=!0)},o(t){x(e.$$.fragment,t),r=!1},d(t){s[49](null),Ae(e,t)}}}function Qt(s){let e,r,a={settings:s[2].state.sounds.settings};return e=new ca({props:a}),s[54](e),{c(){Me(e.$$.fragment)},l(t){ke(e.$$.fragment,t)},m(t,n){ye(e,t,n),r=!0},p(t,n){const o={};n[0]&4&&(o.settings=t[2].state.sounds.settings),e.$set(o)},i(t){r||(U(e.$$.fragment,t),r=!0)},o(t){x(e.$$.fragment,t),r=!1},d(t){s[54](null),Ae(e,t)}}}function ba(s){let e,r,a,t,n=s[15](),o,i,l,u,f,g,b,w,z,C,S,O,c=s[2].state.board.startFen&&Ht(s),d=s[2].state.draggable.ghostPiece.enabled&&s[2].state.draggable.ghostPiece.piece!==void 0&&Wt(s),m=n&&pa(s),v=s[2].state.board.notation&&Gt(s),E=s[2].state.resizible.enabled&&jt(s),k=s[2].state.drawTools.enabled&&Xt(s),P=s[2].state.legal.enabled&&Yt(s),M=s[2].state.sounds.enabled&&Qt(s);return{c(){e=R("div"),r=R("div"),c&&c.c(),a=X(),d&&d.c(),t=X(),m&&m.c(),o=X(),v&&v.c(),i=X(),E&&E.c(),l=X(),k&&k.c(),u=X(),P&&P.c(),w=X(),M&&M.c(),z=le(),this.h()},l(h){e=I(h,"DIV",{class:!0,style:!0});var L=N(e);r=I(L,"DIV",{class:!0});var H=N(r);c&&c.l(H),H.forEach(y),a=Y(L),d&&d.l(L),t=Y(L),m&&m.l(L),o=Y(L),v&&v.l(L),i=Y(L),E&&E.l(L),l=Y(L),k&&k.l(L),u=Y(L),P&&P.l(L),L.forEach(y),w=Y(h),M&&M.l(h),z=le(),this.h()},h(){_(r,"class","noselect h-full w-full"),_(e,"class",f="noselect lg:rounded board text-xs"+(s[2].state.board.shadow?" shadow-lg":"")+" sm:text-sm svelte-wzcws1"),J(e,"--boardTheme","url("+(s[2].state.board.boardTheme==="standard"?Nt:Ut)+")"),dt(()=>s[53].call(e))},m(h,L){V(h,e,L),T(e,r),c&&c.m(r,null),T(e,a),d&&d.m(e,null),T(e,t),m&&m.m(e,null),T(e,o),v&&v.m(e,null),T(e,i),E&&E.m(e,null),T(e,l),k&&k.m(e,null),T(e,u),P&&P.m(e,null),s[52](e),b=ys(e,s[53].bind(e)),V(h,w,L),M&&M.m(h,L),V(h,z,L),C=!0,S||(O=[ae(e,"pointerdown",s[9]),ae(e,"contextmenu",gt(s[42])),ae(e,"drag",gt(s[43])),ot(g=Gr.call(null,e,{svg:s[4],flipped:s[2].state.board.flipped,enabled:s[2].state.drawTools.enabled,settings:s[2].state.drawTools.settings})),ae(e,"drawCircle",s[50]),ae(e,"drawArrow",s[51])],S=!0)},p(h,L){h[2].state.board.startFen?c?(c.p(h,L),L[0]&4&&U(c,1)):(c=Ht(h),c.c(),U(c,1),c.m(r,null)):c&&(we(),x(c,1,1,()=>{c=null}),_e()),h[2].state.draggable.ghostPiece.enabled&&h[2].state.draggable.ghostPiece.piece!==void 0?d?(d.p(h,L),L[0]&4&&U(d,1)):(d=Wt(h),d.c(),U(d,1),d.m(e,t)):d&&(we(),x(d,1,1,()=>{d=null}),_e()),n&&m.p(h,L),h[2].state.board.notation?v?(v.p(h,L),L[0]&4&&U(v,1)):(v=Gt(h),v.c(),U(v,1),v.m(e,i)):v&&(we(),x(v,1,1,()=>{v=null}),_e()),h[2].state.resizible.enabled?E?(E.p(h,L),L[0]&4&&U(E,1)):(E=jt(h),E.c(),U(E,1),E.m(e,l)):E&&(we(),x(E,1,1,()=>{E=null}),_e()),h[2].state.drawTools.enabled?k?(k.p(h,L),L[0]&4&&U(k,1)):(k=Xt(h),k.c(),U(k,1),k.m(e,u)):k&&(we(),x(k,1,1,()=>{k=null}),_e()),h[2].state.legal.enabled?P?(P.p(h,L),L[0]&4&&U(P,1)):(P=Yt(h),P.c(),U(P,1),P.m(e,null)):P&&(we(),x(P,1,1,()=>{P=null}),_e()),(!C||L[0]&4&&f!==(f="noselect lg:rounded board text-xs"+(h[2].state.board.shadow?" shadow-lg":"")+" sm:text-sm svelte-wzcws1"))&&_(e,"class",f),(!C||L[0]&4)&&J(e,"--boardTheme","url("+(h[2].state.board.boardTheme==="standard"?Nt:Ut)+")"),g&&ut(g.update)&&L[0]&20&&g.update.call(null,{svg:h[4],flipped:h[2].state.board.flipped,enabled:h[2].state.drawTools.enabled,settings:h[2].state.drawTools.settings}),h[2].state.sounds.enabled?M?(M.p(h,L),L[0]&4&&U(M,1)):(M=Qt(h),M.c(),U(M,1),M.m(z.parentNode,z)):M&&(we(),x(M,1,1,()=>{M=null}),_e())},i(h){C||(U(c),U(d),U(m),U(v),U(E),U(k),U(P),U(M),C=!0)},o(h){x(c),x(d),x(m),x(v),x(E),x(k),x(P),x(M),C=!1},d(h){h&&y(e),c&&c.d(),d&&d.d(),m&&m.d(),v&&v.d(),E&&E.d(),k&&k.d(),P&&P.d(),s[52](null),b(),h&&y(w),M&&M.d(h),h&&y(z),S=!1,$e(O)}}}function ma(s,e,r){let{config:a=void 0}=e;const t=new Vs(a),n=ct();let o,i,l,u,f="";As(()=>{document.documentElement.hasAttribute("style")&&t.state.resizible.enabled&&document.documentElement.removeAttribute("style")});let g=[],b={[j.WHITE]:"",[j.BLACK]:""};const w=p=>{h(A.CHECK),p!==void 0&&pe("check")&&C(b[p],A.CHECK),r(2,t)},z=p=>{t.flipBoard(p),r(2,t)},C=(p,q)=>{t.highlightSquare(p,q),r(2,t)},S=(p,q)=>{p.forEach(Z=>t.highlightSquare(Z,q)),r(2,t)},O=(p,q=A.MOVE)=>{p.length<4||S([p.substring(0,2),p.substring(2,4)],q)},c=(p,q=A.MOVE)=>{const Z=[];p.forEach(ne=>{ne.length<4||(Z.push(ne.substring(0,2)),Z.push(ne.substring(2,4)))}),S(Z,q)},d=p=>{C(p.substring(2,4),A.LEGAL)},m=p=>{h(A.LEGAL),c(p,A.LEGAL)},v=p=>{if(p.substring(0,2)===p.substring(2,4))return;t.state.callbacks.beforeMove&&t.state.callbacks.beforeMove(p),h(A.LEGAL),h(A.SELECT);let q=t.getRookMoveIfIsCastling(p),Z=t.getCapturedPawnSquareIfIsEnPassant(p);if(q&&t.state.legal.enabled&&t.state.legal.settings.allowCastling?(k(q,!1),l.playMoveSound("CASTLE")):Z&&t.state.legal.enabled&&t.state.legal.settings.allowEnPassant?(L(Z),l.playMoveSound("CAPTURE")):t.isCapture(p)?l.playMoveSound("CAPTURE"):l.playMoveSound("MOVE"),t.removeGhostPiece(),r(2,t),k(p),t.state.callbacks.afterMove&&t.state.callbacks.afterMove(p),G(),t.state.legal.enabled&&t.state.legal.preMoves.enabled&&t.state.legal.preMoves.curMove!==""){if(t.state.legal.moves.includes(t.state.legal.preMoves.curMove)||t.state.legal.moves.includes(t.state.legal.preMoves.curMove+"q")){let ne=t.state.legal.preMoves.curMove;r(2,t.state.legal.preMoves.curMove="",t),Ps().then(()=>{v(ne)})}h(A.NEXTMOVE)}},E=p=>{!t.state.legal.enabled||!t.state.legal.preMoves.enabled||!t.state.movable.enabled||(h(A.PREMOVE),h(A.NEXTMOVE),t.state.highlight.enabled&&t.state.highlight.settings.nextMove&&O(p,A.NEXTMOVE),r(2,t.state.legal.preMoves.curMove=p,t),n("nextMove",{move:p}))},k=(p,q=!0)=>{t.makeMove(p),q&&(h(A.MOVE),pe("move")&&O(p)),r(2,t)},P=p=>{u.openPromotionModal(!0),f=p,t.makeMove(p),h(A.LEGAL),h(A.SELECT),h(A.MOVE),O(p)},M=(p,q)=>{t.clearSquare(p,q),r(2,t)},h=p=>{t.clearAllSquares(p),p===A.LEGAL&&t.clearAllSquares(A.LEGALHOVER),p===A.PREMOVE&&t.clearAllSquares(A.PREMOVEHOVER),r(2,t)},L=p=>{t.removePiece(p),r(2,t)},H=()=>{t.clearAllPieces(),r(2,t)},Ee=(p,q)=>{t.setPiece(p,q),r(2,t)},oe=(p,q)=>{var ne;let Z=(ne=t.getPieceFromSquare(p))==null?void 0:ne.name;!Z||(q!==void 0?t.setPiece(p,`${q===j.WHITE?"w":"b"}${Z[1]}`):t.setPiece(p,`${Z[0]==="w"?"b":"w"}${Z[1]}`),r(2,t))},de=p=>p[0]==="w"?j.WHITE:j.BLACK,F=p=>{if(p.button===2){h(),r(2,t.state.selectable.selectedPiece=void 0,t);return}const q=o.getBoundingClientRect(),Z=p.clientX-q.left,ne=p.clientY-q.top,ie=ee(Z,ne),be=t.getPieceFromSquare(ie);if(n("squareClick",{square:ie,piece:be?be.name:void 0}),!t.state.legal.enabled||!t.state.selectable.enabled){r(2,t.state.selectable.selectedPiece=void 0,t);return}if(t.state.selectable.selectedPiece!==void 0&&t.state.selectable.selectedPiece.square!==ie&&!t.state.legal.enabled){v(t.state.selectable.selectedPiece.square+ie),r(2,t.state.selectable.selectedPiece=void 0,t);return}if(t.state.selectable.selectedPiece!==void 0&&t.state.selectable.selectedPiece.square!==ie&&(be===void 0||be.name[0]!==t.state.selectable.selectedPiece.name[0])){t.isPromotion(t.state.selectable.selectedPiece.square+ie)&&t.state.legal.moves.includes(t.state.selectable.selectedPiece.square+ie+"q")?P(t.state.selectable.selectedPiece.square+ie):t.state.legal.moves.includes(t.state.selectable.selectedPiece.square+ie)?v(t.state.selectable.selectedPiece.square+ie):t.state.legal.preMoves.enabled&&t.state.legal.preMoves.moves.includes(t.state.selectable.selectedPiece.square+ie)?E(t.state.selectable.selectedPiece.square+ie):(h(A.LEGAL),h(A.PREMOVE),h(A.SELECT)),r(2,t.state.selectable.selectedPiece=void 0,t);return}if(t.state.selectable.selectedPiece!==be&&be!==void 0&&t.state.movable.enabled&&(t.state.movable.color===j.BOTH||t.state.movable.color===de(be.name))){pe("legal")&&t.state.legal&&Te()&&(h(A.LEGAL),t.state.legal.moves.forEach(Ve=>{Ve.substring(0,2)===ie&&C(Ve.substring(2,4),A.LEGAL)})),pe("preMove")&&t.state.legal.enabled&&t.state.legal.preMoves.enabled&&t.state.movable.color!==j.BOTH&&!Te()&&(h(A.PREMOVE),t.state.highlight.enabled&&t.state.highlight.settings.preMove&&t.state.legal.preMoves.moves.forEach(Ve=>{Ve.substring(0,2)===ie&&C(Ve.substring(2,4),A.PREMOVE)})),pe("select")&&(t.state.legal.enabled&&He(be.name[0])||!t.state.legal.enabled)&&(h(A.SELECT),C(ie,A.SELECT)),(t.state.legal.enabled&&He(be.name[0])||!t.state.legal.enabled)&&r(2,t.state.selectable.selectedPiece=be,t);return}if(t.state.selectable.selectedPiece!==void 0&&t.state.selectable.selectedPiece===be){h(A.LEGAL),h(A.PREMOVE),h(A.SELECT),r(2,t.state.selectable.selectedPiece=void 0,t);return}},K=p=>{const q=p.detail;if(q.substring(0,2)===q.substring(2,4)){C(q.substring(0,2),A.SELECT),r(2,t);return}t.state.legal.enabled?t.isPromotion(q)&&t.state.legal.moves.includes(q+"q")?P(q):t.state.legal.moves.includes(q)?v(q):t.state.legal.preMoves.enabled&&t.state.legal.preMoves.moves.includes(q)&&E(q):v(q),h(A.LEGAL),h(A.PREMOVE),r(2,t)},D=(p,q="MOVE")=>{if(t.updatePiecesWithFen(p),h(),t.removeGhostPiece(),G(),t.state.callbacks.getLastMove){let Z=t.state.callbacks.getLastMove();q!=="MOVE"?l.playMoveSound(q):t.isCastling(Z)?l.playMoveSound("CASTLE"):l.playMoveSound(q),O(Z)}else l.playMoveSound(q);r(2,t),r(2,t)},W=()=>t.getShortFEN(),$=p=>{!p||t.state.board.size===p||(r(2,t.state.board.size=p,t),t.state.resizible.enabled&&document.documentElement.style.setProperty("--boardSize",`${t.state.board.size}px`))},ee=(p,q)=>{const Z=Math.floor(p/t.state.board.size*8),ne=Math.floor(q/t.state.board.size*8),ie=t.state.board.flipped?Math.abs(Z-7):Z,be=t.state.board.flipped?ne:Math.abs(ne-7);return Object.keys(t.letters)[ie]+(be+1).toString()},se=p=>{var q;return(q=t.getPieceFromSquare(p))==null?void 0:q.name},Ie=p=>{r(7,g=p)},ge=()=>{r(7,g.length=0,g)},fe=()=>{G()},Q=p=>{p===!1?r(2,t.state.movable.enabled=!1,t):(r(2,t.state.movable.enabled=!0,t),r(2,t.state.movable.color=p===!0?j.BOTH:p,t))},B=p=>{p!==void 0&&(t.setConfigSettings(p),r(2,t))},G=()=>{!t.state.legal.enabled||(t.state.callbacks.getWhiteToMove&&r(2,t.state.legal.whiteToMove=t.state.callbacks.getWhiteToMove(),t),t.state.callbacks.getPreMoves&&!Te()&&t.state.legal.preMoves.enabled?r(2,t.state.legal.preMoves.moves=t.state.callbacks.getPreMoves(),t):r(2,t.state.legal.preMoves.moves.length=0,t),t.state.callbacks.getLegalMoves&&Te()?r(2,t.state.legal.moves=t.state.callbacks.getLegalMoves(),t):r(2,t.state.legal.moves.length=0,t),Te()&&t.state.selectable.selectedPiece!==void 0&&t.state.legal.preMoves.enabled&&(h(A.PREMOVE),h(A.LEGAL),pe("legal")&&t.state.legal.moves.forEach(p=>{t.state.selectable.selectedPiece&&p.substring(0,2)===t.state.selectable.selectedPiece.square&&C(p.substring(2,4),A.LEGAL)})),t.state.callbacks.getKingLocations&&(b=t.state.callbacks.getKingLocations()),t.state.callbacks.getInCheck&&w(t.state.callbacks.getInCheck()))},he=p=>{let q=o.getBoundingClientRect();t.state.legal.enabled&&(Te()&&t.legalHover(ee(p.detail.x-q.x,p.detail.y-q.y)),!Te()&&t.state.legal.preMoves.enabled&&t.preMoveHover(ee(p.detail.x-q.x,p.detail.y-q.y))),r(2,t)},ue=p=>{const q=t.getPieceFromSquare(f.substring(2,4));if(!q)return;const Z=q.name[0]+p.detail.toUpperCase(),ne=f+p.detail;t.state.callbacks.beforeMove&&t.state.callbacks.beforeMove(ne),t.setPiece(q.square,Z),r(2,t),l.playMoveSound("MOVE"),t.state.callbacks.afterMove&&t.state.callbacks.afterMove(ne),G()},te=p=>{t.setGhostPiece(p),r(2,t)},Ce=()=>{t.removeGhostPiece(),r(2,t)},ce=p=>{t.state.draggable.ghostPiece&&te(p),h(A.SELECT),t.state.selectable.selectedPiece===void 0&&pe("legal")&&t.state.legal.moves.forEach(q=>{q.substring(0,2)===p.square&&C(q.substring(2,4),A.LEGAL)})},pe=p=>t.state.highlight.enabled&&(p===void 0||t.state.highlight.settings[p]),He=p=>t.state.movable.enabled?!!(t.state.legal.enabled&&t.state.legal.preMoves.enabled&&(t.state.movable.color===j.BOTH||t.state.movable.color===de(p))||t.state.movable.color===j.BOTH||t.state.movable.color===de(p)):!1,Te=()=>t.state.movable.enabled&&(t.state.movable.color===j.BOTH||t.state.legal.whiteToMove&&t.state.movable.color===de("w")||!t.state.legal.whiteToMove&&t.state.movable.color===de("b"));function Ne(p){ze.call(this,s,p)}function Ke(p){ze.call(this,s,p)}const Ue=p=>{n("piececlick",{piece:p})},Ge=p=>{n("startDragging",{piece:p}),ce(p)},Be=()=>{n("endDragging"),r(2,t.state.selectable.selectedPiece=void 0,t)},je=p=>{C(p.detail.square,A.LEGALHOVER)};function Xe(p){i=p,r(4,i)}function Ye(p){me[p?"unshift":"push"](()=>{u=p,r(6,u)})}const xe=p=>n("drawCircle",{square:p.detail.square,color:p.detail.color}),gs=p=>n("drawArrow",{move:p.detail.move,color:p.detail.color});function ps(p){me[p?"unshift":"push"](()=>{o=p,r(3,o)})}function bs(){t.state.board.size=this.clientWidth,r(2,t)}function ms(p){me[p?"unshift":"push"](()=>{l=p,r(5,l)})}return s.$$set=p=>{"config"in p&&r(16,a=p.config)},s.$$.update=()=>{s.$$.dirty[0]&4&&$(t.state.board.size-t.state.board.size%8),s.$$.dirty[0]&65536&&B(a),s.$$.dirty[0]&4&&rs(()=>{G(),t.state.callbacks.getLastMove&&O(t.state.callbacks.getLastMove()),t.state.resizible&&$(t.state.board.size-t.state.board.size%8)})},[C,$,t,o,i,l,u,g,n,F,K,he,ue,Ce,ce,pe,a,z,S,O,c,d,m,v,E,k,P,M,h,L,H,Ee,oe,D,W,ee,se,Ie,ge,fe,Q,B,Ne,Ke,Ue,Ge,Be,je,Xe,Ye,xe,gs,ps,bs,ms]}class va extends Pe{constructor(e){super(),Le(this,e,ma,ba,Se,{config:16,flipBoard:17,highlightSquare:0,highlightManySquares:18,highlightMove:19,highlightManyMoves:20,highlightLegalMove:21,highlightLegalMoves:22,makeMove:23,makeNextMove:24,movePiece:25,makeMovePromotion:26,removeSquareHighlight:27,clearAllSquares:28,removePiece:29,removeAllPiece:30,createPiece:31,changeColorOfPiece:32,setFEN:33,getShortFEN:34,setSize:1,getSquareFromCoords:35,getPieceFromSquare:36,setComputerArrows:37,removeComputerArrows:38,updateLegalState:39,setMovableColor:40,setConfigSettings:41},null,[-1,-1,-1])}get flipBoard(){return this.$$.ctx[17]}get highlightSquare(){return this.$$.ctx[0]}get highlightManySquares(){return this.$$.ctx[18]}get highlightMove(){return this.$$.ctx[19]}get highlightManyMoves(){return this.$$.ctx[20]}get highlightLegalMove(){return this.$$.ctx[21]}get highlightLegalMoves(){return this.$$.ctx[22]}get makeMove(){return this.$$.ctx[23]}get makeNextMove(){return this.$$.ctx[24]}get movePiece(){return this.$$.ctx[25]}get makeMovePromotion(){return this.$$.ctx[26]}get removeSquareHighlight(){return this.$$.ctx[27]}get clearAllSquares(){return this.$$.ctx[28]}get removePiece(){return this.$$.ctx[29]}get removeAllPiece(){return this.$$.ctx[30]}get createPiece(){return this.$$.ctx[31]}get changeColorOfPiece(){return this.$$.ctx[32]}get setFEN(){return this.$$.ctx[33]}get getShortFEN(){return this.$$.ctx[34]}get setSize(){return this.$$.ctx[1]}get getSquareFromCoords(){return this.$$.ctx[35]}get getPieceFromSquare(){return this.$$.ctx[36]}get setComputerArrows(){return this.$$.ctx[37]}get removeComputerArrows(){return this.$$.ctx[38]}get updateLegalState(){return this.$$.ctx[39]}get setMovableColor(){return this.$$.ctx[40]}get setConfigSettings(){return this.$$.ctx[41]}}typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var Zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fs={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=function(a){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,o={},i={manual:a.Prism&&a.Prism.manual,disableWorkerMessageHandler:a.Prism&&a.Prism.disableWorkerMessageHandler,util:{encode:function c(d){return d instanceof l?new l(d.type,c(d.content),d.alias):Array.isArray(d)?d.map(c):d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(c){return Object.prototype.toString.call(c).slice(8,-1)},objId:function(c){return c.__id||Object.defineProperty(c,"__id",{value:++n}),c.__id},clone:function c(d,m){m=m||{};var v,E;switch(i.util.type(d)){case"Object":if(E=i.util.objId(d),m[E])return m[E];v={},m[E]=v;for(var k in d)d.hasOwnProperty(k)&&(v[k]=c(d[k],m));return v;case"Array":return E=i.util.objId(d),m[E]?m[E]:(v=[],m[E]=v,d.forEach(function(P,M){v[M]=c(P,m)}),v);default:return d}},getLanguage:function(c){for(;c;){var d=t.exec(c.className);if(d)return d[1].toLowerCase();c=c.parentElement}return"none"},setLanguage:function(c,d){c.className=c.className.replace(RegExp(t,"gi"),""),c.classList.add("language-"+d)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(v){var c=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(v.stack)||[])[1];if(c){var d=document.getElementsByTagName("script");for(var m in d)if(d[m].src==c)return d[m]}return null}},isActive:function(c,d,m){for(var v="no-"+d;c;){var E=c.classList;if(E.contains(d))return!0;if(E.contains(v))return!1;c=c.parentElement}return!!m}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(c,d){var m=i.util.clone(i.languages[c]);for(var v in d)m[v]=d[v];return m},insertBefore:function(c,d,m,v){v=v||i.languages;var E=v[c],k={};for(var P in E)if(E.hasOwnProperty(P)){if(P==d)for(var M in m)m.hasOwnProperty(M)&&(k[M]=m[M]);m.hasOwnProperty(P)||(k[P]=E[P])}var h=v[c];return v[c]=k,i.languages.DFS(i.languages,function(L,H){H===h&&L!=c&&(this[L]=k)}),k},DFS:function c(d,m,v,E){E=E||{};var k=i.util.objId;for(var P in d)if(d.hasOwnProperty(P)){m.call(d,P,d[P],v||P);var M=d[P],h=i.util.type(M);h==="Object"&&!E[k(M)]?(E[k(M)]=!0,c(M,m,null,E)):h==="Array"&&!E[k(M)]&&(E[k(M)]=!0,c(M,m,P,E))}}},plugins:{},highlightAll:function(c,d){i.highlightAllUnder(document,c,d)},highlightAllUnder:function(c,d,m){var v={callback:m,container:c,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",v),v.elements=Array.prototype.slice.apply(v.container.querySelectorAll(v.selector)),i.hooks.run("before-all-elements-highlight",v);for(var E=0,k;k=v.elements[E++];)i.highlightElement(k,d===!0,v.callback)},highlightElement:function(c,d,m){var v=i.util.getLanguage(c),E=i.languages[v];i.util.setLanguage(c,v);var k=c.parentElement;k&&k.nodeName.toLowerCase()==="pre"&&i.util.setLanguage(k,v);var P=c.textContent,M={element:c,language:v,grammar:E,code:P};function h(H){M.highlightedCode=H,i.hooks.run("before-insert",M),M.element.innerHTML=M.highlightedCode,i.hooks.run("after-highlight",M),i.hooks.run("complete",M),m&&m.call(M.element)}if(i.hooks.run("before-sanity-check",M),k=M.element.parentElement,k&&k.nodeName.toLowerCase()==="pre"&&!k.hasAttribute("tabindex")&&k.setAttribute("tabindex","0"),!M.code){i.hooks.run("complete",M),m&&m.call(M.element);return}if(i.hooks.run("before-highlight",M),!M.grammar){h(i.util.encode(M.code));return}if(d&&a.Worker){var L=new Worker(i.filename);L.onmessage=function(H){h(H.data)},L.postMessage(JSON.stringify({language:M.language,code:M.code,immediateClose:!0}))}else h(i.highlight(M.code,M.grammar,M.language))},highlight:function(c,d,m){var v={code:c,grammar:d,language:m};if(i.hooks.run("before-tokenize",v),!v.grammar)throw new Error('The language "'+v.language+'" has no grammar.');return v.tokens=i.tokenize(v.code,v.grammar),i.hooks.run("after-tokenize",v),l.stringify(i.util.encode(v.tokens),v.language)},tokenize:function(c,d){var m=d.rest;if(m){for(var v in m)d[v]=m[v];delete d.rest}var E=new g;return b(E,E.head,c),f(c,E,d,E.head,0),z(E)},hooks:{all:{},add:function(c,d){var m=i.hooks.all;m[c]=m[c]||[],m[c].push(d)},run:function(c,d){var m=i.hooks.all[c];if(!(!m||!m.length))for(var v=0,E;E=m[v++];)E(d)}},Token:l};a.Prism=i;function l(c,d,m,v){this.type=c,this.content=d,this.alias=m,this.length=(v||"").length|0}l.stringify=function c(d,m){if(typeof d=="string")return d;if(Array.isArray(d)){var v="";return d.forEach(function(h){v+=c(h,m)}),v}var E={type:d.type,content:c(d.content,m),tag:"span",classes:["token",d.type],attributes:{},language:m},k=d.alias;k&&(Array.isArray(k)?Array.prototype.push.apply(E.classes,k):E.classes.push(k)),i.hooks.run("wrap",E);var P="";for(var M in E.attributes)P+=" "+M+'="'+(E.attributes[M]||"").replace(/"/g,"&quot;")+'"';return"<"+E.tag+' class="'+E.classes.join(" ")+'"'+P+">"+E.content+"</"+E.tag+">"};function u(c,d,m,v){c.lastIndex=d;var E=c.exec(m);if(E&&v&&E[1]){var k=E[1].length;E.index+=k,E[0]=E[0].slice(k)}return E}function f(c,d,m,v,E,k){for(var P in m)if(!(!m.hasOwnProperty(P)||!m[P])){var M=m[P];M=Array.isArray(M)?M:[M];for(var h=0;h<M.length;++h){if(k&&k.cause==P+","+h)return;var L=M[h],H=L.inside,Ee=!!L.lookbehind,oe=!!L.greedy,de=L.alias;if(oe&&!L.pattern.global){var F=L.pattern.toString().match(/[imsuy]*$/)[0];L.pattern=RegExp(L.pattern.source,F+"g")}for(var K=L.pattern||L,D=v.next,W=E;D!==d.tail&&!(k&&W>=k.reach);W+=D.value.length,D=D.next){var $=D.value;if(d.length>c.length)return;if(!($ instanceof l)){var ee=1,se;if(oe){if(se=u(K,W,c,Ee),!se||se.index>=c.length)break;var Q=se.index,Ie=se.index+se[0].length,ge=W;for(ge+=D.value.length;Q>=ge;)D=D.next,ge+=D.value.length;if(ge-=D.value.length,W=ge,D.value instanceof l)continue;for(var fe=D;fe!==d.tail&&(ge<Ie||typeof fe.value=="string");fe=fe.next)ee++,ge+=fe.value.length;ee--,$=c.slice(W,ge),se.index-=W}else if(se=u(K,0,$,Ee),!se)continue;var Q=se.index,B=se[0],G=$.slice(0,Q),he=$.slice(Q+B.length),ue=W+$.length;k&&ue>k.reach&&(k.reach=ue);var te=D.prev;G&&(te=b(d,te,G),W+=G.length),w(d,te,ee);var Ce=new l(P,H?i.tokenize(B,H):B,de,B);if(D=b(d,te,Ce),he&&b(d,D,he),ee>1){var ce={cause:P+","+h,reach:ue};f(c,d,m,D.prev,W,ce),k&&ce.reach>k.reach&&(k.reach=ce.reach)}}}}}}function g(){var c={value:null,prev:null,next:null},d={value:null,prev:c,next:null};c.next=d,this.head=c,this.tail=d,this.length=0}function b(c,d,m){var v=d.next,E={value:m,prev:d,next:v};return d.next=E,v.prev=E,c.length++,E}function w(c,d,m){for(var v=d.next,E=0;E<m&&v!==c.tail;E++)v=v.next;d.next=v,v.prev=d,c.length-=E}function z(c){for(var d=[],m=c.head.next;m!==c.tail;)d.push(m.value),m=m.next;return d}if(!a.document)return a.addEventListener&&(i.disableWorkerMessageHandler||a.addEventListener("message",function(c){var d=JSON.parse(c.data),m=d.language,v=d.code,E=d.immediateClose;a.postMessage(i.highlight(v,i.languages[m],m)),E&&a.close()},!1)),i;var C=i.util.currentScript();C&&(i.filename=C.src,C.hasAttribute("data-manual")&&(i.manual=!0));function S(){i.manual||i.highlightAll()}if(!i.manual){var O=document.readyState;O==="loading"||O==="interactive"&&C&&C.defer?document.addEventListener("DOMContentLoaded",S):window.requestAnimationFrame?window.requestAnimationFrame(S):window.setTimeout(S,16)}return i}(e);s.exports&&(s.exports=r),typeof Zt<"u"&&(Zt.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(a){a.type==="entity"&&(a.attributes.title=a.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(t,n){var o={};o["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[n]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};i["language-"+n]={pattern:/[\s\S]+/,inside:r.languages[n]};var l={};l[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:i},r.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(a,t){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+a+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:r.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,function(a){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;a.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},a.languages.css.atrule.inside.rest=a.languages.css;var n=a.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var a="Loading\u2026",t=function(C,S){return"\u2716 Error "+C+" while fetching file: "+S},n="\u2716 Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},i="data-src-status",l="loading",u="loaded",f="failed",g="pre[data-src]:not(["+i+'="'+u+'"]):not(['+i+'="'+l+'"])';function b(C,S,O){var c=new XMLHttpRequest;c.open("GET",C,!0),c.onreadystatechange=function(){c.readyState==4&&(c.status<400&&c.responseText?S(c.responseText):c.status>=400?O(t(c.status,c.statusText)):O(n))},c.send(null)}function w(C){var S=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(C||"");if(S){var O=Number(S[1]),c=S[2],d=S[3];return c?d?[O,Number(d)]:[O,void 0]:[O,O]}}r.hooks.add("before-highlightall",function(C){C.selector+=", "+g}),r.hooks.add("before-sanity-check",function(C){var S=C.element;if(S.matches(g)){C.code="",S.setAttribute(i,l);var O=S.appendChild(document.createElement("CODE"));O.textContent=a;var c=S.getAttribute("data-src"),d=C.language;if(d==="none"){var m=(/\.(\w+)$/.exec(c)||[,"none"])[1];d=o[m]||m}r.util.setLanguage(O,d),r.util.setLanguage(S,d);var v=r.plugins.autoloader;v&&v.loadLanguages(d),b(c,function(E){S.setAttribute(i,u);var k=w(S.getAttribute("data-range"));if(k){var P=E.split(/\r\n?|\n/g),M=k[0],h=k[1]==null?P.length:k[1];M<0&&(M+=P.length),M=Math.max(0,Math.min(M-1,P.length)),h<0&&(h+=P.length),h=Math.max(0,Math.min(h,P.length)),E=P.slice(M,h).join(`
`),S.hasAttribute("data-start")||S.setAttribute("data-start",String(M+1))}O.textContent=E,r.highlightElement(O)},function(E){S.setAttribute(i,f),O.textContent=E})}}),r.plugins.fileHighlight={highlight:function(S){for(var O=(S||document).querySelectorAll(g),c=0,d;d=O[c++];)r.highlightElement(d)}};var z=!1;r.fileHighlight=function(){z||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),z=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(fs);const hs=fs.exports,Jt="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+Jt+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+Jt+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",s=>{s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,r){const a={};a["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[r]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;const t={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};t["language-"+r]={pattern:/[\s\S]+/,inside:Prism.languages[r]};const n={};n[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:t},Prism.languages.insertBefore("svelte","cdata",n)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function Ea(s){let e,r;return{c(){e=new Fs(!1),r=le(),this.h()},l(a){e=Os(a,!1),r=le(),this.h()},h(){e.a=r},m(a,t){e.m(s[2],a,t),V(a,r,t)},p(a,t){t&4&&e.p(a[2])},d(a){a&&y(r),a&&e.d()}}}function wa(s){let e;return{c(){e=Fe(s[2])},l(r){e=Oe(r,s[2])},m(r,a){V(r,e,a)},p(r,a){a&4&&lt(e,r[2])},d(r){r&&y(e)}}}function _a(s){let e,r,a,t,n,o,i;const l=s[6].default,u=Ls(l,s,s[5],null);function f(w,z){return w[0]==="none"?wa:Ea}let g=f(s),b=g(s);return{c(){e=R("code"),u&&u.c(),r=X(),a=R("pre"),t=R("code"),b.c(),this.h()},l(w){e=I(w,"CODE",{style:!0});var z=N(e);u&&u.l(z),z.forEach(y),r=Y(w),a=I(w,"PRE",{class:!0,"command-line":!0,"data-output":!0});var C=N(a);t=I(C,"CODE",{class:!0});var S=N(t);b.l(S),S.forEach(y),C.forEach(y),this.h()},h(){J(e,"display","none"),_(t,"class",n="language-"+s[0]),_(a,"class",o="language-"+s[0]),_(a,"command-line",""),_(a,"data-output","2-17")},m(w,z){V(w,e,z),u&&u.m(e,null),s[7](e),V(w,r,z),V(w,a,z),T(a,t),b.m(t,null),i=!0},p(w,[z]){u&&u.p&&(!i||z&32)&&Ss(u,l,w,w[5],i?Ts(l,w[5],z,null):Cs(w[5]),null),g===(g=f(w))&&b?b.p(w,z):(b.d(1),b=g(w),b&&(b.c(),b.m(t,null))),(!i||z&1&&n!==(n="language-"+w[0]))&&_(t,"class",n),(!i||z&1&&o!==(o="language-"+w[0]))&&_(a,"class",o)},i(w){i||(U(u,w),i=!0)},o(w){x(u,w),i=!1},d(w){w&&y(e),u&&u.d(w),s[7](null),w&&y(r),w&&y(a),b.d()}}}const $t=hs;hs.highlightElement;const Ma={transform:s=>s};function ka(s,e,r){let{$$slots:a={},$$scope:t}=e,{language:n="javascript"}=e,{source:o=""}=e,{transform:i=b=>b}=e,l,u;function f(){const b=$t.languages[n];let w=o||l.textContent;w=Ma.transform(w),w=i(w),r(2,u=n==="none"?w:$t.highlight(w,b,n))}function g(b){me[b?"unshift":"push"](()=>{l=b,r(1,l)})}return s.$$set=b=>{r(9,e=Ze(Ze({},e),pt(b))),"language"in b&&r(0,n=b.language),"source"in b&&r(3,o=b.source),"transform"in b&&r(4,i=b.transform),"$$scope"in b&&r(5,t=b.$$scope)},s.$$.update=()=>{e&&(o||l)&&f()},e=pt(e),[n,l,u,o,i,t,a,g]}class ya extends Pe{constructor(e){super(),Le(this,e,ka,_a,Se,{language:0,source:3,transform:4})}}function es(s,e,r){const a=s.slice();return a[8]=e[r],a}function ts(s){let e,r=s[8]+"",a;return{c(){e=R("option"),a=Fe(r),this.h()},l(t){e=I(t,"OPTION",{});var n=N(e);a=Oe(n,r),n.forEach(y),this.h()},h(){e.__value=s[8],e.value=e.__value},m(t,n){V(t,e,n),T(e,a)},p:re,d(t){t&&y(e)}}}function Aa(s){let e,r,a,t,n,o,i,l,u,f,g,b,w,z,C,S,O,c,d,m,v,E,k,P,M,h,L,H,Ee,oe,de,F,K,D,W,$,ee,se,Ie,ge,fe=mt,Q=[];for(let B=0;B<fe.length;B+=1)Q[B]=ts(es(s,fe,B));return D=new va({props:{config:s[0]}}),ee=new ya({props:{source:s[1]}}),{c(){e=R("link"),r=X(),a=R("div"),t=R("div"),n=R("div"),o=R("div"),i=Fe(`board
				`),l=R("div"),u=R("div"),f=R("label"),g=Fe("notation"),b=X(),w=R("select");for(let B=0;B<Q.length;B+=1)Q[B].c();z=X(),C=R("div"),S=R("input"),O=X(),c=R("label"),d=Fe("notation"),m=X(),v=R("div"),E=R("input"),k=X(),P=R("label"),M=Fe("flipped"),h=X(),L=R("div"),H=R("input"),Ee=X(),oe=R("label"),de=Fe("shadow"),F=X(),K=R("div"),Me(D.$$.fragment),W=X(),$=R("div"),Me(ee.$$.fragment),this.h()},l(B){const G=qs('[data-svelte="svelte-tebjht"]',document.head);e=I(G,"LINK",{rel:!0,href:!0}),G.forEach(y),r=Y(B),a=I(B,"DIV",{class:!0});var he=N(a);t=I(he,"DIV",{class:!0});var ue=N(t);n=I(ue,"DIV",{class:!0});var te=N(n);o=I(te,"DIV",{class:!0});var Ce=N(o);i=Oe(Ce,`board
				`),l=I(Ce,"DIV",{class:!0});var ce=N(l);u=I(ce,"DIV",{});var pe=N(u);f=I(pe,"LABEL",{for:!0,class:!0});var He=N(f);g=Oe(He,"notation"),He.forEach(y),b=Y(pe),w=I(pe,"SELECT",{});var Te=N(w);for(let xe=0;xe<Q.length;xe+=1)Q[xe].l(Te);Te.forEach(y),pe.forEach(y),z=Y(ce),C=I(ce,"DIV",{});var Ne=N(C);S=I(Ne,"INPUT",{id:!0,type:!0}),O=Y(Ne),c=I(Ne,"LABEL",{for:!0,class:!0});var Ke=N(c);d=Oe(Ke,"notation"),Ke.forEach(y),Ne.forEach(y),m=Y(ce),v=I(ce,"DIV",{});var Ue=N(v);E=I(Ue,"INPUT",{id:!0,type:!0}),k=Y(Ue),P=I(Ue,"LABEL",{for:!0,class:!0});var Ge=N(P);M=Oe(Ge,"flipped"),Ge.forEach(y),Ue.forEach(y),h=Y(ce),L=I(ce,"DIV",{});var Be=N(L);H=I(Be,"INPUT",{id:!0,type:!0}),Ee=Y(Be),oe=I(Be,"LABEL",{for:!0,class:!0});var je=N(oe);de=Oe(je,"shadow"),je.forEach(y),Be.forEach(y),ce.forEach(y),Ce.forEach(y),te.forEach(y),F=Y(ue),K=I(ue,"DIV",{class:!0});var Xe=N(K);ke(D.$$.fragment,Xe),Xe.forEach(y),W=Y(ue),$=I(ue,"DIV",{class:!0});var Ye=N($);ke(ee.$$.fragment,Ye),Ye.forEach(y),ue.forEach(y),he.forEach(y),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",_(e,"rel","stylesheet"),_(e,"href","prism-one-dark.css"),_(f,"for","boardTheme"),_(f,"class","select-none"),s[0].board.boardTheme===void 0&&dt(()=>s[2].call(w)),_(S,"id","notation"),_(S,"type","checkbox"),_(c,"for","notation"),_(c,"class","select-none"),_(E,"id","flipped"),_(E,"type","checkbox"),_(P,"for","flipped"),_(P,"class","select-none"),_(H,"id","shadow"),_(H,"type","checkbox"),_(oe,"for","shadow"),_(oe,"class","select-none"),_(l,"class","p-2 pl-4"),_(o,"class","bg-slate-900/20 rounded shadow-lg p-2 pl-4 flex flex-col"),_(n,"class","col-start-1 row-span-2 flex flex-col gap-2 w-60 text-gray-300 text-sm"),_(K,"class","col-start-2 w-[var(--boardSize,40rem)]"),_($,"class","col-start-2 row-start-2 shadow-lg rounded"),_(t,"class","col-start-2 gap-10 grid grid-cols-[1fr-auto]"),_(a,"class","mt-10 grid grid-cols-center")},m(B,G){T(document.head,e),V(B,r,G),V(B,a,G),T(a,t),T(t,n),T(n,o),T(o,i),T(o,l),T(l,u),T(u,f),T(f,g),T(u,b),T(u,w);for(let he=0;he<Q.length;he+=1)Q[he].m(w,null);bt(w,s[0].board.boardTheme),T(l,z),T(l,C),T(C,S),S.checked=s[0].board.notation,T(C,O),T(C,c),T(c,d),T(l,m),T(l,v),T(v,E),E.checked=s[0].board.flipped,T(v,k),T(v,P),T(P,M),T(l,h),T(l,L),T(L,H),H.checked=s[0].board.shadow,T(L,Ee),T(L,oe),T(oe,de),T(t,F),T(t,K),ye(D,K,null),T(t,W),T(t,$),ye(ee,$,null),se=!0,Ie||(ge=[ae(w,"change",s[2]),ae(S,"change",s[3]),ae(E,"change",s[4]),ae(H,"change",s[5])],Ie=!0)},p(B,[G]){if(G&0){fe=mt;let te;for(te=0;te<fe.length;te+=1){const Ce=es(B,fe,te);Q[te]?Q[te].p(Ce,G):(Q[te]=ts(Ce),Q[te].c(),Q[te].m(w,null))}for(;te<Q.length;te+=1)Q[te].d(1);Q.length=fe.length}G&1&&bt(w,B[0].board.boardTheme),G&1&&(S.checked=B[0].board.notation),G&1&&(E.checked=B[0].board.flipped),G&1&&(H.checked=B[0].board.shadow);const he={};G&1&&(he.config=B[0]),D.$set(he);const ue={};G&2&&(ue.source=B[1]),ee.$set(ue)},i(B){se||(U(D.$$.fragment,B),U(ee.$$.fragment,B),se=!0)},o(B){x(D.$$.fragment,B),x(ee.$$.fragment,B),se=!1},d(B){y(e),B&&y(r),B&&y(a),We(Q,B),Ae(D),Ae(ee),Ie=!1,$e(ge)}}}function Pa(s,e,r){let a;const t=new ns,n={board:{boardTheme:"standard",piecesTheme:"standard",flipped:!1,notation:!0,shadow:!0,startFen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",startSize:500},movable:j.BOTH,draggable:!0,selectable:!0,legal:!1,callbacks:{},highlight:!0,drawTools:!0,sounds:!0,resizible:!0},o=g=>{const b=JSON.parse(JSON.stringify(g));return b.board!==void 0&&(b.board.boardTheme!==void 0&&b.board.boardTheme===t.board.boardTheme&&delete b.board.boardTheme,b.board.piecesTheme!==void 0&&b.board.piecesTheme===t.board.piecesTheme&&delete b.board.piecesTheme,b.board.flipped!==void 0&&b.board.flipped===t.board.flipped&&delete b.board.flipped,b.board.notation!==void 0&&b.board.notation===t.board.notation&&delete b.board.notation,b.board.shadow!==void 0&&b.board.shadow===t.board.shadow&&delete b.board.shadow,b.board.startFen!==void 0&&b.board.startFen===t.board.startFen&&delete b.board.startFen,Object.keys(b.board).length===0&&delete b.board),("const config: ChessboardConfig = "+JSON.stringify(b,null,4)).replace(/"([^"]+)":/g,"$1:")};function i(){n.board.boardTheme=Rs(this),r(0,n)}function l(){n.board.notation=this.checked,r(0,n)}function u(){n.board.flipped=this.checked,r(0,n)}function f(){n.board.shadow=this.checked,r(0,n)}return s.$$.update=()=>{s.$$.dirty&1&&r(1,a=o(n))},[n,a,i,l,u,f]}class Ca extends Pe{constructor(e){super(),Le(this,e,Pa,Aa,Se,{})}}export{Ca as default};
