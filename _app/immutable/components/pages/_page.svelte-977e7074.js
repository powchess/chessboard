var Tn=Object.defineProperty;var Ln=(t,e,s)=>e in t?Tn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var B=(t,e,s)=>(Ln(t,typeof e!="symbol"?e+"":e,s),s);import{S as Le,i as Oe,s as Ie,C as cn,k as V,a as se,l as K,m as j,h as w,c as ne,p as Ue,n as v,b as Z,G as I,D as dn,E as hn,F as gn,f as x,t as te,I as Ot,J as ds,K as fe,L as On,e as Te,M as In,q as we,r as Ce,u as Dt,N as ut,O as qn,B as Pe,P as at,Q as bn,R as Fn,T as Nn,U as hs,V as ls,W as ce,X as os,Y as rt,Z as wt,H as Rn,o as Bt,_ as Ve,$ as Ne,a0 as Re,g as Be,d as He,a1 as Dn,a2 as Bn,a3 as pe,w as Ee,x as Me,y as ke,a4 as me,z as Se,a5 as Ht,a6 as It,a7 as pn,a8 as gs,a9 as Hn,aa as mn,A as Un,ab as vn,ac as qt,ad as bt,ae as us,af as _n,ag as bs,ah as zn}from"../../chunks/index-e8cb9686.js";import{w as Vn}from"../../chunks/index-2b094520.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},En={exports:{}};(function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var s=function(i){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,n={},l={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function h(p){return p instanceof o?new o(p.type,h(p.content),p.alias):Array.isArray(p)?p.map(h):p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(h){return Object.prototype.toString.call(h).slice(8,-1)},objId:function(h){return h.__id||Object.defineProperty(h,"__id",{value:++r}),h.__id},clone:function h(p,S){S=S||{};var P,T;switch(l.util.type(p)){case"Object":if(T=l.util.objId(p),S[T])return S[T];P={},S[T]=P;for(var H in p)p.hasOwnProperty(H)&&(P[H]=h(p[H],S));return P;case"Array":return T=l.util.objId(p),S[T]?S[T]:(P=[],S[T]=P,p.forEach(function(W,D){P[D]=h(W,S)}),P);default:return p}},getLanguage:function(h){for(;h;){var p=a.exec(h.className);if(p)return p[1].toLowerCase();h=h.parentElement}return"none"},setLanguage:function(h,p){h.className=h.className.replace(RegExp(a,"gi"),""),h.classList.add("language-"+p)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(P){var h=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(P.stack)||[])[1];if(h){var p=document.getElementsByTagName("script");for(var S in p)if(p[S].src==h)return p[S]}return null}},isActive:function(h,p,S){for(var P="no-"+p;h;){var T=h.classList;if(T.contains(p))return!0;if(T.contains(P))return!1;h=h.parentElement}return!!S}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(h,p){var S=l.util.clone(l.languages[h]);for(var P in p)S[P]=p[P];return S},insertBefore:function(h,p,S,P){P=P||l.languages;var T=P[h],H={};for(var W in T)if(T.hasOwnProperty(W)){if(W==p)for(var D in S)S.hasOwnProperty(D)&&(H[D]=S[D]);S.hasOwnProperty(W)||(H[W]=T[W])}var R=P[h];return P[h]=H,l.languages.DFS(l.languages,function(Q,ee){ee===R&&Q!=h&&(this[Q]=H)}),H},DFS:function h(p,S,P,T){T=T||{};var H=l.util.objId;for(var W in p)if(p.hasOwnProperty(W)){S.call(p,W,p[W],P||W);var D=p[W],R=l.util.type(D);R==="Object"&&!T[H(D)]?(T[H(D)]=!0,h(D,S,null,T)):R==="Array"&&!T[H(D)]&&(T[H(D)]=!0,h(D,S,W,T))}}},plugins:{},highlightAll:function(h,p){l.highlightAllUnder(document,h,p)},highlightAllUnder:function(h,p,S){var P={callback:S,container:h,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",P),P.elements=Array.prototype.slice.apply(P.container.querySelectorAll(P.selector)),l.hooks.run("before-all-elements-highlight",P);for(var T=0,H;H=P.elements[T++];)l.highlightElement(H,p===!0,P.callback)},highlightElement:function(h,p,S){var P=l.util.getLanguage(h),T=l.languages[P];l.util.setLanguage(h,P);var H=h.parentElement;H&&H.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(H,P);var W=h.textContent,D={element:h,language:P,grammar:T,code:W};function R(ee){D.highlightedCode=ee,l.hooks.run("before-insert",D),D.element.innerHTML=D.highlightedCode,l.hooks.run("after-highlight",D),l.hooks.run("complete",D),S&&S.call(D.element)}if(l.hooks.run("before-sanity-check",D),H=D.element.parentElement,H&&H.nodeName.toLowerCase()==="pre"&&!H.hasAttribute("tabindex")&&H.setAttribute("tabindex","0"),!D.code){l.hooks.run("complete",D),S&&S.call(D.element);return}if(l.hooks.run("before-highlight",D),!D.grammar){R(l.util.encode(D.code));return}if(p&&i.Worker){var Q=new Worker(l.filename);Q.onmessage=function(ee){R(ee.data)},Q.postMessage(JSON.stringify({language:D.language,code:D.code,immediateClose:!0}))}else R(l.highlight(D.code,D.grammar,D.language))},highlight:function(h,p,S){var P={code:h,grammar:p,language:S};if(l.hooks.run("before-tokenize",P),!P.grammar)throw new Error('The language "'+P.language+'" has no grammar.');return P.tokens=l.tokenize(P.code,P.grammar),l.hooks.run("after-tokenize",P),o.stringify(l.util.encode(P.tokens),P.language)},tokenize:function(h,p){var S=p.rest;if(S){for(var P in S)p[P]=S[P];delete p.rest}var T=new f;return g(T,T.head,h),c(h,T,p,T.head,0),O(T)},hooks:{all:{},add:function(h,p){var S=l.hooks.all;S[h]=S[h]||[],S[h].push(p)},run:function(h,p){var S=l.hooks.all[h];if(!(!S||!S.length))for(var P=0,T;T=S[P++];)T(p)}},Token:o};i.Prism=l;function o(h,p,S,P){this.type=h,this.content=p,this.alias=S,this.length=(P||"").length|0}o.stringify=function h(p,S){if(typeof p=="string")return p;if(Array.isArray(p)){var P="";return p.forEach(function(R){P+=h(R,S)}),P}var T={type:p.type,content:h(p.content,S),tag:"span",classes:["token",p.type],attributes:{},language:S},H=p.alias;H&&(Array.isArray(H)?Array.prototype.push.apply(T.classes,H):T.classes.push(H)),l.hooks.run("wrap",T);var W="";for(var D in T.attributes)W+=" "+D+'="'+(T.attributes[D]||"").replace(/"/g,"&quot;")+'"';return"<"+T.tag+' class="'+T.classes.join(" ")+'"'+W+">"+T.content+"</"+T.tag+">"};function u(h,p,S,P){h.lastIndex=p;var T=h.exec(S);if(T&&P&&T[1]){var H=T[1].length;T.index+=H,T[0]=T[0].slice(H)}return T}function c(h,p,S,P,T,H){for(var W in S)if(!(!S.hasOwnProperty(W)||!S[W])){var D=S[W];D=Array.isArray(D)?D:[D];for(var R=0;R<D.length;++R){if(H&&H.cause==W+","+R)return;var Q=D[R],ee=Q.inside,ve=!!Q.lookbehind,ie=!!Q.greedy,b=Q.alias;if(ie&&!Q.pattern.global){var k=Q.pattern.toString().match(/[imsuy]*$/)[0];Q.pattern=RegExp(Q.pattern.source,k+"g")}for(var _=Q.pattern||Q,E=P.next,A=T;E!==p.tail&&!(H&&A>=H.reach);A+=E.value.length,E=E.next){var N=E.value;if(p.length>h.length)return;if(!(N instanceof o)){var d=1,F;if(ie){if(F=u(_,A,h,ve),!F||F.index>=h.length)break;var G=F.index,Y=F.index+F[0].length,q=A;for(q+=E.value.length;G>=q;)E=E.next,q+=E.value.length;if(q-=E.value.length,A=q,E.value instanceof o)continue;for(var J=E;J!==p.tail&&(q<Y||typeof J.value=="string");J=J.next)d++,q+=J.value.length;d--,N=h.slice(A,q),F.index-=A}else if(F=u(_,0,N,ve),!F)continue;var G=F.index,le=F[0],X=N.slice(0,G),ae=N.slice(G+le.length),ue=A+N.length;H&&ue>H.reach&&(H.reach=ue);var ge=E.prev;X&&(ge=g(p,ge,X),A+=X.length),C(p,ge,d);var qe=new o(W,ee?l.tokenize(le,ee):le,b,le);if(E=g(p,ge,qe),ae&&g(p,E,ae),d>1){var oe={cause:W+","+R,reach:ue};c(h,p,S,E.prev,A,oe),H&&oe.reach>H.reach&&(H.reach=oe.reach)}}}}}}function f(){var h={value:null,prev:null,next:null},p={value:null,prev:h,next:null};h.next=p,this.head=h,this.tail=p,this.length=0}function g(h,p,S){var P=p.next,T={value:S,prev:p,next:P};return p.next=T,P.prev=T,h.length++,T}function C(h,p,S){for(var P=p.next,T=0;T<S&&P!==h.tail;T++)P=P.next;p.next=P,P.prev=p,h.length-=T}function O(h){for(var p=[],S=h.head.next;S!==h.tail;)p.push(S.value),S=S.next;return p}if(!i.document)return i.addEventListener&&(l.disableWorkerMessageHandler||i.addEventListener("message",function(h){var p=JSON.parse(h.data),S=p.language,P=p.code,T=p.immediateClose;i.postMessage(l.highlight(P,l.languages[S],S)),T&&i.close()},!1)),l;var L=l.util.currentScript();L&&(l.filename=L.src,L.hasAttribute("data-manual")&&(l.manual=!0));function M(){l.manual||l.highlightAll()}if(!l.manual){var y=document.readyState;y==="loading"||y==="interactive"&&L&&L.defer?document.addEventListener("DOMContentLoaded",M):window.requestAnimationFrame?window.requestAnimationFrame(M):window.setTimeout(M,16)}return l}(e);t.exports&&(t.exports=s),typeof ps<"u"&&(ps.Prism=s),s.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},s.languages.markup.tag.inside["attr-value"].inside.entity=s.languages.markup.entity,s.languages.markup.doctype.inside["internal-subset"].inside=s.languages.markup,s.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(s.languages.markup.tag,"addInlined",{value:function(a,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:s.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};l["language-"+r]={pattern:/[\s\S]+/,inside:s.languages[r]};var o={};o[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:l},s.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(s.languages.markup.tag,"addAttribute",{value:function(i,a){s.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:s.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),s.languages.html=s.languages.markup,s.languages.mathml=s.languages.markup,s.languages.svg=s.languages.markup,s.languages.xml=s.languages.extend("markup",{}),s.languages.ssml=s.languages.xml,s.languages.atom=s.languages.xml,s.languages.rss=s.languages.xml,function(i){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var r=i.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(s),s.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},s.languages.javascript=s.languages.extend("clike",{"class-name":[s.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),s.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,s.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:s.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:s.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:s.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:s.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:s.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),s.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:s.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),s.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),s.languages.markup&&(s.languages.markup.tag.addInlined("script","javascript"),s.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),s.languages.js=s.languages.javascript,function(){if(typeof s>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading\u2026",a=function(L,M){return"\u2716 Error "+L+" while fetching file: "+M},r="\u2716 Error: File does not exist or is empty",n={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",c="failed",f="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function g(L,M,y){var h=new XMLHttpRequest;h.open("GET",L,!0),h.onreadystatechange=function(){h.readyState==4&&(h.status<400&&h.responseText?M(h.responseText):h.status>=400?y(a(h.status,h.statusText)):y(r))},h.send(null)}function C(L){var M=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(L||"");if(M){var y=Number(M[1]),h=M[2],p=M[3];return h?p?[y,Number(p)]:[y,void 0]:[y,y]}}s.hooks.add("before-highlightall",function(L){L.selector+=", "+f}),s.hooks.add("before-sanity-check",function(L){var M=L.element;if(M.matches(f)){L.code="",M.setAttribute(l,o);var y=M.appendChild(document.createElement("CODE"));y.textContent=i;var h=M.getAttribute("data-src"),p=L.language;if(p==="none"){var S=(/\.(\w+)$/.exec(h)||[,"none"])[1];p=n[S]||S}s.util.setLanguage(y,p),s.util.setLanguage(M,p);var P=s.plugins.autoloader;P&&P.loadLanguages(p),g(h,function(T){M.setAttribute(l,u);var H=C(M.getAttribute("data-range"));if(H){var W=T.split(/\r\n?|\n/g),D=H[0],R=H[1]==null?W.length:H[1];D<0&&(D+=W.length),D=Math.max(0,Math.min(D-1,W.length)),R<0&&(R+=W.length),R=Math.max(0,Math.min(R,W.length)),T=W.slice(D,R).join(`
`),M.hasAttribute("data-start")||M.setAttribute("data-start",String(D+1))}y.textContent=T,s.highlightElement(y)},function(T){M.setAttribute(l,c),y.textContent=T})}}),s.plugins.fileHighlight={highlight:function(M){for(var y=(M||document).querySelectorAll(f),h=0,p;p=y[h++];)s.highlightElement(p)}};var O=!1;s.fileHighlight=function(){O||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),O=!0),s.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(En);const Mn=En.exports,ms="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+ms+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+ms+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",t=>{t.type==="entity"&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,s){const i={};i["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[s]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;const a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};a["language-"+s]={pattern:/[\s\S]+/,inside:Prism.languages[s]};const r={};r[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:a},Prism.languages.insertBefore("svelte","cdata",r)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function Kn(t){let e,s;return{c(){e=new On(!1),s=Te(),this.h()},l(i){e=In(i,!1),s=Te(),this.h()},h(){e.a=s},m(i,a){e.m(t[2],i,a),Z(i,s,a)},p(i,a){a&4&&e.p(i[2])},d(i){i&&w(s),i&&e.d()}}}function Wn(t){let e;return{c(){e=we(t[2])},l(s){e=Ce(s,t[2])},m(s,i){Z(s,e,i)},p(s,i){i&4&&Dt(e,s[2])},d(s){s&&w(e)}}}function jn(t){let e,s,i,a,r,n,l;const o=t[6].default,u=cn(o,t,t[5],null);function c(C,O){return C[0]==="none"?Wn:Kn}let f=c(t),g=f(t);return{c(){e=V("code"),u&&u.c(),s=se(),i=V("pre"),a=V("code"),g.c(),this.h()},l(C){e=K(C,"CODE",{style:!0});var O=j(e);u&&u.l(O),O.forEach(w),s=ne(C),i=K(C,"PRE",{class:!0,"command-line":!0,"data-output":!0});var L=j(i);a=K(L,"CODE",{class:!0});var M=j(a);g.l(M),M.forEach(w),L.forEach(w),this.h()},h(){Ue(e,"display","none"),v(a,"class",r="language-"+t[0]),v(i,"class",n="language-"+t[0]),v(i,"command-line",""),v(i,"data-output","2-17")},m(C,O){Z(C,e,O),u&&u.m(e,null),t[7](e),Z(C,s,O),Z(C,i,O),I(i,a),g.m(a,null),l=!0},p(C,[O]){u&&u.p&&(!l||O&32)&&dn(u,o,C,C[5],l?gn(o,C[5],O,null):hn(C[5]),null),f===(f=c(C))&&g?g.p(C,O):(g.d(1),g=f(C),g&&(g.c(),g.m(a,null))),(!l||O&1&&r!==(r="language-"+C[0]))&&v(a,"class",r),(!l||O&1&&n!==(n="language-"+C[0]))&&v(i,"class",n)},i(C){l||(x(u,C),l=!0)},o(C){te(u,C),l=!1},d(C){C&&w(e),u&&u.d(C),t[7](null),C&&w(s),C&&w(i),g.d()}}}const vs=Mn;Mn.highlightElement;const Gn={transform:t=>t};function Qn(t,e,s){let{$$slots:i={},$$scope:a}=e,{language:r="javascript"}=e,{source:n=""}=e,{transform:l=g=>g}=e,o,u;function c(){const g=vs.languages[r];let C=n||o.textContent;C=Gn.transform(C),C=l(C),s(2,u=r==="none"?C:vs.highlight(C,g,r))}function f(g){fe[g?"unshift":"push"](()=>{o=g,s(1,o)})}return t.$$set=g=>{s(9,e=Ot(Ot({},e),ds(g))),"language"in g&&s(0,r=g.language),"source"in g&&s(3,n=g.source),"transform"in g&&s(4,l=g.transform),"$$scope"in g&&s(5,a=g.$$scope)},t.$$.update=()=>{e&&(n||o)&&c()},e=ds(e),[r,o,u,n,l,a,i,f]}class Xn extends Le{constructor(e){super(),Oe(this,e,Qn,jn,Ie,{language:0,source:3,transform:4})}}var kn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Chess=t.validateFen=t.SQUARES=t.DEFAULT_POSITION=t.KING=t.QUEEN=t.ROOK=t.BISHOP=t.KNIGHT=t.PAWN=t.BLACK=t.WHITE=void 0,t.WHITE="w",t.BLACK="b",t.PAWN="p",t.KNIGHT="n",t.BISHOP="b",t.ROOK="r",t.QUEEN="q",t.KING="k",t.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";const e=-1,s={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"};t.SQUARES=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"];const i={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},a={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},r={b:[16,32,17,15],w:[-16,-32,-17,-15]},n={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},l=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],o=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],u={p:1,n:2,b:4,r:8,q:16,k:32},c="pnbrqkPNBRQK",f=[t.KNIGHT,t.BISHOP,t.ROOK,t.QUEEN],g=7,C=6,O=1,L=0,M={w:[{square:a.a1,flag:i.QSIDE_CASTLE},{square:a.h1,flag:i.KSIDE_CASTLE}],b:[{square:a.a8,flag:i.QSIDE_CASTLE},{square:a.h8,flag:i.KSIDE_CASTLE}]},y={b:O,w:C},h=["1-0","0-1","1/2-1/2","*"];function p(ie){return ie>>4}function S(ie){return ie&15}function P(ie){return"0123456789".indexOf(ie)!==-1}function T(ie){const b=S(ie),k=p(ie);return"abcdefgh".substring(b,b+1)+"87654321".substring(k,k+1)}function H(ie){return ie===t.WHITE?t.BLACK:t.WHITE}function W(ie){const b=[];b[0]="No errors.",b[1]="FEN string must contain six space-delimited fields.",b[2]="6th field (move number) must be a positive integer.",b[3]="5th field (half move counter) must be a non-negative integer.",b[4]="4th field (en-passant square) is invalid.",b[5]="3rd field (castling availability) is invalid.",b[6]="2nd field (side to move) is invalid.",b[7]="1st field (piece positions) does not contain 8 '/'-delimited rows.",b[8]="1st field (piece positions) is invalid [consecutive numbers].",b[9]="1st field (piece positions) is invalid [invalid piece].",b[10]="1st field (piece positions) is invalid [row too large].",b[11]="Illegal en-passant square";const k=ie.split(/\s+/);if(k.length!==6)return{valid:!1,errorNumber:1,error:b[1]};const _=parseInt(k[5],10);if(isNaN(_)||_<=0)return{valid:!1,errorNumber:2,error:b[2]};const E=parseInt(k[4],10);if(isNaN(E)||E<0)return{valid:!1,errorNumber:3,error:b[3]};if(!/^(-|[abcdefgh][36])$/.test(k[3]))return{valid:!1,errorNumber:4,error:b[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(k[2]))return{valid:!1,errorNumber:5,error:b[5]};if(!/^(w|b)$/.test(k[1]))return{valid:!1,errorNumber:6,error:b[6]};const A=k[0].split("/");if(A.length!==8)return{valid:!1,errorNumber:7,error:b[7]};for(let N=0;N<A.length;N++){let d=0,F=!1;for(let Y=0;Y<A[N].length;Y++)if(P(A[N][Y])){if(F)return{valid:!1,errorNumber:8,error:b[8]};d+=parseInt(A[N][Y],10),F=!0}else{if(!/^[prnbqkPRNBQK]$/.test(A[N][Y]))return{valid:!1,errorNumber:9,error:b[9]};d+=1,F=!1}if(d!==8)return{valid:!1,errorNumber:10,error:b[10]}}return k[3][1]=="3"&&k[1]=="w"||k[3][1]=="6"&&k[1]=="b"?{valid:!1,errorNumber:11,error:b[11]}:{valid:!0,errorNumber:0,error:b[0]}}t.validateFen=W;function D(ie,b){const k=ie.from,_=ie.to,E=ie.piece;let A=0,N=0,d=0;for(let F=0,Y=b.length;F<Y;F++){const q=b[F].from,J=b[F].to,G=b[F].piece;E===G&&k!==q&&_===J&&(A++,p(k)===p(q)&&N++,S(k)===S(q)&&d++)}return A>0?N>0&&d>0?T(k):d>0?T(k).charAt(1):T(k).charAt(0):""}function R(ie,b,k,_,E,A=void 0,N=i.NORMAL){const d=p(_);if(E===t.PAWN&&(d===g||d===L))for(let F=0;F<f.length;F++){const Y=f[F];ie.push({color:b,from:k,to:_,piece:E,captured:A,promotion:Y,flags:N|i.PROMOTION})}else ie.push({color:b,from:k,to:_,piece:E,captured:A,promotion:void 0,flags:N})}function Q(ie){let b=ie.charAt(0);return b>="a"&&b<="h"?ie.match(/[a-h]\d.*[a-h]\d/)?void 0:t.PAWN:(b=b.toLowerCase(),b==="o"?t.KING:b)}function ee(ie){return ie.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class ve{constructor(b=t.DEFAULT_POSITION){this._board=new Array(128),this._turn=t.WHITE,this._header={},this._kings={w:e,b:e},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(b)}clear(b=!1){this._board=new Array(128),this._kings={w:e,b:e},this._turn=t.WHITE,this._castling={w:0,b:0},this._epSquare=e,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=b?this._header:{},this._updateSetup(this.fen())}load(b,k=!1){const _=b.split(/\s+/),E=_[0];let A=0;if(!W(b).valid)return!1;this.clear(k);for(let N=0;N<E.length;N++){const d=E.charAt(N);if(d==="/")A+=8;else if(P(d))A+=parseInt(d,10);else{const F=d<"a"?t.WHITE:t.BLACK;this.put({type:d.toLowerCase(),color:F},T(A)),A++}}return this._turn=_[1],_[2].indexOf("K")>-1&&(this._castling.w|=i.KSIDE_CASTLE),_[2].indexOf("Q")>-1&&(this._castling.w|=i.QSIDE_CASTLE),_[2].indexOf("k")>-1&&(this._castling.b|=i.KSIDE_CASTLE),_[2].indexOf("q")>-1&&(this._castling.b|=i.QSIDE_CASTLE),this._epSquare=_[3]==="-"?e:a[_[3]],this._halfMoves=parseInt(_[4],10),this._moveNumber=parseInt(_[5],10),this._updateSetup(this.fen()),!0}fen(){let b=0,k="";for(let A=a.a8;A<=a.h1;A++){if(this._board[A]){b>0&&(k+=b,b=0);const{color:N,type:d}=this._board[A];k+=N===t.WHITE?d.toUpperCase():d.toLowerCase()}else b++;A+1&136&&(b>0&&(k+=b),A!==a.h1&&(k+="/"),b=0,A+=8)}let _="";this._castling[t.WHITE]&i.KSIDE_CASTLE&&(_+="K"),this._castling[t.WHITE]&i.QSIDE_CASTLE&&(_+="Q"),this._castling[t.BLACK]&i.KSIDE_CASTLE&&(_+="k"),this._castling[t.BLACK]&i.QSIDE_CASTLE&&(_+="q"),_=_||"-";const E=this._epSquare===e?"-":T(this._epSquare);return[k,this._turn,_,E,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(b){this._history.length>0||(b!==t.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=b):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(t.DEFAULT_POSITION)}get(b){return this._board[a[b]]||!1}put({type:b,color:k},_){if(c.indexOf(b.toLowerCase())===-1||!(_ in a))return!1;const E=a[_];return b==t.KING&&!(this._kings[k]==e||this._kings[k]==E)?!1:(this._board[E]={type:b,color:k},b===t.KING&&(this._kings[k]=E),this._updateSetup(this.fen()),!0)}remove(b){const k=this.get(b);return delete this._board[a[b]],k&&k.type===t.KING&&(this._kings[k.color]=e),this._updateSetup(this.fen()),k}_attacked(b,k){for(let _=a.a8;_<=a.h1;_++){if(_&136){_+=7;continue}if(this._board[_]===void 0||this._board[_].color!==b)continue;const E=this._board[_],A=_-k,N=A+119;if(l[N]&u[E.type]){if(E.type===t.PAWN){if(A>0){if(E.color===t.WHITE)return!0}else if(E.color===t.BLACK)return!0;continue}if(E.type==="n"||E.type==="k")return!0;const d=o[N];let F=_+d,Y=!1;for(;F!==k;){if(this._board[F]!=null){Y=!0;break}F+=d}if(!Y)return!0}}return!1}_isKingAttacked(b){return this._attacked(H(b),this._kings[b])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const b={b:0,n:0,r:0,q:0,k:0,p:0},k=[];let _=0,E=0;for(let A=a.a8;A<=a.h1;A++){if(E=(E+1)%2,A&136){A+=7;continue}const N=this._board[A];N&&(b[N.type]=N.type in b?b[N.type]+1:1,N.type===t.BISHOP&&k.push(E),_++)}if(_===2)return!0;if(_===3&&(b[t.BISHOP]===1||b[t.KNIGHT]===1))return!0;if(_===b[t.BISHOP]+2){let A=0;const N=k.length;for(let d=0;d<N;d++)A+=k[d];if(A===0||A===N)return!0}return!1}isThreefoldRepetition(){const b=[],k={};let _=!1;for(;;){const E=this._undoMove();if(!E)break;b.push(E)}for(;;){const E=this.fen().split(" ").slice(0,4).join(" ");k[E]=E in k?k[E]+1:1,k[E]>=3&&(_=!0);const A=b.pop();if(A)this._makeMove(A);else break}return _}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:b=!1,square:k=void 0}={}){const _=this._moves({square:k});return b?_.map(E=>this._makePretty(E)):_.map(E=>this._moveToSan(E,_))}_moves({legal:b=!0,piece:k=void 0,square:_=void 0}={}){var E;const A=_?_.toLowerCase():void 0,N=k==null?void 0:k.toLowerCase(),d=[],F=this._turn,Y=H(F);let q=a.a8,J=a.h1,G=!1;if(A)if(A in a)q=J=a[A],G=!0;else return[];for(let X=q;X<=J;X++){if(X&136){X+=7;continue}if(!this._board[X]||this._board[X].color===Y)continue;const{type:ae}=this._board[X];let ue;if(ae===t.PAWN){if(N&&N!==ae)continue;ue=X+r[F][0],this._board[ue]||(R(d,F,X,ue,t.PAWN),ue=X+r[F][1],y[F]===p(X)&&!this._board[ue]&&R(d,F,X,ue,t.PAWN,void 0,i.BIG_PAWN));for(let ge=2;ge<4;ge++)ue=X+r[F][ge],!(ue&136)&&(((E=this._board[ue])===null||E===void 0?void 0:E.color)===Y?R(d,F,X,ue,t.PAWN,this._board[ue].type,i.CAPTURE):ue===this._epSquare&&R(d,F,X,ue,t.PAWN,t.PAWN,i.EP_CAPTURE))}else{if(N&&N!==ae)continue;for(let ge=0,qe=n[ae].length;ge<qe;ge++){const oe=n[ae][ge];for(ue=X;ue+=oe,!(ue&136);){if(!this._board[ue])R(d,F,X,ue,ae);else{if(this._board[ue].color===F)break;R(d,F,X,ue,ae,this._board[ue].type,i.CAPTURE);break}if(ae===t.KNIGHT||ae===t.KING)break}}}}if((N===void 0||N===t.KING)&&(!G||J===this._kings[F])){if(this._castling[F]&i.KSIDE_CASTLE){const X=this._kings[F],ae=X+2;!this._board[X+1]&&!this._board[ae]&&!this._attacked(Y,this._kings[F])&&!this._attacked(Y,X+1)&&!this._attacked(Y,ae)&&R(d,F,this._kings[F],ae,t.KING,void 0,i.KSIDE_CASTLE)}if(this._castling[F]&i.QSIDE_CASTLE){const X=this._kings[F],ae=X-2;!this._board[X-1]&&!this._board[X-2]&&!this._board[X-3]&&!this._attacked(Y,this._kings[F])&&!this._attacked(Y,X-1)&&!this._attacked(Y,ae)&&R(d,F,this._kings[F],ae,t.KING,void 0,i.QSIDE_CASTLE)}}if(!b)return d;const le=[];for(let X=0,ae=d.length;X<ae;X++)this._makeMove(d[X]),this._isKingAttacked(F)||le.push(d[X]),this._undoMove();return le}move(b,{sloppy:k=!1}={}){let _=null;if(typeof b=="string")_=this._moveFromSan(b,k);else if(typeof b=="object"){const A=this._moves();for(let N=0,d=A.length;N<d;N++)if(b.from===T(A[N].from)&&b.to===T(A[N].to)&&(!("promotion"in A[N])||b.promotion===A[N].promotion)){_=A[N];break}}if(!_)return null;const E=this._makePretty(_);return this._makeMove(_),E}_push(b){this._history.push({move:b,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(b){const k=this._turn,_=H(k);if(this._push(b),this._board[b.to]=this._board[b.from],delete this._board[b.from],b.flags&i.EP_CAPTURE&&(this._turn===t.BLACK?delete this._board[b.to-16]:delete this._board[b.to+16]),b.promotion&&(this._board[b.to]={type:b.promotion,color:k}),this._board[b.to].type===t.KING){if(this._kings[k]=b.to,b.flags&i.KSIDE_CASTLE){const E=b.to-1,A=b.to+1;this._board[E]=this._board[A],delete this._board[A]}else if(b.flags&i.QSIDE_CASTLE){const E=b.to+1,A=b.to-2;this._board[E]=this._board[A],delete this._board[A]}this._castling[k]=0}if(this._castling[k]){for(let E=0,A=M[k].length;E<A;E++)if(b.from===M[k][E].square&&this._castling[k]&M[k][E].flag){this._castling[k]^=M[k][E].flag;break}}if(this._castling[_]){for(let E=0,A=M[_].length;E<A;E++)if(b.to===M[_][E].square&&this._castling[_]&M[_][E].flag){this._castling[_]^=M[_][E].flag;break}}b.flags&i.BIG_PAWN?k===t.BLACK?this._epSquare=b.to-16:this._epSquare=b.to+16:this._epSquare=e,b.piece===t.PAWN?this._halfMoves=0:b.flags&(i.CAPTURE|i.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,k===t.BLACK&&this._moveNumber++,this._turn=_}undo(){const b=this._undoMove();return b?this._makePretty(b):null}_undoMove(){const b=this._history.pop();if(b===void 0)return null;const k=b.move;this._kings=b.kings,this._turn=b.turn,this._castling=b.castling,this._epSquare=b.epSquare,this._halfMoves=b.halfMoves,this._moveNumber=b.moveNumber;const _=this._turn,E=H(_);if(this._board[k.from]=this._board[k.to],this._board[k.from].type=k.piece,delete this._board[k.to],k.captured)if(k.flags&i.EP_CAPTURE){let A;_===t.BLACK?A=k.to-16:A=k.to+16,this._board[A]={type:t.PAWN,color:E}}else this._board[k.to]={type:k.captured,color:E};if(k.flags&(i.KSIDE_CASTLE|i.QSIDE_CASTLE)){let A,N;k.flags&i.KSIDE_CASTLE?(A=k.to+1,N=k.to-1):(A=k.to-2,N=k.to+1),this._board[A]=this._board[N],delete this._board[N]}return k}pgn({newline:b=`
`,maxWidth:k=0}={}){const _=[];let E=!1;for(const G in this._header)_.push("["+G+' "'+this._header[G]+'"]'+b),E=!0;E&&this._history.length&&_.push(b);const A=G=>{const le=this._comments[this.fen()];if(typeof le<"u"){const X=G.length>0?" ":"";G=`${G}${X}{${le}}`}return G},N=[];for(;this._history.length>0;)N.push(this._undoMove());const d=[];let F="";for(N.length===0&&d.push(A(""));N.length>0;){F=A(F);const G=N.pop();if(!G)break;if(!this._history.length&&G.color==="b"){const le=`${this._moveNumber}. ...`;F=F?`${F} ${le}`:le}else G.color==="w"&&(F.length&&d.push(F),F=this._moveNumber+".");F=F+" "+this._moveToSan(G,this._moves({legal:!0})),this._makeMove(G)}if(F.length&&d.push(A(F)),typeof this._header.Result<"u"&&d.push(this._header.Result),k===0)return _.join("")+d.join(" ");const Y=function(){return _.length>0&&_[_.length-1]===" "?(_.pop(),!0):!1},q=function(G,le){for(const X of le.split(" "))if(!!X){if(G+X.length>k){for(;Y();)G--;_.push(b),G=0}_.push(X),G+=X.length,_.push(" "),G++}return Y()&&G--,G};let J=0;for(let G=0;G<d.length;G++){if(J+d[G].length>k&&d[G].includes("{")){J=q(J,d[G]);continue}J+d[G].length>k&&G!==0?(_[_.length-1]===" "&&_.pop(),_.push(b),J=0):G!==0&&(_.push(" "),J++),_.push(d[G]),J+=d[G].length}return _.join("")}header(...b){for(let k=0;k<b.length;k+=2)typeof b[k]=="string"&&typeof b[k+1]=="string"&&(this._header[b[k]]=b[k+1]);return this._header}loadPgn(b,{sloppy:k=!1,newlineChar:_=`\r?
`}={}){function E(oe){return oe.replace(/\\/g,"\\")}function A(oe){const _e={},Fe=oe.split(new RegExp(E(_)));let Xe="",Ye="";for(let Ge=0;Ge<Fe.length;Ge++){const We=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;Xe=Fe[Ge].replace(We,"$1"),Ye=Fe[Ge].replace(We,"$2"),Xe.trim().length>0&&(_e[Xe]=Ye)}return _e}b=b.trim();const d=new RegExp("^(\\[((?:"+E(_)+")|.)*\\])(?:\\s*"+E(_)+"){2}").exec(b),F=d&&d.length>=2?d[1]:"";this.reset();const Y=A(F);let q="";for(const oe in Y)oe.toLowerCase()==="fen"&&(q=Y[oe]),this.header(oe,Y[oe]);if(k){if(q&&!this.load(q,!0))return!1}else if(Y.SetUp==="1"&&!("FEN"in Y&&this.load(Y.FEN,!0)))return!1;function J(oe){return Array.from(oe).map(function(_e){return _e.charCodeAt(0)<128?_e.charCodeAt(0).toString(16):encodeURIComponent(_e).replace(/%/g,"").toLowerCase()}).join("")}function G(oe){return oe.length==0?"":decodeURIComponent("%"+(oe.match(/.{1,2}/g)||[]).join("%"))}const le=function(oe){return oe=oe.replace(new RegExp(E(_),"g")," "),`{${J(oe.slice(1,oe.length-1))}}`},X=function(oe){if(oe.startsWith("{")&&oe.endsWith("}"))return G(oe.slice(1,oe.length-1))};let ae=b.replace(F,"").replace(new RegExp(`({[^}]*})+?|;([^${E(_)}]*)`,"g"),function(oe,_e,Fe){return _e!==void 0?le(_e):" "+le(`{${Fe.slice(1)}}`)}).replace(new RegExp(E(_),"g")," ");const ue=/(\([^()]+\))+?/g;for(;ue.test(ae);)ae=ae.replace(ue,"");ae=ae.replace(/\d+\.(\.\.)?/g,""),ae=ae.replace(/\.\.\./g,""),ae=ae.replace(/\$\d+/g,"");let ge=ae.trim().split(new RegExp(/\s+/));ge=ge.join(",").replace(/,,+/g,",").split(",");let qe="";for(let oe=0;oe<ge.length;oe++){const _e=X(ge[oe]);if(_e!==void 0){this._comments[this.fen()]=_e;continue}const Fe=this._moveFromSan(ge[oe],k);if(Fe==null)if(h.indexOf(ge[oe])>-1)qe=ge[oe];else return!1;else qe="",this._makeMove(Fe)}return qe&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",qe),!0}_moveToSan(b,k){let _="";if(b.flags&i.KSIDE_CASTLE)_="O-O";else if(b.flags&i.QSIDE_CASTLE)_="O-O-O";else{if(b.piece!==t.PAWN){const E=D(b,k);_+=b.piece.toUpperCase()+E}b.flags&(i.CAPTURE|i.EP_CAPTURE)&&(b.piece===t.PAWN&&(_+=T(b.from)[0]),_+="x"),_+=T(b.to),b.promotion&&(_+="="+b.promotion.toUpperCase())}return this._makeMove(b),this.isCheck()&&(this.isCheckmate()?_+="#":_+="+"),this._undoMove(),_}_moveFromSan(b,k=!1){const _=ee(b);let E=Q(_),A=this._moves({legal:!0,piece:E});for(let G=0,le=A.length;G<le;G++)if(_===ee(this._moveToSan(A[G],A)))return A[G];if(!k)return null;let N,d,F,Y,q,J=!1;d=_.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),d?(N=d[1],F=d[2],Y=d[3],q=d[4],F.length==1&&(J=!0)):(d=_.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),d&&(N=d[1],F=d[2],Y=d[3],q=d[4],F.length==1&&(J=!0))),E=Q(_),A=this._moves({legal:!0,piece:N||E});for(let G=0,le=A.length;G<le;G++)if(F&&Y){if((!N||N.toLowerCase()==A[G].piece)&&a[F]==A[G].from&&a[Y]==A[G].to&&(!q||q.toLowerCase()==A[G].promotion))return A[G];if(J){const X=T(A[G].from);if((!N||N.toLowerCase()==A[G].piece)&&a[Y]==A[G].to&&(F==X[0]||F==X[1])&&(!q||q.toLowerCase()==A[G].promotion))return A[G]}}return null}ascii(){let b=`   +------------------------+
`;for(let k=a.a8;k<=a.h1;k++){if(S(k)===0&&(b+=" "+"87654321"[p(k)]+" |"),this._board[k]){const _=this._board[k].type,A=this._board[k].color===t.WHITE?_.toUpperCase():_.toLowerCase();b+=" "+A+" "}else b+=" . ";k+1&136&&(b+=`|
`,k+=8)}return b+=`   +------------------------+
`,b+="     a  b  c  d  e  f  g  h",b}perft(b){const k=this._moves({legal:!1});let _=0;const E=this._turn;for(let A=0,N=k.length;A<N;A++)this._makeMove(k[A]),this._isKingAttacked(E)||(b-1>0?_+=this.perft(b-1):_++),this._undoMove();return _}_makePretty(b){const{color:k,piece:_,from:E,to:A,flags:N,captured:d,promotion:F}=b;let Y="";for(const J in i)i[J]&N&&(Y+=s[J]);const q={color:k,piece:_,from:T(E),to:T(A),san:this._moveToSan(b,this._moves({legal:!0})),flags:Y};return d&&(q.captured=d),F&&(q.promotion=F),q}turn(){return this._turn}board(){const b=[];let k=[];for(let _=a.a8;_<=a.h1;_++)this._board[_]==null?k.push(null):k.push({square:T(_),type:this._board[_].type,color:this._board[_].color}),_+1&136&&(b.push(k),k=[],_+=8);return b}squareColor(b){if(b in a){const k=a[b];return(p(k)+S(k))%2===0?"light":"dark"}return null}history({verbose:b=!1}={}){const k=[],_=[];for(;this._history.length>0;)k.push(this._undoMove());for(;;){const E=k.pop();if(!E)break;b?_.push(this._makePretty(E)):_.push(this._moveToSan(E,this._moves())),this._makeMove(E)}return _}_pruneComments(){const b=[],k={},_=E=>{E in this._comments&&(k[E]=this._comments[E])};for(;this._history.length>0;)b.push(this._undoMove());for(_(this.fen());;){const E=b.pop();if(!E)break;this._makeMove(E),_(this.fen())}this._comments=k}getComment(){return this._comments[this.fen()]}setComment(b){this._comments[this.fen()]=b.replace("{","[").replace("}","]")}deleteComment(){const b=this._comments[this.fen()];return delete this._comments[this.fen()],b}getComments(){return this._pruneComments(),Object.keys(this._comments).map(b=>({fen:b,comment:this._comments[b]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(b=>{const k=this._comments[b];return delete this._comments[b],{fen:b,comment:k}})}}t.Chess=ve})(kn);var de=(t=>(t[t.WHITE=0]="WHITE",t[t.BLACK=1]="BLACK",t[t.BOTH=2]="BOTH",t[t.SPECTATOR=3]="SPECTATOR",t[t.SERVER=4]="SERVER",t))(de||{}),$=(t=>(t[t.LEGAL=0]="LEGAL",t[t.LEGALHOVER=1]="LEGALHOVER",t[t.CHECK=2]="CHECK",t[t.MOVE=3]="MOVE",t[t.NEXTMOVE=4]="NEXTMOVE",t[t.PREMOVE=5]="PREMOVE",t[t.PREMOVEHOVER=6]="PREMOVEHOVER",t[t.SELECT=7]="SELECT",t))($||{});const yt=t=>{if(typeof t=="string")return t;switch(t){case 0:case 1:return"legal";case 2:return"check";case 3:return"move";case 4:return"nextMove";case 5:case 6:return"preMove";case 7:return"select";default:return"check"}};class Yn{constructor(e){B(this,"boardTheme");B(this,"piecesTheme");B(this,"mouseEvents");B(this,"flipped");B(this,"notation");B(this,"startFen");B(this,"size");B(this,"scale");B(this,"resizible");B(this,"defaultState",{boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:ii,size:0,scale:70,resizible:!1});B(this,"setConfigSettings",e=>{e!==void 0&&(e.boardTheme!==void 0&&(this.boardTheme=e.boardTheme),e.piecesTheme!==void 0&&(this.piecesTheme=e.piecesTheme),e.mouseEvents!==void 0&&(this.mouseEvents=e.mouseEvents),e.flipped!==void 0&&(this.flipped=e.flipped),e.notation!==void 0&&(this.notation=e.notation),e.startFen!==void 0&&(this.startFen=e.startFen),e.resizible!==void 0&&(this.resizible=e.resizible))});B(this,"getConfig",()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...this.resizible!==this.defaultState.resizible&&{resizible:this.resizible}};if(Object.keys(e).length!==0)return e});this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.scale=this.defaultState.scale,this.resizible=this.defaultState.resizible,this.setConfigSettings(e)}}class Zn{constructor(e){B(this,"enabled");B(this,"color");B(this,"defaultState",{enabled:!0,color:de.BOTH});B(this,"setConfigSettings",e=>{switch(e){case!0:this.enabled=!0,this.color=de.BOTH;break;case!1:this.enabled=!1;break;case de.WHITE:this.enabled=!0,this.color=de.WHITE;break;case de.BLACK:this.enabled=!0,this.color=de.BLACK;break}});B(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class Jn{constructor(e){B(this,"enabled");B(this,"ghostPiece");B(this,"transition");B(this,"defaultState",{enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}});B(this,"setConfigSettings",e=>{var s,i,a,r;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(s=e==null?void 0:e.transition)!=null&&s.duration&&(this.transition.settings.duration=(i=e==null?void 0:e.transition)==null?void 0:i.duration),(a=e==null?void 0:e.transition)!=null&&a.easing&&(this.transition.settings.easing=(r=e==null?void 0:e.transition)==null?void 0:r.easing)))))});B(this,"getConfig",()=>{const e={},s={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(s.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(s.easing=this.transition.settings.easing),Object.keys(s).length!==0&&(e.transition=s)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class xn{constructor(e){B(this,"enabled");B(this,"selectedPiece");B(this,"defaultState",{enabled:!0,selectedPiece:void 0});B(this,"setConfigSettings",e=>{e!==void 0&&(this.enabled=e)});B(this,"getConfig",()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class $n{constructor(e){B(this,"enabled");B(this,"whiteToMove");B(this,"moves");B(this,"settings");B(this,"preMoves");B(this,"lastMove");B(this,"checkSquare");B(this,"defaultState",{enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0});B(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))});B(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled});this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class ei{constructor(e){B(this,"enabled");B(this,"settings");B(this,"defaultState",{enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}});B(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))});B(this,"getConfig",()=>{const e={},s=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(s.forEach(i=>{this.settings[i]!==this.defaultState.settings[i]&&(e[i]=this.settings[i])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class ti{constructor(e){B(this,"enabled");B(this,"tools");B(this,"settings");B(this,"defaultState",{enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}});B(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.knightLShape!==void 0&&(this.settings.knightLShape=e.knightLShape),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))});B(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(e.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class si{constructor(e){B(this,"enabled");B(this,"settings");B(this,"defaultState",{enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}});B(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))});B(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class ni{constructor(e){B(this,"getLegalMoves");B(this,"getPreMoves");B(this,"beforeMove");B(this,"afterMove");B(this,"getLastMove");B(this,"getInCheck");B(this,"getWhiteToMove");B(this,"defaultState",{getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0});B(this,"setConfigSettings",e=>{e!==void 0&&(e.getLegalMoves&&(this.getLegalMoves=e.getLegalMoves),e.getPreMoves&&(this.getPreMoves=e.getPreMoves),e.beforeMove&&(this.beforeMove=e.beforeMove),e.afterMove&&(this.afterMove=e.afterMove),e.getLastMove&&(this.getLastMove=e.getLastMove),e.getInCheck&&(this.getInCheck=e.getInCheck),e.getWhiteToMove&&(this.getWhiteToMove=e.getWhiteToMove))});B(this,"getConfig",()=>{const e={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(e).length>0?e:void 0});this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const ii="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Sn{constructor(e){B(this,"pieces");B(this,"markedSquares");B(this,"board");B(this,"movable");B(this,"draggable");B(this,"selectable");B(this,"legal");B(this,"callbacks");B(this,"highlight");B(this,"drawTools");B(this,"sounds");B(this,"getConfig",()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}));this.pieces=[],this.markedSquares=new Set,this.board=new Yn(e==null?void 0:e.board),this.movable=new Zn(e==null?void 0:e.movable),this.draggable=new Jn(e==null?void 0:e.draggable),this.selectable=new xn(e==null?void 0:e.selectable),this.legal=new $n(e==null?void 0:e.legal),this.callbacks=new ni(e==null?void 0:e.callbacks),this.highlight=new ei(e==null?void 0:e.highlight),this.drawTools=new ti(e==null?void 0:e.drawTools),this.sounds=new si(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){!this.legalEnabled||(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){!this.preMovesEnabled||(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.preMovesEnabled?this.legal.preMoves.curMove:""}set currentPreMove(e){e!==""&&(this.preMovesEnabled?this.legal.preMoves.curMove=e:this.legal.preMoves.curMove="")}get selectableEnabled(){return this.selectable.enabled}get draggableEnabled(){return this.draggable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){!this.legalEnabled||(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4&&e!==""||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const ai=["a","b","c","d","e","f","g","h"],ri=["8","7","6","5","4","3","2","1"];function Lt(t){return{x:ai.indexOf(t[0]),y:ri.indexOf(t[1])}}function ss(t){return t.charCodeAt(0)-97}function li(t){return 8-parseInt(t,10)}const oi=t=>{let e="",s=0;for(let i=0;i<t.length;i++){i!==0&&(e+="/");for(let a=0;a<t[i].length;a++){const r=t[i][a];r!=null&&s===0?r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase():r!=null&&s!==0?(e+=s.toString(),s=0,r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase()):s++}s!==0&&(e+=s.toString(),s=0)}return e},ui="8/8/8/8/8/8/8/8 w - - 0 1";class fi{constructor(e){B(this,"letters",{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7});B(this,"state");B(this,"changeLegalHoverIfNeeded",e=>{e.color!==$.LEGAL&&e.color!==$.PREMOVE||this.state.pieces.forEach(s=>{s.square===e.square&&(e.color=e.color===$.LEGAL?$.LEGALHOVER:$.PREMOVEHOVER)})});B(this,"highlightSquare",(e,s)=>{const i={square:e,color:s};this.state.markedSquares.forEach(a=>{a.square===e&&a.color!==$.MOVE&&a.color!==$.CHECK&&this.state.markedSquares.delete(a)}),this.changeLegalHoverIfNeeded(i),this.state.markedSquares.add(i)});B(this,"legalHover",(e,s=$.LEGAL)=>{e!==void 0&&this.state.markedSquares.forEach(i=>{if(i.square===e&&i.color===s)i.color=s===$.LEGAL?$.LEGALHOVER:$.PREMOVEHOVER;else if(i.square!==e&&i.color===(s===$.LEGAL?$.LEGALHOVER:$.PREMOVEHOVER)){let a=!1;this.state.pieces.forEach(r=>{r.square===i.square&&(a=!0)}),a||(i.color=s)}})});B(this,"toggleSquareHighlight",(e,s)=>{const i={square:e,color:s};let a=!1;return this.state.markedSquares.forEach(r=>{r.square===e&&(this.state.markedSquares.delete(r),r.color===s&&(a=!0))}),this.changeLegalHoverIfNeeded(i),a?!0:(this.state.markedSquares.add(i),!1)});B(this,"getSelectedSquare",()=>{let e="";return this.state.markedSquares.forEach(s=>{s.color===$.SELECT&&(e=s.square)}),e});B(this,"clearSquare",(e,s)=>{e.length===2&&this.state.markedSquares.forEach(i=>{i.square===e&&(i.color===s||s===void 0)&&this.state.markedSquares.delete(i)})});B(this,"clearAllSquares",e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(s=>{s.color===e&&this.state.markedSquares.delete(s)})});B(this,"setPiece",(e,s)=>{if(this.notValidThing({square:e,piece:s}))return;const i=this.state.pieces.find(a=>a.square===e);i?i.name=s:this.state.pieces.push({square:e,name:s})});B(this,"removePiece",e=>{this.notValidThing({square:e})||this.state.pieces.forEach((s,i)=>{s.square===e&&this.state.pieces.splice(i,1)})});B(this,"clearAllPieces",()=>{this.state.pieces.length=0});B(this,"getGridCoordsFromSquare",e=>{if(this.notValidThing({square:e}))return{x:0,y:0};const s=e[0],i=e[1],a=this.state.board.flipped?Math.abs(this.letters[s]-7):this.letters[s],r=this.state.board.flipped?Math.abs(parseInt(i,10)-8):parseInt(i,10)-1;return typeof a!="number"||r<0||r>7?{x:0,y:0}:{x:a,y:r}});B(this,"makeMove",e=>{if(this.notValidThing({move:e}))return;let s=!1,i;const a=e.substring(0,2),r=e.substring(2,4),n=e.substring(4);this.state.pieces.forEach(l=>{l.square===r&&(i=l,this.removePiece(l.square))}),this.state.pieces.forEach(l=>{l.square===a&&(l.square=r,s=!0,n&&(l.name=l.name[0]+n.toUpperCase()))}),s?this.state.legal.lastMove=e:i&&this.state.pieces.push(i)});B(this,"getSquareFromIndices",(e,s)=>`${Object.keys(this.letters)[e]}${(s+1).toString()}`);B(this,"updatePiecesWithFen",e=>{const s=[...Array(8)].map(()=>Array(8).fill(null)),i=["1","2","3","4","5","6","7","8"];let a=0,r=0;for(let o=0;o<(e.includes(" ")?e.indexOf(" "):e.length);o++)if(e[o]==="/")a++,r=0;else if(!i.includes(e[o]))e[o]===e[o].toUpperCase()?s[a][r]=`w${e[o]}`:s[a][r]=`b${e[o].toUpperCase()}`,r++;else for(let u=0;u<parseInt(e[o],10);u++)s[a][r]=null,r++;const n=[],l=[];for(let o=0;o<s.length;++o)for(let u=0;u<s.length;++u){const c=s[o][u],f=this.getPieceFromSquare(this.getSquareFromIndices(u,Math.abs(o-7)));c&&!f&&n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),!c&&f&&l.push(f),c&&f&&c!==f.name&&(n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),l.push(f))}for(let o=0;o<l.length;o++)for(let u=0;u<n.length;u++)!n[u]||!l[o]||n[u].name===l[o].name&&(l[o].square=n[u].square,l.splice(o,1),o--,n.splice(u,1),u--);n.forEach(o=>{this.state.pieces.push(o)}),l.forEach(o=>{this.state.pieces.splice(this.state.pieces.indexOf(o),1)})});B(this,"notValidThing",e=>{const{square:s,piece:i,move:a}=e;return!!(s&&s.length!==2||i&&i.length!==2||a&&a.length!==4&&a.length!==5)});B(this,"setGhostPiece",e=>{this.state.draggable.ghostPiece.piece=e});B(this,"removeGhostPiece",()=>{this.state.draggable.ghostPiece.piece=void 0});B(this,"isCastling",e=>{const s=e.slice(0,2),i=this.getPieceFromSquare(s);return!i||i.name[1]!=="K"?!1:e==="e1g1"||e==="e1c1"||e==="e8g8"||e==="e8c8"});B(this,"getRookMoveIfIsCastling",e=>{if(!this.isCastling(e))return null;switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return null}});B(this,"isEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s===void 0||s.name!=="wP"&&s.name!=="bP")});B(this,"getCapturedPawnSquareIfIsEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const s=this.getPieceFromSquare(e.substring(0,2));if(s===void 0||s.name!=="wP"&&s.name!=="bP")return;const i=this.getPieceFromSquare(`${e[2]}${(parseInt(e[3],10)+(s.name==="wP"?-1:1)).toString()}`);return i==null?void 0:i.square});B(this,"isCapture",e=>!!this.getPieceFromSquare(e.substring(2,4)));B(this,"isPromotion",e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s&&(s.name[1]!=="P"||s.name[0]==="w"&&e[3]==="1"||s.name[0]==="b"&&e[3]==="8"))});B(this,"callbackExists",e=>this.state.callbacks[e]!==void 0);B(this,"flipBoard",e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped});B(this,"setConfigSettings",e=>{this.state.setConfigSettings(e)});this.state=new Sn(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const e=this.state.pieces.find(s=>s.name==="wK");if(e)return e.square}getBlackKingSquare(){const e=this.state.pieces.find(s=>s.name==="bK");if(e)return e.square}getShortFEN(){if(this.state.pieces.length===0)return ui;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(s=>{e[li(s.square[1])][ss(s.square[0])]=s.name}),oi(e)}getPieceFromSquare(e){if(!!e)return this.state.pieces.find(s=>s.square===e)}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get draggableEnabled(){return this.state.draggableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}}const ci={[$.LEGAL]:"legalSQ cursor-pointer",[$.LEGALHOVER]:"legalSQ_hover cursor-pointer",[$.SELECT]:"selectedSQ",[$.MOVE]:"highlightMove",[$.NEXTMOVE]:"nextMoveSQ",[$.PREMOVE]:"preMoveSQ cursor-pointer",[$.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[$.CHECK]:"checkSQ"},di={white:"#f0d9b5",black:"#b58863"},hi="standard.svg",gi={[$.LEGAL]:"legalSQ cursor-pointer",[$.LEGALHOVER]:"legalSQ_hover cursor-pointer",[$.SELECT]:"selectedSQ-darkBlue",[$.MOVE]:"highlightMove-darkBlue",[$.NEXTMOVE]:"nextMoveSQ",[$.PREMOVE]:"preMoveSQ cursor-pointer",[$.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[$.CHECK]:"checkSQ"},bi={white:"#94A3B8",black:"#475569"},pi="darkBlue.svg",Ke={squareStyles:{standard:ci,darkBlue:gi},colors:{standard:di,darkBlue:bi},imageName:{standard:hi,darkBlue:pi}};function _s(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function Es(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function Ms(t){let e,s=t[4][t[1]?Math.abs(t[8]-7):t[8]]+"",i,a;return{c(){e=V("span"),i=we(s),a=se(),this.h()},l(r){e=K(r,"SPAN",{"data-file":!0,style:!0,class:!0});var n=j(e);i=Ce(n,s),a=ne(n),n.forEach(w),this.h()},h(){v(e,"data-file",t[6]),Ue(e,"--font-size",t[3]+"px"),Ue(e,"color",t[8]%2===0?Ke.colors[t[0]].white:Ke.colors[t[0]].black),v(e,"class","svelte-1dkkugo")},m(r,n){Z(r,e,n),I(e,i),I(e,a)},p(r,n){n&2&&s!==(s=r[4][r[1]?Math.abs(r[8]-7):r[8]]+"")&&Dt(i,s),n&8&&Ue(e,"--font-size",r[3]+"px"),n&1&&Ue(e,"color",r[8]%2===0?Ke.colors[r[0]].white:Ke.colors[r[0]].black)},d(r){r&&w(e)}}}function ks(t){let e,s=(t[1]?t[8]+1:Math.abs(t[8]-8))+"",i,a,r;return{c(){e=V("span"),i=we(s),a=se(),this.h()},l(n){e=K(n,"SPAN",{"data-file":!0,style:!0,class:!0});var l=j(e);i=Ce(l,s),a=ne(l),l.forEach(w),this.h()},h(){v(e,"data-file",t[6]),v(e,"style",r="--font-size: "+t[3]+"px; color: "+(t[8]%2===0?Ke.colors[t[0]].white:Ke.colors[t[0]].black)+";"+(t[1]?" text-align: right;":"")),v(e,"class","svelte-1dkkugo")},m(n,l){Z(n,e,l),I(e,i),I(e,a)},p(n,l){l&2&&s!==(s=(n[1]?n[8]+1:Math.abs(n[8]-8))+"")&&Dt(i,s),l&11&&r!==(r="--font-size: "+n[3]+"px; color: "+(n[8]%2===0?Ke.colors[n[0]].white:Ke.colors[n[0]].black)+";"+(n[1]?" text-align: right;":""))&&v(e,"style",r)},d(n){n&&w(e)}}}function mi(t){let e,s,i,a,r=t[4],n=[];for(let u=0;u<r.length;u+=1)n[u]=Ms(Es(t,r,u));let l=t[4],o=[];for(let u=0;u<l.length;u+=1)o[u]=ks(_s(t,l,u));return{c(){e=V("div");for(let u=0;u<n.length;u+=1)n[u].c();s=se(),i=V("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=K(u,"DIV",{class:!0});var c=j(e);for(let g=0;g<n.length;g+=1)n[g].l(c);c.forEach(w),s=ne(u),i=K(u,"DIV",{class:!0});var f=j(i);for(let g=0;g<o.length;g+=1)o[g].l(f);f.forEach(w),this.h()},h(){v(e,"class","files svelte-1dkkugo"),v(i,"class","ranks svelte-1dkkugo"),ut(()=>t[5].call(i))},m(u,c){Z(u,e,c);for(let f=0;f<n.length;f+=1)n[f].m(e,null);Z(u,s,c),Z(u,i,c);for(let f=0;f<o.length;f+=1)o[f].m(i,null);a=qn(i,t[5].bind(i))},p(u,[c]){if(c&27){r=u[4];let f;for(f=0;f<r.length;f+=1){const g=Es(u,r,f);n[f]?n[f].p(g,c):(n[f]=Ms(g),n[f].c(),n[f].m(e,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=r.length}if(c&27){l=u[4];let f;for(f=0;f<l.length;f+=1){const g=_s(u,l,f);o[f]?o[f].p(g,c):(o[f]=ks(g),o[f].c(),o[f].m(i,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}},i:Pe,o:Pe,d(u){u&&w(e),at(n,u),u&&w(s),u&&w(i),at(o,u),a()}}}function vi(t,e,s){let i,{theme:a}=e,{flipped:r}=e;const n=["a","b","c","d","e","f","g","h"];let l;function o(){l=this.clientHeight,s(2,l)}return t.$$set=u=>{"theme"in u&&s(0,a=u.theme),"flipped"in u&&s(1,r=u.flipped)},t.$$.update=()=>{t.$$.dirty&4&&s(3,i=Math.floor(Math.log(l/8)*3))},[a,r,l,i,n,o]}class _i extends Le{constructor(e){super(),Oe(this,e,vi,mi,Ie,{theme:0,flipped:1})}}function Ei(t){const e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}function Mi(t){return t*t*((1.70158+1)*t-1.70158)}function ki(t){return--t*t*((1.70158+1)*t+1.70158)+1}function Ft(t){const e=.36363636363636365,s=8/11,i=9/10,a=4356/361,r=35442/1805,n=16061/1805,l=t*t;return t<e?7.5625*l:t<s?9.075*l-9.9*t+3.4:t<i?a*l-r*t+n:10.8*t*t-20.52*t+10.72}function Si(t){return t<.5?.5*(1-Ft(1-t*2)):.5*Ft(t*2-1)+.5}function wi(t){return 1-Ft(1-t)}function Ci(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function Pi(t){return 1-Math.sqrt(1-t*t)}function Ai(t){return Math.sqrt(1- --t*t)}function yi(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Ti(t){return t*t*t}function fs(t){const e=t-1;return e*e*e+1}function Li(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1}function Oi(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))}function Ii(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1}function qi(t){return t===0||t===1?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-t*20)+1}function Fi(t){return t===0?t:Math.pow(2,10*(t-1))}function Ni(t){return t===1?t:1-Math.pow(2,-10*t)}function Ri(t){return t/=.5,t<1?.5*t*t:(t--,-.5*(t*(t-2)-1))}function Di(t){return t*t}function Bi(t){return-t*(t-2)}function Hi(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1}function Ui(t){return Math.pow(t,4)}function zi(t){return Math.pow(t-1,3)*(1-t)+1}function Vi(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function Ki(t){return t*t*t*t*t}function Wi(t){return--t*t*t*t*t+1}function ji(t){return-.5*(Math.cos(Math.PI*t)-1)}function Gi(t){const e=Math.cos(t*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function Qi(t){return Math.sin(t*Math.PI/2)}const Nt=Object.freeze(Object.defineProperty({__proto__:null,backIn:Mi,backInOut:Ei,backOut:ki,bounceIn:wi,bounceInOut:Si,bounceOut:Ft,circIn:Pi,circInOut:Ci,circOut:Ai,cubicIn:Ti,cubicInOut:yi,cubicOut:fs,elasticIn:Oi,elasticInOut:Li,elasticOut:Ii,expoIn:Fi,expoInOut:qi,expoOut:Ni,quadIn:Di,quadInOut:Ri,quadOut:Bi,quartIn:Ui,quartInOut:Hi,quartOut:zi,quintIn:Ki,quintInOut:Vi,quintOut:Wi,sineIn:Gi,sineInOut:ji,sineOut:Qi,linear:bn},Symbol.toStringTag,{value:"Module"}));function Ss(t){return Object.prototype.toString.call(t)==="[object Date]"}function ns(t,e){if(t===e||t!==t)return()=>t;const s=typeof t;if(s!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map((a,r)=>ns(t[r],a));return a=>i.map(r=>r(a))}if(s==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Ss(t)&&Ss(e)){t=t.getTime(),e=e.getTime();const r=e-t;return n=>new Date(t+n*r)}const i=Object.keys(e),a={};return i.forEach(r=>{a[r]=ns(t[r],e[r])}),r=>{const n={};return i.forEach(l=>{n[l]=a[l](r)}),n}}if(s==="number"){const i=e-t;return a=>t+a*i}throw new Error(`Cannot interpolate ${s} values`)}function Xi(t,e={}){const s=Vn(t);let i,a=t;function r(n,l){if(t==null)return s.set(t=n),Promise.resolve();a=n;let o=i,u=!1,{delay:c=0,duration:f=400,easing:g=bn,interpolate:C=ns}=Ot(Ot({},e),l);if(f===0)return o&&(o.abort(),o=null),s.set(t=a),Promise.resolve();const O=Fn()+c;let L;return i=Nn(M=>{if(M<O)return!0;u||(L=C(t,n),typeof f=="function"&&(f=f(t,n)),u=!0),o&&(o.abort(),o=null);const y=M-O;return y>f?(s.set(t=n),!1):(s.set(t=L(g(y/f))),!0)}),i.promise}return{set:r,update:(n,l)=>r(n(a,t),l),subscribe:s.subscribe}}function ws(t,e,s,i){if(e===0&&s===0)return t;const a=i?["h","g","f","e","d","c","b","a"]:["a","b","c","d","e","f","g","h"],r=i?["1","2","3","4","5","6","7","8"]:["8","7","6","5","4","3","2","1"],n=a[a.indexOf(t[0])+e],l=r[r.indexOf(t[1])+s];if(!(!n||!l))return`${n}${l}`}function Yi(t,e,s){const i=e*1.15,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",`${t.offsetWidth*i}`),a.setAttribute("height",`${t.offsetHeight*i}`),a.style.position="absolute",a.style.zIndex="100",a.style.translate=`${s?"":"-"}${25*i/2}% -${25*i/2}%`,a.style.opacity="0.2",a.style.pointerEvents="none",r.setAttribute("r",`${t.offsetWidth*i/2}`),r.setAttribute("cx",`${t.offsetWidth*i/2}`),r.setAttribute("cy",`${t.offsetHeight*i/2}`),r.setAttribute("fill","black"),a.appendChild(r),a}function Zi(t,e){let s,i,a,r,n,l,o,u,c=!1,f;const g=t.parentNode;let C=!1,O=!1,L=!1,{startSquare:M,boardFlipped:y,mouseEvents:h,canDrag:p,canSelect:S,canCapture:P,duration:T,easingFunc:H}=e;const{coords:W}=e;let D=hs(W).x,R=hs(W).y;const Q=1.6,ee=Yi(t,Q,y);function ve(d){if(d.button!==0||!d.isPrimary||!h)return;if(d.pointerType==="touch"?L=!0:L=!1,P){t.dispatchEvent(new CustomEvent("captured"));return}if((S||p)&&t.dispatchEvent(new CustomEvent("clicked")),!p){t.dispatchEvent(new CustomEvent("dropped",{detail:M}));return}D=(y?7-ss(M[0]):ss(M[0]))*g.clientWidth/8,R=(y?parseInt(M[1],10)-1:8-parseInt(M[1],10))*g.clientWidth/8;const F=d.target.getBoundingClientRect();d.pointerType==="touch"?(s=d.clientX,i=d.clientY,a=d.clientX-F.x,r=d.clientY-F.y):(s=d.clientX,i=d.clientY,a=d.offsetX,r=d.offsetY),n=0,l=0,o=window.scrollX,u=window.scrollY,O=!0,window.addEventListener("pointermove",ie),window.addEventListener("pointerup",k),window.addEventListener("pointercancel",_),document.body.addEventListener("pointerleave",_),window.addEventListener("scroll",b)}function ie(d){const F=d.clientX-s,Y=d.clientY-i;if(s=d.clientX,i=d.clientY,n+=F,l+=Y,c||E(L),!!c){if(L){const q=Math.floor((n+a)/t.offsetWidth),J=Math.floor((l+r)/t.offsetHeight),G=ws(M,q,J,y);if(G){const le=Lt(G);ee.setAttribute("r",`${t.offsetWidth*Q*1.15/2}`),ee.setAttribute("cx",`${t.offsetWidth*Q*1.15/2}`),ee.setAttribute("cy",`${t.offsetHeight*Q*1.15/2}`);const X=(y?(7-le.x)*g.clientWidth/8:le.x*g.clientWidth/8)-t.offsetWidth*Q*1.15/2+t.offsetWidth/2,ae=(y?(7-le.y)*g.clientWidth/8:le.y*g.clientWidth/8)-t.offsetWidth*Q*1.15/2+t.offsetWidth/2;ee.style.translate=`${X}px ${ae}px`,C||(g.appendChild(ee),C=!0)}}W.update(q=>({x:q.x+F,y:q.y+Y,scale:L?Q:1}),{duration:0}),t.dispatchEvent(new CustomEvent("moving",{detail:{x:d.clientX+o,y:d.clientY+u}}))}}function b(){const d=window.scrollX-o,F=window.scrollY-u;o=window.scrollX,u=window.scrollY,n+=d,l+=F,c||E(L),c&&(W.update(Y=>({x:Y.x+d,y:Y.y+F,scale:L?Q:1}),{duration:0}),t.dispatchEvent(new CustomEvent("moving",{detail:{x:s+window.scrollX,y:i+window.scrollY}})))}function k(){const d=Math.floor((n+a)/t.offsetWidth),F=Math.floor((l+r)/t.offsetHeight),Y=ws(M,d,F,y);t.dispatchEvent(new CustomEvent("dropped",{detail:Y})),O=!1,_()}function _(){window.removeEventListener("pointermove",ie),window.removeEventListener("pointerup",k),window.removeEventListener("pointercancel",k),document.body.removeEventListener("pointerleave",k),window.removeEventListener("scroll",b),O&&t.dispatchEvent(new CustomEvent("canceled")),O=!1,W.update(()=>({x:D,y:R,scale:1}),{duration:T,easing:H}).then(()=>{O||t.dispatchEvent(new CustomEvent("animationEnded")),O||t.classList.remove("dragging")}),s=0,i=0,n=0,l=0,setTimeout(()=>{O||t.classList.remove("dragging")},T),c=!1,ee.remove(),C=!1}function E(d=!1){W.update(()=>({x:D,y:R,scale:1}),{duration:0}),(Math.abs(n)>1||Math.abs(l)>1)&&(W.update(()=>({x:D+(s-t.offsetWidth/2-t.getBoundingClientRect().x),y:d?R+(i-t.offsetHeight*1.5-t.getBoundingClientRect().y):R+(i-t.offsetHeight/2-t.getBoundingClientRect().y),scale:d?Q:1}),{duration:0}),c=!0,t.classList.add("dragging"),t.dispatchEvent(new CustomEvent("startMoving")))}function A(d){O&&_(),d.preventDefault()}function N(d){d.preventDefault()}return t.addEventListener("contextmenu",A),t.addEventListener("dragstart",N),t.addEventListener("pointerdown",ve),{destroy(){t.removeEventListener("pointerdown",ve),t.removeEventListener("contextmenu",A),t.removeEventListener("dragstart",N),window.clearTimeout(f)},update(d){M=d.startSquare,T=d.duration,H=d.easingFunc,d.canDrag!==p&&(p=d.canDrag),d.canSelect!==S&&(S=d.canSelect),d.canCapture!==P&&(P=d.canCapture),d.mouseEvents!==h&&(h=d.mouseEvents),y=d.boardFlipped}}}function Ji(t){let e,s,i,a,r,n;return{c(){e=V("div"),this.h()},l(l){e=K(l,"DIV",{style:!0,class:!0}),j(e).forEach(w),this.h()},h(){var l;v(e,"style",s="translate: "+t[11].x+"px "+t[11].y+"px;"+(t[11].scale!==1?` scale: ${t[11].scale}`:"")),v(e,"class",i=t[2]+(t[2][0]==="w"?" white":" black")+(t[4]?" ghost":"")+(!((l=t[6])!=null&&l.enabled)&&!t[4]?" static":"")+(t[10]?"":" opacity-0")+(t[9]?" capture":"")+" svelte-6jzr8p")},m(l,o){var u,c,f;Z(l,e,o),r||(n=[ls(a=Zi.call(null,e,{startSquare:t[1],mouseEvents:t[0],canDrag:t[7],canSelect:t[8],canCapture:t[9],boardFlipped:t[3],duration:(u=t[5])!=null&&u.transition.enabled?t[5].transition.settings.duration:0,easingFunc:Nt[(f=(c=t[5])==null?void 0:c.transition.settings.easing)!=null?f:"cubicInOut"],coords:t[13]})),ce(e,"dropped",t[14]),ce(e,"clicked",t[19]),ce(e,"startMoving",t[20]),ce(e,"animationEnded",t[21]),ce(e,"captured",t[22]),ce(e,"canceled",t[23]),ce(e,"moving",t[24])],r=!0)},p(l,o){var u,c,f,g;o[0]&2048&&s!==(s="translate: "+l[11].x+"px "+l[11].y+"px;"+(l[11].scale!==1?` scale: ${l[11].scale}`:""))&&v(e,"style",s),o[0]&1620&&i!==(i=l[2]+(l[2][0]==="w"?" white":" black")+(l[4]?" ghost":"")+(!((u=l[6])!=null&&u.enabled)&&!l[4]?" static":"")+(l[10]?"":" opacity-0")+(l[9]?" capture":"")+" svelte-6jzr8p")&&v(e,"class",i),a&&os(a.update)&&o[0]&939&&a.update.call(null,{startSquare:l[1],mouseEvents:l[0],canDrag:l[7],canSelect:l[8],canCapture:l[9],boardFlipped:l[3],duration:(c=l[5])!=null&&c.transition.enabled?l[5].transition.settings.duration:0,easingFunc:Nt[(g=(f=l[5])==null?void 0:f.transition.settings.easing)!=null?g:"cubicInOut"],coords:l[13]})},i:Pe,o:Pe,d(l){l&&w(e),r=!1,rt(n)}}}function xi(t,e,s){var F,Y;let i,{square:a}=e,{name:r}=e,{mouseEvents:n=!0}=e,{getGridCoordsFromSquare:l}=e,{flipped:o}=e,{isGhost:u=!1}=e,{boardSize:c}=e;u&&(n=!1);let{selectableState:f=void 0}=e,{draggableState:g=void 0}=e,{legalState:C=void 0}=e,{movableState:O=void 0}=e,L=!1,M=!1,y=!1,h=!1;const p=wt();let S=(F=g==null?void 0:g.transition)!=null&&F.enabled?g.transition.settings.duration:0;const P=Xi({x:0,y:0,scale:1},{duration:S,easing:Nt[(Y=g==null?void 0:g.transition.settings.easing)!=null?Y:"cubicInOut"]});Rn(t,P,q=>s(11,i=q));let T=!1;const H=q=>q[0]==="w"?de.WHITE:de.BLACK,W=q=>{var G;const J=l(q);P.update(()=>({x:J.x*c/8,y:(7-J.y)*c/8,scale:1}),{duration:T?S:0,easing:Nt[(G=g==null?void 0:g.transition.settings.easing)!=null?G:"cubicInOut"]}),S=g!=null&&g.transition.enabled?g.transition.settings.duration:0},D=q=>{const J=l(a);P.update(()=>({x:J.x*q/8,y:(7-J.y)*q/8,scale:1}),{duration:0})},R=q=>{S=0,q.detail||p("deselect"),a===q.detail?(!L&&ve(O,f)?p("select"):p("deselect"),L=!L):L=!1,ee(O,g)&&p("endDragging",a+q.detail),a!==q.detail&&q.detail&&p("move",a+q.detail)},Q=q=>C!=null&&C.enabled?!!(C.preMoves.enabled&&H(r)===q.color||q.color===de.WHITE&&C.whiteToMove&&H(r)===de.WHITE||q.color===de.BLACK&&!C.whiteToMove&&H(r)===de.BLACK||q.color===de.BOTH&&(H(r)===de.WHITE&&C.whiteToMove||H(r)===de.BLACK&&!C.whiteToMove)):q.color===H(r)||q.color===de.BOTH,ee=(q,J)=>!(q!=null&&q.enabled)||!(J!=null&&J.enabled)||!n?!1:Q(q),ve=(q,J)=>!(q!=null&&q.enabled)||!(J!=null&&J.enabled)||!n?!1:Q(q),ie=(q,J,G)=>{var le,X;return!(J!=null&&J.enabled)||!(G!=null&&G.enabled)||!n?!1:q!=null&&q.enabled?!!((f==null?void 0:f.selectedPiece)!==void 0&&((le=f==null?void 0:f.selectedPiece)==null?void 0:le.square)!==a&&(q.moves.includes(f.selectedPiece.square+a)||q.moves.includes(`${f.selectedPiece.square+a}q`))||(f==null?void 0:f.selectedPiece)!==void 0&&q.preMoves.enabled&&H(f==null?void 0:f.selectedPiece.name)===J.color&&(q.preMoves.moves.includes(f.selectedPiece.square+a)||q.preMoves.moves.includes(`${f.selectedPiece.square+a}q`))):(f==null?void 0:f.selectedPiece)!==void 0&&((X=f==null?void 0:f.selectedPiece)==null?void 0:X.square)!==a},b=q=>q===void 0||q.name!==r||q.square!==a;Bt(()=>{s(10,T=!0)});function k(q){Ve.call(this,t,q)}function _(q){Ve.call(this,t,q)}function E(q){Ve.call(this,t,q)}function A(q){Ve.call(this,t,q)}function N(q){Ve.call(this,t,q)}const d=q=>{p("moving",q.detail)};return t.$$set=q=>{"square"in q&&s(1,a=q.square),"name"in q&&s(2,r=q.name),"mouseEvents"in q&&s(0,n=q.mouseEvents),"getGridCoordsFromSquare"in q&&s(15,l=q.getGridCoordsFromSquare),"flipped"in q&&s(3,o=q.flipped),"isGhost"in q&&s(4,u=q.isGhost),"boardSize"in q&&s(16,c=q.boardSize),"selectableState"in q&&s(17,f=q.selectableState),"draggableState"in q&&s(5,g=q.draggableState),"legalState"in q&&s(18,C=q.legalState),"movableState"in q&&s(6,O=q.movableState)},t.$$.update=()=>{t.$$.dirty[0]&96&&s(7,M=ee(O,g)),t.$$.dirty[0]&131136&&s(8,y=ve(O,f)),t.$$.dirty[0]&393280&&s(9,h=ie(C,O,f)),t.$$.dirty[0]&131072&&b(f==null?void 0:f.selectedPiece)&&(L=!1),t.$$.dirty[0]&10&&W(a),t.$$.dirty[0]&65536&&D(c)},[n,a,r,o,u,g,O,M,y,h,T,i,p,P,R,l,c,f,C,k,_,E,A,N,d]}class wn extends Le{constructor(e){super(),Oe(this,e,xi,Ji,Ie,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:15,flipped:3,isGhost:4,boardSize:16,selectableState:17,draggableState:5,legalState:18,movableState:6},null,[-1,-1])}}function $i(t){let e,s,i;return{c(){e=V("div"),this.h()},l(a){e=K(a,"DIV",{style:!0,class:!0}),j(e).forEach(w),this.h()},h(){v(e,"style",s="translate: "+t[5]*t[3]/8+"px "+(7-t[6])*t[3]/8+"px;"+(t[4]?` border-${t[4]}-radius: inherit;`:"")),v(e,"class",i=Ke.squareStyles[t[1]][t[0]]+(t[2]?"":" pointer-events-none")+" svelte-99w9gr")},m(a,r){Z(a,e,r)},p(a,[r]){r&120&&s!==(s="translate: "+a[5]*a[3]/8+"px "+(7-a[6])*a[3]/8+"px;"+(a[4]?` border-${a[4]}-radius: inherit;`:""))&&v(e,"style",s),r&7&&i!==(i=Ke.squareStyles[a[1]][a[0]]+(a[2]?"":" pointer-events-none")+" svelte-99w9gr")&&v(e,"class",i)},i:Pe,o:Pe,d(a){a&&w(e)}}}function ea(t,e,s){let{square:i}=e,{color:a}=e,{getGridCoordsFromSquare:r}=e,{flipped:n}=e,{theme:l}=e,{mouseEvents:o=!0}=e,{boardSize:u}=e,{corner:c=""}=e,f,g;const C=()=>{const O=r(i);s(5,f=O.x),s(6,g=O.y)};return t.$$set=O=>{"square"in O&&s(7,i=O.square),"color"in O&&s(0,a=O.color),"getGridCoordsFromSquare"in O&&s(8,r=O.getGridCoordsFromSquare),"flipped"in O&&s(9,n=O.flipped),"theme"in O&&s(1,l=O.theme),"mouseEvents"in O&&s(2,o=O.mouseEvents),"boardSize"in O&&s(3,u=O.boardSize),"corner"in O&&s(4,c=O.corner)},t.$$.update=()=>{t.$$.dirty&512&&C()},[a,l,o,u,c,f,g,i,r,n]}class ta extends Le{constructor(e){super(),Oe(this,e,ea,$i,Ie,{square:7,color:0,getGridCoordsFromSquare:8,flipped:9,theme:1,mouseEvents:2,boardSize:3,corner:4})}}const sa=["a","b","c","d","e","f","g","h"],na=["8","7","6","5","4","3","2","1"];function ia(t){t.querySelectorAll("[fixed]").forEach(e=>e.remove())}function is(t){return`${sa[t.x]}${na[t.y]}`}function Cn(t,e){return Math.abs((t.x-e.x)*(t.y-e.y))===2}function as(t,e){return`${is(t)}${is(e)}`}function aa(t,e){return!!(Cn(t,e)||Math.abs(t.x-e.x)===Math.abs(t.y-e.y)||t.x===e.x!=(t.y===e.y))}function Pn(t,e,s,i,a,r){let n={x:-1,y:-1},l,o;Cn(e,s)&&i?(Math.abs(s.x-e.x)===2?n={x:s.x,y:e.y}:n={x:e.x,y:s.y},n.y-e.y<0?o=Math.PI+Math.atan((n.x-e.x)/(n.y-e.y)):o=Math.atan((n.x-e.x)/Math.abs(n.y-e.y)),l={x:s.x-Math.sign(s.x-n.x)*(n.x!==s.x?.4:0),y:s.y-Math.sign(s.y-n.y)*(n.y!==s.y?.4:0)}):(s.y-e.y<0?o=Math.PI+Math.atan((s.x-e.x)/(s.y-e.y)):o=Math.atan((s.x-e.x)/Math.abs(s.y-e.y)),l={x:s.x-Math.sin(o)*.4,y:s.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};t.setAttribute("points",`${u.x+.5},${u.y+.5} ${n.x!==-1&&n.y!==-1&&i?`${n.x+.5},${n.y+.5} `:""}${l.x+.5},${l.y+.5}`),t.setAttribute("data-sqID",`${as(e,s)}`),r!==void 0&&t.setAttribute("opacity",`${r}`),a!==void 0&&(t.setAttribute("marker-start",`url(#start-${a[0]})`),t.setAttribute("marker-end",`url(#end-${a[0]})`),t.setAttribute("stroke",a))}function Tt(t,e,s,i,a,r){if(!(e===void 0||s.x===-1&&s.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),i?e.setAttribute("stroke","red"):a?e.setAttribute("stroke","orange"):r?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),t.querySelectorAll(`\u0441ircle[cx="${s.x+.5}"][cy="${s.y+.5}"]`).forEach(n=>{e!==void 0&&n!==e&&(n.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const n=i?"red":a?"orange":r?"blue":"green";e.setAttribute("stroke",`${n}`),e.setAttribute("marker-start",`url(#start-${n[0]})`),e.setAttribute("marker-end",`url(#end-${n[0]})`),t.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(l=>{e instanceof SVGPolylineElement&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function An(t,e,s,i,a){const r=document.createElementNS("http://www.w3.org/2000/svg","polyline");return Pn(r,t,e,s,i,a),r.setAttribute("fill","none"),r.setAttribute("stroke-width","0.25"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("opacity",a!==void 0?`${a}`:"0.4"),r.setAttribute("marker-start",i?`url(#start-${i[0]})`:"url(#start-g)"),r.setAttribute("marker-end",i?`url(#end-${i[0]})`:"url(#end-g)"),r.setAttribute("stroke",i||"green"),r}function rs(t,e,s){const i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",`${t.x+.5}`),i.setAttribute("cy",`${t.y+.5}`),i.setAttribute("r","0.465"),i.setAttribute("opacity",s?`${s}`:"0.4"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.07"),i.setAttribute("stroke",e!=null?e:"green"),i}function ra(t,e,s){e.forEach(i=>{if(i.type==="circle"){const a=Lt(i.square),r=rs(a,i.color,i.opacity);t.appendChild(r)}else if(i.type==="arrow"){const a=An(Lt(i.from),Lt(i.to),s,i.color,i.opacity);a.setAttribute("fixed",""),t.appendChild(a)}})}function Cs(t){t.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("fixed")||e.remove()})}function la(t,e){let{svg:s,flipped:i,enabled:a,settings:r}=e,n=!1,l={x:-1,y:-1},o,u;function c(M,y){const h=t.getBoundingClientRect(),p=i?h.width-(M-h.left):M-h.left,S=i?h.height-(y-h.top):y-h.top;return{x:Math.max(0,Math.min(7,Math.floor(p/(t.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(S/(t.clientHeight/8))))}}function f(M){if(u===void 0||l.x===-1&&l.y===-1)return;const y=c(M.clientX,M.clientY);r.onlyChessMove&&!aa(l,y)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),l.x===y.x&&l.y===y.y?(as(l,y),u instanceof SVGPolylineElement&&(u.remove(),u=rs(y)),Tt(s,u,l,M.shiftKey,M.ctrlKey,M.altKey),s.appendChild(u),s.querySelectorAll(`circle[cx="${l.x+.5}"][cy="${l.y+.5}"]`).forEach(h=>{h!==u&&(o=h,u!==void 0&&h.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,s.querySelectorAll(`polyline[data-sqID="${as(l,y)}"]`).forEach(h=>{u===void 0||l.x===-1&&l.y===-1||h===u||(o=h,h.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=An(l,y,r.knightLShape),Tt(s,u,l,M.shiftKey,M.ctrlKey,M.altKey),s.appendChild(u)):u instanceof SVGPolylineElement&&Pn(u,l,y,r.knightLShape)))}function g(M){M.preventDefault()}function C(M){M.preventDefault(),Tt(s,u,l,M.shiftKey,M.ctrlKey,M.altKey)}function O(M){if(M.button===0)n=!1;else if(M.button===2){if(l.x===-1&&l.y===-1)return;s.querySelectorAll("[remove]").forEach(y=>{y.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:is(l),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,l={x:-1,y:-1},n=!1,window.removeEventListener("mousemove",f),window.removeEventListener("keydown",C),window.removeEventListener("keyup",C),window.removeEventListener("contextmenu",g)}window.removeEventListener("mouseup",O)}function L(M){if(M.button===0)n=!0,Cs(s),window.addEventListener("mouseup",O);else if(M.button===2&&!n){const y=c(M.clientX,M.clientY);l=y,u=rs(y),Tt(s,u,l,M.shiftKey,M.ctrlKey,M.altKey),o=void 0,s.querySelectorAll(`circle[cx="${y.x+.5}"][cy="${y.y+.5}"]`).forEach(h=>{o=h,u!==void 0&&h.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&s.appendChild(u),window.addEventListener("mousemove",f),window.addEventListener("mouseup",O),window.addEventListener("keydown",C),window.addEventListener("keyup",C),window.addEventListener("contextmenu",g)}}return a&&t.addEventListener("mousedown",L),{update(M){M.svg!==s&&(s=M.svg),M.enabled!==a&&(a=M.enabled,a?t.addEventListener("mousedown",L):(Cs(s),t.removeEventListener("mousedown",L))),r=M.settings,i=M.flipped}}}function Ps(t,e,s){const i=t.slice();return i[8]=e[s],i}function As(t){let e,s,i,a;return{c(){e=Ne("marker"),s=Ne("path"),i=Ne("marker"),a=Ne("path"),this.h()},l(r){e=Re(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var n=j(e);s=Re(n,"path",{fill:!0,d:!0}),j(s).forEach(w),n.forEach(w),i=Re(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var l=j(i);a=Re(l,"path",{fill:!0,d:!0}),j(a).forEach(w),l.forEach(w),this.h()},h(){v(s,"fill",t[8]),v(s,"d","M 0 5 v 10 c 0 2.8 2.2 5 5 5 L 6 20 V 0 L 5 0 C 2.2 0 0 2.2 0 5 z"),v(e,"id","start-"+t[8][0]),v(e,"viewBox","0 0 5 20"),v(e,"refX","4"),v(e,"refY","10"),v(e,"markerUnits","strokeWidth"),v(e,"markerWidth","0.5"),v(e,"markerHeight","1"),v(e,"orient","auto"),v(a,"fill",t[8]),v(a,"d","M 9.5 9.5 l -8.7 -5 C 0.5 4.3 0 4.6 0 5 v 10 c 0 0.4 0.5 0.7 0.9 0.5 l 8.7 -5 C 9.9 10.3 9.9 9.7 9.5 9.5 z"),v(i,"id","end-"+t[8][0]),v(i,"viewBox","0 0 10 20"),v(i,"refX","0.2"),v(i,"refY","10"),v(i,"markerUnits","strokeWidth"),v(i,"orient","auto"),v(i,"fill","currentColor")},m(r,n){Z(r,e,n),I(e,s),Z(r,i,n),I(i,a)},p:Pe,d(r){r&&w(e),r&&w(i)}}}function oa(t){let e,s,i,a=t[2],r=[];for(let n=0;n<a.length;n+=1)r[n]=As(Ps(t,a,n));return{c(){e=Ne("svg"),s=Ne("defs");for(let n=0;n<r.length;n+=1)r[n].c();i=Ne("g"),this.h()},l(n){e=Re(n,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var l=j(e);s=Re(l,"defs",{});var o=j(s);for(let u=0;u<r.length;u+=1)r[u].l(o);o.forEach(w),i=Re(l,"g",{}),j(i).forEach(w),l.forEach(w),this.h()},h(){v(e,"xmlns","http://www.w3.org/2000/svg"),Ue(e,"transform","rotate("+(t[1]?"180deg":"0deg")+")"),v(e,"viewBox","0 0 8 8"),v(e,"class","svelte-19gv2n4")},m(n,l){Z(n,e,l),I(e,s);for(let o=0;o<r.length;o+=1)r[o].m(s,null);I(e,i),t[5](i)},p(n,[l]){if(l&4){a=n[2];let o;for(o=0;o<a.length;o+=1){const u=Ps(n,a,o);r[o]?r[o].p(u,l):(r[o]=As(u),r[o].c(),r[o].m(s,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}l&2&&Ue(e,"transform","rotate("+(n[1]?"180deg":"0deg")+")")},i:Pe,o:Pe,d(n){n&&w(e),at(r,n),t[5](null)}}}function ua(t,e,s){let{flipped:i=!1}=e,{svg:a}=e,{knightLShape:r=!1}=e,{tools:n=[]}=e,l=!1;function o(f){!l||(ia(a),ra(a,f,r))}Bt(()=>{l=!0,o(n)});const u=["green","red","blue","orange"];function c(f){fe[f?"unshift":"push"](()=>{a=f,s(0,a)})}return t.$$set=f=>{"flipped"in f&&s(1,i=f.flipped),"svg"in f&&s(0,a=f.svg),"knightLShape"in f&&s(3,r=f.knightLShape),"tools"in f&&s(4,n=f.tools)},t.$$.update=()=>{t.$$.dirty&16&&o(n)},[a,i,u,r,n,c]}class fa extends Le{constructor(e){super(),Oe(this,e,ua,oa,Ie,{flipped:1,svg:0,knightLShape:3,tools:4})}}function ys(t,{delay:e=0,duration:s=400,easing:i=fs,x:a=0,y:r=0,opacity:n=0}={}){const l=getComputedStyle(t),o=+l.opacity,u=l.transform==="none"?"":l.transform,c=o*(1-n);return{delay:e,duration:s,easing:i,css:(f,g)=>`
			transform: ${u} translate(${(1-f)*a}px, ${(1-f)*r}px);
			opacity: ${o-c*g}`}}function Rt(t,{delay:e=0,duration:s=400,easing:i=fs}={}){const a=getComputedStyle(t),r=+a.opacity,n=parseFloat(a.height),l=parseFloat(a.paddingTop),o=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),f=parseFloat(a.borderTopWidth),g=parseFloat(a.borderBottomWidth);return{delay:e,duration:s,easing:i,css:C=>`overflow: hidden;opacity: ${Math.min(C*20,1)*r};height: ${C*n}px;padding-top: ${C*l}px;padding-bottom: ${C*o}px;margin-top: ${C*u}px;margin-bottom: ${C*c}px;border-top-width: ${C*f}px;border-bottom-width: ${C*g}px;`}}function ca(t){let e,s,i,a;return{c(){e=V("button"),s=V("div"),this.h()},l(r){e=K(r,"BUTTON",{class:!0});var n=j(e);s=K(n,"DIV",{class:!0}),j(s).forEach(w),n.forEach(w),this.h()},h(){v(s,"class","piece "+t[0]+" svelte-1shuttb"),v(e,"class","svelte-1shuttb")},m(r,n){Z(r,e,n),I(e,s),i||(a=ce(e,"click",t[1]),i=!0)},p:Pe,i:Pe,o:Pe,d(r){r&&w(e),i=!1,a()}}}function da(t,e,s){let{piece:i}=e,{isWhite:a}=e,{showModal:r}=e;const n=wt(),l=(a?"w":"b")+i.toUpperCase(),o=()=>{n("newPromotion",i),s(2,r=!1)};return t.$$set=u=>{"piece"in u&&s(3,i=u.piece),"isWhite"in u&&s(4,a=u.isWhite),"showModal"in u&&s(2,r=u.showModal)},[l,o,r,i,a]}class ha extends Le{constructor(e){super(),Oe(this,e,da,ca,Ie,{piece:3,isWhite:4,showModal:2})}}function Ts(t,e,s){const i=t.slice();return i[7]=e[s],i}function Ls(t){let e,s,i,a,r,n,l=["q","r","b","n"],o=[];for(let c=0;c<4;c+=1)o[c]=Os(Ts(t,l,c));const u=c=>te(o[c],1,1,()=>{o[c]=null});return{c(){e=V("div"),s=V("div");for(let c=0;c<4;c+=1)o[c].c();this.h()},l(c){e=K(c,"DIV",{class:!0});var f=j(e);s=K(f,"DIV",{class:!0});var g=j(s);for(let C=0;C<4;C+=1)o[C].l(g);g.forEach(w),f.forEach(w),this.h()},h(){v(s,"class","modal-content svelte-17eh97x"),v(e,"class",r="modal "+t[0]+" svelte-17eh97x")},m(c,f){Z(c,e,f),I(e,s);for(let g=0;g<4;g+=1)o[g].m(s,null);n=!0},p(c,f){if(f&6){l=["q","r","b","n"];let g;for(g=0;g<4;g+=1){const C=Ts(c,l,g);o[g]?(o[g].p(C,f),x(o[g],1)):(o[g]=Os(C),o[g].c(),x(o[g],1),o[g].m(s,null))}for(Be(),g=4;g<4;g+=1)u(g);He()}(!n||f&1&&r!==(r="modal "+c[0]+" svelte-17eh97x"))&&v(e,"class",r)},i(c){if(!n){for(let f=0;f<4;f+=1)x(o[f]);ut(()=>{a&&a.end(1),i=Dn(s,ys,{x:100,duration:300}),i.start()}),n=!0}},o(c){o=o.filter(Boolean);for(let f=0;f<4;f+=1)te(o[f]);i&&i.invalidate(),a=Bn(s,ys,{x:-200,duration:100}),n=!1},d(c){c&&w(e),at(o,c),c&&a&&a.end()}}}function Os(t){let e,s,i,a;function r(o){t[4](o)}function n(o){t[5](o)}let l={piece:t[7]};return t[2]!==void 0&&(l.isWhite=t[2]),t[1]!==void 0&&(l.showModal=t[1]),e=new ha({props:l}),fe.push(()=>pe(e,"isWhite",r)),fe.push(()=>pe(e,"showModal",n)),e.$on("newPromotion",t[6]),{c(){Ee(e.$$.fragment)},l(o){Me(e.$$.fragment,o)},m(o,u){ke(e,o,u),a=!0},p(o,u){const c={};!s&&u&4&&(s=!0,c.isWhite=o[2],me(()=>s=!1)),!i&&u&2&&(i=!0,c.showModal=o[1],me(()=>i=!1)),e.$set(c)},i(o){a||(x(e.$$.fragment,o),a=!0)},o(o){te(e.$$.fragment,o),a=!1},d(o){Se(e,o)}}}function ga(t){let e,s,i=t[1]&&Ls(t);return{c(){i&&i.c(),e=Te()},l(a){i&&i.l(a),e=Te()},m(a,r){i&&i.m(a,r),Z(a,e,r),s=!0},p(a,[r]){a[1]?i?(i.p(a,r),r&2&&x(i,1)):(i=Ls(a),i.c(),x(i,1),i.m(e.parentNode,e)):i&&(Be(),te(i,1,1,()=>{i=null}),He())},i(a){s||(x(i),s=!0)},o(a){te(i),s=!1},d(a){i&&i.d(a),a&&w(e)}}}function ba(t,e,s){let i=!1,a,{className:r=""}=e;function n(c){s(1,i=!0),c?s(2,a=!0):s(2,a=!1)}function l(c){a=c,s(2,a)}function o(c){i=c,s(1,i)}function u(c){Ve.call(this,t,c)}return t.$$set=c=>{"className"in c&&s(0,r=c.className)},[r,i,a,n,l,o,u]}class pa extends Le{constructor(e){super(),Oe(this,e,ba,ga,Ie,{className:0,openPromotionModal:3})}get openPromotionModal(){return this.$$.ctx[3]}}const ma=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,va=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,_a=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,Ea=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function Is(t){let e,s,i,a;return{c(){e=V("audio"),s=V("track"),i=V("source"),this.h()},l(r){e=K(r,"AUDIO",{preload:!0});var n=j(e);s=K(n,"TRACK",{kind:!0}),i=K(n,"SOURCE",{src:!0}),n.forEach(w),this.h()},h(){v(s,"kind","captions"),Ht(i.src,a=ma)||v(i,"src",a),v(e,"preload","auto")},m(r,n){Z(r,e,n),I(e,s),I(e,i),t[3](e)},p:Pe,d(r){r&&w(e),t[3](null)}}}function qs(t){let e,s,i,a;return{c(){e=V("audio"),s=V("track"),i=V("source"),this.h()},l(r){e=K(r,"AUDIO",{preload:!0});var n=j(e);s=K(n,"TRACK",{kind:!0}),i=K(n,"SOURCE",{src:!0}),n.forEach(w),this.h()},h(){v(s,"kind","captions"),Ht(i.src,a=va)||v(i,"src",a),v(e,"preload","auto")},m(r,n){Z(r,e,n),I(e,s),I(e,i),t[4](e)},p:Pe,d(r){r&&w(e),t[4](null)}}}function Fs(t){let e,s,i,a;return{c(){e=V("audio"),s=V("track"),i=V("source"),this.h()},l(r){e=K(r,"AUDIO",{preload:!0});var n=j(e);s=K(n,"TRACK",{kind:!0}),i=K(n,"SOURCE",{src:!0}),n.forEach(w),this.h()},h(){v(s,"kind","captions"),Ht(i.src,a=_a)||v(i,"src",a),v(e,"preload","auto")},m(r,n){Z(r,e,n),I(e,s),I(e,i),t[5](e)},p:Pe,d(r){r&&w(e),t[5](null)}}}function Ns(t){let e,s,i,a;return{c(){e=V("audio"),s=V("track"),i=V("source"),this.h()},l(r){e=K(r,"AUDIO",{preload:!0});var n=j(e);s=K(n,"TRACK",{kind:!0}),i=K(n,"SOURCE",{src:!0}),n.forEach(w),this.h()},h(){v(s,"kind","captions"),Ht(i.src,a=Ea)||v(i,"src",a),v(e,"preload","auto")},m(r,n){Z(r,e,n),I(e,s),I(e,i),t[6](e)},p:Pe,d(r){r&&w(e),t[6](null)}}}function Ma(t){let e,s,i,a,r=t[0].MOVE&&Is(t),n=t[0].CAPTURE&&qs(t),l=t[0].CASTLE&&Fs(t),o=t[0].UNDO&&Ns(t);return{c(){r&&r.c(),e=se(),n&&n.c(),s=se(),l&&l.c(),i=se(),o&&o.c(),a=Te()},l(u){r&&r.l(u),e=ne(u),n&&n.l(u),s=ne(u),l&&l.l(u),i=ne(u),o&&o.l(u),a=Te()},m(u,c){r&&r.m(u,c),Z(u,e,c),n&&n.m(u,c),Z(u,s,c),l&&l.m(u,c),Z(u,i,c),o&&o.m(u,c),Z(u,a,c)},p(u,[c]){u[0].MOVE?r?r.p(u,c):(r=Is(u),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0].CAPTURE?n?n.p(u,c):(n=qs(u),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null),u[0].CASTLE?l?l.p(u,c):(l=Fs(u),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),u[0].UNDO?o?o.p(u,c):(o=Ns(u),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:Pe,o:Pe,d(u){r&&r.d(u),u&&w(e),n&&n.d(u),u&&w(s),l&&l.d(u),u&&w(i),o&&o.d(u),u&&w(a)}}}function ka(t,e,s){let{settings:i}=e;const a={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},r=()=>{a.CASTLE&&(a.CASTLE.pause(),s(1,a.CASTLE.currentTime=0,a)),a.MOVE&&(a.MOVE.pause(),s(1,a.MOVE.currentTime=0,a)),a.CAPTURE&&(a.CAPTURE.pause(),s(1,a.CAPTURE.currentTime=0,a)),a.UNDO&&(a.UNDO.pause(),s(1,a.UNDO.currentTime=0,a))},n=g=>g===void 0||i[g];function l(g){switch(r(),g){case"MOVE":a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CAPTURE":a.CAPTURE&&n("CAPTURE")?a.CAPTURE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CASTLE":a.CASTLE&&n("CASTLE")?a.CASTLE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"UNDO":a.UNDO&&n("UNDO")?(s(1,a.UNDO.volume=.3,a),a.UNDO.play()):a.MOVE&&n("MOVE")&&a.MOVE.play();break}}function o(g){fe[g?"unshift":"push"](()=>{a.MOVE=g,s(1,a)})}function u(g){fe[g?"unshift":"push"](()=>{a.CAPTURE=g,s(1,a)})}function c(g){fe[g?"unshift":"push"](()=>{a.CASTLE=g,s(1,a)})}function f(g){fe[g?"unshift":"push"](()=>{a.UNDO=g,s(1,a)})}return t.$$set=g=>{"settings"in g&&s(0,i=g.settings)},[i,a,l,o,u,c,f]}class Sa extends Le{constructor(e){super(),Oe(this,e,ka,Ma,Ie,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Rs=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,Ds=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function wa(t,e){let{mouseEvents:s}=e,i=e.curScale,a,r,n;function l(c){c.stopPropagation(),t.dispatchEvent(new CustomEvent("resizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-a)/3)),Math.max(0,Math.min(100,n+(c.pageY-r)/3))))}}))}function o(c){c.stopPropagation(),t.dispatchEvent(new CustomEvent("endResizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-a)/3)),Math.max(0,Math.min(100,n+(c.pageY-r)/3))))}})),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",o)}function u(c){!s||(c.stopPropagation(),c.button===0&&(a=c.pageX,r=c.pageY,n=i,window.addEventListener("pointermove",l),window.addEventListener("pointerup",o)))}return t.addEventListener("pointerdown",u),{update(c){i=c.curScale,s!==c.mouseEvents&&(s=c.mouseEvents)},destroy(){t.removeEventListener("mousedown",u)}}}function Ca(t){let e,s,i,a,r,n,l;return{c(){e=V("div"),s=Ne("svg"),i=Ne("path"),this.h()},l(o){e=K(o,"DIV",{style:!0,class:!0});var u=j(e);s=Re(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var c=j(s);i=Re(c,"path",{d:!0}),j(i).forEach(w),c.forEach(w),u.forEach(w),this.h()},h(){v(i,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),v(s,"xmlns","http://www.w3.org/2000/svg"),v(s,"viewBox","0 0 16 16"),v(s,"fill","currentColor"),Ue(e,"color",Ke.colors[t[0].state.board.boardTheme].black),v(e,"class",a=It(t[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")},m(o,u){Z(o,e,u),I(e,s),I(s,i),n||(l=[ce(e,"pointerdown",pn(t[3])),ls(r=wa.call(null,e,{mouseEvents:t[1],curScale:t[0].state.board.scale})),ce(e,"resizing",t[4]),ce(e,"endResizing",t[5])],n=!0)},p(o,[u]){u&1&&Ue(e,"color",Ke.colors[o[0].state.board.boardTheme].black),u&2&&a!==(a=It(o[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")&&v(e,"class",a),r&&os(r.update)&&u&3&&r.update.call(null,{mouseEvents:o[1],curScale:o[0].state.board.scale})},i:Pe,o:Pe,d(o){o&&w(e),n=!1,rt(l)}}}function Pa(t,e,s){const i=wt();let{chessboard:a}=e,{mouseEvents:r=!0}=e;function n(u){Ve.call(this,t,u)}const l=u=>i("resizing",u.detail.scale),o=u=>i("endResizing",u.detail.scale);return t.$$set=u=>{"chessboard"in u&&s(0,a=u.chessboard),"mouseEvents"in u&&s(1,r=u.mouseEvents)},[a,r,i,n,l,o]}class Aa extends Le{constructor(e){super(),Oe(this,e,Pa,Ca,Ie,{chessboard:0,mouseEvents:1})}}function Bs(t,e,s){const i=t.slice();return i[86]=e[s],i}function Hs(t,e,s){const i=t.slice();return i[89]=e[s],i}function Us(t){let e=[],s=new Map,i,a,r=t[6].state.pieces;const n=l=>l[89];for(let l=0;l<r.length;l+=1){let o=Hs(t,r,l),u=n(o);s.set(u,e[l]=zs(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Te()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Te()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Z(l,i,o),a=!0},p(l,o){o[0]&905292&&(r=l[6].state.pieces,Be(),e=mn(e,o,n,1,l,r,s,i.parentNode,vn,zs,i,Hs),He())},i(l){if(!a){for(let o=0;o<r.length;o+=1)x(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)te(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&w(i)}}}function zs(t,e){let s,i,a;function r(){return e[60](e[89])}function n(){return e[61](e[89])}function l(...c){return e[62](e[89],...c)}function o(){return e[64](e[89])}function u(){return e[67](e[89])}return i=new wn({props:{square:e[89].square,name:e[89].name,boardSize:e[6].state.board.size,mouseEvents:e[6].state.board.mouseEvents,legalState:e[6].state.legal,draggableState:e[6].state.draggable,selectableState:e[6].state.selectable,movableState:e[6].state.movable,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped}}),i.$on("move",e[14]),i.$on("clicked",r),i.$on("startMoving",n),i.$on("moving",l),i.$on("endDragging",e[63]),i.$on("select",o),i.$on("canceled",e[65]),i.$on("deselect",e[66]),i.$on("captured",u),{key:t,first:null,c(){s=Te(),Ee(i.$$.fragment),this.h()},l(c){s=Te(),Me(i.$$.fragment,c),this.h()},h(){this.first=s},m(c,f){Z(c,s,f),ke(i,c,f),a=!0},p(c,f){e=c;const g={};f[0]&64&&(g.square=e[89].square),f[0]&64&&(g.name=e[89].name),f[0]&64&&(g.boardSize=e[6].state.board.size),f[0]&64&&(g.mouseEvents=e[6].state.board.mouseEvents),f[0]&64&&(g.legalState=e[6].state.legal),f[0]&64&&(g.draggableState=e[6].state.draggable),f[0]&64&&(g.selectableState=e[6].state.selectable),f[0]&64&&(g.movableState=e[6].state.movable),f[0]&64&&(g.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),f[0]&64&&(g.flipped=e[6].flipped),i.$set(g)},i(c){a||(x(i.$$.fragment,c),a=!0)},o(c){te(i.$$.fragment,c),a=!1},d(c){c&&w(s),Se(i,c)}}}function Vs(t){let e,s;return e=new wn({props:{isGhost:!0,boardSize:t[6].state.board.size,square:t[6].ghostPiece.square,name:t[6].ghostPiece.name,getGridCoordsFromSquare:t[6].getGridCoordsFromSquare,flipped:t[6].flipped}}),{c(){Ee(e.$$.fragment)},l(i){Me(e.$$.fragment,i)},m(i,a){ke(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.boardSize=i[6].state.board.size),a[0]&64&&(r.square=i[6].ghostPiece.square),a[0]&64&&(r.name=i[6].ghostPiece.name),a[0]&64&&(r.getGridCoordsFromSquare=i[6].getGridCoordsFromSquare),a[0]&64&&(r.flipped=i[6].flipped),e.$set(r)},i(i){s||(x(e.$$.fragment,i),s=!0)},o(i){te(e.$$.fragment,i),s=!1},d(i){Se(e,i)}}}function Ks(t){let e=[],s=new Map,i,a,r=[...t[6].state.markedSquares];const n=l=>l[86];for(let l=0;l<r.length;l+=1){let o=Bs(t,r,l),u=n(o);s.set(u,e[l]=Ws(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Te()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Te()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Z(l,i,o),a=!0},p(l,o){o[0]&1048642&&(r=[...l[6].state.markedSquares],Be(),e=mn(e,o,n,1,l,r,s,i.parentNode,vn,Ws,i,Bs),He())},i(l){if(!a){for(let o=0;o<r.length;o+=1)x(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)te(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&w(i)}}}function Ws(t,e){let s,i,a;return i=new ta({props:{boardSize:e[6].state.board.size,theme:e[6].state.board.boardTheme,square:e[86].square,color:e[86].color,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped,mouseEvents:e[6].state.board.mouseEvents,corner:e[20](e[86].square)}}),i.$on("dragenter",e[68]),{key:t,first:null,c(){s=Te(),Ee(i.$$.fragment),this.h()},l(r){s=Te(),Me(i.$$.fragment,r),this.h()},h(){this.first=s},m(r,n){Z(r,s,n),ke(i,r,n),a=!0},p(r,n){e=r;const l={};n[0]&64&&(l.boardSize=e[6].state.board.size),n[0]&64&&(l.theme=e[6].state.board.boardTheme),n[0]&64&&(l.square=e[86].square),n[0]&64&&(l.color=e[86].color),n[0]&64&&(l.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),n[0]&64&&(l.flipped=e[6].flipped),n[0]&64&&(l.mouseEvents=e[6].state.board.mouseEvents),n[0]&64&&(l.corner=e[20](e[86].square)),i.$set(l)},i(r){a||(x(i.$$.fragment,r),a=!0)},o(r){te(i.$$.fragment,r),a=!1},d(r){r&&w(s),Se(i,r)}}}function js(t){let e,s;return e=new _i({props:{theme:t[6].state.board.boardTheme,flipped:t[6].flipped}}),{c(){Ee(e.$$.fragment)},l(i){Me(e.$$.fragment,i)},m(i,a){ke(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.theme=i[6].state.board.boardTheme),a[0]&64&&(r.flipped=i[6].flipped),e.$set(r)},i(i){s||(x(e.$$.fragment,i),s=!0)},o(i){te(e.$$.fragment,i),s=!1},d(i){Se(e,i)}}}function Gs(t){let e,s;return e=new Aa({props:{chessboard:t[6],mouseEvents:t[6].state.board.mouseEvents}}),e.$on("resizing",t[69]),{c(){Ee(e.$$.fragment)},l(i){Me(e.$$.fragment,i)},m(i,a){ke(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.chessboard=i[6]),a[0]&64&&(r.mouseEvents=i[6].state.board.mouseEvents),e.$set(r)},i(i){s||(x(e.$$.fragment,i),s=!0)},o(i){te(e.$$.fragment,i),s=!1},d(i){Se(e,i)}}}function Qs(t){let e,s,i;function a(n){t[70](n)}let r={flipped:t[6].flipped,tools:t[6].state.drawTools.tools,knightLShape:t[6].state.drawTools.settings.knightLShape};return t[8]!==void 0&&(r.svg=t[8]),e=new fa({props:r}),fe.push(()=>pe(e,"svg",a)),{c(){Ee(e.$$.fragment)},l(n){Me(e.$$.fragment,n)},m(n,l){ke(e,n,l),i=!0},p(n,l){const o={};l[0]&64&&(o.flipped=n[6].flipped),l[0]&64&&(o.tools=n[6].state.drawTools.tools),l[0]&64&&(o.knightLShape=n[6].state.drawTools.settings.knightLShape),!s&&l[0]&256&&(s=!0,o.svg=n[8],me(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){Se(e,n)}}}function Xs(t){let e,s,i={};return e=new pa({props:i}),t[71](e),e.$on("newPromotion",t[17]),{c(){Ee(e.$$.fragment)},l(a){Me(e.$$.fragment,a)},m(a,r){ke(e,a,r),s=!0},p(a,r){const n={};e.$set(n)},i(a){s||(x(e.$$.fragment,a),s=!0)},o(a){te(e.$$.fragment,a),s=!1},d(a){t[71](null),Se(e,a)}}}function Ys(t){let e,s,i={settings:t[6].state.sounds.settings};return e=new Sa({props:i}),t[76](e),{c(){Ee(e.$$.fragment)},l(a){Me(e.$$.fragment,a)},m(a,r){ke(e,a,r),s=!0},p(a,r){const n={};r[0]&64&&(n.settings=a[6].state.sounds.settings),e.$set(n)},i(a){s||(x(e.$$.fragment,a),s=!0)},o(a){te(e.$$.fragment,a),s=!1},d(a){t[76](null),Se(e,a)}}}function ya(t){let e,s,i,a,r,n,l,o,u,c,f,g,C,O,L,M,y,h=t[6].state.board.startFen&&Us(t),p=t[6].ghostPiece&&Vs(t),S=t[6].highlightEnabled&&Ks(t),P=t[6].state.board.notation&&t[11]&&js(t),T=t[6].state.board.resizible&&t[11]&&Gs(t),H=t[6].state.drawTools.enabled&&Qs(t),W=t[6].legalEnabled&&Xs(t),D=t[6].soundsEnabled&&Ys(t);return{c(){e=V("div"),s=V("div"),i=V("div"),h&&h.c(),r=se(),p&&p.c(),n=se(),S&&S.c(),l=se(),P&&P.c(),o=se(),T&&T.c(),u=se(),H&&H.c(),c=se(),W&&W.c(),C=se(),D&&D.c(),O=Te(),this.h()},l(R){e=K(R,"DIV",{class:!0});var Q=j(e);s=K(Q,"DIV",{class:!0,style:!0});var ee=j(s);i=K(ee,"DIV",{style:!0,class:!0});var ve=j(i);h&&h.l(ve),ve.forEach(w),r=ne(ee),p&&p.l(ee),n=ne(ee),S&&S.l(ee),l=ne(ee),P&&P.l(ee),o=ne(ee),T&&T.l(ee),u=ne(ee),H&&H.l(ee),c=ne(ee),W&&W.l(ee),ee.forEach(w),Q.forEach(w),C=ne(R),D&&D.l(R),O=Te(),this.h()},h(){Ue(i,"width","100%"),Ue(i,"height","100%"),v(i,"class",a=It(t[21](t[6].whiteToMove))+" svelte-sse5i8"),v(s,"class",f="board text-sm "+t[0]+(!t[6].legalEnabled&&t[6].selectedPiece?" pointer":"")+" svelte-sse5i8"),Ue(s,"--boardTheme","url("+(t[6].state.board.boardTheme==="standard"?Rs:Ds)+")"),v(e,"class","boardWrapper svelte-sse5i8")},m(R,Q){Z(R,e,Q),I(e,s),I(s,i),h&&h.m(i,null),I(s,r),p&&p.m(s,null),I(s,n),S&&S.m(s,null),I(s,l),P&&P.m(s,null),I(s,o),T&&T.m(s,null),I(s,u),H&&H.m(s,null),I(s,c),W&&W.m(s,null),t[74](s),t[75](e),Z(R,C,Q),D&&D.m(R,Q),Z(R,O,Q),L=!0,M||(y=[ce(s,"pointerdown",t[13]),ce(s,"contextmenu",gs(t[58])),ce(s,"drag",gs(t[59])),ls(g=la.call(null,s,{svg:t[8],flipped:t[6].flipped,enabled:t[6].state.drawTools.enabled&&t[6].state.board.mouseEvents,settings:t[6].state.drawTools.settings})),ce(s,"drawCircle",t[72]),ce(s,"drawArrow",t[73])],M=!0)},p(R,Q){R[6].state.board.startFen?h?(h.p(R,Q),Q[0]&64&&x(h,1)):(h=Us(R),h.c(),x(h,1),h.m(i,null)):h&&(Be(),te(h,1,1,()=>{h=null}),He()),(!L||Q[0]&64&&a!==(a=It(R[21](R[6].whiteToMove))+" svelte-sse5i8"))&&v(i,"class",a),R[6].ghostPiece?p?(p.p(R,Q),Q[0]&64&&x(p,1)):(p=Vs(R),p.c(),x(p,1),p.m(s,n)):p&&(Be(),te(p,1,1,()=>{p=null}),He()),R[6].highlightEnabled?S?(S.p(R,Q),Q[0]&64&&x(S,1)):(S=Ks(R),S.c(),x(S,1),S.m(s,l)):S&&(Be(),te(S,1,1,()=>{S=null}),He()),R[6].state.board.notation&&R[11]?P?(P.p(R,Q),Q[0]&2112&&x(P,1)):(P=js(R),P.c(),x(P,1),P.m(s,o)):P&&(Be(),te(P,1,1,()=>{P=null}),He()),R[6].state.board.resizible&&R[11]?T?(T.p(R,Q),Q[0]&2112&&x(T,1)):(T=Gs(R),T.c(),x(T,1),T.m(s,u)):T&&(Be(),te(T,1,1,()=>{T=null}),He()),R[6].state.drawTools.enabled?H?(H.p(R,Q),Q[0]&64&&x(H,1)):(H=Qs(R),H.c(),x(H,1),H.m(s,c)):H&&(Be(),te(H,1,1,()=>{H=null}),He()),R[6].legalEnabled?W?(W.p(R,Q),Q[0]&64&&x(W,1)):(W=Xs(R),W.c(),x(W,1),W.m(s,null)):W&&(Be(),te(W,1,1,()=>{W=null}),He()),(!L||Q[0]&65&&f!==(f="board text-sm "+R[0]+(!R[6].legalEnabled&&R[6].selectedPiece?" pointer":"")+" svelte-sse5i8"))&&v(s,"class",f),(!L||Q[0]&64)&&Ue(s,"--boardTheme","url("+(R[6].state.board.boardTheme==="standard"?Rs:Ds)+")"),g&&os(g.update)&&Q[0]&320&&g.update.call(null,{svg:R[8],flipped:R[6].flipped,enabled:R[6].state.drawTools.enabled&&R[6].state.board.mouseEvents,settings:R[6].state.drawTools.settings}),R[6].soundsEnabled?D?(D.p(R,Q),Q[0]&64&&x(D,1)):(D=Ys(R),D.c(),x(D,1),D.m(O.parentNode,O)):D&&(Be(),te(D,1,1,()=>{D=null}),He())},i(R){L||(x(h),x(p),x(S),x(P),x(T),x(H),x(W),x(D),L=!0)},o(R){te(h),te(p),te(S),te(P),te(T),te(H),te(W),te(D),L=!1},d(R){R&&w(e),h&&h.d(),p&&p.d(),S&&S.d(),P&&P.d(),T&&T.d(),H&&H.d(),W&&W.d(),t[74](null),t[75](null),R&&w(C),D&&D.d(R),R&&w(O),M=!1,rt(y)}}}function Ta(t,e,s){let i,{config:a}=e,{className:r=""}=e;const n=new fi(a),l=wt();let o,u,c,f,g,C="",O=!1,L=!1;const M=m=>{n.clearAllSquares(m),m===$.LEGAL&&n.clearAllSquares($.LEGALHOVER),m===$.PREMOVE&&n.clearAllSquares($.PREMOVEHOVER),s(6,n)},y=(m,U)=>{!h(yt(U))||(n.highlightSquare(m,U),s(6,n))},h=m=>n.highlightEnabled&&(m===void 0||n.highlightSettings[typeof m=="string"?m:yt(m)]),p=m=>{if(!n.selectableEnabled&&n.draggableEnabled&&ue(m),!n.selectableEnabled)return;S(!0);const U=n.getPieceFromSquare(m);U!==void 0&&(s(6,n.selectedPiece=U,n),ue())},S=(m=!0)=>{M($.SELECT),M($.LEGAL),M($.PREMOVE),s(6,n.selectedPiece=void 0,n),m&&(M($.NEXTMOVE),s(6,n.currentPreMove="",n))},P=m=>{M($.CHECK),m&&n.legalEnabled&&y(m,$.CHECK),s(6,n)},T=()=>{M($.CHECK)},H=m=>{n.flipBoard(m),s(6,n)},W=(m,U)=>{m.forEach(re=>n.highlightSquare(re,U)),s(6,n)},D=(m,U=!0,re=$.MOVE)=>{m.length<4||!h(yt(re))||(U&&M(re),W([m.substring(0,2),m.substring(2,4)],re))},R=(m,U,re=$.MOVE)=>{const he=[];U&&M(re),m.forEach(Ae=>{Ae.length<4||(he.push(Ae.substring(0,2)),he.push(Ae.substring(2,4)))}),W(he,re)},Q=m=>{y(m.substring(2,4),$.LEGAL)},ee=(m,U,re=$.LEGAL)=>{M(re),h(yt(re))&&(m.forEach(he=>{he.length<4||(U===void 0||he.substring(0,2)===U)&&n.highlightSquare(he.substring(2,4),re)}),s(6,n))},ve=(m,U=!0)=>{n.makeMove(m),U&&D(m),s(6,n)},ie=m=>{var U;n.removePiece(m),n.ghostPieceEnabled&&((U=n.ghostPiece)==null?void 0:U.square)===m&&(n.removeGhostPiece(),s(6,n)),s(6,n)},b=m=>n.whiteToMove&&m[0]==="w"||!n.whiteToMove&&m[0]==="b",k=(m=!1)=>{!n.legalEnabled||(n.state.callbacks.getWhiteToMove&&s(6,n.whiteToMove=n.state.callbacks.getWhiteToMove(),n),n.state.callbacks.getPreMoves&&n.preMovesEnabled?s(6,n.preMoves=n.state.callbacks.getPreMoves(),n):s(6,n.preMoves=[],n),n.state.callbacks.getLegalMoves&&n.state.legal.enabled?s(6,n.legalMoves=n.state.callbacks.getLegalMoves(),n):s(6,n.legalMoves=[],n),m&&ue(),n.state.callbacks.getInCheck&&n.state.callbacks.getInCheck()?n.whiteToMove?P(n.getWhiteKingSquare()):P(n.getBlackKingSquare()):T(),n.state.callbacks.getLastMove?(s(6,n.lastMove=n.state.callbacks.getLastMove(),n),D(n.lastMove)):M($.MOVE))},_=m=>{var U;n.soundsEnabled&&f&&((U=f.playMoveSound)==null||U.call(f,m))},E=m=>{n.setGhostPiece(m),s(6,n)},A=()=>{n.removeGhostPiece(),s(6,n)},N=m=>{if(m.substring(0,2)===m.substring(2,4))return;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(m);const U=n.selectedPiece?{...n.selectedPiece}:void 0;S(!1);const re=n.getRookMoveIfIsCastling(m),he=n.getCapturedPawnSquareIfIsEnPassant(m);re&&n.legalEnabled&&n.state.legal.settings.allowCastling?(ve(re,!1),_("CASTLE")):he&&n.legalEnabled&&n.state.legal.settings.allowEnPassant?(ie(he),_("CAPTURE")):n.isCapture(m)?_("CAPTURE"):_("MOVE"),A(),ve(m),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(m),k(!1);const Ae=n.getPieceFromSquare(U==null?void 0:U.square);if(Ae&&U&&Ae.square===U.square&&Ae.name===(U==null?void 0:U.name)?s(6,n.selectedPiece=Ae,n):s(6,n.selectedPiece=void 0,n),n.selectedPiece!==void 0&&ue(),n.legalEnabled&&n.preMovesEnabled&&n.currentPreMove!==""){if(n.legalMoves.includes(n.currentPreMove)){const ze=n.currentPreMove;Un().then(()=>{N(ze)})}s(6,n.currentPreMove="",n),M($.NEXTMOVE)}},d=m=>{!n.legalEnabled||!n.preMovesEnabled||!n.movableEnabled||(M($.PREMOVE),D(m,!0,$.NEXTMOVE),s(6,n.currentPreMove=m,n),l("nextMove",{move:m}))},F=m=>{var he;const U=n.getPieceFromSquare(m.substring(0,2));if(!U)return;const re=U.name[0]==="w"?de.WHITE:de.BLACK;(he=g.openPromotionModal)==null||he.call(g,re===de.WHITE),C=m,O=n.isCapture(m),n.makeMove(m),M($.LEGAL),M($.SELECT),D(m)},Y=(m,U)=>{n.clearSquare(m,U),s(6,n)},q=()=>{n.clearAllPieces(),s(6,n)},J=(m,U)=>{n.setPiece(m,U),s(6,n)},G=(m,U)=>{var he;const re=(he=n.getPieceFromSquare(m))==null?void 0:he.name;!re||(U!==void 0?n.setPiece(m,`${U===de.WHITE?"w":"b"}${re[1]}`):n.setPiece(m,`${re[0]==="w"?"b":"w"}${re[1]}`),s(6,n))},le=(m,U)=>{const re=Math.floor(m/n.state.board.size*8),he=Math.floor(U/n.state.board.size*8),Ae=n.flipped?7-re:re,ze=n.flipped?he:7-he;if(Ae<0||Ae>7||ze<0||ze>7)return;const De=Object.keys(n.letters)[Ae],Et=(ze+1).toString();return`${De}${Et}`},X=m=>{if(!n.state.board.mouseEvents)return;if(m.button===2){S();return}if(!n.movableEnabled)return;const U=o.getBoundingClientRect(),re=m.clientX-U.left,he=m.clientY-U.top,Ae=le(re,he);if(!Ae)return;const ze=n.getPieceFromSquare(Ae);if(l("squareClick",{square:Ae,piece:ze?ze.name:void 0}),!n.selectableEnabled&&!n.draggableEnabled){S();return}if(!n.selectedPiece||n.selectedPiece.square===Ae)return;const De=n.selectedPiece.square+Ae;if(!n.legalEnabled){N(De),S();return}if(!b(n.selectedPiece.name)){n.preMovesEnabled&&n.preMoves.includes(De)&&(n.isPromotion(De)?d(`${De}q`):d(De)),S(!1);return}(ze===void 0||ze.name[0]!==n.selectedPiece.name[0])&&b(n.selectedPiece.name)&&(n.isPromotion(De)&&n.legalMoves.includes(De)?F(De):n.legalMoves.includes(De)&&N(De),S())},ae=m=>{const U=m.detail;n.legalEnabled?n.isPromotion(U)&&n.legalMoves.includes(`${U}q`)?F(U):n.legalMoves.includes(U)?N(U):n.preMovesEnabled&&n.preMoves.includes(U)?n.isPromotion(U)?d(`${U}q`):d(U):S():N(U),M($.LEGAL),M($.PREMOVE),s(6,n)},ue=m=>{var U;if(n.selectableEnabled||n.draggableEnabled){const re=n.getPieceFromSquare(m!=null?m:(U=n.selectedPiece)==null?void 0:U.square);if(!re||(n.selectableEnabled&&y(re.square,$.SELECT),!n.legalEnabled))return;M($.LEGAL),M($.PREMOVE),b(re.name)&&ee(n.legalMoves,re.square),b(re.name)||ee(n.preMoves,re.square,$.PREMOVE)}},ge=(m,U=!0,re="MOVE")=>{if(n.updatePiecesWithFen(m),U&&S(),M(),A(),k(!1),s(6,n.currentPreMove="",n),n.state.callbacks.getLastMove){const he=n.state.callbacks.getLastMove();s(6,n.lastMove=he,n),re!==!1&&(re!=="MOVE"?_(re):n.isCastling(he)?_("CASTLE"):_(re)),D(he)}else re!==!1&&_(re);ue(),s(6,n)},qe=()=>n.getShortFEN(),oe=m=>{!m||n.state.board.size===m||(s(6,n.state.board.size=m,n),L&&n.state.board.resizible&&document.body.style.setProperty("--boardSize",`${n.state.board.size}px`))},_e=m=>{!m||n.state.board.scale===m||(s(6,n.state.board.scale=m,n),L&&n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`))},Fe=m=>{var U;return(U=n.getPieceFromSquare(m))==null?void 0:U.name},Xe=m=>{s(6,n.state.drawTools.tools=m,n)},Ye=m=>{s(6,n.state.drawTools.tools=n.state.drawTools.tools.filter(U=>m?(!m.type||U.type!==m.type)&&(!m.from||U.type==="arrow"&&U.from!==m.from||U.type==="circle"&&U.square!==m.from)&&(!m.to||U.type==="arrow"&&U.to!==m.to)&&(m.fixed===void 0||U.fixed!==m.fixed):!1),n)},Ge=m=>{m===!1?s(6,n.state.movable.enabled=!1,n):(s(6,n.state.movable.enabled=!0,n),s(6,n.state.movable.color=m===!0?de.BOTH:m,n))},We=m=>{m.length<4||(s(6,n.lastMove=m,n),D(m))},pt=m=>{s(6,n.legalMoves=m,n)},mt=m=>{s(6,n.preMoves=m,n)},Ze=()=>n.state,ft=m=>{s(6,n.state=m,n),M(),k(!1),D(n.lastMove),D(n.currentPreMove,!0,$.NEXTMOVE),ue()},ct=m=>{m!==void 0&&(n.setConfigSettings(m),s(6,n),ft(n.state))},vt=m=>m.getConfig(),je=(m,U)=>{const re=o.getBoundingClientRect();n.legalEnabled&&(b(U.name)&&n.legalHover(le(m.detail.x-re.x-window.screenX,m.detail.y-re.y-window.scrollY)),!b(U.name)&&n.preMovesEnabled&&n.legalHover(le(m.detail.x-re.x-window.screenX,m.detail.y-re.y-window.scrollY),$.PREMOVE)),s(6,n)},dt=m=>{n.ghostPieceEnabled&&E(m),M($.SELECT)},Qe=m=>{const U=n.getPieceFromSquare(C.substring(2,4));if(!U)return;const re=U.name[0]+m.detail.toUpperCase(),he=C+m.detail;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(he),n.setPiece(U.square,re),s(6,n),_(O?"CAPTURE":"MOVE"),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(he),k()},Je=m=>{if(!n.selectedPiece)return;const U=n.selectedPiece.square+m;n.legalEnabled?n.isPromotion(U)&&n.legalMoves.includes(`${U}q`)?F(U):n.legalMoves.includes(U)?N(U):n.preMovesEnabled&&n.preMoves.includes(U)?n.isPromotion(U)?d(`${U}q`):d(U):S():N(U),S(!1)},ht=m=>{const U=n.getPieceFromSquare(m.square);U&&U.square===m.square&&U.name===m.name&&y(m.square,$.SELECT)};function Ct(m){if(!o||!m)return;if(i==null||i(),typeof window.ResizeObserver>"u")throw new Error("window.ResizeObserver is missing.");const U=new ResizeObserver(re=>{const he=m.getBoundingClientRect();re.forEach(()=>{s(6,n.state.board.size=Math.floor(he.width*window.devicePixelRatio/8)*8/window.devicePixelRatio,n),o.style.setProperty("width",`${Math.floor(he.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`),o.style.setProperty("height",`${Math.floor(he.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`)})});return U.observe(m),()=>{U.unobserve(m),U.disconnect()}}const Ut=m=>m==="a1"?n.flipped?"top-right":"bottom-left":m==="a8"?n.flipped?"bottom-right":"top-left":m==="h1"?n.flipped?"top-left":"bottom-right":m==="h8"?n.flipped?"bottom-left":"top-right":"",zt=m=>!n.movableEnabled||!n.state.board.mouseEvents||!n.draggableEnabled&&!n.selectableEnabled?"":n.legalEnabled?n.state.movable.color===de.BOTH?m?"w":"b":n.state.movable.color===de.WHITE&&(m||!m&&n.preMovesEnabled)?"w":n.state.movable.color===de.BLACK&&(!m||m&&n.preMovesEnabled)?"b":"":"wb";Bt(()=>{s(11,L=!0),k(!0),n.state.callbacks.getLastMove&&D(n.state.callbacks.getLastMove()),n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`)}),Hn(()=>{i==null||i(),L&&n.state.board.resizible&&document.body.style.removeProperty("--boardScale")});function Vt(m){Ve.call(this,t,m)}function Kt(m){Ve.call(this,t,m)}const Wt=m=>{l("piececlick",{piece:m}),p(m.square)},et=m=>{l("startDragging",{piece:m}),dt(m)},jt=(m,U)=>je(U,m);function Gt(m){Ve.call(this,t,m)}const _t=m=>ht(m),Qt=()=>S(),Xt=()=>S(),Yt=m=>Je(m.square),Zt=m=>{y(m.detail.square,$.LEGALHOVER)},Jt=m=>{_e(m.detail)};function tt(m){c=m,s(8,c)}function xt(m){fe[m?"unshift":"push"](()=>{g=m,s(10,g)})}const Pt=m=>l("drawCircle",{square:m.detail.square,color:m.detail.color}),$t=m=>l("drawArrow",{move:m.detail.move,color:m.detail.color});function At(m){fe[m?"unshift":"push"](()=>{o=m,s(7,o)})}function es(m){fe[m?"unshift":"push"](()=>{u=m,s(5,u)})}function ts(m){fe[m?"unshift":"push"](()=>{f=m,s(9,f)})}return t.$$set=m=>{"config"in m&&s(22,a=m.config),"className"in m&&s(0,r=m.className)},t.$$.update=()=>{t.$$.dirty[0]&32&&(i=Ct(u))},[r,y,p,S,_e,u,n,o,c,f,g,L,l,X,ae,je,dt,Qe,Je,ht,Ut,zt,a,M,P,T,H,W,D,R,Q,ee,ve,ie,k,_,N,d,F,Y,q,J,G,le,ge,qe,oe,Fe,Xe,Ye,Ge,We,pt,mt,Ze,ft,ct,vt,Vt,Kt,Wt,et,jt,Gt,_t,Qt,Xt,Yt,Zt,Jt,tt,xt,Pt,$t,At,es,ts]}class La extends Le{constructor(e){super(),Oe(this,e,Ta,ya,Ie,{config:22,className:0,clearAllSquares:23,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:24,removeCheckSquare:25,flipBoard:26,highlightManySquares:27,highlightMove:28,highlightMoves:29,highlightLegalMove:30,highlightLegalMoves:31,movePiece:32,removePiece:33,updateLegalState:34,playMoveSound:35,makeMove:36,makeNextMove:37,makeMovePromotion:38,removeSquareHighlight:39,removeAllPiece:40,createPiece:41,changeColorOfPiece:42,getSquareFromCoords:43,setFEN:44,getShortFEN:45,setSize:46,setScale:4,getPieceFromSquare:47,setTools:48,removeTools:49,setMovableColor:50,setLastMove:51,setLegalMoves:52,setPreMoves:53,getState:54,setState:55,setConfigSettings:56,getConfigFromState:57},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[23]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[24]}get removeCheckSquare(){return this.$$.ctx[25]}get flipBoard(){return this.$$.ctx[26]}get highlightManySquares(){return this.$$.ctx[27]}get highlightMove(){return this.$$.ctx[28]}get highlightMoves(){return this.$$.ctx[29]}get highlightLegalMove(){return this.$$.ctx[30]}get highlightLegalMoves(){return this.$$.ctx[31]}get movePiece(){return this.$$.ctx[32]}get removePiece(){return this.$$.ctx[33]}get updateLegalState(){return this.$$.ctx[34]}get playMoveSound(){return this.$$.ctx[35]}get makeMove(){return this.$$.ctx[36]}get makeNextMove(){return this.$$.ctx[37]}get makeMovePromotion(){return this.$$.ctx[38]}get removeSquareHighlight(){return this.$$.ctx[39]}get removeAllPiece(){return this.$$.ctx[40]}get createPiece(){return this.$$.ctx[41]}get changeColorOfPiece(){return this.$$.ctx[42]}get getSquareFromCoords(){return this.$$.ctx[43]}get setFEN(){return this.$$.ctx[44]}get getShortFEN(){return this.$$.ctx[45]}get setSize(){return this.$$.ctx[46]}get setScale(){return this.$$.ctx[4]}get getPieceFromSquare(){return this.$$.ctx[47]}get setTools(){return this.$$.ctx[48]}get removeTools(){return this.$$.ctx[49]}get setMovableColor(){return this.$$.ctx[50]}get setLastMove(){return this.$$.ctx[51]}get setLegalMoves(){return this.$$.ctx[52]}get setPreMoves(){return this.$$.ctx[53]}get getState(){return this.$$.ctx[54]}get setState(){return this.$$.ctx[55]}get setConfigSettings(){return this.$$.ctx[56]}get getConfigFromState(){return this.$$.ctx[57]}}const Zs=["standard","darkBlue"],Js=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function xs(t){let e,s,i;return{c(){e=V("input"),this.h()},l(a){e=K(a,"INPUT",{type:!0,class:!0}),this.h()},h(){v(e,"type","checkbox"),v(e,"class","mr-1")},m(a,r){Z(a,e,r),e.checked=t[0],s||(i=[ce(e,"change",t[8]),ce(e,"click",pn(t[7])),ce(e,"change",t[9])],s=!0)},p(a,r){r&1&&(e.checked=a[0])},d(a){a&&w(e),s=!1,rt(i)}}}function $s(t){let e,s,i;return{c(){e=Ne("svg"),s=Ne("path"),this.h()},l(a){e=Re(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=j(e);s=Re(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),j(s).forEach(w),r.forEach(w),this.h()},h(){v(s,"fill-rule","evenodd"),v(s,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),v(s,"clip-rule","evenodd"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"viewBox","0 0 20 20"),v(e,"fill","currentColor"),v(e,"class",i="w-5 h-5 transition "+(t[1]?"rotate-180":"rotate-0"))},m(a,r){Z(a,e,r),I(e,s)},p(a,r){r&2&&i!==(i="w-5 h-5 transition "+(a[1]?"rotate-180":"rotate-0"))&&v(e,"class",i)},d(a){a&&w(e)}}}function en(t){let e,s,i;const a=t[6].default,r=cn(a,t,t[5],null);return{c(){e=V("div"),r&&r.c(),this.h()},l(n){e=K(n,"DIV",{class:!0});var l=j(e);r&&r.l(l),l.forEach(w),this.h()},h(){v(e,"class","py-2 px-4")},m(n,l){Z(n,e,l),r&&r.m(e,null),i=!0},p(n,l){r&&r.p&&(!i||l&32)&&dn(r,a,n,n[5],i?gn(a,n[5],l,null):hn(n[5]),null)},i(n){i||(x(r,n),n&&ut(()=>{s||(s=qt(e,Rt,{},!0)),s.run(1)}),i=!0)},o(n){te(r,n),n&&(s||(s=qt(e,Rt,{},!1)),s.run(0)),i=!1},d(n){n&&w(e),r&&r.d(n),n&&s&&s.end()}}}function Oa(t){let e,s,i,a,r,n,l,o,u,c,f,g,C,O,L=t[0]!==void 0&&xs(t),M=t[3]&&$s(t),y=t[1]&&en(t);return{c(){e=V("div"),s=V("button"),i=V("div"),L&&L.c(),a=se(),r=V("span"),n=we(t[2]),o=se(),M&&M.c(),f=se(),y&&y.c(),this.h()},l(h){e=K(h,"DIV",{class:!0});var p=j(e);s=K(p,"BUTTON",{class:!0});var S=j(s);i=K(S,"DIV",{class:!0});var P=j(i);L&&L.l(P),a=ne(P),r=K(P,"SPAN",{class:!0});var T=j(r);n=Ce(T,t[2]),T.forEach(w),P.forEach(w),o=ne(S),M&&M.l(S),S.forEach(w),f=ne(p),y&&y.l(p),p.forEach(w),this.h()},h(){v(r,"class",l=t[0]===void 0?"ml-[21px]":""),v(i,"class","flex gap-1"),v(s,"class",u="flex justify-between px-4 py-2 "+(t[3]?"transition hover:bg-slate-800/40":"")+" rounded"),s.disabled=c=!t[3],v(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(h,p){Z(h,e,p),I(e,s),I(s,i),L&&L.m(i,null),I(i,a),I(i,r),I(r,n),I(s,o),M&&M.m(s,null),I(e,f),y&&y.m(e,null),g=!0,C||(O=ce(s,"click",t[10]),C=!0)},p(h,[p]){h[0]!==void 0?L?L.p(h,p):(L=xs(h),L.c(),L.m(i,a)):L&&(L.d(1),L=null),(!g||p&4)&&Dt(n,h[2]),(!g||p&1&&l!==(l=h[0]===void 0?"ml-[21px]":""))&&v(r,"class",l),h[3]?M?M.p(h,p):(M=$s(h),M.c(),M.m(s,null)):M&&(M.d(1),M=null),(!g||p&8&&u!==(u="flex justify-between px-4 py-2 "+(h[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&v(s,"class",u),(!g||p&8&&c!==(c=!h[3]))&&(s.disabled=c),h[1]?y?(y.p(h,p),p&2&&x(y,1)):(y=en(h),y.c(),x(y,1),y.m(e,null)):y&&(Be(),te(y,1,1,()=>{y=null}),He())},i(h){g||(x(y),g=!0)},o(h){te(y),g=!1},d(h){h&&w(e),L&&L.d(),M&&M.d(),y&&y.d(),C=!1,O()}}}function Ia(t,e,s){let{$$slots:i={},$$scope:a}=e;const r=wt();let{name:n="board"}=e,{enabled:l=void 0}=e,{showExpand:o=!0}=e,{expanded:u=!1}=e;function c(O){Ve.call(this,t,O)}const f=()=>r("changed",l);function g(){l=this.checked,s(0,l)}const C=()=>{s(1,u=!u)};return t.$$set=O=>{"name"in O&&s(2,n=O.name),"enabled"in O&&s(0,l=O.enabled),"showExpand"in O&&s(3,o=O.showExpand),"expanded"in O&&s(1,u=O.expanded),"$$scope"in O&&s(5,a=O.$$scope)},[l,u,n,o,r,a,i,c,f,g,C]}class lt extends Le{constructor(e){super(),Oe(this,e,Ia,Oa,Ie,{name:2,enabled:0,showExpand:3,expanded:1})}}function tn(t,e,s){const i=t.slice();return i[12]=e[s],i}function sn(t){let e,s=t[12]+"",i;return{c(){e=V("option"),i=we(s),this.h()},l(a){e=K(a,"OPTION",{});var r=j(e);i=Ce(r,s),r.forEach(w),this.h()},h(){e.__value=t[12],e.value=e.__value},m(a,r){Z(a,e,r),I(e,i)},p:Pe,d(a){a&&w(e)}}}function qa(t){let e,s,i,a,r,n,l,o,u,c,f,g,C,O,L,M,y,h,p,S,P,T,H,W,D,R,Q,ee,ve,ie,b,k=Zs,_=[];for(let E=0;E<k.length;E+=1)_[E]=sn(tn(t,k,E));return{c(){e=V("div"),s=V("select");for(let E=0;E<_.length;E+=1)_[E].c();i=se(),a=V("label"),r=we("board theme"),n=se(),l=V("div"),o=V("input"),u=se(),c=V("label"),f=we("mouseEvents"),g=se(),C=V("div"),O=V("input"),L=se(),M=V("label"),y=we("notation"),h=se(),p=V("div"),S=V("input"),P=se(),T=V("label"),H=we("flipped"),W=se(),D=V("div"),R=V("input"),Q=se(),ee=V("label"),ve=we("resizible"),this.h()},l(E){e=K(E,"DIV",{class:!0});var A=j(e);s=K(A,"SELECT",{class:!0});var N=j(s);for(let ue=0;ue<_.length;ue+=1)_[ue].l(N);N.forEach(w),i=ne(A),a=K(A,"LABEL",{for:!0,class:!0});var d=j(a);r=Ce(d,"board theme"),d.forEach(w),A.forEach(w),n=ne(E),l=K(E,"DIV",{class:!0});var F=j(l);o=K(F,"INPUT",{id:!0,type:!0,class:!0}),u=ne(F),c=K(F,"LABEL",{for:!0,class:!0});var Y=j(c);f=Ce(Y,"mouseEvents"),Y.forEach(w),F.forEach(w),g=ne(E),C=K(E,"DIV",{class:!0});var q=j(C);O=K(q,"INPUT",{id:!0,type:!0,class:!0}),L=ne(q),M=K(q,"LABEL",{for:!0,class:!0});var J=j(M);y=Ce(J,"notation"),J.forEach(w),q.forEach(w),h=ne(E),p=K(E,"DIV",{class:!0});var G=j(p);S=K(G,"INPUT",{id:!0,type:!0,class:!0}),P=ne(G),T=K(G,"LABEL",{for:!0,class:!0});var le=j(T);H=Ce(le,"flipped"),le.forEach(w),G.forEach(w),W=ne(E),D=K(E,"DIV",{class:!0});var X=j(D);R=K(X,"INPUT",{id:!0,type:!0,class:!0}),Q=ne(X),ee=K(X,"LABEL",{for:!0,class:!0});var ae=j(ee);ve=Ce(ae,"resizible"),ae.forEach(w),X.forEach(w),this.h()},h(){v(s,"class","svelte-lnr7xr"),t[0]===void 0&&ut(()=>t[7].call(s)),v(a,"for","boardTheme"),v(a,"class","select-none"),v(e,"class","mb-2"),v(o,"id","mouseEvents"),v(o,"type","checkbox"),v(o,"class","svelte-lnr7xr"),v(c,"for","mouseEvents"),v(c,"class","select-none"),v(l,"class","mb-2"),v(O,"id","notation"),v(O,"type","checkbox"),v(O,"class","svelte-lnr7xr"),v(M,"for","notation"),v(M,"class","select-none"),v(C,"class","mb-2"),v(S,"id","flipped"),v(S,"type","checkbox"),v(S,"class","svelte-lnr7xr"),v(T,"for","flipped"),v(T,"class","select-none"),v(p,"class","mb-2"),v(R,"id","resizibleEnabled"),v(R,"type","checkbox"),v(R,"class","svelte-lnr7xr"),v(ee,"for","resizibleEnabled"),v(ee,"class","select-none"),v(D,"class","mt-2 mb-1")},m(E,A){Z(E,e,A),I(e,s);for(let N=0;N<_.length;N+=1)_[N].m(s,null);bt(s,t[0]),I(e,i),I(e,a),I(a,r),Z(E,n,A),Z(E,l,A),I(l,o),o.checked=t[1],I(l,u),I(l,c),I(c,f),Z(E,g,A),Z(E,C,A),I(C,O),O.checked=t[2],I(C,L),I(C,M),I(M,y),Z(E,h,A),Z(E,p,A),I(p,S),S.checked=t[3],I(p,P),I(p,T),I(T,H),Z(E,W,A),Z(E,D,A),I(D,R),R.checked=t[4],I(D,Q),I(D,ee),I(ee,ve),ie||(b=[ce(s,"change",t[7]),ce(o,"change",t[8]),ce(O,"change",t[9]),ce(S,"change",t[10]),ce(R,"change",t[11])],ie=!0)},p(E,A){if(A&0){k=Zs;let N;for(N=0;N<k.length;N+=1){const d=tn(E,k,N);_[N]?_[N].p(d,A):(_[N]=sn(d),_[N].c(),_[N].m(s,null))}for(;N<_.length;N+=1)_[N].d(1);_.length=k.length}A&1&&bt(s,E[0]),A&2&&(o.checked=E[1]),A&4&&(O.checked=E[2]),A&8&&(S.checked=E[3]),A&16&&(R.checked=E[4])},d(E){E&&w(e),at(_,E),E&&w(n),E&&w(l),E&&w(g),E&&w(C),E&&w(h),E&&w(p),E&&w(W),E&&w(D),ie=!1,rt(b)}}}function Fa(t){let e,s;return e=new lt({props:{name:t[5],expanded:t[6],$$slots:{default:[qa]},$$scope:{ctx:t}}}),{c(){Ee(e.$$.fragment)},l(i){Me(e.$$.fragment,i)},m(i,a){ke(e,i,a),s=!0},p(i,[a]){const r={};a&32&&(r.name=i[5]),a&64&&(r.expanded=i[6]),a&32799&&(r.$$scope={dirty:a,ctx:i}),e.$set(r)},i(i){s||(x(e.$$.fragment,i),s=!0)},o(i){te(e.$$.fragment,i),s=!1},d(i){Se(e,i)}}}function Na(t,e,s){let{name:i="Board"}=e,{boardTheme:a}=e,{mouseEvents:r}=e,{notation:n}=e,{flipped:l}=e,{resizible:o=!1}=e,{expanded:u=!1}=e;function c(){a=us(this),s(0,a)}function f(){r=this.checked,s(1,r)}function g(){n=this.checked,s(2,n)}function C(){l=this.checked,s(3,l)}function O(){o=this.checked,s(4,o)}return t.$$set=L=>{"name"in L&&s(5,i=L.name),"boardTheme"in L&&s(0,a=L.boardTheme),"mouseEvents"in L&&s(1,r=L.mouseEvents),"notation"in L&&s(2,n=L.notation),"flipped"in L&&s(3,l=L.flipped),"resizible"in L&&s(4,o=L.resizible),"expanded"in L&&s(6,u=L.expanded)},[a,r,n,l,o,i,u,c,f,g,C,O]}class Ra extends Le{constructor(e){super(),Oe(this,e,Na,Fa,Ie,{name:5,boardTheme:0,mouseEvents:1,notation:2,flipped:3,resizible:4,expanded:6})}}function Da(t){let e,s,i,a,r,n,l,o,u,c;return{c(){e=V("div"),s=V("select"),i=V("option"),a=we("Both"),r=V("option"),n=we("White"),l=V("option"),o=we("Black"),this.h()},l(f){e=K(f,"DIV",{});var g=j(e);s=K(g,"SELECT",{class:!0});var C=j(s);i=K(C,"OPTION",{});var O=j(i);a=Ce(O,"Both"),O.forEach(w),r=K(C,"OPTION",{});var L=j(r);n=Ce(L,"White"),L.forEach(w),l=K(C,"OPTION",{});var M=j(l);o=Ce(M,"Black"),M.forEach(w),C.forEach(w),g.forEach(w),this.h()},h(){i.__value=de.BOTH,i.value=i.__value,r.__value=de.WHITE,r.value=r.__value,l.__value=de.BLACK,l.value=l.__value,v(s,"class","svelte-xrxnwg"),t[1]===void 0&&ut(()=>t[4].call(s))},m(f,g){Z(f,e,g),I(e,s),I(s,i),I(i,a),I(s,r),I(r,n),I(s,l),I(l,o),bt(s,t[1]),u||(c=ce(s,"change",t[4]),u=!0)},p(f,g){g&2&&bt(s,f[1])},d(f){f&&w(e),u=!1,c()}}}function Ba(t){let e,s,i;function a(n){t[5](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[Da]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),fe.push(()=>pe(e,"enabled",a)),{c(){Ee(e.$$.fragment)},l(n){Me(e.$$.fragment,n)},m(n,l){ke(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&66&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],me(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){Se(e,n)}}}function Ha(t,e,s){let{name:i="Movable"}=e,{enabled:a=!1}=e,{color:r}=e,{expanded:n=!1}=e;function l(){r=us(this),s(1,r)}function o(u){a=u,s(0,a)}return t.$$set=u=>{"name"in u&&s(2,i=u.name),"enabled"in u&&s(0,a=u.enabled),"color"in u&&s(1,r=u.color),"expanded"in u&&s(3,n=u.expanded)},[a,r,i,n,l,o]}class Ua extends Le{constructor(e){super(),Oe(this,e,Ha,Ba,Ie,{name:2,enabled:0,color:1,expanded:3})}}function nn(t,e,s){const i=t.slice();return i[12]=e[s],i}function an(t){let e,s,i,a,r,n,l,o,u,c,f,g,C,O,L,M,y=Js,h=[];for(let p=0;p<y.length;p+=1)h[p]=rn(nn(t,y,p));return{c(){e=V("div"),s=V("div"),i=V("input"),a=se(),r=V("label"),n=we("duration"),l=se(),o=V("div"),u=V("select");for(let p=0;p<h.length;p+=1)h[p].c();c=se(),f=V("label"),g=we("easing"),this.h()},l(p){e=K(p,"DIV",{class:!0});var S=j(e);s=K(S,"DIV",{class:!0});var P=j(s);i=K(P,"INPUT",{id:!0,type:!0,class:!0}),a=ne(P),r=K(P,"LABEL",{for:!0,class:!0});var T=j(r);n=Ce(T,"duration"),T.forEach(w),P.forEach(w),l=ne(S),o=K(S,"DIV",{class:!0});var H=j(o);u=K(H,"SELECT",{id:!0,class:!0});var W=j(u);for(let R=0;R<h.length;R+=1)h[R].l(W);W.forEach(w),c=ne(H),f=K(H,"LABEL",{for:!0,class:!0});var D=j(f);g=Ce(D,"easing"),D.forEach(w),H.forEach(w),S.forEach(w),this.h()},h(){v(i,"id","transitionDuration"),v(i,"type","number"),v(i,"class","w-16 svelte-1qpp6cx"),v(r,"for","transitionDuration"),v(r,"class","select-none"),v(s,"class","flex gap-2 mb-2"),v(u,"id","easingFuncs"),v(u,"class","svelte-1qpp6cx"),t[4]===void 0&&ut(()=>t[10].call(u)),v(f,"for","easingFuncs"),v(f,"class","select-none"),v(o,"class","flex gap-2"),v(e,"class","pl-2 pr-4 flex-col")},m(p,S){Z(p,e,S),I(e,s),I(s,i),bs(i,t[3]),I(s,a),I(s,r),I(r,n),I(e,l),I(e,o),I(o,u);for(let P=0;P<h.length;P+=1)h[P].m(u,null);bt(u,t[4]),I(o,c),I(o,f),I(f,g),O=!0,L||(M=[ce(i,"input",t[9]),ce(u,"change",t[10])],L=!0)},p(p,S){if(S&8&&_n(i.value)!==p[3]&&bs(i,p[3]),S&0){y=Js;let P;for(P=0;P<y.length;P+=1){const T=nn(p,y,P);h[P]?h[P].p(T,S):(h[P]=rn(T),h[P].c(),h[P].m(u,null))}for(;P<h.length;P+=1)h[P].d(1);h.length=y.length}S&16&&bt(u,p[4])},i(p){O||(p&&ut(()=>{C||(C=qt(e,Rt,{},!0)),C.run(1)}),O=!0)},o(p){p&&(C||(C=qt(e,Rt,{},!1)),C.run(0)),O=!1},d(p){p&&w(e),at(h,p),p&&C&&C.end(),L=!1,rt(M)}}}function rn(t){let e,s=t[12]+"",i;return{c(){e=V("option"),i=we(s),this.h()},l(a){e=K(a,"OPTION",{});var r=j(e);i=Ce(r,s),r.forEach(w),this.h()},h(){e.__value=t[12],e.value=e.__value},m(a,r){Z(a,e,r),I(e,i)},p:Pe,d(a){a&&w(e)}}}function za(t){let e,s,i,a,r,n,l,o,u,c,f,g,C,O,L,M=t[2]&&an(t);return{c(){e=V("div"),s=V("input"),i=se(),a=V("label"),r=we("ghost piece"),n=se(),l=V("div"),o=V("input"),u=se(),c=V("label"),f=we("transition"),g=se(),M&&M.c(),C=Te(),this.h()},l(y){e=K(y,"DIV",{class:!0});var h=j(e);s=K(h,"INPUT",{id:!0,type:!0,class:!0}),i=ne(h),a=K(h,"LABEL",{for:!0,class:!0});var p=j(a);r=Ce(p,"ghost piece"),p.forEach(w),h.forEach(w),n=ne(y),l=K(y,"DIV",{class:!0});var S=j(l);o=K(S,"INPUT",{id:!0,type:!0,class:!0}),u=ne(S),c=K(S,"LABEL",{for:!0,class:!0});var P=j(c);f=Ce(P,"transition"),P.forEach(w),S.forEach(w),g=ne(y),M&&M.l(y),C=Te(),this.h()},h(){v(s,"id","ghostPiece"),v(s,"type","checkbox"),v(s,"class","svelte-1qpp6cx"),v(a,"for","ghostPiece"),v(a,"class","select-none"),v(e,"class","mb-2"),v(o,"id","draggableEnabled"),v(o,"type","checkbox"),v(o,"class","svelte-1qpp6cx"),v(c,"for","draggableEnabled"),v(c,"class","select-none"),v(l,"class","mb-2")},m(y,h){Z(y,e,h),I(e,s),s.checked=t[1],I(e,i),I(e,a),I(a,r),Z(y,n,h),Z(y,l,h),I(l,o),o.checked=t[2],I(l,u),I(l,c),I(c,f),Z(y,g,h),M&&M.m(y,h),Z(y,C,h),O||(L=[ce(s,"change",t[7]),ce(o,"change",t[8])],O=!0)},p(y,h){h&2&&(s.checked=y[1]),h&4&&(o.checked=y[2]),y[2]?M?(M.p(y,h),h&4&&x(M,1)):(M=an(y),M.c(),x(M,1),M.m(C.parentNode,C)):M&&(Be(),te(M,1,1,()=>{M=null}),He())},d(y){y&&w(e),y&&w(n),y&&w(l),y&&w(g),M&&M.d(y),y&&w(C),O=!1,rt(L)}}}function Va(t){let e,s,i;function a(n){t[11](n)}let r={name:t[5],expanded:t[6],$$slots:{default:[za]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),fe.push(()=>pe(e,"enabled",a)),{c(){Ee(e.$$.fragment)},l(n){Me(e.$$.fragment,n)},m(n,l){ke(e,n,l),i=!0},p(n,[l]){const o={};l&32&&(o.name=n[5]),l&64&&(o.expanded=n[6]),l&32798&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],me(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){Se(e,n)}}}function Ka(t,e,s){let{name:i="Draggable"}=e,{enabled:a=!1}=e,{ghostPiece:r=!1}=e,{transition:n=!1}=e,{duration:l=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function c(){r=this.checked,s(1,r)}function f(){n=this.checked,s(2,n)}function g(){l=_n(this.value),s(3,l)}function C(){o=us(this),s(4,o)}function O(L){a=L,s(0,a)}return t.$$set=L=>{"name"in L&&s(5,i=L.name),"enabled"in L&&s(0,a=L.enabled),"ghostPiece"in L&&s(1,r=L.ghostPiece),"transition"in L&&s(2,n=L.transition),"duration"in L&&s(3,l=L.duration),"easing"in L&&s(4,o=L.easing),"expanded"in L&&s(6,u=L.expanded)},[a,r,n,l,o,i,u,c,f,g,C,O]}class Wa extends Le{constructor(e){super(),Oe(this,e,Ka,Va,Ie,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function ln(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function on(t){let e,s,i,a,r=t[7]+"",n,l,o,u;function c(){t[5].call(s,t[7])}return{c(){e=V("div"),s=V("input"),i=se(),a=V("label"),n=we(r),l=se(),this.h()},l(f){e=K(f,"DIV",{class:!0});var g=j(e);s=K(g,"INPUT",{id:!0,type:!0}),i=ne(g),a=K(g,"LABEL",{for:!0,class:!0});var C=j(a);n=Ce(C,r),C.forEach(w),l=ne(g),g.forEach(w),this.h()},h(){v(s,"id",t[7]+"Enabled"),v(s,"type","checkbox"),v(a,"for",t[7]+"Enabled"),v(a,"class","select-none"),v(e,"class","mb-2")},m(f,g){Z(f,e,g),I(e,s),s.checked=t[1][t[7]],I(e,i),I(e,a),I(a,n),I(e,l),o||(u=ce(s,"change",c),o=!0)},p(f,g){t=f,g&18&&(s.checked=t[1][t[7]])},d(f){f&&w(e),o=!1,u()}}}function ja(t){let e,s=t[4],i=[];for(let a=0;a<s.length;a+=1)i[a]=on(ln(t,s,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Te()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);e=Te()},m(a,r){for(let n=0;n<i.length;n+=1)i[n].m(a,r);Z(a,e,r)},p(a,r){if(r&18){s=a[4];let n;for(n=0;n<s.length;n+=1){const l=ln(a,s,n);i[n]?i[n].p(l,r):(i[n]=on(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(a){at(i,a),a&&w(e)}}}function Ga(t){let e,s,i;function a(n){t[6](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[ja]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),fe.push(()=>pe(e,"enabled",a)),{c(){Ee(e.$$.fragment)},l(n){Me(e.$$.fragment,n)},m(n,l){ke(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],me(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){Se(e,n)}}}function Qa(t,e,s){let{name:i="Highlight"}=e,{enabled:a=!1}=e,{settings:r}=e;const n=["select","legal","move","preMove","nextMove","check"];let{expanded:l=!1}=e;function o(c){r[c]=this.checked,s(1,r)}function u(c){a=c,s(0,a)}return t.$$set=c=>{"name"in c&&s(2,i=c.name),"enabled"in c&&s(0,a=c.enabled),"settings"in c&&s(1,r=c.settings),"expanded"in c&&s(3,l=c.expanded)},[a,r,i,l,n,o,u]}class Xa extends Le{constructor(e){super(),Oe(this,e,Qa,Ga,Ie,{name:2,enabled:0,settings:1,expanded:3})}}function Ya(t){let e,s,i,a,r,n,l,o,u,c,f,g,C;return{c(){e=V("div"),s=V("input"),i=se(),a=V("label"),r=we("L shape knight move"),n=se(),l=V("div"),o=V("input"),u=se(),c=V("label"),f=we("only chess move"),this.h()},l(O){e=K(O,"DIV",{class:!0});var L=j(e);s=K(L,"INPUT",{id:!0,type:!0}),i=ne(L),a=K(L,"LABEL",{for:!0,class:!0});var M=j(a);r=Ce(M,"L shape knight move"),M.forEach(w),L.forEach(w),n=ne(O),l=K(O,"DIV",{class:!0});var y=j(l);o=K(y,"INPUT",{id:!0,type:!0}),u=ne(y),c=K(y,"LABEL",{for:!0,class:!0});var h=j(c);f=Ce(h,"only chess move"),h.forEach(w),y.forEach(w),this.h()},h(){v(s,"id","knightLShapeMoveEnabled"),v(s,"type","checkbox"),v(a,"for","knightLShapeMoveEnabled"),v(a,"class","select-none"),v(e,"class","mb-2"),v(o,"id","onlyChessMoveEnabled"),v(o,"type","checkbox"),v(c,"for","onlyChessMoveEnabled"),v(c,"class","select-none"),v(l,"class","mb-2")},m(O,L){Z(O,e,L),I(e,s),s.checked=t[1],I(e,i),I(e,a),I(a,r),Z(O,n,L),Z(O,l,L),I(l,o),o.checked=t[2],I(l,u),I(l,c),I(c,f),g||(C=[ce(s,"change",t[5]),ce(o,"change",t[6])],g=!0)},p(O,L){L&2&&(s.checked=O[1]),L&4&&(o.checked=O[2])},d(O){O&&w(e),O&&w(n),O&&w(l),g=!1,rt(C)}}}function Za(t){let e,s,i;function a(n){t[7](n)}let r={name:t[3],expanded:t[4],$$slots:{default:[Ya]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),fe.push(()=>pe(e,"enabled",a)),{c(){Ee(e.$$.fragment)},l(n){Me(e.$$.fragment,n)},m(n,l){ke(e,n,l),i=!0},p(n,[l]){const o={};l&8&&(o.name=n[3]),l&16&&(o.expanded=n[4]),l&262&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],me(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){Se(e,n)}}}function Ja(t,e,s){let{name:i="DrawTools"}=e,{enabled:a=!1}=e,{knightLShape:r=!1}=e,{onlyChessMove:n=!1}=e,{expanded:l=!1}=e;function o(){r=this.checked,s(1,r)}function u(){n=this.checked,s(2,n)}function c(f){a=f,s(0,a)}return t.$$set=f=>{"name"in f&&s(3,i=f.name),"enabled"in f&&s(0,a=f.enabled),"knightLShape"in f&&s(1,r=f.knightLShape),"onlyChessMove"in f&&s(2,n=f.onlyChessMove),"expanded"in f&&s(4,l=f.expanded)},[a,r,n,i,l,o,u,c]}class xa extends Le{constructor(e){super(),Oe(this,e,Ja,Za,Ie,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function un(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function fn(t){let e,s,i,a,r=t[7].toLowerCase()+"",n,l,o,u;function c(){t[5].call(s,t[7])}return{c(){e=V("div"),s=V("input"),i=se(),a=V("label"),n=we(r),l=se(),this.h()},l(f){e=K(f,"DIV",{class:!0});var g=j(e);s=K(g,"INPUT",{id:!0,type:!0}),i=ne(g),a=K(g,"LABEL",{for:!0,class:!0});var C=j(a);n=Ce(C,r),C.forEach(w),l=ne(g),g.forEach(w),this.h()},h(){v(s,"id",t[7]+"Enabled"),v(s,"type","checkbox"),v(a,"for",t[7]+"Enabled"),v(a,"class","select-none"),v(e,"class","mb-2")},m(f,g){Z(f,e,g),I(e,s),s.checked=t[1][t[7]],I(e,i),I(e,a),I(a,n),I(e,l),o||(u=ce(s,"change",c),o=!0)},p(f,g){t=f,g&18&&(s.checked=t[1][t[7]])},d(f){f&&w(e),o=!1,u()}}}function $a(t){let e,s=t[4],i=[];for(let a=0;a<s.length;a+=1)i[a]=fn(un(t,s,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Te()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);e=Te()},m(a,r){for(let n=0;n<i.length;n+=1)i[n].m(a,r);Z(a,e,r)},p(a,r){if(r&18){s=a[4];let n;for(n=0;n<s.length;n+=1){const l=un(a,s,n);i[n]?i[n].p(l,r):(i[n]=fn(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(a){at(i,a),a&&w(e)}}}function er(t){let e,s,i;function a(n){t[6](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[$a]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),fe.push(()=>pe(e,"enabled",a)),{c(){Ee(e.$$.fragment)},l(n){Me(e.$$.fragment,n)},m(n,l){ke(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],me(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){Se(e,n)}}}function tr(t,e,s){let{name:i="Sounds"}=e,{enabled:a=!1}=e,{settings:r}=e;const n=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:l=!1}=e;function o(c){r[c]=this.checked,s(1,r)}function u(c){a=c,s(0,a)}return t.$$set=c=>{"name"in c&&s(2,i=c.name),"enabled"in c&&s(0,a=c.enabled),"settings"in c&&s(1,r=c.settings),"expanded"in c&&s(3,l=c.expanded)},[a,r,i,l,n,o,u]}class sr extends Le{constructor(e){super(),Oe(this,e,tr,er,Ie,{name:2,enabled:0,settings:1,expanded:3})}}function nr(t){let e,s;return{c(){e=Ne("svg"),s=Ne("path"),this.h()},l(i){e=Re(i,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=j(e);s=Re(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),j(s).forEach(w),a.forEach(w),this.h()},h(){v(s,"stroke-linecap","round"),v(s,"stroke-linejoin","round"),v(s,"stroke-width","2"),v(s,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),Ue(e,"transform","translate(1px, 0px)"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"class","h-5"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"aria-hidden","true"),v(e,"stroke","currentColor")},m(i,a){Z(i,e,a),I(e,s)},d(i){i&&w(e)}}}function ir(t){let e,s;return{c(){e=Ne("svg"),s=Ne("path"),this.h()},l(i){e=Re(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=j(e);s=Re(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),j(s).forEach(w),a.forEach(w),this.h()},h(){v(s,"stroke-linecap","round"),v(s,"stroke-linejoin","round"),v(s,"stroke-width","2"),v(s,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"class","h-5 text-green-500"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"aria-hidden","true"),v(e,"stroke","currentColor")},m(i,a){Z(i,e,a),I(e,s)},d(i){i&&w(e)}}}function ar(t){let e,s,i;function a(l,o){return l[1]?ir:nr}let r=a(t),n=r(t);return{c(){e=V("button"),n.c(),this.h()},l(l){e=K(l,"BUTTON",{type:!0,class:!0});var o=j(e);n.l(o),o.forEach(w),this.h()},h(){v(e,"type","button"),v(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(l,o){Z(l,e,o),n.m(e,null),t[4](e),s||(i=ce(e,"click",t[2]),s=!0)},p(l,[o]){r!==(r=a(l))&&(n.d(1),n=r(l),n&&(n.c(),n.m(e,null)))},i:Pe,o:Pe,d(l){l&&w(e),n.d(),t[4](null),s=!1,i()}}}function rr(t,e,s){let{copyText:i}=e,a,r=!1;function n(){navigator.clipboard.writeText(i),s(1,r=!0),setTimeout(()=>{s(1,r=!1)},2e3),a.setAttribute("data-cooltipz-dir","top"),a.setAttribute("aria-label","Copied!"),setTimeout(()=>{a.removeAttribute("aria-label"),a.removeAttribute("data-cooltipz-dir")},2e3)}function l(o){fe[o?"unshift":"push"](()=>{a=o,s(0,a)})}return t.$$set=o=>{"copyText"in o&&s(3,i=o.copyText)},[a,r,n,i,l]}class lr extends Le{constructor(e){super(),Oe(this,e,rr,ar,Ie,{copyText:3})}}function or(t){let e,s,i;function a(n){t[2](n)}let r={name:t[1],showExpand:!1};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),fe.push(()=>pe(e,"enabled",a)),e.$on("changed",t[3]),{c(){Ee(e.$$.fragment)},l(n){Me(e.$$.fragment,n)},m(n,l){ke(e,n,l),i=!0},p(n,[l]){const o={};l&2&&(o.name=n[1]),!s&&l&1&&(s=!0,o.enabled=n[0],me(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){te(e.$$.fragment,n),i=!1},d(n){Se(e,n)}}}function ur(t,e,s){let{name:i="Legal"}=e,{enabled:a=!1}=e;function r(l){a=l,s(0,a)}function n(l){Ve.call(this,t,l)}return t.$$set=l=>{"name"in l&&s(1,i=l.name),"enabled"in l&&s(0,a=l.enabled)},[a,i,r,n]}class fr extends Le{constructor(e){super(),Oe(this,e,ur,or,Ie,{name:1,enabled:0})}}function cr(t){let e,s,i,a,r,n,l,o,u,c,f,g,C,O,L,M,y,h,p,S,P,T,H,W,D,R,Q,ee,ve,ie,b,k,_,E,A,N,d,F,Y,q,J,G,le,X,ae,ue,ge,qe,oe,_e,Fe,Xe,Ye,Ge,We,pt,mt,Ze,ft,ct,vt,je,dt,Qe,Je,ht,Ct;function Ut(z){t[7](z)}function zt(z){t[8](z)}function Vt(z){t[9](z)}function Kt(z){t[10](z)}function Wt(z){t[11](z)}let et={expanded:!0};t[0].board.boardTheme!==void 0&&(et.boardTheme=t[0].board.boardTheme),t[0].board.mouseEvents!==void 0&&(et.mouseEvents=t[0].board.mouseEvents),t[0].board.notation!==void 0&&(et.notation=t[0].board.notation),t[0].board.flipped!==void 0&&(et.flipped=t[0].board.flipped),t[0].board.resizible!==void 0&&(et.resizible=t[0].board.resizible),n=new Ra({props:et}),fe.push(()=>pe(n,"boardTheme",Ut)),fe.push(()=>pe(n,"mouseEvents",zt)),fe.push(()=>pe(n,"notation",Vt)),fe.push(()=>pe(n,"flipped",Kt)),fe.push(()=>pe(n,"resizible",Wt));function jt(z){t[12](z)}function Gt(z){t[13](z)}let _t={expanded:!0};t[0].movable.enabled!==void 0&&(_t.enabled=t[0].movable.enabled),t[0].movable.color!==void 0&&(_t.color=t[0].movable.color),C=new Ua({props:_t}),fe.push(()=>pe(C,"enabled",jt)),fe.push(()=>pe(C,"color",Gt));function Qt(z){t[14](z)}function Xt(z){t[15](z)}function Yt(z){t[16](z)}function Zt(z){t[17](z)}function Jt(z){t[18](z)}let tt={};t[0].draggable.enabled!==void 0&&(tt.enabled=t[0].draggable.enabled),t[0].draggable.ghostPiece.enabled!==void 0&&(tt.ghostPiece=t[0].draggable.ghostPiece.enabled),t[0].draggable.transition.enabled!==void 0&&(tt.transition=t[0].draggable.transition.enabled),t[0].draggable.transition.settings.duration!==void 0&&(tt.duration=t[0].draggable.transition.settings.duration),t[0].draggable.transition.settings.easing!==void 0&&(tt.easing=t[0].draggable.transition.settings.easing),y=new Wa({props:tt}),fe.push(()=>pe(y,"enabled",Qt)),fe.push(()=>pe(y,"ghostPiece",Xt)),fe.push(()=>pe(y,"transition",Yt)),fe.push(()=>pe(y,"duration",Zt)),fe.push(()=>pe(y,"easing",Jt));function xt(z){t[19](z)}let Pt={name:"Selectable",showExpand:!1};t[0].selectable.enabled!==void 0&&(Pt.enabled=t[0].selectable.enabled),W=new lt({props:Pt}),fe.push(()=>pe(W,"enabled",xt));function $t(z){t[20](z)}let At={};t[0].legal.enabled!==void 0&&(At.enabled=t[0].legal.enabled),Q=new fr({props:At}),fe.push(()=>pe(Q,"enabled",$t)),Q.$on("changed",t[21]);function es(z){t[22](z)}function ts(z){t[23](z)}let m={};t[0].highlight.enabled!==void 0&&(m.enabled=t[0].highlight.enabled),t[0].highlight.settings!==void 0&&(m.settings=t[0].highlight.settings),ie=new Xa({props:m}),fe.push(()=>pe(ie,"enabled",es)),fe.push(()=>pe(ie,"settings",ts));function U(z){t[24](z)}function re(z){t[25](z)}function he(z){t[26](z)}let Ae={};t[0].drawTools.enabled!==void 0&&(Ae.enabled=t[0].drawTools.enabled),t[0].drawTools.settings.knightLShape!==void 0&&(Ae.knightLShape=t[0].drawTools.settings.knightLShape),t[0].drawTools.settings.onlyChessMove!==void 0&&(Ae.onlyChessMove=t[0].drawTools.settings.onlyChessMove),E=new xa({props:Ae}),fe.push(()=>pe(E,"enabled",U)),fe.push(()=>pe(E,"knightLShape",re)),fe.push(()=>pe(E,"onlyChessMove",he));function ze(z){t[27](z)}function De(z){t[28](z)}let Et={};t[0].sounds.enabled!==void 0&&(Et.enabled=t[0].sounds.enabled),t[0].sounds.settings!==void 0&&(Et.settings=t[0].sounds.settings),Y=new sr({props:Et}),fe.push(()=>pe(Y,"enabled",ze)),fe.push(()=>pe(Y,"settings",De));let yn={config:t[6],className:"rounded-md"};return ae=new La({props:yn}),t[29](ae),je=new lr({props:{copyText:t[4]}}),Qe=new Xn({props:{source:t[4],language:"svelte"}}),{c(){e=V("link"),s=se(),i=V("div"),a=V("div"),r=V("div"),Ee(n.$$.fragment),g=se(),Ee(C.$$.fragment),M=se(),Ee(y.$$.fragment),H=se(),Ee(W.$$.fragment),R=se(),Ee(Q.$$.fragment),ve=se(),Ee(ie.$$.fragment),_=se(),Ee(E.$$.fragment),F=se(),Ee(Y.$$.fragment),G=se(),le=V("div"),X=V("div"),Ee(ae.$$.fragment),ue=se(),ge=V("div"),qe=V("div"),oe=V("div"),_e=V("button"),Fe=V("span"),Xe=we("ts"),Ge=se(),We=V("span"),pt=we("/"),mt=se(),Ze=V("span"),ft=we("js"),vt=se(),Ee(je.$$.fragment),dt=se(),Ee(Qe.$$.fragment),this.h()},l(z){const be=zn("svelte-tebjht",document.head);e=K(be,"LINK",{rel:!0,href:!0}),be.forEach(w),s=ne(z),i=K(z,"DIV",{class:!0});var xe=j(i);a=K(xe,"DIV",{class:!0});var st=j(a);r=K(st,"DIV",{class:!0});var ye=j(r);Me(n.$$.fragment,ye),g=ne(ye),Me(C.$$.fragment,ye),M=ne(ye),Me(y.$$.fragment,ye),H=ne(ye),Me(W.$$.fragment,ye),R=ne(ye),Me(Q.$$.fragment,ye),ve=ne(ye),Me(ie.$$.fragment,ye),_=ne(ye),Me(E.$$.fragment,ye),F=ne(ye),Me(Y.$$.fragment,ye),ye.forEach(w),G=ne(st),le=K(st,"DIV",{class:!0});var ot=j(le);X=K(ot,"DIV",{class:!0});var Mt=j(X);Me(ae.$$.fragment,Mt),Mt.forEach(w),ue=ne(ot),ge=K(ot,"DIV",{class:!0});var gt=j(ge);qe=K(gt,"DIV",{class:!0});var $e=j(qe);oe=K($e,"DIV",{class:!0});var nt=j(oe);_e=K(nt,"BUTTON",{class:!0});var it=j(_e);Fe=K(it,"SPAN",{class:!0});var kt=j(Fe);Xe=Ce(kt,"ts"),kt.forEach(w),Ge=ne(it),We=K(it,"SPAN",{class:!0});var St=j(We);pt=Ce(St,"/"),St.forEach(w),mt=ne(it),Ze=K(it,"SPAN",{class:!0});var cs=j(Ze);ft=Ce(cs,"js"),cs.forEach(w),it.forEach(w),vt=ne(nt),Me(je.$$.fragment,nt),nt.forEach(w),dt=ne($e),Me(Qe.$$.fragment,$e),$e.forEach(w),gt.forEach(w),ot.forEach(w),st.forEach(w),xe.forEach(w),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",v(e,"rel","stylesheet"),v(e,"href","prism-one-dark.css"),v(r,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),v(X,"class","w-full lg:w-[calc(70vh*(var(--boardScale,70)/100*0.7+0.3))]"),v(Fe,"class",Ye=t[1]?"text-yellow-600":""),v(We,"class","text-gray-600"),v(Ze,"class",ct=t[1]?"":"text-yellow-600"),v(_e,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),v(oe,"class","absolute right-2 top-2 flex gap-4"),v(qe,"class","shadow-lg rounded "),v(ge,"class","row-start-2 relative"),v(le,"class","grid grid-rows-[90wh_auto] gap-10"),v(a,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),v(i,"class","my-10 grid grid-cols-center")},m(z,be){I(document.head,e),Z(z,s,be),Z(z,i,be),I(i,a),I(a,r),ke(n,r,null),I(r,g),ke(C,r,null),I(r,M),ke(y,r,null),I(r,H),ke(W,r,null),I(r,R),ke(Q,r,null),I(r,ve),ke(ie,r,null),I(r,_),ke(E,r,null),I(r,F),ke(Y,r,null),I(a,G),I(a,le),I(le,X),ke(ae,X,null),I(le,ue),I(le,ge),I(ge,qe),I(qe,oe),I(oe,_e),I(_e,Fe),I(Fe,Xe),I(_e,Ge),I(_e,We),I(We,pt),I(_e,mt),I(_e,Ze),I(Ze,ft),I(oe,vt),ke(je,oe,null),I(qe,dt),ke(Qe,qe,null),Je=!0,ht||(Ct=ce(_e,"click",t[30]),ht=!0)},p(z,be){const xe={};!l&&be[0]&1&&(l=!0,xe.boardTheme=z[0].board.boardTheme,me(()=>l=!1)),!o&&be[0]&1&&(o=!0,xe.mouseEvents=z[0].board.mouseEvents,me(()=>o=!1)),!u&&be[0]&1&&(u=!0,xe.notation=z[0].board.notation,me(()=>u=!1)),!c&&be[0]&1&&(c=!0,xe.flipped=z[0].board.flipped,me(()=>c=!1)),!f&&be[0]&1&&(f=!0,xe.resizible=z[0].board.resizible,me(()=>f=!1)),n.$set(xe);const st={};!O&&be[0]&1&&(O=!0,st.enabled=z[0].movable.enabled,me(()=>O=!1)),!L&&be[0]&1&&(L=!0,st.color=z[0].movable.color,me(()=>L=!1)),C.$set(st);const ye={};!h&&be[0]&1&&(h=!0,ye.enabled=z[0].draggable.enabled,me(()=>h=!1)),!p&&be[0]&1&&(p=!0,ye.ghostPiece=z[0].draggable.ghostPiece.enabled,me(()=>p=!1)),!S&&be[0]&1&&(S=!0,ye.transition=z[0].draggable.transition.enabled,me(()=>S=!1)),!P&&be[0]&1&&(P=!0,ye.duration=z[0].draggable.transition.settings.duration,me(()=>P=!1)),!T&&be[0]&1&&(T=!0,ye.easing=z[0].draggable.transition.settings.easing,me(()=>T=!1)),y.$set(ye);const ot={};!D&&be[0]&1&&(D=!0,ot.enabled=z[0].selectable.enabled,me(()=>D=!1)),W.$set(ot);const Mt={};!ee&&be[0]&1&&(ee=!0,Mt.enabled=z[0].legal.enabled,me(()=>ee=!1)),Q.$set(Mt);const gt={};!b&&be[0]&1&&(b=!0,gt.enabled=z[0].highlight.enabled,me(()=>b=!1)),!k&&be[0]&1&&(k=!0,gt.settings=z[0].highlight.settings,me(()=>k=!1)),ie.$set(gt);const $e={};!A&&be[0]&1&&(A=!0,$e.enabled=z[0].drawTools.enabled,me(()=>A=!1)),!N&&be[0]&1&&(N=!0,$e.knightLShape=z[0].drawTools.settings.knightLShape,me(()=>N=!1)),!d&&be[0]&1&&(d=!0,$e.onlyChessMove=z[0].drawTools.settings.onlyChessMove,me(()=>d=!1)),E.$set($e);const nt={};!q&&be[0]&1&&(q=!0,nt.enabled=z[0].sounds.enabled,me(()=>q=!1)),!J&&be[0]&1&&(J=!0,nt.settings=z[0].sounds.settings,me(()=>J=!1)),Y.$set(nt);const it={};ae.$set(it),(!Je||be[0]&2&&Ye!==(Ye=z[1]?"text-yellow-600":""))&&v(Fe,"class",Ye),(!Je||be[0]&2&&ct!==(ct=z[1]?"":"text-yellow-600"))&&v(Ze,"class",ct);const kt={};be[0]&16&&(kt.copyText=z[4]),je.$set(kt);const St={};be[0]&16&&(St.source=z[4]),Qe.$set(St)},i(z){Je||(x(n.$$.fragment,z),x(C.$$.fragment,z),x(y.$$.fragment,z),x(W.$$.fragment,z),x(Q.$$.fragment,z),x(ie.$$.fragment,z),x(E.$$.fragment,z),x(Y.$$.fragment,z),x(ae.$$.fragment,z),x(je.$$.fragment,z),x(Qe.$$.fragment,z),Je=!0)},o(z){te(n.$$.fragment,z),te(C.$$.fragment,z),te(y.$$.fragment,z),te(W.$$.fragment,z),te(Q.$$.fragment,z),te(ie.$$.fragment,z),te(E.$$.fragment,z),te(Y.$$.fragment,z),te(ae.$$.fragment,z),te(je.$$.fragment,z),te(Qe.$$.fragment,z),Je=!1},d(z){w(e),z&&w(s),z&&w(i),Se(n),Se(C),Se(y),Se(W),Se(Q),Se(ie),Se(E),Se(Y),t[29](null),Se(ae),Se(je),Se(Qe),ht=!1,Ct()}}}function dr(t,e,s){const i=new kn.Chess,a={movable:de.BOTH,legal:!0,callbacks:{afterMove:d=>i.move({from:d.substring(0,2),to:d.substring(2,4),...d.length>4&&{promotion:d[4]}}),getLegalMoves:()=>i.moves({verbose:!0}).map(d=>{var F;return d.from+d.to+((F=d.promotion)!=null?F:"")}),getWhiteToMove:()=>i.turn()==="w",getInCheck:()=>i.inCheck(),getLastMove:()=>{var F;const d=i.history({verbose:!0}).pop();return d?d.from+d.to+((F=d.promotion)!=null?F:""):""}},board:{resizible:!0}},r=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,n=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let l,o=new Sn(a),u=!1,c=!0,f="";Bt(()=>{var d;s(3,u=!0),s(0,o=(d=l.getState)==null?void 0:d.call(l))});const g=(d,F)=>{var ae;const Y=d.getConfig(),q=`
	import type { ChessboardConfig } from '@powchess/chessboard/boardConfig';`;u&&((ae=l.setState)==null||ae.call(l,d));let J=JSON.stringify(Y,(ue,ge)=>ue==="callbacks"?"{functions}":ge,4);J=J.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',F?r:n);const G=`
	import { Color } from '@powchess/chessboard/enums';`;F&&(J=J.replaceAll(`movable: ${de.WHITE}`,"movable: Color.WHITE").replaceAll(`movable: ${de.BLACK}`,"movable: Color.BLACK").replaceAll(`movable: ${de.BOTH}`,"movable: Color.BOTH"));function le(){return J.includes("movable: Color.WHITE")||J.includes("movable: Color.BLACK")||J.includes("movable: Color.BOTH")}let X=`<script${F?' lang="ts"':""}>
	import Chessboard from '@powchess/chessboard';${F?q:""}${le()&&F?G:""}${o.legal.enabled?F?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${F?": ChessboardConfig":""} = ${J};
<\/script>

<Chessboard {config} className="rounded-md" />`;return F||(X=X.replaceAll("Color.WHITE",`${de.WHITE}`).replaceAll("Color.BLACK",`${de.BLACK}`).replaceAll("Color.BOTH",`${de.BOTH}`)),X};function C(d){t.$$.not_equal(o.board.boardTheme,d)&&(o.board.boardTheme=d,s(0,o))}function O(d){t.$$.not_equal(o.board.mouseEvents,d)&&(o.board.mouseEvents=d,s(0,o))}function L(d){t.$$.not_equal(o.board.notation,d)&&(o.board.notation=d,s(0,o))}function M(d){t.$$.not_equal(o.board.flipped,d)&&(o.board.flipped=d,s(0,o))}function y(d){t.$$.not_equal(o.board.resizible,d)&&(o.board.resizible=d,s(0,o))}function h(d){t.$$.not_equal(o.movable.enabled,d)&&(o.movable.enabled=d,s(0,o))}function p(d){t.$$.not_equal(o.movable.color,d)&&(o.movable.color=d,s(0,o))}function S(d){t.$$.not_equal(o.draggable.enabled,d)&&(o.draggable.enabled=d,s(0,o))}function P(d){t.$$.not_equal(o.draggable.ghostPiece.enabled,d)&&(o.draggable.ghostPiece.enabled=d,s(0,o))}function T(d){t.$$.not_equal(o.draggable.transition.enabled,d)&&(o.draggable.transition.enabled=d,s(0,o))}function H(d){t.$$.not_equal(o.draggable.transition.settings.duration,d)&&(o.draggable.transition.settings.duration=d,s(0,o))}function W(d){t.$$.not_equal(o.draggable.transition.settings.easing,d)&&(o.draggable.transition.settings.easing=d,s(0,o))}function D(d){t.$$.not_equal(o.selectable.enabled,d)&&(o.selectable.enabled=d,s(0,o))}function R(d){t.$$.not_equal(o.legal.enabled,d)&&(o.legal.enabled=d,s(0,o))}const Q=()=>{var d;o.legal.enabled||(i.reset(),u&&((d=l.setFEN)==null||d.call(l,o.board.startFen,!0,!1)))};function ee(d){t.$$.not_equal(o.highlight.enabled,d)&&(o.highlight.enabled=d,s(0,o))}function ve(d){t.$$.not_equal(o.highlight.settings,d)&&(o.highlight.settings=d,s(0,o))}function ie(d){t.$$.not_equal(o.drawTools.enabled,d)&&(o.drawTools.enabled=d,s(0,o))}function b(d){t.$$.not_equal(o.drawTools.settings.knightLShape,d)&&(o.drawTools.settings.knightLShape=d,s(0,o))}function k(d){t.$$.not_equal(o.drawTools.settings.onlyChessMove,d)&&(o.drawTools.settings.onlyChessMove=d,s(0,o))}function _(d){t.$$.not_equal(o.sounds.enabled,d)&&(o.sounds.enabled=d,s(0,o))}function E(d){t.$$.not_equal(o.sounds.settings,d)&&(o.sounds.settings=d,s(0,o))}function A(d){fe[d?"unshift":"push"](()=>{l=d,s(2,l)})}const N=()=>{s(1,c=!c)};return t.$$.update=()=>{t.$$.dirty[0]&3&&s(4,f=g(o,c))},[o,c,l,u,f,i,a,C,O,L,M,y,h,p,S,P,T,H,W,D,R,Q,ee,ve,ie,b,k,_,E,A,N]}class pr extends Le{constructor(e){super(),Oe(this,e,dr,cr,Ie,{},null,[-1,-1])}}export{pr as default};
