var Bn=Object.defineProperty;var Un=(t,e,s)=>e in t?Bn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var D=(t,e,s)=>(Un(t,typeof e!="symbol"?e+"":e,s),s);import{S as Fe,i as qe,s as Ne,C as cn,k as U,a as se,l as H,m as z,h as E,c as ne,p as ke,n as p,b as Z,G as P,D as hn,E as gn,F as bn,f as x,t as ie,I as It,J as ds,K as fe,L as Hn,e as Re,M as Vn,q as Ee,r as Me,u as Nt,N as tt,O as pn,B as Te,P as lt,Q as mn,R as Kn,T as zn,U as fs,V as dt,W as ns,X as he,Y as is,Z as st,_ as Ct,H as Wn,$ as Je,a0 as Ve,a1 as Ke,o as as,g as Ue,d as He,a2 as jn,a3 as Gn,a4 as be,w as we,x as Se,y as ye,a5 as pe,z as Ce,a6 as cs,a7 as vn,a8 as hs,a9 as Qn,aa as _n,A as Xn,ab as En,ac as gt,ad as bt,ae as rs,af as Dt,ag as Rt,ah as Yn}from"../../chunks/index-fec2cb7a.js";import{w as Zn}from"../../chunks/index-27c90a1c.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mn={exports:{}};(function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var s=function(i){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,n={},l={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function f(g){return g instanceof o?new o(g.type,f(g.content),g.alias):Array.isArray(g)?g.map(f):g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(f){return Object.prototype.toString.call(f).slice(8,-1)},objId:function(f){return f.__id||Object.defineProperty(f,"__id",{value:++r}),f.__id},clone:function f(g,M){M=M||{};var S,w;switch(l.util.type(g)){case"Object":if(w=l.util.objId(g),M[w])return M[w];S={},M[w]=S;for(var q in g)g.hasOwnProperty(q)&&(S[q]=f(g[q],M));return S;case"Array":return w=l.util.objId(g),M[w]?M[w]:(S=[],M[w]=S,g.forEach(function(G,K){S[K]=f(G,M)}),S);default:return g}},getLanguage:function(f){for(;f;){var g=a.exec(f.className);if(g)return g[1].toLowerCase();f=f.parentElement}return"none"},setLanguage:function(f,g){f.className=f.className.replace(RegExp(a,"gi"),""),f.classList.add("language-"+g)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(S){var f=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(S.stack)||[])[1];if(f){var g=document.getElementsByTagName("script");for(var M in g)if(g[M].src==f)return g[M]}return null}},isActive:function(f,g,M){for(var S="no-"+g;f;){var w=f.classList;if(w.contains(g))return!0;if(w.contains(S))return!1;f=f.parentElement}return!!M}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(f,g){var M=l.util.clone(l.languages[f]);for(var S in g)M[S]=g[S];return M},insertBefore:function(f,g,M,S){S=S||l.languages;var w=S[f],q={};for(var G in w)if(w.hasOwnProperty(G)){if(G==g)for(var K in M)M.hasOwnProperty(K)&&(q[K]=M[K]);M.hasOwnProperty(G)||(q[G]=w[G])}var j=S[f];return S[f]=q,l.languages.DFS(l.languages,function(W,ee){ee===j&&W!=f&&(this[W]=q)}),q},DFS:function f(g,M,S,w){w=w||{};var q=l.util.objId;for(var G in g)if(g.hasOwnProperty(G)){M.call(g,G,g[G],S||G);var K=g[G],j=l.util.type(K);j==="Object"&&!w[q(K)]?(w[q(K)]=!0,f(K,M,null,w)):j==="Array"&&!w[q(K)]&&(w[q(K)]=!0,f(K,M,G,w))}}},plugins:{},highlightAll:function(f,g){l.highlightAllUnder(document,f,g)},highlightAllUnder:function(f,g,M){var S={callback:M,container:f,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",S),S.elements=Array.prototype.slice.apply(S.container.querySelectorAll(S.selector)),l.hooks.run("before-all-elements-highlight",S);for(var w=0,q;q=S.elements[w++];)l.highlightElement(q,g===!0,S.callback)},highlightElement:function(f,g,M){var S=l.util.getLanguage(f),w=l.languages[S];l.util.setLanguage(f,S);var q=f.parentElement;q&&q.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(q,S);var G=f.textContent,K={element:f,language:S,grammar:w,code:G};function j(ee){K.highlightedCode=ee,l.hooks.run("before-insert",K),K.element.innerHTML=K.highlightedCode,l.hooks.run("after-highlight",K),l.hooks.run("complete",K),M&&M.call(K.element)}if(l.hooks.run("before-sanity-check",K),q=K.element.parentElement,q&&q.nodeName.toLowerCase()==="pre"&&!q.hasAttribute("tabindex")&&q.setAttribute("tabindex","0"),!K.code){l.hooks.run("complete",K),M&&M.call(K.element);return}if(l.hooks.run("before-highlight",K),!K.grammar){j(l.util.encode(K.code));return}if(g&&i.Worker){var W=new Worker(l.filename);W.onmessage=function(ee){j(ee.data)},W.postMessage(JSON.stringify({language:K.language,code:K.code,immediateClose:!0}))}else j(l.highlight(K.code,K.grammar,K.language))},highlight:function(f,g,M){var S={code:f,grammar:g,language:M};if(l.hooks.run("before-tokenize",S),!S.grammar)throw new Error('The language "'+S.language+'" has no grammar.');return S.tokens=l.tokenize(S.code,S.grammar),l.hooks.run("after-tokenize",S),o.stringify(l.util.encode(S.tokens),S.language)},tokenize:function(f,g){var M=g.rest;if(M){for(var S in M)g[S]=M[S];delete g.rest}var w=new h;return m(w,w.head,f),c(f,w,g,w.head,0),R(w)},hooks:{all:{},add:function(f,g){var M=l.hooks.all;M[f]=M[f]||[],M[f].push(g)},run:function(f,g){var M=l.hooks.all[f];if(!(!M||!M.length))for(var S=0,w;w=M[S++];)w(g)}},Token:o};i.Prism=l;function o(f,g,M,S){this.type=f,this.content=g,this.alias=M,this.length=(S||"").length|0}o.stringify=function f(g,M){if(typeof g=="string")return g;if(Array.isArray(g)){var S="";return g.forEach(function(j){S+=f(j,M)}),S}var w={type:g.type,content:f(g.content,M),tag:"span",classes:["token",g.type],attributes:{},language:M},q=g.alias;q&&(Array.isArray(q)?Array.prototype.push.apply(w.classes,q):w.classes.push(q)),l.hooks.run("wrap",w);var G="";for(var K in w.attributes)G+=" "+K+'="'+(w.attributes[K]||"").replace(/"/g,"&quot;")+'"';return"<"+w.tag+' class="'+w.classes.join(" ")+'"'+G+">"+w.content+"</"+w.tag+">"};function u(f,g,M,S){f.lastIndex=g;var w=f.exec(M);if(w&&S&&w[1]){var q=w[1].length;w.index+=q,w[0]=w[0].slice(q)}return w}function c(f,g,M,S,w,q){for(var G in M)if(!(!M.hasOwnProperty(G)||!M[G])){var K=M[G];K=Array.isArray(K)?K:[K];for(var j=0;j<K.length;++j){if(q&&q.cause==G+","+j)return;var W=K[j],ee=W.inside,ue=!!W.lookbehind,ae=!!W.greedy,d=W.alias;if(ae&&!W.pattern.global){var _=W.pattern.toString().match(/[imsuy]*$/)[0];W.pattern=RegExp(W.pattern.source,_+"g")}for(var b=W.pattern||W,L=S.next,O=w;L!==g.tail&&!(q&&O>=q.reach);O+=L.value.length,L=L.next){var A=L.value;if(g.length>f.length)return;if(!(A instanceof o)){var V=1,N;if(ae){if(N=u(b,O,f,ue),!N||N.index>=f.length)break;var I=N.index,y=N.index+N[0].length,X=O;for(X+=L.value.length;I>=X;)L=L.next,X+=L.value.length;if(X-=L.value.length,O=X,L.value instanceof o)continue;for(var J=L;J!==g.tail&&(X<y||typeof J.value=="string");J=J.next)V++,X+=J.value.length;V--,A=f.slice(O,X),N.index-=O}else if(N=u(b,0,A,ue),!N)continue;var I=N.index,$=N[0],Q=A.slice(0,I),re=A.slice(I+$.length),de=O+A.length;q&&de>q.reach&&(q.reach=de);var ce=L.prev;Q&&(ce=m(g,ce,Q),O+=Q.length),T(g,ce,V);var Le=new o(G,ee?l.tokenize($,ee):$,d,$);if(L=m(g,ce,Le),re&&m(g,L,re),V>1){var oe={cause:G+","+j,reach:de};c(f,g,M,L.prev,O,oe),q&&oe.reach>q.reach&&(q.reach=oe.reach)}}}}}}function h(){var f={value:null,prev:null,next:null},g={value:null,prev:f,next:null};f.next=g,this.head=f,this.tail=g,this.length=0}function m(f,g,M){var S=g.next,w={value:M,prev:g,next:S};return g.next=w,S.prev=w,f.length++,w}function T(f,g,M){for(var S=g.next,w=0;w<M&&S!==f.tail;w++)S=S.next;g.next=S,S.prev=g,f.length-=w}function R(f){for(var g=[],M=f.head.next;M!==f.tail;)g.push(M.value),M=M.next;return g}if(!i.document)return i.addEventListener&&(l.disableWorkerMessageHandler||i.addEventListener("message",function(f){var g=JSON.parse(f.data),M=g.language,S=g.code,w=g.immediateClose;i.postMessage(l.highlight(S,l.languages[M],M)),w&&i.close()},!1)),l;var F=l.util.currentScript();F&&(l.filename=F.src,F.hasAttribute("data-manual")&&(l.manual=!0));function k(){l.manual||l.highlightAll()}if(!l.manual){var C=document.readyState;C==="loading"||C==="interactive"&&F&&F.defer?document.addEventListener("DOMContentLoaded",k):window.requestAnimationFrame?window.requestAnimationFrame(k):window.setTimeout(k,16)}return l}(e);t.exports&&(t.exports=s),typeof gs<"u"&&(gs.Prism=s),s.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},s.languages.markup.tag.inside["attr-value"].inside.entity=s.languages.markup.entity,s.languages.markup.doctype.inside["internal-subset"].inside=s.languages.markup,s.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(s.languages.markup.tag,"addInlined",{value:function(a,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:s.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};l["language-"+r]={pattern:/[\s\S]+/,inside:s.languages[r]};var o={};o[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:l},s.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(s.languages.markup.tag,"addAttribute",{value:function(i,a){s.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:s.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),s.languages.html=s.languages.markup,s.languages.mathml=s.languages.markup,s.languages.svg=s.languages.markup,s.languages.xml=s.languages.extend("markup",{}),s.languages.ssml=s.languages.xml,s.languages.atom=s.languages.xml,s.languages.rss=s.languages.xml,function(i){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var r=i.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(s),s.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},s.languages.javascript=s.languages.extend("clike",{"class-name":[s.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),s.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,s.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:s.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:s.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:s.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:s.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:s.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),s.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:s.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),s.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),s.languages.markup&&(s.languages.markup.tag.addInlined("script","javascript"),s.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),s.languages.js=s.languages.javascript,function(){if(typeof s>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading\u2026",a=function(F,k){return"\u2716 Error "+F+" while fetching file: "+k},r="\u2716 Error: File does not exist or is empty",n={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",c="failed",h="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function m(F,k,C){var f=new XMLHttpRequest;f.open("GET",F,!0),f.onreadystatechange=function(){f.readyState==4&&(f.status<400&&f.responseText?k(f.responseText):f.status>=400?C(a(f.status,f.statusText)):C(r))},f.send(null)}function T(F){var k=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(F||"");if(k){var C=Number(k[1]),f=k[2],g=k[3];return f?g?[C,Number(g)]:[C,void 0]:[C,C]}}s.hooks.add("before-highlightall",function(F){F.selector+=", "+h}),s.hooks.add("before-sanity-check",function(F){var k=F.element;if(k.matches(h)){F.code="",k.setAttribute(l,o);var C=k.appendChild(document.createElement("CODE"));C.textContent=i;var f=k.getAttribute("data-src"),g=F.language;if(g==="none"){var M=(/\.(\w+)$/.exec(f)||[,"none"])[1];g=n[M]||M}s.util.setLanguage(C,g),s.util.setLanguage(k,g);var S=s.plugins.autoloader;S&&S.loadLanguages(g),m(f,function(w){k.setAttribute(l,u);var q=T(k.getAttribute("data-range"));if(q){var G=w.split(/\r\n?|\n/g),K=q[0],j=q[1]==null?G.length:q[1];K<0&&(K+=G.length),K=Math.max(0,Math.min(K-1,G.length)),j<0&&(j+=G.length),j=Math.max(0,Math.min(j,G.length)),w=G.slice(K,j).join(`
`),k.hasAttribute("data-start")||k.setAttribute("data-start",String(K+1))}C.textContent=w,s.highlightElement(C)},function(w){k.setAttribute(l,c),C.textContent=w})}}),s.plugins.fileHighlight={highlight:function(k){for(var C=(k||document).querySelectorAll(h),f=0,g;g=C[f++];)s.highlightElement(g)}};var R=!1;s.fileHighlight=function(){R||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),R=!0),s.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Mn);const kn=Mn.exports,bs="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+bs+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+bs+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",t=>{t.type==="entity"&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,s){const i={};i["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[s]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;const a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};a["language-"+s]={pattern:/[\s\S]+/,inside:Prism.languages[s]};const r={};r[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:a},Prism.languages.insertBefore("svelte","cdata",r)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function Jn(t){let e,s;return{c(){e=new Hn(!1),s=Re(),this.h()},l(i){e=Vn(i,!1),s=Re(),this.h()},h(){e.a=s},m(i,a){e.m(t[2],i,a),Z(i,s,a)},p(i,a){a&4&&e.p(i[2])},d(i){i&&E(s),i&&e.d()}}}function xn(t){let e;return{c(){e=Ee(t[2])},l(s){e=Me(s,t[2])},m(s,i){Z(s,e,i)},p(s,i){i&4&&Nt(e,s[2])},d(s){s&&E(e)}}}function $n(t){let e,s,i,a,r,n,l;const o=t[6].default,u=cn(o,t,t[5],null);function c(T,R){return T[0]==="none"?xn:Jn}let h=c(t),m=h(t);return{c(){e=U("code"),u&&u.c(),s=se(),i=U("pre"),a=U("code"),m.c(),this.h()},l(T){e=H(T,"CODE",{style:!0});var R=z(e);u&&u.l(R),R.forEach(E),s=ne(T),i=H(T,"PRE",{class:!0,"command-line":!0,"data-output":!0});var F=z(i);a=H(F,"CODE",{class:!0});var k=z(a);m.l(k),k.forEach(E),F.forEach(E),this.h()},h(){ke(e,"display","none"),p(a,"class",r="language-"+t[0]),p(i,"class",n="language-"+t[0]),p(i,"command-line",""),p(i,"data-output","2-17")},m(T,R){Z(T,e,R),u&&u.m(e,null),t[7](e),Z(T,s,R),Z(T,i,R),P(i,a),m.m(a,null),l=!0},p(T,[R]){u&&u.p&&(!l||R&32)&&hn(u,o,T,T[5],l?bn(o,T[5],R,null):gn(T[5]),null),h===(h=c(T))&&m?m.p(T,R):(m.d(1),m=h(T),m&&(m.c(),m.m(a,null))),(!l||R&1&&r!==(r="language-"+T[0]))&&p(a,"class",r),(!l||R&1&&n!==(n="language-"+T[0]))&&p(i,"class",n)},i(T){l||(x(u,T),l=!0)},o(T){ie(u,T),l=!1},d(T){T&&E(e),u&&u.d(T),t[7](null),T&&E(s),T&&E(i),m.d()}}}const ps=kn;kn.highlightElement;const ei={transform:t=>t};function ti(t,e,s){let{$$slots:i={},$$scope:a}=e,{language:r="javascript"}=e,{source:n=""}=e,{transform:l=m=>m}=e,o,u;function c(){const m=ps.languages[r];let T=n||o.textContent;T=ei.transform(T),T=l(T),s(2,u=r==="none"?T:ps.highlight(T,m,r))}function h(m){fe[m?"unshift":"push"](()=>{o=m,s(1,o)})}return t.$$set=m=>{s(9,e=It(It({},e),ds(m))),"language"in m&&s(0,r=m.language),"source"in m&&s(3,n=m.source),"transform"in m&&s(4,l=m.transform),"$$scope"in m&&s(5,a=m.$$scope)},t.$$.update=()=>{e&&(n||o)&&c()},e=ds(e),[r,o,u,n,l,a,i,h]}class si extends Fe{constructor(e){super(),qe(this,e,ti,$n,Ne,{language:0,source:3,transform:4})}}var wn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Chess=t.validateFen=t.SQUARES=t.DEFAULT_POSITION=t.KING=t.QUEEN=t.ROOK=t.BISHOP=t.KNIGHT=t.PAWN=t.BLACK=t.WHITE=void 0,t.WHITE="w",t.BLACK="b",t.PAWN="p",t.KNIGHT="n",t.BISHOP="b",t.ROOK="r",t.QUEEN="q",t.KING="k",t.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";const e=-1,s={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"};t.SQUARES=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"];const i={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},a={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},r={b:[16,32,17,15],w:[-16,-32,-17,-15]},n={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},l=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],o=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],u={p:1,n:2,b:4,r:8,q:16,k:32},c="pnbrqkPNBRQK",h=[t.KNIGHT,t.BISHOP,t.ROOK,t.QUEEN],m=7,T=6,R=1,F=0,k={w:[{square:a.a1,flag:i.QSIDE_CASTLE},{square:a.h1,flag:i.KSIDE_CASTLE}],b:[{square:a.a8,flag:i.QSIDE_CASTLE},{square:a.h8,flag:i.KSIDE_CASTLE}]},C={b:R,w:T},f=["1-0","0-1","1/2-1/2","*"];function g(ae){return ae>>4}function M(ae){return ae&15}function S(ae){return"0123456789".indexOf(ae)!==-1}function w(ae){const d=M(ae),_=g(ae);return"abcdefgh".substring(d,d+1)+"87654321".substring(_,_+1)}function q(ae){return ae===t.WHITE?t.BLACK:t.WHITE}function G(ae){const d=[];d[0]="No errors.",d[1]="FEN string must contain six space-delimited fields.",d[2]="6th field (move number) must be a positive integer.",d[3]="5th field (half move counter) must be a non-negative integer.",d[4]="4th field (en-passant square) is invalid.",d[5]="3rd field (castling availability) is invalid.",d[6]="2nd field (side to move) is invalid.",d[7]="1st field (piece positions) does not contain 8 '/'-delimited rows.",d[8]="1st field (piece positions) is invalid [consecutive numbers].",d[9]="1st field (piece positions) is invalid [invalid piece].",d[10]="1st field (piece positions) is invalid [row too large].",d[11]="Illegal en-passant square";const _=ae.split(/\s+/);if(_.length!==6)return{valid:!1,errorNumber:1,error:d[1]};const b=parseInt(_[5],10);if(isNaN(b)||b<=0)return{valid:!1,errorNumber:2,error:d[2]};const L=parseInt(_[4],10);if(isNaN(L)||L<0)return{valid:!1,errorNumber:3,error:d[3]};if(!/^(-|[abcdefgh][36])$/.test(_[3]))return{valid:!1,errorNumber:4,error:d[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(_[2]))return{valid:!1,errorNumber:5,error:d[5]};if(!/^(w|b)$/.test(_[1]))return{valid:!1,errorNumber:6,error:d[6]};const O=_[0].split("/");if(O.length!==8)return{valid:!1,errorNumber:7,error:d[7]};for(let A=0;A<O.length;A++){let V=0,N=!1;for(let y=0;y<O[A].length;y++)if(S(O[A][y])){if(N)return{valid:!1,errorNumber:8,error:d[8]};V+=parseInt(O[A][y],10),N=!0}else{if(!/^[prnbqkPRNBQK]$/.test(O[A][y]))return{valid:!1,errorNumber:9,error:d[9]};V+=1,N=!1}if(V!==8)return{valid:!1,errorNumber:10,error:d[10]}}return _[3][1]=="3"&&_[1]=="w"||_[3][1]=="6"&&_[1]=="b"?{valid:!1,errorNumber:11,error:d[11]}:{valid:!0,errorNumber:0,error:d[0]}}t.validateFen=G;function K(ae,d){const _=ae.from,b=ae.to,L=ae.piece;let O=0,A=0,V=0;for(let N=0,y=d.length;N<y;N++){const X=d[N].from,J=d[N].to,I=d[N].piece;L===I&&_!==X&&b===J&&(O++,g(_)===g(X)&&A++,M(_)===M(X)&&V++)}return O>0?A>0&&V>0?w(_):V>0?w(_).charAt(1):w(_).charAt(0):""}function j(ae,d,_,b,L,O=void 0,A=i.NORMAL){const V=g(b);if(L===t.PAWN&&(V===m||V===F))for(let N=0;N<h.length;N++){const y=h[N];ae.push({color:d,from:_,to:b,piece:L,captured:O,promotion:y,flags:A|i.PROMOTION})}else ae.push({color:d,from:_,to:b,piece:L,captured:O,promotion:void 0,flags:A})}function W(ae){let d=ae.charAt(0);return d>="a"&&d<="h"?ae.match(/[a-h]\d.*[a-h]\d/)?void 0:t.PAWN:(d=d.toLowerCase(),d==="o"?t.KING:d)}function ee(ae){return ae.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class ue{constructor(d=t.DEFAULT_POSITION){this._board=new Array(128),this._turn=t.WHITE,this._header={},this._kings={w:e,b:e},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(d)}clear(d=!1){this._board=new Array(128),this._kings={w:e,b:e},this._turn=t.WHITE,this._castling={w:0,b:0},this._epSquare=e,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=d?this._header:{},this._updateSetup(this.fen())}load(d,_=!1){const b=d.split(/\s+/),L=b[0];let O=0;if(!G(d).valid)return!1;this.clear(_);for(let A=0;A<L.length;A++){const V=L.charAt(A);if(V==="/")O+=8;else if(S(V))O+=parseInt(V,10);else{const N=V<"a"?t.WHITE:t.BLACK;this.put({type:V.toLowerCase(),color:N},w(O)),O++}}return this._turn=b[1],b[2].indexOf("K")>-1&&(this._castling.w|=i.KSIDE_CASTLE),b[2].indexOf("Q")>-1&&(this._castling.w|=i.QSIDE_CASTLE),b[2].indexOf("k")>-1&&(this._castling.b|=i.KSIDE_CASTLE),b[2].indexOf("q")>-1&&(this._castling.b|=i.QSIDE_CASTLE),this._epSquare=b[3]==="-"?e:a[b[3]],this._halfMoves=parseInt(b[4],10),this._moveNumber=parseInt(b[5],10),this._updateSetup(this.fen()),!0}fen(){let d=0,_="";for(let O=a.a8;O<=a.h1;O++){if(this._board[O]){d>0&&(_+=d,d=0);const{color:A,type:V}=this._board[O];_+=A===t.WHITE?V.toUpperCase():V.toLowerCase()}else d++;O+1&136&&(d>0&&(_+=d),O!==a.h1&&(_+="/"),d=0,O+=8)}let b="";this._castling[t.WHITE]&i.KSIDE_CASTLE&&(b+="K"),this._castling[t.WHITE]&i.QSIDE_CASTLE&&(b+="Q"),this._castling[t.BLACK]&i.KSIDE_CASTLE&&(b+="k"),this._castling[t.BLACK]&i.QSIDE_CASTLE&&(b+="q"),b=b||"-";const L=this._epSquare===e?"-":w(this._epSquare);return[_,this._turn,b,L,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(d){this._history.length>0||(d!==t.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=d):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(t.DEFAULT_POSITION)}get(d){return this._board[a[d]]||!1}put({type:d,color:_},b){if(c.indexOf(d.toLowerCase())===-1||!(b in a))return!1;const L=a[b];return d==t.KING&&!(this._kings[_]==e||this._kings[_]==L)?!1:(this._board[L]={type:d,color:_},d===t.KING&&(this._kings[_]=L),this._updateSetup(this.fen()),!0)}remove(d){const _=this.get(d);return delete this._board[a[d]],_&&_.type===t.KING&&(this._kings[_.color]=e),this._updateSetup(this.fen()),_}_attacked(d,_){for(let b=a.a8;b<=a.h1;b++){if(b&136){b+=7;continue}if(this._board[b]===void 0||this._board[b].color!==d)continue;const L=this._board[b],O=b-_,A=O+119;if(l[A]&u[L.type]){if(L.type===t.PAWN){if(O>0){if(L.color===t.WHITE)return!0}else if(L.color===t.BLACK)return!0;continue}if(L.type==="n"||L.type==="k")return!0;const V=o[A];let N=b+V,y=!1;for(;N!==_;){if(this._board[N]!=null){y=!0;break}N+=V}if(!y)return!0}}return!1}_isKingAttacked(d){return this._attacked(q(d),this._kings[d])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const d={b:0,n:0,r:0,q:0,k:0,p:0},_=[];let b=0,L=0;for(let O=a.a8;O<=a.h1;O++){if(L=(L+1)%2,O&136){O+=7;continue}const A=this._board[O];A&&(d[A.type]=A.type in d?d[A.type]+1:1,A.type===t.BISHOP&&_.push(L),b++)}if(b===2)return!0;if(b===3&&(d[t.BISHOP]===1||d[t.KNIGHT]===1))return!0;if(b===d[t.BISHOP]+2){let O=0;const A=_.length;for(let V=0;V<A;V++)O+=_[V];if(O===0||O===A)return!0}return!1}isThreefoldRepetition(){const d=[],_={};let b=!1;for(;;){const L=this._undoMove();if(!L)break;d.push(L)}for(;;){const L=this.fen().split(" ").slice(0,4).join(" ");_[L]=L in _?_[L]+1:1,_[L]>=3&&(b=!0);const O=d.pop();if(O)this._makeMove(O);else break}return b}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:d=!1,square:_=void 0}={}){const b=this._moves({square:_});return d?b.map(L=>this._makePretty(L)):b.map(L=>this._moveToSan(L,b))}_moves({legal:d=!0,piece:_=void 0,square:b=void 0}={}){var L;const O=b?b.toLowerCase():void 0,A=_==null?void 0:_.toLowerCase(),V=[],N=this._turn,y=q(N);let X=a.a8,J=a.h1,I=!1;if(O)if(O in a)X=J=a[O],I=!0;else return[];for(let Q=X;Q<=J;Q++){if(Q&136){Q+=7;continue}if(!this._board[Q]||this._board[Q].color===y)continue;const{type:re}=this._board[Q];let de;if(re===t.PAWN){if(A&&A!==re)continue;de=Q+r[N][0],this._board[de]||(j(V,N,Q,de,t.PAWN),de=Q+r[N][1],C[N]===g(Q)&&!this._board[de]&&j(V,N,Q,de,t.PAWN,void 0,i.BIG_PAWN));for(let ce=2;ce<4;ce++)de=Q+r[N][ce],!(de&136)&&(((L=this._board[de])===null||L===void 0?void 0:L.color)===y?j(V,N,Q,de,t.PAWN,this._board[de].type,i.CAPTURE):de===this._epSquare&&j(V,N,Q,de,t.PAWN,t.PAWN,i.EP_CAPTURE))}else{if(A&&A!==re)continue;for(let ce=0,Le=n[re].length;ce<Le;ce++){const oe=n[re][ce];for(de=Q;de+=oe,!(de&136);){if(!this._board[de])j(V,N,Q,de,re);else{if(this._board[de].color===N)break;j(V,N,Q,de,re,this._board[de].type,i.CAPTURE);break}if(re===t.KNIGHT||re===t.KING)break}}}}if((A===void 0||A===t.KING)&&(!I||J===this._kings[N])){if(this._castling[N]&i.KSIDE_CASTLE){const Q=this._kings[N],re=Q+2;!this._board[Q+1]&&!this._board[re]&&!this._attacked(y,this._kings[N])&&!this._attacked(y,Q+1)&&!this._attacked(y,re)&&j(V,N,this._kings[N],re,t.KING,void 0,i.KSIDE_CASTLE)}if(this._castling[N]&i.QSIDE_CASTLE){const Q=this._kings[N],re=Q-2;!this._board[Q-1]&&!this._board[Q-2]&&!this._board[Q-3]&&!this._attacked(y,this._kings[N])&&!this._attacked(y,Q-1)&&!this._attacked(y,re)&&j(V,N,this._kings[N],re,t.KING,void 0,i.QSIDE_CASTLE)}}if(!d)return V;const $=[];for(let Q=0,re=V.length;Q<re;Q++)this._makeMove(V[Q]),this._isKingAttacked(N)||$.push(V[Q]),this._undoMove();return $}move(d,{sloppy:_=!1}={}){let b=null;if(typeof d=="string")b=this._moveFromSan(d,_);else if(typeof d=="object"){const O=this._moves();for(let A=0,V=O.length;A<V;A++)if(d.from===w(O[A].from)&&d.to===w(O[A].to)&&(!("promotion"in O[A])||d.promotion===O[A].promotion)){b=O[A];break}}if(!b)return null;const L=this._makePretty(b);return this._makeMove(b),L}_push(d){this._history.push({move:d,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(d){const _=this._turn,b=q(_);if(this._push(d),this._board[d.to]=this._board[d.from],delete this._board[d.from],d.flags&i.EP_CAPTURE&&(this._turn===t.BLACK?delete this._board[d.to-16]:delete this._board[d.to+16]),d.promotion&&(this._board[d.to]={type:d.promotion,color:_}),this._board[d.to].type===t.KING){if(this._kings[_]=d.to,d.flags&i.KSIDE_CASTLE){const L=d.to-1,O=d.to+1;this._board[L]=this._board[O],delete this._board[O]}else if(d.flags&i.QSIDE_CASTLE){const L=d.to+1,O=d.to-2;this._board[L]=this._board[O],delete this._board[O]}this._castling[_]=0}if(this._castling[_]){for(let L=0,O=k[_].length;L<O;L++)if(d.from===k[_][L].square&&this._castling[_]&k[_][L].flag){this._castling[_]^=k[_][L].flag;break}}if(this._castling[b]){for(let L=0,O=k[b].length;L<O;L++)if(d.to===k[b][L].square&&this._castling[b]&k[b][L].flag){this._castling[b]^=k[b][L].flag;break}}d.flags&i.BIG_PAWN?_===t.BLACK?this._epSquare=d.to-16:this._epSquare=d.to+16:this._epSquare=e,d.piece===t.PAWN?this._halfMoves=0:d.flags&(i.CAPTURE|i.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,_===t.BLACK&&this._moveNumber++,this._turn=b}undo(){const d=this._undoMove();return d?this._makePretty(d):null}_undoMove(){const d=this._history.pop();if(d===void 0)return null;const _=d.move;this._kings=d.kings,this._turn=d.turn,this._castling=d.castling,this._epSquare=d.epSquare,this._halfMoves=d.halfMoves,this._moveNumber=d.moveNumber;const b=this._turn,L=q(b);if(this._board[_.from]=this._board[_.to],this._board[_.from].type=_.piece,delete this._board[_.to],_.captured)if(_.flags&i.EP_CAPTURE){let O;b===t.BLACK?O=_.to-16:O=_.to+16,this._board[O]={type:t.PAWN,color:L}}else this._board[_.to]={type:_.captured,color:L};if(_.flags&(i.KSIDE_CASTLE|i.QSIDE_CASTLE)){let O,A;_.flags&i.KSIDE_CASTLE?(O=_.to+1,A=_.to-1):(O=_.to-2,A=_.to+1),this._board[O]=this._board[A],delete this._board[A]}return _}pgn({newline:d=`
`,maxWidth:_=0}={}){const b=[];let L=!1;for(const I in this._header)b.push("["+I+' "'+this._header[I]+'"]'+d),L=!0;L&&this._history.length&&b.push(d);const O=I=>{const $=this._comments[this.fen()];if(typeof $<"u"){const Q=I.length>0?" ":"";I=`${I}${Q}{${$}}`}return I},A=[];for(;this._history.length>0;)A.push(this._undoMove());const V=[];let N="";for(A.length===0&&V.push(O(""));A.length>0;){N=O(N);const I=A.pop();if(!I)break;if(!this._history.length&&I.color==="b"){const $=`${this._moveNumber}. ...`;N=N?`${N} ${$}`:$}else I.color==="w"&&(N.length&&V.push(N),N=this._moveNumber+".");N=N+" "+this._moveToSan(I,this._moves({legal:!0})),this._makeMove(I)}if(N.length&&V.push(O(N)),typeof this._header.Result<"u"&&V.push(this._header.Result),_===0)return b.join("")+V.join(" ");const y=function(){return b.length>0&&b[b.length-1]===" "?(b.pop(),!0):!1},X=function(I,$){for(const Q of $.split(" "))if(!!Q){if(I+Q.length>_){for(;y();)I--;b.push(d),I=0}b.push(Q),I+=Q.length,b.push(" "),I++}return y()&&I--,I};let J=0;for(let I=0;I<V.length;I++){if(J+V[I].length>_&&V[I].includes("{")){J=X(J,V[I]);continue}J+V[I].length>_&&I!==0?(b[b.length-1]===" "&&b.pop(),b.push(d),J=0):I!==0&&(b.push(" "),J++),b.push(V[I]),J+=V[I].length}return b.join("")}header(...d){for(let _=0;_<d.length;_+=2)typeof d[_]=="string"&&typeof d[_+1]=="string"&&(this._header[d[_]]=d[_+1]);return this._header}loadPgn(d,{sloppy:_=!1,newlineChar:b=`\r?
`}={}){function L(oe){return oe.replace(/\\/g,"\\")}function O(oe){const _e={},Oe=oe.split(new RegExp(L(b)));let Ie="",De="";for(let Be=0;Be<Oe.length;Be++){const ze=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;Ie=Oe[Be].replace(ze,"$1"),De=Oe[Be].replace(ze,"$2"),Ie.trim().length>0&&(_e[Ie]=De)}return _e}d=d.trim();const V=new RegExp("^(\\[((?:"+L(b)+")|.)*\\])(?:\\s*"+L(b)+"){2}").exec(d),N=V&&V.length>=2?V[1]:"";this.reset();const y=O(N);let X="";for(const oe in y)oe.toLowerCase()==="fen"&&(X=y[oe]),this.header(oe,y[oe]);if(_){if(X&&!this.load(X,!0))return!1}else if(y.SetUp==="1"&&!("FEN"in y&&this.load(y.FEN,!0)))return!1;function J(oe){return Array.from(oe).map(function(_e){return _e.charCodeAt(0)<128?_e.charCodeAt(0).toString(16):encodeURIComponent(_e).replace(/%/g,"").toLowerCase()}).join("")}function I(oe){return oe.length==0?"":decodeURIComponent("%"+(oe.match(/.{1,2}/g)||[]).join("%"))}const $=function(oe){return oe=oe.replace(new RegExp(L(b),"g")," "),`{${J(oe.slice(1,oe.length-1))}}`},Q=function(oe){if(oe.startsWith("{")&&oe.endsWith("}"))return I(oe.slice(1,oe.length-1))};let re=d.replace(N,"").replace(new RegExp(`({[^}]*})+?|;([^${L(b)}]*)`,"g"),function(oe,_e,Oe){return _e!==void 0?$(_e):" "+$(`{${Oe.slice(1)}}`)}).replace(new RegExp(L(b),"g")," ");const de=/(\([^()]+\))+?/g;for(;de.test(re);)re=re.replace(de,"");re=re.replace(/\d+\.(\.\.)?/g,""),re=re.replace(/\.\.\./g,""),re=re.replace(/\$\d+/g,"");let ce=re.trim().split(new RegExp(/\s+/));ce=ce.join(",").replace(/,,+/g,",").split(",");let Le="";for(let oe=0;oe<ce.length;oe++){const _e=Q(ce[oe]);if(_e!==void 0){this._comments[this.fen()]=_e;continue}const Oe=this._moveFromSan(ce[oe],_);if(Oe==null)if(f.indexOf(ce[oe])>-1)Le=ce[oe];else return!1;else Le="",this._makeMove(Oe)}return Le&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",Le),!0}_moveToSan(d,_){let b="";if(d.flags&i.KSIDE_CASTLE)b="O-O";else if(d.flags&i.QSIDE_CASTLE)b="O-O-O";else{if(d.piece!==t.PAWN){const L=K(d,_);b+=d.piece.toUpperCase()+L}d.flags&(i.CAPTURE|i.EP_CAPTURE)&&(d.piece===t.PAWN&&(b+=w(d.from)[0]),b+="x"),b+=w(d.to),d.promotion&&(b+="="+d.promotion.toUpperCase())}return this._makeMove(d),this.isCheck()&&(this.isCheckmate()?b+="#":b+="+"),this._undoMove(),b}_moveFromSan(d,_=!1){const b=ee(d);let L=W(b),O=this._moves({legal:!0,piece:L});for(let I=0,$=O.length;I<$;I++)if(b===ee(this._moveToSan(O[I],O)))return O[I];if(!_)return null;let A,V,N,y,X,J=!1;V=b.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),V?(A=V[1],N=V[2],y=V[3],X=V[4],N.length==1&&(J=!0)):(V=b.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),V&&(A=V[1],N=V[2],y=V[3],X=V[4],N.length==1&&(J=!0))),L=W(b),O=this._moves({legal:!0,piece:A||L});for(let I=0,$=O.length;I<$;I++)if(N&&y){if((!A||A.toLowerCase()==O[I].piece)&&a[N]==O[I].from&&a[y]==O[I].to&&(!X||X.toLowerCase()==O[I].promotion))return O[I];if(J){const Q=w(O[I].from);if((!A||A.toLowerCase()==O[I].piece)&&a[y]==O[I].to&&(N==Q[0]||N==Q[1])&&(!X||X.toLowerCase()==O[I].promotion))return O[I]}}return null}ascii(){let d=`   +------------------------+
`;for(let _=a.a8;_<=a.h1;_++){if(M(_)===0&&(d+=" "+"87654321"[g(_)]+" |"),this._board[_]){const b=this._board[_].type,O=this._board[_].color===t.WHITE?b.toUpperCase():b.toLowerCase();d+=" "+O+" "}else d+=" . ";_+1&136&&(d+=`|
`,_+=8)}return d+=`   +------------------------+
`,d+="     a  b  c  d  e  f  g  h",d}perft(d){const _=this._moves({legal:!1});let b=0;const L=this._turn;for(let O=0,A=_.length;O<A;O++)this._makeMove(_[O]),this._isKingAttacked(L)||(d-1>0?b+=this.perft(d-1):b++),this._undoMove();return b}_makePretty(d){const{color:_,piece:b,from:L,to:O,flags:A,captured:V,promotion:N}=d;let y="";for(const J in i)i[J]&A&&(y+=s[J]);const X={color:_,piece:b,from:w(L),to:w(O),san:this._moveToSan(d,this._moves({legal:!0})),flags:y};return V&&(X.captured=V),N&&(X.promotion=N),X}turn(){return this._turn}board(){const d=[];let _=[];for(let b=a.a8;b<=a.h1;b++)this._board[b]==null?_.push(null):_.push({square:w(b),type:this._board[b].type,color:this._board[b].color}),b+1&136&&(d.push(_),_=[],b+=8);return d}squareColor(d){if(d in a){const _=a[d];return(g(_)+M(_))%2===0?"light":"dark"}return null}history({verbose:d=!1}={}){const _=[],b=[];for(;this._history.length>0;)_.push(this._undoMove());for(;;){const L=_.pop();if(!L)break;d?b.push(this._makePretty(L)):b.push(this._moveToSan(L,this._moves())),this._makeMove(L)}return b}_pruneComments(){const d=[],_={},b=L=>{L in this._comments&&(_[L]=this._comments[L])};for(;this._history.length>0;)d.push(this._undoMove());for(b(this.fen());;){const L=d.pop();if(!L)break;this._makeMove(L),b(this.fen())}this._comments=_}getComment(){return this._comments[this.fen()]}setComment(d){this._comments[this.fen()]=d.replace("{","[").replace("}","]")}deleteComment(){const d=this._comments[this.fen()];return delete this._comments[this.fen()],d}getComments(){return this._pruneComments(),Object.keys(this._comments).map(d=>({fen:d,comment:this._comments[d]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(d=>{const _=this._comments[d];return delete this._comments[d],{fen:d,comment:_}})}}t.Chess=ue})(wn);var ve=(t=>(t[t.WHITE=0]="WHITE",t[t.BLACK=1]="BLACK",t[t.BOTH=2]="BOTH",t[t.SPECTATOR=3]="SPECTATOR",t[t.SERVER=4]="SERVER",t))(ve||{}),te=(t=>(t[t.LEGAL=0]="LEGAL",t[t.LEGALHOVER=1]="LEGALHOVER",t[t.CHECK=2]="CHECK",t[t.MOVE=3]="MOVE",t[t.NEXTMOVE=4]="NEXTMOVE",t[t.PREMOVE=5]="PREMOVE",t[t.PREMOVEHOVER=6]="PREMOVEHOVER",t[t.SELECT=7]="SELECT",t))(te||{});const Tt=t=>{if(typeof t=="string")return t;switch(t){case 0:case 1:return"legal";case 2:return"check";case 3:return"move";case 4:return"nextMove";case 5:case 6:return"preMove";case 7:return"select";default:return"check"}};class ni{constructor(e){D(this,"boardTheme");D(this,"piecesTheme");D(this,"mouseEvents");D(this,"flipped");D(this,"notation");D(this,"style");D(this,"startFen");D(this,"size");D(this,"scale");D(this,"resizible");D(this,"defaultState",{boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:ci,size:0,scale:70,style:{shadow:!1,borderRadius:"0rem"},resizible:!1});D(this,"setConfigSettings",e=>{e!==void 0&&(e.boardTheme!==void 0&&(this.boardTheme=e.boardTheme),e.piecesTheme!==void 0&&(this.piecesTheme=e.piecesTheme),e.mouseEvents!==void 0&&(this.mouseEvents=e.mouseEvents),e.flipped!==void 0&&(this.flipped=e.flipped),e.notation!==void 0&&(this.notation=e.notation),e.startFen!==void 0&&(this.startFen=e.startFen),e.style!==void 0&&(e.style.shadow!==void 0&&(this.style.shadow=e.style.shadow),e.style.borderRadius!==void 0&&(this.style.borderRadius=e.style.borderRadius)),e.resizible!==void 0&&(this.resizible=e.resizible))});D(this,"getConfig",()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...(this.style.shadow!==this.defaultState.style.shadow||this.style.borderRadius!==this.defaultState.style.borderRadius)&&{style:{...this.style.shadow!==this.defaultState.style.shadow&&{shadow:this.style.shadow},...this.style.borderRadius!==this.defaultState.style.borderRadius&&{borderRadius:this.style.borderRadius}}},...this.resizible!==this.defaultState.resizible&&{resizible:this.resizible}};if(Object.keys(e).length!==0)return e});this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.scale=this.defaultState.scale,this.style={...this.defaultState.style},this.resizible=this.defaultState.resizible,this.setConfigSettings(e)}}class ii{constructor(e){D(this,"enabled");D(this,"color");D(this,"defaultState",{enabled:!0,color:ve.BOTH});D(this,"setConfigSettings",e=>{switch(e){case!0:this.enabled=!0,this.color=ve.BOTH;break;case!1:this.enabled=!1;break;case ve.WHITE:this.enabled=!0,this.color=ve.WHITE;break;case ve.BLACK:this.enabled=!0,this.color=ve.BLACK;break}});D(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class ai{constructor(e){D(this,"enabled");D(this,"ghostPiece");D(this,"transition");D(this,"defaultState",{enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}});D(this,"setConfigSettings",e=>{var s,i,a,r;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(s=e==null?void 0:e.transition)!=null&&s.duration&&(this.transition.settings.duration=(i=e==null?void 0:e.transition)==null?void 0:i.duration),(a=e==null?void 0:e.transition)!=null&&a.easing&&(this.transition.settings.easing=(r=e==null?void 0:e.transition)==null?void 0:r.easing)))))});D(this,"getConfig",()=>{const e={},s={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(s.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(s.easing=this.transition.settings.easing),Object.keys(s).length!==0&&(e.transition=s)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class ri{constructor(e){D(this,"enabled");D(this,"selectedPiece");D(this,"defaultState",{enabled:!0,selectedPiece:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(this.enabled=e)});D(this,"getConfig",()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class li{constructor(e){D(this,"enabled");D(this,"whiteToMove");D(this,"moves");D(this,"settings");D(this,"preMoves");D(this,"lastMove");D(this,"checkSquare");D(this,"defaultState",{enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))});D(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled});this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class oi{constructor(e){D(this,"enabled");D(this,"settings");D(this,"defaultState",{enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))});D(this,"getConfig",()=>{const e={},s=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(s.forEach(i=>{this.settings[i]!==this.defaultState.settings[i]&&(e[i]=this.settings[i])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class ui{constructor(e){D(this,"enabled");D(this,"tools");D(this,"settings");D(this,"defaultState",{enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.knightLShape!==void 0&&(this.settings.knightLShape=e.knightLShape),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))});D(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(e.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class di{constructor(e){D(this,"enabled");D(this,"settings");D(this,"defaultState",{enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))});D(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class fi{constructor(e){D(this,"getLegalMoves");D(this,"getPreMoves");D(this,"beforeMove");D(this,"afterMove");D(this,"getLastMove");D(this,"getInCheck");D(this,"getWhiteToMove");D(this,"defaultState",{getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(e.getLegalMoves&&(this.getLegalMoves=e.getLegalMoves),e.getPreMoves&&(this.getPreMoves=e.getPreMoves),e.beforeMove&&(this.beforeMove=e.beforeMove),e.afterMove&&(this.afterMove=e.afterMove),e.getLastMove&&(this.getLastMove=e.getLastMove),e.getInCheck&&(this.getInCheck=e.getInCheck),e.getWhiteToMove&&(this.getWhiteToMove=e.getWhiteToMove))});D(this,"getConfig",()=>{const e={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(e).length>0?e:void 0});this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const ci="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Sn{constructor(e){D(this,"pieces");D(this,"markedSquares");D(this,"board");D(this,"movable");D(this,"draggable");D(this,"selectable");D(this,"legal");D(this,"callbacks");D(this,"highlight");D(this,"drawTools");D(this,"sounds");D(this,"getConfig",()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}));this.pieces=[],this.markedSquares=new Set,this.board=new ni(e==null?void 0:e.board),this.movable=new ii(e==null?void 0:e.movable),this.draggable=new ai(e==null?void 0:e.draggable),this.selectable=new ri(e==null?void 0:e.selectable),this.legal=new li(e==null?void 0:e.legal),this.callbacks=new fi(e==null?void 0:e.callbacks),this.highlight=new oi(e==null?void 0:e.highlight),this.drawTools=new ui(e==null?void 0:e.drawTools),this.sounds=new di(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){!this.legalEnabled||(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){!this.preMovesEnabled||(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.preMovesEnabled?this.legal.preMoves.curMove:""}set currentPreMove(e){e.length<4||(this.preMovesEnabled?this.legal.preMoves.curMove=e:this.legal.preMoves.curMove="")}get selectableEnabled(){return this.selectable.enabled}get draggableEnabled(){return this.draggable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){!this.legalEnabled||(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4&&e!==""||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const hi=["a","b","c","d","e","f","g","h"],gi=["8","7","6","5","4","3","2","1"];function Ot(t){return{x:hi.indexOf(t[0]),y:gi.indexOf(t[1])}}function Jt(t){return t.charCodeAt(0)-97}function bi(t){return 8-parseInt(t,10)}const pi=t=>{let e="",s=0;for(let i=0;i<t.length;i++){i!==0&&(e+="/");for(let a=0;a<t[i].length;a++){const r=t[i][a];r!=null&&s===0?r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase():r!=null&&s!==0?(e+=s.toString(),s=0,r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase()):s++}s!==0&&(e+=s.toString(),s=0)}return e},mi="8/8/8/8/8/8/8/8 w - - 0 1";class vi{constructor(e){D(this,"letters",{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7});D(this,"state");D(this,"changeLegalHoverIfNeeded",e=>{e.color!==te.LEGAL&&e.color!==te.PREMOVE||this.state.pieces.forEach(s=>{s.square===e.square&&(e.color=e.color===te.LEGAL?te.LEGALHOVER:te.PREMOVEHOVER)})});D(this,"highlightSquare",(e,s)=>{const i={square:e,color:s};this.state.markedSquares.forEach(a=>{a.square===e&&a.color!==te.MOVE&&a.color!==te.CHECK&&this.state.markedSquares.delete(a)}),this.changeLegalHoverIfNeeded(i),this.state.markedSquares.add(i)});D(this,"legalHover",e=>{this.state.markedSquares.forEach(s=>{if(s.square===e&&s.color===te.LEGAL)s.color=te.LEGALHOVER;else if(s.square!==e&&s.color===te.LEGALHOVER){let i=!1;this.state.pieces.forEach(a=>{a.square===s.square&&(i=!0)}),i||(s.color=te.LEGAL)}})});D(this,"preMoveHover",e=>{this.state.markedSquares.forEach(s=>{if(s.square===e&&s.color===te.PREMOVE)s.color=te.PREMOVEHOVER;else if(s.square!==e&&s.color===te.PREMOVEHOVER){let i=!1;this.state.pieces.forEach(a=>{a.square===s.square&&(i=!0)}),i||(s.color=te.PREMOVE)}})});D(this,"toggleSquareHighlight",(e,s)=>{const i={square:e,color:s};let a=!1;return this.state.markedSquares.forEach(r=>{r.square===e&&(this.state.markedSquares.delete(r),r.color===s&&(a=!0))}),this.changeLegalHoverIfNeeded(i),a?!0:(this.state.markedSquares.add(i),!1)});D(this,"getSelectedSquare",()=>{let e="";return this.state.markedSquares.forEach(s=>{s.color===te.SELECT&&(e=s.square)}),e});D(this,"clearSquare",(e,s)=>{e.length===2&&this.state.markedSquares.forEach(i=>{i.square===e&&(i.color===s||s===void 0)&&this.state.markedSquares.delete(i)})});D(this,"clearAllSquares",e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(s=>{s.color===e&&this.state.markedSquares.delete(s)})});D(this,"setPiece",(e,s)=>{if(this.notValidThing({square:e,piece:s}))return;const i=this.state.pieces.find(a=>a.square===e);i?i.name=s:this.state.pieces.push({square:e,name:s})});D(this,"removePiece",e=>{this.notValidThing({square:e})||this.state.pieces.forEach((s,i)=>{s.square===e&&this.state.pieces.splice(i,1)})});D(this,"clearAllPieces",()=>{this.state.pieces.length=0});D(this,"getGridCoordsFromSquare",e=>{if(this.notValidThing({square:e}))return{x:0,y:0};const s=e[0],i=e[1],a=this.state.board.flipped?Math.abs(this.letters[s]-7):this.letters[s],r=this.state.board.flipped?Math.abs(parseInt(i,10)-8):parseInt(i,10)-1;return typeof a!="number"||r<0||r>7?{x:0,y:0}:{x:a,y:r}});D(this,"makeMove",e=>{if(this.notValidThing({move:e}))return;let s=!1,i;const a=e.substring(0,2),r=e.substring(2,4),n=e.substring(4);this.state.pieces.forEach(l=>{l.square===r&&(i=l,this.removePiece(l.square))}),this.state.pieces.forEach(l=>{l.square===a&&(l.square=r,s=!0,n&&(l.name=l.name[0]+n.toUpperCase()))}),s?this.state.legal.lastMove=e:i&&this.state.pieces.push(i)});D(this,"getSquareFromIndices",(e,s)=>`${Object.keys(this.letters)[e]}${(s+1).toString()}`);D(this,"updatePiecesWithFen",e=>{const s=[...Array(8)].map(()=>Array(8).fill(null)),i=["1","2","3","4","5","6","7","8"];let a=0,r=0;for(let o=0;o<(e.includes(" ")?e.indexOf(" "):e.length);o++)if(e[o]==="/")a++,r=0;else if(!i.includes(e[o]))e[o]===e[o].toUpperCase()?s[a][r]=`w${e[o]}`:s[a][r]=`b${e[o].toUpperCase()}`,r++;else for(let u=0;u<parseInt(e[o],10);u++)s[a][r]=null,r++;const n=[],l=[];for(let o=0;o<s.length;++o)for(let u=0;u<s.length;++u){const c=s[o][u],h=this.getPieceFromSquare(this.getSquareFromIndices(u,Math.abs(o-7)));c&&!h&&n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),!c&&h&&l.push(h),c&&h&&c!==h.name&&(n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),l.push(h))}for(let o=0;o<l.length;o++)for(let u=0;u<n.length;u++)!n[u]||!l[o]||n[u].name===l[o].name&&(l[o].square=n[u].square,l.splice(o,1),o--,n.splice(u,1),u--);n.forEach(o=>{this.state.pieces.push(o)}),l.forEach(o=>{this.state.pieces.splice(this.state.pieces.indexOf(o),1)})});D(this,"notValidThing",e=>{const{square:s,piece:i,move:a}=e;return!!(s&&s.length!==2||i&&i.length!==2||a&&a.length!==4&&a.length!==5)});D(this,"setGhostPiece",e=>{this.state.draggable.ghostPiece.piece=e});D(this,"removeGhostPiece",()=>{this.state.draggable.ghostPiece.piece=void 0});D(this,"isCastling",e=>{switch(e){case"e1g1":case"e1c1":case"e8g8":case"e8c8":return!0;default:return!1}});D(this,"getRookMoveIfIsCastling",e=>{switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return}});D(this,"isEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s===void 0||s.name!=="wP"&&s.name!=="bP")});D(this,"getCapturedPawnSquareIfIsEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const s=this.getPieceFromSquare(e.substring(0,2));if(s===void 0||s.name!=="wP"&&s.name!=="bP")return;const i=this.getPieceFromSquare(`${e[2]}${(parseInt(e[3],10)+(s.name==="wP"?-1:1)).toString()}`);return i==null?void 0:i.square});D(this,"isCapture",e=>!!this.getPieceFromSquare(e.substring(2,4)));D(this,"isPromotion",e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s&&(s.name[1]!=="P"||s.name[0]==="w"&&e[3]==="1"||s.name[0]==="b"&&e[3]==="8"))});D(this,"callbackExists",e=>this.state.callbacks[e]!==void 0);D(this,"flipBoard",e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped});D(this,"setConfigSettings",e=>{this.state.setConfigSettings(e)});this.state=new Sn(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const e=this.state.pieces.find(s=>s.name==="wK");if(e)return e.square}getBlackKingSquare(){const e=this.state.pieces.find(s=>s.name==="bK");if(e)return e.square}getShortFEN(){if(this.state.pieces.length===0)return mi;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(s=>{e[bi(s.square[1])][Jt(s.square[0])]=s.name}),pi(e)}getPieceFromSquare(e){if(!e)return;let s;return this.state.pieces.forEach(i=>{i.square===e&&(s=i)}),s}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get draggableEnabled(){return this.state.draggableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}}const _i={[te.LEGAL]:"legalSQ cursor-pointer",[te.LEGALHOVER]:"legalSQ_hover cursor-pointer",[te.SELECT]:"selectedSQ",[te.MOVE]:"highlightMove",[te.NEXTMOVE]:"nextMoveSQ",[te.PREMOVE]:"preMoveSQ cursor-pointer",[te.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[te.CHECK]:"checkSQ"},Ei={white:"#f0d9b5",black:"#b58863"},Mi="standard.svg",ki={[te.LEGAL]:"legalSQ cursor-pointer",[te.LEGALHOVER]:"legalSQ_hover cursor-pointer",[te.SELECT]:"selectedSQ-darkBlue",[te.MOVE]:"highlightMove-darkBlue",[te.NEXTMOVE]:"nextMoveSQ",[te.PREMOVE]:"preMoveSQ cursor-pointer",[te.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[te.CHECK]:"checkSQ"},wi={white:"#94A3B8",black:"#475569"},Si="darkBlue.svg",We={squareStyles:{standard:_i,darkBlue:ki},colors:{standard:Ei,darkBlue:wi},imageName:{standard:Mi,darkBlue:Si}};function ms(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function vs(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function _s(t){let e,s=t[4][t[1]?Math.abs(t[8]-7):t[8]]+"",i,a;return{c(){e=U("span"),i=Ee(s),a=se(),this.h()},l(r){e=H(r,"SPAN",{"data-file":!0,style:!0,class:!0});var n=z(e);i=Me(n,s),a=ne(n),n.forEach(E),this.h()},h(){p(e,"data-file",t[6]),ke(e,"--font-size",t[3]+"px"),ke(e,"color",t[8]%2===0?We.colors[t[0]].white:We.colors[t[0]].black),p(e,"class","svelte-1dkkugo")},m(r,n){Z(r,e,n),P(e,i),P(e,a)},p(r,n){n&2&&s!==(s=r[4][r[1]?Math.abs(r[8]-7):r[8]]+"")&&Nt(i,s),n&8&&ke(e,"--font-size",r[3]+"px"),n&1&&ke(e,"color",r[8]%2===0?We.colors[r[0]].white:We.colors[r[0]].black)},d(r){r&&E(e)}}}function Es(t){let e,s=(t[1]?t[8]+1:Math.abs(t[8]-8))+"",i,a,r;return{c(){e=U("span"),i=Ee(s),a=se(),this.h()},l(n){e=H(n,"SPAN",{"data-file":!0,style:!0,class:!0});var l=z(e);i=Me(l,s),a=ne(l),l.forEach(E),this.h()},h(){p(e,"data-file",t[6]),p(e,"style",r="--font-size: "+t[3]+"px; color: "+(t[8]%2===0?We.colors[t[0]].white:We.colors[t[0]].black)+";"+(t[1]?" text-align: right;":"")),p(e,"class","svelte-1dkkugo")},m(n,l){Z(n,e,l),P(e,i),P(e,a)},p(n,l){l&2&&s!==(s=(n[1]?n[8]+1:Math.abs(n[8]-8))+"")&&Nt(i,s),l&11&&r!==(r="--font-size: "+n[3]+"px; color: "+(n[8]%2===0?We.colors[n[0]].white:We.colors[n[0]].black)+";"+(n[1]?" text-align: right;":""))&&p(e,"style",r)},d(n){n&&E(e)}}}function yi(t){let e,s,i,a,r=t[4],n=[];for(let u=0;u<r.length;u+=1)n[u]=_s(vs(t,r,u));let l=t[4],o=[];for(let u=0;u<l.length;u+=1)o[u]=Es(ms(t,l,u));return{c(){e=U("div");for(let u=0;u<n.length;u+=1)n[u].c();s=se(),i=U("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=H(u,"DIV",{class:!0});var c=z(e);for(let m=0;m<n.length;m+=1)n[m].l(c);c.forEach(E),s=ne(u),i=H(u,"DIV",{class:!0});var h=z(i);for(let m=0;m<o.length;m+=1)o[m].l(h);h.forEach(E),this.h()},h(){p(e,"class","files noselect svelte-1dkkugo"),p(i,"class","ranks noselect svelte-1dkkugo"),tt(()=>t[5].call(i))},m(u,c){Z(u,e,c);for(let h=0;h<n.length;h+=1)n[h].m(e,null);Z(u,s,c),Z(u,i,c);for(let h=0;h<o.length;h+=1)o[h].m(i,null);a=pn(i,t[5].bind(i))},p(u,[c]){if(c&27){r=u[4];let h;for(h=0;h<r.length;h+=1){const m=vs(u,r,h);n[h]?n[h].p(m,c):(n[h]=_s(m),n[h].c(),n[h].m(e,null))}for(;h<n.length;h+=1)n[h].d(1);n.length=r.length}if(c&27){l=u[4];let h;for(h=0;h<l.length;h+=1){const m=ms(u,l,h);o[h]?o[h].p(m,c):(o[h]=Es(m),o[h].c(),o[h].m(i,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=l.length}},i:Te,o:Te,d(u){u&&E(e),lt(n,u),u&&E(s),u&&E(i),lt(o,u),a()}}}function Ci(t,e,s){let i,{theme:a}=e,{flipped:r}=e;const n=["a","b","c","d","e","f","g","h"];let l;function o(){l=this.clientHeight,s(2,l)}return t.$$set=u=>{"theme"in u&&s(0,a=u.theme),"flipped"in u&&s(1,r=u.flipped)},t.$$.update=()=>{t.$$.dirty&4&&s(3,i=Math.floor(Math.log(l/8)*3))},[a,r,l,i,n,o]}class Ai extends Fe{constructor(e){super(),qe(this,e,Ci,yi,Ne,{theme:0,flipped:1})}}function Pi(t){const e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}function Ti(t){return t*t*((1.70158+1)*t-1.70158)}function Li(t){return--t*t*((1.70158+1)*t+1.70158)+1}function Ft(t){const e=.36363636363636365,s=8/11,i=9/10,a=4356/361,r=35442/1805,n=16061/1805,l=t*t;return t<e?7.5625*l:t<s?9.075*l-9.9*t+3.4:t<i?a*l-r*t+n:10.8*t*t-20.52*t+10.72}function Oi(t){return t<.5?.5*(1-Ft(1-t*2)):.5*Ft(t*2-1)+.5}function Ii(t){return 1-Ft(1-t)}function Ri(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function Fi(t){return 1-Math.sqrt(1-t*t)}function qi(t){return Math.sqrt(1- --t*t)}function Ni(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Di(t){return t*t*t}function ls(t){const e=t-1;return e*e*e+1}function Bi(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1}function Ui(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))}function Hi(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1}function Vi(t){return t===0||t===1?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-t*20)+1}function Ki(t){return t===0?t:Math.pow(2,10*(t-1))}function zi(t){return t===1?t:1-Math.pow(2,-10*t)}function Wi(t){return t/=.5,t<1?.5*t*t:(t--,-.5*(t*(t-2)-1))}function ji(t){return t*t}function Gi(t){return-t*(t-2)}function Qi(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1}function Xi(t){return Math.pow(t,4)}function Yi(t){return Math.pow(t-1,3)*(1-t)+1}function Zi(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function Ji(t){return t*t*t*t*t}function xi(t){return--t*t*t*t*t+1}function $i(t){return-.5*(Math.cos(Math.PI*t)-1)}function ea(t){const e=Math.cos(t*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function ta(t){return Math.sin(t*Math.PI/2)}const qt=Object.freeze(Object.defineProperty({__proto__:null,backIn:Ti,backInOut:Pi,backOut:Li,bounceIn:Ii,bounceInOut:Oi,bounceOut:Ft,circIn:Fi,circInOut:Ri,circOut:qi,cubicIn:Di,cubicInOut:Ni,cubicOut:ls,elasticIn:Ui,elasticInOut:Bi,elasticOut:Hi,expoIn:Ki,expoInOut:Vi,expoOut:zi,quadIn:ji,quadInOut:Wi,quadOut:Gi,quartIn:Xi,quartInOut:Qi,quartOut:Yi,quintIn:Ji,quintInOut:Zi,quintOut:xi,sineIn:ea,sineInOut:$i,sineOut:ta,linear:mn},Symbol.toStringTag,{value:"Module"}));function Ms(t){return Object.prototype.toString.call(t)==="[object Date]"}function xt(t,e){if(t===e||t!==t)return()=>t;const s=typeof t;if(s!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map((a,r)=>xt(t[r],a));return a=>i.map(r=>r(a))}if(s==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Ms(t)&&Ms(e)){t=t.getTime(),e=e.getTime();const r=e-t;return n=>new Date(t+n*r)}const i=Object.keys(e),a={};return i.forEach(r=>{a[r]=xt(t[r],e[r])}),r=>{const n={};return i.forEach(l=>{n[l]=a[l](r)}),n}}if(s==="number"){const i=e-t;return a=>t+a*i}throw new Error(`Cannot interpolate ${s} values`)}function sa(t,e={}){const s=Zn(t);let i,a=t;function r(n,l){if(t==null)return s.set(t=n),Promise.resolve();a=n;let o=i,u=!1,{delay:c=0,duration:h=400,easing:m=mn,interpolate:T=xt}=It(It({},e),l);if(h===0)return o&&(o.abort(),o=null),s.set(t=a),Promise.resolve();const R=Kn()+c;let F;return i=zn(k=>{if(k<R)return!0;u||(F=T(t,n),typeof h=="function"&&(h=h(t,n)),u=!0),o&&(o.abort(),o=null);const C=k-R;return C>h?(s.set(t=n),!1):(s.set(t=F(m(C/h))),!0)}),i.promise}return{set:r,update:(n,l)=>r(n(a,t),l),subscribe:s.subscribe}}function ks(t,e,s,i){if(e===0&&s===0)return t;const a=i?["a","b","c","d","e","f","g","h"].reverse():["a","b","c","d","e","f","g","h"],r=i?["8","7","6","5","4","3","2","1"].reverse():["8","7","6","5","4","3","2","1"],n=a[a.indexOf(t[0])+e],l=r[r.indexOf(t[1])+s];if(!(!n||!l))return`${n}${l}`}function ws(t,e,s){const i=e*1.15,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",(t.offsetWidth*i).toString()),a.setAttribute("height",(t.offsetHeight*i).toString()),a.style.position="absolute",a.style.zIndex="100",a.style.translate=`${s?"":"-"}${25*i/2}% -${25*i/2}%`,a.style.opacity="0.2",r.setAttribute("r",(t.offsetWidth*i/2).toString()),r.setAttribute("cx",(t.offsetWidth*i/2).toString()),r.setAttribute("cy",(t.offsetHeight*i/2).toString()),r.setAttribute("fill","black"),a.appendChild(r),a}function na(t,e){let s;function i(A,V=1e3){let N=!1;const y=()=>{s==null?N=!1:(A(...s),s=null,setTimeout(y,V))};return(...X)=>{if(N){s=X;return}A(...X),N=!0,setTimeout(y,V)}}let a,r,n,l,o,u,c,h,m=!1,T;const R=t.parentNode;let F,k=!1,{startSquare:C,boardFlipped:f,mouseEvents:g,canDrag:M,canSelect:S,duration:w,easingFunc:q}=e;const{coords:G}=e;t.style.cursor=!M&&!S?"default":"pointer";let K=fs(G).x,j=fs(G).y;const W=1.6;let ee=ws(t,W,f);t.draggable=!1;function ue(A){const V=A.clientX-a,N=A.clientY-r;if(a=A.clientX,r=A.clientY,o+=V,u+=N,m||(Math.abs(o)>1||Math.abs(u)>1)&&(G.update(y=>({x:y.x+(a-t.offsetWidth/2-t.getBoundingClientRect().x)/t.clientWidth,y:A.pointerType==="touch"?y.y-(r-t.offsetHeight*1.5-t.getBoundingClientRect().y)/t.clientWidth:y.y-(r-t.offsetHeight/2-t.getBoundingClientRect().y)/t.clientWidth,scale:A.pointerType==="touch"?W:1}),{duration:w,easing:q}),m=!0,t.style.zIndex="30",t.style.cursor="grabbing",t.dispatchEvent(new CustomEvent("startMoving"))),!!m){if(A.pointerType==="touch"){const y=Math.floor((o+n)/t.offsetWidth),X=Math.floor((u+l)/t.offsetHeight),J=ks(C,y,X,f);if(J){if(J!==F){const I=Ot(J);ee.style.left=`${I.x*12.5}%`,ee.style.top=`${I.y*12.5}%`,R.appendChild(ee)}}else F&&(F=void 0)}G.update(y=>({x:y.x+V/t.clientWidth,y:y.y-N/t.clientWidth,scale:A.pointerType==="touch"?W:1}),{duration:0}),t.dispatchEvent(new CustomEvent("moving",{detail:{x:a,y:r}}))}}const ae=i(ue,10);function d(){const A=window.scrollX-c,V=window.scrollY-h;c=window.scrollX,h=window.scrollY,G.update(N=>({x:N.x+A,y:N.y+V,scale:1}),{duration:0})}function _(){window.removeEventListener("pointermove",ae),window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",_),document.body.removeEventListener("pointerleave",_),window.removeEventListener("scroll",d),s=null;const A=Math.floor((o+n)/t.offsetWidth),V=Math.floor((u+l)/t.offsetHeight),N=ks(C,A,V,f);k=!1,t.dispatchEvent(new CustomEvent("dropped",{detail:N})),G.update(()=>({x:K,y:j,scale:1}),{duration:w,easing:q}).then(()=>{k||t.dispatchEvent(new CustomEvent("animationEnded")),k||(t.style.zIndex="2")}),a=0,r=0,o=0,u=0,t.style.cursor=!M&&!S?"default":"pointer",setTimeout(()=>{k||(t.style.zIndex="2")},w),m=!1,ee.remove()}function b(A){if(A.button!==0||!A.isPrimary||!g)return;if((S||M)&&t.dispatchEvent(new CustomEvent("clicked")),!M){t.dispatchEvent(new CustomEvent("dropped",{detail:C}));return}K=f?7-Jt(C[0]):Jt(C[0]),j=f?8-parseInt(C[1],10):parseInt(C[1],10)-1,F=C;const V=A.target.getBoundingClientRect();A.pointerType==="touch"?(a=A.clientX,r=A.clientY,n=A.clientX-V.x,l=A.clientY-V.y):(a=A.clientX,r=A.clientY,n=A.offsetX,l=A.offsetY),o=0,u=0,c=window.scrollX,h=window.scrollY,k=!0,window.addEventListener("pointermove",ae),window.addEventListener("pointerup",_),window.addEventListener("pointercancel",_),document.body.addEventListener("pointerleave",_),window.addEventListener("scroll",d)}function L(A){A.preventDefault()}function O(A){A.preventDefault()}return t.addEventListener("contextmenu",L),t.addEventListener("dragstart",O),t.addEventListener("pointerdown",b),{destroy(){t.removeEventListener("pointerdown",b),t.removeEventListener("contextmenu",L),t.removeEventListener("dragstart",O),window.clearTimeout(T)},update(A){C=A.startSquare,w=A.duration,q=A.easingFunc,(A.canDrag!==M||A.canSelect!==S)&&(t.style.cursor=!A.canDrag&&!A.canSelect?"default":"pointer"),A.canDrag!==M&&(M=A.canDrag),A.canSelect!==S&&(S=A.canSelect),A.mouseEvents!==g&&(g=A.mouseEvents),f!==A.boardFlipped&&(ee=ws(t,W,A.boardFlipped)),f=A.boardFlipped}}}const Ss=""+new URL("../../assets/wP-f78bae6c.svg",import.meta.url).href,ia=""+new URL("../../assets/wR-5eb92d73.svg",import.meta.url).href,aa=""+new URL("../../assets/wN-a4c975a2.svg",import.meta.url).href,ra=""+new URL("../../assets/wB-1ff2f149.svg",import.meta.url).href,la=""+new URL("../../assets/wQ-8568b485.svg",import.meta.url).href,oa=""+new URL("../../assets/wK-4cdf6dc9.svg",import.meta.url).href,ua=""+new URL("../../assets/bP-84e521e8.svg",import.meta.url).href,da=""+new URL("../../assets/bR-e39efb08.svg",import.meta.url).href,fa=""+new URL("../../assets/bN-d3912d91.svg",import.meta.url).href,ca=""+new URL("../../assets/bB-c430b746.svg",import.meta.url).href,ha=""+new URL("../../assets/bQ-c7b9a43e.svg",import.meta.url).href,ga=""+new URL("../../assets/bK-3500a2e6.svg",import.meta.url).href;function $t(t){switch(t){case"wP":return Ss;case"wR":return ia;case"wN":return aa;case"wB":return ra;case"wQ":return la;case"wK":return oa;case"bP":return ua;case"bR":return da;case"bN":return fa;case"bB":return ca;case"bQ":return ha;case"bK":return ga;default:return Ss}}function ba(t){let e,s,i,a,r;return{c(){e=U("img"),this.h()},l(n){e=H(n,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){ke(e,"left",t[9].x*12.5+"%"),ke(e,"bottom",t[9].y*12.5+"%"),ke(e,"scale",t[9].scale),ke(e,"z-Index",t[4]?0:t[8]),ke(e,"opacity",t[4]?.3:1),ke(e,"cursor","pointer"),p(e,"class","noselect svelte-1g241z"),dt(e.src,s=$t(t[2]))||p(e,"src",s),p(e,"alt",t[2])},m(n,l){var o,u,c;Z(n,e,l),a||(r=[ns(i=na.call(null,e,{startSquare:t[1],mouseEvents:t[0],canDrag:t[13](t[7],t[6]),canSelect:t[14](t[7],t[5]),boardFlipped:t[3],duration:(o=t[6])!=null&&o.transition.enabled?t[6].transition.settings.duration:0,easingFunc:qt[(c=(u=t[6])==null?void 0:u.transition.settings.easing)!=null?c:"cubicInOut"],coords:t[11]})),he(e,"dropped",t[12]),he(e,"clicked",t[17]),he(e,"startMoving",t[18]),he(e,"animationEnded",t[19]),he(e,"moving",t[20])],a=!0)},p(n,[l]){var o,u,c;l&512&&ke(e,"left",n[9].x*12.5+"%"),l&512&&ke(e,"bottom",n[9].y*12.5+"%"),l&512&&ke(e,"scale",n[9].scale),l&272&&ke(e,"z-Index",n[4]?0:n[8]),l&16&&ke(e,"opacity",n[4]?.3:1),l&4&&!dt(e.src,s=$t(n[2]))&&p(e,"src",s),l&4&&p(e,"alt",n[2]),i&&is(i.update)&&l&235&&i.update.call(null,{startSquare:n[1],mouseEvents:n[0],canDrag:n[13](n[7],n[6]),canSelect:n[14](n[7],n[5]),boardFlipped:n[3],duration:(o=n[6])!=null&&o.transition.enabled?n[6].transition.settings.duration:0,easingFunc:qt[(c=(u=n[6])==null?void 0:u.transition.settings.easing)!=null?c:"cubicInOut"],coords:n[11]})},i:Te,o:Te,d(n){n&&E(e),a=!1,st(r)}}}function pa(t,e,s){var d,_;let i,a,{square:r}=e,{name:n}=e,{mouseEvents:l=!0}=e,{getGridCoordsFromSquare:o}=e,{flipped:u}=e,{isGhost:c=!1}=e;c&&(l=!1);let{selectableState:h=void 0}=e,{draggableState:m=void 0}=e,{legalState:T=void 0}=e,{movableState:R=void 0}=e,F=!1;const k=Ct();let C=(d=m==null?void 0:m.transition)!=null&&d.enabled?m.transition.settings.duration:0;const f=sa({x:0,y:0,scale:1},{duration:C,easing:qt[(_=m==null?void 0:m.transition.settings.easing)!=null?_:"cubicInOut"]});Wn(t,f,b=>s(9,a=b));let g=!1;const M=b=>b[0]==="w"?ve.WHITE:ve.BLACK,S=b=>{var O;const L=o(b);f.update(()=>({x:L.x,y:L.y,scale:1}),{duration:g?C:0,easing:qt[(O=m==null?void 0:m.transition.settings.easing)!=null?O:"cubicInOut"]}),g||(g=!0),C=m!=null&&m.transition.enabled?m.transition.settings.duration:0},w=b=>{C=0,b.detail||k("deselect"),r===b.detail?(!F&&K(R,h)?k("select"):k("deselect"),F=!F):F=!1,G(R,m)&&k("endDragging",r+b.detail),r!==b.detail&&b.detail&&k("move",r+b.detail)},q=b=>T!=null&&T.enabled?!!(T.preMoves.enabled&&M(n)===b.color||b.color===ve.WHITE&&T.whiteToMove&&M(n)===ve.WHITE||b.color===ve.BLACK&&!T.whiteToMove&&M(n)===ve.BLACK||b.color===ve.BOTH&&(M(n)===ve.WHITE&&T.whiteToMove||M(n)===ve.BLACK&&!T.whiteToMove)):b.color===M(n)||b.color===ve.BOTH,G=(b,L)=>!(b!=null&&b.enabled)||!(L!=null&&L.enabled)||!l?!1:q(b),K=(b,L)=>!(b!=null&&b.enabled)||!(L!=null&&L.enabled)||!l?!1:q(b),j=b=>b===void 0||b.name!==n||b.square!==r;function W(b){Je.call(this,t,b)}function ee(b){Je.call(this,t,b)}function ue(b){Je.call(this,t,b)}const ae=b=>{k("moving",b.detail)};return t.$$set=b=>{"square"in b&&s(1,r=b.square),"name"in b&&s(2,n=b.name),"mouseEvents"in b&&s(0,l=b.mouseEvents),"getGridCoordsFromSquare"in b&&s(15,o=b.getGridCoordsFromSquare),"flipped"in b&&s(3,u=b.flipped),"isGhost"in b&&s(4,c=b.isGhost),"selectableState"in b&&s(5,h=b.selectableState),"draggableState"in b&&s(6,m=b.draggableState),"legalState"in b&&s(16,T=b.legalState),"movableState"in b&&s(7,R=b.movableState)},t.$$.update=()=>{t.$$.dirty&32&&j(h==null?void 0:h.selectedPiece)&&(F=!1),t.$$.dirty&10&&S(r),t.$$.dirty&128&&s(8,i=typeof R=="boolean"?R?2:1:R!=null&&R.enabled?2:1)},[l,r,n,u,c,h,m,R,i,a,k,f,w,G,K,o,T,W,ee,ue,ae]}class yn extends Fe{constructor(e){super(),qe(this,e,pa,ba,Ne,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:15,flipped:3,isGhost:4,selectableState:5,draggableState:6,legalState:16,movableState:7})}}function ma(t){let e,s;return{c(){e=U("div"),this.h()},l(i){e=H(i,"DIV",{style:!0,class:!0}),z(e).forEach(E),this.h()},h(){ke(e,"left",t[3]*12.5+"%"),ke(e,"bottom",t[4]*12.5+"%"),p(e,"class",s="noselect "+We.squareStyles[t[1]][t[0]]+(t[2]?"":" pointer-events-none")+" svelte-10vytug")},m(i,a){Z(i,e,a)},p(i,[a]){a&8&&ke(e,"left",i[3]*12.5+"%"),a&16&&ke(e,"bottom",i[4]*12.5+"%"),a&7&&s!==(s="noselect "+We.squareStyles[i[1]][i[0]]+(i[2]?"":" pointer-events-none")+" svelte-10vytug")&&p(e,"class",s)},i:Te,o:Te,d(i){i&&E(e)}}}function va(t,e,s){let{square:i}=e,{color:a}=e,{getGridCoordsFromSquare:r}=e,{flipped:n}=e,{theme:l}=e,{mouseEvents:o=!0}=e,u,c;const h=()=>{const m=r(i);s(3,u=m.x),s(4,c=m.y)};return t.$$set=m=>{"square"in m&&s(5,i=m.square),"color"in m&&s(0,a=m.color),"getGridCoordsFromSquare"in m&&s(6,r=m.getGridCoordsFromSquare),"flipped"in m&&s(7,n=m.flipped),"theme"in m&&s(1,l=m.theme),"mouseEvents"in m&&s(2,o=m.mouseEvents)},t.$$.update=()=>{t.$$.dirty&128&&h()},[a,l,o,u,c,i,r,n]}class _a extends Fe{constructor(e){super(),qe(this,e,va,ma,Ne,{square:5,color:0,getGridCoordsFromSquare:6,flipped:7,theme:1,mouseEvents:2})}}const Ea=["a","b","c","d","e","f","g","h"],Ma=["8","7","6","5","4","3","2","1"];function ka(t){t.querySelectorAll("[fixed]").forEach(e=>e.remove())}function es(t){return`${Ea[t.x]}${Ma[t.y]}`}function Cn(t,e){return Math.abs((t.x-e.x)*(t.y-e.y))===2}function ts(t,e){return`${es(t)}${es(e)}`}function wa(t,e){return!!(Cn(t,e)||Math.abs(t.x-e.x)===Math.abs(t.y-e.y)||t.x===e.x!=(t.y===e.y))}function An(t,e,s,i,a,r){let n={x:-1,y:-1},l,o;Cn(e,s)&&i?(Math.abs(s.x-e.x)===2?n={x:s.x,y:e.y}:n={x:e.x,y:s.y},n.y-e.y<0?o=Math.PI+Math.atan((n.x-e.x)/(n.y-e.y)):o=Math.atan((n.x-e.x)/Math.abs(n.y-e.y)),l={x:s.x-Math.sign(s.x-n.x)*(n.x!==s.x?.4:0),y:s.y-Math.sign(s.y-n.y)*(n.y!==s.y?.4:0)}):(s.y-e.y<0?o=Math.PI+Math.atan((s.x-e.x)/(s.y-e.y)):o=Math.atan((s.x-e.x)/Math.abs(s.y-e.y)),l={x:s.x-Math.sin(o)*.4,y:s.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};t.setAttribute("points",`${u.x+.5},${u.y+.5} ${n.x!==-1&&n.y!==-1&&i?`${n.x+.5},${n.y+.5} `:""}${l.x+.5},${l.y+.5}`),t.setAttribute("data-sqID",`${ts(e,s)}`),r!==void 0&&t.setAttribute("opacity",`${r}`),a!==void 0&&(t.setAttribute("marker-start",`url(#start-${a[0]})`),t.setAttribute("marker-end",`url(#end-${a[0]})`),t.setAttribute("stroke",a))}function Lt(t,e,s,i,a,r){if(!(e===void 0||s.x===-1&&s.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),i?e.setAttribute("stroke","red"):a?e.setAttribute("stroke","orange"):r?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),t.querySelectorAll(`\u0441ircle[cx="${s.x+.5}"][cy="${s.y+.5}"]`).forEach(n=>{e!==void 0&&n!==e&&(n.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const n=i?"red":a?"orange":r?"blue":"green";e.setAttribute("stroke",`${n}`),e.setAttribute("marker-start",`url(#start-${n[0]})`),e.setAttribute("marker-end",`url(#end-${n[0]})`),t.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(l=>{e instanceof SVGPolylineElement&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function Pn(t,e,s,i,a){const r=document.createElementNS("http://www.w3.org/2000/svg","polyline");return An(r,t,e,s,i,a),r.setAttribute("fill","none"),r.setAttribute("stroke-width","0.25"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("opacity",a!==void 0?`${a}`:"0.4"),r.setAttribute("marker-start",i?`url(#start-${i[0]})`:"url(#start-g)"),r.setAttribute("marker-end",i?`url(#end-${i[0]})`:"url(#end-g)"),r.setAttribute("stroke",i||"green"),r}function ss(t,e,s){const i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",`${t.x+.5}`),i.setAttribute("cy",`${t.y+.5}`),i.setAttribute("r","0.465"),i.setAttribute("opacity",s?`${s}`:"0.4"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.07"),i.setAttribute("stroke",e!=null?e:"green"),i}function Sa(t,e,s){e.forEach(i=>{if(i.type==="circle"){const a=Ot(i.square),r=ss(a,i.color,i.opacity);t.appendChild(r)}else if(i.type==="arrow"){const a=Pn(Ot(i.from),Ot(i.to),s,i.color,i.opacity);a.setAttribute("fixed",""),t.appendChild(a)}})}function ys(t){t.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("fixed")||e.remove()})}function ya(t,e){let{svg:s,flipped:i,enabled:a,settings:r}=e,n=!1,l={x:-1,y:-1},o,u;function c(k,C){const f=t.getBoundingClientRect(),g=i?f.width-(k-f.left):k-f.left,M=i?f.height-(C-f.top):C-f.top;return{x:Math.max(0,Math.min(7,Math.floor(g/(t.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(M/(t.clientHeight/8))))}}function h(k){if(u===void 0||l.x===-1&&l.y===-1)return;const C=c(k.clientX,k.clientY);r.onlyChessMove&&!wa(l,C)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),l.x===C.x&&l.y===C.y?(ts(l,C),u instanceof SVGPolylineElement&&(u.remove(),u=ss(C)),Lt(s,u,l,k.shiftKey,k.ctrlKey,k.altKey),s.appendChild(u),s.querySelectorAll(`circle[cx="${l.x+.5}"][cy="${l.y+.5}"]`).forEach(f=>{f!==u&&(o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,s.querySelectorAll(`polyline[data-sqID="${ts(l,C)}"]`).forEach(f=>{u===void 0||l.x===-1&&l.y===-1||f===u||(o=f,f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=Pn(l,C,r.knightLShape),Lt(s,u,l,k.shiftKey,k.ctrlKey,k.altKey),s.appendChild(u)):u instanceof SVGPolylineElement&&An(u,l,C,r.knightLShape)))}function m(k){k.preventDefault()}function T(k){k.preventDefault(),Lt(s,u,l,k.shiftKey,k.ctrlKey,k.altKey)}function R(k){if(k.button===0)n=!1;else if(k.button===2){if(l.x===-1&&l.y===-1)return;s.querySelectorAll("[remove]").forEach(C=>{C.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:es(l),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,l={x:-1,y:-1},n=!1,window.removeEventListener("mousemove",h),window.removeEventListener("keydown",T),window.removeEventListener("keyup",T),window.removeEventListener("contextmenu",m)}window.removeEventListener("mouseup",R)}function F(k){if(k.button===0)n=!0,ys(s),window.addEventListener("mouseup",R);else if(k.button===2&&!n){const C=c(k.clientX,k.clientY);l=C,u=ss(C),Lt(s,u,l,k.shiftKey,k.ctrlKey,k.altKey),o=void 0,s.querySelectorAll(`circle[cx="${C.x+.5}"][cy="${C.y+.5}"]`).forEach(f=>{o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&s.appendChild(u),window.addEventListener("mousemove",h),window.addEventListener("mouseup",R),window.addEventListener("keydown",T),window.addEventListener("keyup",T),window.addEventListener("contextmenu",m)}}return a&&t.addEventListener("mousedown",F),{update(k){k.svg!==s&&(s=k.svg),k.enabled!==a&&(a=k.enabled,a?t.addEventListener("mousedown",F):(ys(s),t.removeEventListener("mousedown",F))),r=k.settings,i=k.flipped}}}function Cs(t,e,s){const i=t.slice();return i[8]=e[s],i}function As(t){let e,s,i,a;return{c(){e=Ve("marker"),s=Ve("path"),i=Ve("marker"),a=Ve("path"),this.h()},l(r){e=Ke(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var n=z(e);s=Ke(n,"path",{fill:!0,d:!0}),z(s).forEach(E),n.forEach(E),i=Ke(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var l=z(i);a=Ke(l,"path",{fill:!0,d:!0}),z(a).forEach(E),l.forEach(E),this.h()},h(){p(s,"fill",t[8]),p(s,"d","M 0 5 v 10 c 0 2.8 2.2 5 5 5 L 6 20 V 0 L 5 0 C 2.2 0 0 2.2 0 5 z"),p(e,"id","start-"+t[8][0]),p(e,"viewBox","0 0 5 20"),p(e,"refX","4"),p(e,"refY","10"),p(e,"markerUnits","strokeWidth"),p(e,"markerWidth","0.5"),p(e,"markerHeight","1"),p(e,"orient","auto"),p(a,"fill",t[8]),p(a,"d","M 9.5 9.5 l -8.7 -5 C 0.5 4.3 0 4.6 0 5 v 10 c 0 0.4 0.5 0.7 0.9 0.5 l 8.7 -5 C 9.9 10.3 9.9 9.7 9.5 9.5 z"),p(i,"id","end-"+t[8][0]),p(i,"viewBox","0 0 10 20"),p(i,"refX","0.2"),p(i,"refY","10"),p(i,"markerUnits","strokeWidth"),p(i,"orient","auto"),p(i,"fill","currentColor")},m(r,n){Z(r,e,n),P(e,s),Z(r,i,n),P(i,a)},p:Te,d(r){r&&E(e),r&&E(i)}}}function Ca(t){let e,s,i,a=t[2],r=[];for(let n=0;n<a.length;n+=1)r[n]=As(Cs(t,a,n));return{c(){e=Ve("svg"),s=Ve("defs");for(let n=0;n<r.length;n+=1)r[n].c();i=Ve("g"),this.h()},l(n){e=Ke(n,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var l=z(e);s=Ke(l,"defs",{});var o=z(s);for(let u=0;u<r.length;u+=1)r[u].l(o);o.forEach(E),i=Ke(l,"g",{}),z(i).forEach(E),l.forEach(E),this.h()},h(){p(e,"xmlns","http://www.w3.org/2000/svg"),ke(e,"transform","rotate("+(t[1]?"180deg":"0deg")+")"),p(e,"viewBox","0 0 8 8"),p(e,"class","svelte-19gv2n4")},m(n,l){Z(n,e,l),P(e,s);for(let o=0;o<r.length;o+=1)r[o].m(s,null);P(e,i),t[5](i)},p(n,[l]){if(l&4){a=n[2];let o;for(o=0;o<a.length;o+=1){const u=Cs(n,a,o);r[o]?r[o].p(u,l):(r[o]=As(u),r[o].c(),r[o].m(s,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}l&2&&ke(e,"transform","rotate("+(n[1]?"180deg":"0deg")+")")},i:Te,o:Te,d(n){n&&E(e),lt(r,n),t[5](null)}}}function Aa(t,e,s){let{flipped:i=!1}=e,{svg:a}=e,{knightLShape:r=!1}=e,{tools:n=[]}=e,l=!1;function o(h){!l||(ka(a),Sa(a,h,r))}as(()=>{l=!0,o(n)});const u=["green","red","blue","orange"];function c(h){fe[h?"unshift":"push"](()=>{a=h,s(0,a)})}return t.$$set=h=>{"flipped"in h&&s(1,i=h.flipped),"svg"in h&&s(0,a=h.svg),"knightLShape"in h&&s(3,r=h.knightLShape),"tools"in h&&s(4,n=h.tools)},t.$$.update=()=>{t.$$.dirty&16&&o(n)},[a,i,u,r,n,c]}class Pa extends Fe{constructor(e){super(),qe(this,e,Aa,Ca,Ne,{flipped:1,svg:0,knightLShape:3,tools:4})}}function Ps(t,{delay:e=0,duration:s=400,easing:i=ls,x:a=0,y:r=0,opacity:n=0}={}){const l=getComputedStyle(t),o=+l.opacity,u=l.transform==="none"?"":l.transform,c=o*(1-n);return{delay:e,duration:s,easing:i,css:(h,m)=>`
			transform: ${u} translate(${(1-h)*a}px, ${(1-h)*r}px);
			opacity: ${o-c*m}`}}function pt(t,{delay:e=0,duration:s=400,easing:i=ls}={}){const a=getComputedStyle(t),r=+a.opacity,n=parseFloat(a.height),l=parseFloat(a.paddingTop),o=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),h=parseFloat(a.borderTopWidth),m=parseFloat(a.borderBottomWidth);return{delay:e,duration:s,easing:i,css:T=>`overflow: hidden;opacity: ${Math.min(T*20,1)*r};height: ${T*n}px;padding-top: ${T*l}px;padding-bottom: ${T*o}px;margin-top: ${T*u}px;margin-bottom: ${T*c}px;border-top-width: ${T*h}px;border-bottom-width: ${T*m}px;`}}function Ta(t){let e,s,i,a,r,n;return{c(){e=U("button"),s=U("img"),this.h()},l(l){e=H(l,"BUTTON",{});var o=z(e);s=H(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(E),this.h()},h(){dt(s.src,i=t[1])||p(s,"src",i),p(s,"alt",a="Promotion to "+t[0].toUpperCase()),p(s,"class","svelte-17pqsbb")},m(l,o){Z(l,e,o),P(e,s),r||(n=he(e,"click",t[2]),r=!0)},p(l,[o]){o&1&&a!==(a="Promotion to "+l[0].toUpperCase())&&p(s,"alt",a)},i:Te,o:Te,d(l){l&&E(e),r=!1,n()}}}function La(t,e,s){let{piece:i}=e,{isWhite:a}=e,{showModal:r}=e;const n=Ct(),l=(a?"w":"b")+i.toUpperCase(),o=$t(l),u=()=>{n("newPromotion",i),s(3,r=!1)};return t.$$set=c=>{"piece"in c&&s(0,i=c.piece),"isWhite"in c&&s(4,a=c.isWhite),"showModal"in c&&s(3,r=c.showModal)},[i,o,u,r,a]}class Oa extends Fe{constructor(e){super(),qe(this,e,La,Ta,Ne,{piece:0,isWhite:4,showModal:3})}}function Ts(t,e,s){const i=t.slice();return i[6]=e[s],i}function Ls(t){let e,s,i,a,r,n=["q","r","b","n"],l=[];for(let u=0;u<4;u+=1)l[u]=Os(Ts(t,n,u));const o=u=>ie(l[u],1,1,()=>{l[u]=null});return{c(){e=U("div"),s=U("div");for(let u=0;u<4;u+=1)l[u].c();this.h()},l(u){e=H(u,"DIV",{class:!0});var c=z(e);s=H(c,"DIV",{class:!0});var h=z(s);for(let m=0;m<4;m+=1)l[m].l(h);h.forEach(E),c.forEach(E),this.h()},h(){p(s,"class","modal-content svelte-it5mr1"),p(e,"class","modal svelte-it5mr1")},m(u,c){Z(u,e,c),P(e,s);for(let h=0;h<4;h+=1)l[h].m(s,null);r=!0},p(u,c){if(c&3){n=["q","r","b","n"];let h;for(h=0;h<4;h+=1){const m=Ts(u,n,h);l[h]?(l[h].p(m,c),x(l[h],1)):(l[h]=Os(m),l[h].c(),x(l[h],1),l[h].m(s,null))}for(Ue(),h=4;h<4;h+=1)o(h);He()}},i(u){if(!r){for(let c=0;c<4;c+=1)x(l[c]);tt(()=>{a&&a.end(1),i=jn(s,Ps,{x:100,duration:300}),i.start()}),r=!0}},o(u){l=l.filter(Boolean);for(let c=0;c<4;c+=1)ie(l[c]);i&&i.invalidate(),a=Gn(s,Ps,{x:-200,duration:100}),r=!1},d(u){u&&E(e),lt(l,u),u&&a&&a.end()}}}function Os(t){let e,s,i,a;function r(o){t[3](o)}function n(o){t[4](o)}let l={piece:t[6]};return t[1]!==void 0&&(l.isWhite=t[1]),t[0]!==void 0&&(l.showModal=t[0]),e=new Oa({props:l}),fe.push(()=>be(e,"isWhite",r)),fe.push(()=>be(e,"showModal",n)),e.$on("newPromotion",t[5]),{c(){we(e.$$.fragment)},l(o){Se(e.$$.fragment,o)},m(o,u){ye(e,o,u),a=!0},p(o,u){const c={};!s&&u&2&&(s=!0,c.isWhite=o[1],pe(()=>s=!1)),!i&&u&1&&(i=!0,c.showModal=o[0],pe(()=>i=!1)),e.$set(c)},i(o){a||(x(e.$$.fragment,o),a=!0)},o(o){ie(e.$$.fragment,o),a=!1},d(o){Ce(e,o)}}}function Ia(t){let e,s,i=t[0]&&Ls(t);return{c(){i&&i.c(),e=Re()},l(a){i&&i.l(a),e=Re()},m(a,r){i&&i.m(a,r),Z(a,e,r),s=!0},p(a,[r]){a[0]?i?(i.p(a,r),r&1&&x(i,1)):(i=Ls(a),i.c(),x(i,1),i.m(e.parentNode,e)):i&&(Ue(),ie(i,1,1,()=>{i=null}),He())},i(a){s||(x(i),s=!0)},o(a){ie(i),s=!1},d(a){i&&i.d(a),a&&E(e)}}}function Ra(t,e,s){let i=!1,a;function r(u){s(0,i=!0),u?s(1,a=!0):s(1,a=!1)}function n(u){a=u,s(1,a)}function l(u){i=u,s(0,i)}function o(u){Je.call(this,t,u)}return[i,a,r,n,l,o]}class Fa extends Fe{constructor(e){super(),qe(this,e,Ra,Ia,Ne,{openPromotionModal:2})}get openPromotionModal(){return this.$$.ctx[2]}}const qa=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,Na=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,Da=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,Ba=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function Is(t){let e,s,i,a;return{c(){e=U("audio"),s=U("track"),i=U("source"),this.h()},l(r){e=H(r,"AUDIO",{preload:!0});var n=z(e);s=H(n,"TRACK",{kind:!0}),i=H(n,"SOURCE",{src:!0}),n.forEach(E),this.h()},h(){p(s,"kind","captions"),dt(i.src,a=qa)||p(i,"src",a),p(e,"preload","auto")},m(r,n){Z(r,e,n),P(e,s),P(e,i),t[3](e)},p:Te,d(r){r&&E(e),t[3](null)}}}function Rs(t){let e,s,i,a;return{c(){e=U("audio"),s=U("track"),i=U("source"),this.h()},l(r){e=H(r,"AUDIO",{preload:!0});var n=z(e);s=H(n,"TRACK",{kind:!0}),i=H(n,"SOURCE",{src:!0}),n.forEach(E),this.h()},h(){p(s,"kind","captions"),dt(i.src,a=Na)||p(i,"src",a),p(e,"preload","auto")},m(r,n){Z(r,e,n),P(e,s),P(e,i),t[4](e)},p:Te,d(r){r&&E(e),t[4](null)}}}function Fs(t){let e,s,i,a;return{c(){e=U("audio"),s=U("track"),i=U("source"),this.h()},l(r){e=H(r,"AUDIO",{preload:!0});var n=z(e);s=H(n,"TRACK",{kind:!0}),i=H(n,"SOURCE",{src:!0}),n.forEach(E),this.h()},h(){p(s,"kind","captions"),dt(i.src,a=Da)||p(i,"src",a),p(e,"preload","auto")},m(r,n){Z(r,e,n),P(e,s),P(e,i),t[5](e)},p:Te,d(r){r&&E(e),t[5](null)}}}function qs(t){let e,s,i,a;return{c(){e=U("audio"),s=U("track"),i=U("source"),this.h()},l(r){e=H(r,"AUDIO",{preload:!0});var n=z(e);s=H(n,"TRACK",{kind:!0}),i=H(n,"SOURCE",{src:!0}),n.forEach(E),this.h()},h(){p(s,"kind","captions"),dt(i.src,a=Ba)||p(i,"src",a),p(e,"preload","auto")},m(r,n){Z(r,e,n),P(e,s),P(e,i),t[6](e)},p:Te,d(r){r&&E(e),t[6](null)}}}function Ua(t){let e,s,i,a,r=t[0].MOVE&&Is(t),n=t[0].CAPTURE&&Rs(t),l=t[0].CASTLE&&Fs(t),o=t[0].UNDO&&qs(t);return{c(){r&&r.c(),e=se(),n&&n.c(),s=se(),l&&l.c(),i=se(),o&&o.c(),a=Re()},l(u){r&&r.l(u),e=ne(u),n&&n.l(u),s=ne(u),l&&l.l(u),i=ne(u),o&&o.l(u),a=Re()},m(u,c){r&&r.m(u,c),Z(u,e,c),n&&n.m(u,c),Z(u,s,c),l&&l.m(u,c),Z(u,i,c),o&&o.m(u,c),Z(u,a,c)},p(u,[c]){u[0].MOVE?r?r.p(u,c):(r=Is(u),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0].CAPTURE?n?n.p(u,c):(n=Rs(u),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null),u[0].CASTLE?l?l.p(u,c):(l=Fs(u),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),u[0].UNDO?o?o.p(u,c):(o=qs(u),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:Te,o:Te,d(u){r&&r.d(u),u&&E(e),n&&n.d(u),u&&E(s),l&&l.d(u),u&&E(i),o&&o.d(u),u&&E(a)}}}function Ha(t,e,s){let{settings:i}=e;const a={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},r=()=>{a.CASTLE&&(a.CASTLE.pause(),s(1,a.CASTLE.currentTime=0,a)),a.MOVE&&(a.MOVE.pause(),s(1,a.MOVE.currentTime=0,a)),a.CAPTURE&&(a.CAPTURE.pause(),s(1,a.CAPTURE.currentTime=0,a)),a.UNDO&&(a.UNDO.pause(),s(1,a.UNDO.currentTime=0,a))},n=m=>m===void 0||i[m];function l(m){switch(r(),m){case"MOVE":a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CAPTURE":a.CAPTURE&&n("CAPTURE")?a.CAPTURE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CASTLE":a.CASTLE&&n("CASTLE")?a.CASTLE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"UNDO":a.UNDO&&n("UNDO")?(s(1,a.UNDO.volume=.3,a),a.UNDO.play()):a.MOVE&&n("MOVE")&&a.MOVE.play();break}}function o(m){fe[m?"unshift":"push"](()=>{a.MOVE=m,s(1,a)})}function u(m){fe[m?"unshift":"push"](()=>{a.CAPTURE=m,s(1,a)})}function c(m){fe[m?"unshift":"push"](()=>{a.CASTLE=m,s(1,a)})}function h(m){fe[m?"unshift":"push"](()=>{a.UNDO=m,s(1,a)})}return t.$$set=m=>{"settings"in m&&s(0,i=m.settings)},[i,a,l,o,u,c,h]}class Va extends Fe{constructor(e){super(),qe(this,e,Ha,Ua,Ne,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Ns=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,Ds=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function Ka(t,e){let{mouseEvents:s}=e,i=e.curScale,a,r,n;function l(c){c.stopPropagation(),t.dispatchEvent(new CustomEvent("resizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-a)/3)),Math.max(0,Math.min(100,n+(c.pageY-r)/3))))}}))}function o(c){c.stopPropagation(),t.dispatchEvent(new CustomEvent("endResizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-a)/3)),Math.max(0,Math.min(100,n+(c.pageY-r)/3))))}})),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",o)}function u(c){!s||(c.stopPropagation(),c.button===0&&(a=c.pageX,r=c.pageY,n=i,window.addEventListener("pointermove",l),window.addEventListener("pointerup",o)))}return t.addEventListener("pointerdown",u),{update(c){i=c.curScale,s!==c.mouseEvents&&(s=c.mouseEvents)},destroy(){t.removeEventListener("mousedown",u)}}}function za(t){let e,s,i,a,r,n,l;return{c(){e=U("div"),s=Ve("svg"),i=Ve("path"),this.h()},l(o){e=H(o,"DIV",{style:!0,class:!0});var u=z(e);s=Ke(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var c=z(s);i=Ke(c,"path",{d:!0}),z(i).forEach(E),c.forEach(E),u.forEach(E),this.h()},h(){p(i,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),p(s,"xmlns","http://www.w3.org/2000/svg"),p(s,"viewBox","0 0 16 16"),p(s,"fill","currentColor"),ke(e,"color",We.colors[t[0].state.board.boardTheme].black),p(e,"class",a=cs(t[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")},m(o,u){Z(o,e,u),P(e,s),P(s,i),n||(l=[he(e,"pointerdown",vn(t[3])),ns(r=Ka.call(null,e,{mouseEvents:t[1],curScale:t[0].state.board.scale})),he(e,"resizing",t[4]),he(e,"endResizing",t[5])],n=!0)},p(o,[u]){u&1&&ke(e,"color",We.colors[o[0].state.board.boardTheme].black),u&2&&a!==(a=cs(o[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")&&p(e,"class",a),r&&is(r.update)&&u&3&&r.update.call(null,{mouseEvents:o[1],curScale:o[0].state.board.scale})},i:Te,o:Te,d(o){o&&E(e),n=!1,st(l)}}}function Wa(t,e,s){const i=Ct();let{chessboard:a}=e,{mouseEvents:r=!0}=e;function n(u){Je.call(this,t,u)}const l=u=>i("resizing",u.detail.scale),o=u=>i("endResizing",u.detail.scale);return t.$$set=u=>{"chessboard"in u&&s(0,a=u.chessboard),"mouseEvents"in u&&s(1,r=u.mouseEvents)},[a,r,i,n,l,o]}class ja extends Fe{constructor(e){super(),qe(this,e,Wa,za,Ne,{chessboard:0,mouseEvents:1})}}function Bs(t,e,s){const i=t.slice();return i[79]=e[s],i}function Us(t,e,s){const i=t.slice();return i[82]=e[s],i}function Hs(t){let e=[],s=new Map,i,a,r=t[6].state.pieces;const n=l=>l[82];for(let l=0;l<r.length;l+=1){let o=Us(t,r,l),u=n(o);s.set(u,e[l]=Vs(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Re()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Re()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Z(l,i,o),a=!0},p(l,o){o[0]&59470&&(r=l[6].state.pieces,Ue(),e=_n(e,o,n,1,l,r,s,i.parentNode,En,Vs,i,Us),He())},i(l){if(!a){for(let o=0;o<r.length;o+=1)x(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)ie(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&E(i)}}}function Vs(t,e){let s,i,a;function r(){return e[55](e[82])}function n(){return e[56](e[82])}function l(...u){return e[57](e[82],...u)}function o(){return e[59](e[82])}return i=new yn({props:{square:e[82].square,name:e[82].name,mouseEvents:e[6].state.board.mouseEvents,legalState:e[6].state.legal,draggableState:e[6].state.draggable,selectableState:e[6].state.selectable,movableState:e[6].state.movable,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped}}),i.$on("move",e[13]),i.$on("clicked",r),i.$on("startMoving",n),i.$on("moving",l),i.$on("endDragging",e[58]),i.$on("select",o),i.$on("deselect",e[60]),{key:t,first:null,c(){s=Re(),we(i.$$.fragment),this.h()},l(u){s=Re(),Se(i.$$.fragment,u),this.h()},h(){this.first=s},m(u,c){Z(u,s,c),ye(i,u,c),a=!0},p(u,c){e=u;const h={};c[0]&64&&(h.square=e[82].square),c[0]&64&&(h.name=e[82].name),c[0]&64&&(h.mouseEvents=e[6].state.board.mouseEvents),c[0]&64&&(h.legalState=e[6].state.legal),c[0]&64&&(h.draggableState=e[6].state.draggable),c[0]&64&&(h.selectableState=e[6].state.selectable),c[0]&64&&(h.movableState=e[6].state.movable),c[0]&64&&(h.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),c[0]&64&&(h.flipped=e[6].flipped),i.$set(h)},i(u){a||(x(i.$$.fragment,u),a=!0)},o(u){ie(i.$$.fragment,u),a=!1},d(u){u&&E(s),Ce(i,u)}}}function Ks(t){let e,s;return e=new yn({props:{isGhost:!0,square:t[6].ghostPiece.square,name:t[6].ghostPiece.name,getGridCoordsFromSquare:t[6].getGridCoordsFromSquare,flipped:t[6].flipped}}),{c(){we(e.$$.fragment)},l(i){Se(e.$$.fragment,i)},m(i,a){ye(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.square=i[6].ghostPiece.square),a[0]&64&&(r.name=i[6].ghostPiece.name),a[0]&64&&(r.getGridCoordsFromSquare=i[6].getGridCoordsFromSquare),a[0]&64&&(r.flipped=i[6].flipped),e.$set(r)},i(i){s||(x(e.$$.fragment,i),s=!0)},o(i){ie(e.$$.fragment,i),s=!1},d(i){Ce(e,i)}}}function zs(t){let e=[],s=new Map,i,a,r=[...t[6].state.markedSquares];const n=l=>l[79];for(let l=0;l<r.length;l+=1){let o=Bs(t,r,l),u=n(o);s.set(u,e[l]=Ws(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Re()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Re()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Z(l,i,o),a=!0},p(l,o){o[0]&66&&(r=[...l[6].state.markedSquares],Ue(),e=_n(e,o,n,1,l,r,s,i.parentNode,En,Ws,i,Bs),He())},i(l){if(!a){for(let o=0;o<r.length;o+=1)x(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)ie(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&E(i)}}}function Ws(t,e){let s,i,a;return i=new _a({props:{theme:e[6].state.board.boardTheme,square:e[79].square,color:e[79].color,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped,mouseEvents:e[6].state.board.mouseEvents}}),i.$on("dragenter",e[61]),{key:t,first:null,c(){s=Re(),we(i.$$.fragment),this.h()},l(r){s=Re(),Se(i.$$.fragment,r),this.h()},h(){this.first=s},m(r,n){Z(r,s,n),ye(i,r,n),a=!0},p(r,n){e=r;const l={};n[0]&64&&(l.theme=e[6].state.board.boardTheme),n[0]&64&&(l.square=e[79].square),n[0]&64&&(l.color=e[79].color),n[0]&64&&(l.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),n[0]&64&&(l.flipped=e[6].flipped),n[0]&64&&(l.mouseEvents=e[6].state.board.mouseEvents),i.$set(l)},i(r){a||(x(i.$$.fragment,r),a=!0)},o(r){ie(i.$$.fragment,r),a=!1},d(r){r&&E(s),Ce(i,r)}}}function js(t){let e,s;return e=new Ai({props:{theme:t[6].state.board.boardTheme,flipped:t[6].flipped}}),{c(){we(e.$$.fragment)},l(i){Se(e.$$.fragment,i)},m(i,a){ye(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.theme=i[6].state.board.boardTheme),a[0]&64&&(r.flipped=i[6].flipped),e.$set(r)},i(i){s||(x(e.$$.fragment,i),s=!0)},o(i){ie(e.$$.fragment,i),s=!1},d(i){Ce(e,i)}}}function Gs(t){let e,s;return e=new ja({props:{chessboard:t[6],mouseEvents:t[6].state.board.mouseEvents}}),e.$on("resizing",t[62]),{c(){we(e.$$.fragment)},l(i){Se(e.$$.fragment,i)},m(i,a){ye(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.chessboard=i[6]),a[0]&64&&(r.mouseEvents=i[6].state.board.mouseEvents),e.$set(r)},i(i){s||(x(e.$$.fragment,i),s=!0)},o(i){ie(e.$$.fragment,i),s=!1},d(i){Ce(e,i)}}}function Qs(t){let e,s,i;function a(n){t[63](n)}let r={flipped:t[6].flipped,tools:t[6].state.drawTools.tools,knightLShape:t[6].state.drawTools.settings.knightLShape};return t[8]!==void 0&&(r.svg=t[8]),e=new Pa({props:r}),fe.push(()=>be(e,"svg",a)),{c(){we(e.$$.fragment)},l(n){Se(e.$$.fragment,n)},m(n,l){ye(e,n,l),i=!0},p(n,l){const o={};l[0]&64&&(o.flipped=n[6].flipped),l[0]&64&&(o.tools=n[6].state.drawTools.tools),l[0]&64&&(o.knightLShape=n[6].state.drawTools.settings.knightLShape),!s&&l[0]&256&&(s=!0,o.svg=n[8],pe(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){ie(e.$$.fragment,n),i=!1},d(n){Ce(e,n)}}}function Xs(t){let e,s,i={};return e=new Fa({props:i}),t[64](e),e.$on("newPromotion",t[16]),{c(){we(e.$$.fragment)},l(a){Se(e.$$.fragment,a)},m(a,r){ye(e,a,r),s=!0},p(a,r){const n={};e.$set(n)},i(a){s||(x(e.$$.fragment,a),s=!0)},o(a){ie(e.$$.fragment,a),s=!1},d(a){t[64](null),Ce(e,a)}}}function Ys(t){let e,s,i={settings:t[6].state.sounds.settings};return e=new Va({props:i}),t[70](e),{c(){we(e.$$.fragment)},l(a){Se(e.$$.fragment,a)},m(a,r){ye(e,a,r),s=!0},p(a,r){const n={};r[0]&64&&(n.settings=a[6].state.sounds.settings),e.$set(n)},i(a){s||(x(e.$$.fragment,a),s=!0)},o(a){ie(e.$$.fragment,a),s=!1},d(a){t[70](null),Ce(e,a)}}}function Ga(t){let e,s,i,a,r,n,l,o,u,c,h,m,T,R,F,k,C,f,g=t[6].state.board.startFen&&Hs(t),M=t[6].ghostPiece&&Ks(t),S=t[6].highlightEnabled&&zs(t),w=t[6].state.board.notation&&js(t),q=t[6].state.board.resizible&&Gs(t),G=t[6].state.drawTools.enabled&&Qs(t),K=t[6].legalEnabled&&Xs(t),j=t[6].soundsEnabled&&Ys(t);return{c(){e=U("div"),s=U("div"),i=U("div"),g&&g.c(),a=se(),M&&M.c(),r=se(),S&&S.c(),n=se(),w&&w.c(),l=se(),q&&q.c(),o=se(),G&&G.c(),u=se(),K&&K.c(),R=se(),j&&j.c(),F=Re(),this.h()},l(W){e=H(W,"DIV",{class:!0});var ee=z(e);s=H(ee,"DIV",{class:!0,style:!0});var ue=z(s);i=H(ue,"DIV",{style:!0,class:!0});var ae=z(i);g&&g.l(ae),ae.forEach(E),a=ne(ue),M&&M.l(ue),r=ne(ue),S&&S.l(ue),n=ne(ue),w&&w.l(ue),l=ne(ue),q&&q.l(ue),o=ne(ue),G&&G.l(ue),u=ne(ue),K&&K.l(ue),ue.forEach(E),ee.forEach(E),R=ne(W),j&&j.l(W),F=Re(),this.h()},h(){ke(i,"width","100%"),ke(i,"height","100%"),p(i,"class","noselect"),p(s,"class",c="noselect board "+(t[6].state.board.style.shadow?"shadow":"")+" text-sm "+t[0]+" svelte-42iz37"),p(s,"style",h="--boardTheme: url("+(t[6].state.board.boardTheme==="standard"?Ns:Ds)+"); "+(t[6].state.board.style.borderRadius!=="0rem"&&t[6].state.board.style.borderRadius!=="0px"?`border-radius: ${t[6].state.board.style.borderRadius};`:"")),tt(()=>t[68].call(s)),p(e,"class","boardWrapper svelte-42iz37")},m(W,ee){Z(W,e,ee),P(e,s),P(s,i),g&&g.m(i,null),P(s,a),M&&M.m(s,null),P(s,r),S&&S.m(s,null),P(s,n),w&&w.m(s,null),P(s,l),q&&q.m(s,null),P(s,o),G&&G.m(s,null),P(s,u),K&&K.m(s,null),t[67](s),T=pn(s,t[68].bind(s)),t[69](e),Z(W,R,ee),j&&j.m(W,ee),Z(W,F,ee),k=!0,C||(f=[he(s,"pointerdown",t[12]),he(s,"contextmenu",hs(t[53])),he(s,"drag",hs(t[54])),ns(m=ya.call(null,s,{svg:t[8],flipped:t[6].flipped,enabled:t[6].state.drawTools.enabled&&t[6].state.board.mouseEvents,settings:t[6].state.drawTools.settings})),he(s,"drawCircle",t[65]),he(s,"drawArrow",t[66])],C=!0)},p(W,ee){W[6].state.board.startFen?g?(g.p(W,ee),ee[0]&64&&x(g,1)):(g=Hs(W),g.c(),x(g,1),g.m(i,null)):g&&(Ue(),ie(g,1,1,()=>{g=null}),He()),W[6].ghostPiece?M?(M.p(W,ee),ee[0]&64&&x(M,1)):(M=Ks(W),M.c(),x(M,1),M.m(s,r)):M&&(Ue(),ie(M,1,1,()=>{M=null}),He()),W[6].highlightEnabled?S?(S.p(W,ee),ee[0]&64&&x(S,1)):(S=zs(W),S.c(),x(S,1),S.m(s,n)):S&&(Ue(),ie(S,1,1,()=>{S=null}),He()),W[6].state.board.notation?w?(w.p(W,ee),ee[0]&64&&x(w,1)):(w=js(W),w.c(),x(w,1),w.m(s,l)):w&&(Ue(),ie(w,1,1,()=>{w=null}),He()),W[6].state.board.resizible?q?(q.p(W,ee),ee[0]&64&&x(q,1)):(q=Gs(W),q.c(),x(q,1),q.m(s,o)):q&&(Ue(),ie(q,1,1,()=>{q=null}),He()),W[6].state.drawTools.enabled?G?(G.p(W,ee),ee[0]&64&&x(G,1)):(G=Qs(W),G.c(),x(G,1),G.m(s,u)):G&&(Ue(),ie(G,1,1,()=>{G=null}),He()),W[6].legalEnabled?K?(K.p(W,ee),ee[0]&64&&x(K,1)):(K=Xs(W),K.c(),x(K,1),K.m(s,null)):K&&(Ue(),ie(K,1,1,()=>{K=null}),He()),(!k||ee[0]&65&&c!==(c="noselect board "+(W[6].state.board.style.shadow?"shadow":"")+" text-sm "+W[0]+" svelte-42iz37"))&&p(s,"class",c),(!k||ee[0]&64&&h!==(h="--boardTheme: url("+(W[6].state.board.boardTheme==="standard"?Ns:Ds)+"); "+(W[6].state.board.style.borderRadius!=="0rem"&&W[6].state.board.style.borderRadius!=="0px"?`border-radius: ${W[6].state.board.style.borderRadius};`:"")))&&p(s,"style",h),m&&is(m.update)&&ee[0]&320&&m.update.call(null,{svg:W[8],flipped:W[6].flipped,enabled:W[6].state.drawTools.enabled&&W[6].state.board.mouseEvents,settings:W[6].state.drawTools.settings}),W[6].soundsEnabled?j?(j.p(W,ee),ee[0]&64&&x(j,1)):(j=Ys(W),j.c(),x(j,1),j.m(F.parentNode,F)):j&&(Ue(),ie(j,1,1,()=>{j=null}),He())},i(W){k||(x(g),x(M),x(S),x(w),x(q),x(G),x(K),x(j),k=!0)},o(W){ie(g),ie(M),ie(S),ie(w),ie(q),ie(G),ie(K),ie(j),k=!1},d(W){W&&E(e),g&&g.d(),M&&M.d(),S&&S.d(),w&&w.d(),q&&q.d(),G&&G.d(),K&&K.d(),t[67](null),T(),t[69](null),W&&E(R),j&&j.d(W),W&&E(F),C=!1,st(f)}}}function Qa(t,e,s){let i,{config:a}=e,{className:r=""}=e;const n=new vi(a),l=Ct();let o,u,c,h,m,T="";const R=v=>{n.clearAllSquares(v),v===te.LEGAL&&n.clearAllSquares(te.LEGALHOVER),v===te.PREMOVE&&n.clearAllSquares(te.PREMOVEHOVER),s(6,n)},F=(v,Y)=>{!k(Tt(Y))||(n.highlightSquare(v,Y),s(6,n))},k=v=>n.highlightEnabled&&(v===void 0||n.highlightSettings[typeof v=="string"?v:Tt(v)]),C=v=>{if(!n.selectableEnabled&&n.draggableEnabled&&Q(v),!n.selectableEnabled)return;f(!0);const Y=n.getPieceFromSquare(v);Y!==void 0&&(s(6,n.selectedPiece=Y,n),Q())},f=(v=!0)=>{R(te.SELECT),R(te.LEGAL),R(te.PREMOVE),s(6,n.selectedPiece=void 0,n),v&&(R(te.NEXTMOVE),s(6,n.currentPreMove="",n))},g=v=>{R(te.CHECK),v&&n.legalEnabled&&F(v,te.CHECK),s(6,n)},M=()=>{R(te.CHECK)},S=v=>{n.flipBoard(v),s(6,n)},w=(v,Y)=>{v.forEach(le=>n.highlightSquare(le,Y)),s(6,n)},q=(v,Y=!0,le=te.MOVE)=>{v.length<4||!k(Tt(le))||(Y&&R(le),w([v.substring(0,2),v.substring(2,4)],le))},G=(v,Y,le=te.MOVE)=>{const me=[];Y&&R(le),v.forEach(Ae=>{Ae.length<4||(me.push(Ae.substring(0,2)),me.push(Ae.substring(2,4)))}),w(me,le)},K=v=>{F(v.substring(2,4),te.LEGAL)},j=(v,Y,le=te.LEGAL)=>{R(le),k(Tt(le))&&(v.forEach(me=>{me.length<4||(Y===void 0||me.substring(0,2)===Y)&&n.highlightSquare(me.substring(2,4),le)}),s(6,n))},W=(v,Y=!0)=>{n.makeMove(v),Y&&q(v),s(6,n)},ee=v=>{n.removePiece(v),s(6,n)},ue=v=>n.whiteToMove&&v[0]==="w"||!n.whiteToMove&&v[0]==="b",ae=(v=!1)=>{!n.legalEnabled||(n.state.callbacks.getWhiteToMove&&s(6,n.whiteToMove=n.state.callbacks.getWhiteToMove(),n),n.state.callbacks.getPreMoves&&n.preMovesEnabled?s(6,n.preMoves=n.state.callbacks.getPreMoves(),n):s(6,n.preMoves=[],n),n.state.callbacks.getLegalMoves&&n.state.legal.enabled?s(6,n.legalMoves=n.state.callbacks.getLegalMoves(),n):s(6,n.legalMoves=[],n),v&&Q(),n.state.callbacks.getInCheck&&n.state.callbacks.getInCheck()?n.whiteToMove?g(n.getWhiteKingSquare()):g(n.getBlackKingSquare()):M(),n.state.callbacks.getLastMove?(s(6,n.lastMove=n.state.callbacks.getLastMove(),n),q(n.lastMove)):R(te.MOVE))},d=v=>{n.soundsEnabled&&h&&h.playMoveSound(v)},_=v=>{n.setGhostPiece(v),s(6,n)},b=()=>{n.removeGhostPiece(),s(6,n)},L=v=>{if(v.substring(0,2)===v.substring(2,4))return;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(v),f();const Y=n.getRookMoveIfIsCastling(v),le=n.getCapturedPawnSquareIfIsEnPassant(v);if(Y&&n.legalEnabled&&n.state.legal.settings.allowCastling?(W(Y,!1),d("CASTLE")):le&&n.legalEnabled&&n.state.legal.settings.allowEnPassant?(ee(le),d("CAPTURE")):n.isCapture(v)?d("CAPTURE"):d("MOVE"),b(),W(v),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(v),ae(),n.legalEnabled&&n.preMovesEnabled&&n.currentPreMove!==""){if(n.legalMoves.includes(n.state.legal.preMoves.curMove)||n.legalMoves.includes(`${n.state.legal.preMoves.curMove}q`)){const me=n.currentPreMove;s(6,n.currentPreMove="",n),Xn().then(()=>{L(me)})}R(te.NEXTMOVE)}},O=v=>{!n.legalEnabled||!n.preMovesEnabled||!n.movableEnabled||(R(te.PREMOVE),q(v,!0,te.NEXTMOVE),s(6,n.currentPreMove=v,n),l("nextMove",{move:v}))},A=v=>{m.openPromotionModal(!0),T=v,n.makeMove(v),R(te.LEGAL),R(te.SELECT),q(v)},V=(v,Y)=>{n.clearSquare(v,Y),s(6,n)},N=()=>{n.clearAllPieces(),s(6,n)},y=(v,Y)=>{n.setPiece(v,Y),s(6,n)},X=(v,Y)=>{var me;const le=(me=n.getPieceFromSquare(v))==null?void 0:me.name;!le||(Y!==void 0?n.setPiece(v,`${Y===ve.WHITE?"w":"b"}${le[1]}`):n.setPiece(v,`${le[0]==="w"?"b":"w"}${le[1]}`),s(6,n))},J=(v,Y)=>{const le=Math.floor(v/n.state.board.size*8),me=Math.floor(Y/n.state.board.size*8),Ae=n.flipped?Math.abs(le-7):le,Ze=n.flipped?me:Math.abs(me-7);return`${Object.keys(n.letters)[Ae]}${(Ze+1).toString()}`},I=v=>{if(!n.state.board.mouseEvents)return;if(v.button===2){f();return}if(!n.movableEnabled)return;const Y=o.getBoundingClientRect(),le=v.clientX-Y.left,me=v.clientY-Y.top,Ae=J(le,me),Ze=n.getPieceFromSquare(Ae);if(l("squareClick",{square:Ae,piece:Ze?Ze.name:void 0}),!n.selectableEnabled&&!n.draggableEnabled){f();return}if(n.selectedPiece&&n.selectedPiece.square!==Ae&&!n.legalEnabled){L(n.selectedPiece.square+Ae),f();return}if(n.selectedPiece&&n.selectedPiece.square!==Ae&&!ue(n.selectedPiece.name)){n.preMovesEnabled&&n.preMoves.includes(n.selectedPiece.square+Ae)&&Ze!==void 0&&Ze.name[0]!==n.selectedPiece.name[0]&&O(n.selectedPiece.square+Ae),f(!1);return}n.selectedPiece&&n.selectedPiece.square!==Ae&&(Ze===void 0||Ze.name[0]!==n.selectedPiece.name[0])&&ue(n.selectedPiece.name)&&(n.isPromotion(n.selectedPiece.square+Ae)&&n.legalMoves.includes(`${n.selectedPiece.square+Ae}q`)?A(n.selectedPiece.square+Ae):n.legalMoves.includes(n.selectedPiece.square+Ae)&&L(n.selectedPiece.square+Ae),f())},$=v=>{const Y=v.detail;n.legalEnabled?n.isPromotion(Y)&&n.legalMoves.includes(`${Y}q`)?A(Y):n.legalMoves.includes(Y)?L(Y):n.preMovesEnabled&&n.preMoves.includes(Y)?O(Y):f():L(Y),R(te.LEGAL),R(te.PREMOVE),s(6,n)},Q=v=>{var Y;if(n.selectableEnabled||n.draggableEnabled){const le=n.getPieceFromSquare(v!=null?v:(Y=n.selectedPiece)==null?void 0:Y.square);if(!le||(n.selectableEnabled&&F(le.square,te.SELECT),!n.legalEnabled))return;R(te.LEGAL),R(te.PREMOVE),ue(le.name)&&j(n.legalMoves,le.square),ue(le.name)||j(n.preMoves,le.square,te.PREMOVE)}},re=(v,Y=!0,le="MOVE")=>{if(n.updatePiecesWithFen(v),Y&&f(),R(),b(),ae(!1),s(6,n.currentPreMove="",n),n.state.callbacks.getLastMove){const me=n.state.callbacks.getLastMove();s(6,n.lastMove=me,n),le!==!1&&(le!=="MOVE"?d(le):n.isCastling(me)?d("CASTLE"):d(le)),q(me)}else le!==!1&&d(le);Q(),s(6,n)},de=()=>n.getShortFEN(),ce=v=>{!v||n.state.board.size===v||(s(6,n.state.board.size=v,n),n.state.board.resizible&&document.body.style.setProperty("--boardSize",`${n.state.board.size}px`))},Le=v=>{!v||n.state.board.scale===v||(s(6,n.state.board.scale=v,n),n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`))},oe=v=>{var Y;return(Y=n.getPieceFromSquare(v))==null?void 0:Y.name},_e=v=>{s(6,n.state.drawTools.tools=v,n)},Oe=v=>{s(6,n.state.drawTools.tools=n.state.drawTools.tools.filter(Y=>v?(!v.type||Y.type!==v.type)&&(!v.from||Y.type==="arrow"&&Y.from!==v.from||Y.type==="circle"&&Y.square!==v.from)&&(!v.to||Y.type==="arrow"&&Y.to!==v.to)&&(v.fixed===void 0||Y.fixed!==v.fixed):!1),n)},Ie=v=>{v===!1?s(6,n.state.movable.enabled=!1,n):(s(6,n.state.movable.enabled=!0,n),s(6,n.state.movable.color=v===!0?ve.BOTH:v,n))},De=v=>{v.length<4||(s(6,n.lastMove=v,n),q(v))},Be=v=>{s(6,n.legalMoves=v,n)},ze=v=>{s(6,n.preMoves=v,n)},xe=()=>n.state,$e=v=>{s(6,n.state=v,n),R(),ae(!1),q(n.lastMove),q(n.currentPreMove,!0,te.NEXTMOVE),Q()},mt=v=>{v!==void 0&&(n.setConfigSettings(v),s(6,n),$e(n.state))},vt=v=>v.getConfig(),Ge=(v,Y)=>{const le=o.getBoundingClientRect();n.legalEnabled&&(ue(Y.name)&&n.legalHover(J(v.detail.x-le.x,v.detail.y-le.y)),!ue(Y.name)&&n.preMovesEnabled&&n.preMoveHover(J(v.detail.x-le.x,v.detail.y-le.y))),s(6,n)},ft=v=>{n.ghostPieceEnabled&&_(v),R(te.SELECT)},ct=v=>{const Y=n.getPieceFromSquare(T.substring(2,4));if(!Y)return;const le=Y.name[0]+v.detail.toUpperCase(),me=T+v.detail;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(me),n.setPiece(Y.square,le),s(6,n),d("MOVE"),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(me),ae()};function _t(v){if(!o||!v)return;if(i==null||i(),typeof window.ResizeObserver>"u")throw new Error("window.ResizeObserver is missing.");const Y=new ResizeObserver(le=>{const me=v.getBoundingClientRect();le.forEach(()=>{o.style.setProperty("width",`${Math.floor(me.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`),o.style.setProperty("height",`${Math.floor(me.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`)})});return Y.observe(v),()=>{Y.unobserve(v),Y.disconnect()}}as(()=>{ae(!0),n.state.callbacks.getLastMove&&q(n.state.callbacks.getLastMove()),n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`)}),Qn(()=>{i==null||i(),n.state.board.resizible&&document.body.style.removeProperty("--boardScale")});function Qe(v){Je.call(this,t,v)}function Et(v){Je.call(this,t,v)}const Xe=v=>{l("piececlick",{piece:v}),C(v.square)},nt=v=>{l("startDragging",{piece:v}),ft(v)},Mt=(v,Y)=>Ge(Y,v);function At(v){Je.call(this,t,v)}const Bt=v=>{F(v.square,te.SELECT)},Ut=()=>{f()},Ht=v=>{F(v.detail.square,te.LEGALHOVER)},Vt=v=>{Le(v.detail)};function Kt(v){c=v,s(8,c)}function zt(v){fe[v?"unshift":"push"](()=>{m=v,s(10,m)})}const Wt=v=>l("drawCircle",{square:v.detail.square,color:v.detail.color}),Ye=v=>l("drawArrow",{move:v.detail.move,color:v.detail.color});function jt(v){fe[v?"unshift":"push"](()=>{o=v,s(7,o)})}function Gt(){n.state.board.size=this.clientWidth,s(6,n)}function kt(v){fe[v?"unshift":"push"](()=>{u=v,s(5,u)})}function Qt(v){fe[v?"unshift":"push"](()=>{h=v,s(9,h)})}return t.$$set=v=>{"config"in v&&s(17,a=v.config),"className"in v&&s(0,r=v.className)},t.$$.update=()=>{t.$$.dirty[0]&32&&(i=_t(u))},[r,F,C,f,Le,u,n,o,c,h,m,l,I,$,Ge,ft,ct,a,R,g,M,S,w,q,G,K,j,W,ee,ae,d,L,O,A,V,N,y,X,J,re,de,ce,oe,_e,Oe,Ie,De,Be,ze,xe,$e,mt,vt,Qe,Et,Xe,nt,Mt,At,Bt,Ut,Ht,Vt,Kt,zt,Wt,Ye,jt,Gt,kt,Qt]}class Xa extends Fe{constructor(e){super(),qe(this,e,Qa,Ga,Ne,{config:17,className:0,clearAllSquares:18,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:19,removeCheckSquare:20,flipBoard:21,highlightManySquares:22,highlightMove:23,highlightMoves:24,highlightLegalMove:25,highlightLegalMoves:26,movePiece:27,removePiece:28,updateLegalState:29,playMoveSound:30,makeMove:31,makeNextMove:32,makeMovePromotion:33,removeSquareHighlight:34,removeAllPiece:35,createPiece:36,changeColorOfPiece:37,getSquareFromCoords:38,setFEN:39,getShortFEN:40,setSize:41,setScale:4,getPieceFromSquare:42,setTools:43,removeTools:44,setMovableColor:45,setLastMove:46,setLegalMoves:47,setPreMoves:48,getState:49,setState:50,setConfigSettings:51,getConfigFromState:52},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[18]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[19]}get removeCheckSquare(){return this.$$.ctx[20]}get flipBoard(){return this.$$.ctx[21]}get highlightManySquares(){return this.$$.ctx[22]}get highlightMove(){return this.$$.ctx[23]}get highlightMoves(){return this.$$.ctx[24]}get highlightLegalMove(){return this.$$.ctx[25]}get highlightLegalMoves(){return this.$$.ctx[26]}get movePiece(){return this.$$.ctx[27]}get removePiece(){return this.$$.ctx[28]}get updateLegalState(){return this.$$.ctx[29]}get playMoveSound(){return this.$$.ctx[30]}get makeMove(){return this.$$.ctx[31]}get makeNextMove(){return this.$$.ctx[32]}get makeMovePromotion(){return this.$$.ctx[33]}get removeSquareHighlight(){return this.$$.ctx[34]}get removeAllPiece(){return this.$$.ctx[35]}get createPiece(){return this.$$.ctx[36]}get changeColorOfPiece(){return this.$$.ctx[37]}get getSquareFromCoords(){return this.$$.ctx[38]}get setFEN(){return this.$$.ctx[39]}get getShortFEN(){return this.$$.ctx[40]}get setSize(){return this.$$.ctx[41]}get setScale(){return this.$$.ctx[4]}get getPieceFromSquare(){return this.$$.ctx[42]}get setTools(){return this.$$.ctx[43]}get removeTools(){return this.$$.ctx[44]}get setMovableColor(){return this.$$.ctx[45]}get setLastMove(){return this.$$.ctx[46]}get setLegalMoves(){return this.$$.ctx[47]}get setPreMoves(){return this.$$.ctx[48]}get getState(){return this.$$.ctx[49]}get setState(){return this.$$.ctx[50]}get setConfigSettings(){return this.$$.ctx[51]}get getConfigFromState(){return this.$$.ctx[52]}}const Zs=["standard","darkBlue"],Js=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function xs(t){let e,s,i;return{c(){e=U("input"),this.h()},l(a){e=H(a,"INPUT",{type:!0,class:!0}),this.h()},h(){p(e,"type","checkbox"),p(e,"class","mr-1")},m(a,r){Z(a,e,r),e.checked=t[0],s||(i=[he(e,"change",t[8]),he(e,"click",vn(t[7])),he(e,"change",t[9])],s=!0)},p(a,r){r&1&&(e.checked=a[0])},d(a){a&&E(e),s=!1,st(i)}}}function $s(t){let e,s,i;return{c(){e=Ve("svg"),s=Ve("path"),this.h()},l(a){e=Ke(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=z(e);s=Ke(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),z(s).forEach(E),r.forEach(E),this.h()},h(){p(s,"fill-rule","evenodd"),p(s,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),p(s,"clip-rule","evenodd"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 20 20"),p(e,"fill","currentColor"),p(e,"class",i="w-5 h-5 transition "+(t[1]?"rotate-180":"rotate-0"))},m(a,r){Z(a,e,r),P(e,s)},p(a,r){r&2&&i!==(i="w-5 h-5 transition "+(a[1]?"rotate-180":"rotate-0"))&&p(e,"class",i)},d(a){a&&E(e)}}}function en(t){let e,s,i;const a=t[6].default,r=cn(a,t,t[5],null);return{c(){e=U("div"),r&&r.c(),this.h()},l(n){e=H(n,"DIV",{class:!0});var l=z(e);r&&r.l(l),l.forEach(E),this.h()},h(){p(e,"class","py-2 px-4")},m(n,l){Z(n,e,l),r&&r.m(e,null),i=!0},p(n,l){r&&r.p&&(!i||l&32)&&hn(r,a,n,n[5],i?bn(a,n[5],l,null):gn(n[5]),null)},i(n){i||(x(r,n),n&&tt(()=>{s||(s=gt(e,pt,{},!0)),s.run(1)}),i=!0)},o(n){ie(r,n),n&&(s||(s=gt(e,pt,{},!1)),s.run(0)),i=!1},d(n){n&&E(e),r&&r.d(n),n&&s&&s.end()}}}function Ya(t){let e,s,i,a,r,n,l,o,u,c,h,m,T,R,F=t[0]!==void 0&&xs(t),k=t[3]&&$s(t),C=t[1]&&en(t);return{c(){e=U("div"),s=U("button"),i=U("div"),F&&F.c(),a=se(),r=U("span"),n=Ee(t[2]),o=se(),k&&k.c(),h=se(),C&&C.c(),this.h()},l(f){e=H(f,"DIV",{class:!0});var g=z(e);s=H(g,"BUTTON",{class:!0});var M=z(s);i=H(M,"DIV",{class:!0});var S=z(i);F&&F.l(S),a=ne(S),r=H(S,"SPAN",{class:!0});var w=z(r);n=Me(w,t[2]),w.forEach(E),S.forEach(E),o=ne(M),k&&k.l(M),M.forEach(E),h=ne(g),C&&C.l(g),g.forEach(E),this.h()},h(){p(r,"class",l=t[0]===void 0?"ml-[21px]":""),p(i,"class","flex gap-1"),p(s,"class",u="flex justify-between px-4 py-2 "+(t[3]?"transition hover:bg-slate-800/40":"")+" rounded"),s.disabled=c=!t[3],p(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(f,g){Z(f,e,g),P(e,s),P(s,i),F&&F.m(i,null),P(i,a),P(i,r),P(r,n),P(s,o),k&&k.m(s,null),P(e,h),C&&C.m(e,null),m=!0,T||(R=he(s,"click",t[10]),T=!0)},p(f,[g]){f[0]!==void 0?F?F.p(f,g):(F=xs(f),F.c(),F.m(i,a)):F&&(F.d(1),F=null),(!m||g&4)&&Nt(n,f[2]),(!m||g&1&&l!==(l=f[0]===void 0?"ml-[21px]":""))&&p(r,"class",l),f[3]?k?k.p(f,g):(k=$s(f),k.c(),k.m(s,null)):k&&(k.d(1),k=null),(!m||g&8&&u!==(u="flex justify-between px-4 py-2 "+(f[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&p(s,"class",u),(!m||g&8&&c!==(c=!f[3]))&&(s.disabled=c),f[1]?C?(C.p(f,g),g&2&&x(C,1)):(C=en(f),C.c(),x(C,1),C.m(e,null)):C&&(Ue(),ie(C,1,1,()=>{C=null}),He())},i(f){m||(x(C),m=!0)},o(f){ie(C),m=!1},d(f){f&&E(e),F&&F.d(),k&&k.d(),C&&C.d(),T=!1,R()}}}function Za(t,e,s){let{$$slots:i={},$$scope:a}=e;const r=Ct();let{name:n="board"}=e,{enabled:l=void 0}=e,{showExpand:o=!0}=e,{expanded:u=!1}=e;function c(R){Je.call(this,t,R)}const h=()=>r("changed",l);function m(){l=this.checked,s(0,l)}const T=()=>{s(1,u=!u)};return t.$$set=R=>{"name"in R&&s(2,n=R.name),"enabled"in R&&s(0,l=R.enabled),"showExpand"in R&&s(3,o=R.showExpand),"expanded"in R&&s(1,u=R.expanded),"$$scope"in R&&s(5,a=R.$$scope)},[l,u,n,o,r,a,i,c,h,m,T]}class ot extends Fe{constructor(e){super(),qe(this,e,Za,Ya,Ne,{name:2,enabled:0,showExpand:3,expanded:1})}}function tn(t,e,s){const i=t.slice();return i[19]=e[s],i}function sn(t){let e,s=t[19]+"",i;return{c(){e=U("option"),i=Ee(s),this.h()},l(a){e=H(a,"OPTION",{});var r=z(e);i=Me(r,s),r.forEach(E),this.h()},h(){e.__value=t[19],e.value=e.__value},m(a,r){Z(a,e,r),P(e,i)},p:Te,d(a){a&&E(e)}}}function nn(t){let e,s,i,a,r,n,l,o,u,c,h,m,T,R,F,k;return{c(){e=U("div"),s=U("div"),i=U("input"),a=se(),r=U("label"),n=Ee("shadow"),l=se(),o=U("div"),u=U("input"),c=se(),h=U("label"),m=Ee("border-radius (rem)"),this.h()},l(C){e=H(C,"DIV",{class:!0});var f=z(e);s=H(f,"DIV",{class:!0});var g=z(s);i=H(g,"INPUT",{id:!0,type:!0,class:!0}),a=ne(g),r=H(g,"LABEL",{for:!0,class:!0});var M=z(r);n=Me(M,"shadow"),M.forEach(E),g.forEach(E),l=ne(f),o=H(f,"DIV",{class:!0});var S=z(o);u=H(S,"INPUT",{id:!0,type:!0,class:!0,min:!0,max:!0}),c=ne(S),h=H(S,"LABEL",{for:!0,class:!0});var w=z(h);m=Me(w,"border-radius (rem)"),w.forEach(E),S.forEach(E),f.forEach(E),this.h()},h(){p(i,"id","shadow"),p(i,"type","checkbox"),p(i,"class","svelte-lnr7xr"),p(r,"for","shadow"),p(r,"class","select-none"),p(s,"class","flex gap-2 mb-2"),p(u,"id","borderRadius"),p(u,"type","number"),p(u,"class","w-16 svelte-lnr7xr"),p(u,"min",0),p(u,"max",1),p(h,"for","borderRadius"),p(h,"class","select-none whitespace-nowrap"),p(o,"class","flex gap-2 mb-2"),p(e,"class","pl-2 pr-4 flex-col")},m(C,f){Z(C,e,f),P(e,s),P(s,i),i.checked=t[4],P(s,a),P(s,r),P(r,n),P(e,l),P(e,o),P(o,u),Rt(u,t[8]),P(o,c),P(o,h),P(h,m),R=!0,F||(k=[he(i,"change",t[16]),he(u,"input",t[17])],F=!0)},p(C,f){f&16&&(i.checked=C[4]),f&256&&Dt(u.value)!==C[8]&&Rt(u,C[8])},i(C){R||(C&&tt(()=>{T||(T=gt(e,pt,{},!0)),T.run(1)}),R=!0)},o(C){C&&(T||(T=gt(e,pt,{},!1)),T.run(0)),R=!1},d(C){C&&E(e),C&&T&&T.end(),F=!1,st(k)}}}function Ja(t){let e,s,i,a,r,n,l,o,u,c,h,m,T,R,F,k,C,f,g,M,S,w,q,G,K,j,W,ee,ue,ae,d,_,b,L,O,A,V,N,y=Zs,X=[];for(let I=0;I<y.length;I+=1)X[I]=sn(tn(t,y,I));let J=t[9]&&nn(t);return{c(){e=U("div"),s=U("select");for(let I=0;I<X.length;I+=1)X[I].c();i=se(),a=U("label"),r=Ee("board theme"),n=se(),l=U("div"),o=U("input"),u=se(),c=U("label"),h=Ee("mouseEvents"),m=se(),T=U("div"),R=U("input"),F=se(),k=U("label"),C=Ee("notation"),f=se(),g=U("div"),M=U("input"),S=se(),w=U("label"),q=Ee("flipped"),G=se(),K=U("div"),j=U("input"),W=se(),ee=U("label"),ue=Ee("style"),ae=se(),J&&J.c(),d=se(),_=U("div"),b=U("input"),L=se(),O=U("label"),A=Ee("resizible"),this.h()},l(I){e=H(I,"DIV",{class:!0});var $=z(e);s=H($,"SELECT",{class:!0});var Q=z(s);for(let xe=0;xe<X.length;xe+=1)X[xe].l(Q);Q.forEach(E),i=ne($),a=H($,"LABEL",{for:!0,class:!0});var re=z(a);r=Me(re,"board theme"),re.forEach(E),$.forEach(E),n=ne(I),l=H(I,"DIV",{class:!0});var de=z(l);o=H(de,"INPUT",{id:!0,type:!0,class:!0}),u=ne(de),c=H(de,"LABEL",{for:!0,class:!0});var ce=z(c);h=Me(ce,"mouseEvents"),ce.forEach(E),de.forEach(E),m=ne(I),T=H(I,"DIV",{class:!0});var Le=z(T);R=H(Le,"INPUT",{id:!0,type:!0,class:!0}),F=ne(Le),k=H(Le,"LABEL",{for:!0,class:!0});var oe=z(k);C=Me(oe,"notation"),oe.forEach(E),Le.forEach(E),f=ne(I),g=H(I,"DIV",{class:!0});var _e=z(g);M=H(_e,"INPUT",{id:!0,type:!0,class:!0}),S=ne(_e),w=H(_e,"LABEL",{for:!0,class:!0});var Oe=z(w);q=Me(Oe,"flipped"),Oe.forEach(E),_e.forEach(E),G=ne(I),K=H(I,"DIV",{});var Ie=z(K);j=H(Ie,"INPUT",{id:!0,type:!0,class:!0}),W=ne(Ie),ee=H(Ie,"LABEL",{for:!0,class:!0});var De=z(ee);ue=Me(De,"style"),De.forEach(E),Ie.forEach(E),ae=ne(I),J&&J.l(I),d=ne(I),_=H(I,"DIV",{class:!0});var Be=z(_);b=H(Be,"INPUT",{id:!0,type:!0,class:!0}),L=ne(Be),O=H(Be,"LABEL",{for:!0,class:!0});var ze=z(O);A=Me(ze,"resizible"),ze.forEach(E),Be.forEach(E),this.h()},h(){p(s,"class","svelte-lnr7xr"),t[0]===void 0&&tt(()=>t[11].call(s)),p(a,"for","boardTheme"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","mouseEvents"),p(o,"type","checkbox"),p(o,"class","svelte-lnr7xr"),p(c,"for","mouseEvents"),p(c,"class","select-none"),p(l,"class","mb-2"),p(R,"id","notation"),p(R,"type","checkbox"),p(R,"class","svelte-lnr7xr"),p(k,"for","notation"),p(k,"class","select-none"),p(T,"class","mb-2"),p(M,"id","flipped"),p(M,"type","checkbox"),p(M,"class","svelte-lnr7xr"),p(w,"for","flipped"),p(w,"class","select-none"),p(g,"class","mb-2"),p(j,"id","styleEnabled"),p(j,"type","checkbox"),p(j,"class","svelte-lnr7xr"),p(ee,"for","styleEnabled"),p(ee,"class","select-none"),p(b,"id","resizibleEnabled"),p(b,"type","checkbox"),p(b,"class","svelte-lnr7xr"),p(O,"for","resizibleEnabled"),p(O,"class","select-none"),p(_,"class","mt-2 mb-1")},m(I,$){Z(I,e,$),P(e,s);for(let Q=0;Q<X.length;Q+=1)X[Q].m(s,null);bt(s,t[0]),P(e,i),P(e,a),P(a,r),Z(I,n,$),Z(I,l,$),P(l,o),o.checked=t[1],P(l,u),P(l,c),P(c,h),Z(I,m,$),Z(I,T,$),P(T,R),R.checked=t[2],P(T,F),P(T,k),P(k,C),Z(I,f,$),Z(I,g,$),P(g,M),M.checked=t[3],P(g,S),P(g,w),P(w,q),Z(I,G,$),Z(I,K,$),P(K,j),j.checked=t[9],P(K,W),P(K,ee),P(ee,ue),Z(I,ae,$),J&&J.m(I,$),Z(I,d,$),Z(I,_,$),P(_,b),b.checked=t[5],P(_,L),P(_,O),P(O,A),V||(N=[he(s,"change",t[11]),he(o,"change",t[12]),he(R,"change",t[13]),he(M,"change",t[14]),he(j,"change",t[15]),he(b,"change",t[18])],V=!0)},p(I,$){if($&0){y=Zs;let Q;for(Q=0;Q<y.length;Q+=1){const re=tn(I,y,Q);X[Q]?X[Q].p(re,$):(X[Q]=sn(re),X[Q].c(),X[Q].m(s,null))}for(;Q<X.length;Q+=1)X[Q].d(1);X.length=y.length}$&1&&bt(s,I[0]),$&2&&(o.checked=I[1]),$&4&&(R.checked=I[2]),$&8&&(M.checked=I[3]),$&512&&(j.checked=I[9]),I[9]?J?(J.p(I,$),$&512&&x(J,1)):(J=nn(I),J.c(),x(J,1),J.m(d.parentNode,d)):J&&(Ue(),ie(J,1,1,()=>{J=null}),He()),$&32&&(b.checked=I[5])},d(I){I&&E(e),lt(X,I),I&&E(n),I&&E(l),I&&E(m),I&&E(T),I&&E(f),I&&E(g),I&&E(G),I&&E(K),I&&E(ae),J&&J.d(I),I&&E(d),I&&E(_),V=!1,st(N)}}}function xa(t){let e,s;return e=new ot({props:{name:t[6],expanded:t[7],$$slots:{default:[Ja]},$$scope:{ctx:t}}}),{c(){we(e.$$.fragment)},l(i){Se(e.$$.fragment,i)},m(i,a){ye(e,i,a),s=!0},p(i,[a]){const r={};a&64&&(r.name=i[6]),a&128&&(r.expanded=i[7]),a&4195135&&(r.$$scope={dirty:a,ctx:i}),e.$set(r)},i(i){s||(x(e.$$.fragment,i),s=!0)},o(i){ie(e.$$.fragment,i),s=!1},d(i){Ce(e,i)}}}function $a(t,e,s){let{name:i="Board"}=e,{boardTheme:a}=e,{mouseEvents:r}=e,{notation:n}=e,{flipped:l}=e,{shadow:o}=e,{borderRadius:u="0px"}=e,{resizible:c=!1}=e,{expanded:h=!1}=e,m=!0,T=parseFloat(u.endsWith("px")?u.slice(0,-2):u.slice(0,-3));function R(){a=rs(this),s(0,a)}function F(){r=this.checked,s(1,r)}function k(){n=this.checked,s(2,n)}function C(){l=this.checked,s(3,l)}function f(){m=this.checked,s(9,m)}function g(){o=this.checked,s(4,o)}function M(){T=Dt(this.value),s(8,T)}function S(){c=this.checked,s(5,c)}return t.$$set=w=>{"name"in w&&s(6,i=w.name),"boardTheme"in w&&s(0,a=w.boardTheme),"mouseEvents"in w&&s(1,r=w.mouseEvents),"notation"in w&&s(2,n=w.notation),"flipped"in w&&s(3,l=w.flipped),"shadow"in w&&s(4,o=w.shadow),"borderRadius"in w&&s(10,u=w.borderRadius),"resizible"in w&&s(5,c=w.resizible),"expanded"in w&&s(7,h=w.expanded)},t.$$.update=()=>{t.$$.dirty&256&&s(10,u=`${T!=null?T:0}rem`)},[a,r,n,l,o,c,i,h,T,m,u,R,F,k,C,f,g,M,S]}class er extends Fe{constructor(e){super(),qe(this,e,$a,xa,Ne,{name:6,boardTheme:0,mouseEvents:1,notation:2,flipped:3,shadow:4,borderRadius:10,resizible:5,expanded:7})}}function tr(t){let e,s,i,a,r,n,l,o,u,c;return{c(){e=U("div"),s=U("select"),i=U("option"),a=Ee("Both"),r=U("option"),n=Ee("White"),l=U("option"),o=Ee("Black"),this.h()},l(h){e=H(h,"DIV",{});var m=z(e);s=H(m,"SELECT",{class:!0});var T=z(s);i=H(T,"OPTION",{});var R=z(i);a=Me(R,"Both"),R.forEach(E),r=H(T,"OPTION",{});var F=z(r);n=Me(F,"White"),F.forEach(E),l=H(T,"OPTION",{});var k=z(l);o=Me(k,"Black"),k.forEach(E),T.forEach(E),m.forEach(E),this.h()},h(){i.__value=ve.BOTH,i.value=i.__value,r.__value=ve.WHITE,r.value=r.__value,l.__value=ve.BLACK,l.value=l.__value,p(s,"class","svelte-xrxnwg"),t[1]===void 0&&tt(()=>t[4].call(s))},m(h,m){Z(h,e,m),P(e,s),P(s,i),P(i,a),P(s,r),P(r,n),P(s,l),P(l,o),bt(s,t[1]),u||(c=he(s,"change",t[4]),u=!0)},p(h,m){m&2&&bt(s,h[1])},d(h){h&&E(e),u=!1,c()}}}function sr(t){let e,s,i;function a(n){t[5](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[tr]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new ot({props:r}),fe.push(()=>be(e,"enabled",a)),{c(){we(e.$$.fragment)},l(n){Se(e.$$.fragment,n)},m(n,l){ye(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&66&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){ie(e.$$.fragment,n),i=!1},d(n){Ce(e,n)}}}function nr(t,e,s){let{name:i="Movable"}=e,{enabled:a=!1}=e,{color:r}=e,{expanded:n=!1}=e;function l(){r=rs(this),s(1,r)}function o(u){a=u,s(0,a)}return t.$$set=u=>{"name"in u&&s(2,i=u.name),"enabled"in u&&s(0,a=u.enabled),"color"in u&&s(1,r=u.color),"expanded"in u&&s(3,n=u.expanded)},[a,r,i,n,l,o]}class ir extends Fe{constructor(e){super(),qe(this,e,nr,sr,Ne,{name:2,enabled:0,color:1,expanded:3})}}function an(t,e,s){const i=t.slice();return i[12]=e[s],i}function rn(t){let e,s,i,a,r,n,l,o,u,c,h,m,T,R,F,k,C=Js,f=[];for(let g=0;g<C.length;g+=1)f[g]=ln(an(t,C,g));return{c(){e=U("div"),s=U("div"),i=U("input"),a=se(),r=U("label"),n=Ee("duration"),l=se(),o=U("div"),u=U("select");for(let g=0;g<f.length;g+=1)f[g].c();c=se(),h=U("label"),m=Ee("easing"),this.h()},l(g){e=H(g,"DIV",{class:!0});var M=z(e);s=H(M,"DIV",{class:!0});var S=z(s);i=H(S,"INPUT",{id:!0,type:!0,class:!0}),a=ne(S),r=H(S,"LABEL",{for:!0,class:!0});var w=z(r);n=Me(w,"duration"),w.forEach(E),S.forEach(E),l=ne(M),o=H(M,"DIV",{class:!0});var q=z(o);u=H(q,"SELECT",{id:!0,class:!0});var G=z(u);for(let j=0;j<f.length;j+=1)f[j].l(G);G.forEach(E),c=ne(q),h=H(q,"LABEL",{for:!0,class:!0});var K=z(h);m=Me(K,"easing"),K.forEach(E),q.forEach(E),M.forEach(E),this.h()},h(){p(i,"id","transitionDuration"),p(i,"type","number"),p(i,"class","w-16 svelte-1qpp6cx"),p(r,"for","transitionDuration"),p(r,"class","select-none"),p(s,"class","flex gap-2 mb-2"),p(u,"id","easingFuncs"),p(u,"class","svelte-1qpp6cx"),t[4]===void 0&&tt(()=>t[10].call(u)),p(h,"for","easingFuncs"),p(h,"class","select-none"),p(o,"class","flex gap-2"),p(e,"class","pl-2 pr-4 flex-col")},m(g,M){Z(g,e,M),P(e,s),P(s,i),Rt(i,t[3]),P(s,a),P(s,r),P(r,n),P(e,l),P(e,o),P(o,u);for(let S=0;S<f.length;S+=1)f[S].m(u,null);bt(u,t[4]),P(o,c),P(o,h),P(h,m),R=!0,F||(k=[he(i,"input",t[9]),he(u,"change",t[10])],F=!0)},p(g,M){if(M&8&&Dt(i.value)!==g[3]&&Rt(i,g[3]),M&0){C=Js;let S;for(S=0;S<C.length;S+=1){const w=an(g,C,S);f[S]?f[S].p(w,M):(f[S]=ln(w),f[S].c(),f[S].m(u,null))}for(;S<f.length;S+=1)f[S].d(1);f.length=C.length}M&16&&bt(u,g[4])},i(g){R||(g&&tt(()=>{T||(T=gt(e,pt,{},!0)),T.run(1)}),R=!0)},o(g){g&&(T||(T=gt(e,pt,{},!1)),T.run(0)),R=!1},d(g){g&&E(e),lt(f,g),g&&T&&T.end(),F=!1,st(k)}}}function ln(t){let e,s=t[12]+"",i;return{c(){e=U("option"),i=Ee(s),this.h()},l(a){e=H(a,"OPTION",{});var r=z(e);i=Me(r,s),r.forEach(E),this.h()},h(){e.__value=t[12],e.value=e.__value},m(a,r){Z(a,e,r),P(e,i)},p:Te,d(a){a&&E(e)}}}function ar(t){let e,s,i,a,r,n,l,o,u,c,h,m,T,R,F,k=t[2]&&rn(t);return{c(){e=U("div"),s=U("input"),i=se(),a=U("label"),r=Ee("ghost piece"),n=se(),l=U("div"),o=U("input"),u=se(),c=U("label"),h=Ee("transition"),m=se(),k&&k.c(),T=Re(),this.h()},l(C){e=H(C,"DIV",{class:!0});var f=z(e);s=H(f,"INPUT",{id:!0,type:!0,class:!0}),i=ne(f),a=H(f,"LABEL",{for:!0,class:!0});var g=z(a);r=Me(g,"ghost piece"),g.forEach(E),f.forEach(E),n=ne(C),l=H(C,"DIV",{class:!0});var M=z(l);o=H(M,"INPUT",{id:!0,type:!0,class:!0}),u=ne(M),c=H(M,"LABEL",{for:!0,class:!0});var S=z(c);h=Me(S,"transition"),S.forEach(E),M.forEach(E),m=ne(C),k&&k.l(C),T=Re(),this.h()},h(){p(s,"id","ghostPiece"),p(s,"type","checkbox"),p(s,"class","svelte-1qpp6cx"),p(a,"for","ghostPiece"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","draggableEnabled"),p(o,"type","checkbox"),p(o,"class","svelte-1qpp6cx"),p(c,"for","draggableEnabled"),p(c,"class","select-none"),p(l,"class","mb-2")},m(C,f){Z(C,e,f),P(e,s),s.checked=t[1],P(e,i),P(e,a),P(a,r),Z(C,n,f),Z(C,l,f),P(l,o),o.checked=t[2],P(l,u),P(l,c),P(c,h),Z(C,m,f),k&&k.m(C,f),Z(C,T,f),R||(F=[he(s,"change",t[7]),he(o,"change",t[8])],R=!0)},p(C,f){f&2&&(s.checked=C[1]),f&4&&(o.checked=C[2]),C[2]?k?(k.p(C,f),f&4&&x(k,1)):(k=rn(C),k.c(),x(k,1),k.m(T.parentNode,T)):k&&(Ue(),ie(k,1,1,()=>{k=null}),He())},d(C){C&&E(e),C&&E(n),C&&E(l),C&&E(m),k&&k.d(C),C&&E(T),R=!1,st(F)}}}function rr(t){let e,s,i;function a(n){t[11](n)}let r={name:t[5],expanded:t[6],$$slots:{default:[ar]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new ot({props:r}),fe.push(()=>be(e,"enabled",a)),{c(){we(e.$$.fragment)},l(n){Se(e.$$.fragment,n)},m(n,l){ye(e,n,l),i=!0},p(n,[l]){const o={};l&32&&(o.name=n[5]),l&64&&(o.expanded=n[6]),l&32798&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){ie(e.$$.fragment,n),i=!1},d(n){Ce(e,n)}}}function lr(t,e,s){let{name:i="Draggable"}=e,{enabled:a=!1}=e,{ghostPiece:r=!1}=e,{transition:n=!1}=e,{duration:l=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function c(){r=this.checked,s(1,r)}function h(){n=this.checked,s(2,n)}function m(){l=Dt(this.value),s(3,l)}function T(){o=rs(this),s(4,o)}function R(F){a=F,s(0,a)}return t.$$set=F=>{"name"in F&&s(5,i=F.name),"enabled"in F&&s(0,a=F.enabled),"ghostPiece"in F&&s(1,r=F.ghostPiece),"transition"in F&&s(2,n=F.transition),"duration"in F&&s(3,l=F.duration),"easing"in F&&s(4,o=F.easing),"expanded"in F&&s(6,u=F.expanded)},[a,r,n,l,o,i,u,c,h,m,T,R]}class or extends Fe{constructor(e){super(),qe(this,e,lr,rr,Ne,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function on(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function un(t){let e,s,i,a,r=t[7]+"",n,l,o,u;function c(){t[5].call(s,t[7])}return{c(){e=U("div"),s=U("input"),i=se(),a=U("label"),n=Ee(r),l=se(),this.h()},l(h){e=H(h,"DIV",{class:!0});var m=z(e);s=H(m,"INPUT",{id:!0,type:!0}),i=ne(m),a=H(m,"LABEL",{for:!0,class:!0});var T=z(a);n=Me(T,r),T.forEach(E),l=ne(m),m.forEach(E),this.h()},h(){p(s,"id",t[7]+"Enabled"),p(s,"type","checkbox"),p(a,"for",t[7]+"Enabled"),p(a,"class","select-none"),p(e,"class","mb-2")},m(h,m){Z(h,e,m),P(e,s),s.checked=t[1][t[7]],P(e,i),P(e,a),P(a,n),P(e,l),o||(u=he(s,"change",c),o=!0)},p(h,m){t=h,m&18&&(s.checked=t[1][t[7]])},d(h){h&&E(e),o=!1,u()}}}function ur(t){let e,s=t[4],i=[];for(let a=0;a<s.length;a+=1)i[a]=un(on(t,s,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Re()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);e=Re()},m(a,r){for(let n=0;n<i.length;n+=1)i[n].m(a,r);Z(a,e,r)},p(a,r){if(r&18){s=a[4];let n;for(n=0;n<s.length;n+=1){const l=on(a,s,n);i[n]?i[n].p(l,r):(i[n]=un(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(a){lt(i,a),a&&E(e)}}}function dr(t){let e,s,i;function a(n){t[6](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[ur]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new ot({props:r}),fe.push(()=>be(e,"enabled",a)),{c(){we(e.$$.fragment)},l(n){Se(e.$$.fragment,n)},m(n,l){ye(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){ie(e.$$.fragment,n),i=!1},d(n){Ce(e,n)}}}function fr(t,e,s){let{name:i="Highlight"}=e,{enabled:a=!1}=e,{settings:r}=e;const n=["select","legal","move","preMove","nextMove","check"];let{expanded:l=!1}=e;function o(c){r[c]=this.checked,s(1,r)}function u(c){a=c,s(0,a)}return t.$$set=c=>{"name"in c&&s(2,i=c.name),"enabled"in c&&s(0,a=c.enabled),"settings"in c&&s(1,r=c.settings),"expanded"in c&&s(3,l=c.expanded)},[a,r,i,l,n,o,u]}class cr extends Fe{constructor(e){super(),qe(this,e,fr,dr,Ne,{name:2,enabled:0,settings:1,expanded:3})}}function hr(t){let e,s,i,a,r,n,l,o,u,c,h,m,T;return{c(){e=U("div"),s=U("input"),i=se(),a=U("label"),r=Ee("L shape knight move"),n=se(),l=U("div"),o=U("input"),u=se(),c=U("label"),h=Ee("only chess move"),this.h()},l(R){e=H(R,"DIV",{class:!0});var F=z(e);s=H(F,"INPUT",{id:!0,type:!0}),i=ne(F),a=H(F,"LABEL",{for:!0,class:!0});var k=z(a);r=Me(k,"L shape knight move"),k.forEach(E),F.forEach(E),n=ne(R),l=H(R,"DIV",{class:!0});var C=z(l);o=H(C,"INPUT",{id:!0,type:!0}),u=ne(C),c=H(C,"LABEL",{for:!0,class:!0});var f=z(c);h=Me(f,"only chess move"),f.forEach(E),C.forEach(E),this.h()},h(){p(s,"id","knightLShapeMoveEnabled"),p(s,"type","checkbox"),p(a,"for","knightLShapeMoveEnabled"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","onlyChessMoveEnabled"),p(o,"type","checkbox"),p(c,"for","onlyChessMoveEnabled"),p(c,"class","select-none"),p(l,"class","mb-2")},m(R,F){Z(R,e,F),P(e,s),s.checked=t[1],P(e,i),P(e,a),P(a,r),Z(R,n,F),Z(R,l,F),P(l,o),o.checked=t[2],P(l,u),P(l,c),P(c,h),m||(T=[he(s,"change",t[5]),he(o,"change",t[6])],m=!0)},p(R,F){F&2&&(s.checked=R[1]),F&4&&(o.checked=R[2])},d(R){R&&E(e),R&&E(n),R&&E(l),m=!1,st(T)}}}function gr(t){let e,s,i;function a(n){t[7](n)}let r={name:t[3],expanded:t[4],$$slots:{default:[hr]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new ot({props:r}),fe.push(()=>be(e,"enabled",a)),{c(){we(e.$$.fragment)},l(n){Se(e.$$.fragment,n)},m(n,l){ye(e,n,l),i=!0},p(n,[l]){const o={};l&8&&(o.name=n[3]),l&16&&(o.expanded=n[4]),l&262&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){ie(e.$$.fragment,n),i=!1},d(n){Ce(e,n)}}}function br(t,e,s){let{name:i="DrawTools"}=e,{enabled:a=!1}=e,{knightLShape:r=!1}=e,{onlyChessMove:n=!1}=e,{expanded:l=!1}=e;function o(){r=this.checked,s(1,r)}function u(){n=this.checked,s(2,n)}function c(h){a=h,s(0,a)}return t.$$set=h=>{"name"in h&&s(3,i=h.name),"enabled"in h&&s(0,a=h.enabled),"knightLShape"in h&&s(1,r=h.knightLShape),"onlyChessMove"in h&&s(2,n=h.onlyChessMove),"expanded"in h&&s(4,l=h.expanded)},[a,r,n,i,l,o,u,c]}class pr extends Fe{constructor(e){super(),qe(this,e,br,gr,Ne,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function dn(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function fn(t){let e,s,i,a,r=t[7].toLowerCase()+"",n,l,o,u;function c(){t[5].call(s,t[7])}return{c(){e=U("div"),s=U("input"),i=se(),a=U("label"),n=Ee(r),l=se(),this.h()},l(h){e=H(h,"DIV",{class:!0});var m=z(e);s=H(m,"INPUT",{id:!0,type:!0}),i=ne(m),a=H(m,"LABEL",{for:!0,class:!0});var T=z(a);n=Me(T,r),T.forEach(E),l=ne(m),m.forEach(E),this.h()},h(){p(s,"id",t[7]+"Enabled"),p(s,"type","checkbox"),p(a,"for",t[7]+"Enabled"),p(a,"class","select-none"),p(e,"class","mb-2")},m(h,m){Z(h,e,m),P(e,s),s.checked=t[1][t[7]],P(e,i),P(e,a),P(a,n),P(e,l),o||(u=he(s,"change",c),o=!0)},p(h,m){t=h,m&18&&(s.checked=t[1][t[7]])},d(h){h&&E(e),o=!1,u()}}}function mr(t){let e,s=t[4],i=[];for(let a=0;a<s.length;a+=1)i[a]=fn(dn(t,s,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Re()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);e=Re()},m(a,r){for(let n=0;n<i.length;n+=1)i[n].m(a,r);Z(a,e,r)},p(a,r){if(r&18){s=a[4];let n;for(n=0;n<s.length;n+=1){const l=dn(a,s,n);i[n]?i[n].p(l,r):(i[n]=fn(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(a){lt(i,a),a&&E(e)}}}function vr(t){let e,s,i;function a(n){t[6](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[mr]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new ot({props:r}),fe.push(()=>be(e,"enabled",a)),{c(){we(e.$$.fragment)},l(n){Se(e.$$.fragment,n)},m(n,l){ye(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){ie(e.$$.fragment,n),i=!1},d(n){Ce(e,n)}}}function _r(t,e,s){let{name:i="Sounds"}=e,{enabled:a=!1}=e,{settings:r}=e;const n=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:l=!1}=e;function o(c){r[c]=this.checked,s(1,r)}function u(c){a=c,s(0,a)}return t.$$set=c=>{"name"in c&&s(2,i=c.name),"enabled"in c&&s(0,a=c.enabled),"settings"in c&&s(1,r=c.settings),"expanded"in c&&s(3,l=c.expanded)},[a,r,i,l,n,o,u]}class Er extends Fe{constructor(e){super(),qe(this,e,_r,vr,Ne,{name:2,enabled:0,settings:1,expanded:3})}}function Mr(t){let e,s;return{c(){e=Ve("svg"),s=Ve("path"),this.h()},l(i){e=Ke(i,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=z(e);s=Ke(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),z(s).forEach(E),a.forEach(E),this.h()},h(){p(s,"stroke-linecap","round"),p(s,"stroke-linejoin","round"),p(s,"stroke-width","2"),p(s,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),ke(e,"transform","translate(1px, 0px)"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"class","h-5"),p(e,"fill","none"),p(e,"viewBox","0 0 24 24"),p(e,"aria-hidden","true"),p(e,"stroke","currentColor")},m(i,a){Z(i,e,a),P(e,s)},d(i){i&&E(e)}}}function kr(t){let e,s;return{c(){e=Ve("svg"),s=Ve("path"),this.h()},l(i){e=Ke(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=z(e);s=Ke(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),z(s).forEach(E),a.forEach(E),this.h()},h(){p(s,"stroke-linecap","round"),p(s,"stroke-linejoin","round"),p(s,"stroke-width","2"),p(s,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"class","h-5 text-green-500"),p(e,"fill","none"),p(e,"viewBox","0 0 24 24"),p(e,"aria-hidden","true"),p(e,"stroke","currentColor")},m(i,a){Z(i,e,a),P(e,s)},d(i){i&&E(e)}}}function wr(t){let e,s,i;function a(l,o){return l[1]?kr:Mr}let r=a(t),n=r(t);return{c(){e=U("button"),n.c(),this.h()},l(l){e=H(l,"BUTTON",{type:!0,class:!0});var o=z(e);n.l(o),o.forEach(E),this.h()},h(){p(e,"type","button"),p(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(l,o){Z(l,e,o),n.m(e,null),t[4](e),s||(i=he(e,"click",t[2]),s=!0)},p(l,[o]){r!==(r=a(l))&&(n.d(1),n=r(l),n&&(n.c(),n.m(e,null)))},i:Te,o:Te,d(l){l&&E(e),n.d(),t[4](null),s=!1,i()}}}function Sr(t,e,s){let{copyText:i}=e,a,r=!1;function n(){navigator.clipboard.writeText(i),s(1,r=!0),setTimeout(()=>{s(1,r=!1)},2e3),a.setAttribute("data-cooltipz-dir","top"),a.setAttribute("aria-label","Copied!"),setTimeout(()=>{a.removeAttribute("aria-label"),a.removeAttribute("data-cooltipz-dir")},2e3)}function l(o){fe[o?"unshift":"push"](()=>{a=o,s(0,a)})}return t.$$set=o=>{"copyText"in o&&s(3,i=o.copyText)},[a,r,n,i,l]}class yr extends Fe{constructor(e){super(),qe(this,e,Sr,wr,Ne,{copyText:3})}}function Cr(t){let e,s,i;function a(n){t[2](n)}let r={name:t[1],showExpand:!1};return t[0]!==void 0&&(r.enabled=t[0]),e=new ot({props:r}),fe.push(()=>be(e,"enabled",a)),e.$on("changed",t[3]),{c(){we(e.$$.fragment)},l(n){Se(e.$$.fragment,n)},m(n,l){ye(e,n,l),i=!0},p(n,[l]){const o={};l&2&&(o.name=n[1]),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(x(e.$$.fragment,n),i=!0)},o(n){ie(e.$$.fragment,n),i=!1},d(n){Ce(e,n)}}}function Ar(t,e,s){let{name:i="Legal"}=e,{enabled:a=!1}=e;function r(l){a=l,s(0,a)}function n(l){Je.call(this,t,l)}return t.$$set=l=>{"name"in l&&s(1,i=l.name),"enabled"in l&&s(0,a=l.enabled)},[a,i,r,n]}class Pr extends Fe{constructor(e){super(),qe(this,e,Ar,Cr,Ne,{name:1,enabled:0})}}function Tr(t){let e,s,i,a,r,n,l,o,u,c,h,m,T,R,F,k,C,f,g,M,S,w,q,G,K,j,W,ee,ue,ae,d,_,b,L,O,A,V,N,y,X,J,I,$,Q,re,de,ce,Le,oe,_e,Oe,Ie,De,Be,ze,xe,$e,mt,vt,Ge,ft,ct,_t,Qe,Et,Xe,nt,Mt,At;function Bt(B){t[7](B)}function Ut(B){t[8](B)}function Ht(B){t[9](B)}function Vt(B){t[10](B)}function Kt(B){t[11](B)}function zt(B){t[12](B)}function Wt(B){t[13](B)}let Ye={expanded:!0};t[0].board.boardTheme!==void 0&&(Ye.boardTheme=t[0].board.boardTheme),t[0].board.mouseEvents!==void 0&&(Ye.mouseEvents=t[0].board.mouseEvents),t[0].board.notation!==void 0&&(Ye.notation=t[0].board.notation),t[0].board.flipped!==void 0&&(Ye.flipped=t[0].board.flipped),t[0].board.style.shadow!==void 0&&(Ye.shadow=t[0].board.style.shadow),t[0].board.style.borderRadius!==void 0&&(Ye.borderRadius=t[0].board.style.borderRadius),t[0].board.resizible!==void 0&&(Ye.resizible=t[0].board.resizible),n=new er({props:Ye}),fe.push(()=>be(n,"boardTheme",Bt)),fe.push(()=>be(n,"mouseEvents",Ut)),fe.push(()=>be(n,"notation",Ht)),fe.push(()=>be(n,"flipped",Vt)),fe.push(()=>be(n,"shadow",Kt)),fe.push(()=>be(n,"borderRadius",zt)),fe.push(()=>be(n,"resizible",Wt));function jt(B){t[14](B)}function Gt(B){t[15](B)}let kt={expanded:!0};t[0].movable.enabled!==void 0&&(kt.enabled=t[0].movable.enabled),t[0].movable.color!==void 0&&(kt.color=t[0].movable.color),F=new ir({props:kt}),fe.push(()=>be(F,"enabled",jt)),fe.push(()=>be(F,"color",Gt));function Qt(B){t[16](B)}function v(B){t[17](B)}function Y(B){t[18](B)}function le(B){t[19](B)}function me(B){t[20](B)}let Ae={};t[0].draggable.enabled!==void 0&&(Ae.enabled=t[0].draggable.enabled),t[0].draggable.ghostPiece.enabled!==void 0&&(Ae.ghostPiece=t[0].draggable.ghostPiece.enabled),t[0].draggable.transition.enabled!==void 0&&(Ae.transition=t[0].draggable.transition.enabled),t[0].draggable.transition.settings.duration!==void 0&&(Ae.duration=t[0].draggable.transition.settings.duration),t[0].draggable.transition.settings.easing!==void 0&&(Ae.easing=t[0].draggable.transition.settings.easing),g=new or({props:Ae}),fe.push(()=>be(g,"enabled",Qt)),fe.push(()=>be(g,"ghostPiece",v)),fe.push(()=>be(g,"transition",Y)),fe.push(()=>be(g,"duration",le)),fe.push(()=>be(g,"easing",me));function Ze(B){t[21](B)}let Xt={name:"Selectable",showExpand:!1};t[0].selectable.enabled!==void 0&&(Xt.enabled=t[0].selectable.enabled),j=new ot({props:Xt}),fe.push(()=>be(j,"enabled",Ze));function Tn(B){t[22](B)}let os={};t[0].legal.enabled!==void 0&&(os.enabled=t[0].legal.enabled),ue=new Pr({props:os}),fe.push(()=>be(ue,"enabled",Tn)),ue.$on("changed",t[23]);function Ln(B){t[24](B)}function On(B){t[25](B)}let Yt={};t[0].highlight.enabled!==void 0&&(Yt.enabled=t[0].highlight.enabled),t[0].highlight.settings!==void 0&&(Yt.settings=t[0].highlight.settings),_=new cr({props:Yt}),fe.push(()=>be(_,"enabled",Ln)),fe.push(()=>be(_,"settings",On));function In(B){t[26](B)}function Rn(B){t[27](B)}function Fn(B){t[28](B)}let Pt={};t[0].drawTools.enabled!==void 0&&(Pt.enabled=t[0].drawTools.enabled),t[0].drawTools.settings.knightLShape!==void 0&&(Pt.knightLShape=t[0].drawTools.settings.knightLShape),t[0].drawTools.settings.onlyChessMove!==void 0&&(Pt.onlyChessMove=t[0].drawTools.settings.onlyChessMove),A=new pr({props:Pt}),fe.push(()=>be(A,"enabled",In)),fe.push(()=>be(A,"knightLShape",Rn)),fe.push(()=>be(A,"onlyChessMove",Fn));function qn(B){t[29](B)}function Nn(B){t[30](B)}let Zt={};t[0].sounds.enabled!==void 0&&(Zt.enabled=t[0].sounds.enabled),t[0].sounds.settings!==void 0&&(Zt.settings=t[0].sounds.settings),J=new Er({props:Zt}),fe.push(()=>be(J,"enabled",qn)),fe.push(()=>be(J,"settings",Nn));let Dn={config:t[6]};return ce=new Xa({props:Dn}),t[31](ce),Qe=new yr({props:{copyText:t[4]}}),Xe=new si({props:{source:t[4],language:"svelte"}}),{c(){e=U("link"),s=se(),i=U("div"),a=U("div"),r=U("div"),we(n.$$.fragment),R=se(),we(F.$$.fragment),f=se(),we(g.$$.fragment),K=se(),we(j.$$.fragment),ee=se(),we(ue.$$.fragment),d=se(),we(_.$$.fragment),O=se(),we(A.$$.fragment),X=se(),we(J.$$.fragment),Q=se(),re=U("div"),de=U("div"),we(ce.$$.fragment),Le=se(),oe=U("div"),_e=U("div"),Oe=U("div"),Ie=U("button"),De=U("span"),Be=Ee("ts"),xe=se(),$e=U("span"),mt=Ee("/"),vt=se(),Ge=U("span"),ft=Ee("js"),_t=se(),we(Qe.$$.fragment),Et=se(),we(Xe.$$.fragment),this.h()},l(B){const ge=Yn("svelte-tebjht",document.head);e=H(ge,"LINK",{rel:!0,href:!0}),ge.forEach(E),s=ne(B),i=H(B,"DIV",{class:!0});var je=z(i);a=H(je,"DIV",{class:!0});var it=z(a);r=H(it,"DIV",{class:!0});var Pe=z(r);Se(n.$$.fragment,Pe),R=ne(Pe),Se(F.$$.fragment,Pe),f=ne(Pe),Se(g.$$.fragment,Pe),K=ne(Pe),Se(j.$$.fragment,Pe),ee=ne(Pe),Se(ue.$$.fragment,Pe),d=ne(Pe),Se(_.$$.fragment,Pe),O=ne(Pe),Se(A.$$.fragment,Pe),X=ne(Pe),Se(J.$$.fragment,Pe),Pe.forEach(E),Q=ne(it),re=H(it,"DIV",{class:!0});var ut=z(re);de=H(ut,"DIV",{class:!0});var wt=z(de);Se(ce.$$.fragment,wt),wt.forEach(E),Le=ne(ut),oe=H(ut,"DIV",{class:!0});var ht=z(oe);_e=H(ht,"DIV",{class:!0});var et=z(_e);Oe=H(et,"DIV",{class:!0});var at=z(Oe);Ie=H(at,"BUTTON",{class:!0});var rt=z(Ie);De=H(rt,"SPAN",{class:!0});var St=z(De);Be=Me(St,"ts"),St.forEach(E),xe=ne(rt),$e=H(rt,"SPAN",{class:!0});var yt=z($e);mt=Me(yt,"/"),yt.forEach(E),vt=ne(rt),Ge=H(rt,"SPAN",{class:!0});var us=z(Ge);ft=Me(us,"js"),us.forEach(E),rt.forEach(E),_t=ne(at),Se(Qe.$$.fragment,at),at.forEach(E),Et=ne(et),Se(Xe.$$.fragment,et),et.forEach(E),ht.forEach(E),ut.forEach(E),it.forEach(E),je.forEach(E),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",p(e,"rel","stylesheet"),p(e,"href","prism-one-dark.css"),p(r,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),p(de,"class","w-full lg:w-[calc(70vh*(var(--boardScale,70)/100*0.7+0.3))]"),p(De,"class",ze=t[1]?"text-yellow-600":""),p($e,"class","text-gray-600"),p(Ge,"class",ct=t[1]?"":"text-yellow-600"),p(Ie,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),p(Oe,"class","absolute right-2 top-2 flex gap-4"),p(_e,"class","shadow-lg rounded "),p(oe,"class","row-start-2 relative"),p(re,"class","grid grid-rows-[90wh_auto] gap-10"),p(a,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),p(i,"class","my-10 grid grid-cols-center")},m(B,ge){P(document.head,e),Z(B,s,ge),Z(B,i,ge),P(i,a),P(a,r),ye(n,r,null),P(r,R),ye(F,r,null),P(r,f),ye(g,r,null),P(r,K),ye(j,r,null),P(r,ee),ye(ue,r,null),P(r,d),ye(_,r,null),P(r,O),ye(A,r,null),P(r,X),ye(J,r,null),P(a,Q),P(a,re),P(re,de),ye(ce,de,null),P(re,Le),P(re,oe),P(oe,_e),P(_e,Oe),P(Oe,Ie),P(Ie,De),P(De,Be),P(Ie,xe),P(Ie,$e),P($e,mt),P(Ie,vt),P(Ie,Ge),P(Ge,ft),P(Oe,_t),ye(Qe,Oe,null),P(_e,Et),ye(Xe,_e,null),nt=!0,Mt||(At=he(Ie,"click",t[32]),Mt=!0)},p(B,ge){const je={};!l&&ge[0]&1&&(l=!0,je.boardTheme=B[0].board.boardTheme,pe(()=>l=!1)),!o&&ge[0]&1&&(o=!0,je.mouseEvents=B[0].board.mouseEvents,pe(()=>o=!1)),!u&&ge[0]&1&&(u=!0,je.notation=B[0].board.notation,pe(()=>u=!1)),!c&&ge[0]&1&&(c=!0,je.flipped=B[0].board.flipped,pe(()=>c=!1)),!h&&ge[0]&1&&(h=!0,je.shadow=B[0].board.style.shadow,pe(()=>h=!1)),!m&&ge[0]&1&&(m=!0,je.borderRadius=B[0].board.style.borderRadius,pe(()=>m=!1)),!T&&ge[0]&1&&(T=!0,je.resizible=B[0].board.resizible,pe(()=>T=!1)),n.$set(je);const it={};!k&&ge[0]&1&&(k=!0,it.enabled=B[0].movable.enabled,pe(()=>k=!1)),!C&&ge[0]&1&&(C=!0,it.color=B[0].movable.color,pe(()=>C=!1)),F.$set(it);const Pe={};!M&&ge[0]&1&&(M=!0,Pe.enabled=B[0].draggable.enabled,pe(()=>M=!1)),!S&&ge[0]&1&&(S=!0,Pe.ghostPiece=B[0].draggable.ghostPiece.enabled,pe(()=>S=!1)),!w&&ge[0]&1&&(w=!0,Pe.transition=B[0].draggable.transition.enabled,pe(()=>w=!1)),!q&&ge[0]&1&&(q=!0,Pe.duration=B[0].draggable.transition.settings.duration,pe(()=>q=!1)),!G&&ge[0]&1&&(G=!0,Pe.easing=B[0].draggable.transition.settings.easing,pe(()=>G=!1)),g.$set(Pe);const ut={};!W&&ge[0]&1&&(W=!0,ut.enabled=B[0].selectable.enabled,pe(()=>W=!1)),j.$set(ut);const wt={};!ae&&ge[0]&1&&(ae=!0,wt.enabled=B[0].legal.enabled,pe(()=>ae=!1)),ue.$set(wt);const ht={};!b&&ge[0]&1&&(b=!0,ht.enabled=B[0].highlight.enabled,pe(()=>b=!1)),!L&&ge[0]&1&&(L=!0,ht.settings=B[0].highlight.settings,pe(()=>L=!1)),_.$set(ht);const et={};!V&&ge[0]&1&&(V=!0,et.enabled=B[0].drawTools.enabled,pe(()=>V=!1)),!N&&ge[0]&1&&(N=!0,et.knightLShape=B[0].drawTools.settings.knightLShape,pe(()=>N=!1)),!y&&ge[0]&1&&(y=!0,et.onlyChessMove=B[0].drawTools.settings.onlyChessMove,pe(()=>y=!1)),A.$set(et);const at={};!I&&ge[0]&1&&(I=!0,at.enabled=B[0].sounds.enabled,pe(()=>I=!1)),!$&&ge[0]&1&&($=!0,at.settings=B[0].sounds.settings,pe(()=>$=!1)),J.$set(at);const rt={};ce.$set(rt),(!nt||ge[0]&2&&ze!==(ze=B[1]?"text-yellow-600":""))&&p(De,"class",ze),(!nt||ge[0]&2&&ct!==(ct=B[1]?"":"text-yellow-600"))&&p(Ge,"class",ct);const St={};ge[0]&16&&(St.copyText=B[4]),Qe.$set(St);const yt={};ge[0]&16&&(yt.source=B[4]),Xe.$set(yt)},i(B){nt||(x(n.$$.fragment,B),x(F.$$.fragment,B),x(g.$$.fragment,B),x(j.$$.fragment,B),x(ue.$$.fragment,B),x(_.$$.fragment,B),x(A.$$.fragment,B),x(J.$$.fragment,B),x(ce.$$.fragment,B),x(Qe.$$.fragment,B),x(Xe.$$.fragment,B),nt=!0)},o(B){ie(n.$$.fragment,B),ie(F.$$.fragment,B),ie(g.$$.fragment,B),ie(j.$$.fragment,B),ie(ue.$$.fragment,B),ie(_.$$.fragment,B),ie(A.$$.fragment,B),ie(J.$$.fragment,B),ie(ce.$$.fragment,B),ie(Qe.$$.fragment,B),ie(Xe.$$.fragment,B),nt=!1},d(B){E(e),B&&E(s),B&&E(i),Ce(n),Ce(F),Ce(g),Ce(j),Ce(ue),Ce(_),Ce(A),Ce(J),t[31](null),Ce(ce),Ce(Qe),Ce(Xe),Mt=!1,At()}}}function Lr(t,e,s){const i=new wn.Chess,a={movable:ve.BOTH,legal:!0,callbacks:{afterMove:y=>i.move({from:y.substring(0,2),to:y.substring(2,4),...y.length>4&&{promotion:y[4]}}),getLegalMoves:()=>i.moves({verbose:!0}).map(y=>{var X;return y.from+y.to+((X=y.promotion)!=null?X:"")}),getWhiteToMove:()=>i.turn()==="w",getInCheck:()=>i.inCheck(),getLastMove:()=>{var X;const y=i.history({verbose:!0}).pop();return y?y.from+y.to+((X=y.promotion)!=null?X:""):""}},board:{style:{shadow:!0,borderRadius:"0.25rem"},resizible:!0}},r=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,n=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let l,o=new Sn(a),u=!1,c=!0,h="";as(()=>{s(3,u=!0),s(0,o=l.getState())});const m=(y,X)=>{const J=y.getConfig(),I=`
	import type { ChessboardConfig } from '@powchess/chessboard/boardConfig';`;u&&l.setState(y);let $=JSON.stringify(J,(ce,Le)=>ce==="callbacks"?"{functions}":Le,4);$=$.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',X?r:n);const Q=`
	import { Color } from '@powchess/chessboard/enums';`;X&&($=$.replaceAll(`movable: ${ve.WHITE}`,"movable: Color.WHITE").replaceAll(`movable: ${ve.BLACK}`,"movable: Color.BLACK").replaceAll(`movable: ${ve.BOTH}`,"movable: Color.BOTH"));function re(){return $.includes("movable: Color.WHITE")||$.includes("movable: Color.BLACK")||$.includes("movable: Color.BOTH")}let de=`<script${X?' lang="ts"':""}>
	import Chessboard from '@powchess/chessboard';${X?I:""}${re()&&X?Q:""}${o.legal.enabled?X?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${X?": ChessboardConfig":""} = ${$};
<\/script>

<Chessboard {config} />`;return X||(de=de.replaceAll("Color.WHITE",`${ve.WHITE}`).replaceAll("Color.BLACK",`${ve.BLACK}`).replaceAll("Color.BOTH",`${ve.BOTH}`)),de};function T(y){t.$$.not_equal(o.board.boardTheme,y)&&(o.board.boardTheme=y,s(0,o))}function R(y){t.$$.not_equal(o.board.mouseEvents,y)&&(o.board.mouseEvents=y,s(0,o))}function F(y){t.$$.not_equal(o.board.notation,y)&&(o.board.notation=y,s(0,o))}function k(y){t.$$.not_equal(o.board.flipped,y)&&(o.board.flipped=y,s(0,o))}function C(y){t.$$.not_equal(o.board.style.shadow,y)&&(o.board.style.shadow=y,s(0,o))}function f(y){t.$$.not_equal(o.board.style.borderRadius,y)&&(o.board.style.borderRadius=y,s(0,o))}function g(y){t.$$.not_equal(o.board.resizible,y)&&(o.board.resizible=y,s(0,o))}function M(y){t.$$.not_equal(o.movable.enabled,y)&&(o.movable.enabled=y,s(0,o))}function S(y){t.$$.not_equal(o.movable.color,y)&&(o.movable.color=y,s(0,o))}function w(y){t.$$.not_equal(o.draggable.enabled,y)&&(o.draggable.enabled=y,s(0,o))}function q(y){t.$$.not_equal(o.draggable.ghostPiece.enabled,y)&&(o.draggable.ghostPiece.enabled=y,s(0,o))}function G(y){t.$$.not_equal(o.draggable.transition.enabled,y)&&(o.draggable.transition.enabled=y,s(0,o))}function K(y){t.$$.not_equal(o.draggable.transition.settings.duration,y)&&(o.draggable.transition.settings.duration=y,s(0,o))}function j(y){t.$$.not_equal(o.draggable.transition.settings.easing,y)&&(o.draggable.transition.settings.easing=y,s(0,o))}function W(y){t.$$.not_equal(o.selectable.enabled,y)&&(o.selectable.enabled=y,s(0,o))}function ee(y){t.$$.not_equal(o.legal.enabled,y)&&(o.legal.enabled=y,s(0,o))}const ue=()=>{o.legal.enabled||(i.reset(),u&&l.setFEN(o.board.startFen,!0,!1))};function ae(y){t.$$.not_equal(o.highlight.enabled,y)&&(o.highlight.enabled=y,s(0,o))}function d(y){t.$$.not_equal(o.highlight.settings,y)&&(o.highlight.settings=y,s(0,o))}function _(y){t.$$.not_equal(o.drawTools.enabled,y)&&(o.drawTools.enabled=y,s(0,o))}function b(y){t.$$.not_equal(o.drawTools.settings.knightLShape,y)&&(o.drawTools.settings.knightLShape=y,s(0,o))}function L(y){t.$$.not_equal(o.drawTools.settings.onlyChessMove,y)&&(o.drawTools.settings.onlyChessMove=y,s(0,o))}function O(y){t.$$.not_equal(o.sounds.enabled,y)&&(o.sounds.enabled=y,s(0,o))}function A(y){t.$$.not_equal(o.sounds.settings,y)&&(o.sounds.settings=y,s(0,o))}function V(y){fe[y?"unshift":"push"](()=>{l=y,s(2,l)})}const N=()=>{s(1,c=!c)};return t.$$.update=()=>{t.$$.dirty[0]&3&&s(4,h=m(o,c))},[o,c,l,u,h,i,a,T,R,F,k,C,f,g,M,S,w,q,G,K,j,W,ee,ue,ae,d,_,b,L,O,A,V,N]}class Fr extends Fe{constructor(e){super(),qe(this,e,Lr,Tr,Ne,{},null,[-1,-1])}}export{Fr as default};
