import{S as Be,i as ze,s as He,B as Ui,k,a as V,l as M,m as C,h as p,c as N,p as ie,n as d,b as z,F as h,C as Bi,D as zi,E as Hi,f as W,t as Q,H as ds,I as ka,J as Pe,K as Ki,e as ne,L as Wi,q as j,r as G,u as Js,A as ue,M as dt,N as Ma,O as yi,P as ji,Q as Gi,R as Sa,T as yt,U as $s,V as X,W as ea,X as At,Y as ta,G as Xi,Z as St,_ as it,$ as nt,o as sa,g as qe,d as Re,a0 as Kt,a1 as Yi,a2 as Qi,a3 as Ws,v as De,w as Ve,x as Ne,a4 as js,y as Ue,a5 as xi,a6 as Zi,a7 as ya,a8 as Ji,a9 as Ai,z as $i,aa as Pi,ab as en,ac as qt,ad as Aa,ae as Ci,af as Ks}from"../../chunks/index-e66a4755.js";import{w as tn}from"../../chunks/index-d15955ac.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var Pa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Li={exports:{}};(function(a){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(i){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,l={},r={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function c(g){return g instanceof o?new o(g.type,c(g.content),g.alias):Array.isArray(g)?g.map(c):g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(c){return Object.prototype.toString.call(c).slice(8,-1)},objId:function(c){return c.__id||Object.defineProperty(c,"__id",{value:++n}),c.__id},clone:function c(g,P){P=P||{};var w,A;switch(r.util.type(g)){case"Object":if(A=r.util.objId(g),P[A])return P[A];w={},P[A]=w;for(var I in g)g.hasOwnProperty(I)&&(w[I]=c(g[I],P));return w;case"Array":return A=r.util.objId(g),P[A]?P[A]:(w=[],P[A]=w,g.forEach(function(R,T){w[T]=c(R,P)}),w);default:return g}},getLanguage:function(c){for(;c;){var g=s.exec(c.className);if(g)return g[1].toLowerCase();c=c.parentElement}return"none"},setLanguage:function(c,g){c.className=c.className.replace(RegExp(s,"gi"),""),c.classList.add("language-"+g)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(w){var c=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(w.stack)||[])[1];if(c){var g=document.getElementsByTagName("script");for(var P in g)if(g[P].src==c)return g[P]}return null}},isActive:function(c,g,P){for(var w="no-"+g;c;){var A=c.classList;if(A.contains(g))return!0;if(A.contains(w))return!1;c=c.parentElement}return!!P}},languages:{plain:l,plaintext:l,text:l,txt:l,extend:function(c,g){var P=r.util.clone(r.languages[c]);for(var w in g)P[w]=g[w];return P},insertBefore:function(c,g,P,w){w=w||r.languages;var A=w[c],I={};for(var R in A)if(A.hasOwnProperty(R)){if(R==g)for(var T in P)P.hasOwnProperty(T)&&(I[T]=P[T]);P.hasOwnProperty(R)||(I[R]=A[R])}var S=w[c];return w[c]=I,r.languages.DFS(r.languages,function(F,Y){Y===S&&F!=c&&(this[F]=I)}),I},DFS:function c(g,P,w,A){A=A||{};var I=r.util.objId;for(var R in g)if(g.hasOwnProperty(R)){P.call(g,R,g[R],w||R);var T=g[R],S=r.util.type(T);S==="Object"&&!A[I(T)]?(A[I(T)]=!0,c(T,P,null,A)):S==="Array"&&!A[I(T)]&&(A[I(T)]=!0,c(T,P,R,A))}}},plugins:{},highlightAll:function(c,g){r.highlightAllUnder(document,c,g)},highlightAllUnder:function(c,g,P){var w={callback:P,container:c,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",w),w.elements=Array.prototype.slice.apply(w.container.querySelectorAll(w.selector)),r.hooks.run("before-all-elements-highlight",w);for(var A=0,I;I=w.elements[A++];)r.highlightElement(I,g===!0,w.callback)},highlightElement:function(c,g,P){var w=r.util.getLanguage(c),A=r.languages[w];r.util.setLanguage(c,w);var I=c.parentElement;I&&I.nodeName.toLowerCase()==="pre"&&r.util.setLanguage(I,w);var R=c.textContent,T={element:c,language:w,grammar:A,code:R};function S(Y){T.highlightedCode=Y,r.hooks.run("before-insert",T),T.element.innerHTML=T.highlightedCode,r.hooks.run("after-highlight",T),r.hooks.run("complete",T),P&&P.call(T.element)}if(r.hooks.run("before-sanity-check",T),I=T.element.parentElement,I&&I.nodeName.toLowerCase()==="pre"&&!I.hasAttribute("tabindex")&&I.setAttribute("tabindex","0"),!T.code){r.hooks.run("complete",T),P&&P.call(T.element);return}if(r.hooks.run("before-highlight",T),!T.grammar){S(r.util.encode(T.code));return}if(g&&i.Worker){var F=new Worker(r.filename);F.onmessage=function(Y){S(Y.data)},F.postMessage(JSON.stringify({language:T.language,code:T.code,immediateClose:!0}))}else S(r.highlight(T.code,T.grammar,T.language))},highlight:function(c,g,P){var w={code:c,grammar:g,language:P};if(r.hooks.run("before-tokenize",w),!w.grammar)throw new Error('The language "'+w.language+'" has no grammar.');return w.tokens=r.tokenize(w.code,w.grammar),r.hooks.run("after-tokenize",w),o.stringify(r.util.encode(w.tokens),w.language)},tokenize:function(c,g){var P=g.rest;if(P){for(var w in P)g[w]=P[w];delete g.rest}var A=new b;return v(A,A.head,c),f(c,A,g,A.head,0),O(A)},hooks:{all:{},add:function(c,g){var P=r.hooks.all;P[c]=P[c]||[],P[c].push(g)},run:function(c,g){var P=r.hooks.all[c];if(!(!P||!P.length))for(var w=0,A;A=P[w++];)A(g)}},Token:o};i.Prism=r;function o(c,g,P,w){this.type=c,this.content=g,this.alias=P,this.length=(w||"").length|0}o.stringify=function c(g,P){if(typeof g=="string")return g;if(Array.isArray(g)){var w="";return g.forEach(function(S){w+=c(S,P)}),w}var A={type:g.type,content:c(g.content,P),tag:"span",classes:["token",g.type],attributes:{},language:P},I=g.alias;I&&(Array.isArray(I)?Array.prototype.push.apply(A.classes,I):A.classes.push(I)),r.hooks.run("wrap",A);var R="";for(var T in A.attributes)R+=" "+T+'="'+(A.attributes[T]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+R+">"+A.content+"</"+A.tag+">"};function u(c,g,P,w){c.lastIndex=g;var A=c.exec(P);if(A&&w&&A[1]){var I=A[1].length;A.index+=I,A[0]=A[0].slice(I)}return A}function f(c,g,P,w,A,I){for(var R in P)if(!(!P.hasOwnProperty(R)||!P[R])){var T=P[R];T=Array.isArray(T)?T:[T];for(var S=0;S<T.length;++S){if(I&&I.cause==R+","+S)return;var F=T[S],Y=F.inside,ce=!!F.lookbehind,te=!!F.greedy,Ce=F.alias;if(te&&!F.pattern.global){var Le=F.pattern.toString().match(/[imsuy]*$/)[0];F.pattern=RegExp(F.pattern.source,Le+"g")}for(var D=F.pattern||F,H=w.next,K=A;H!==g.tail&&!(I&&K>=I.reach);K+=H.value.length,H=H.next){var Z=H.value;if(g.length>c.length)return;if(!(Z instanceof o)){var le=1,re;if(te){if(re=u(D,K,c,ce),!re||re.index>=c.length)break;var Ke=re.index,_e=re.index+re[0].length,Ee=K;for(Ee+=H.value.length;Ke>=Ee;)H=H.next,Ee+=H.value.length;if(Ee-=H.value.length,K=Ee,H.value instanceof o)continue;for(var Se=H;Se!==g.tail&&(Ee<_e||typeof Se.value=="string");Se=Se.next)le++,Ee+=Se.value.length;le--,Z=c.slice(K,Ee),re.index-=K}else if(re=u(D,0,Z,ce),!re)continue;var Ke=re.index,we=re[0],We=Z.slice(0,Ke),ke=Z.slice(Ke+we.length),ye=K+Z.length;I&&ye>I.reach&&(I.reach=ye);var de=H.prev;We&&(de=v(g,de,We),K+=We.length),_(g,de,le);var ht=new o(R,Y?r.tokenize(we,Y):we,Ce,we);if(H=v(g,de,ht),ke&&v(g,H,ke),le>1){var Ae={cause:R+","+S,reach:ye};f(c,g,P,H.prev,K,Ae),I&&Ae.reach>I.reach&&(I.reach=Ae.reach)}}}}}}function b(){var c={value:null,prev:null,next:null},g={value:null,prev:c,next:null};c.next=g,this.head=c,this.tail=g,this.length=0}function v(c,g,P){var w=g.next,A={value:P,prev:g,next:w};return g.next=A,w.prev=A,c.length++,A}function _(c,g,P){for(var w=g.next,A=0;A<P&&w!==c.tail;A++)w=w.next;g.next=w,w.prev=g,c.length-=A}function O(c){for(var g=[],P=c.head.next;P!==c.tail;)g.push(P.value),P=P.next;return g}if(!i.document)return i.addEventListener&&(r.disableWorkerMessageHandler||i.addEventListener("message",function(c){var g=JSON.parse(c.data),P=g.language,w=g.code,A=g.immediateClose;i.postMessage(r.highlight(w,r.languages[P],P)),A&&i.close()},!1)),r;var L=r.util.currentScript();L&&(r.filename=L.src,L.hasAttribute("data-manual")&&(r.manual=!0));function y(){r.manual||r.highlightAll()}if(!r.manual){var E=document.readyState;E==="loading"||E==="interactive"&&L&&L.defer?document.addEventListener("DOMContentLoaded",y):window.requestAnimationFrame?window.requestAnimationFrame(y):window.setTimeout(y,16)}return r}(t);a.exports&&(a.exports=e),typeof Pa<"u"&&(Pa.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(s,n){var l={};l["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[n]},l.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:l}};r["language-"+n]={pattern:/[\s\S]+/,inside:e.languages[n]};var o={};o[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:r},e.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(i,s){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:e.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(i){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var n=i.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading\u2026",s=function(L,y){return"\u2716 Error "+L+" while fetching file: "+y},n="\u2716 Error: File does not exist or is empty",l={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},r="data-src-status",o="loading",u="loaded",f="failed",b="pre[data-src]:not(["+r+'="'+u+'"]):not(['+r+'="'+o+'"])';function v(L,y,E){var c=new XMLHttpRequest;c.open("GET",L,!0),c.onreadystatechange=function(){c.readyState==4&&(c.status<400&&c.responseText?y(c.responseText):c.status>=400?E(s(c.status,c.statusText)):E(n))},c.send(null)}function _(L){var y=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(L||"");if(y){var E=Number(y[1]),c=y[2],g=y[3];return c?g?[E,Number(g)]:[E,void 0]:[E,E]}}e.hooks.add("before-highlightall",function(L){L.selector+=", "+b}),e.hooks.add("before-sanity-check",function(L){var y=L.element;if(y.matches(b)){L.code="",y.setAttribute(r,o);var E=y.appendChild(document.createElement("CODE"));E.textContent=i;var c=y.getAttribute("data-src"),g=L.language;if(g==="none"){var P=(/\.(\w+)$/.exec(c)||[,"none"])[1];g=l[P]||P}e.util.setLanguage(E,g),e.util.setLanguage(y,g);var w=e.plugins.autoloader;w&&w.loadLanguages(g),v(c,function(A){y.setAttribute(r,u);var I=_(y.getAttribute("data-range"));if(I){var R=A.split(/\r\n?|\n/g),T=I[0],S=I[1]==null?R.length:I[1];T<0&&(T+=R.length),T=Math.max(0,Math.min(T-1,R.length)),S<0&&(S+=R.length),S=Math.max(0,Math.min(S,R.length)),A=R.slice(T,S).join(`
`),y.hasAttribute("data-start")||y.setAttribute("data-start",String(T+1))}E.textContent=A,e.highlightElement(E)},function(A){y.setAttribute(r,f),E.textContent=A})}}),e.plugins.fileHighlight={highlight:function(y){for(var E=(y||document).querySelectorAll(b),c=0,g;g=E[c++];)e.highlightElement(g)}};var O=!1;e.fileHighlight=function(){O||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),O=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Li);const Ti=Li.exports,Ca="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+Ca+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+Ca+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",a=>{a.type==="entity"&&(a.attributes.title=a.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(t,e){const i={};i["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[e]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;const s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};s["language-"+e]={pattern:/[\s\S]+/,inside:Prism.languages[e]};const n={};n[t]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,t),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("svelte","cdata",n)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function sn(a){let t,e;return{c(){t=new Ki(!1),e=ne(),this.h()},l(i){t=Wi(i,!1),e=ne(),this.h()},h(){t.a=e},m(i,s){t.m(a[2],i,s),z(i,e,s)},p(i,s){s&4&&t.p(i[2])},d(i){i&&p(e),i&&t.d()}}}function an(a){let t;return{c(){t=j(a[2])},l(e){t=G(e,a[2])},m(e,i){z(e,t,i)},p(e,i){i&4&&Js(t,e[2])},d(e){e&&p(t)}}}function nn(a){let t,e,i,s,n,l,r;const o=a[6].default,u=Ui(o,a,a[5],null);function f(_,O){return _[0]==="none"?an:sn}let b=f(a),v=b(a);return{c(){t=k("code"),u&&u.c(),e=V(),i=k("pre"),s=k("code"),v.c(),this.h()},l(_){t=M(_,"CODE",{style:!0});var O=C(t);u&&u.l(O),O.forEach(p),e=N(_),i=M(_,"PRE",{class:!0,"command-line":!0,"data-output":!0});var L=C(i);s=M(L,"CODE",{class:!0});var y=C(s);v.l(y),y.forEach(p),L.forEach(p),this.h()},h(){ie(t,"display","none"),d(s,"class",n="language-"+a[0]),d(i,"class",l="language-"+a[0]),d(i,"command-line",""),d(i,"data-output","2-17")},m(_,O){z(_,t,O),u&&u.m(t,null),a[7](t),z(_,e,O),z(_,i,O),h(i,s),v.m(s,null),r=!0},p(_,[O]){u&&u.p&&(!r||O&32)&&Bi(u,o,_,_[5],r?Hi(o,_[5],O,null):zi(_[5]),null),b===(b=f(_))&&v?v.p(_,O):(v.d(1),v=b(_),v&&(v.c(),v.m(s,null))),(!r||O&1&&n!==(n="language-"+_[0]))&&d(s,"class",n),(!r||O&1&&l!==(l="language-"+_[0]))&&d(i,"class",l)},i(_){r||(W(u,_),r=!0)},o(_){Q(u,_),r=!1},d(_){_&&p(t),u&&u.d(_),a[7](null),_&&p(e),_&&p(i),v.d()}}}const La=Ti;Ti.highlightElement;const ln={transform:a=>a};function rn(a,t,e){let{$$slots:i={},$$scope:s}=t,{language:n="javascript"}=t,{source:l=""}=t,{transform:r=v=>v}=t,o,u;function f(){const v=La.languages[n];let _=l||o.textContent;_=ln.transform(_),_=r(_),e(2,u=n==="none"?_:La.highlight(_,v,n))}function b(v){Pe[v?"unshift":"push"](()=>{o=v,e(1,o)})}return a.$$set=v=>{e(9,t=ds(ds({},t),ka(v))),"language"in v&&e(0,n=v.language),"source"in v&&e(3,l=v.source),"transform"in v&&e(4,r=v.transform),"$$scope"in v&&e(5,s=v.$$scope)},a.$$.update=()=>{t&&(l||o)&&f()},t=ka(t),[n,o,u,l,r,s,i,b]}class on extends Be{constructor(t){super(),ze(this,t,rn,nn,He,{language:0,source:3,transform:4})}}var ee=(a=>(a[a.WHITE=0]="WHITE",a[a.BLACK=1]="BLACK",a[a.BOTH=2]="BOTH",a[a.SPECTATOR=3]="SPECTATOR",a[a.SERVER=4]="SERVER",a))(ee||{}),q=(a=>(a[a.LEGAL=0]="LEGAL",a[a.LEGALHOVER=1]="LEGALHOVER",a[a.CHECK=2]="CHECK",a[a.MOVE=3]="MOVE",a[a.NEXTMOVE=4]="NEXTMOVE",a[a.PREMOVE=5]="PREMOVE",a[a.PREMOVEHOVER=6]="PREMOVEHOVER",a[a.SELECT=7]="SELECT",a))(q||{});class un{constructor(t){this.defaultState={boardTheme:"standard",piecesTheme:"standard",flipped:!1,notation:!0,shadow:!1,startFen:vn,size:0},this.setConfigSettings=e=>{e!==void 0&&(e.boardTheme!==void 0&&(this.boardTheme=e.boardTheme),e.piecesTheme!==void 0&&(this.piecesTheme=e.piecesTheme),e.flipped!==void 0&&(this.flipped=e.flipped),e.notation!==void 0&&(this.notation=e.notation),e.shadow!==void 0&&(this.shadow=e.shadow),e.startFen!==void 0&&(this.startFen=e.startFen))},this.getConfig=()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.shadow!==this.defaultState.shadow&&{shadow:this.shadow},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen}};if(Object.keys(e).length!==0)return e},this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.shadow=this.defaultState.shadow,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.setConfigSettings(t)}}class Oi{constructor(t){this.defaultState={enabled:!0,color:ee.BOTH},this.setConfigSettings=e=>{switch(e){case!0:this.enabled=!0,this.color=ee.BOTH;break;case!1:this.enabled=!1;break;case ee.WHITE:this.enabled=!0,this.color=ee.WHITE;break;case ee.BLACK:this.enabled=!0,this.color=ee.BLACK;break}},this.getConfig=()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1},this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(t)}}class cn{constructor(t){this.defaultState={enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}},this.setConfigSettings=e=>{var i,s,n,l;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(i=e==null?void 0:e.transition)!=null&&i.duration&&(this.transition.settings.duration=(s=e==null?void 0:e.transition)==null?void 0:s.duration),(n=e==null?void 0:e.transition)!=null&&n.easing&&(this.transition.settings.easing=(l=e==null?void 0:e.transition)==null?void 0:l.easing)))))},this.getConfig=()=>{const e={},i={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(i.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(i.easing=this.transition.settings.easing),Object.keys(i).length!==0&&(e.transition=i)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1},this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(t)}}class dn{constructor(t){this.defaultState={enabled:!0,selectedPiece:void 0},this.setConfigSettings=e=>{e!==void 0&&(this.enabled=e)},this.getConfig=()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(t)}}class hn{constructor(t){this.defaultState={enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:""},this.setConfigSettings=e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))},this.getConfig=()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled},this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.setConfigSettings(t)}}class fn{constructor(t){this.defaultState={enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}},this.setConfigSettings=e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))},this.getConfig=()=>{const e={},i=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(i.forEach(s=>{this.settings[s]!==this.defaultState.settings[s]&&(e[s]=this.settings[s])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(t)}}class gn{constructor(t){this.defaultState={enabled:!0,engineArrows:[],settings:{LshapeKnightMove:!0,onlyChessMove:!1}},this.setConfigSettings=e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.LshapeKnightMove!==void 0&&(this.settings.LshapeKnightMove=e.LshapeKnightMove),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))},this.getConfig=()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.LshapeKnightMove!==this.defaultState.settings.LshapeKnightMove&&(e.LshapeKnightMove=this.settings.LshapeKnightMove),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.engineArrows=JSON.parse(JSON.stringify(this.defaultState.engineArrows)),this.settings={LshapeKnightMove:this.defaultState.settings.LshapeKnightMove,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(t)}}class bn{constructor(t){this.defaultState={enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}},this.setConfigSettings=e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))},this.getConfig=()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},t!==void 0&&(t===!0?this.enabled=!0:t===!1?this.enabled=!1:(this.enabled=!0,t.CAPTURE!==void 0&&(this.settings.CAPTURE=t.CAPTURE),t.CASTLE!==void 0&&(this.settings.CASTLE=t.CASTLE),t.MOVE!==void 0&&(this.settings.MOVE=t.MOVE),t.UNDO!==void 0&&(this.settings.UNDO=t.UNDO)))}}class pn{constructor(t){this.defaultState={enabled:!1,settings:{min:100,max:1e3}},this.setConfigSettings=e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.min!==void 0&&(this.settings.min=e.min),e.max!==void 0&&(this.settings.max=e.max)))},this.getConfig=()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled},this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(t)}}const vn="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Ii{constructor(t){this.getConfig=()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig(),resizible:this.resizible.getConfig()}),this.pieces=[],this.markedSquares=new Set,this.board=new un(t==null?void 0:t.board),this.movable=new Oi(t==null?void 0:t.movable),this.draggable=new cn(t==null?void 0:t.draggable),this.selectable=new dn(t==null?void 0:t.selectable),this.legal=new hn(t==null?void 0:t.legal),this.callbacks={},this.highlight=new fn(t==null?void 0:t.highlight),this.drawTools=new gn(t==null?void 0:t.drawTools),this.sounds=new bn(t==null?void 0:t.sounds),this.resizible=new pn(t==null?void 0:t.resizible)}setConfigSettings(t){this.board.setConfigSettings(t.board),this.movable.setConfigSettings(t.movable),this.draggable.setConfigSettings(t.draggable),this.selectable.setConfigSettings(t.selectable),this.legal.setConfigSettings(t.legal),t.callbacks!==void 0&&(t.callbacks.getLegalMoves&&(this.callbacks.getLegalMoves=t.callbacks.getLegalMoves),t.callbacks.getPreMoves&&(this.callbacks.getPreMoves=t.callbacks.getPreMoves),t.callbacks.beforeMove&&(this.callbacks.beforeMove=t.callbacks.beforeMove),t.callbacks.afterMove&&(this.callbacks.afterMove=t.callbacks.afterMove),t.callbacks.getLastMove&&(this.callbacks.getLastMove=t.callbacks.getLastMove),t.callbacks.getLastMoveSAN&&(this.callbacks.getLastMoveSAN=t.callbacks.getLastMoveSAN),t.callbacks.getKingLocations&&(this.callbacks.getKingLocations=t.callbacks.getKingLocations),t.callbacks.getInCheck&&(this.callbacks.getInCheck=t.callbacks.getInCheck),t.callbacks.getWhiteToMove&&(this.callbacks.getWhiteToMove=t.callbacks.getWhiteToMove)),this.highlight.setConfigSettings(t.highlight),this.drawTools.setConfigSettings(t.drawTools),this.sounds.setConfigSettings(t.sounds),this.resizible.setConfigSettings(t.resizible)}}const mn=["a","b","c","d","e","f","g","h"],_n=["8","7","6","5","4","3","2","1"];function Gs(a){return{x:mn.indexOf(a[0]),y:_n.indexOf(a[1])}}function Xs(a){return a.charCodeAt(0)-97}function En(a){return 8-parseInt(a,10)}const wn=a=>{let t="",e=0;for(let i=0;i<a.length;i++){i!==0&&(t+="/");for(let s=0;s<a[i].length;s++){const n=a[i][s];n!=null&&e===0?n[0]==="w"?t+=n[1]:t+=n[1].toLowerCase():n!=null&&e!==0?(t+=e.toString(),e=0,n[0]==="w"?t+=n[1]:t+=n[1].toLowerCase()):e++}e!==0&&(t+=e.toString(),e=0)}return t},kn="8/8/8/8/8/8/8/8 w - - 0 1";class Mn{constructor(t){this.letters={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},this.changeLegalHoverIfNeeded=e=>{e.color!==q.LEGAL&&e.color!==q.PREMOVE||this.state.pieces.forEach(i=>{i.square===e.square&&(e.color=e.color===q.LEGAL?q.LEGALHOVER:q.PREMOVEHOVER)})},this.highlightSquare=(e,i)=>{const s={square:e,color:i};this.state.markedSquares.forEach(n=>{n.square===e&&n.color!==q.MOVE&&n.color!==q.CHECK&&this.state.markedSquares.delete(n)}),this.changeLegalHoverIfNeeded(s),this.state.markedSquares.add(s)},this.legalHover=e=>{this.state.markedSquares.forEach(i=>{if(i.square===e&&i.color===q.LEGAL)i.color=q.LEGALHOVER;else if(i.square!==e&&i.color===q.LEGALHOVER){let s=!1;this.state.pieces.forEach(n=>{n.square===i.square&&(s=!0)}),s||(i.color=q.LEGAL)}})},this.preMoveHover=e=>{this.state.markedSquares.forEach(i=>{if(i.square===e&&i.color===q.PREMOVE)i.color=q.PREMOVEHOVER;else if(i.square!==e&&i.color===q.PREMOVEHOVER){let s=!1;this.state.pieces.forEach(n=>{n.square===i.square&&(s=!0)}),s||(i.color=q.PREMOVE)}})},this.toggleSquareHighlight=(e,i)=>{const s={square:e,color:i};let n=!1;return this.state.markedSquares.forEach(l=>{l.square===e&&(this.state.markedSquares.delete(l),l.color===i&&(n=!0))}),this.changeLegalHoverIfNeeded(s),n?!0:(this.state.markedSquares.add(s),!1)},this.getSelectedSquare=()=>{let e="";return this.state.markedSquares.forEach(i=>{i.color===q.SELECT&&(e=i.square)}),e},this.clearSquare=(e,i)=>{e.length===2&&this.state.markedSquares.forEach(s=>{s.square===e&&(s.color===i||i===void 0)&&this.state.markedSquares.delete(s)})},this.clearAllSquares=e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(i=>{i.color===e&&this.state.markedSquares.delete(i)})},this.setPiece=(e,i)=>{if(this.notValidThing({square:e,piece:i}))return;const s=this.state.pieces.find(n=>n.square===e);s?s.name=i:this.state.pieces.push({square:e,name:i})},this.removePiece=e=>{this.notValidThing({square:e})||this.state.pieces.forEach((i,s)=>{i.square===e&&this.state.pieces.splice(s,1)})},this.clearAllPieces=()=>{this.state.pieces.length=0},this.getGridCoordsFromSquare=e=>{if(this.notValidThing({square:e}))return{x:0,y:0};const i=e[0],s=e[1],n=this.state.board.flipped?Math.abs(this.letters[i]-7):this.letters[i],l=this.state.board.flipped?Math.abs(parseInt(s,10)-8):parseInt(s,10)-1;return typeof n!="number"||l<0||l>7?{x:0,y:0}:{x:n,y:l}},this.makeMove=e=>{if(this.notValidThing({move:e}))return;let i=!1,s;const n=e.substring(0,2),l=e.substring(2,4),r=e.substring(4);this.state.pieces.forEach(o=>{o.square===l&&(s=o,this.removePiece(o.square))}),this.state.pieces.forEach(o=>{o.square===n&&(o.square=l,i=!0,r&&(o.name=o.name[0]+r.toUpperCase()))}),i?this.state.legal.lastMove=e:s&&this.state.pieces.push(s)},this.getSquareFromIndices=(e,i)=>Object.keys(this.letters)[e]+(i+1).toString(),this.updatePiecesWithFen=e=>{const i=[...Array(8)].map(()=>Array(8).fill(null)),s=["1","2","3","4","5","6","7","8"];let n=0,l=0;for(let u=0;u<(e.includes(" ")?e.indexOf(" "):e.length);u++)if(e[u]==="/")n++,l=0;else if(!s.includes(e[u]))e[u]===e[u].toUpperCase()?i[n][l]=`w${e[u]}`:i[n][l]=`b${e[u].toUpperCase()}`,l++;else for(let f=0;f<parseInt(e[u],10);f++)i[n][l]=null,l++;const r=[],o=[];for(let u=0;u<i.length;++u)for(let f=0;f<i.length;++f){const b=i[u][f],v=this.getPieceFromSquare(this.getSquareFromIndices(f,Math.abs(u-7)));b&&!v&&r.push({square:this.getSquareFromIndices(f,Math.abs(u-7)),name:b}),!b&&v&&o.push(v),b&&v&&b!==v.name&&(r.push({square:this.getSquareFromIndices(f,Math.abs(u-7)),name:b}),o.push(v))}for(let u=0;u<o.length;u++)for(let f=0;f<r.length;f++)!r[f]||!o[u]||r[f].name===o[u].name&&(o[u].square=r[f].square,o.splice(u,1),u--,r.splice(f,1),f--);r.forEach(u=>{this.state.pieces.push(u)}),o.forEach(u=>{this.state.pieces.splice(this.state.pieces.indexOf(u),1)})},this.notValidThing=e=>{const{square:i,piece:s,move:n}=e;return!!(i&&i.length!==2||s&&s.length!==2||n&&n.length!==4&&n.length!==5)},this.setGhostPiece=e=>{this.state.draggable.ghostPiece.piece=e},this.removeGhostPiece=()=>{this.state.draggable.ghostPiece.piece=void 0},this.isCastling=e=>{switch(e){case"e1g1":case"e1c1":case"e8g8":case"e8c8":return!0;default:return!1}},this.getRookMoveIfIsCastling=e=>{switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return}},this.isEnPassant=e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const i=this.getPieceFromSquare(e.substring(0,2));return!(i===void 0||i.name!=="wP"&&i.name!=="bP")},this.getCapturedPawnSquareIfIsEnPassant=e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const i=this.getPieceFromSquare(e.substring(0,2));if(i===void 0||i.name!=="wP"&&i.name!=="bP")return;const s=this.getPieceFromSquare(`${e[2]}${parseInt(e[3],10)+(i.name==="wP"?-1:1)}`);return s==null?void 0:s.square},this.isCapture=e=>!!this.getPieceFromSquare(e.substring(2,4)),this.isPromotion=e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const i=this.getPieceFromSquare(e.substring(0,2));return!(i&&(i.name[1]!=="P"||i.name[0]==="w"&&e[3]==="1"||i.name[0]==="b"&&e[3]==="8"))},this.callbackExists=e=>this.state.callbacks[e]!==void 0,this.flipBoard=e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped},this.setConfigSettings=e=>{this.state.setConfigSettings(e)},this.state=new Ii(t),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getShortFEN(){if(this.state.pieces.length===0)return kn;const t=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(e=>{t[En(e.square[1])][Xs(e.square[0])]=e.name}),wn(t)}getPieceFromSquare(t){let e;return this.state.pieces.forEach(i=>{i.square===t&&(e=i)}),e}}const Sn={[q.LEGAL]:"legalSQ cursor-pointer",[q.LEGALHOVER]:"legalSQ_hover cursor-pointer",[q.SELECT]:"selectedSQ",[q.MOVE]:"highlightMove",[q.NEXTMOVE]:"nextMoveSQ",[q.PREMOVE]:"preMoveSQ cursor-pointer",[q.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[q.CHECK]:"checkSQ"},yn={white:"#f0d9b5",black:"#b58863"},An="standard.svg",Pn={[q.LEGAL]:"legalSQ cursor-pointer",[q.LEGALHOVER]:"legalSQ_hover cursor-pointer",[q.SELECT]:"selectedSQ-darkBlue",[q.MOVE]:"highlightMove-darkBlue",[q.NEXTMOVE]:"nextMoveSQ",[q.PREMOVE]:"preMoveSQ cursor-pointer",[q.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[q.CHECK]:"checkSQ"},Cn={white:"#94A3B8",black:"#475569"},Ln="darkBlue.svg",Te={squareStyles:{standard:Sn,darkBlue:Pn},colors:{standard:yn,darkBlue:Cn},imageName:{standard:An,darkBlue:Ln}};function Ta(a,t,e){const i=a.slice();return i[3]=t[e],i[5]=e,i}function Oa(a,t,e){const i=a.slice();return i[3]=t[e],i[5]=e,i}function Ia(a){let t,e=a[2][a[1]?Math.abs(a[5]-7):a[5]]+"",i,s;return{c(){t=k("span"),i=j(e),s=V(),this.h()},l(n){t=M(n,"SPAN",{"data-file":!0,style:!0,class:!0});var l=C(t);i=G(l,e),s=N(l),l.forEach(p),this.h()},h(){d(t,"data-file",a[3]),ie(t,"color",a[5]%2===0?Te.colors[a[0]].white:Te.colors[a[0]].black),d(t,"class","svelte-t3eav4")},m(n,l){z(n,t,l),h(t,i),h(t,s)},p(n,l){l&2&&e!==(e=n[2][n[1]?Math.abs(n[5]-7):n[5]]+"")&&Js(i,e),l&1&&ie(t,"color",n[5]%2===0?Te.colors[n[0]].white:Te.colors[n[0]].black)},d(n){n&&p(t)}}}function Fa(a){let t,e=(a[1]?a[5]+1:Math.abs(a[5]-8))+"",i,s,n;return{c(){t=k("span"),i=j(e),s=V(),this.h()},l(l){t=M(l,"SPAN",{"data-file":!0,style:!0,class:!0});var r=C(t);i=G(r,e),s=N(r),r.forEach(p),this.h()},h(){d(t,"data-file",a[3]),ie(t,"color",a[5]%2===0?Te.colors[a[0]].white:Te.colors[a[0]].black),d(t,"class",n=Ma(a[1]?"":"text-right")+" svelte-t3eav4")},m(l,r){z(l,t,r),h(t,i),h(t,s)},p(l,r){r&2&&e!==(e=(l[1]?l[5]+1:Math.abs(l[5]-8))+"")&&Js(i,e),r&1&&ie(t,"color",l[5]%2===0?Te.colors[l[0]].white:Te.colors[l[0]].black),r&2&&n!==(n=Ma(l[1]?"":"text-right")+" svelte-t3eav4")&&d(t,"class",n)},d(l){l&&p(t)}}}function Tn(a){let t,e,i,s=a[2],n=[];for(let o=0;o<s.length;o+=1)n[o]=Ia(Oa(a,s,o));let l=a[2],r=[];for(let o=0;o<l.length;o+=1)r[o]=Fa(Ta(a,l,o));return{c(){t=k("div");for(let o=0;o<n.length;o+=1)n[o].c();e=V(),i=k("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){t=M(o,"DIV",{class:!0});var u=C(t);for(let b=0;b<n.length;b+=1)n[b].l(u);u.forEach(p),e=N(o),i=M(o,"DIV",{class:!0});var f=C(i);for(let b=0;b<r.length;b+=1)r[b].l(f);f.forEach(p),this.h()},h(){d(t,"class","files noselect svelte-t3eav4"),d(i,"class","ranks noselect svelte-t3eav4")},m(o,u){z(o,t,u);for(let f=0;f<n.length;f+=1)n[f].m(t,null);z(o,e,u),z(o,i,u);for(let f=0;f<r.length;f+=1)r[f].m(i,null)},p(o,[u]){if(u&7){s=o[2];let f;for(f=0;f<s.length;f+=1){const b=Oa(o,s,f);n[f]?n[f].p(b,u):(n[f]=Ia(b),n[f].c(),n[f].m(t,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=s.length}if(u&7){l=o[2];let f;for(f=0;f<l.length;f+=1){const b=Ta(o,l,f);r[f]?r[f].p(b,u):(r[f]=Fa(b),r[f].c(),r[f].m(i,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=l.length}},i:ue,o:ue,d(o){o&&p(t),dt(n,o),o&&p(e),o&&p(i),dt(r,o)}}}function On(a,t,e){let{theme:i}=t,{flipped:s}=t;const n=["a","b","c","d","e","f","g","h"];return a.$$set=l=>{"theme"in l&&e(0,i=l.theme),"flipped"in l&&e(1,s=l.flipped)},[i,s,n]}class In extends Be{constructor(t){super(),ze(this,t,On,Tn,He,{theme:0,flipped:1})}}function Fn(a){const t=2.5949095;return(a*=2)<1?.5*(a*a*((t+1)*a-t)):.5*((a-=2)*a*((t+1)*a+t)+2)}function qn(a){return a*a*((1.70158+1)*a-1.70158)}function Rn(a){return--a*a*((1.70158+1)*a+1.70158)+1}function hs(a){const t=.36363636363636365,e=8/11,i=9/10,s=4356/361,n=35442/1805,l=16061/1805,r=a*a;return a<t?7.5625*r:a<e?9.075*r-9.9*a+3.4:a<i?s*r-n*a+l:10.8*a*a-20.52*a+10.72}function Dn(a){return a<.5?.5*(1-hs(1-a*2)):.5*hs(a*2-1)+.5}function Vn(a){return 1-hs(1-a)}function Nn(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}function Un(a){return 1-Math.sqrt(1-a*a)}function Bn(a){return Math.sqrt(1- --a*a)}function zn(a){return a<.5?4*a*a*a:.5*Math.pow(2*a-2,3)+1}function Hn(a){return a*a*a}function Fi(a){const t=a-1;return t*t*t+1}function Kn(a){return a<.5?.5*Math.sin(13*Math.PI/2*2*a)*Math.pow(2,10*(2*a-1)):.5*Math.sin(-13*Math.PI/2*(2*a-1+1))*Math.pow(2,-10*(2*a-1))+1}function Wn(a){return Math.sin(13*a*Math.PI/2)*Math.pow(2,10*(a-1))}function jn(a){return Math.sin(-13*(a+1)*Math.PI/2)*Math.pow(2,-10*a)+1}function Gn(a){return a===0||a===1?a:a<.5?.5*Math.pow(2,20*a-10):-.5*Math.pow(2,10-a*20)+1}function Xn(a){return a===0?a:Math.pow(2,10*(a-1))}function Yn(a){return a===1?a:1-Math.pow(2,-10*a)}function Qn(a){return a/=.5,a<1?.5*a*a:(a--,-.5*(a*(a-2)-1))}function xn(a){return a*a}function Zn(a){return-a*(a-2)}function Jn(a){return a<.5?8*Math.pow(a,4):-8*Math.pow(a-1,4)+1}function $n(a){return Math.pow(a,4)}function el(a){return Math.pow(a-1,3)*(1-a)+1}function tl(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}function sl(a){return a*a*a*a*a}function al(a){return--a*a*a*a*a+1}function il(a){return-.5*(Math.cos(Math.PI*a)-1)}function nl(a){const t=Math.cos(a*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t}function ll(a){return Math.sin(a*Math.PI/2)}const fs=Object.freeze(Object.defineProperty({__proto__:null,backIn:qn,backInOut:Fn,backOut:Rn,bounceIn:Vn,bounceInOut:Dn,bounceOut:hs,circIn:Un,circInOut:Nn,circOut:Bn,cubicIn:Hn,cubicInOut:zn,cubicOut:Fi,elasticIn:Wn,elasticInOut:Kn,elasticOut:jn,expoIn:Xn,expoInOut:Gn,expoOut:Yn,quadIn:xn,quadInOut:Qn,quadOut:Zn,quartIn:$n,quartInOut:Jn,quartOut:el,quintIn:sl,quintInOut:tl,quintOut:al,sineIn:nl,sineInOut:il,sineOut:ll,linear:yi},Symbol.toStringTag,{value:"Module"}));function qa(a){return Object.prototype.toString.call(a)==="[object Date]"}function Ys(a,t){if(a===t||a!==a)return()=>a;const e=typeof a;if(e!==typeof t||Array.isArray(a)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(a)){const i=t.map((s,n)=>Ys(a[n],s));return s=>i.map(n=>n(s))}if(e==="object"){if(!a||!t)throw new Error("Object cannot be null");if(qa(a)&&qa(t)){a=a.getTime(),t=t.getTime();const n=t-a;return l=>new Date(a+l*n)}const i=Object.keys(t),s={};return i.forEach(n=>{s[n]=Ys(a[n],t[n])}),n=>{const l={};return i.forEach(r=>{l[r]=s[r](n)}),l}}if(e==="number"){const i=t-a;return s=>a+s*i}throw new Error(`Cannot interpolate ${e} values`)}function rl(a,t={}){const e=tn(a);let i,s=a;function n(l,r){if(a==null)return e.set(a=l),Promise.resolve();s=l;let o=i,u=!1,{delay:f=0,duration:b=400,easing:v=yi,interpolate:_=Ys}=ds(ds({},t),r);if(b===0)return o&&(o.abort(),o=null),e.set(a=s),Promise.resolve();const O=ji()+f;let L;return i=Gi(y=>{if(y<O)return!0;u||(L=_(a,l),typeof b=="function"&&(b=b(a,l)),u=!0),o&&(o.abort(),o=null);const E=y-O;return E>b?(e.set(a=l),!1):(e.set(a=L(v(E/b))),!0)}),i.promise}return{set:n,update:(l,r)=>n(l(s,a),r),subscribe:e.subscribe}}function Ra(a,t,e,i){if(t===0&&e===0)return a;const s=i?["a","b","c","d","e","f","g","h"].reverse():["a","b","c","d","e","f","g","h"],n=i?["8","7","6","5","4","3","2","1"].reverse():["8","7","6","5","4","3","2","1"],l=s[s.indexOf(a[0])+t],r=n[n.indexOf(a[1])+e];if(!(!l||!r))return l+r}function Da(a,t,e){const i=t*1.15,s=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","circle");return s.setAttribute("width",(a.offsetWidth*i).toString()),s.setAttribute("height",(a.offsetHeight*i).toString()),s.style.position="absolute",s.style.zIndex="100",s.style.transform=`translate(${e?"":"-"}${25*i/2}%, -${25*i/2}%)`,s.style.opacity="0.2",n.setAttribute("r",(a.offsetWidth*i/2).toString()),n.setAttribute("cx",(a.offsetWidth*i/2).toString()),n.setAttribute("cy",(a.offsetHeight*i/2).toString()),n.setAttribute("fill","black"),s.appendChild(n),s}function ol(a,t){let e;function i(D,H=1e3){let K=!1;const Z=()=>{e==null?K=!1:(D(...e),e=null,setTimeout(Z,H))};return(...le)=>{if(K){e=le;return}D(...le),K=!0,setTimeout(Z,H)}}let s,n,l,r,o,u,f,b,v=!1,_;const O=a.parentNode;let L,{startSquare:y,boardFlipped:E,onlyShow:c,duration:g,easingFunc:P}=t;const{coords:w}=t;let A=Sa(w).x,I=Sa(w).y;const R=1.6;let T=Da(a,R,E);a.draggable=!1;function S(D){let H,K;if(D instanceof MouseEvent?(H=D.clientX-s,K=D.clientY-n,s=D.clientX,n=D.clientY):(H=D.touches[0].clientX-s,K=D.touches[0].clientY-n,s=D.touches[0].clientX,n=D.touches[0].clientY),o+=H,u+=K,v||(Math.abs(o)>1||Math.abs(u)>1)&&(w.update(Z=>({x:Z.x+(s-a.offsetWidth/2-a.getBoundingClientRect().x)/a.clientWidth,y:D instanceof MouseEvent?Z.y-(n-a.offsetHeight/2-a.getBoundingClientRect().y)/a.clientWidth:Z.y-(n-a.offsetHeight*1.5-a.getBoundingClientRect().y)/a.clientWidth,scale:D instanceof MouseEvent?1:R}),{duration:g,easing:P}),v=!0,a.style.zIndex="30",a.style.cursor="grabbing",a.dispatchEvent(new CustomEvent("startMoving"))),!!v){if(!(D instanceof MouseEvent)){const Z=Math.floor((o+l)/a.offsetWidth),le=Math.floor((u+r)/a.offsetHeight),re=Ra(y,Z,le,E);if(re){if(re!==L&&!(D instanceof MouseEvent)){const _e=Gs(re);T.style.left=`${_e.x*12.5}%`,T.style.top=`${_e.y*12.5}%`,O.appendChild(T)}}else L&&(L="")}w.update(Z=>({x:Z.x+H/a.clientWidth,y:Z.y-K/a.clientWidth,scale:D instanceof MouseEvent?1:R}),{duration:0}),a.dispatchEvent(new CustomEvent("moving",{detail:{x:s,y:n}}))}}const F=i(S,10);function Y(){const D=window.scrollX-f,H=window.scrollY-b;f=window.scrollX,b=window.scrollY,w.update(K=>({x:K.x+D,y:K.y+H,scale:1}),{duration:0})}function ce(){window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",ce),document.body.removeEventListener("mouseleave",ce),window.removeEventListener("scroll",Y),window.removeEventListener("touchmove",F),window.removeEventListener("touchend",ce),window.removeEventListener("touchcancel",ce),e=null;const D=Math.floor((o+l)/a.offsetWidth),H=Math.floor((u+r)/a.offsetHeight),K=Ra(y,D,H,E);K&&K!==y&&a.dispatchEvent(new CustomEvent("dropped",{detail:K})),w.update(()=>({x:A,y:I,scale:1}),{duration:g,easing:P}).then(()=>{a.dispatchEvent(new CustomEvent("animationEnded"))}),s=0,n=0,o=0,u=0,v=!1,a.style.removeProperty("cursor"),setTimeout(()=>{a.style.zIndex="10"},g),T.remove()}function te(D){var K;if(D.preventDefault(),D instanceof MouseEvent&&D.button!==0||!(D instanceof MouseEvent)&&((K=D.touches)==null?void 0:K.length)>1)return;A=E?7-Xs(y[0]):Xs(y[0]),I=E?8-parseInt(y[1],10):parseInt(y[1],10)-1,L=y;const H=D.target.getBoundingClientRect();!(D instanceof MouseEvent)&&D.touches[0]&&D.targetTouches[0]?(s=D.touches[0].clientX,n=D.touches[0].clientY,l=D.targetTouches[0].clientX-H.x,r=D.targetTouches[0].clientY-H.y):D instanceof MouseEvent&&(s=D.clientX,n=D.clientY,l=D.offsetX,r=D.offsetY),o=0,u=0,f=window.scrollX,b=window.scrollY,a.dispatchEvent(new CustomEvent("clicked")),window.addEventListener("mousemove",F),window.addEventListener("mouseup",ce),document.body.addEventListener("mouseleave",ce),window.addEventListener("scroll",Y),window.addEventListener("touchmove",F),window.addEventListener("touchend",ce)}function Ce(D){D.preventDefault()}function Le(D){D.preventDefault()}return a.addEventListener("contextmenu",Ce),a.addEventListener("dragstart",Le),c||(a.addEventListener("mousedown",te),a.addEventListener("touchstart",te)),{destroy(){a.removeEventListener("mousedown",te),a.removeEventListener("touchstart",te),a.removeEventListener("contextmenu",Ce),a.removeEventListener("dragstart",Le),window.clearTimeout(_)},update(D){y=D.startSquare,g=D.duration,P=D.easingFunc,D.onlyShow!==c&&(c=D.onlyShow,c?(a.removeEventListener("mousedown",te),a.removeEventListener("touchstart",te)):(a.addEventListener("mousedown",te),a.addEventListener("touchstart",te))),E!==D.boardFlipped&&(T=Da(a,R,D.boardFlipped)),E=D.boardFlipped}}}const Va=""+new URL("../../assets/wP-f78bae6c.svg",import.meta.url).href,ul=""+new URL("../../assets/wR-5eb92d73.svg",import.meta.url).href,cl=""+new URL("../../assets/wN-a4c975a2.svg",import.meta.url).href,dl=""+new URL("../../assets/wB-1ff2f149.svg",import.meta.url).href,hl=""+new URL("../../assets/wQ-8568b485.svg",import.meta.url).href,fl=""+new URL("../../assets/wK-4cdf6dc9.svg",import.meta.url).href,gl=""+new URL("../../assets/bP-84e521e8.svg",import.meta.url).href,bl=""+new URL("../../assets/bR-e39efb08.svg",import.meta.url).href,pl=""+new URL("../../assets/bN-d3912d91.svg",import.meta.url).href,vl=""+new URL("../../assets/bB-c430b746.svg",import.meta.url).href,ml=""+new URL("../../assets/bQ-c7b9a43e.svg",import.meta.url).href,_l=""+new URL("../../assets/bK-3500a2e6.svg",import.meta.url).href;function Qs(a){switch(a){case"wP":return Va;case"wR":return ul;case"wN":return cl;case"wB":return dl;case"wQ":return hl;case"wK":return fl;case"bP":return gl;case"bR":return bl;case"bN":return pl;case"bB":return vl;case"bQ":return ml;case"bK":return _l;default:return Va}}function El(a){let t,e,i,s,n;return{c(){t=k("img"),this.h()},l(l){t=M(l,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){ie(t,"left",a[7].x*12.5+"%"),ie(t,"bottom",a[7].y*12.5+"%"),ie(t,"z-Index",a[6]),ie(t,"opacity",a[3]?.3:1),d(t,"class","noselect "+(a[11]()?"cursor-pointer":"")+" svelte-1g241z"),yt(t.src,e=Qs(a[1]))||d(t,"src",e),d(t,"alt",a[1])},m(l,r){z(l,t,r),s||(n=[$s(i=ol.call(null,t,{startSquare:a[0],onlyShow:!a[11](),boardFlipped:a[2],duration:a[5],easingFunc:fs[a[4]],coords:a[9]})),X(t,"dropped",a[10]),X(t,"clicked",a[15]),X(t,"startMoving",a[16]),X(t,"animationEnded",a[17]),X(t,"moving",a[18])],s=!0)},p(l,[r]){r&128&&ie(t,"left",l[7].x*12.5+"%"),r&128&&ie(t,"bottom",l[7].y*12.5+"%"),r&64&&ie(t,"z-Index",l[6]),r&8&&ie(t,"opacity",l[3]?.3:1),r&2&&!yt(t.src,e=Qs(l[1]))&&d(t,"src",e),r&2&&d(t,"alt",l[1]),i&&ea(i.update)&&r&53&&i.update.call(null,{startSquare:l[0],onlyShow:!l[11](),boardFlipped:l[2],duration:l[5],easingFunc:fs[l[4]],coords:l[9]})},i:ue,o:ue,d(l){l&&p(t),s=!1,At(n)}}}function wl(a,t,e){let i,s,{square:n}=t,{name:l}=t,{getGridCoordsFromSquare:r}=t,{flipped:o}=t,{whiteToMove:u=!1}=t,{movable:f}=t,{ghostPiece:b=!1}=t,{easing:v="cubicInOut"}=t,{duration:_=120}=t;const O=ta();let L=_;const y=rl({x:0,y:0,scale:1},{duration:L,easing:fs[v]});Xi(a,y,S=>e(7,s=S));let E=!1;const c=S=>S[0]==="w"?ee.WHITE:ee.BLACK,g=S=>{const F=r(S);y.update(()=>({x:F.x,y:F.y,scale:1}),{duration:E?L:0,easing:fs[v]}),E||(E=!0),L=_},P=S=>{L=0,O("endDragging",S.detail),O("move",n+S.detail)},w=()=>f.enabled&&(f.color===c(l)||f.color===ee.BOTH&&(u&&c(l)===ee.WHITE||!u&&c(l)===ee.BLACK));function A(S){St.call(this,a,S)}function I(S){St.call(this,a,S)}function R(S){St.call(this,a,S)}const T=S=>O("moving",S.detail);return a.$$set=S=>{"square"in S&&e(0,n=S.square),"name"in S&&e(1,l=S.name),"getGridCoordsFromSquare"in S&&e(12,r=S.getGridCoordsFromSquare),"flipped"in S&&e(2,o=S.flipped),"whiteToMove"in S&&e(13,u=S.whiteToMove),"movable"in S&&e(14,f=S.movable),"ghostPiece"in S&&e(3,b=S.ghostPiece),"easing"in S&&e(4,v=S.easing),"duration"in S&&e(5,_=S.duration)},a.$$.update=()=>{a.$$.dirty&5&&g(n),a.$$.dirty&16384&&e(6,i=typeof f=="boolean"?f?1:0:f.enabled?1:0)},[n,l,o,b,v,_,i,s,O,y,P,w,r,u,f,A,I,R,T]}class qi extends Be{constructor(t){super(),ze(this,t,wl,El,He,{square:0,name:1,getGridCoordsFromSquare:12,flipped:2,whiteToMove:13,movable:14,ghostPiece:3,easing:4,duration:5})}}function kl(a){let t,e;return{c(){t=k("div"),this.h()},l(i){t=M(i,"DIV",{style:!0,class:!0}),C(t).forEach(p),this.h()},h(){ie(t,"left",a[2]*12.5+"%"),ie(t,"bottom",a[3]*12.5+"%"),d(t,"class",e="noselect "+Te.squareStyles[a[1]][a[0]]+" svelte-10vytug")},m(i,s){z(i,t,s)},p(i,[s]){s&4&&ie(t,"left",i[2]*12.5+"%"),s&8&&ie(t,"bottom",i[3]*12.5+"%"),s&3&&e!==(e="noselect "+Te.squareStyles[i[1]][i[0]]+" svelte-10vytug")&&d(t,"class",e)},i:ue,o:ue,d(i){i&&p(t)}}}function Ml(a,t,e){let{square:i}=t,{color:s}=t,{getGridCoordsFromSquare:n}=t,{flipped:l}=t,{theme:r}=t,o,u;const f=()=>{const b=n(i);e(2,o=b.x),e(3,u=b.y)};return a.$$set=b=>{"square"in b&&e(4,i=b.square),"color"in b&&e(0,s=b.color),"getGridCoordsFromSquare"in b&&e(5,n=b.getGridCoordsFromSquare),"flipped"in b&&e(6,l=b.flipped),"theme"in b&&e(1,r=b.theme)},a.$$.update=()=>{a.$$.dirty&64&&f()},[s,r,o,u,i,n,l]}class Sl extends Be{constructor(t){super(),ze(this,t,Ml,kl,He,{square:4,color:0,getGridCoordsFromSquare:5,flipped:6,theme:1})}}const yl=["a","b","c","d","e","f","g","h"],Al=["8","7","6","5","4","3","2","1"];function Pl(a){a.querySelectorAll("[sf]").forEach(t=>t.remove())}function xs(a){return`${yl[a.x]}${Al[a.y]}`}function Ri(a,t){return Math.abs((a.x-t.x)*(a.y-t.y))===2}function Zs(a,t){return`${xs(a)}${xs(t)}`}function Cl(a,t){return!!(Ri(a,t)||Math.abs(a.x-t.x)===Math.abs(a.y-t.y)||a.x===t.x!=(a.y===t.y))}function Di(a,t,e,i,s,n){let l={x:-1,y:-1},r,o;Ri(t,e)&&i?(Math.abs(e.x-t.x)===2?l={x:e.x,y:t.y}:l={x:t.x,y:e.y},l.y-t.y<0?o=Math.PI+Math.atan((l.x-t.x)/(l.y-t.y)):o=Math.atan((l.x-t.x)/Math.abs(l.y-t.y)),r={x:e.x-Math.sign(e.x-l.x)*(l.x!==e.x?.4:0),y:e.y-Math.sign(e.y-l.y)*(l.y!==e.y?.4:0)}):(e.y-t.y<0?o=Math.PI+Math.atan((e.x-t.x)/(e.y-t.y)):o=Math.atan((e.x-t.x)/Math.abs(e.y-t.y)),r={x:e.x-Math.sin(o)*.4,y:e.y-Math.cos(o)*.4});const u={x:t.x+Math.sin(o)*.4,y:t.y+Math.cos(o)*.4};a.setAttribute("points",`${u.x+.5},${u.y+.5} ${l.x!==-1&&l.y!==-1&&i?`${l.x+.5},${l.y+.5} `:""}${r.x+.5},${r.y+.5}`),a.setAttribute("data-sqID",`${Zs(t,e)}`),n!==void 0&&a.setAttribute("opacity",`${n}`),s!==void 0&&(a.setAttribute("marker-start",`url(#start-${s[0]})`),a.setAttribute("marker-end",`url(#end-${s[0]})`),a.setAttribute("stroke",s))}function cs(a,t,e,i,s,n){if(!(t===void 0||e.x===-1&&e.y===-1)){if(t.tagName==="circle")t.setAttribute("fill","transparent"),i?t.setAttribute("stroke","red"):s?t.setAttribute("stroke","orange"):n?t.setAttribute("stroke","blue"):t.setAttribute("stroke","green"),a.querySelectorAll(`\u0441ircle[cx="${e.x+.5}"][cy="${e.y+.5}"]`).forEach(l=>{t!==void 0&&l!==t&&(l.getAttribute("stroke")===t.getAttribute("stroke")?t.setAttribute("remove",""):t.hasAttribute("remove")&&t.removeAttribute("remove"))});else if(t.tagName==="polyline"){const l=i?"red":s?"orange":n?"blue":"green";t.setAttribute("stroke",`${l}`),t.setAttribute("marker-start",`url(#start-${l[0]})`),t.setAttribute("marker-end",`url(#end-${l[0]})`),a.querySelectorAll(`polyline[data-sqID="${t.getAttribute("data-sqID")}"]`).forEach(r=>{t instanceof SVGPolylineElement&&r!==t&&(r.getAttribute("stroke")===t.getAttribute("stroke")?t.setAttribute("remove",""):t.hasAttribute("remove")&&t.removeAttribute("remove"))})}}}function Vi(a,t,e,i,s){const n=document.createElementNS("http://www.w3.org/2000/svg","polyline");return Di(n,a,t,e,i,s),n.setAttribute("fill","none"),n.setAttribute("stroke-width","0.25"),n.setAttribute("stroke-linejoin","round"),n.setAttribute("opacity",s!==void 0?`${s}`:"0.4"),n.setAttribute("marker-start",i?`url(#start-${i[0]})`:"url(#start-g)"),n.setAttribute("marker-end",i?`url(#end-${i[0]})`:"url(#end-g)"),n.setAttribute("stroke",i||"green"),n}function Ll(a,t,e){t.forEach(i=>{const s=Vi(Gs(i.move.substring(0,2)),Gs(i.move.substring(2,4)),e,i.color,i.opacity);s.setAttribute("sf",""),a.appendChild(s)})}function Na(a){a.querySelectorAll("circle,polyline").forEach(t=>{t.hasAttribute("sf")||t.remove()})}function Tl(a,t){let{svg:e,flipped:i,enabled:s,settings:n}=t,l=!1,r={x:-1,y:-1},o,u;function f(E,c){const g=a.getBoundingClientRect(),P=i?g.width-(E-g.left):E-g.left,w=i?g.height-(c-g.top):c-g.top;return{x:Math.max(0,Math.min(7,Math.floor(P/(a.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(w/(a.clientHeight/8))))}}function b(E){u=document.createElementNS("http://www.w3.org/2000/svg","circle"),u.setAttribute("cx",`${E.x+.5}`),u.setAttribute("cy",`${E.y+.5}`),u.setAttribute("r","0.465"),u.setAttribute("opacity","0.4"),u.setAttribute("fill","none"),u.setAttribute("stroke-width","0.07"),u.setAttribute("stroke","green")}function v(E){if(u===void 0||r.x===-1&&r.y===-1)return;const c=f(E.clientX,E.clientY);n.onlyChessMove&&!Cl(r,c)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),r.x===c.x&&r.y===c.y?(Zs(r,c),u instanceof SVGPolylineElement&&(u.remove(),b(c)),cs(e,u,r,E.shiftKey,E.ctrlKey,E.altKey),e.appendChild(u),e.querySelectorAll(`circle[cx="${r.x+.5}"][cy="${r.y+.5}"]`).forEach(g=>{g!==u&&(o=g,u!==void 0&&g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,e.querySelectorAll(`polyline[data-sqID="${Zs(r,c)}"]`).forEach(g=>{u===void 0||r.x===-1&&r.y===-1||g===u||(o=g,g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=Vi(r,c,n.LshapeKnightMove),cs(e,u,r,E.shiftKey,E.ctrlKey,E.altKey),e.appendChild(u)):u instanceof SVGPolylineElement&&Di(u,r,c,n.LshapeKnightMove)))}function _(E){E.preventDefault()}function O(E){E.preventDefault(),cs(e,u,r,E.shiftKey,E.ctrlKey,E.altKey)}function L(E){if(E.button===0)l=!1;else if(E.button===2){if(r.x===-1&&r.y===-1)return;e.querySelectorAll("[remove]").forEach(c=>{c.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&a.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:xs(r),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&a.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,r={x:-1,y:-1},l=!1,window.removeEventListener("mousemove",v),window.removeEventListener("keydown",O),window.removeEventListener("keyup",O),window.removeEventListener("contextmenu",_)}window.removeEventListener("mouseup",L)}function y(E){if(E.button===0)l=!0,Na(e),window.addEventListener("mouseup",L);else if(E.button===2&&!l){const c=f(E.clientX,E.clientY);r=c,b(c),cs(e,u,r,E.shiftKey,E.ctrlKey,E.altKey),o=void 0,e.querySelectorAll(`circle[cx="${c.x+.5}"][cy="${c.y+.5}"]`).forEach(g=>{o=g,u!==void 0&&g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&e.appendChild(u),window.addEventListener("mousemove",v),window.addEventListener("mouseup",L),window.addEventListener("keydown",O),window.addEventListener("keyup",O),window.addEventListener("contextmenu",_)}}return s&&a.addEventListener("mousedown",y),{update(E){E.svg!==e&&(e=E.svg),E.enabled!==s&&(s=E.enabled,s?a.addEventListener("mousedown",y):(Na(e),a.removeEventListener("mousedown",y))),n=E.settings,i=E.flipped}}}function Ua(a,t,e){const i=a.slice();return i[8]=t[e],i}function Ba(a){let t,e,i,s;return{c(){t=it("marker"),e=it("path"),i=it("marker"),s=it("path"),this.h()},l(n){t=nt(n,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var l=C(t);e=nt(l,"path",{fill:!0,d:!0}),C(e).forEach(p),l.forEach(p),i=nt(n,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var r=C(i);s=nt(r,"path",{fill:!0,d:!0}),C(s).forEach(p),r.forEach(p),this.h()},h(){d(e,"fill",a[8]),d(e,"d","M 5 0 Q 0 0 0 5 L 0 15 Q 0 20 5 20 Z"),d(t,"id","start-"+a[8][0]),d(t,"viewBox","0 0 5 20"),d(t,"refX","4"),d(t,"refY","10"),d(t,"markerUnits","strokeWidth"),d(t,"markerWidth","0.5"),d(t,"markerHeight","1"),d(t,"orient","auto"),d(s,"fill",a[8]),d(s,"d","M 0 4 L 10 10 L 0 16 Z"),d(i,"id","end-"+a[8][0]),d(i,"viewBox","0 0 10 20"),d(i,"refX","0.2"),d(i,"refY","10"),d(i,"markerUnits","strokeWidth"),d(i,"orient","auto"),d(i,"fill","currentColor")},m(n,l){z(n,t,l),h(t,e),z(n,i,l),h(i,s)},p:ue,d(n){n&&p(t),n&&p(i)}}}function Ol(a){let t,e,i,s=a[2],n=[];for(let l=0;l<s.length;l+=1)n[l]=Ba(Ua(a,s,l));return{c(){t=it("svg"),e=it("defs");for(let l=0;l<n.length;l+=1)n[l].c();i=it("g"),this.h()},l(l){t=nt(l,"svg",{xmlns:!0,style:!0,class:!0,viewBox:!0});var r=C(t);e=nt(r,"defs",{});var o=C(e);for(let u=0;u<n.length;u+=1)n[u].l(o);o.forEach(p),i=nt(r,"g",{}),C(i).forEach(p),r.forEach(p),this.h()},h(){d(t,"xmlns","http://www.w3.org/2000/svg"),ie(t,"transform","rotate("+(a[1]?"180deg":"0deg")+")"),d(t,"class","rounded svelte-1ez37sv"),d(t,"viewBox","0 0 8 8")},m(l,r){z(l,t,r),h(t,e);for(let o=0;o<n.length;o+=1)n[o].m(e,null);h(t,i),a[5](i)},p(l,[r]){if(r&4){s=l[2];let o;for(o=0;o<s.length;o+=1){const u=Ua(l,s,o);n[o]?n[o].p(u,r):(n[o]=Ba(u),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=s.length}r&2&&ie(t,"transform","rotate("+(l[1]?"180deg":"0deg")+")")},i:ue,o:ue,d(l){l&&p(t),dt(n,l),a[5](null)}}}function Il(a,t,e){let{flipped:i=!1}=t,{svg:s}=t,{LshapeKnightMove:n=!1}=t,{computerArrows:l=[]}=t,r=!1;function o(b){!r||(Pl(s),Ll(s,b,n))}sa(()=>{r=!0,o(l)});const u=["green","red","blue","orange"];function f(b){Pe[b?"unshift":"push"](()=>{s=b,e(0,s)})}return a.$$set=b=>{"flipped"in b&&e(1,i=b.flipped),"svg"in b&&e(0,s=b.svg),"LshapeKnightMove"in b&&e(3,n=b.LshapeKnightMove),"computerArrows"in b&&e(4,l=b.computerArrows)},a.$$.update=()=>{a.$$.dirty&16&&o(l)},[s,i,u,n,l,f]}class Fl extends Be{constructor(t){super(),ze(this,t,Il,Ol,He,{flipped:1,svg:0,LshapeKnightMove:3,computerArrows:4})}}function za(a,{delay:t=0,duration:e=400,easing:i=Fi,x:s=0,y:n=0,opacity:l=0}={}){const r=getComputedStyle(a),o=+r.opacity,u=r.transform==="none"?"":r.transform,f=o*(1-l);return{delay:t,duration:e,easing:i,css:(b,v)=>`
			transform: ${u} translate(${(1-b)*s}px, ${(1-b)*n}px);
			opacity: ${o-f*v}`}}function ql(a){let t,e,i,s,n,l;return{c(){t=k("button"),e=k("img"),this.h()},l(r){t=M(r,"BUTTON",{});var o=C(t);e=M(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(p),this.h()},h(){yt(e.src,i=a[1])||d(e,"src",i),d(e,"alt",s="Promotion to "+a[0].toUpperCase()),d(e,"class","rounded-md border border-gray-300 hover:border-sky-600 hover:bg-gray-600")},m(r,o){z(r,t,o),h(t,e),n||(l=X(t,"click",a[2]),n=!0)},p(r,[o]){o&1&&s!==(s="Promotion to "+r[0].toUpperCase())&&d(e,"alt",s)},i:ue,o:ue,d(r){r&&p(t),n=!1,l()}}}function Rl(a,t,e){let{piece:i}=t,{isWhite:s}=t,{showModal:n}=t;const l=ta(),r=(s?"w":"b")+i.toUpperCase(),o=Qs(r),u=()=>{l("newPromotion",i),e(3,n=!1)};return a.$$set=f=>{"piece"in f&&e(0,i=f.piece),"isWhite"in f&&e(4,s=f.isWhite),"showModal"in f&&e(3,n=f.showModal)},[i,o,u,n,s]}class Dl extends Be{constructor(t){super(),ze(this,t,Rl,ql,He,{piece:0,isWhite:4,showModal:3})}}function Ha(a,t,e){const i=a.slice();return i[6]=t[e],i}function Ka(a){let t,e,i,s,n,l=["q","r","b","n"],r=[];for(let u=0;u<4;u+=1)r[u]=Wa(Ha(a,l,u));const o=u=>Q(r[u],1,1,()=>{r[u]=null});return{c(){t=k("div"),e=k("div");for(let u=0;u<4;u+=1)r[u].c();this.h()},l(u){t=M(u,"DIV",{class:!0});var f=C(t);e=M(f,"DIV",{class:!0});var b=C(e);for(let v=0;v<4;v+=1)r[v].l(b);b.forEach(p),f.forEach(p),this.h()},h(){d(e,"class","modal-content p-3 gap-3 svelte-tvjsje"),d(t,"class","modal svelte-tvjsje")},m(u,f){z(u,t,f),h(t,e);for(let b=0;b<4;b+=1)r[b].m(e,null);n=!0},p(u,f){if(f&3){l=["q","r","b","n"];let b;for(b=0;b<4;b+=1){const v=Ha(u,l,b);r[b]?(r[b].p(v,f),W(r[b],1)):(r[b]=Wa(v),r[b].c(),W(r[b],1),r[b].m(e,null))}for(qe(),b=4;b<4;b+=1)o(b);Re()}},i(u){if(!n){for(let f=0;f<4;f+=1)W(r[f]);Kt(()=>{s&&s.end(1),i=Yi(e,za,{x:100,duration:300}),i.start()}),n=!0}},o(u){r=r.filter(Boolean);for(let f=0;f<4;f+=1)Q(r[f]);i&&i.invalidate(),s=Qi(e,za,{x:-200,duration:100}),n=!1},d(u){u&&p(t),dt(r,u),u&&s&&s.end()}}}function Wa(a){let t,e,i,s;function n(o){a[3](o)}function l(o){a[4](o)}let r={piece:a[6]};return a[1]!==void 0&&(r.isWhite=a[1]),a[0]!==void 0&&(r.showModal=a[0]),t=new Dl({props:r}),Pe.push(()=>Ws(t,"isWhite",n)),Pe.push(()=>Ws(t,"showModal",l)),t.$on("newPromotion",a[5]),{c(){De(t.$$.fragment)},l(o){Ve(t.$$.fragment,o)},m(o,u){Ne(t,o,u),s=!0},p(o,u){const f={};!e&&u&2&&(e=!0,f.isWhite=o[1],js(()=>e=!1)),!i&&u&1&&(i=!0,f.showModal=o[0],js(()=>i=!1)),t.$set(f)},i(o){s||(W(t.$$.fragment,o),s=!0)},o(o){Q(t.$$.fragment,o),s=!1},d(o){Ue(t,o)}}}function Vl(a){let t,e,i=a[0]&&Ka(a);return{c(){i&&i.c(),t=ne()},l(s){i&&i.l(s),t=ne()},m(s,n){i&&i.m(s,n),z(s,t,n),e=!0},p(s,[n]){s[0]?i?(i.p(s,n),n&1&&W(i,1)):(i=Ka(s),i.c(),W(i,1),i.m(t.parentNode,t)):i&&(qe(),Q(i,1,1,()=>{i=null}),Re())},i(s){e||(W(i),e=!0)},o(s){Q(i),e=!1},d(s){i&&i.d(s),s&&p(t)}}}function Nl(a,t,e){let i=!1,s;function n(u){e(0,i=!0),u?e(1,s=!0):e(1,s=!1)}function l(u){s=u,e(1,s)}function r(u){i=u,e(0,i)}function o(u){St.call(this,a,u)}return[i,s,n,l,r,o]}class Ul extends Be{constructor(t){super(),ze(this,t,Nl,Vl,He,{openPromotionModal:2})}get openPromotionModal(){return this.$$.ctx[2]}}const Bl=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,zl=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,Hl=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,Kl=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function ja(a){let t,e,i,s;return{c(){t=k("audio"),e=k("track"),i=k("source"),this.h()},l(n){t=M(n,"AUDIO",{preload:!0});var l=C(t);e=M(l,"TRACK",{kind:!0}),i=M(l,"SOURCE",{src:!0}),l.forEach(p),this.h()},h(){d(e,"kind","captions"),yt(i.src,s=Bl)||d(i,"src",s),d(t,"preload","auto")},m(n,l){z(n,t,l),h(t,e),h(t,i),a[3](t)},p:ue,d(n){n&&p(t),a[3](null)}}}function Ga(a){let t,e,i,s;return{c(){t=k("audio"),e=k("track"),i=k("source"),this.h()},l(n){t=M(n,"AUDIO",{preload:!0});var l=C(t);e=M(l,"TRACK",{kind:!0}),i=M(l,"SOURCE",{src:!0}),l.forEach(p),this.h()},h(){d(e,"kind","captions"),yt(i.src,s=zl)||d(i,"src",s),d(t,"preload","auto")},m(n,l){z(n,t,l),h(t,e),h(t,i),a[4](t)},p:ue,d(n){n&&p(t),a[4](null)}}}function Xa(a){let t,e,i,s;return{c(){t=k("audio"),e=k("track"),i=k("source"),this.h()},l(n){t=M(n,"AUDIO",{preload:!0});var l=C(t);e=M(l,"TRACK",{kind:!0}),i=M(l,"SOURCE",{src:!0}),l.forEach(p),this.h()},h(){d(e,"kind","captions"),yt(i.src,s=Hl)||d(i,"src",s),d(t,"preload","auto")},m(n,l){z(n,t,l),h(t,e),h(t,i),a[5](t)},p:ue,d(n){n&&p(t),a[5](null)}}}function Ya(a){let t,e,i,s;return{c(){t=k("audio"),e=k("track"),i=k("source"),this.h()},l(n){t=M(n,"AUDIO",{preload:!0});var l=C(t);e=M(l,"TRACK",{kind:!0}),i=M(l,"SOURCE",{src:!0}),l.forEach(p),this.h()},h(){d(e,"kind","captions"),yt(i.src,s=Kl)||d(i,"src",s),d(t,"preload","auto")},m(n,l){z(n,t,l),h(t,e),h(t,i),a[6](t)},p:ue,d(n){n&&p(t),a[6](null)}}}function Wl(a){let t,e,i,s,n=a[0].MOVE&&ja(a),l=a[0].CAPTURE&&Ga(a),r=a[0].CASTLE&&Xa(a),o=a[0].UNDO&&Ya(a);return{c(){n&&n.c(),t=V(),l&&l.c(),e=V(),r&&r.c(),i=V(),o&&o.c(),s=ne()},l(u){n&&n.l(u),t=N(u),l&&l.l(u),e=N(u),r&&r.l(u),i=N(u),o&&o.l(u),s=ne()},m(u,f){n&&n.m(u,f),z(u,t,f),l&&l.m(u,f),z(u,e,f),r&&r.m(u,f),z(u,i,f),o&&o.m(u,f),z(u,s,f)},p(u,[f]){u[0].MOVE?n?n.p(u,f):(n=ja(u),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null),u[0].CAPTURE?l?l.p(u,f):(l=Ga(u),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),u[0].CASTLE?r?r.p(u,f):(r=Xa(u),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null),u[0].UNDO?o?o.p(u,f):(o=Ya(u),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},i:ue,o:ue,d(u){n&&n.d(u),u&&p(t),l&&l.d(u),u&&p(e),r&&r.d(u),u&&p(i),o&&o.d(u),u&&p(s)}}}function jl(a,t,e){let{settings:i}=t;const s={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},n=()=>{s.CASTLE&&(s.CASTLE.pause(),e(1,s.CASTLE.currentTime=0,s)),s.MOVE&&(s.MOVE.pause(),e(1,s.MOVE.currentTime=0,s)),s.CAPTURE&&(s.CAPTURE.pause(),e(1,s.CAPTURE.currentTime=0,s)),s.UNDO&&(s.UNDO.pause(),e(1,s.UNDO.currentTime=0,s))},l=v=>v===void 0||i[v];function r(v){switch(n(),v){case"MOVE":s.MOVE&&l("MOVE")&&s.MOVE.play();break;case"CAPTURE":s.CAPTURE&&l("CAPTURE")&&s.CAPTURE.play();break;case"CASTLE":s.CASTLE&&l("CASTLE")&&s.CASTLE.play();break;case"UNDO":s.UNDO&&l("UNDO")&&(e(1,s.UNDO.volume=.3,s),s.UNDO.play());break}}function o(v){Pe[v?"unshift":"push"](()=>{s.MOVE=v,e(1,s)})}function u(v){Pe[v?"unshift":"push"](()=>{s.CAPTURE=v,e(1,s)})}function f(v){Pe[v?"unshift":"push"](()=>{s.CASTLE=v,e(1,s)})}function b(v){Pe[v?"unshift":"push"](()=>{s.UNDO=v,e(1,s)})}return a.$$set=v=>{"settings"in v&&e(0,i=v.settings)},[i,s,r,o,u,f,b]}class Gl extends Be{constructor(t){super(),ze(this,t,jl,Wl,He,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Qa=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,xa=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function Xl(a,t){const{minWidth:e,maxWidth:i,curWidth:s}=t;let n=s,l,r,o,u;function f(_){_.stopPropagation(),a.dispatchEvent(new CustomEvent("resizing",{detail:{size:Math.max(Math.max(e,Math.min(i,o+(_.pageX-l))),Math.max(e,Math.min(i,u+(_.pageY-r))))}}))}function b(_){_.stopPropagation(),a.dispatchEvent(new CustomEvent("endResizing",{detail:{size:Math.max(Math.max(e,Math.min(i,o+Math.floor((_.pageX-l)/8)*8)),Math.max(e,Math.min(i,u+Math.floor((_.pageY-r)/8)*8)))}})),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",b)}function v(_){_.stopPropagation(),_.button===0&&(l=_.pageX,o=n,r=_.pageY,u=n,window.addEventListener("mousemove",f),window.addEventListener("mouseup",b))}return a.addEventListener("mousedown",v),{update(_){n=_.curWidth},destroy(){a.removeEventListener("mousedown",v)}}}function Yl(a){let t,e,i,s,n,l;return{c(){t=k("div"),e=it("svg"),i=it("path"),this.h()},l(r){t=M(r,"DIV",{style:!0,class:!0});var o=C(t);e=nt(o,"svg",{xmlns:!0,viewBox:!0,fill:!0});var u=C(e);i=nt(u,"path",{d:!0}),C(i).forEach(p),u.forEach(p),o.forEach(p),this.h()},h(){d(i,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 16 16"),d(e,"fill","currentColor"),ie(t,"color",Te.colors[a[0].state.board.boardTheme].black),d(t,"class","hidden lg:inline svelte-bwuzxv")},m(r,o){z(r,t,o),h(t,e),h(e,i),n||(l=[X(t,"pointerdown",xi(a[2])),$s(s=Xl.call(null,t,{minWidth:a[0].state.resizible.settings.min,maxWidth:a[0].state.resizible.settings.max,curWidth:a[0].state.board.size})),X(t,"resizing",a[3]),X(t,"endResizing",a[4])],n=!0)},p(r,[o]){o&1&&ie(t,"color",Te.colors[r[0].state.board.boardTheme].black),s&&ea(s.update)&&o&1&&s.update.call(null,{minWidth:r[0].state.resizible.settings.min,maxWidth:r[0].state.resizible.settings.max,curWidth:r[0].state.board.size})},i:ue,o:ue,d(r){r&&p(t),n=!1,At(l)}}}function Ql(a,t,e){let{chessboard:i}=t,{setSize:s}=t;function n(o){St.call(this,a,o)}const l=o=>s(o.detail.size),r=o=>s(o.detail.size);return a.$$set=o=>{"chessboard"in o&&e(0,i=o.chessboard),"setSize"in o&&e(1,s=o.setSize)},[i,s,n,l,r]}class xl extends Be{constructor(t){super(),ze(this,t,Ql,Yl,He,{chessboard:0,setSize:1})}}function Za(a,t,e){const i=a.slice();return i[66]=t[e],i}function Ja(a,t,e){const i=a.slice();return i[69]=t[e],i}function $a(a){let t=[],e=new Map,i,s,n=a[2].state.pieces;const l=r=>r[69];for(let r=0;r<n.length;r+=1){let o=Ja(a,n,r),u=l(o);e.set(u,t[r]=ei(u,o))}return{c(){for(let r=0;r<t.length;r+=1)t[r].c();i=ne()},l(r){for(let o=0;o<t.length;o+=1)t[o].l(r);i=ne()},m(r,o){for(let u=0;u<t.length;u+=1)t[u].m(r,o);z(r,i,o),s=!0},p(r,o){o[0]&30980&&(n=r[2].state.pieces,qe(),t=Ai(t,o,l,1,r,n,e,i.parentNode,Pi,ei,i,Ja),Re())},i(r){if(!s){for(let o=0;o<n.length;o+=1)W(t[o]);s=!0}},o(r){for(let o=0;o<t.length;o+=1)Q(t[o]);s=!1},d(r){for(let o=0;o<t.length;o+=1)t[o].d(r);r&&p(i)}}}function ei(a,t){let e,i,s;function n(){return t[47](t[69])}function l(){return t[48](t[69])}return i=new qi({props:{square:t[69].square,name:t[69].name,duration:t[2].state.draggable.transition.settings.duration,easing:t[2].state.draggable.transition.settings.easing,whiteToMove:t[2].state.legal.whiteToMove,movable:t[2].state.movable,getGridCoordsFromSquare:t[2].getGridCoordsFromSquare,flipped:t[2].state.board.flipped}}),i.$on("move",t[11]),i.$on("clicked",n),i.$on("startMoving",l),i.$on("moving",t[12]),i.$on("endDragging",t[49]),i.$on("animationEnded",t[13]),{key:a,first:null,c(){e=ne(),De(i.$$.fragment),this.h()},l(r){e=ne(),Ve(i.$$.fragment,r),this.h()},h(){this.first=e},m(r,o){z(r,e,o),Ne(i,r,o),s=!0},p(r,o){t=r;const u={};o[0]&4&&(u.square=t[69].square),o[0]&4&&(u.name=t[69].name),o[0]&4&&(u.duration=t[2].state.draggable.transition.settings.duration),o[0]&4&&(u.easing=t[2].state.draggable.transition.settings.easing),o[0]&4&&(u.whiteToMove=t[2].state.legal.whiteToMove),o[0]&4&&(u.movable=t[2].state.movable),o[0]&4&&(u.getGridCoordsFromSquare=t[2].getGridCoordsFromSquare),o[0]&4&&(u.flipped=t[2].state.board.flipped),i.$set(u)},i(r){s||(W(i.$$.fragment,r),s=!0)},o(r){Q(i.$$.fragment,r),s=!1},d(r){r&&p(e),Ue(i,r)}}}function ti(a){let t,e;return t=new qi({props:{ghostPiece:!0,duration:0,square:a[2].state.draggable.ghostPiece.piece.square,name:a[2].state.draggable.ghostPiece.piece.name,movable:new Oi(!1),getGridCoordsFromSquare:a[2].getGridCoordsFromSquare,flipped:a[2].state.board.flipped}}),{c(){De(t.$$.fragment)},l(i){Ve(t.$$.fragment,i)},m(i,s){Ne(t,i,s),e=!0},p(i,s){const n={};s[0]&4&&(n.square=i[2].state.draggable.ghostPiece.piece.square),s[0]&4&&(n.name=i[2].state.draggable.ghostPiece.piece.name),s[0]&4&&(n.getGridCoordsFromSquare=i[2].getGridCoordsFromSquare),s[0]&4&&(n.flipped=i[2].state.board.flipped),t.$set(n)},i(i){e||(W(t.$$.fragment,i),e=!0)},o(i){Q(t.$$.fragment,i),e=!1},d(i){Ue(t,i)}}}function Zl(a){let t=[],e=new Map,i,s,n=[...a[2].state.markedSquares];const l=r=>r[66];for(let r=0;r<n.length;r+=1){let o=Za(a,n,r),u=l(o);e.set(u,t[r]=si(u,o))}return{c(){for(let r=0;r<t.length;r+=1)t[r].c();i=ne()},l(r){for(let o=0;o<t.length;o+=1)t[o].l(r);i=ne()},m(r,o){for(let u=0;u<t.length;u+=1)t[u].m(r,o);z(r,i,o),s=!0},p(r,o){o[0]&5&&(n=[...r[2].state.markedSquares],qe(),t=Ai(t,o,l,1,r,n,e,i.parentNode,Pi,si,i,Za),Re())},i(r){if(!s){for(let o=0;o<n.length;o+=1)W(t[o]);s=!0}},o(r){for(let o=0;o<t.length;o+=1)Q(t[o]);s=!1},d(r){for(let o=0;o<t.length;o+=1)t[o].d(r);r&&p(i)}}}function si(a,t){let e,i,s;return i=new Sl({props:{theme:t[2].state.board.boardTheme,square:t[66].square,color:t[66].color,getGridCoordsFromSquare:t[2].getGridCoordsFromSquare,flipped:t[2].state.board.flipped}}),i.$on("dragenter",t[50]),{key:a,first:null,c(){e=ne(),De(i.$$.fragment),this.h()},l(n){e=ne(),Ve(i.$$.fragment,n),this.h()},h(){this.first=e},m(n,l){z(n,e,l),Ne(i,n,l),s=!0},p(n,l){t=n;const r={};l[0]&4&&(r.theme=t[2].state.board.boardTheme),l[0]&4&&(r.square=t[66].square),l[0]&4&&(r.color=t[66].color),l[0]&4&&(r.getGridCoordsFromSquare=t[2].getGridCoordsFromSquare),l[0]&4&&(r.flipped=t[2].state.board.flipped),i.$set(r)},i(n){s||(W(i.$$.fragment,n),s=!0)},o(n){Q(i.$$.fragment,n),s=!1},d(n){n&&p(e),Ue(i,n)}}}function ai(a){let t,e;return t=new In({props:{theme:a[2].state.board.boardTheme,flipped:a[2].state.board.flipped}}),{c(){De(t.$$.fragment)},l(i){Ve(t.$$.fragment,i)},m(i,s){Ne(t,i,s),e=!0},p(i,s){const n={};s[0]&4&&(n.theme=i[2].state.board.boardTheme),s[0]&4&&(n.flipped=i[2].state.board.flipped),t.$set(n)},i(i){e||(W(t.$$.fragment,i),e=!0)},o(i){Q(t.$$.fragment,i),e=!1},d(i){Ue(t,i)}}}function ii(a){let t,e;return t=new xl({props:{chessboard:a[2],setSize:a[1]}}),{c(){De(t.$$.fragment)},l(i){Ve(t.$$.fragment,i)},m(i,s){Ne(t,i,s),e=!0},p(i,s){const n={};s[0]&4&&(n.chessboard=i[2]),t.$set(n)},i(i){e||(W(t.$$.fragment,i),e=!0)},o(i){Q(t.$$.fragment,i),e=!1},d(i){Ue(t,i)}}}function ni(a){let t,e,i;function s(l){a[51](l)}let n={flipped:a[2].state.board.flipped,computerArrows:a[7],LshapeKnightMove:a[2].state.drawTools.settings.LshapeKnightMove};return a[4]!==void 0&&(n.svg=a[4]),t=new Fl({props:n}),Pe.push(()=>Ws(t,"svg",s)),{c(){De(t.$$.fragment)},l(l){Ve(t.$$.fragment,l)},m(l,r){Ne(t,l,r),i=!0},p(l,r){const o={};r[0]&4&&(o.flipped=l[2].state.board.flipped),r[0]&128&&(o.computerArrows=l[7]),r[0]&4&&(o.LshapeKnightMove=l[2].state.drawTools.settings.LshapeKnightMove),!e&&r[0]&16&&(e=!0,o.svg=l[4],js(()=>e=!1)),t.$set(o)},i(l){i||(W(t.$$.fragment,l),i=!0)},o(l){Q(t.$$.fragment,l),i=!1},d(l){Ue(t,l)}}}function li(a){let t,e,i={};return t=new Ul({props:i}),a[52](t),t.$on("newPromotion",a[15]),{c(){De(t.$$.fragment)},l(s){Ve(t.$$.fragment,s)},m(s,n){Ne(t,s,n),e=!0},p(s,n){const l={};t.$set(l)},i(s){e||(W(t.$$.fragment,s),e=!0)},o(s){Q(t.$$.fragment,s),e=!1},d(s){a[52](null),Ue(t,s)}}}function ri(a){let t,e,i={settings:a[2].state.sounds.settings};return t=new Gl({props:i}),a[57](t),{c(){De(t.$$.fragment)},l(s){Ve(t.$$.fragment,s)},m(s,n){Ne(t,s,n),e=!0},p(s,n){const l={};n[0]&4&&(l.settings=s[2].state.sounds.settings),t.$set(l)},i(s){e||(W(t.$$.fragment,s),e=!0)},o(s){Q(t.$$.fragment,s),e=!1},d(s){a[57](null),Ue(t,s)}}}function Jl(a){let t,e,i,s,n=a[9](),l,r,o,u,f,b,v,_,O,L,y,E,c=a[2].state.board.startFen&&$a(a),g=a[2].state.draggable.ghostPiece.enabled&&a[2].state.draggable.ghostPiece.piece!==void 0&&ti(a),P=n&&Zl(a),w=a[2].state.board.notation&&ai(a),A=a[2].state.resizible.enabled&&ii(a),I=a[2].state.drawTools.enabled&&ni(a),R=a[2].state.legal.enabled&&li(a),T=a[2].state.sounds.enabled&&ri(a);return{c(){t=k("div"),e=k("div"),c&&c.c(),i=V(),g&&g.c(),s=V(),P&&P.c(),l=V(),w&&w.c(),r=V(),A&&A.c(),o=V(),I&&I.c(),u=V(),R&&R.c(),_=V(),T&&T.c(),O=ne(),this.h()},l(S){t=M(S,"DIV",{class:!0,style:!0});var F=C(t);e=M(F,"DIV",{class:!0});var Y=C(e);c&&c.l(Y),Y.forEach(p),i=N(F),g&&g.l(F),s=N(F),P&&P.l(F),l=N(F),w&&w.l(F),r=N(F),A&&A.l(F),o=N(F),I&&I.l(F),u=N(F),R&&R.l(F),F.forEach(p),_=N(S),T&&T.l(S),O=ne(),this.h()},h(){d(e,"class","noselect h-full w-full"),d(t,"class",f="noselect lg:rounded board text-xs"+(a[2].state.board.shadow?" shadow-lg":"")+" sm:text-sm svelte-wzcws1"),ie(t,"--boardTheme","url("+(a[2].state.board.boardTheme==="standard"?Qa:xa)+")"),Kt(()=>a[56].call(t))},m(S,F){z(S,t,F),h(t,e),c&&c.m(e,null),h(t,i),g&&g.m(t,null),h(t,s),P&&P.m(t,null),h(t,l),w&&w.m(t,null),h(t,r),A&&A.m(t,null),h(t,o),I&&I.m(t,null),h(t,u),R&&R.m(t,null),a[55](t),v=Zi(t,a[56].bind(t)),z(S,_,F),T&&T.m(S,F),z(S,O,F),L=!0,y||(E=[X(t,"pointerdown",a[10]),X(t,"contextmenu",ya(a[45])),X(t,"drag",ya(a[46])),$s(b=Tl.call(null,t,{svg:a[4],flipped:a[2].state.board.flipped,enabled:a[2].state.drawTools.enabled,settings:a[2].state.drawTools.settings})),X(t,"drawCircle",a[53]),X(t,"drawArrow",a[54])],y=!0)},p(S,F){S[2].state.board.startFen?c?(c.p(S,F),F[0]&4&&W(c,1)):(c=$a(S),c.c(),W(c,1),c.m(e,null)):c&&(qe(),Q(c,1,1,()=>{c=null}),Re()),S[2].state.draggable.ghostPiece.enabled&&S[2].state.draggable.ghostPiece.piece!==void 0?g?(g.p(S,F),F[0]&4&&W(g,1)):(g=ti(S),g.c(),W(g,1),g.m(t,s)):g&&(qe(),Q(g,1,1,()=>{g=null}),Re()),n&&P.p(S,F),S[2].state.board.notation?w?(w.p(S,F),F[0]&4&&W(w,1)):(w=ai(S),w.c(),W(w,1),w.m(t,r)):w&&(qe(),Q(w,1,1,()=>{w=null}),Re()),S[2].state.resizible.enabled?A?(A.p(S,F),F[0]&4&&W(A,1)):(A=ii(S),A.c(),W(A,1),A.m(t,o)):A&&(qe(),Q(A,1,1,()=>{A=null}),Re()),S[2].state.drawTools.enabled?I?(I.p(S,F),F[0]&4&&W(I,1)):(I=ni(S),I.c(),W(I,1),I.m(t,u)):I&&(qe(),Q(I,1,1,()=>{I=null}),Re()),S[2].state.legal.enabled?R?(R.p(S,F),F[0]&4&&W(R,1)):(R=li(S),R.c(),W(R,1),R.m(t,null)):R&&(qe(),Q(R,1,1,()=>{R=null}),Re()),(!L||F[0]&4&&f!==(f="noselect lg:rounded board text-xs"+(S[2].state.board.shadow?" shadow-lg":"")+" sm:text-sm svelte-wzcws1"))&&d(t,"class",f),(!L||F[0]&4)&&ie(t,"--boardTheme","url("+(S[2].state.board.boardTheme==="standard"?Qa:xa)+")"),b&&ea(b.update)&&F[0]&20&&b.update.call(null,{svg:S[4],flipped:S[2].state.board.flipped,enabled:S[2].state.drawTools.enabled,settings:S[2].state.drawTools.settings}),S[2].state.sounds.enabled?T?(T.p(S,F),F[0]&4&&W(T,1)):(T=ri(S),T.c(),W(T,1),T.m(O.parentNode,O)):T&&(qe(),Q(T,1,1,()=>{T=null}),Re())},i(S){L||(W(c),W(g),W(P),W(w),W(A),W(I),W(R),W(T),L=!0)},o(S){Q(c),Q(g),Q(P),Q(w),Q(A),Q(I),Q(R),Q(T),L=!1},d(S){S&&p(t),c&&c.d(),g&&g.d(),P&&P.d(),w&&w.d(),A&&A.d(),I&&I.d(),R&&R.d(),a[55](null),v(),S&&p(_),T&&T.d(S),S&&p(O),y=!1,At(E)}}}function $l(a,t,e){let{config:i}=t;const s=new Mn(i),n=ta();let l,r,o,u,f="";Ji(()=>{document.documentElement.hasAttribute("style")&&s.state.resizible.enabled&&document.documentElement.removeAttribute("style")});let b=[],v={[ee.WHITE]:"",[ee.BLACK]:""};const _=m=>{s.clearAllSquares(m),m===q.LEGAL&&s.clearAllSquares(q.LEGALHOVER),m===q.PREMOVE&&s.clearAllSquares(q.PREMOVEHOVER),e(2,s)},O=(m,U)=>{s.highlightSquare(m,U),e(2,s)},L=m=>s.state.highlight.enabled&&(m===void 0||s.state.highlight.settings[m]),y=m=>{_(q.CHECK),m!==void 0&&L("check")&&O(v[m],q.CHECK),e(2,s)},E=m=>{s.flipBoard(m),e(2,s)},c=(m,U)=>{m.forEach(J=>s.highlightSquare(J,U)),e(2,s)},g=(m,U=q.MOVE)=>{m.length<4||c([m.substring(0,2),m.substring(2,4)],U)},P=(m,U=q.MOVE)=>{const J=[];m.forEach(se=>{se.length<4||(J.push(se.substring(0,2)),J.push(se.substring(2,4)))}),c(J,U)},w=m=>{O(m.substring(2,4),q.LEGAL)},A=m=>{_(q.LEGAL),P(m,q.LEGAL)},I=(m,U=!0)=>{s.makeMove(m),U&&(_(q.MOVE),L("move")&&g(m)),e(2,s)},R=m=>{s.removePiece(m),e(2,s)},T=m=>m[0]==="w"?ee.WHITE:ee.BLACK,S=()=>s.state.movable.enabled&&(s.state.movable.color===ee.BOTH||s.state.legal.whiteToMove&&s.state.movable.color===T("w")||!s.state.legal.whiteToMove&&s.state.movable.color===T("b")),F=()=>{!s.state.legal.enabled||(s.state.callbacks.getWhiteToMove&&e(2,s.state.legal.whiteToMove=s.state.callbacks.getWhiteToMove(),s),s.state.callbacks.getPreMoves&&!S()&&s.state.legal.preMoves.enabled?e(2,s.state.legal.preMoves.moves=s.state.callbacks.getPreMoves(),s):e(2,s.state.legal.preMoves.moves.length=0,s),s.state.callbacks.getLegalMoves&&S()?e(2,s.state.legal.moves=s.state.callbacks.getLegalMoves(),s):e(2,s.state.legal.moves.length=0,s),S()&&s.state.selectable.selectedPiece!==void 0&&s.state.legal.preMoves.enabled&&(_(q.PREMOVE),_(q.LEGAL),L("legal")&&s.state.legal.moves.forEach(m=>{s.state.selectable.selectedPiece&&m.substring(0,2)===s.state.selectable.selectedPiece.square&&O(m.substring(2,4),q.LEGAL)})),s.state.callbacks.getKingLocations&&(v=s.state.callbacks.getKingLocations()),s.state.callbacks.getInCheck&&y(s.state.callbacks.getInCheck()))},Y=m=>{if(m.substring(0,2)===m.substring(2,4))return;s.state.callbacks.beforeMove&&s.state.callbacks.beforeMove(m),_(q.LEGAL),_(q.SELECT);const U=s.getRookMoveIfIsCastling(m),J=s.getCapturedPawnSquareIfIsEnPassant(m);if(U&&s.state.legal.enabled&&s.state.legal.settings.allowCastling?(I(U,!1),o.playMoveSound("CASTLE")):J&&s.state.legal.enabled&&s.state.legal.settings.allowEnPassant?(R(J),o.playMoveSound("CAPTURE")):s.isCapture(m)?o.playMoveSound("CAPTURE"):o.playMoveSound("MOVE"),s.removeGhostPiece(),e(2,s),I(m),s.state.callbacks.afterMove&&s.state.callbacks.afterMove(m),F(),s.state.legal.enabled&&s.state.legal.preMoves.enabled&&s.state.legal.preMoves.curMove!==""){if(s.state.legal.moves.includes(s.state.legal.preMoves.curMove)||s.state.legal.moves.includes(`${s.state.legal.preMoves.curMove}q`)){const se=s.state.legal.preMoves.curMove;e(2,s.state.legal.preMoves.curMove="",s),$i().then(()=>{Y(se)})}_(q.NEXTMOVE)}},ce=m=>{!s.state.legal.enabled||!s.state.legal.preMoves.enabled||!s.state.movable.enabled||(_(q.PREMOVE),_(q.NEXTMOVE),s.state.highlight.enabled&&s.state.highlight.settings.nextMove&&g(m,q.NEXTMOVE),e(2,s.state.legal.preMoves.curMove=m,s),n("nextMove",{move:m}))},te=m=>{u.openPromotionModal(!0),f=m,s.makeMove(m),_(q.LEGAL),_(q.SELECT),_(q.MOVE),g(m)},Ce=(m,U)=>{s.clearSquare(m,U),e(2,s)},Le=()=>{s.clearAllPieces(),e(2,s)},D=(m,U)=>{s.setPiece(m,U),e(2,s)},H=(m,U)=>{var se;const J=(se=s.getPieceFromSquare(m))==null?void 0:se.name;!J||(U!==void 0?s.setPiece(m,`${U===ee.WHITE?"w":"b"}${J[1]}`):s.setPiece(m,`${J[0]==="w"?"b":"w"}${J[1]}`),e(2,s))},K=(m,U)=>{const J=Math.floor(m/s.state.board.size*8),se=Math.floor(U/s.state.board.size*8),oe=s.state.board.flipped?Math.abs(J-7):J,ae=s.state.board.flipped?se:Math.abs(se-7);return Object.keys(s.letters)[oe]+(ae+1).toString()},Z=m=>s.state.movable.enabled?!!(s.state.legal.enabled&&s.state.legal.preMoves.enabled&&(s.state.movable.color===ee.BOTH||s.state.movable.color===T(m))||s.state.movable.color===ee.BOTH||s.state.movable.color===T(m)):!1,le=m=>{if(m.button===2){_(),e(2,s.state.selectable.selectedPiece=void 0,s);return}const U=l.getBoundingClientRect(),J=m.clientX-U.left,se=m.clientY-U.top,oe=K(J,se),ae=s.getPieceFromSquare(oe);if(n("squareClick",{square:oe,piece:ae?ae.name:void 0}),!s.state.legal.enabled||!s.state.selectable.enabled){e(2,s.state.selectable.selectedPiece=void 0,s);return}if(s.state.selectable.selectedPiece!==void 0&&s.state.selectable.selectedPiece.square!==oe&&!s.state.legal.enabled){Y(s.state.selectable.selectedPiece.square+oe),e(2,s.state.selectable.selectedPiece=void 0,s);return}if(s.state.selectable.selectedPiece!==void 0&&s.state.selectable.selectedPiece.square!==oe&&(ae===void 0||ae.name[0]!==s.state.selectable.selectedPiece.name[0])){s.isPromotion(s.state.selectable.selectedPiece.square+oe)&&s.state.legal.moves.includes(`${s.state.selectable.selectedPiece.square+oe}q`)?te(s.state.selectable.selectedPiece.square+oe):s.state.legal.moves.includes(s.state.selectable.selectedPiece.square+oe)?Y(s.state.selectable.selectedPiece.square+oe):s.state.legal.preMoves.enabled&&s.state.legal.preMoves.moves.includes(s.state.selectable.selectedPiece.square+oe)?ce(s.state.selectable.selectedPiece.square+oe):(_(q.LEGAL),_(q.PREMOVE),_(q.SELECT)),e(2,s.state.selectable.selectedPiece=void 0,s);return}if(s.state.selectable.selectedPiece!==ae&&ae!==void 0&&s.state.movable.enabled&&(s.state.movable.color===ee.BOTH||s.state.movable.color===T(ae.name))){L("legal")&&s.state.legal&&S()&&(_(q.LEGAL),s.state.legal.moves.forEach(Me=>{Me.substring(0,2)===oe&&O(Me.substring(2,4),q.LEGAL)})),L("preMove")&&s.state.legal.enabled&&s.state.legal.preMoves.enabled&&s.state.movable.color!==ee.BOTH&&!S()&&(_(q.PREMOVE),s.state.highlight.enabled&&s.state.highlight.settings.preMove&&s.state.legal.preMoves.moves.forEach(Me=>{Me.substring(0,2)===oe&&O(Me.substring(2,4),q.PREMOVE)})),L("select")&&(s.state.legal.enabled&&Z(ae.name[0])||!s.state.legal.enabled)&&(_(q.SELECT),O(oe,q.SELECT)),(s.state.legal.enabled&&Z(ae.name[0])||!s.state.legal.enabled)&&e(2,s.state.selectable.selectedPiece=ae,s);return}s.state.selectable.selectedPiece!==void 0&&s.state.selectable.selectedPiece===ae&&(_(q.LEGAL),_(q.PREMOVE),_(q.SELECT),e(2,s.state.selectable.selectedPiece=void 0,s))},re=m=>{const U=m.detail;if(U.substring(0,2)===U.substring(2,4)){O(U.substring(0,2),q.SELECT),e(2,s);return}s.state.legal.enabled?s.isPromotion(U)&&s.state.legal.moves.includes(`${U}q`)?te(U):s.state.legal.moves.includes(U)?Y(U):s.state.legal.preMoves.enabled&&s.state.legal.preMoves.moves.includes(U)&&ce(U):Y(U),_(q.LEGAL),_(q.PREMOVE),e(2,s)},_e=(m,U="MOVE")=>{if(s.updatePiecesWithFen(m),_(),s.removeGhostPiece(),F(),s.state.callbacks.getLastMove){const J=s.state.callbacks.getLastMove();U!=="MOVE"?o.playMoveSound(U):s.isCastling(J)?o.playMoveSound("CASTLE"):o.playMoveSound(U),g(J)}else o.playMoveSound(U);e(2,s),e(2,s)},Ee=()=>s.getShortFEN(),Se=m=>{!m||s.state.board.size===m||(e(2,s.state.board.size=m,s),s.state.resizible.enabled&&document.documentElement.style.setProperty("--boardSize",`${s.state.board.size}px`))},Ke=m=>{var U;return(U=s.getPieceFromSquare(m))==null?void 0:U.name},we=m=>{e(7,b=m)},We=()=>{e(7,b.length=0,b)},ke=()=>{F()},ye=m=>{m===!1?e(2,s.state.movable.enabled=!1,s):(e(2,s.state.movable.enabled=!0,s),e(2,s.state.movable.color=m===!0?ee.BOTH:m,s))},de=m=>{m!==void 0&&(s.setConfigSettings(m),e(2,s))},ht=()=>s.state,Ae=m=>{e(2,s.state=m,s)},Rt=m=>m.getConfig(),Dt=m=>{const U=l.getBoundingClientRect();s.state.legal.enabled&&(S()&&s.legalHover(K(m.detail.x-U.x,m.detail.y-U.y)),!S()&&s.state.legal.preMoves.enabled&&s.preMoveHover(K(m.detail.x-U.x,m.detail.y-U.y))),e(2,s)},Vt=m=>{s.setGhostPiece(m),e(2,s)},je=()=>{s.removeGhostPiece(),e(2,s)},Pt=m=>{s.state.draggable.ghostPiece&&Vt(m),_(q.SELECT),s.state.selectable.selectedPiece===void 0&&L("legal")&&s.state.legal.moves.forEach(U=>{U.substring(0,2)===m.square&&O(U.substring(2,4),q.LEGAL)})},lt=m=>{const U=s.getPieceFromSquare(f.substring(2,4));if(!U)return;const J=U.name[0]+m.detail.toUpperCase(),se=f+m.detail;s.state.callbacks.beforeMove&&s.state.callbacks.beforeMove(se),s.setPiece(U.square,J),e(2,s),o.playMoveSound("MOVE"),s.state.callbacks.afterMove&&s.state.callbacks.afterMove(se),F()};sa(()=>{F(),s.state.callbacks.getLastMove&&g(s.state.callbacks.getLastMove()),s.state.resizible&&Se(s.state.board.size-s.state.board.size%8)});function Ge(m){St.call(this,a,m)}function Oe(m){St.call(this,a,m)}const Nt=m=>{n("piececlick",{piece:m})},Xe=m=>{n("startDragging",{piece:m}),Pt(m)},Ut=()=>{n("endDragging"),e(2,s.state.selectable.selectedPiece=void 0,s)},Bt=m=>{O(m.detail.square,q.LEGALHOVER)};function Ye(m){r=m,e(4,r)}function zt(m){Pe[m?"unshift":"push"](()=>{u=m,e(6,u)})}const Ie=m=>n("drawCircle",{square:m.detail.square,color:m.detail.color}),Qe=m=>n("drawArrow",{move:m.detail.move,color:m.detail.color});function Fe(m){Pe[m?"unshift":"push"](()=>{l=m,e(3,l)})}function Ht(){s.state.board.size=this.clientWidth,e(2,s)}function xe(m){Pe[m?"unshift":"push"](()=>{o=m,e(5,o)})}return a.$$set=m=>{"config"in m&&e(16,i=m.config)},a.$$.update=()=>{a.$$.dirty[0]&4&&Se(s.state.board.size-s.state.board.size%8)},[O,Se,s,l,r,o,u,b,n,L,le,re,Dt,je,Pt,lt,i,_,E,c,g,P,w,A,I,R,Y,ce,te,Ce,Le,D,H,K,_e,Ee,Ke,we,We,ke,ye,de,ht,Ae,Rt,Ge,Oe,Nt,Xe,Ut,Bt,Ye,zt,Ie,Qe,Fe,Ht,xe]}class er extends Be{constructor(t){super(),ze(this,t,$l,Jl,He,{config:16,clearAllSquares:17,highlightSquare:0,flipBoard:18,highlightManySquares:19,highlightMove:20,highlightManyMoves:21,highlightLegalMove:22,highlightLegalMoves:23,movePiece:24,removePiece:25,makeMove:26,makeNextMove:27,makeMovePromotion:28,removeSquareHighlight:29,removeAllPiece:30,createPiece:31,changeColorOfPiece:32,getSquareFromCoords:33,setFEN:34,getShortFEN:35,setSize:1,getPieceFromSquare:36,setComputerArrows:37,removeComputerArrows:38,updateLegalState:39,setMovableColor:40,setConfigSettings:41,getState:42,setState:43,getConfigFromState:44},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[17]}get highlightSquare(){return this.$$.ctx[0]}get flipBoard(){return this.$$.ctx[18]}get highlightManySquares(){return this.$$.ctx[19]}get highlightMove(){return this.$$.ctx[20]}get highlightManyMoves(){return this.$$.ctx[21]}get highlightLegalMove(){return this.$$.ctx[22]}get highlightLegalMoves(){return this.$$.ctx[23]}get movePiece(){return this.$$.ctx[24]}get removePiece(){return this.$$.ctx[25]}get makeMove(){return this.$$.ctx[26]}get makeNextMove(){return this.$$.ctx[27]}get makeMovePromotion(){return this.$$.ctx[28]}get removeSquareHighlight(){return this.$$.ctx[29]}get removeAllPiece(){return this.$$.ctx[30]}get createPiece(){return this.$$.ctx[31]}get changeColorOfPiece(){return this.$$.ctx[32]}get getSquareFromCoords(){return this.$$.ctx[33]}get setFEN(){return this.$$.ctx[34]}get getShortFEN(){return this.$$.ctx[35]}get setSize(){return this.$$.ctx[1]}get getPieceFromSquare(){return this.$$.ctx[36]}get setComputerArrows(){return this.$$.ctx[37]}get removeComputerArrows(){return this.$$.ctx[38]}get updateLegalState(){return this.$$.ctx[39]}get setMovableColor(){return this.$$.ctx[40]}get setConfigSettings(){return this.$$.ctx[41]}get getState(){return this.$$.ctx[42]}get setState(){return this.$$.ctx[43]}get getConfigFromState(){return this.$$.ctx[44]}}const oi=["standard","darkBlue"],ui=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function ci(a,t,e){const i=a.slice();return i[31]=t[e],i[32]=t,i[33]=e,i}function di(a,t,e){const i=a.slice();return i[34]=t[e],i[35]=t,i[36]=e,i}function hi(a,t,e){const i=a.slice();return i[37]=t[e],i}function fi(a,t,e){const i=a.slice();return i[40]=t[e],i}function gi(a){let t,e=a[40]+"",i;return{c(){t=k("option"),i=j(e),this.h()},l(s){t=M(s,"OPTION",{});var n=C(t);i=G(n,e),n.forEach(p),this.h()},h(){t.__value=a[40],t.value=t.__value},m(s,n){z(s,t,n),h(t,i)},p:ue,d(s){s&&p(t)}}}function bi(a){let t,e,i,s,n,l,r,o,u,f;return{c(){t=k("div"),e=k("select"),i=k("option"),s=j("Both"),n=k("option"),l=j("White"),r=k("option"),o=j("Black"),this.h()},l(b){t=M(b,"DIV",{});var v=C(t);e=M(v,"SELECT",{class:!0});var _=C(e);i=M(_,"OPTION",{});var O=C(i);s=G(O,"Both"),O.forEach(p),n=M(_,"OPTION",{});var L=C(n);l=G(L,"White"),L.forEach(p),r=M(_,"OPTION",{});var y=C(r);o=G(y,"Black"),y.forEach(p),_.forEach(p),v.forEach(p),this.h()},h(){i.__value=ee.BOTH,i.value=i.__value,n.__value=ee.WHITE,n.value=n.__value,r.__value=ee.BLACK,r.value=r.__value,d(e,"class","svelte-1q80l21"),a[0].movable.color===void 0&&Kt(()=>a[11].call(e))},m(b,v){z(b,t,v),h(t,e),h(e,i),h(i,s),h(e,n),h(n,l),h(e,r),h(r,o),qt(e,a[0].movable.color),u||(f=X(e,"change",a[11]),u=!0)},p(b,v){v[0]&1&&qt(e,b[0].movable.color)},d(b){b&&p(t),u=!1,f()}}}function pi(a){let t,e,i,s,n,l,r,o,u,f,b,v,_,O,L,y=a[0].draggable.transition.enabled&&vi(a);return{c(){t=k("div"),e=k("input"),i=V(),s=k("label"),n=j("ghost piece"),l=V(),r=k("div"),o=k("input"),u=V(),f=k("label"),b=j("transition enabled"),v=V(),y&&y.c(),_=ne(),this.h()},l(E){t=M(E,"DIV",{});var c=C(t);e=M(c,"INPUT",{id:!0,type:!0,class:!0}),i=N(c),s=M(c,"LABEL",{for:!0,class:!0});var g=C(s);n=G(g,"ghost piece"),g.forEach(p),c.forEach(p),l=N(E),r=M(E,"DIV",{});var P=C(r);o=M(P,"INPUT",{id:!0,type:!0,class:!0}),u=N(P),f=M(P,"LABEL",{for:!0,class:!0});var w=C(f);b=G(w,"transition enabled"),w.forEach(p),P.forEach(p),v=N(E),y&&y.l(E),_=ne(),this.h()},h(){d(e,"id","ghostPiece"),d(e,"type","checkbox"),d(e,"class","svelte-1q80l21"),d(s,"for","ghostPiece"),d(s,"class","select-none"),d(o,"id","draggableEnabled"),d(o,"type","checkbox"),d(o,"class","svelte-1q80l21"),d(f,"for","draggableEnabled"),d(f,"class","select-none")},m(E,c){z(E,t,c),h(t,e),e.checked=a[0].draggable.ghostPiece.enabled,h(t,i),h(t,s),h(s,n),z(E,l,c),z(E,r,c),h(r,o),o.checked=a[0].draggable.transition.enabled,h(r,u),h(r,f),h(f,b),z(E,v,c),y&&y.m(E,c),z(E,_,c),O||(L=[X(e,"change",a[13]),X(o,"change",a[14])],O=!0)},p(E,c){c[0]&1&&(e.checked=E[0].draggable.ghostPiece.enabled),c[0]&1&&(o.checked=E[0].draggable.transition.enabled),E[0].draggable.transition.enabled?y?y.p(E,c):(y=vi(E),y.c(),y.m(_.parentNode,_)):y&&(y.d(1),y=null)},d(E){E&&p(t),E&&p(l),E&&p(r),E&&p(v),y&&y.d(E),E&&p(_),O=!1,At(L)}}}function vi(a){let t,e,i,s,n,l,r,o,u,f,b,v,_,O=ui,L=[];for(let y=0;y<O.length;y+=1)L[y]=mi(hi(a,O,y));return{c(){t=k("div"),e=k("input"),i=V(),s=k("label"),n=j("duration"),l=V(),r=k("div"),o=k("label"),u=j("easing func"),f=V(),b=k("select");for(let y=0;y<L.length;y+=1)L[y].c();this.h()},l(y){t=M(y,"DIV",{});var E=C(t);e=M(E,"INPUT",{id:!0,type:!0,class:!0}),i=N(E),s=M(E,"LABEL",{for:!0,class:!0});var c=C(s);n=G(c,"duration"),c.forEach(p),E.forEach(p),l=N(y),r=M(y,"DIV",{});var g=C(r);o=M(g,"LABEL",{for:!0,class:!0});var P=C(o);u=G(P,"easing func"),P.forEach(p),f=N(g),b=M(g,"SELECT",{id:!0,class:!0});var w=C(b);for(let A=0;A<L.length;A+=1)L[A].l(w);w.forEach(p),g.forEach(p),this.h()},h(){d(e,"id","transitionDuration"),d(e,"type","number"),d(e,"class","svelte-1q80l21"),d(s,"for","transitionDuration"),d(s,"class","select-none"),d(o,"for","easingFuncs"),d(o,"class","select-none"),d(b,"id","easingFuncs"),d(b,"class","svelte-1q80l21"),a[0].draggable.transition.settings.easing===void 0&&Kt(()=>a[16].call(b))},m(y,E){z(y,t,E),h(t,e),Aa(e,a[0].draggable.transition.settings.duration),h(t,i),h(t,s),h(s,n),z(y,l,E),z(y,r,E),h(r,o),h(o,u),h(r,f),h(r,b);for(let c=0;c<L.length;c+=1)L[c].m(b,null);qt(b,a[0].draggable.transition.settings.easing),v||(_=[X(e,"input",a[15]),X(b,"change",a[16])],v=!0)},p(y,E){if(E[0]&1&&Ci(e.value)!==y[0].draggable.transition.settings.duration&&Aa(e,y[0].draggable.transition.settings.duration),E&0){O=ui;let c;for(c=0;c<O.length;c+=1){const g=hi(y,O,c);L[c]?L[c].p(g,E):(L[c]=mi(g),L[c].c(),L[c].m(b,null))}for(;c<L.length;c+=1)L[c].d(1);L.length=O.length}E[0]&1&&qt(b,y[0].draggable.transition.settings.easing)},d(y){y&&p(t),y&&p(l),y&&p(r),dt(L,y),v=!1,At(_)}}}function mi(a){let t,e=a[37]+"",i;return{c(){t=k("option"),i=j(e),this.h()},l(s){t=M(s,"OPTION",{});var n=C(t);i=G(n,e),n.forEach(p),this.h()},h(){t.__value=a[37],t.value=t.__value},m(s,n){z(s,t,n),h(t,i)},p:ue,d(s){s&&p(t)}}}function _i(a){let t,e,i,s,n,l,r;return{c(){t=k("div"),e=k("input"),i=V(),s=k("label"),n=j("preMoves enabled"),this.h()},l(o){t=M(o,"DIV",{});var u=C(t);e=M(u,"INPUT",{id:!0,type:!0,class:!0}),i=N(u),s=M(u,"LABEL",{for:!0,class:!0});var f=C(s);n=G(f,"preMoves enabled"),f.forEach(p),u.forEach(p),this.h()},h(){d(e,"id","preMovesEnabled"),d(e,"type","checkbox"),d(e,"class","svelte-1q80l21"),d(s,"for","preMovesEnabled"),d(s,"class","select-none")},m(o,u){z(o,t,u),h(t,e),e.checked=a[0].legal.preMoves.enabled,h(t,i),h(t,s),h(s,n),l||(r=X(e,"change",a[19]),l=!0)},p(o,u){u[0]&1&&(e.checked=o[0].legal.preMoves.enabled)},d(o){o&&p(t),l=!1,r()}}}function Ei(a){let t,e=a[4],i=[];for(let s=0;s<e.length;s+=1)i[s]=wi(di(a,e,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=ne()},l(s){for(let n=0;n<i.length;n+=1)i[n].l(s);t=ne()},m(s,n){for(let l=0;l<i.length;l+=1)i[l].m(s,n);z(s,t,n)},p(s,n){if(n[0]&17){e=s[4];let l;for(l=0;l<e.length;l+=1){const r=di(s,e,l);i[l]?i[l].p(r,n):(i[l]=wi(r),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=e.length}},d(s){dt(i,s),s&&p(t)}}}function wi(a){let t,e,i,s,n=a[34]+"",l,r,o,u;function f(){a[21].call(e,a[34])}return{c(){t=k("div"),e=k("input"),i=V(),s=k("label"),l=j(n),r=V(),this.h()},l(b){t=M(b,"DIV",{});var v=C(t);e=M(v,"INPUT",{id:!0,type:!0,class:!0}),i=N(v),s=M(v,"LABEL",{for:!0,class:!0});var _=C(s);l=G(_,n),_.forEach(p),r=N(v),v.forEach(p),this.h()},h(){d(e,"id",a[34]+"Enabled"),d(e,"type","checkbox"),d(e,"class","svelte-1q80l21"),d(s,"for",a[34]+"Enabled"),d(s,"class","select-none")},m(b,v){z(b,t,v),h(t,e),e.checked=a[0].highlight.settings[a[34]],h(t,i),h(t,s),h(s,l),h(t,r),o||(u=X(e,"change",f),o=!0)},p(b,v){a=b,v[0]&17&&(e.checked=a[0].highlight.settings[a[34]])},d(b){b&&p(t),o=!1,u()}}}function ki(a){let t,e,i,s,n,l,r,o,u,f,b,v,_;return{c(){t=k("div"),e=k("input"),i=V(),s=k("label"),n=j("L shape knight move"),l=V(),r=k("div"),o=k("input"),u=V(),f=k("label"),b=j("only chess move"),this.h()},l(O){t=M(O,"DIV",{});var L=C(t);e=M(L,"INPUT",{id:!0,type:!0,class:!0}),i=N(L),s=M(L,"LABEL",{for:!0,class:!0});var y=C(s);n=G(y,"L shape knight move"),y.forEach(p),L.forEach(p),l=N(O),r=M(O,"DIV",{});var E=C(r);o=M(E,"INPUT",{id:!0,type:!0,class:!0}),u=N(E),f=M(E,"LABEL",{for:!0,class:!0});var c=C(f);b=G(c,"only chess move"),c.forEach(p),E.forEach(p),this.h()},h(){d(e,"id","LshapeKnightMoveEnabled"),d(e,"type","checkbox"),d(e,"class","svelte-1q80l21"),d(s,"for","LshapeKnightMoveEnabled"),d(s,"class","select-none"),d(o,"id","onlyChessMoveEnabled"),d(o,"type","checkbox"),d(o,"class","svelte-1q80l21"),d(f,"for","onlyChessMoveEnabled"),d(f,"class","select-none")},m(O,L){z(O,t,L),h(t,e),e.checked=a[0].drawTools.settings.LshapeKnightMove,h(t,i),h(t,s),h(s,n),z(O,l,L),z(O,r,L),h(r,o),o.checked=a[0].drawTools.settings.onlyChessMove,h(r,u),h(r,f),h(f,b),v||(_=[X(e,"change",a[23]),X(o,"change",a[24])],v=!0)},p(O,L){L[0]&1&&(e.checked=O[0].drawTools.settings.LshapeKnightMove),L[0]&1&&(o.checked=O[0].drawTools.settings.onlyChessMove)},d(O){O&&p(t),O&&p(l),O&&p(r),v=!1,At(_)}}}function Mi(a){let t,e=a[5],i=[];for(let s=0;s<e.length;s+=1)i[s]=Si(ci(a,e,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=ne()},l(s){for(let n=0;n<i.length;n+=1)i[n].l(s);t=ne()},m(s,n){for(let l=0;l<i.length;l+=1)i[l].m(s,n);z(s,t,n)},p(s,n){if(n[0]&33){e=s[5];let l;for(l=0;l<e.length;l+=1){const r=ci(s,e,l);i[l]?i[l].p(r,n):(i[l]=Si(r),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=e.length}},d(s){dt(i,s),s&&p(t)}}}function Si(a){let t,e,i,s,n=a[31]+"",l,r,o,u;function f(){a[26].call(e,a[31])}return{c(){t=k("div"),e=k("input"),i=V(),s=k("label"),l=j(n),r=V(),this.h()},l(b){t=M(b,"DIV",{});var v=C(t);e=M(v,"INPUT",{id:!0,type:!0,class:!0}),i=N(v),s=M(v,"LABEL",{for:!0,class:!0});var _=C(s);l=G(_,n),_.forEach(p),r=N(v),v.forEach(p),this.h()},h(){d(e,"id",a[31]+"Enabled"),d(e,"type","checkbox"),d(e,"class","svelte-1q80l21"),d(s,"for",a[31]+"Enabled"),d(s,"class","select-none")},m(b,v){z(b,t,v),h(t,e),e.checked=a[0].sounds.settings[a[31]],h(t,i),h(t,s),h(s,l),h(t,r),o||(u=X(e,"change",f),o=!0)},p(b,v){a=b,v[0]&33&&(e.checked=a[0].sounds.settings[a[31]])},d(b){b&&p(t),o=!1,u()}}}function tr(a){let t,e,i,s,n,l,r,o,u,f,b,v,_,O,L,y,E,c,g,P,w,A,I,R,T,S,F,Y,ce,te,Ce,Le,D,H,K,Z,le,re,_e,Ee,Se,Ke,we,We,ke,ye,de,ht,Ae,Rt,Dt,Vt,je,Pt,lt,Ge,Oe,Nt,Xe,Ut,Bt,Ye,zt,Ie,Qe,Fe,Ht,xe,m,U,J,se,oe,ae,Me,Ze,gs,ft,bs,ps,vs,gt,ms,Je,bt,$e,_s,pt,Es,ws,ks,vt,Ms,et,mt,tt,Ss,_t,ys,As,Ps,Et,Cs,Ct,wt,st,Ls,kt,Ts,Os,rt,Lt,at,Is,Tt,Ot,ot,Wt,Fs,aa,It=oi,he=[];for(let B=0;B<It.length;B+=1)he[B]=gi(fi(a,It,B));let fe=a[0].movable.enabled&&bi(a),ge=a[0].draggable.enabled&&pi(a),be=a[0].legal.enabled&&_i(a),pe=a[0].highlight.enabled&&Ei(a),ve=a[0].drawTools.enabled&&ki(a),me=a[0].sounds.enabled&&Mi(a),Ni={config:a[3]};return at=new er({props:Ni}),a[28](at),ot=new on({props:{source:a[2]}}),{c(){t=k("link"),e=V(),i=k("div"),s=k("div"),n=k("div"),l=k("div"),r=j(`board
				`),o=k("div"),u=k("div"),f=k("label"),b=j("board theme"),v=V(),_=k("select");for(let B=0;B<he.length;B+=1)he[B].c();O=V(),L=k("div"),y=k("input"),E=V(),c=k("label"),g=j("notation"),P=V(),w=k("div"),A=k("input"),I=V(),R=k("label"),T=j("flipped"),S=V(),F=k("div"),Y=k("input"),ce=V(),te=k("label"),Ce=j("shadow"),Le=V(),D=k("div"),H=j(`movable
				`),K=k("div"),Z=k("div"),le=k("input"),re=V(),_e=k("label"),Ee=j("enabled"),Se=V(),fe&&fe.c(),Ke=V(),we=k("div"),We=j(`draggable
				`),ke=k("div"),ye=k("div"),de=k("input"),ht=V(),Ae=k("label"),Rt=j("enabled"),Dt=V(),ge&&ge.c(),Vt=V(),je=k("div"),Pt=j(`selectable
				`),lt=k("div"),Ge=k("div"),Oe=k("input"),Nt=V(),Xe=k("label"),Ut=j("enabled"),Bt=V(),Ye=k("div"),zt=j(`legal
				`),Ie=k("div"),Qe=k("div"),Fe=k("input"),Ht=V(),xe=k("label"),m=j("enabled"),U=V(),be&&be.c(),J=V(),se=k("div"),oe=j(`highlight
				`),ae=k("div"),Me=k("div"),Ze=k("input"),gs=V(),ft=k("label"),bs=j("enabled"),ps=V(),pe&&pe.c(),vs=V(),gt=k("div"),ms=j(`drawTools
				`),Je=k("div"),bt=k("div"),$e=k("input"),_s=V(),pt=k("label"),Es=j("enabled"),ws=V(),ve&&ve.c(),ks=V(),vt=k("div"),Ms=j(`sounds
				`),et=k("div"),mt=k("div"),tt=k("input"),Ss=V(),_t=k("label"),ys=j("enabled"),As=V(),me&&me.c(),Ps=V(),Et=k("div"),Cs=j(`resizible
				`),Ct=k("div"),wt=k("div"),st=k("input"),Ls=V(),kt=k("label"),Ts=j("enabled"),Os=V(),rt=k("div"),Lt=k("div"),De(at.$$.fragment),Is=V(),Tt=k("div"),Ot=k("div"),De(ot.$$.fragment),this.h()},l(B){const $=en('[data-svelte="svelte-tebjht"]',document.head);t=M($,"LINK",{rel:!0,href:!0}),$.forEach(p),e=N(B),i=M(B,"DIV",{class:!0});var ut=C(i);s=M(ut,"DIV",{class:!0});var Mt=C(s);n=M(Mt,"DIV",{class:!0});var x=C(n);l=M(x,"DIV",{class:!0});var Ft=C(l);r=G(Ft,`board
				`),o=M(Ft,"DIV",{class:!0});var ct=C(o);u=M(ct,"DIV",{});var jt=C(u);f=M(jt,"LABEL",{for:!0,class:!0});var ia=C(f);b=G(ia,"board theme"),ia.forEach(p),v=N(jt),_=M(jt,"SELECT",{class:!0});var na=C(_);for(let Hs=0;Hs<he.length;Hs+=1)he[Hs].l(na);na.forEach(p),jt.forEach(p),O=N(ct),L=M(ct,"DIV",{});var Gt=C(L);y=M(Gt,"INPUT",{id:!0,type:!0,class:!0}),E=N(Gt),c=M(Gt,"LABEL",{for:!0,class:!0});var la=C(c);g=G(la,"notation"),la.forEach(p),Gt.forEach(p),P=N(ct),w=M(ct,"DIV",{});var Xt=C(w);A=M(Xt,"INPUT",{id:!0,type:!0,class:!0}),I=N(Xt),R=M(Xt,"LABEL",{for:!0,class:!0});var ra=C(R);T=G(ra,"flipped"),ra.forEach(p),Xt.forEach(p),S=N(ct),F=M(ct,"DIV",{});var Yt=C(F);Y=M(Yt,"INPUT",{id:!0,type:!0,class:!0}),ce=N(Yt),te=M(Yt,"LABEL",{for:!0,class:!0});var oa=C(te);Ce=G(oa,"shadow"),oa.forEach(p),Yt.forEach(p),ct.forEach(p),Ft.forEach(p),Le=N(x),D=M(x,"DIV",{class:!0});var qs=C(D);H=G(qs,`movable
				`),K=M(qs,"DIV",{class:!0});var Qt=C(K);Z=M(Qt,"DIV",{});var xt=C(Z);le=M(xt,"INPUT",{id:!0,type:!0,class:!0}),re=N(xt),_e=M(xt,"LABEL",{for:!0,class:!0});var ua=C(_e);Ee=G(ua,"enabled"),ua.forEach(p),xt.forEach(p),Se=N(Qt),fe&&fe.l(Qt),Qt.forEach(p),qs.forEach(p),Ke=N(x),we=M(x,"DIV",{class:!0});var Rs=C(we);We=G(Rs,`draggable
				`),ke=M(Rs,"DIV",{class:!0});var Zt=C(ke);ye=M(Zt,"DIV",{});var Jt=C(ye);de=M(Jt,"INPUT",{id:!0,type:!0,class:!0}),ht=N(Jt),Ae=M(Jt,"LABEL",{for:!0,class:!0});var ca=C(Ae);Rt=G(ca,"enabled"),ca.forEach(p),Jt.forEach(p),Dt=N(Zt),ge&&ge.l(Zt),Zt.forEach(p),Rs.forEach(p),Vt=N(x),je=M(x,"DIV",{class:!0});var Ds=C(je);Pt=G(Ds,`selectable
				`),lt=M(Ds,"DIV",{class:!0});var da=C(lt);Ge=M(da,"DIV",{});var $t=C(Ge);Oe=M($t,"INPUT",{id:!0,type:!0,class:!0}),Nt=N($t),Xe=M($t,"LABEL",{for:!0,class:!0});var ha=C(Xe);Ut=G(ha,"enabled"),ha.forEach(p),$t.forEach(p),da.forEach(p),Ds.forEach(p),Bt=N(x),Ye=M(x,"DIV",{class:!0});var Vs=C(Ye);zt=G(Vs,`legal
				`),Ie=M(Vs,"DIV",{class:!0});var es=C(Ie);Qe=M(es,"DIV",{});var ts=C(Qe);Fe=M(ts,"INPUT",{id:!0,type:!0,class:!0}),Ht=N(ts),xe=M(ts,"LABEL",{for:!0,class:!0});var fa=C(xe);m=G(fa,"enabled"),fa.forEach(p),ts.forEach(p),U=N(es),be&&be.l(es),es.forEach(p),Vs.forEach(p),J=N(x),se=M(x,"DIV",{class:!0});var Ns=C(se);oe=G(Ns,`highlight
				`),ae=M(Ns,"DIV",{class:!0});var ss=C(ae);Me=M(ss,"DIV",{});var as=C(Me);Ze=M(as,"INPUT",{id:!0,type:!0,class:!0}),gs=N(as),ft=M(as,"LABEL",{for:!0,class:!0});var ga=C(ft);bs=G(ga,"enabled"),ga.forEach(p),as.forEach(p),ps=N(ss),pe&&pe.l(ss),ss.forEach(p),Ns.forEach(p),vs=N(x),gt=M(x,"DIV",{class:!0});var Us=C(gt);ms=G(Us,`drawTools
				`),Je=M(Us,"DIV",{class:!0});var is=C(Je);bt=M(is,"DIV",{});var ns=C(bt);$e=M(ns,"INPUT",{id:!0,type:!0,class:!0}),_s=N(ns),pt=M(ns,"LABEL",{for:!0,class:!0});var ba=C(pt);Es=G(ba,"enabled"),ba.forEach(p),ns.forEach(p),ws=N(is),ve&&ve.l(is),is.forEach(p),Us.forEach(p),ks=N(x),vt=M(x,"DIV",{class:!0});var Bs=C(vt);Ms=G(Bs,`sounds
				`),et=M(Bs,"DIV",{class:!0});var ls=C(et);mt=M(ls,"DIV",{});var rs=C(mt);tt=M(rs,"INPUT",{id:!0,type:!0,class:!0}),Ss=N(rs),_t=M(rs,"LABEL",{for:!0,class:!0});var pa=C(_t);ys=G(pa,"enabled"),pa.forEach(p),rs.forEach(p),As=N(ls),me&&me.l(ls),ls.forEach(p),Bs.forEach(p),Ps=N(x),Et=M(x,"DIV",{class:!0});var zs=C(Et);Cs=G(zs,`resizible
				`),Ct=M(zs,"DIV",{class:!0});var va=C(Ct);wt=M(va,"DIV",{});var os=C(wt);st=M(os,"INPUT",{id:!0,type:!0,class:!0}),Ls=N(os),kt=M(os,"LABEL",{for:!0,class:!0});var ma=C(kt);Ts=G(ma,"enabled"),ma.forEach(p),os.forEach(p),va.forEach(p),zs.forEach(p),x.forEach(p),Os=N(Mt),rt=M(Mt,"DIV",{class:!0});var us=C(rt);Lt=M(us,"DIV",{class:!0});var _a=C(Lt);Ve(at.$$.fragment,_a),_a.forEach(p),Is=N(us),Tt=M(us,"DIV",{class:!0});var Ea=C(Tt);Ot=M(Ea,"DIV",{class:!0});var wa=C(Ot);Ve(ot.$$.fragment,wa),wa.forEach(p),Ea.forEach(p),us.forEach(p),Mt.forEach(p),ut.forEach(p),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",d(t,"rel","stylesheet"),d(t,"href","prism-one-dark.css"),d(f,"for","boardTheme"),d(f,"class","select-none"),d(_,"class","svelte-1q80l21"),a[0].board.boardTheme===void 0&&Kt(()=>a[6].call(_)),d(y,"id","notation"),d(y,"type","checkbox"),d(y,"class","svelte-1q80l21"),d(c,"for","notation"),d(c,"class","select-none"),d(A,"id","flipped"),d(A,"type","checkbox"),d(A,"class","svelte-1q80l21"),d(R,"for","flipped"),d(R,"class","select-none"),d(Y,"id","shadow"),d(Y,"type","checkbox"),d(Y,"class","svelte-1q80l21"),d(te,"for","shadow"),d(te,"class","select-none"),d(o,"class","p-2 pl-4"),d(l,"class","bg-slate-900/20 rounded shadow-lg p-2 pl-4 flex flex-col"),d(le,"id","movableEnabled"),d(le,"type","checkbox"),d(le,"class","svelte-1q80l21"),d(_e,"for","movableEnabled"),d(_e,"class","select-none"),d(K,"class","p-2 pl-4"),d(D,"class","bg-slate-900/20 rounded shadow-lg p-2 pl-4 flex flex-col"),d(de,"id","draggableEnabled"),d(de,"type","checkbox"),d(de,"class","svelte-1q80l21"),d(Ae,"for","draggableEnabled"),d(Ae,"class","select-none"),d(ke,"class","p-2 pl-4"),d(we,"class","bg-slate-900/20 rounded shadow-lg p-2 pl-4 flex flex-col"),d(Oe,"id","selectableEnabled"),d(Oe,"type","checkbox"),d(Oe,"class","svelte-1q80l21"),d(Xe,"for","selectableEnabled"),d(Xe,"class","select-none"),d(lt,"class","p-2 pl-4"),d(je,"class","bg-slate-900/20 rounded shadow-lg p-2 pl-4 flex flex-col"),d(Fe,"id","legalEnabled"),d(Fe,"type","checkbox"),d(Fe,"class","svelte-1q80l21"),d(xe,"for","legalEnabled"),d(xe,"class","select-none"),d(Ie,"class","p-2 pl-4"),d(Ye,"class","bg-slate-900/20 rounded shadow-lg p-2 pl-4 flex flex-col"),d(Ze,"id","highlightEnabled"),d(Ze,"type","checkbox"),d(Ze,"class","svelte-1q80l21"),d(ft,"for","highlightEnabled"),d(ft,"class","select-none"),d(ae,"class","p-2 pl-4"),d(se,"class","bg-slate-900/20 rounded shadow-lg p-2 pl-4 flex flex-col"),d($e,"id","drawToolsEnabled"),d($e,"type","checkbox"),d($e,"class","svelte-1q80l21"),d(pt,"for","drawToolsEnabled"),d(pt,"class","select-none"),d(Je,"class","p-2 pl-4"),d(gt,"class","bg-slate-900/20 rounded shadow-lg p-2 pl-4 flex flex-col"),d(tt,"id","soundsEnabled"),d(tt,"type","checkbox"),d(tt,"class","svelte-1q80l21"),d(_t,"for","soundsEnabled"),d(_t,"class","select-none"),d(et,"class","p-2 pl-4"),d(vt,"class","bg-slate-900/20 rounded shadow-lg p-2 pl-4 flex flex-col"),d(st,"id","resizibleEnabled"),d(st,"type","checkbox"),d(st,"class","svelte-1q80l21"),d(kt,"for","resizibleEnabled"),d(kt,"class","select-none"),d(Ct,"class","p-2 pl-4"),d(Et,"class","bg-slate-900/20 rounded shadow-lg p-2 pl-4 flex flex-col"),d(n,"class","col-start-1 flex flex-col gap-2 w-60 text-gray-300 text-sm"),d(Lt,"class","w-[var(--boardSize,40rem)]"),d(Ot,"class","shadow-lg rounded"),d(Tt,"class","row-start-2"),d(rt,"class","grid grid-rows-[min-content_auto] gap-10"),d(s,"class","col-start-2 gap-10 grid grid-cols-[auto_auto]"),d(i,"class","mt-10 grid grid-cols-center")},m(B,$){h(document.head,t),z(B,e,$),z(B,i,$),h(i,s),h(s,n),h(n,l),h(l,r),h(l,o),h(o,u),h(u,f),h(f,b),h(u,v),h(u,_);for(let ut=0;ut<he.length;ut+=1)he[ut].m(_,null);qt(_,a[0].board.boardTheme),h(o,O),h(o,L),h(L,y),y.checked=a[0].board.notation,h(L,E),h(L,c),h(c,g),h(o,P),h(o,w),h(w,A),A.checked=a[0].board.flipped,h(w,I),h(w,R),h(R,T),h(o,S),h(o,F),h(F,Y),Y.checked=a[0].board.shadow,h(F,ce),h(F,te),h(te,Ce),h(n,Le),h(n,D),h(D,H),h(D,K),h(K,Z),h(Z,le),le.checked=a[0].movable.enabled,h(Z,re),h(Z,_e),h(_e,Ee),h(K,Se),fe&&fe.m(K,null),h(n,Ke),h(n,we),h(we,We),h(we,ke),h(ke,ye),h(ye,de),de.checked=a[0].draggable.enabled,h(ye,ht),h(ye,Ae),h(Ae,Rt),h(ke,Dt),ge&&ge.m(ke,null),h(n,Vt),h(n,je),h(je,Pt),h(je,lt),h(lt,Ge),h(Ge,Oe),Oe.checked=a[0].selectable.enabled,h(Ge,Nt),h(Ge,Xe),h(Xe,Ut),h(n,Bt),h(n,Ye),h(Ye,zt),h(Ye,Ie),h(Ie,Qe),h(Qe,Fe),Fe.checked=a[0].legal.enabled,h(Qe,Ht),h(Qe,xe),h(xe,m),h(Ie,U),be&&be.m(Ie,null),h(n,J),h(n,se),h(se,oe),h(se,ae),h(ae,Me),h(Me,Ze),Ze.checked=a[0].highlight.enabled,h(Me,gs),h(Me,ft),h(ft,bs),h(ae,ps),pe&&pe.m(ae,null),h(n,vs),h(n,gt),h(gt,ms),h(gt,Je),h(Je,bt),h(bt,$e),$e.checked=a[0].drawTools.enabled,h(bt,_s),h(bt,pt),h(pt,Es),h(Je,ws),ve&&ve.m(Je,null),h(n,ks),h(n,vt),h(vt,Ms),h(vt,et),h(et,mt),h(mt,tt),tt.checked=a[0].sounds.enabled,h(mt,Ss),h(mt,_t),h(_t,ys),h(et,As),me&&me.m(et,null),h(n,Ps),h(n,Et),h(Et,Cs),h(Et,Ct),h(Ct,wt),h(wt,st),st.checked=a[0].resizible.enabled,h(wt,Ls),h(wt,kt),h(kt,Ts),h(s,Os),h(s,rt),h(rt,Lt),Ne(at,Lt,null),h(rt,Is),h(rt,Tt),h(Tt,Ot),Ne(ot,Ot,null),Wt=!0,Fs||(aa=[X(_,"change",a[6]),X(y,"change",a[7]),X(A,"change",a[8]),X(Y,"change",a[9]),X(le,"change",a[10]),X(de,"change",a[12]),X(Oe,"change",a[17]),X(Fe,"change",a[18]),X(Ze,"change",a[20]),X($e,"change",a[22]),X(tt,"change",a[25]),X(st,"change",a[27])],Fs=!0)},p(B,$){if($&0){It=oi;let x;for(x=0;x<It.length;x+=1){const Ft=fi(B,It,x);he[x]?he[x].p(Ft,$):(he[x]=gi(Ft),he[x].c(),he[x].m(_,null))}for(;x<he.length;x+=1)he[x].d(1);he.length=It.length}$[0]&1&&qt(_,B[0].board.boardTheme),$[0]&1&&(y.checked=B[0].board.notation),$[0]&1&&(A.checked=B[0].board.flipped),$[0]&1&&(Y.checked=B[0].board.shadow),$[0]&1&&(le.checked=B[0].movable.enabled),B[0].movable.enabled?fe?fe.p(B,$):(fe=bi(B),fe.c(),fe.m(K,null)):fe&&(fe.d(1),fe=null),$[0]&1&&(de.checked=B[0].draggable.enabled),B[0].draggable.enabled?ge?ge.p(B,$):(ge=pi(B),ge.c(),ge.m(ke,null)):ge&&(ge.d(1),ge=null),$[0]&1&&(Oe.checked=B[0].selectable.enabled),$[0]&1&&(Fe.checked=B[0].legal.enabled),B[0].legal.enabled?be?be.p(B,$):(be=_i(B),be.c(),be.m(Ie,null)):be&&(be.d(1),be=null),$[0]&1&&(Ze.checked=B[0].highlight.enabled),B[0].highlight.enabled?pe?pe.p(B,$):(pe=Ei(B),pe.c(),pe.m(ae,null)):pe&&(pe.d(1),pe=null),$[0]&1&&($e.checked=B[0].drawTools.enabled),B[0].drawTools.enabled?ve?ve.p(B,$):(ve=ki(B),ve.c(),ve.m(Je,null)):ve&&(ve.d(1),ve=null),$[0]&1&&(tt.checked=B[0].sounds.enabled),B[0].sounds.enabled?me?me.p(B,$):(me=Mi(B),me.c(),me.m(et,null)):me&&(me.d(1),me=null),$[0]&1&&(st.checked=B[0].resizible.enabled);const ut={};at.$set(ut);const Mt={};$[0]&4&&(Mt.source=B[2]),ot.$set(Mt)},i(B){Wt||(W(at.$$.fragment,B),W(ot.$$.fragment,B),Wt=!0)},o(B){Q(at.$$.fragment,B),Q(ot.$$.fragment,B),Wt=!1},d(B){p(t),B&&p(e),B&&p(i),dt(he,B),fe&&fe.d(),ge&&ge.d(),be&&be.d(),pe&&pe.d(),ve&&ve.d(),me&&me.d(),a[28](null),Ue(at),Ue(ot),Fs=!1,At(aa)}}}function sr(a,t,e){let i;const s={resizible:!0};let n,l=new Ii(s),r=!1;sa(()=>{r=!0,e(0,l=n.getState())});const o=H=>{const K=H.getConfig();return r&&n.setState(H),`const config: ChessboardConfig = ${JSON.stringify(K,null,4)};`.replace(/"([^"]+)":/g,"$1:")},u=["select","legal","move","preMove","nextMove","check"],f=["MOVE","CAPTURE","CASTLE","UNDO"];function b(){l.board.boardTheme=Ks(this),e(0,l)}function v(){l.board.notation=this.checked,e(0,l)}function _(){l.board.flipped=this.checked,e(0,l)}function O(){l.board.shadow=this.checked,e(0,l)}function L(){l.movable.enabled=this.checked,e(0,l)}function y(){l.movable.color=Ks(this),e(0,l)}function E(){l.draggable.enabled=this.checked,e(0,l)}function c(){l.draggable.ghostPiece.enabled=this.checked,e(0,l)}function g(){l.draggable.transition.enabled=this.checked,e(0,l)}function P(){l.draggable.transition.settings.duration=Ci(this.value),e(0,l)}function w(){l.draggable.transition.settings.easing=Ks(this),e(0,l)}function A(){l.selectable.enabled=this.checked,e(0,l)}function I(){l.legal.enabled=this.checked,e(0,l)}function R(){l.legal.preMoves.enabled=this.checked,e(0,l)}function T(){l.highlight.enabled=this.checked,e(0,l)}function S(H){l.highlight.settings[H]=this.checked,e(0,l)}function F(){l.drawTools.enabled=this.checked,e(0,l)}function Y(){l.drawTools.settings.LshapeKnightMove=this.checked,e(0,l)}function ce(){l.drawTools.settings.onlyChessMove=this.checked,e(0,l)}function te(){l.sounds.enabled=this.checked,e(0,l)}function Ce(H){l.sounds.settings[H]=this.checked,e(0,l)}function Le(){l.resizible.enabled=this.checked,e(0,l)}function D(H){Pe[H?"unshift":"push"](()=>{n=H,e(1,n)})}return a.$$.update=()=>{a.$$.dirty[0]&1&&e(2,i=o(l))},[l,n,i,s,u,f,b,v,_,O,L,y,E,c,g,P,w,A,I,R,T,S,F,Y,ce,te,Ce,Le,D]}class nr extends Be{constructor(t){super(),ze(this,t,sr,tr,He,{},null,[-1,-1])}}export{nr as default};
