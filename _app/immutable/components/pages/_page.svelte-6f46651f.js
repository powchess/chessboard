var qn=Object.defineProperty;var Fn=(t,e,s)=>e in t?qn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var D=(t,e,s)=>(Fn(t,typeof e!="symbol"?e+"":e,s),s);import{S as Ie,i as qe,s as Fe,C as un,k as H,a as ee,l as V,m as z,h as C,c as te,p as Pe,n as m,b as Z,G as I,D as cn,E as fn,F as hn,f as J,t as $,I as At,J as ls,K as oe,L as Nn,e as Le,M as Rn,q as we,r as Ce,u as qt,N as nt,O as dn,B as Ae,P as it,Q as gn,R as Dn,T as Bn,U as os,V as ut,W as es,X as fe,Y as ts,Z as at,_ as kt,H as Un,$ as je,a0 as Re,a1 as De,o as ss,g as Be,d as Ue,a2 as Hn,a3 as Vn,a4 as ge,w as _e,x as Ee,y as Me,a5 as be,z as ke,a6 as us,a7 as bn,a8 as cs,a9 as Kn,aa as pn,A as zn,ab as mn,ac as Tt,ad as dt,ae as ns,af as vn,ag as fs,ah as Wn}from"../../chunks/index-fec2cb7a.js";import{w as jn}from"../../chunks/index-27c90a1c.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_n={exports:{}};(function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var s=function(i){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,n={},l={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function f(b){return b instanceof o?new o(b.type,f(b.content),b.alias):Array.isArray(b)?b.map(f):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(f){return Object.prototype.toString.call(f).slice(8,-1)},objId:function(f){return f.__id||Object.defineProperty(f,"__id",{value:++r}),f.__id},clone:function f(b,S){S=S||{};var A,L;switch(l.util.type(b)){case"Object":if(L=l.util.objId(b),S[L])return S[L];A={},S[L]=A;for(var N in b)b.hasOwnProperty(N)&&(A[N]=f(b[N],S));return A;case"Array":return L=l.util.objId(b),S[L]?S[L]:(A=[],S[L]=A,b.forEach(function(K,B){A[B]=f(K,S)}),A);default:return b}},getLanguage:function(f){for(;f;){var b=a.exec(f.className);if(b)return b[1].toLowerCase();f=f.parentElement}return"none"},setLanguage:function(f,b){f.className=f.className.replace(RegExp(a,"gi"),""),f.classList.add("language-"+b)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(A){var f=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(A.stack)||[])[1];if(f){var b=document.getElementsByTagName("script");for(var S in b)if(b[S].src==f)return b[S]}return null}},isActive:function(f,b,S){for(var A="no-"+b;f;){var L=f.classList;if(L.contains(b))return!0;if(L.contains(A))return!1;f=f.parentElement}return!!S}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(f,b){var S=l.util.clone(l.languages[f]);for(var A in b)S[A]=b[A];return S},insertBefore:function(f,b,S,A){A=A||l.languages;var L=A[f],N={};for(var K in L)if(L.hasOwnProperty(K)){if(K==b)for(var B in S)S.hasOwnProperty(B)&&(N[B]=S[B]);S.hasOwnProperty(K)||(N[K]=L[K])}var R=A[f];return A[f]=N,l.languages.DFS(l.languages,function(G,ie){ie===R&&G!=f&&(this[G]=N)}),N},DFS:function f(b,S,A,L){L=L||{};var N=l.util.objId;for(var K in b)if(b.hasOwnProperty(K)){S.call(b,K,b[K],A||K);var B=b[K],R=l.util.type(B);R==="Object"&&!L[N(B)]?(L[N(B)]=!0,f(B,S,null,L)):R==="Array"&&!L[N(B)]&&(L[N(B)]=!0,f(B,S,K,L))}}},plugins:{},highlightAll:function(f,b){l.highlightAllUnder(document,f,b)},highlightAllUnder:function(f,b,S){var A={callback:S,container:f,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",A),A.elements=Array.prototype.slice.apply(A.container.querySelectorAll(A.selector)),l.hooks.run("before-all-elements-highlight",A);for(var L=0,N;N=A.elements[L++];)l.highlightElement(N,b===!0,A.callback)},highlightElement:function(f,b,S){var A=l.util.getLanguage(f),L=l.languages[A];l.util.setLanguage(f,A);var N=f.parentElement;N&&N.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(N,A);var K=f.textContent,B={element:f,language:A,grammar:L,code:K};function R(ie){B.highlightedCode=ie,l.hooks.run("before-insert",B),B.element.innerHTML=B.highlightedCode,l.hooks.run("after-highlight",B),l.hooks.run("complete",B),S&&S.call(B.element)}if(l.hooks.run("before-sanity-check",B),N=B.element.parentElement,N&&N.nodeName.toLowerCase()==="pre"&&!N.hasAttribute("tabindex")&&N.setAttribute("tabindex","0"),!B.code){l.hooks.run("complete",B),S&&S.call(B.element);return}if(l.hooks.run("before-highlight",B),!B.grammar){R(l.util.encode(B.code));return}if(b&&i.Worker){var G=new Worker(l.filename);G.onmessage=function(ie){R(ie.data)},G.postMessage(JSON.stringify({language:B.language,code:B.code,immediateClose:!0}))}else R(l.highlight(B.code,B.grammar,B.language))},highlight:function(f,b,S){var A={code:f,grammar:b,language:S};if(l.hooks.run("before-tokenize",A),!A.grammar)throw new Error('The language "'+A.language+'" has no grammar.');return A.tokens=l.tokenize(A.code,A.grammar),l.hooks.run("after-tokenize",A),o.stringify(l.util.encode(A.tokens),A.language)},tokenize:function(f,b){var S=b.rest;if(S){for(var A in S)b[A]=S[A];delete b.rest}var L=new g;return p(L,L.head,f),c(f,L,b,L.head,0),q(L)},hooks:{all:{},add:function(f,b){var S=l.hooks.all;S[f]=S[f]||[],S[f].push(b)},run:function(f,b){var S=l.hooks.all[f];if(!(!S||!S.length))for(var A=0,L;L=S[A++];)L(b)}},Token:o};i.Prism=l;function o(f,b,S,A){this.type=f,this.content=b,this.alias=S,this.length=(A||"").length|0}o.stringify=function f(b,S){if(typeof b=="string")return b;if(Array.isArray(b)){var A="";return b.forEach(function(R){A+=f(R,S)}),A}var L={type:b.type,content:f(b.content,S),tag:"span",classes:["token",b.type],attributes:{},language:S},N=b.alias;N&&(Array.isArray(N)?Array.prototype.push.apply(L.classes,N):L.classes.push(N)),l.hooks.run("wrap",L);var K="";for(var B in L.attributes)K+=" "+B+'="'+(L.attributes[B]||"").replace(/"/g,"&quot;")+'"';return"<"+L.tag+' class="'+L.classes.join(" ")+'"'+K+">"+L.content+"</"+L.tag+">"};function u(f,b,S,A){f.lastIndex=b;var L=f.exec(S);if(L&&A&&L[1]){var N=L[1].length;L.index+=N,L[0]=L[0].slice(N)}return L}function c(f,b,S,A,L,N){for(var K in S)if(!(!S.hasOwnProperty(K)||!S[K])){var B=S[K];B=Array.isArray(B)?B:[B];for(var R=0;R<B.length;++R){if(N&&N.cause==K+","+R)return;var G=B[R],ie=G.inside,ve=!!G.lookbehind,x=!!G.greedy,d=G.alias;if(x&&!G.pattern.global){var M=G.pattern.toString().match(/[imsuy]*$/)[0];G.pattern=RegExp(G.pattern.source,M+"g")}for(var h=G.pattern||G,v=A.next,y=L;v!==b.tail&&!(N&&y>=N.reach);y+=v.value.length,v=v.next){var P=v.value;if(b.length>f.length)return;if(!(P instanceof o)){var E=1,F;if(x){if(F=u(h,y,f,ve),!F||F.index>=f.length)break;var W=F.index,Q=F.index+F[0].length,ae=y;for(ae+=v.value.length;W>=ae;)v=v.next,ae+=v.value.length;if(ae-=v.value.length,y=ae,v.value instanceof o)continue;for(var se=v;se!==b.tail&&(ae<Q||typeof se.value=="string");se=se.next)E++,ae+=se.value.length;E--,P=f.slice(y,ae),F.index-=y}else if(F=u(h,0,P,ve),!F)continue;var W=F.index,ce=F[0],Y=P.slice(0,W),re=P.slice(W+ce.length),ue=y+P.length;N&&ue>N.reach&&(N.reach=ue);var pe=v.prev;Y&&(pe=p(b,pe,Y),y+=Y.length),k(b,pe,E);var Oe=new o(K,ie?l.tokenize(ce,ie):ce,d,ce);if(v=p(b,pe,Oe),re&&p(b,v,re),E>1){var le={cause:K+","+R,reach:ue};c(f,b,S,v.prev,y,le),N&&le.reach>N.reach&&(N.reach=le.reach)}}}}}}function g(){var f={value:null,prev:null,next:null},b={value:null,prev:f,next:null};f.next=b,this.head=f,this.tail=b,this.length=0}function p(f,b,S){var A=b.next,L={value:S,prev:b,next:A};return b.next=L,A.prev=L,f.length++,L}function k(f,b,S){for(var A=b.next,L=0;L<S&&A!==f.tail;L++)A=A.next;b.next=A,A.prev=b,f.length-=L}function q(f){for(var b=[],S=f.head.next;S!==f.tail;)b.push(S.value),S=S.next;return b}if(!i.document)return i.addEventListener&&(l.disableWorkerMessageHandler||i.addEventListener("message",function(f){var b=JSON.parse(f.data),S=b.language,A=b.code,L=b.immediateClose;i.postMessage(l.highlight(A,l.languages[S],S)),L&&i.close()},!1)),l;var O=l.util.currentScript();O&&(l.filename=O.src,O.hasAttribute("data-manual")&&(l.manual=!0));function w(){l.manual||l.highlightAll()}if(!l.manual){var T=document.readyState;T==="loading"||T==="interactive"&&O&&O.defer?document.addEventListener("DOMContentLoaded",w):window.requestAnimationFrame?window.requestAnimationFrame(w):window.setTimeout(w,16)}return l}(e);t.exports&&(t.exports=s),typeof hs<"u"&&(hs.Prism=s),s.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},s.languages.markup.tag.inside["attr-value"].inside.entity=s.languages.markup.entity,s.languages.markup.doctype.inside["internal-subset"].inside=s.languages.markup,s.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(s.languages.markup.tag,"addInlined",{value:function(a,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:s.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};l["language-"+r]={pattern:/[\s\S]+/,inside:s.languages[r]};var o={};o[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:l},s.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(s.languages.markup.tag,"addAttribute",{value:function(i,a){s.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:s.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),s.languages.html=s.languages.markup,s.languages.mathml=s.languages.markup,s.languages.svg=s.languages.markup,s.languages.xml=s.languages.extend("markup",{}),s.languages.ssml=s.languages.xml,s.languages.atom=s.languages.xml,s.languages.rss=s.languages.xml,function(i){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var r=i.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(s),s.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},s.languages.javascript=s.languages.extend("clike",{"class-name":[s.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),s.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,s.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:s.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:s.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:s.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:s.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:s.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),s.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:s.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),s.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),s.languages.markup&&(s.languages.markup.tag.addInlined("script","javascript"),s.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),s.languages.js=s.languages.javascript,function(){if(typeof s>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading\u2026",a=function(O,w){return"\u2716 Error "+O+" while fetching file: "+w},r="\u2716 Error: File does not exist or is empty",n={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",c="failed",g="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function p(O,w,T){var f=new XMLHttpRequest;f.open("GET",O,!0),f.onreadystatechange=function(){f.readyState==4&&(f.status<400&&f.responseText?w(f.responseText):f.status>=400?T(a(f.status,f.statusText)):T(r))},f.send(null)}function k(O){var w=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(O||"");if(w){var T=Number(w[1]),f=w[2],b=w[3];return f?b?[T,Number(b)]:[T,void 0]:[T,T]}}s.hooks.add("before-highlightall",function(O){O.selector+=", "+g}),s.hooks.add("before-sanity-check",function(O){var w=O.element;if(w.matches(g)){O.code="",w.setAttribute(l,o);var T=w.appendChild(document.createElement("CODE"));T.textContent=i;var f=w.getAttribute("data-src"),b=O.language;if(b==="none"){var S=(/\.(\w+)$/.exec(f)||[,"none"])[1];b=n[S]||S}s.util.setLanguage(T,b),s.util.setLanguage(w,b);var A=s.plugins.autoloader;A&&A.loadLanguages(b),p(f,function(L){w.setAttribute(l,u);var N=k(w.getAttribute("data-range"));if(N){var K=L.split(/\r\n?|\n/g),B=N[0],R=N[1]==null?K.length:N[1];B<0&&(B+=K.length),B=Math.max(0,Math.min(B-1,K.length)),R<0&&(R+=K.length),R=Math.max(0,Math.min(R,K.length)),L=K.slice(B,R).join(`
`),w.hasAttribute("data-start")||w.setAttribute("data-start",String(B+1))}T.textContent=L,s.highlightElement(T)},function(L){w.setAttribute(l,c),T.textContent=L})}}),s.plugins.fileHighlight={highlight:function(w){for(var T=(w||document).querySelectorAll(g),f=0,b;b=T[f++];)s.highlightElement(b)}};var q=!1;s.fileHighlight=function(){q||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),q=!0),s.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(_n);const En=_n.exports,ds="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+ds+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+ds+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",t=>{t.type==="entity"&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,s){const i={};i["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[s]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;const a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};a["language-"+s]={pattern:/[\s\S]+/,inside:Prism.languages[s]};const r={};r[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:a},Prism.languages.insertBefore("svelte","cdata",r)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function Gn(t){let e,s;return{c(){e=new Nn(!1),s=Le(),this.h()},l(i){e=Rn(i,!1),s=Le(),this.h()},h(){e.a=s},m(i,a){e.m(t[2],i,a),Z(i,s,a)},p(i,a){a&4&&e.p(i[2])},d(i){i&&C(s),i&&e.d()}}}function Qn(t){let e;return{c(){e=we(t[2])},l(s){e=Ce(s,t[2])},m(s,i){Z(s,e,i)},p(s,i){i&4&&qt(e,s[2])},d(s){s&&C(e)}}}function Xn(t){let e,s,i,a,r,n,l;const o=t[6].default,u=un(o,t,t[5],null);function c(k,q){return k[0]==="none"?Qn:Gn}let g=c(t),p=g(t);return{c(){e=H("code"),u&&u.c(),s=ee(),i=H("pre"),a=H("code"),p.c(),this.h()},l(k){e=V(k,"CODE",{style:!0});var q=z(e);u&&u.l(q),q.forEach(C),s=te(k),i=V(k,"PRE",{class:!0,"command-line":!0,"data-output":!0});var O=z(i);a=V(O,"CODE",{class:!0});var w=z(a);p.l(w),w.forEach(C),O.forEach(C),this.h()},h(){Pe(e,"display","none"),m(a,"class",r="language-"+t[0]),m(i,"class",n="language-"+t[0]),m(i,"command-line",""),m(i,"data-output","2-17")},m(k,q){Z(k,e,q),u&&u.m(e,null),t[7](e),Z(k,s,q),Z(k,i,q),I(i,a),p.m(a,null),l=!0},p(k,[q]){u&&u.p&&(!l||q&32)&&cn(u,o,k,k[5],l?hn(o,k[5],q,null):fn(k[5]),null),g===(g=c(k))&&p?p.p(k,q):(p.d(1),p=g(k),p&&(p.c(),p.m(a,null))),(!l||q&1&&r!==(r="language-"+k[0]))&&m(a,"class",r),(!l||q&1&&n!==(n="language-"+k[0]))&&m(i,"class",n)},i(k){l||(J(u,k),l=!0)},o(k){$(u,k),l=!1},d(k){k&&C(e),u&&u.d(k),t[7](null),k&&C(s),k&&C(i),p.d()}}}const gs=En;En.highlightElement;const Yn={transform:t=>t};function Zn(t,e,s){let{$$slots:i={},$$scope:a}=e,{language:r="javascript"}=e,{source:n=""}=e,{transform:l=p=>p}=e,o,u;function c(){const p=gs.languages[r];let k=n||o.textContent;k=Yn.transform(k),k=l(k),s(2,u=r==="none"?k:gs.highlight(k,p,r))}function g(p){oe[p?"unshift":"push"](()=>{o=p,s(1,o)})}return t.$$set=p=>{s(9,e=At(At({},e),ls(p))),"language"in p&&s(0,r=p.language),"source"in p&&s(3,n=p.source),"transform"in p&&s(4,l=p.transform),"$$scope"in p&&s(5,a=p.$$scope)},t.$$.update=()=>{e&&(n||o)&&c()},e=ls(e),[r,o,u,n,l,a,i,g]}class Jn extends Ie{constructor(e){super(),qe(this,e,Zn,Xn,Fe,{language:0,source:3,transform:4})}}var Mn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Chess=t.validateFen=t.SQUARES=t.DEFAULT_POSITION=t.KING=t.QUEEN=t.ROOK=t.BISHOP=t.KNIGHT=t.PAWN=t.BLACK=t.WHITE=void 0,t.WHITE="w",t.BLACK="b",t.PAWN="p",t.KNIGHT="n",t.BISHOP="b",t.ROOK="r",t.QUEEN="q",t.KING="k",t.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";const e=-1,s={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"};t.SQUARES=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"];const i={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},a={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},r={b:[16,32,17,15],w:[-16,-32,-17,-15]},n={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},l=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],o=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],u={p:1,n:2,b:4,r:8,q:16,k:32},c="pnbrqkPNBRQK",g=[t.KNIGHT,t.BISHOP,t.ROOK,t.QUEEN],p=7,k=6,q=1,O=0,w={w:[{square:a.a1,flag:i.QSIDE_CASTLE},{square:a.h1,flag:i.KSIDE_CASTLE}],b:[{square:a.a8,flag:i.QSIDE_CASTLE},{square:a.h8,flag:i.KSIDE_CASTLE}]},T={b:q,w:k},f=["1-0","0-1","1/2-1/2","*"];function b(x){return x>>4}function S(x){return x&15}function A(x){return"0123456789".indexOf(x)!==-1}function L(x){const d=S(x),M=b(x);return"abcdefgh".substring(d,d+1)+"87654321".substring(M,M+1)}function N(x){return x===t.WHITE?t.BLACK:t.WHITE}function K(x){const d=[];d[0]="No errors.",d[1]="FEN string must contain six space-delimited fields.",d[2]="6th field (move number) must be a positive integer.",d[3]="5th field (half move counter) must be a non-negative integer.",d[4]="4th field (en-passant square) is invalid.",d[5]="3rd field (castling availability) is invalid.",d[6]="2nd field (side to move) is invalid.",d[7]="1st field (piece positions) does not contain 8 '/'-delimited rows.",d[8]="1st field (piece positions) is invalid [consecutive numbers].",d[9]="1st field (piece positions) is invalid [invalid piece].",d[10]="1st field (piece positions) is invalid [row too large].",d[11]="Illegal en-passant square";const M=x.split(/\s+/);if(M.length!==6)return{valid:!1,errorNumber:1,error:d[1]};const h=parseInt(M[5],10);if(isNaN(h)||h<=0)return{valid:!1,errorNumber:2,error:d[2]};const v=parseInt(M[4],10);if(isNaN(v)||v<0)return{valid:!1,errorNumber:3,error:d[3]};if(!/^(-|[abcdefgh][36])$/.test(M[3]))return{valid:!1,errorNumber:4,error:d[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(M[2]))return{valid:!1,errorNumber:5,error:d[5]};if(!/^(w|b)$/.test(M[1]))return{valid:!1,errorNumber:6,error:d[6]};const y=M[0].split("/");if(y.length!==8)return{valid:!1,errorNumber:7,error:d[7]};for(let P=0;P<y.length;P++){let E=0,F=!1;for(let Q=0;Q<y[P].length;Q++)if(A(y[P][Q])){if(F)return{valid:!1,errorNumber:8,error:d[8]};E+=parseInt(y[P][Q],10),F=!0}else{if(!/^[prnbqkPRNBQK]$/.test(y[P][Q]))return{valid:!1,errorNumber:9,error:d[9]};E+=1,F=!1}if(E!==8)return{valid:!1,errorNumber:10,error:d[10]}}return M[3][1]=="3"&&M[1]=="w"||M[3][1]=="6"&&M[1]=="b"?{valid:!1,errorNumber:11,error:d[11]}:{valid:!0,errorNumber:0,error:d[0]}}t.validateFen=K;function B(x,d){const M=x.from,h=x.to,v=x.piece;let y=0,P=0,E=0;for(let F=0,Q=d.length;F<Q;F++){const ae=d[F].from,se=d[F].to,W=d[F].piece;v===W&&M!==ae&&h===se&&(y++,b(M)===b(ae)&&P++,S(M)===S(ae)&&E++)}return y>0?P>0&&E>0?L(M):E>0?L(M).charAt(1):L(M).charAt(0):""}function R(x,d,M,h,v,y=void 0,P=i.NORMAL){const E=b(h);if(v===t.PAWN&&(E===p||E===O))for(let F=0;F<g.length;F++){const Q=g[F];x.push({color:d,from:M,to:h,piece:v,captured:y,promotion:Q,flags:P|i.PROMOTION})}else x.push({color:d,from:M,to:h,piece:v,captured:y,promotion:void 0,flags:P})}function G(x){let d=x.charAt(0);return d>="a"&&d<="h"?x.match(/[a-h]\d.*[a-h]\d/)?void 0:t.PAWN:(d=d.toLowerCase(),d==="o"?t.KING:d)}function ie(x){return x.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class ve{constructor(d=t.DEFAULT_POSITION){this._board=new Array(128),this._turn=t.WHITE,this._header={},this._kings={w:e,b:e},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(d)}clear(d=!1){this._board=new Array(128),this._kings={w:e,b:e},this._turn=t.WHITE,this._castling={w:0,b:0},this._epSquare=e,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=d?this._header:{},this._updateSetup(this.fen())}load(d,M=!1){const h=d.split(/\s+/),v=h[0];let y=0;if(!K(d).valid)return!1;this.clear(M);for(let P=0;P<v.length;P++){const E=v.charAt(P);if(E==="/")y+=8;else if(A(E))y+=parseInt(E,10);else{const F=E<"a"?t.WHITE:t.BLACK;this.put({type:E.toLowerCase(),color:F},L(y)),y++}}return this._turn=h[1],h[2].indexOf("K")>-1&&(this._castling.w|=i.KSIDE_CASTLE),h[2].indexOf("Q")>-1&&(this._castling.w|=i.QSIDE_CASTLE),h[2].indexOf("k")>-1&&(this._castling.b|=i.KSIDE_CASTLE),h[2].indexOf("q")>-1&&(this._castling.b|=i.QSIDE_CASTLE),this._epSquare=h[3]==="-"?e:a[h[3]],this._halfMoves=parseInt(h[4],10),this._moveNumber=parseInt(h[5],10),this._updateSetup(this.fen()),!0}fen(){let d=0,M="";for(let y=a.a8;y<=a.h1;y++){if(this._board[y]){d>0&&(M+=d,d=0);const{color:P,type:E}=this._board[y];M+=P===t.WHITE?E.toUpperCase():E.toLowerCase()}else d++;y+1&136&&(d>0&&(M+=d),y!==a.h1&&(M+="/"),d=0,y+=8)}let h="";this._castling[t.WHITE]&i.KSIDE_CASTLE&&(h+="K"),this._castling[t.WHITE]&i.QSIDE_CASTLE&&(h+="Q"),this._castling[t.BLACK]&i.KSIDE_CASTLE&&(h+="k"),this._castling[t.BLACK]&i.QSIDE_CASTLE&&(h+="q"),h=h||"-";const v=this._epSquare===e?"-":L(this._epSquare);return[M,this._turn,h,v,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(d){this._history.length>0||(d!==t.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=d):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(t.DEFAULT_POSITION)}get(d){return this._board[a[d]]||!1}put({type:d,color:M},h){if(c.indexOf(d.toLowerCase())===-1||!(h in a))return!1;const v=a[h];return d==t.KING&&!(this._kings[M]==e||this._kings[M]==v)?!1:(this._board[v]={type:d,color:M},d===t.KING&&(this._kings[M]=v),this._updateSetup(this.fen()),!0)}remove(d){const M=this.get(d);return delete this._board[a[d]],M&&M.type===t.KING&&(this._kings[M.color]=e),this._updateSetup(this.fen()),M}_attacked(d,M){for(let h=a.a8;h<=a.h1;h++){if(h&136){h+=7;continue}if(this._board[h]===void 0||this._board[h].color!==d)continue;const v=this._board[h],y=h-M,P=y+119;if(l[P]&u[v.type]){if(v.type===t.PAWN){if(y>0){if(v.color===t.WHITE)return!0}else if(v.color===t.BLACK)return!0;continue}if(v.type==="n"||v.type==="k")return!0;const E=o[P];let F=h+E,Q=!1;for(;F!==M;){if(this._board[F]!=null){Q=!0;break}F+=E}if(!Q)return!0}}return!1}_isKingAttacked(d){return this._attacked(N(d),this._kings[d])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const d={b:0,n:0,r:0,q:0,k:0,p:0},M=[];let h=0,v=0;for(let y=a.a8;y<=a.h1;y++){if(v=(v+1)%2,y&136){y+=7;continue}const P=this._board[y];P&&(d[P.type]=P.type in d?d[P.type]+1:1,P.type===t.BISHOP&&M.push(v),h++)}if(h===2)return!0;if(h===3&&(d[t.BISHOP]===1||d[t.KNIGHT]===1))return!0;if(h===d[t.BISHOP]+2){let y=0;const P=M.length;for(let E=0;E<P;E++)y+=M[E];if(y===0||y===P)return!0}return!1}isThreefoldRepetition(){const d=[],M={};let h=!1;for(;;){const v=this._undoMove();if(!v)break;d.push(v)}for(;;){const v=this.fen().split(" ").slice(0,4).join(" ");M[v]=v in M?M[v]+1:1,M[v]>=3&&(h=!0);const y=d.pop();if(y)this._makeMove(y);else break}return h}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:d=!1,square:M=void 0}={}){const h=this._moves({square:M});return d?h.map(v=>this._makePretty(v)):h.map(v=>this._moveToSan(v,h))}_moves({legal:d=!0,piece:M=void 0,square:h=void 0}={}){var v;const y=h?h.toLowerCase():void 0,P=M==null?void 0:M.toLowerCase(),E=[],F=this._turn,Q=N(F);let ae=a.a8,se=a.h1,W=!1;if(y)if(y in a)ae=se=a[y],W=!0;else return[];for(let Y=ae;Y<=se;Y++){if(Y&136){Y+=7;continue}if(!this._board[Y]||this._board[Y].color===Q)continue;const{type:re}=this._board[Y];let ue;if(re===t.PAWN){if(P&&P!==re)continue;ue=Y+r[F][0],this._board[ue]||(R(E,F,Y,ue,t.PAWN),ue=Y+r[F][1],T[F]===b(Y)&&!this._board[ue]&&R(E,F,Y,ue,t.PAWN,void 0,i.BIG_PAWN));for(let pe=2;pe<4;pe++)ue=Y+r[F][pe],!(ue&136)&&(((v=this._board[ue])===null||v===void 0?void 0:v.color)===Q?R(E,F,Y,ue,t.PAWN,this._board[ue].type,i.CAPTURE):ue===this._epSquare&&R(E,F,Y,ue,t.PAWN,t.PAWN,i.EP_CAPTURE))}else{if(P&&P!==re)continue;for(let pe=0,Oe=n[re].length;pe<Oe;pe++){const le=n[re][pe];for(ue=Y;ue+=le,!(ue&136);){if(!this._board[ue])R(E,F,Y,ue,re);else{if(this._board[ue].color===F)break;R(E,F,Y,ue,re,this._board[ue].type,i.CAPTURE);break}if(re===t.KNIGHT||re===t.KING)break}}}}if((P===void 0||P===t.KING)&&(!W||se===this._kings[F])){if(this._castling[F]&i.KSIDE_CASTLE){const Y=this._kings[F],re=Y+2;!this._board[Y+1]&&!this._board[re]&&!this._attacked(Q,this._kings[F])&&!this._attacked(Q,Y+1)&&!this._attacked(Q,re)&&R(E,F,this._kings[F],re,t.KING,void 0,i.KSIDE_CASTLE)}if(this._castling[F]&i.QSIDE_CASTLE){const Y=this._kings[F],re=Y-2;!this._board[Y-1]&&!this._board[Y-2]&&!this._board[Y-3]&&!this._attacked(Q,this._kings[F])&&!this._attacked(Q,Y-1)&&!this._attacked(Q,re)&&R(E,F,this._kings[F],re,t.KING,void 0,i.QSIDE_CASTLE)}}if(!d)return E;const ce=[];for(let Y=0,re=E.length;Y<re;Y++)this._makeMove(E[Y]),this._isKingAttacked(F)||ce.push(E[Y]),this._undoMove();return ce}move(d,{sloppy:M=!1}={}){let h=null;if(typeof d=="string")h=this._moveFromSan(d,M);else if(typeof d=="object"){const y=this._moves();for(let P=0,E=y.length;P<E;P++)if(d.from===L(y[P].from)&&d.to===L(y[P].to)&&(!("promotion"in y[P])||d.promotion===y[P].promotion)){h=y[P];break}}if(!h)return null;const v=this._makePretty(h);return this._makeMove(h),v}_push(d){this._history.push({move:d,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(d){const M=this._turn,h=N(M);if(this._push(d),this._board[d.to]=this._board[d.from],delete this._board[d.from],d.flags&i.EP_CAPTURE&&(this._turn===t.BLACK?delete this._board[d.to-16]:delete this._board[d.to+16]),d.promotion&&(this._board[d.to]={type:d.promotion,color:M}),this._board[d.to].type===t.KING){if(this._kings[M]=d.to,d.flags&i.KSIDE_CASTLE){const v=d.to-1,y=d.to+1;this._board[v]=this._board[y],delete this._board[y]}else if(d.flags&i.QSIDE_CASTLE){const v=d.to+1,y=d.to-2;this._board[v]=this._board[y],delete this._board[y]}this._castling[M]=0}if(this._castling[M]){for(let v=0,y=w[M].length;v<y;v++)if(d.from===w[M][v].square&&this._castling[M]&w[M][v].flag){this._castling[M]^=w[M][v].flag;break}}if(this._castling[h]){for(let v=0,y=w[h].length;v<y;v++)if(d.to===w[h][v].square&&this._castling[h]&w[h][v].flag){this._castling[h]^=w[h][v].flag;break}}d.flags&i.BIG_PAWN?M===t.BLACK?this._epSquare=d.to-16:this._epSquare=d.to+16:this._epSquare=e,d.piece===t.PAWN?this._halfMoves=0:d.flags&(i.CAPTURE|i.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,M===t.BLACK&&this._moveNumber++,this._turn=h}undo(){const d=this._undoMove();return d?this._makePretty(d):null}_undoMove(){const d=this._history.pop();if(d===void 0)return null;const M=d.move;this._kings=d.kings,this._turn=d.turn,this._castling=d.castling,this._epSquare=d.epSquare,this._halfMoves=d.halfMoves,this._moveNumber=d.moveNumber;const h=this._turn,v=N(h);if(this._board[M.from]=this._board[M.to],this._board[M.from].type=M.piece,delete this._board[M.to],M.captured)if(M.flags&i.EP_CAPTURE){let y;h===t.BLACK?y=M.to-16:y=M.to+16,this._board[y]={type:t.PAWN,color:v}}else this._board[M.to]={type:M.captured,color:v};if(M.flags&(i.KSIDE_CASTLE|i.QSIDE_CASTLE)){let y,P;M.flags&i.KSIDE_CASTLE?(y=M.to+1,P=M.to-1):(y=M.to-2,P=M.to+1),this._board[y]=this._board[P],delete this._board[P]}return M}pgn({newline:d=`
`,maxWidth:M=0}={}){const h=[];let v=!1;for(const W in this._header)h.push("["+W+' "'+this._header[W]+'"]'+d),v=!0;v&&this._history.length&&h.push(d);const y=W=>{const ce=this._comments[this.fen()];if(typeof ce<"u"){const Y=W.length>0?" ":"";W=`${W}${Y}{${ce}}`}return W},P=[];for(;this._history.length>0;)P.push(this._undoMove());const E=[];let F="";for(P.length===0&&E.push(y(""));P.length>0;){F=y(F);const W=P.pop();if(!W)break;if(!this._history.length&&W.color==="b"){const ce=`${this._moveNumber}. ...`;F=F?`${F} ${ce}`:ce}else W.color==="w"&&(F.length&&E.push(F),F=this._moveNumber+".");F=F+" "+this._moveToSan(W,this._moves({legal:!0})),this._makeMove(W)}if(F.length&&E.push(y(F)),typeof this._header.Result<"u"&&E.push(this._header.Result),M===0)return h.join("")+E.join(" ");const Q=function(){return h.length>0&&h[h.length-1]===" "?(h.pop(),!0):!1},ae=function(W,ce){for(const Y of ce.split(" "))if(!!Y){if(W+Y.length>M){for(;Q();)W--;h.push(d),W=0}h.push(Y),W+=Y.length,h.push(" "),W++}return Q()&&W--,W};let se=0;for(let W=0;W<E.length;W++){if(se+E[W].length>M&&E[W].includes("{")){se=ae(se,E[W]);continue}se+E[W].length>M&&W!==0?(h[h.length-1]===" "&&h.pop(),h.push(d),se=0):W!==0&&(h.push(" "),se++),h.push(E[W]),se+=E[W].length}return h.join("")}header(...d){for(let M=0;M<d.length;M+=2)typeof d[M]=="string"&&typeof d[M+1]=="string"&&(this._header[d[M]]=d[M+1]);return this._header}loadPgn(d,{sloppy:M=!1,newlineChar:h=`\r?
`}={}){function v(le){return le.replace(/\\/g,"\\")}function y(le){const Se={},Ne=le.split(new RegExp(v(h)));let Ge="",Qe="";for(let Ke=0;Ke<Ne.length;Ke++){const Ve=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;Ge=Ne[Ke].replace(Ve,"$1"),Qe=Ne[Ke].replace(Ve,"$2"),Ge.trim().length>0&&(Se[Ge]=Qe)}return Se}d=d.trim();const E=new RegExp("^(\\[((?:"+v(h)+")|.)*\\])(?:\\s*"+v(h)+"){2}").exec(d),F=E&&E.length>=2?E[1]:"";this.reset();const Q=y(F);let ae="";for(const le in Q)le.toLowerCase()==="fen"&&(ae=Q[le]),this.header(le,Q[le]);if(M){if(ae&&!this.load(ae,!0))return!1}else if(Q.SetUp==="1"&&!("FEN"in Q&&this.load(Q.FEN,!0)))return!1;function se(le){return Array.from(le).map(function(Se){return Se.charCodeAt(0)<128?Se.charCodeAt(0).toString(16):encodeURIComponent(Se).replace(/%/g,"").toLowerCase()}).join("")}function W(le){return le.length==0?"":decodeURIComponent("%"+(le.match(/.{1,2}/g)||[]).join("%"))}const ce=function(le){return le=le.replace(new RegExp(v(h),"g")," "),`{${se(le.slice(1,le.length-1))}}`},Y=function(le){if(le.startsWith("{")&&le.endsWith("}"))return W(le.slice(1,le.length-1))};let re=d.replace(F,"").replace(new RegExp(`({[^}]*})+?|;([^${v(h)}]*)`,"g"),function(le,Se,Ne){return Se!==void 0?ce(Se):" "+ce(`{${Ne.slice(1)}}`)}).replace(new RegExp(v(h),"g")," ");const ue=/(\([^()]+\))+?/g;for(;ue.test(re);)re=re.replace(ue,"");re=re.replace(/\d+\.(\.\.)?/g,""),re=re.replace(/\.\.\./g,""),re=re.replace(/\$\d+/g,"");let pe=re.trim().split(new RegExp(/\s+/));pe=pe.join(",").replace(/,,+/g,",").split(",");let Oe="";for(let le=0;le<pe.length;le++){const Se=Y(pe[le]);if(Se!==void 0){this._comments[this.fen()]=Se;continue}const Ne=this._moveFromSan(pe[le],M);if(Ne==null)if(f.indexOf(pe[le])>-1)Oe=pe[le];else return!1;else Oe="",this._makeMove(Ne)}return Oe&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",Oe),!0}_moveToSan(d,M){let h="";if(d.flags&i.KSIDE_CASTLE)h="O-O";else if(d.flags&i.QSIDE_CASTLE)h="O-O-O";else{if(d.piece!==t.PAWN){const v=B(d,M);h+=d.piece.toUpperCase()+v}d.flags&(i.CAPTURE|i.EP_CAPTURE)&&(d.piece===t.PAWN&&(h+=L(d.from)[0]),h+="x"),h+=L(d.to),d.promotion&&(h+="="+d.promotion.toUpperCase())}return this._makeMove(d),this.isCheck()&&(this.isCheckmate()?h+="#":h+="+"),this._undoMove(),h}_moveFromSan(d,M=!1){const h=ie(d);let v=G(h),y=this._moves({legal:!0,piece:v});for(let W=0,ce=y.length;W<ce;W++)if(h===ie(this._moveToSan(y[W],y)))return y[W];if(!M)return null;let P,E,F,Q,ae,se=!1;E=h.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),E?(P=E[1],F=E[2],Q=E[3],ae=E[4],F.length==1&&(se=!0)):(E=h.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),E&&(P=E[1],F=E[2],Q=E[3],ae=E[4],F.length==1&&(se=!0))),v=G(h),y=this._moves({legal:!0,piece:P||v});for(let W=0,ce=y.length;W<ce;W++)if(F&&Q){if((!P||P.toLowerCase()==y[W].piece)&&a[F]==y[W].from&&a[Q]==y[W].to&&(!ae||ae.toLowerCase()==y[W].promotion))return y[W];if(se){const Y=L(y[W].from);if((!P||P.toLowerCase()==y[W].piece)&&a[Q]==y[W].to&&(F==Y[0]||F==Y[1])&&(!ae||ae.toLowerCase()==y[W].promotion))return y[W]}}return null}ascii(){let d=`   +------------------------+
`;for(let M=a.a8;M<=a.h1;M++){if(S(M)===0&&(d+=" "+"87654321"[b(M)]+" |"),this._board[M]){const h=this._board[M].type,y=this._board[M].color===t.WHITE?h.toUpperCase():h.toLowerCase();d+=" "+y+" "}else d+=" . ";M+1&136&&(d+=`|
`,M+=8)}return d+=`   +------------------------+
`,d+="     a  b  c  d  e  f  g  h",d}perft(d){const M=this._moves({legal:!1});let h=0;const v=this._turn;for(let y=0,P=M.length;y<P;y++)this._makeMove(M[y]),this._isKingAttacked(v)||(d-1>0?h+=this.perft(d-1):h++),this._undoMove();return h}_makePretty(d){const{color:M,piece:h,from:v,to:y,flags:P,captured:E,promotion:F}=d;let Q="";for(const se in i)i[se]&P&&(Q+=s[se]);const ae={color:M,piece:h,from:L(v),to:L(y),san:this._moveToSan(d,this._moves({legal:!0})),flags:Q};return E&&(ae.captured=E),F&&(ae.promotion=F),ae}turn(){return this._turn}board(){const d=[];let M=[];for(let h=a.a8;h<=a.h1;h++)this._board[h]==null?M.push(null):M.push({square:L(h),type:this._board[h].type,color:this._board[h].color}),h+1&136&&(d.push(M),M=[],h+=8);return d}squareColor(d){if(d in a){const M=a[d];return(b(M)+S(M))%2===0?"light":"dark"}return null}history({verbose:d=!1}={}){const M=[],h=[];for(;this._history.length>0;)M.push(this._undoMove());for(;;){const v=M.pop();if(!v)break;d?h.push(this._makePretty(v)):h.push(this._moveToSan(v,this._moves())),this._makeMove(v)}return h}_pruneComments(){const d=[],M={},h=v=>{v in this._comments&&(M[v]=this._comments[v])};for(;this._history.length>0;)d.push(this._undoMove());for(h(this.fen());;){const v=d.pop();if(!v)break;this._makeMove(v),h(this.fen())}this._comments=M}getComment(){return this._comments[this.fen()]}setComment(d){this._comments[this.fen()]=d.replace("{","[").replace("}","]")}deleteComment(){const d=this._comments[this.fen()];return delete this._comments[this.fen()],d}getComments(){return this._pruneComments(),Object.keys(this._comments).map(d=>({fen:d,comment:this._comments[d]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(d=>{const M=this._comments[d];return delete this._comments[d],{fen:d,comment:M}})}}t.Chess=ve})(Mn);var he=(t=>(t[t.WHITE=0]="WHITE",t[t.BLACK=1]="BLACK",t[t.BOTH=2]="BOTH",t[t.SPECTATOR=3]="SPECTATOR",t[t.SERVER=4]="SERVER",t))(he||{}),X=(t=>(t[t.LEGAL=0]="LEGAL",t[t.LEGALHOVER=1]="LEGALHOVER",t[t.CHECK=2]="CHECK",t[t.MOVE=3]="MOVE",t[t.NEXTMOVE=4]="NEXTMOVE",t[t.PREMOVE=5]="PREMOVE",t[t.PREMOVEHOVER=6]="PREMOVEHOVER",t[t.SELECT=7]="SELECT",t))(X||{});const Ct=t=>{if(typeof t=="string")return t;switch(t){case 0:case 1:return"legal";case 2:return"check";case 3:return"move";case 4:return"nextMove";case 5:case 6:return"preMove";case 7:return"select";default:return"check"}};class xn{constructor(e){D(this,"boardTheme");D(this,"piecesTheme");D(this,"mouseEvents");D(this,"flipped");D(this,"notation");D(this,"startFen");D(this,"size");D(this,"scale");D(this,"resizible");D(this,"defaultState",{boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:li,size:0,scale:70,resizible:!1});D(this,"setConfigSettings",e=>{e!==void 0&&(e.boardTheme!==void 0&&(this.boardTheme=e.boardTheme),e.piecesTheme!==void 0&&(this.piecesTheme=e.piecesTheme),e.mouseEvents!==void 0&&(this.mouseEvents=e.mouseEvents),e.flipped!==void 0&&(this.flipped=e.flipped),e.notation!==void 0&&(this.notation=e.notation),e.startFen!==void 0&&(this.startFen=e.startFen),e.resizible!==void 0&&(this.resizible=e.resizible))});D(this,"getConfig",()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...this.resizible!==this.defaultState.resizible&&{resizible:this.resizible}};if(Object.keys(e).length!==0)return e});this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.scale=this.defaultState.scale,this.resizible=this.defaultState.resizible,this.setConfigSettings(e)}}class $n{constructor(e){D(this,"enabled");D(this,"color");D(this,"defaultState",{enabled:!0,color:he.BOTH});D(this,"setConfigSettings",e=>{switch(e){case!0:this.enabled=!0,this.color=he.BOTH;break;case!1:this.enabled=!1;break;case he.WHITE:this.enabled=!0,this.color=he.WHITE;break;case he.BLACK:this.enabled=!0,this.color=he.BLACK;break}});D(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class ei{constructor(e){D(this,"enabled");D(this,"ghostPiece");D(this,"transition");D(this,"defaultState",{enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}});D(this,"setConfigSettings",e=>{var s,i,a,r;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(s=e==null?void 0:e.transition)!=null&&s.duration&&(this.transition.settings.duration=(i=e==null?void 0:e.transition)==null?void 0:i.duration),(a=e==null?void 0:e.transition)!=null&&a.easing&&(this.transition.settings.easing=(r=e==null?void 0:e.transition)==null?void 0:r.easing)))))});D(this,"getConfig",()=>{const e={},s={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(s.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(s.easing=this.transition.settings.easing),Object.keys(s).length!==0&&(e.transition=s)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class ti{constructor(e){D(this,"enabled");D(this,"selectedPiece");D(this,"defaultState",{enabled:!0,selectedPiece:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(this.enabled=e)});D(this,"getConfig",()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class si{constructor(e){D(this,"enabled");D(this,"whiteToMove");D(this,"moves");D(this,"settings");D(this,"preMoves");D(this,"lastMove");D(this,"checkSquare");D(this,"defaultState",{enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))});D(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled});this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class ni{constructor(e){D(this,"enabled");D(this,"settings");D(this,"defaultState",{enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))});D(this,"getConfig",()=>{const e={},s=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(s.forEach(i=>{this.settings[i]!==this.defaultState.settings[i]&&(e[i]=this.settings[i])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class ii{constructor(e){D(this,"enabled");D(this,"tools");D(this,"settings");D(this,"defaultState",{enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.knightLShape!==void 0&&(this.settings.knightLShape=e.knightLShape),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))});D(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(e.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class ai{constructor(e){D(this,"enabled");D(this,"settings");D(this,"defaultState",{enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))});D(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class ri{constructor(e){D(this,"getLegalMoves");D(this,"getPreMoves");D(this,"beforeMove");D(this,"afterMove");D(this,"getLastMove");D(this,"getInCheck");D(this,"getWhiteToMove");D(this,"defaultState",{getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(e.getLegalMoves&&(this.getLegalMoves=e.getLegalMoves),e.getPreMoves&&(this.getPreMoves=e.getPreMoves),e.beforeMove&&(this.beforeMove=e.beforeMove),e.afterMove&&(this.afterMove=e.afterMove),e.getLastMove&&(this.getLastMove=e.getLastMove),e.getInCheck&&(this.getInCheck=e.getInCheck),e.getWhiteToMove&&(this.getWhiteToMove=e.getWhiteToMove))});D(this,"getConfig",()=>{const e={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(e).length>0?e:void 0});this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const li="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class kn{constructor(e){D(this,"pieces");D(this,"markedSquares");D(this,"board");D(this,"movable");D(this,"draggable");D(this,"selectable");D(this,"legal");D(this,"callbacks");D(this,"highlight");D(this,"drawTools");D(this,"sounds");D(this,"getConfig",()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}));this.pieces=[],this.markedSquares=new Set,this.board=new xn(e==null?void 0:e.board),this.movable=new $n(e==null?void 0:e.movable),this.draggable=new ei(e==null?void 0:e.draggable),this.selectable=new ti(e==null?void 0:e.selectable),this.legal=new si(e==null?void 0:e.legal),this.callbacks=new ri(e==null?void 0:e.callbacks),this.highlight=new ni(e==null?void 0:e.highlight),this.drawTools=new ii(e==null?void 0:e.drawTools),this.sounds=new ai(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){!this.legalEnabled||(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){!this.preMovesEnabled||(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.preMovesEnabled?this.legal.preMoves.curMove:""}set currentPreMove(e){e.length<4&&e!==""||(this.preMovesEnabled?this.legal.preMoves.curMove=e:this.legal.preMoves.curMove="")}get selectableEnabled(){return this.selectable.enabled}get draggableEnabled(){return this.draggable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){!this.legalEnabled||(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4&&e!==""||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const oi=["a","b","c","d","e","f","g","h"],ui=["8","7","6","5","4","3","2","1"];function yt(t){return{x:oi.indexOf(t[0]),y:ui.indexOf(t[1])}}function Xt(t){return t.charCodeAt(0)-97}function ci(t){return 8-parseInt(t,10)}const fi=t=>{let e="",s=0;for(let i=0;i<t.length;i++){i!==0&&(e+="/");for(let a=0;a<t[i].length;a++){const r=t[i][a];r!=null&&s===0?r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase():r!=null&&s!==0?(e+=s.toString(),s=0,r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase()):s++}s!==0&&(e+=s.toString(),s=0)}return e},hi="8/8/8/8/8/8/8/8 w - - 0 1";class di{constructor(e){D(this,"letters",{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7});D(this,"state");D(this,"changeLegalHoverIfNeeded",e=>{e.color!==X.LEGAL&&e.color!==X.PREMOVE||this.state.pieces.forEach(s=>{s.square===e.square&&(e.color=e.color===X.LEGAL?X.LEGALHOVER:X.PREMOVEHOVER)})});D(this,"highlightSquare",(e,s)=>{const i={square:e,color:s};this.state.markedSquares.forEach(a=>{a.square===e&&a.color!==X.MOVE&&a.color!==X.CHECK&&this.state.markedSquares.delete(a)}),this.changeLegalHoverIfNeeded(i),this.state.markedSquares.add(i)});D(this,"legalHover",e=>{this.state.markedSquares.forEach(s=>{if(s.square===e&&s.color===X.LEGAL)s.color=X.LEGALHOVER;else if(s.square!==e&&s.color===X.LEGALHOVER){let i=!1;this.state.pieces.forEach(a=>{a.square===s.square&&(i=!0)}),i||(s.color=X.LEGAL)}})});D(this,"preMoveHover",e=>{this.state.markedSquares.forEach(s=>{if(s.square===e&&s.color===X.PREMOVE)s.color=X.PREMOVEHOVER;else if(s.square!==e&&s.color===X.PREMOVEHOVER){let i=!1;this.state.pieces.forEach(a=>{a.square===s.square&&(i=!0)}),i||(s.color=X.PREMOVE)}})});D(this,"toggleSquareHighlight",(e,s)=>{const i={square:e,color:s};let a=!1;return this.state.markedSquares.forEach(r=>{r.square===e&&(this.state.markedSquares.delete(r),r.color===s&&(a=!0))}),this.changeLegalHoverIfNeeded(i),a?!0:(this.state.markedSquares.add(i),!1)});D(this,"getSelectedSquare",()=>{let e="";return this.state.markedSquares.forEach(s=>{s.color===X.SELECT&&(e=s.square)}),e});D(this,"clearSquare",(e,s)=>{e.length===2&&this.state.markedSquares.forEach(i=>{i.square===e&&(i.color===s||s===void 0)&&this.state.markedSquares.delete(i)})});D(this,"clearAllSquares",e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(s=>{s.color===e&&this.state.markedSquares.delete(s)})});D(this,"setPiece",(e,s)=>{if(this.notValidThing({square:e,piece:s}))return;const i=this.state.pieces.find(a=>a.square===e);i?i.name=s:this.state.pieces.push({square:e,name:s})});D(this,"removePiece",e=>{this.notValidThing({square:e})||this.state.pieces.forEach((s,i)=>{s.square===e&&this.state.pieces.splice(i,1)})});D(this,"clearAllPieces",()=>{this.state.pieces.length=0});D(this,"getGridCoordsFromSquare",e=>{if(this.notValidThing({square:e}))return{x:0,y:0};const s=e[0],i=e[1],a=this.state.board.flipped?Math.abs(this.letters[s]-7):this.letters[s],r=this.state.board.flipped?Math.abs(parseInt(i,10)-8):parseInt(i,10)-1;return typeof a!="number"||r<0||r>7?{x:0,y:0}:{x:a,y:r}});D(this,"makeMove",e=>{if(this.notValidThing({move:e}))return;let s=!1,i;const a=e.substring(0,2),r=e.substring(2,4),n=e.substring(4);this.state.pieces.forEach(l=>{l.square===r&&(i=l,this.removePiece(l.square))}),this.state.pieces.forEach(l=>{l.square===a&&(l.square=r,s=!0,n&&(l.name=l.name[0]+n.toUpperCase()))}),s?this.state.legal.lastMove=e:i&&this.state.pieces.push(i)});D(this,"getSquareFromIndices",(e,s)=>`${Object.keys(this.letters)[e]}${(s+1).toString()}`);D(this,"updatePiecesWithFen",e=>{const s=[...Array(8)].map(()=>Array(8).fill(null)),i=["1","2","3","4","5","6","7","8"];let a=0,r=0;for(let o=0;o<(e.includes(" ")?e.indexOf(" "):e.length);o++)if(e[o]==="/")a++,r=0;else if(!i.includes(e[o]))e[o]===e[o].toUpperCase()?s[a][r]=`w${e[o]}`:s[a][r]=`b${e[o].toUpperCase()}`,r++;else for(let u=0;u<parseInt(e[o],10);u++)s[a][r]=null,r++;const n=[],l=[];for(let o=0;o<s.length;++o)for(let u=0;u<s.length;++u){const c=s[o][u],g=this.getPieceFromSquare(this.getSquareFromIndices(u,Math.abs(o-7)));c&&!g&&n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),!c&&g&&l.push(g),c&&g&&c!==g.name&&(n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),l.push(g))}for(let o=0;o<l.length;o++)for(let u=0;u<n.length;u++)!n[u]||!l[o]||n[u].name===l[o].name&&(l[o].square=n[u].square,l.splice(o,1),o--,n.splice(u,1),u--);n.forEach(o=>{this.state.pieces.push(o)}),l.forEach(o=>{this.state.pieces.splice(this.state.pieces.indexOf(o),1)})});D(this,"notValidThing",e=>{const{square:s,piece:i,move:a}=e;return!!(s&&s.length!==2||i&&i.length!==2||a&&a.length!==4&&a.length!==5)});D(this,"setGhostPiece",e=>{this.state.draggable.ghostPiece.piece=e});D(this,"removeGhostPiece",()=>{this.state.draggable.ghostPiece.piece=void 0});D(this,"isCastling",e=>{switch(e){case"e1g1":case"e1c1":case"e8g8":case"e8c8":return!0;default:return!1}});D(this,"getRookMoveIfIsCastling",e=>{switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return}});D(this,"isEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s===void 0||s.name!=="wP"&&s.name!=="bP")});D(this,"getCapturedPawnSquareIfIsEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const s=this.getPieceFromSquare(e.substring(0,2));if(s===void 0||s.name!=="wP"&&s.name!=="bP")return;const i=this.getPieceFromSquare(`${e[2]}${(parseInt(e[3],10)+(s.name==="wP"?-1:1)).toString()}`);return i==null?void 0:i.square});D(this,"isCapture",e=>!!this.getPieceFromSquare(e.substring(2,4)));D(this,"isPromotion",e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s&&(s.name[1]!=="P"||s.name[0]==="w"&&e[3]==="1"||s.name[0]==="b"&&e[3]==="8"))});D(this,"callbackExists",e=>this.state.callbacks[e]!==void 0);D(this,"flipBoard",e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped});D(this,"setConfigSettings",e=>{this.state.setConfigSettings(e)});this.state=new kn(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const e=this.state.pieces.find(s=>s.name==="wK");if(e)return e.square}getBlackKingSquare(){const e=this.state.pieces.find(s=>s.name==="bK");if(e)return e.square}getShortFEN(){if(this.state.pieces.length===0)return hi;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(s=>{e[ci(s.square[1])][Xt(s.square[0])]=s.name}),fi(e)}getPieceFromSquare(e){if(!e)return;let s;return this.state.pieces.forEach(i=>{i.square===e&&(s=i)}),s}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get draggableEnabled(){return this.state.draggableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}}const gi={[X.LEGAL]:"legalSQ cursor-pointer",[X.LEGALHOVER]:"legalSQ_hover cursor-pointer",[X.SELECT]:"selectedSQ",[X.MOVE]:"highlightMove",[X.NEXTMOVE]:"nextMoveSQ",[X.PREMOVE]:"preMoveSQ cursor-pointer",[X.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[X.CHECK]:"checkSQ"},bi={white:"#f0d9b5",black:"#b58863"},pi="standard.svg",mi={[X.LEGAL]:"legalSQ cursor-pointer",[X.LEGALHOVER]:"legalSQ_hover cursor-pointer",[X.SELECT]:"selectedSQ-darkBlue",[X.MOVE]:"highlightMove-darkBlue",[X.NEXTMOVE]:"nextMoveSQ",[X.PREMOVE]:"preMoveSQ cursor-pointer",[X.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[X.CHECK]:"checkSQ"},vi={white:"#94A3B8",black:"#475569"},_i="darkBlue.svg",He={squareStyles:{standard:gi,darkBlue:mi},colors:{standard:bi,darkBlue:vi},imageName:{standard:pi,darkBlue:_i}};function bs(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function ps(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function ms(t){let e,s=t[4][t[1]?Math.abs(t[8]-7):t[8]]+"",i,a;return{c(){e=H("span"),i=we(s),a=ee(),this.h()},l(r){e=V(r,"SPAN",{"data-file":!0,style:!0,class:!0});var n=z(e);i=Ce(n,s),a=te(n),n.forEach(C),this.h()},h(){m(e,"data-file",t[6]),Pe(e,"--font-size",t[3]+"px"),Pe(e,"color",t[8]%2===0?He.colors[t[0]].white:He.colors[t[0]].black),m(e,"class","svelte-1dkkugo")},m(r,n){Z(r,e,n),I(e,i),I(e,a)},p(r,n){n&2&&s!==(s=r[4][r[1]?Math.abs(r[8]-7):r[8]]+"")&&qt(i,s),n&8&&Pe(e,"--font-size",r[3]+"px"),n&1&&Pe(e,"color",r[8]%2===0?He.colors[r[0]].white:He.colors[r[0]].black)},d(r){r&&C(e)}}}function vs(t){let e,s=(t[1]?t[8]+1:Math.abs(t[8]-8))+"",i,a,r;return{c(){e=H("span"),i=we(s),a=ee(),this.h()},l(n){e=V(n,"SPAN",{"data-file":!0,style:!0,class:!0});var l=z(e);i=Ce(l,s),a=te(l),l.forEach(C),this.h()},h(){m(e,"data-file",t[6]),m(e,"style",r="--font-size: "+t[3]+"px; color: "+(t[8]%2===0?He.colors[t[0]].white:He.colors[t[0]].black)+";"+(t[1]?" text-align: right;":"")),m(e,"class","svelte-1dkkugo")},m(n,l){Z(n,e,l),I(e,i),I(e,a)},p(n,l){l&2&&s!==(s=(n[1]?n[8]+1:Math.abs(n[8]-8))+"")&&qt(i,s),l&11&&r!==(r="--font-size: "+n[3]+"px; color: "+(n[8]%2===0?He.colors[n[0]].white:He.colors[n[0]].black)+";"+(n[1]?" text-align: right;":""))&&m(e,"style",r)},d(n){n&&C(e)}}}function Ei(t){let e,s,i,a,r=t[4],n=[];for(let u=0;u<r.length;u+=1)n[u]=ms(ps(t,r,u));let l=t[4],o=[];for(let u=0;u<l.length;u+=1)o[u]=vs(bs(t,l,u));return{c(){e=H("div");for(let u=0;u<n.length;u+=1)n[u].c();s=ee(),i=H("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=V(u,"DIV",{class:!0});var c=z(e);for(let p=0;p<n.length;p+=1)n[p].l(c);c.forEach(C),s=te(u),i=V(u,"DIV",{class:!0});var g=z(i);for(let p=0;p<o.length;p+=1)o[p].l(g);g.forEach(C),this.h()},h(){m(e,"class","files noselect svelte-1dkkugo"),m(i,"class","ranks noselect svelte-1dkkugo"),nt(()=>t[5].call(i))},m(u,c){Z(u,e,c);for(let g=0;g<n.length;g+=1)n[g].m(e,null);Z(u,s,c),Z(u,i,c);for(let g=0;g<o.length;g+=1)o[g].m(i,null);a=dn(i,t[5].bind(i))},p(u,[c]){if(c&27){r=u[4];let g;for(g=0;g<r.length;g+=1){const p=ps(u,r,g);n[g]?n[g].p(p,c):(n[g]=ms(p),n[g].c(),n[g].m(e,null))}for(;g<n.length;g+=1)n[g].d(1);n.length=r.length}if(c&27){l=u[4];let g;for(g=0;g<l.length;g+=1){const p=bs(u,l,g);o[g]?o[g].p(p,c):(o[g]=vs(p),o[g].c(),o[g].m(i,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=l.length}},i:Ae,o:Ae,d(u){u&&C(e),it(n,u),u&&C(s),u&&C(i),it(o,u),a()}}}function Mi(t,e,s){let i,{theme:a}=e,{flipped:r}=e;const n=["a","b","c","d","e","f","g","h"];let l;function o(){l=this.clientHeight,s(2,l)}return t.$$set=u=>{"theme"in u&&s(0,a=u.theme),"flipped"in u&&s(1,r=u.flipped)},t.$$.update=()=>{t.$$.dirty&4&&s(3,i=Math.floor(Math.log(l/8)*3))},[a,r,l,i,n,o]}class ki extends Ie{constructor(e){super(),qe(this,e,Mi,Ei,Fe,{theme:0,flipped:1})}}function Si(t){const e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}function wi(t){return t*t*((1.70158+1)*t-1.70158)}function Ci(t){return--t*t*((1.70158+1)*t+1.70158)+1}function Lt(t){const e=.36363636363636365,s=8/11,i=9/10,a=4356/361,r=35442/1805,n=16061/1805,l=t*t;return t<e?7.5625*l:t<s?9.075*l-9.9*t+3.4:t<i?a*l-r*t+n:10.8*t*t-20.52*t+10.72}function Pi(t){return t<.5?.5*(1-Lt(1-t*2)):.5*Lt(t*2-1)+.5}function yi(t){return 1-Lt(1-t)}function Ai(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function Ti(t){return 1-Math.sqrt(1-t*t)}function Li(t){return Math.sqrt(1- --t*t)}function Oi(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Ii(t){return t*t*t}function is(t){const e=t-1;return e*e*e+1}function qi(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1}function Fi(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))}function Ni(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1}function Ri(t){return t===0||t===1?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-t*20)+1}function Di(t){return t===0?t:Math.pow(2,10*(t-1))}function Bi(t){return t===1?t:1-Math.pow(2,-10*t)}function Ui(t){return t/=.5,t<1?.5*t*t:(t--,-.5*(t*(t-2)-1))}function Hi(t){return t*t}function Vi(t){return-t*(t-2)}function Ki(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1}function zi(t){return Math.pow(t,4)}function Wi(t){return Math.pow(t-1,3)*(1-t)+1}function ji(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function Gi(t){return t*t*t*t*t}function Qi(t){return--t*t*t*t*t+1}function Xi(t){return-.5*(Math.cos(Math.PI*t)-1)}function Yi(t){const e=Math.cos(t*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function Zi(t){return Math.sin(t*Math.PI/2)}const Ot=Object.freeze(Object.defineProperty({__proto__:null,backIn:wi,backInOut:Si,backOut:Ci,bounceIn:yi,bounceInOut:Pi,bounceOut:Lt,circIn:Ti,circInOut:Ai,circOut:Li,cubicIn:Ii,cubicInOut:Oi,cubicOut:is,elasticIn:Fi,elasticInOut:qi,elasticOut:Ni,expoIn:Di,expoInOut:Ri,expoOut:Bi,quadIn:Hi,quadInOut:Ui,quadOut:Vi,quartIn:zi,quartInOut:Ki,quartOut:Wi,quintIn:Gi,quintInOut:ji,quintOut:Qi,sineIn:Yi,sineInOut:Xi,sineOut:Zi,linear:gn},Symbol.toStringTag,{value:"Module"}));function _s(t){return Object.prototype.toString.call(t)==="[object Date]"}function Yt(t,e){if(t===e||t!==t)return()=>t;const s=typeof t;if(s!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map((a,r)=>Yt(t[r],a));return a=>i.map(r=>r(a))}if(s==="object"){if(!t||!e)throw new Error("Object cannot be null");if(_s(t)&&_s(e)){t=t.getTime(),e=e.getTime();const r=e-t;return n=>new Date(t+n*r)}const i=Object.keys(e),a={};return i.forEach(r=>{a[r]=Yt(t[r],e[r])}),r=>{const n={};return i.forEach(l=>{n[l]=a[l](r)}),n}}if(s==="number"){const i=e-t;return a=>t+a*i}throw new Error(`Cannot interpolate ${s} values`)}function Ji(t,e={}){const s=jn(t);let i,a=t;function r(n,l){if(t==null)return s.set(t=n),Promise.resolve();a=n;let o=i,u=!1,{delay:c=0,duration:g=400,easing:p=gn,interpolate:k=Yt}=At(At({},e),l);if(g===0)return o&&(o.abort(),o=null),s.set(t=a),Promise.resolve();const q=Dn()+c;let O;return i=Bn(w=>{if(w<q)return!0;u||(O=k(t,n),typeof g=="function"&&(g=g(t,n)),u=!0),o&&(o.abort(),o=null);const T=w-q;return T>g?(s.set(t=n),!1):(s.set(t=O(p(T/g))),!0)}),i.promise}return{set:r,update:(n,l)=>r(n(a,t),l),subscribe:s.subscribe}}function Es(t,e,s,i){if(e===0&&s===0)return t;const a=i?["a","b","c","d","e","f","g","h"].reverse():["a","b","c","d","e","f","g","h"],r=i?["8","7","6","5","4","3","2","1"].reverse():["8","7","6","5","4","3","2","1"],n=a[a.indexOf(t[0])+e],l=r[r.indexOf(t[1])+s];if(!(!n||!l))return`${n}${l}`}function Ms(t,e,s){const i=e*1.15,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",(t.offsetWidth*i).toString()),a.setAttribute("height",(t.offsetHeight*i).toString()),a.style.position="absolute",a.style.zIndex="100",a.style.translate=`${s?"":"-"}${25*i/2}% -${25*i/2}%`,a.style.opacity="0.2",r.setAttribute("r",(t.offsetWidth*i/2).toString()),r.setAttribute("cx",(t.offsetWidth*i/2).toString()),r.setAttribute("cy",(t.offsetHeight*i/2).toString()),r.setAttribute("fill","black"),a.appendChild(r),a}function xi(t,e){let s;function i(P,E=1e3){let F=!1;const Q=()=>{s==null?F=!1:(P(...s),s=null,setTimeout(Q,E))};return(...ae)=>{if(F){s=ae;return}P(...ae),F=!0,setTimeout(Q,E)}}let a,r,n,l,o,u,c,g,p=!1,k;const q=t.parentNode;let O,w=!1,{startSquare:T,boardFlipped:f,mouseEvents:b,canDrag:S,canSelect:A,duration:L,easingFunc:N}=e;const{coords:K}=e;!S&&!A?t.style.removeProperty("cursor"):t.style.cursor="pointer";let B=os(K).x,R=os(K).y;const G=1.6;let ie=Ms(t,G,f);t.draggable=!1;function ve(P){const E=P.clientX-a,F=P.clientY-r;if(a=P.clientX,r=P.clientY,o+=E,u+=F,p||(Math.abs(o)>1||Math.abs(u)>1)&&(K.update(Q=>({x:Q.x+(a-t.offsetWidth/2-t.getBoundingClientRect().x)/t.clientWidth,y:P.pointerType==="touch"?Q.y-(r-t.offsetHeight*1.5-t.getBoundingClientRect().y)/t.clientWidth:Q.y-(r-t.offsetHeight/2-t.getBoundingClientRect().y)/t.clientWidth,scale:P.pointerType==="touch"?G:1}),{duration:L,easing:N}),p=!0,t.style.zIndex="30",t.style.cursor="grabbing",t.dispatchEvent(new CustomEvent("startMoving"))),!!p){if(P.pointerType==="touch"){const Q=Math.floor((o+n)/t.offsetWidth),ae=Math.floor((u+l)/t.offsetHeight),se=Es(T,Q,ae,f);if(se){if(se!==O){const W=yt(se);ie.style.left=`${W.x*12.5}%`,ie.style.top=`${W.y*12.5}%`,q.appendChild(ie)}}else O&&(O=void 0)}K.update(Q=>({x:Q.x+E/t.clientWidth,y:Q.y-F/t.clientWidth,scale:P.pointerType==="touch"?G:1}),{duration:0}),t.dispatchEvent(new CustomEvent("moving",{detail:{x:a,y:r}}))}}const x=i(ve,10);function d(){const P=window.scrollX-c,E=window.scrollY-g;c=window.scrollX,g=window.scrollY,K.update(F=>({x:F.x+P,y:F.y+E,scale:1}),{duration:0})}function M(){window.removeEventListener("pointermove",x),window.removeEventListener("pointerup",M),window.removeEventListener("pointercancel",M),document.body.removeEventListener("pointerleave",M),window.removeEventListener("scroll",d),s=null;const P=Math.floor((o+n)/t.offsetWidth),E=Math.floor((u+l)/t.offsetHeight),F=Es(T,P,E,f);w=!1,t.dispatchEvent(new CustomEvent("dropped",{detail:F})),K.update(()=>({x:B,y:R,scale:1}),{duration:L,easing:N}).then(()=>{w||t.dispatchEvent(new CustomEvent("animationEnded")),w||(t.style.zIndex="2")}),a=0,r=0,o=0,u=0,!S&&!A?t.style.removeProperty("cursor"):t.style.cursor="pointer",setTimeout(()=>{w||(t.style.zIndex="2")},L),p=!1,ie.remove()}function h(P){if(P.button!==0||!P.isPrimary||!b)return;if((A||S)&&t.dispatchEvent(new CustomEvent("clicked")),!S){t.dispatchEvent(new CustomEvent("dropped",{detail:T}));return}B=f?7-Xt(T[0]):Xt(T[0]),R=f?8-parseInt(T[1],10):parseInt(T[1],10)-1,O=T;const E=P.target.getBoundingClientRect();P.pointerType==="touch"?(a=P.clientX,r=P.clientY,n=P.clientX-E.x,l=P.clientY-E.y):(a=P.clientX,r=P.clientY,n=P.offsetX,l=P.offsetY),o=0,u=0,c=window.scrollX,g=window.scrollY,w=!0,window.addEventListener("pointermove",x),window.addEventListener("pointerup",M),window.addEventListener("pointercancel",M),document.body.addEventListener("pointerleave",M),window.addEventListener("scroll",d)}function v(P){P.preventDefault()}function y(P){P.preventDefault()}return t.addEventListener("contextmenu",v),t.addEventListener("dragstart",y),t.addEventListener("pointerdown",h),{destroy(){t.removeEventListener("pointerdown",h),t.removeEventListener("contextmenu",v),t.removeEventListener("dragstart",y),window.clearTimeout(k)},update(P){T=P.startSquare,L=P.duration,N=P.easingFunc,(P.canDrag!==S||P.canSelect!==A)&&(!P.canDrag&&!P.canSelect?t.style.removeProperty("cursor"):t.style.cursor="pointer"),P.canDrag!==S&&(S=P.canDrag),P.canSelect!==A&&(A=P.canSelect),P.mouseEvents!==b&&(b=P.mouseEvents),f!==P.boardFlipped&&(ie=Ms(t,G,P.boardFlipped)),f=P.boardFlipped}}}const ks=""+new URL("../../assets/wP-f78bae6c.svg",import.meta.url).href,$i=""+new URL("../../assets/wR-5eb92d73.svg",import.meta.url).href,ea=""+new URL("../../assets/wN-a4c975a2.svg",import.meta.url).href,ta=""+new URL("../../assets/wB-1ff2f149.svg",import.meta.url).href,sa=""+new URL("../../assets/wQ-8568b485.svg",import.meta.url).href,na=""+new URL("../../assets/wK-4cdf6dc9.svg",import.meta.url).href,ia=""+new URL("../../assets/bP-84e521e8.svg",import.meta.url).href,aa=""+new URL("../../assets/bR-e39efb08.svg",import.meta.url).href,ra=""+new URL("../../assets/bN-d3912d91.svg",import.meta.url).href,la=""+new URL("../../assets/bB-c430b746.svg",import.meta.url).href,oa=""+new URL("../../assets/bQ-c7b9a43e.svg",import.meta.url).href,ua=""+new URL("../../assets/bK-3500a2e6.svg",import.meta.url).href;function Zt(t){switch(t){case"wP":return ks;case"wR":return $i;case"wN":return ea;case"wB":return ta;case"wQ":return sa;case"wK":return na;case"bP":return ia;case"bR":return aa;case"bN":return ra;case"bB":return la;case"bQ":return oa;case"bK":return ua;default:return ks}}function ca(t){let e,s,i,a,r;return{c(){e=H("img"),this.h()},l(n){e=V(n,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){Pe(e,"left",t[9].x*12.5+"%"),Pe(e,"bottom",t[9].y*12.5+"%"),Pe(e,"scale",t[9].scale),Pe(e,"z-Index",t[4]?0:t[8]),Pe(e,"opacity",t[4]?.3:1),m(e,"class","noselect svelte-1g241z"),ut(e.src,s=Zt(t[2]))||m(e,"src",s),m(e,"alt",t[2])},m(n,l){var o,u,c;Z(n,e,l),a||(r=[es(i=xi.call(null,e,{startSquare:t[1],mouseEvents:t[0],canDrag:t[13](t[7],t[6]),canSelect:t[14](t[7],t[5]),boardFlipped:t[3],duration:(o=t[6])!=null&&o.transition.enabled?t[6].transition.settings.duration:0,easingFunc:Ot[(c=(u=t[6])==null?void 0:u.transition.settings.easing)!=null?c:"cubicInOut"],coords:t[11]})),fe(e,"dropped",t[12]),fe(e,"clicked",t[17]),fe(e,"startMoving",t[18]),fe(e,"animationEnded",t[19]),fe(e,"moving",t[20])],a=!0)},p(n,[l]){var o,u,c;l&512&&Pe(e,"left",n[9].x*12.5+"%"),l&512&&Pe(e,"bottom",n[9].y*12.5+"%"),l&512&&Pe(e,"scale",n[9].scale),l&272&&Pe(e,"z-Index",n[4]?0:n[8]),l&16&&Pe(e,"opacity",n[4]?.3:1),l&4&&!ut(e.src,s=Zt(n[2]))&&m(e,"src",s),l&4&&m(e,"alt",n[2]),i&&ts(i.update)&&l&235&&i.update.call(null,{startSquare:n[1],mouseEvents:n[0],canDrag:n[13](n[7],n[6]),canSelect:n[14](n[7],n[5]),boardFlipped:n[3],duration:(o=n[6])!=null&&o.transition.enabled?n[6].transition.settings.duration:0,easingFunc:Ot[(c=(u=n[6])==null?void 0:u.transition.settings.easing)!=null?c:"cubicInOut"],coords:n[11]})},i:Ae,o:Ae,d(n){n&&C(e),a=!1,at(r)}}}function fa(t,e,s){var d,M;let i,a,{square:r}=e,{name:n}=e,{mouseEvents:l=!0}=e,{getGridCoordsFromSquare:o}=e,{flipped:u}=e,{isGhost:c=!1}=e;c&&(l=!1);let{selectableState:g=void 0}=e,{draggableState:p=void 0}=e,{legalState:k=void 0}=e,{movableState:q=void 0}=e,O=!1;const w=kt();let T=(d=p==null?void 0:p.transition)!=null&&d.enabled?p.transition.settings.duration:0;const f=Ji({x:0,y:0,scale:1},{duration:T,easing:Ot[(M=p==null?void 0:p.transition.settings.easing)!=null?M:"cubicInOut"]});Un(t,f,h=>s(9,a=h));let b=!1;const S=h=>h[0]==="w"?he.WHITE:he.BLACK,A=h=>{var y;const v=o(h);f.update(()=>({x:v.x,y:v.y,scale:1}),{duration:b?T:0,easing:Ot[(y=p==null?void 0:p.transition.settings.easing)!=null?y:"cubicInOut"]}),b||(b=!0),T=p!=null&&p.transition.enabled?p.transition.settings.duration:0},L=h=>{T=0,h.detail||w("deselect"),r===h.detail?(!O&&B(q,g)?w("select"):w("deselect"),O=!O):O=!1,K(q,p)&&w("endDragging",r+h.detail),r!==h.detail&&h.detail&&w("move",r+h.detail)},N=h=>k!=null&&k.enabled?!!(k.preMoves.enabled&&S(n)===h.color||h.color===he.WHITE&&k.whiteToMove&&S(n)===he.WHITE||h.color===he.BLACK&&!k.whiteToMove&&S(n)===he.BLACK||h.color===he.BOTH&&(S(n)===he.WHITE&&k.whiteToMove||S(n)===he.BLACK&&!k.whiteToMove)):h.color===S(n)||h.color===he.BOTH,K=(h,v)=>!(h!=null&&h.enabled)||!(v!=null&&v.enabled)||!l?!1:N(h),B=(h,v)=>!(h!=null&&h.enabled)||!(v!=null&&v.enabled)||!l?!1:N(h),R=h=>h===void 0||h.name!==n||h.square!==r;function G(h){je.call(this,t,h)}function ie(h){je.call(this,t,h)}function ve(h){je.call(this,t,h)}const x=h=>{w("moving",h.detail)};return t.$$set=h=>{"square"in h&&s(1,r=h.square),"name"in h&&s(2,n=h.name),"mouseEvents"in h&&s(0,l=h.mouseEvents),"getGridCoordsFromSquare"in h&&s(15,o=h.getGridCoordsFromSquare),"flipped"in h&&s(3,u=h.flipped),"isGhost"in h&&s(4,c=h.isGhost),"selectableState"in h&&s(5,g=h.selectableState),"draggableState"in h&&s(6,p=h.draggableState),"legalState"in h&&s(16,k=h.legalState),"movableState"in h&&s(7,q=h.movableState)},t.$$.update=()=>{t.$$.dirty&32&&R(g==null?void 0:g.selectedPiece)&&(O=!1),t.$$.dirty&10&&A(r),t.$$.dirty&128&&s(8,i=typeof q=="boolean"?q?2:1:q!=null&&q.enabled?2:1)},[l,r,n,u,c,g,p,q,i,a,w,f,L,K,B,o,k,G,ie,ve,x]}class Sn extends Ie{constructor(e){super(),qe(this,e,fa,ca,Fe,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:15,flipped:3,isGhost:4,selectableState:5,draggableState:6,legalState:16,movableState:7})}}function ha(t){let e,s,i;return{c(){e=H("div"),this.h()},l(a){e=V(a,"DIV",{style:!0,class:!0}),z(e).forEach(C),this.h()},h(){m(e,"style",s="left: "+t[4]*12.5+"%; bottom: "+t[5]*12.5+"%;"+(t[3]?` border-${t[3]}-radius: inherit;`:"")),m(e,"class",i="noselect "+He.squareStyles[t[1]][t[0]]+(t[2]?"":" pointer-events-none")+(t[0]===X.LEGAL||t[0]===X.LEGALHOVER||t[0]===X.PREMOVE||t[0]===X.PREMOVEHOVER?" legal":"")+" svelte-1xnifmv")},m(a,r){Z(a,e,r)},p(a,[r]){r&56&&s!==(s="left: "+a[4]*12.5+"%; bottom: "+a[5]*12.5+"%;"+(a[3]?` border-${a[3]}-radius: inherit;`:""))&&m(e,"style",s),r&7&&i!==(i="noselect "+He.squareStyles[a[1]][a[0]]+(a[2]?"":" pointer-events-none")+(a[0]===X.LEGAL||a[0]===X.LEGALHOVER||a[0]===X.PREMOVE||a[0]===X.PREMOVEHOVER?" legal":"")+" svelte-1xnifmv")&&m(e,"class",i)},i:Ae,o:Ae,d(a){a&&C(e)}}}function da(t,e,s){let{square:i}=e,{color:a}=e,{getGridCoordsFromSquare:r}=e,{flipped:n}=e,{theme:l}=e,{mouseEvents:o=!0}=e,{corner:u=""}=e,c,g;const p=()=>{const k=r(i);s(4,c=k.x),s(5,g=k.y)};return t.$$set=k=>{"square"in k&&s(6,i=k.square),"color"in k&&s(0,a=k.color),"getGridCoordsFromSquare"in k&&s(7,r=k.getGridCoordsFromSquare),"flipped"in k&&s(8,n=k.flipped),"theme"in k&&s(1,l=k.theme),"mouseEvents"in k&&s(2,o=k.mouseEvents),"corner"in k&&s(3,u=k.corner)},t.$$.update=()=>{t.$$.dirty&256&&p()},[a,l,o,u,c,g,i,r,n]}class ga extends Ie{constructor(e){super(),qe(this,e,da,ha,Fe,{square:6,color:0,getGridCoordsFromSquare:7,flipped:8,theme:1,mouseEvents:2,corner:3})}}const ba=["a","b","c","d","e","f","g","h"],pa=["8","7","6","5","4","3","2","1"];function ma(t){t.querySelectorAll("[fixed]").forEach(e=>e.remove())}function Jt(t){return`${ba[t.x]}${pa[t.y]}`}function wn(t,e){return Math.abs((t.x-e.x)*(t.y-e.y))===2}function xt(t,e){return`${Jt(t)}${Jt(e)}`}function va(t,e){return!!(wn(t,e)||Math.abs(t.x-e.x)===Math.abs(t.y-e.y)||t.x===e.x!=(t.y===e.y))}function Cn(t,e,s,i,a,r){let n={x:-1,y:-1},l,o;wn(e,s)&&i?(Math.abs(s.x-e.x)===2?n={x:s.x,y:e.y}:n={x:e.x,y:s.y},n.y-e.y<0?o=Math.PI+Math.atan((n.x-e.x)/(n.y-e.y)):o=Math.atan((n.x-e.x)/Math.abs(n.y-e.y)),l={x:s.x-Math.sign(s.x-n.x)*(n.x!==s.x?.4:0),y:s.y-Math.sign(s.y-n.y)*(n.y!==s.y?.4:0)}):(s.y-e.y<0?o=Math.PI+Math.atan((s.x-e.x)/(s.y-e.y)):o=Math.atan((s.x-e.x)/Math.abs(s.y-e.y)),l={x:s.x-Math.sin(o)*.4,y:s.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};t.setAttribute("points",`${u.x+.5},${u.y+.5} ${n.x!==-1&&n.y!==-1&&i?`${n.x+.5},${n.y+.5} `:""}${l.x+.5},${l.y+.5}`),t.setAttribute("data-sqID",`${xt(e,s)}`),r!==void 0&&t.setAttribute("opacity",`${r}`),a!==void 0&&(t.setAttribute("marker-start",`url(#start-${a[0]})`),t.setAttribute("marker-end",`url(#end-${a[0]})`),t.setAttribute("stroke",a))}function Pt(t,e,s,i,a,r){if(!(e===void 0||s.x===-1&&s.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),i?e.setAttribute("stroke","red"):a?e.setAttribute("stroke","orange"):r?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),t.querySelectorAll(`\u0441ircle[cx="${s.x+.5}"][cy="${s.y+.5}"]`).forEach(n=>{e!==void 0&&n!==e&&(n.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const n=i?"red":a?"orange":r?"blue":"green";e.setAttribute("stroke",`${n}`),e.setAttribute("marker-start",`url(#start-${n[0]})`),e.setAttribute("marker-end",`url(#end-${n[0]})`),t.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(l=>{e instanceof SVGPolylineElement&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function Pn(t,e,s,i,a){const r=document.createElementNS("http://www.w3.org/2000/svg","polyline");return Cn(r,t,e,s,i,a),r.setAttribute("fill","none"),r.setAttribute("stroke-width","0.25"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("opacity",a!==void 0?`${a}`:"0.4"),r.setAttribute("marker-start",i?`url(#start-${i[0]})`:"url(#start-g)"),r.setAttribute("marker-end",i?`url(#end-${i[0]})`:"url(#end-g)"),r.setAttribute("stroke",i||"green"),r}function $t(t,e,s){const i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",`${t.x+.5}`),i.setAttribute("cy",`${t.y+.5}`),i.setAttribute("r","0.465"),i.setAttribute("opacity",s?`${s}`:"0.4"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.07"),i.setAttribute("stroke",e!=null?e:"green"),i}function _a(t,e,s){e.forEach(i=>{if(i.type==="circle"){const a=yt(i.square),r=$t(a,i.color,i.opacity);t.appendChild(r)}else if(i.type==="arrow"){const a=Pn(yt(i.from),yt(i.to),s,i.color,i.opacity);a.setAttribute("fixed",""),t.appendChild(a)}})}function Ss(t){t.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("fixed")||e.remove()})}function Ea(t,e){let{svg:s,flipped:i,enabled:a,settings:r}=e,n=!1,l={x:-1,y:-1},o,u;function c(w,T){const f=t.getBoundingClientRect(),b=i?f.width-(w-f.left):w-f.left,S=i?f.height-(T-f.top):T-f.top;return{x:Math.max(0,Math.min(7,Math.floor(b/(t.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(S/(t.clientHeight/8))))}}function g(w){if(u===void 0||l.x===-1&&l.y===-1)return;const T=c(w.clientX,w.clientY);r.onlyChessMove&&!va(l,T)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),l.x===T.x&&l.y===T.y?(xt(l,T),u instanceof SVGPolylineElement&&(u.remove(),u=$t(T)),Pt(s,u,l,w.shiftKey,w.ctrlKey,w.altKey),s.appendChild(u),s.querySelectorAll(`circle[cx="${l.x+.5}"][cy="${l.y+.5}"]`).forEach(f=>{f!==u&&(o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,s.querySelectorAll(`polyline[data-sqID="${xt(l,T)}"]`).forEach(f=>{u===void 0||l.x===-1&&l.y===-1||f===u||(o=f,f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=Pn(l,T,r.knightLShape),Pt(s,u,l,w.shiftKey,w.ctrlKey,w.altKey),s.appendChild(u)):u instanceof SVGPolylineElement&&Cn(u,l,T,r.knightLShape)))}function p(w){w.preventDefault()}function k(w){w.preventDefault(),Pt(s,u,l,w.shiftKey,w.ctrlKey,w.altKey)}function q(w){if(w.button===0)n=!1;else if(w.button===2){if(l.x===-1&&l.y===-1)return;s.querySelectorAll("[remove]").forEach(T=>{T.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:Jt(l),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,l={x:-1,y:-1},n=!1,window.removeEventListener("mousemove",g),window.removeEventListener("keydown",k),window.removeEventListener("keyup",k),window.removeEventListener("contextmenu",p)}window.removeEventListener("mouseup",q)}function O(w){if(w.button===0)n=!0,Ss(s),window.addEventListener("mouseup",q);else if(w.button===2&&!n){const T=c(w.clientX,w.clientY);l=T,u=$t(T),Pt(s,u,l,w.shiftKey,w.ctrlKey,w.altKey),o=void 0,s.querySelectorAll(`circle[cx="${T.x+.5}"][cy="${T.y+.5}"]`).forEach(f=>{o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&s.appendChild(u),window.addEventListener("mousemove",g),window.addEventListener("mouseup",q),window.addEventListener("keydown",k),window.addEventListener("keyup",k),window.addEventListener("contextmenu",p)}}return a&&t.addEventListener("mousedown",O),{update(w){w.svg!==s&&(s=w.svg),w.enabled!==a&&(a=w.enabled,a?t.addEventListener("mousedown",O):(Ss(s),t.removeEventListener("mousedown",O))),r=w.settings,i=w.flipped}}}function ws(t,e,s){const i=t.slice();return i[8]=e[s],i}function Cs(t){let e,s,i,a;return{c(){e=Re("marker"),s=Re("path"),i=Re("marker"),a=Re("path"),this.h()},l(r){e=De(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var n=z(e);s=De(n,"path",{fill:!0,d:!0}),z(s).forEach(C),n.forEach(C),i=De(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var l=z(i);a=De(l,"path",{fill:!0,d:!0}),z(a).forEach(C),l.forEach(C),this.h()},h(){m(s,"fill",t[8]),m(s,"d","M 0 5 v 10 c 0 2.8 2.2 5 5 5 L 6 20 V 0 L 5 0 C 2.2 0 0 2.2 0 5 z"),m(e,"id","start-"+t[8][0]),m(e,"viewBox","0 0 5 20"),m(e,"refX","4"),m(e,"refY","10"),m(e,"markerUnits","strokeWidth"),m(e,"markerWidth","0.5"),m(e,"markerHeight","1"),m(e,"orient","auto"),m(a,"fill",t[8]),m(a,"d","M 9.5 9.5 l -8.7 -5 C 0.5 4.3 0 4.6 0 5 v 10 c 0 0.4 0.5 0.7 0.9 0.5 l 8.7 -5 C 9.9 10.3 9.9 9.7 9.5 9.5 z"),m(i,"id","end-"+t[8][0]),m(i,"viewBox","0 0 10 20"),m(i,"refX","0.2"),m(i,"refY","10"),m(i,"markerUnits","strokeWidth"),m(i,"orient","auto"),m(i,"fill","currentColor")},m(r,n){Z(r,e,n),I(e,s),Z(r,i,n),I(i,a)},p:Ae,d(r){r&&C(e),r&&C(i)}}}function Ma(t){let e,s,i,a=t[2],r=[];for(let n=0;n<a.length;n+=1)r[n]=Cs(ws(t,a,n));return{c(){e=Re("svg"),s=Re("defs");for(let n=0;n<r.length;n+=1)r[n].c();i=Re("g"),this.h()},l(n){e=De(n,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var l=z(e);s=De(l,"defs",{});var o=z(s);for(let u=0;u<r.length;u+=1)r[u].l(o);o.forEach(C),i=De(l,"g",{}),z(i).forEach(C),l.forEach(C),this.h()},h(){m(e,"xmlns","http://www.w3.org/2000/svg"),Pe(e,"transform","rotate("+(t[1]?"180deg":"0deg")+")"),m(e,"viewBox","0 0 8 8"),m(e,"class","svelte-19gv2n4")},m(n,l){Z(n,e,l),I(e,s);for(let o=0;o<r.length;o+=1)r[o].m(s,null);I(e,i),t[5](i)},p(n,[l]){if(l&4){a=n[2];let o;for(o=0;o<a.length;o+=1){const u=ws(n,a,o);r[o]?r[o].p(u,l):(r[o]=Cs(u),r[o].c(),r[o].m(s,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}l&2&&Pe(e,"transform","rotate("+(n[1]?"180deg":"0deg")+")")},i:Ae,o:Ae,d(n){n&&C(e),it(r,n),t[5](null)}}}function ka(t,e,s){let{flipped:i=!1}=e,{svg:a}=e,{knightLShape:r=!1}=e,{tools:n=[]}=e,l=!1;function o(g){!l||(ma(a),_a(a,g,r))}ss(()=>{l=!0,o(n)});const u=["green","red","blue","orange"];function c(g){oe[g?"unshift":"push"](()=>{a=g,s(0,a)})}return t.$$set=g=>{"flipped"in g&&s(1,i=g.flipped),"svg"in g&&s(0,a=g.svg),"knightLShape"in g&&s(3,r=g.knightLShape),"tools"in g&&s(4,n=g.tools)},t.$$.update=()=>{t.$$.dirty&16&&o(n)},[a,i,u,r,n,c]}class Sa extends Ie{constructor(e){super(),qe(this,e,ka,Ma,Fe,{flipped:1,svg:0,knightLShape:3,tools:4})}}function Ps(t,{delay:e=0,duration:s=400,easing:i=is,x:a=0,y:r=0,opacity:n=0}={}){const l=getComputedStyle(t),o=+l.opacity,u=l.transform==="none"?"":l.transform,c=o*(1-n);return{delay:e,duration:s,easing:i,css:(g,p)=>`
			transform: ${u} translate(${(1-g)*a}px, ${(1-g)*r}px);
			opacity: ${o-c*p}`}}function It(t,{delay:e=0,duration:s=400,easing:i=is}={}){const a=getComputedStyle(t),r=+a.opacity,n=parseFloat(a.height),l=parseFloat(a.paddingTop),o=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),g=parseFloat(a.borderTopWidth),p=parseFloat(a.borderBottomWidth);return{delay:e,duration:s,easing:i,css:k=>`overflow: hidden;opacity: ${Math.min(k*20,1)*r};height: ${k*n}px;padding-top: ${k*l}px;padding-bottom: ${k*o}px;margin-top: ${k*u}px;margin-bottom: ${k*c}px;border-top-width: ${k*g}px;border-bottom-width: ${k*p}px;`}}function wa(t){let e,s,i,a,r,n;return{c(){e=H("button"),s=H("img"),this.h()},l(l){e=V(l,"BUTTON",{});var o=z(e);s=V(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(C),this.h()},h(){ut(s.src,i=t[1])||m(s,"src",i),m(s,"alt",a="Promotion to "+t[0].toUpperCase()),m(s,"class","svelte-17pqsbb")},m(l,o){Z(l,e,o),I(e,s),r||(n=fe(e,"click",t[2]),r=!0)},p(l,[o]){o&1&&a!==(a="Promotion to "+l[0].toUpperCase())&&m(s,"alt",a)},i:Ae,o:Ae,d(l){l&&C(e),r=!1,n()}}}function Ca(t,e,s){let{piece:i}=e,{isWhite:a}=e,{showModal:r}=e;const n=kt(),l=(a?"w":"b")+i.toUpperCase(),o=Zt(l),u=()=>{n("newPromotion",i),s(3,r=!1)};return t.$$set=c=>{"piece"in c&&s(0,i=c.piece),"isWhite"in c&&s(4,a=c.isWhite),"showModal"in c&&s(3,r=c.showModal)},[i,o,u,r,a]}class Pa extends Ie{constructor(e){super(),qe(this,e,Ca,wa,Fe,{piece:0,isWhite:4,showModal:3})}}function ys(t,e,s){const i=t.slice();return i[7]=e[s],i}function As(t){let e,s,i,a,r,n,l=["q","r","b","n"],o=[];for(let c=0;c<4;c+=1)o[c]=Ts(ys(t,l,c));const u=c=>$(o[c],1,1,()=>{o[c]=null});return{c(){e=H("div"),s=H("div");for(let c=0;c<4;c+=1)o[c].c();this.h()},l(c){e=V(c,"DIV",{class:!0});var g=z(e);s=V(g,"DIV",{class:!0});var p=z(s);for(let k=0;k<4;k+=1)o[k].l(p);p.forEach(C),g.forEach(C),this.h()},h(){m(s,"class","modal-content svelte-9nlhge"),m(e,"class",r="modal "+t[0]+" svelte-9nlhge")},m(c,g){Z(c,e,g),I(e,s);for(let p=0;p<4;p+=1)o[p].m(s,null);n=!0},p(c,g){if(g&6){l=["q","r","b","n"];let p;for(p=0;p<4;p+=1){const k=ys(c,l,p);o[p]?(o[p].p(k,g),J(o[p],1)):(o[p]=Ts(k),o[p].c(),J(o[p],1),o[p].m(s,null))}for(Be(),p=4;p<4;p+=1)u(p);Ue()}(!n||g&1&&r!==(r="modal "+c[0]+" svelte-9nlhge"))&&m(e,"class",r)},i(c){if(!n){for(let g=0;g<4;g+=1)J(o[g]);nt(()=>{a&&a.end(1),i=Hn(s,Ps,{x:100,duration:300}),i.start()}),n=!0}},o(c){o=o.filter(Boolean);for(let g=0;g<4;g+=1)$(o[g]);i&&i.invalidate(),a=Vn(s,Ps,{x:-200,duration:100}),n=!1},d(c){c&&C(e),it(o,c),c&&a&&a.end()}}}function Ts(t){let e,s,i,a;function r(o){t[4](o)}function n(o){t[5](o)}let l={piece:t[7]};return t[2]!==void 0&&(l.isWhite=t[2]),t[1]!==void 0&&(l.showModal=t[1]),e=new Pa({props:l}),oe.push(()=>ge(e,"isWhite",r)),oe.push(()=>ge(e,"showModal",n)),e.$on("newPromotion",t[6]),{c(){_e(e.$$.fragment)},l(o){Ee(e.$$.fragment,o)},m(o,u){Me(e,o,u),a=!0},p(o,u){const c={};!s&&u&4&&(s=!0,c.isWhite=o[2],be(()=>s=!1)),!i&&u&2&&(i=!0,c.showModal=o[1],be(()=>i=!1)),e.$set(c)},i(o){a||(J(e.$$.fragment,o),a=!0)},o(o){$(e.$$.fragment,o),a=!1},d(o){ke(e,o)}}}function ya(t){let e,s,i=t[1]&&As(t);return{c(){i&&i.c(),e=Le()},l(a){i&&i.l(a),e=Le()},m(a,r){i&&i.m(a,r),Z(a,e,r),s=!0},p(a,[r]){a[1]?i?(i.p(a,r),r&2&&J(i,1)):(i=As(a),i.c(),J(i,1),i.m(e.parentNode,e)):i&&(Be(),$(i,1,1,()=>{i=null}),Ue())},i(a){s||(J(i),s=!0)},o(a){$(i),s=!1},d(a){i&&i.d(a),a&&C(e)}}}function Aa(t,e,s){let i=!1,a,{className:r=""}=e;function n(c){s(1,i=!0),c?s(2,a=!0):s(2,a=!1)}function l(c){a=c,s(2,a)}function o(c){i=c,s(1,i)}function u(c){je.call(this,t,c)}return t.$$set=c=>{"className"in c&&s(0,r=c.className)},[r,i,a,n,l,o,u]}class Ta extends Ie{constructor(e){super(),qe(this,e,Aa,ya,Fe,{className:0,openPromotionModal:3})}get openPromotionModal(){return this.$$.ctx[3]}}const La=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,Oa=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,Ia=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,qa=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function Ls(t){let e,s,i,a;return{c(){e=H("audio"),s=H("track"),i=H("source"),this.h()},l(r){e=V(r,"AUDIO",{preload:!0});var n=z(e);s=V(n,"TRACK",{kind:!0}),i=V(n,"SOURCE",{src:!0}),n.forEach(C),this.h()},h(){m(s,"kind","captions"),ut(i.src,a=La)||m(i,"src",a),m(e,"preload","auto")},m(r,n){Z(r,e,n),I(e,s),I(e,i),t[3](e)},p:Ae,d(r){r&&C(e),t[3](null)}}}function Os(t){let e,s,i,a;return{c(){e=H("audio"),s=H("track"),i=H("source"),this.h()},l(r){e=V(r,"AUDIO",{preload:!0});var n=z(e);s=V(n,"TRACK",{kind:!0}),i=V(n,"SOURCE",{src:!0}),n.forEach(C),this.h()},h(){m(s,"kind","captions"),ut(i.src,a=Oa)||m(i,"src",a),m(e,"preload","auto")},m(r,n){Z(r,e,n),I(e,s),I(e,i),t[4](e)},p:Ae,d(r){r&&C(e),t[4](null)}}}function Is(t){let e,s,i,a;return{c(){e=H("audio"),s=H("track"),i=H("source"),this.h()},l(r){e=V(r,"AUDIO",{preload:!0});var n=z(e);s=V(n,"TRACK",{kind:!0}),i=V(n,"SOURCE",{src:!0}),n.forEach(C),this.h()},h(){m(s,"kind","captions"),ut(i.src,a=Ia)||m(i,"src",a),m(e,"preload","auto")},m(r,n){Z(r,e,n),I(e,s),I(e,i),t[5](e)},p:Ae,d(r){r&&C(e),t[5](null)}}}function qs(t){let e,s,i,a;return{c(){e=H("audio"),s=H("track"),i=H("source"),this.h()},l(r){e=V(r,"AUDIO",{preload:!0});var n=z(e);s=V(n,"TRACK",{kind:!0}),i=V(n,"SOURCE",{src:!0}),n.forEach(C),this.h()},h(){m(s,"kind","captions"),ut(i.src,a=qa)||m(i,"src",a),m(e,"preload","auto")},m(r,n){Z(r,e,n),I(e,s),I(e,i),t[6](e)},p:Ae,d(r){r&&C(e),t[6](null)}}}function Fa(t){let e,s,i,a,r=t[0].MOVE&&Ls(t),n=t[0].CAPTURE&&Os(t),l=t[0].CASTLE&&Is(t),o=t[0].UNDO&&qs(t);return{c(){r&&r.c(),e=ee(),n&&n.c(),s=ee(),l&&l.c(),i=ee(),o&&o.c(),a=Le()},l(u){r&&r.l(u),e=te(u),n&&n.l(u),s=te(u),l&&l.l(u),i=te(u),o&&o.l(u),a=Le()},m(u,c){r&&r.m(u,c),Z(u,e,c),n&&n.m(u,c),Z(u,s,c),l&&l.m(u,c),Z(u,i,c),o&&o.m(u,c),Z(u,a,c)},p(u,[c]){u[0].MOVE?r?r.p(u,c):(r=Ls(u),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0].CAPTURE?n?n.p(u,c):(n=Os(u),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null),u[0].CASTLE?l?l.p(u,c):(l=Is(u),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),u[0].UNDO?o?o.p(u,c):(o=qs(u),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:Ae,o:Ae,d(u){r&&r.d(u),u&&C(e),n&&n.d(u),u&&C(s),l&&l.d(u),u&&C(i),o&&o.d(u),u&&C(a)}}}function Na(t,e,s){let{settings:i}=e;const a={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},r=()=>{a.CASTLE&&(a.CASTLE.pause(),s(1,a.CASTLE.currentTime=0,a)),a.MOVE&&(a.MOVE.pause(),s(1,a.MOVE.currentTime=0,a)),a.CAPTURE&&(a.CAPTURE.pause(),s(1,a.CAPTURE.currentTime=0,a)),a.UNDO&&(a.UNDO.pause(),s(1,a.UNDO.currentTime=0,a))},n=p=>p===void 0||i[p];function l(p){switch(r(),p){case"MOVE":a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CAPTURE":a.CAPTURE&&n("CAPTURE")?a.CAPTURE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CASTLE":a.CASTLE&&n("CASTLE")?a.CASTLE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"UNDO":a.UNDO&&n("UNDO")?(s(1,a.UNDO.volume=.3,a),a.UNDO.play()):a.MOVE&&n("MOVE")&&a.MOVE.play();break}}function o(p){oe[p?"unshift":"push"](()=>{a.MOVE=p,s(1,a)})}function u(p){oe[p?"unshift":"push"](()=>{a.CAPTURE=p,s(1,a)})}function c(p){oe[p?"unshift":"push"](()=>{a.CASTLE=p,s(1,a)})}function g(p){oe[p?"unshift":"push"](()=>{a.UNDO=p,s(1,a)})}return t.$$set=p=>{"settings"in p&&s(0,i=p.settings)},[i,a,l,o,u,c,g]}class Ra extends Ie{constructor(e){super(),qe(this,e,Na,Fa,Fe,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Fs=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,Ns=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function Da(t,e){let{mouseEvents:s}=e,i=e.curScale,a,r,n;function l(c){c.stopPropagation(),t.dispatchEvent(new CustomEvent("resizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-a)/3)),Math.max(0,Math.min(100,n+(c.pageY-r)/3))))}}))}function o(c){c.stopPropagation(),t.dispatchEvent(new CustomEvent("endResizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-a)/3)),Math.max(0,Math.min(100,n+(c.pageY-r)/3))))}})),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",o)}function u(c){!s||(c.stopPropagation(),c.button===0&&(a=c.pageX,r=c.pageY,n=i,window.addEventListener("pointermove",l),window.addEventListener("pointerup",o)))}return t.addEventListener("pointerdown",u),{update(c){i=c.curScale,s!==c.mouseEvents&&(s=c.mouseEvents)},destroy(){t.removeEventListener("mousedown",u)}}}function Ba(t){let e,s,i,a,r,n,l;return{c(){e=H("div"),s=Re("svg"),i=Re("path"),this.h()},l(o){e=V(o,"DIV",{style:!0,class:!0});var u=z(e);s=De(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var c=z(s);i=De(c,"path",{d:!0}),z(i).forEach(C),c.forEach(C),u.forEach(C),this.h()},h(){m(i,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),m(s,"xmlns","http://www.w3.org/2000/svg"),m(s,"viewBox","0 0 16 16"),m(s,"fill","currentColor"),Pe(e,"color",He.colors[t[0].state.board.boardTheme].black),m(e,"class",a=us(t[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")},m(o,u){Z(o,e,u),I(e,s),I(s,i),n||(l=[fe(e,"pointerdown",bn(t[3])),es(r=Da.call(null,e,{mouseEvents:t[1],curScale:t[0].state.board.scale})),fe(e,"resizing",t[4]),fe(e,"endResizing",t[5])],n=!0)},p(o,[u]){u&1&&Pe(e,"color",He.colors[o[0].state.board.boardTheme].black),u&2&&a!==(a=us(o[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")&&m(e,"class",a),r&&ts(r.update)&&u&3&&r.update.call(null,{mouseEvents:o[1],curScale:o[0].state.board.scale})},i:Ae,o:Ae,d(o){o&&C(e),n=!1,at(l)}}}function Ua(t,e,s){const i=kt();let{chessboard:a}=e,{mouseEvents:r=!0}=e;function n(u){je.call(this,t,u)}const l=u=>i("resizing",u.detail.scale),o=u=>i("endResizing",u.detail.scale);return t.$$set=u=>{"chessboard"in u&&s(0,a=u.chessboard),"mouseEvents"in u&&s(1,r=u.mouseEvents)},[a,r,i,n,l,o]}class Ha extends Ie{constructor(e){super(),qe(this,e,Ua,Ba,Fe,{chessboard:0,mouseEvents:1})}}function Rs(t,e,s){const i=t.slice();return i[79]=e[s],i}function Ds(t,e,s){const i=t.slice();return i[82]=e[s],i}function Bs(t){let e=[],s=new Map,i,a,r=t[6].state.pieces;const n=l=>l[82];for(let l=0;l<r.length;l+=1){let o=Ds(t,r,l),u=n(o);s.set(u,e[l]=Us(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Le()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Le()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Z(l,i,o),a=!0},p(l,o){o[0]&59470&&(r=l[6].state.pieces,Be(),e=pn(e,o,n,1,l,r,s,i.parentNode,mn,Us,i,Ds),Ue())},i(l){if(!a){for(let o=0;o<r.length;o+=1)J(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)$(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&C(i)}}}function Us(t,e){let s,i,a;function r(){return e[55](e[82])}function n(){return e[56](e[82])}function l(...u){return e[57](e[82],...u)}function o(){return e[59](e[82])}return i=new Sn({props:{square:e[82].square,name:e[82].name,mouseEvents:e[6].state.board.mouseEvents,legalState:e[6].state.legal,draggableState:e[6].state.draggable,selectableState:e[6].state.selectable,movableState:e[6].state.movable,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped}}),i.$on("move",e[13]),i.$on("clicked",r),i.$on("startMoving",n),i.$on("moving",l),i.$on("endDragging",e[58]),i.$on("select",o),i.$on("deselect",e[60]),{key:t,first:null,c(){s=Le(),_e(i.$$.fragment),this.h()},l(u){s=Le(),Ee(i.$$.fragment,u),this.h()},h(){this.first=s},m(u,c){Z(u,s,c),Me(i,u,c),a=!0},p(u,c){e=u;const g={};c[0]&64&&(g.square=e[82].square),c[0]&64&&(g.name=e[82].name),c[0]&64&&(g.mouseEvents=e[6].state.board.mouseEvents),c[0]&64&&(g.legalState=e[6].state.legal),c[0]&64&&(g.draggableState=e[6].state.draggable),c[0]&64&&(g.selectableState=e[6].state.selectable),c[0]&64&&(g.movableState=e[6].state.movable),c[0]&64&&(g.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),c[0]&64&&(g.flipped=e[6].flipped),i.$set(g)},i(u){a||(J(i.$$.fragment,u),a=!0)},o(u){$(i.$$.fragment,u),a=!1},d(u){u&&C(s),ke(i,u)}}}function Hs(t){let e,s;return e=new Sn({props:{isGhost:!0,square:t[6].ghostPiece.square,name:t[6].ghostPiece.name,getGridCoordsFromSquare:t[6].getGridCoordsFromSquare,flipped:t[6].flipped}}),{c(){_e(e.$$.fragment)},l(i){Ee(e.$$.fragment,i)},m(i,a){Me(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.square=i[6].ghostPiece.square),a[0]&64&&(r.name=i[6].ghostPiece.name),a[0]&64&&(r.getGridCoordsFromSquare=i[6].getGridCoordsFromSquare),a[0]&64&&(r.flipped=i[6].flipped),e.$set(r)},i(i){s||(J(e.$$.fragment,i),s=!0)},o(i){$(e.$$.fragment,i),s=!1},d(i){ke(e,i)}}}function Vs(t){let e=[],s=new Map,i,a,r=[...t[6].state.markedSquares];const n=l=>l[79];for(let l=0;l<r.length;l+=1){let o=Rs(t,r,l),u=n(o);s.set(u,e[l]=Ks(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Le()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Le()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Z(l,i,o),a=!0},p(l,o){o[0]&66&&(r=[...l[6].state.markedSquares],Be(),e=pn(e,o,n,1,l,r,s,i.parentNode,mn,Ks,i,Rs),Ue())},i(l){if(!a){for(let o=0;o<r.length;o+=1)J(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)$(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&C(i)}}}function Ks(t,e){let s,i,a;return i=new ga({props:{theme:e[6].state.board.boardTheme,square:e[79].square,color:e[79].color,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped,mouseEvents:e[6].state.board.mouseEvents,corner:e[79].square==="a8"?"top-left":e[79].square==="h8"?"top-right":e[79].square==="a1"?"bottom-left":e[79].square==="h1"?"bottom-right":""}}),i.$on("dragenter",e[61]),{key:t,first:null,c(){s=Le(),_e(i.$$.fragment),this.h()},l(r){s=Le(),Ee(i.$$.fragment,r),this.h()},h(){this.first=s},m(r,n){Z(r,s,n),Me(i,r,n),a=!0},p(r,n){e=r;const l={};n[0]&64&&(l.theme=e[6].state.board.boardTheme),n[0]&64&&(l.square=e[79].square),n[0]&64&&(l.color=e[79].color),n[0]&64&&(l.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),n[0]&64&&(l.flipped=e[6].flipped),n[0]&64&&(l.mouseEvents=e[6].state.board.mouseEvents),n[0]&64&&(l.corner=e[79].square==="a8"?"top-left":e[79].square==="h8"?"top-right":e[79].square==="a1"?"bottom-left":e[79].square==="h1"?"bottom-right":""),i.$set(l)},i(r){a||(J(i.$$.fragment,r),a=!0)},o(r){$(i.$$.fragment,r),a=!1},d(r){r&&C(s),ke(i,r)}}}function zs(t){let e,s;return e=new ki({props:{theme:t[6].state.board.boardTheme,flipped:t[6].flipped}}),{c(){_e(e.$$.fragment)},l(i){Ee(e.$$.fragment,i)},m(i,a){Me(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.theme=i[6].state.board.boardTheme),a[0]&64&&(r.flipped=i[6].flipped),e.$set(r)},i(i){s||(J(e.$$.fragment,i),s=!0)},o(i){$(e.$$.fragment,i),s=!1},d(i){ke(e,i)}}}function Ws(t){let e,s;return e=new Ha({props:{chessboard:t[6],mouseEvents:t[6].state.board.mouseEvents}}),e.$on("resizing",t[62]),{c(){_e(e.$$.fragment)},l(i){Ee(e.$$.fragment,i)},m(i,a){Me(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.chessboard=i[6]),a[0]&64&&(r.mouseEvents=i[6].state.board.mouseEvents),e.$set(r)},i(i){s||(J(e.$$.fragment,i),s=!0)},o(i){$(e.$$.fragment,i),s=!1},d(i){ke(e,i)}}}function js(t){let e,s,i;function a(n){t[63](n)}let r={flipped:t[6].flipped,tools:t[6].state.drawTools.tools,knightLShape:t[6].state.drawTools.settings.knightLShape};return t[8]!==void 0&&(r.svg=t[8]),e=new Sa({props:r}),oe.push(()=>ge(e,"svg",a)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,l){const o={};l[0]&64&&(o.flipped=n[6].flipped),l[0]&64&&(o.tools=n[6].state.drawTools.tools),l[0]&64&&(o.knightLShape=n[6].state.drawTools.settings.knightLShape),!s&&l[0]&256&&(s=!0,o.svg=n[8],be(()=>s=!1)),e.$set(o)},i(n){i||(J(e.$$.fragment,n),i=!0)},o(n){$(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function Gs(t){let e,s,i={};return e=new Ta({props:i}),t[64](e),e.$on("newPromotion",t[16]),{c(){_e(e.$$.fragment)},l(a){Ee(e.$$.fragment,a)},m(a,r){Me(e,a,r),s=!0},p(a,r){const n={};e.$set(n)},i(a){s||(J(e.$$.fragment,a),s=!0)},o(a){$(e.$$.fragment,a),s=!1},d(a){t[64](null),ke(e,a)}}}function Qs(t){let e,s,i={settings:t[6].state.sounds.settings};return e=new Ra({props:i}),t[70](e),{c(){_e(e.$$.fragment)},l(a){Ee(e.$$.fragment,a)},m(a,r){Me(e,a,r),s=!0},p(a,r){const n={};r[0]&64&&(n.settings=a[6].state.sounds.settings),e.$set(n)},i(a){s||(J(e.$$.fragment,a),s=!0)},o(a){$(e.$$.fragment,a),s=!1},d(a){t[70](null),ke(e,a)}}}function Va(t){let e,s,i,a,r,n,l,o,u,c,g,p,k,q,O,w,T,f=t[6].state.board.startFen&&Bs(t),b=t[6].ghostPiece&&Hs(t),S=t[6].highlightEnabled&&Vs(t),A=t[6].state.board.notation&&zs(t),L=t[6].state.board.resizible&&Ws(t),N=t[6].state.drawTools.enabled&&js(t),K=t[6].legalEnabled&&Gs(t),B=t[6].soundsEnabled&&Qs(t);return{c(){e=H("div"),s=H("div"),i=H("div"),f&&f.c(),a=ee(),b&&b.c(),r=ee(),S&&S.c(),n=ee(),A&&A.c(),l=ee(),L&&L.c(),o=ee(),N&&N.c(),u=ee(),K&&K.c(),k=ee(),B&&B.c(),q=Le(),this.h()},l(R){e=V(R,"DIV",{class:!0});var G=z(e);s=V(G,"DIV",{class:!0,style:!0});var ie=z(s);i=V(ie,"DIV",{style:!0,class:!0});var ve=z(i);f&&f.l(ve),ve.forEach(C),a=te(ie),b&&b.l(ie),r=te(ie),S&&S.l(ie),n=te(ie),A&&A.l(ie),l=te(ie),L&&L.l(ie),o=te(ie),N&&N.l(ie),u=te(ie),K&&K.l(ie),ie.forEach(C),G.forEach(C),k=te(R),B&&B.l(R),q=Le(),this.h()},h(){Pe(i,"width","100%"),Pe(i,"height","100%"),m(i,"class","noselect"),m(s,"class",c="noselect board text-sm "+t[0]+" svelte-42iz37"),Pe(s,"--boardTheme","url("+(t[6].state.board.boardTheme==="standard"?Fs:Ns)+")"),nt(()=>t[68].call(s)),m(e,"class","boardWrapper svelte-42iz37")},m(R,G){Z(R,e,G),I(e,s),I(s,i),f&&f.m(i,null),I(s,a),b&&b.m(s,null),I(s,r),S&&S.m(s,null),I(s,n),A&&A.m(s,null),I(s,l),L&&L.m(s,null),I(s,o),N&&N.m(s,null),I(s,u),K&&K.m(s,null),t[67](s),p=dn(s,t[68].bind(s)),t[69](e),Z(R,k,G),B&&B.m(R,G),Z(R,q,G),O=!0,w||(T=[fe(s,"pointerdown",t[12]),fe(s,"contextmenu",cs(t[53])),fe(s,"drag",cs(t[54])),es(g=Ea.call(null,s,{svg:t[8],flipped:t[6].flipped,enabled:t[6].state.drawTools.enabled&&t[6].state.board.mouseEvents,settings:t[6].state.drawTools.settings})),fe(s,"drawCircle",t[65]),fe(s,"drawArrow",t[66])],w=!0)},p(R,G){R[6].state.board.startFen?f?(f.p(R,G),G[0]&64&&J(f,1)):(f=Bs(R),f.c(),J(f,1),f.m(i,null)):f&&(Be(),$(f,1,1,()=>{f=null}),Ue()),R[6].ghostPiece?b?(b.p(R,G),G[0]&64&&J(b,1)):(b=Hs(R),b.c(),J(b,1),b.m(s,r)):b&&(Be(),$(b,1,1,()=>{b=null}),Ue()),R[6].highlightEnabled?S?(S.p(R,G),G[0]&64&&J(S,1)):(S=Vs(R),S.c(),J(S,1),S.m(s,n)):S&&(Be(),$(S,1,1,()=>{S=null}),Ue()),R[6].state.board.notation?A?(A.p(R,G),G[0]&64&&J(A,1)):(A=zs(R),A.c(),J(A,1),A.m(s,l)):A&&(Be(),$(A,1,1,()=>{A=null}),Ue()),R[6].state.board.resizible?L?(L.p(R,G),G[0]&64&&J(L,1)):(L=Ws(R),L.c(),J(L,1),L.m(s,o)):L&&(Be(),$(L,1,1,()=>{L=null}),Ue()),R[6].state.drawTools.enabled?N?(N.p(R,G),G[0]&64&&J(N,1)):(N=js(R),N.c(),J(N,1),N.m(s,u)):N&&(Be(),$(N,1,1,()=>{N=null}),Ue()),R[6].legalEnabled?K?(K.p(R,G),G[0]&64&&J(K,1)):(K=Gs(R),K.c(),J(K,1),K.m(s,null)):K&&(Be(),$(K,1,1,()=>{K=null}),Ue()),(!O||G[0]&1&&c!==(c="noselect board text-sm "+R[0]+" svelte-42iz37"))&&m(s,"class",c),(!O||G[0]&64)&&Pe(s,"--boardTheme","url("+(R[6].state.board.boardTheme==="standard"?Fs:Ns)+")"),g&&ts(g.update)&&G[0]&320&&g.update.call(null,{svg:R[8],flipped:R[6].flipped,enabled:R[6].state.drawTools.enabled&&R[6].state.board.mouseEvents,settings:R[6].state.drawTools.settings}),R[6].soundsEnabled?B?(B.p(R,G),G[0]&64&&J(B,1)):(B=Qs(R),B.c(),J(B,1),B.m(q.parentNode,q)):B&&(Be(),$(B,1,1,()=>{B=null}),Ue())},i(R){O||(J(f),J(b),J(S),J(A),J(L),J(N),J(K),J(B),O=!0)},o(R){$(f),$(b),$(S),$(A),$(L),$(N),$(K),$(B),O=!1},d(R){R&&C(e),f&&f.d(),b&&b.d(),S&&S.d(),A&&A.d(),L&&L.d(),N&&N.d(),K&&K.d(),t[67](null),p(),t[69](null),R&&C(k),B&&B.d(R),R&&C(q),w=!1,at(T)}}}function Ka(t,e,s){let i,{config:a}=e,{className:r=""}=e;const n=new di(a),l=kt();let o,u,c,g,p,k="";const q=_=>{n.clearAllSquares(_),_===X.LEGAL&&n.clearAllSquares(X.LEGALHOVER),_===X.PREMOVE&&n.clearAllSquares(X.PREMOVEHOVER),s(6,n)},O=(_,j)=>{!w(Ct(j))||(n.highlightSquare(_,j),s(6,n))},w=_=>n.highlightEnabled&&(_===void 0||n.highlightSettings[typeof _=="string"?_:Ct(_)]),T=_=>{if(!n.selectableEnabled&&n.draggableEnabled&&Y(_),!n.selectableEnabled)return;f(!0);const j=n.getPieceFromSquare(_);j!==void 0&&(s(6,n.selectedPiece=j,n),Y())},f=(_=!0)=>{q(X.SELECT),q(X.LEGAL),q(X.PREMOVE),s(6,n.selectedPiece=void 0,n),_&&(q(X.NEXTMOVE),s(6,n.currentPreMove="",n))},b=_=>{q(X.CHECK),_&&n.legalEnabled&&O(_,X.CHECK),s(6,n)},S=()=>{q(X.CHECK)},A=_=>{n.flipBoard(_),s(6,n)},L=(_,j)=>{_.forEach(ne=>n.highlightSquare(ne,j)),s(6,n)},N=(_,j=!0,ne=X.MOVE)=>{_.length<4||!w(Ct(ne))||(j&&q(ne),L([_.substring(0,2),_.substring(2,4)],ne))},K=(_,j,ne=X.MOVE)=>{const me=[];j&&q(ne),_.forEach(Te=>{Te.length<4||(me.push(Te.substring(0,2)),me.push(Te.substring(2,4)))}),L(me,ne)},B=_=>{O(_.substring(2,4),X.LEGAL)},R=(_,j,ne=X.LEGAL)=>{q(ne),w(Ct(ne))&&(_.forEach(me=>{me.length<4||(j===void 0||me.substring(0,2)===j)&&n.highlightSquare(me.substring(2,4),ne)}),s(6,n))},G=(_,j=!0)=>{n.makeMove(_),j&&N(_),s(6,n)},ie=_=>{var j;n.removePiece(_),n.ghostPieceEnabled&&((j=n.ghostPiece)==null?void 0:j.square)===_&&(n.removeGhostPiece(),s(6,n)),s(6,n)},ve=_=>n.whiteToMove&&_[0]==="w"||!n.whiteToMove&&_[0]==="b",x=(_=!1)=>{!n.legalEnabled||(n.state.callbacks.getWhiteToMove&&s(6,n.whiteToMove=n.state.callbacks.getWhiteToMove(),n),n.state.callbacks.getPreMoves&&n.preMovesEnabled?s(6,n.preMoves=n.state.callbacks.getPreMoves(),n):s(6,n.preMoves=[],n),n.state.callbacks.getLegalMoves&&n.state.legal.enabled?s(6,n.legalMoves=n.state.callbacks.getLegalMoves(),n):s(6,n.legalMoves=[],n),_&&Y(),n.state.callbacks.getInCheck&&n.state.callbacks.getInCheck()?n.whiteToMove?b(n.getWhiteKingSquare()):b(n.getBlackKingSquare()):S(),n.state.callbacks.getLastMove?(s(6,n.lastMove=n.state.callbacks.getLastMove(),n),N(n.lastMove)):q(X.MOVE))},d=_=>{n.soundsEnabled&&g&&g.playMoveSound(_)},M=_=>{n.setGhostPiece(_),s(6,n)},h=()=>{n.removeGhostPiece(),s(6,n)},v=_=>{if(_.substring(0,2)===_.substring(2,4))return;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(_),f(!1);const j=n.getRookMoveIfIsCastling(_),ne=n.getCapturedPawnSquareIfIsEnPassant(_);if(j&&n.legalEnabled&&n.state.legal.settings.allowCastling?(G(j,!1),d("CASTLE")):ne&&n.legalEnabled&&n.state.legal.settings.allowEnPassant?(ie(ne),d("CAPTURE")):n.isCapture(_)?d("CAPTURE"):d("MOVE"),h(),G(_),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(_),x(),n.legalEnabled&&n.preMovesEnabled&&n.currentPreMove!==""){if(n.legalMoves.includes(n.currentPreMove)||n.legalMoves.includes(`${n.currentPreMove}q`)){const me=n.currentPreMove;zn().then(()=>{v(me)})}s(6,n.currentPreMove="",n),q(X.NEXTMOVE)}},y=_=>{!n.legalEnabled||!n.preMovesEnabled||!n.movableEnabled||(q(X.PREMOVE),N(_,!0,X.NEXTMOVE),s(6,n.currentPreMove=_,n),l("nextMove",{move:_}))},P=_=>{const j=n.getPieceFromSquare(_.substring(0,2));if(!j)return;const ne=j.name[0]==="w"?he.WHITE:he.BLACK;p.openPromotionModal(ne===he.WHITE),k=_,n.makeMove(_),q(X.LEGAL),q(X.SELECT),N(_)},E=(_,j)=>{n.clearSquare(_,j),s(6,n)},F=()=>{n.clearAllPieces(),s(6,n)},Q=(_,j)=>{n.setPiece(_,j),s(6,n)},ae=(_,j)=>{var me;const ne=(me=n.getPieceFromSquare(_))==null?void 0:me.name;!ne||(j!==void 0?n.setPiece(_,`${j===he.WHITE?"w":"b"}${ne[1]}`):n.setPiece(_,`${ne[0]==="w"?"b":"w"}${ne[1]}`),s(6,n))},se=(_,j)=>{const ne=Math.floor(_/n.state.board.size*8),me=Math.floor(j/n.state.board.size*8),Te=n.flipped?Math.abs(ne-7):ne,$e=n.flipped?me:Math.abs(me-7);return`${Object.keys(n.letters)[Te]}${($e+1).toString()}`},W=_=>{if(!n.state.board.mouseEvents)return;if(_.button===2){f();return}if(!n.movableEnabled)return;const j=o.getBoundingClientRect(),ne=_.clientX-j.left,me=_.clientY-j.top,Te=se(ne,me),$e=n.getPieceFromSquare(Te);if(l("squareClick",{square:Te,piece:$e?$e.name:void 0}),!n.selectableEnabled&&!n.draggableEnabled){f();return}if(n.selectedPiece&&n.selectedPiece.square!==Te&&!n.legalEnabled){v(n.selectedPiece.square+Te),f();return}if(n.selectedPiece&&n.selectedPiece.square!==Te&&!ve(n.selectedPiece.name)){n.preMovesEnabled&&n.preMoves.includes(n.selectedPiece.square+Te)&&y(n.selectedPiece.square+Te),f(!1);return}n.selectedPiece&&n.selectedPiece.square!==Te&&($e===void 0||$e.name[0]!==n.selectedPiece.name[0])&&ve(n.selectedPiece.name)&&(n.isPromotion(n.selectedPiece.square+Te)&&n.legalMoves.includes(`${n.selectedPiece.square+Te}q`)?P(n.selectedPiece.square+Te):n.legalMoves.includes(n.selectedPiece.square+Te)&&v(n.selectedPiece.square+Te),f())},ce=_=>{const j=_.detail;n.legalEnabled?n.isPromotion(j)&&n.legalMoves.includes(`${j}q`)?P(j):n.legalMoves.includes(j)?v(j):n.preMovesEnabled&&n.preMoves.includes(j)?y(j):f():v(j),q(X.LEGAL),q(X.PREMOVE),s(6,n)},Y=_=>{var j;if(n.selectableEnabled||n.draggableEnabled){const ne=n.getPieceFromSquare(_!=null?_:(j=n.selectedPiece)==null?void 0:j.square);if(!ne||(n.selectableEnabled&&O(ne.square,X.SELECT),!n.legalEnabled))return;q(X.LEGAL),q(X.PREMOVE),ve(ne.name)&&R(n.legalMoves,ne.square),ve(ne.name)||R(n.preMoves,ne.square,X.PREMOVE)}},re=(_,j=!0,ne="MOVE")=>{if(n.updatePiecesWithFen(_),j&&f(),q(),h(),x(!1),s(6,n.currentPreMove="",n),n.state.callbacks.getLastMove){const me=n.state.callbacks.getLastMove();s(6,n.lastMove=me,n),ne!==!1&&(ne!=="MOVE"?d(ne):n.isCastling(me)?d("CASTLE"):d(ne)),N(me)}else ne!==!1&&d(ne);Y(),s(6,n)},ue=()=>n.getShortFEN(),pe=_=>{!_||n.state.board.size===_||(s(6,n.state.board.size=_,n),n.state.board.resizible&&document.body.style.setProperty("--boardSize",`${n.state.board.size}px`))},Oe=_=>{!_||n.state.board.scale===_||(s(6,n.state.board.scale=_,n),n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`))},le=_=>{var j;return(j=n.getPieceFromSquare(_))==null?void 0:j.name},Se=_=>{s(6,n.state.drawTools.tools=_,n)},Ne=_=>{s(6,n.state.drawTools.tools=n.state.drawTools.tools.filter(j=>_?(!_.type||j.type!==_.type)&&(!_.from||j.type==="arrow"&&j.from!==_.from||j.type==="circle"&&j.square!==_.from)&&(!_.to||j.type==="arrow"&&j.to!==_.to)&&(_.fixed===void 0||j.fixed!==_.fixed):!1),n)},Ge=_=>{_===!1?s(6,n.state.movable.enabled=!1,n):(s(6,n.state.movable.enabled=!0,n),s(6,n.state.movable.color=_===!0?he.BOTH:_,n))},Qe=_=>{_.length<4||(s(6,n.lastMove=_,n),N(_))},Ke=_=>{s(6,n.legalMoves=_,n)},Ve=_=>{s(6,n.preMoves=_,n)},gt=()=>n.state,ct=_=>{s(6,n.state=_,n),q(),x(!1),N(n.lastMove),N(n.currentPreMove,!0,X.NEXTMOVE),Y()},Xe=_=>{_!==void 0&&(n.setConfigSettings(_),s(6,n),ct(n.state))},bt=_=>_.getConfig(),lt=(_,j)=>{const ne=o.getBoundingClientRect();n.legalEnabled&&(ve(j.name)&&n.legalHover(se(_.detail.x-ne.x,_.detail.y-ne.y)),!ve(j.name)&&n.preMovesEnabled&&n.preMoveHover(se(_.detail.x-ne.x,_.detail.y-ne.y))),s(6,n)},ft=_=>{n.ghostPieceEnabled&&M(_),q(X.SELECT)},ze=_=>{const j=n.getPieceFromSquare(k.substring(2,4));if(!j)return;const ne=j.name[0]+_.detail.toUpperCase(),me=k+_.detail;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(me),n.setPiece(j.square,ne),s(6,n),d("MOVE"),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(me),x()};function pt(_){if(!o||!_)return;if(i==null||i(),typeof window.ResizeObserver>"u")throw new Error("window.ResizeObserver is missing.");const j=new ResizeObserver(ne=>{const me=_.getBoundingClientRect();ne.forEach(()=>{o.style.setProperty("width",`${Math.floor(me.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`),o.style.setProperty("height",`${Math.floor(me.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`)})});return j.observe(_),()=>{j.unobserve(_),j.disconnect()}}ss(()=>{x(!0),n.state.callbacks.getLastMove&&N(n.state.callbacks.getLastMove()),n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`)}),Kn(()=>{i==null||i(),n.state.board.resizible&&document.body.style.removeProperty("--boardScale")});function We(_){je.call(this,t,_)}function Je(_){je.call(this,t,_)}const mt=_=>{l("piececlick",{piece:_}),T(_.square)},St=_=>{l("startDragging",{piece:_}),ft(_)},Ft=(_,j)=>lt(j,_);function Nt(_){je.call(this,t,_)}const Rt=_=>{O(_.square,X.SELECT)},Dt=()=>{f()},Bt=_=>{O(_.detail.square,X.LEGALHOVER)},xe=_=>{Oe(_.detail)};function Ut(_){c=_,s(8,c)}function Ht(_){oe[_?"unshift":"push"](()=>{p=_,s(10,p)})}const vt=_=>l("drawCircle",{square:_.detail.square,color:_.detail.color}),Vt=_=>l("drawArrow",{move:_.detail.move,color:_.detail.color});function Kt(_){oe[_?"unshift":"push"](()=>{o=_,s(7,o)})}function zt(){n.state.board.size=this.clientWidth,s(6,n)}function Wt(_){oe[_?"unshift":"push"](()=>{u=_,s(5,u)})}function jt(_){oe[_?"unshift":"push"](()=>{g=_,s(9,g)})}return t.$$set=_=>{"config"in _&&s(17,a=_.config),"className"in _&&s(0,r=_.className)},t.$$.update=()=>{t.$$.dirty[0]&32&&(i=pt(u))},[r,O,T,f,Oe,u,n,o,c,g,p,l,W,ce,lt,ft,ze,a,q,b,S,A,L,N,K,B,R,G,ie,x,d,v,y,P,E,F,Q,ae,se,re,ue,pe,le,Se,Ne,Ge,Qe,Ke,Ve,gt,ct,Xe,bt,We,Je,mt,St,Ft,Nt,Rt,Dt,Bt,xe,Ut,Ht,vt,Vt,Kt,zt,Wt,jt]}class za extends Ie{constructor(e){super(),qe(this,e,Ka,Va,Fe,{config:17,className:0,clearAllSquares:18,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:19,removeCheckSquare:20,flipBoard:21,highlightManySquares:22,highlightMove:23,highlightMoves:24,highlightLegalMove:25,highlightLegalMoves:26,movePiece:27,removePiece:28,updateLegalState:29,playMoveSound:30,makeMove:31,makeNextMove:32,makeMovePromotion:33,removeSquareHighlight:34,removeAllPiece:35,createPiece:36,changeColorOfPiece:37,getSquareFromCoords:38,setFEN:39,getShortFEN:40,setSize:41,setScale:4,getPieceFromSquare:42,setTools:43,removeTools:44,setMovableColor:45,setLastMove:46,setLegalMoves:47,setPreMoves:48,getState:49,setState:50,setConfigSettings:51,getConfigFromState:52},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[18]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[19]}get removeCheckSquare(){return this.$$.ctx[20]}get flipBoard(){return this.$$.ctx[21]}get highlightManySquares(){return this.$$.ctx[22]}get highlightMove(){return this.$$.ctx[23]}get highlightMoves(){return this.$$.ctx[24]}get highlightLegalMove(){return this.$$.ctx[25]}get highlightLegalMoves(){return this.$$.ctx[26]}get movePiece(){return this.$$.ctx[27]}get removePiece(){return this.$$.ctx[28]}get updateLegalState(){return this.$$.ctx[29]}get playMoveSound(){return this.$$.ctx[30]}get makeMove(){return this.$$.ctx[31]}get makeNextMove(){return this.$$.ctx[32]}get makeMovePromotion(){return this.$$.ctx[33]}get removeSquareHighlight(){return this.$$.ctx[34]}get removeAllPiece(){return this.$$.ctx[35]}get createPiece(){return this.$$.ctx[36]}get changeColorOfPiece(){return this.$$.ctx[37]}get getSquareFromCoords(){return this.$$.ctx[38]}get setFEN(){return this.$$.ctx[39]}get getShortFEN(){return this.$$.ctx[40]}get setSize(){return this.$$.ctx[41]}get setScale(){return this.$$.ctx[4]}get getPieceFromSquare(){return this.$$.ctx[42]}get setTools(){return this.$$.ctx[43]}get removeTools(){return this.$$.ctx[44]}get setMovableColor(){return this.$$.ctx[45]}get setLastMove(){return this.$$.ctx[46]}get setLegalMoves(){return this.$$.ctx[47]}get setPreMoves(){return this.$$.ctx[48]}get getState(){return this.$$.ctx[49]}get setState(){return this.$$.ctx[50]}get setConfigSettings(){return this.$$.ctx[51]}get getConfigFromState(){return this.$$.ctx[52]}}const Xs=["standard","darkBlue"],Ys=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function Zs(t){let e,s,i;return{c(){e=H("input"),this.h()},l(a){e=V(a,"INPUT",{type:!0,class:!0}),this.h()},h(){m(e,"type","checkbox"),m(e,"class","mr-1")},m(a,r){Z(a,e,r),e.checked=t[0],s||(i=[fe(e,"change",t[8]),fe(e,"click",bn(t[7])),fe(e,"change",t[9])],s=!0)},p(a,r){r&1&&(e.checked=a[0])},d(a){a&&C(e),s=!1,at(i)}}}function Js(t){let e,s,i;return{c(){e=Re("svg"),s=Re("path"),this.h()},l(a){e=De(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=z(e);s=De(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),z(s).forEach(C),r.forEach(C),this.h()},h(){m(s,"fill-rule","evenodd"),m(s,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),m(s,"clip-rule","evenodd"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 20 20"),m(e,"fill","currentColor"),m(e,"class",i="w-5 h-5 transition "+(t[1]?"rotate-180":"rotate-0"))},m(a,r){Z(a,e,r),I(e,s)},p(a,r){r&2&&i!==(i="w-5 h-5 transition "+(a[1]?"rotate-180":"rotate-0"))&&m(e,"class",i)},d(a){a&&C(e)}}}function xs(t){let e,s,i;const a=t[6].default,r=un(a,t,t[5],null);return{c(){e=H("div"),r&&r.c(),this.h()},l(n){e=V(n,"DIV",{class:!0});var l=z(e);r&&r.l(l),l.forEach(C),this.h()},h(){m(e,"class","py-2 px-4")},m(n,l){Z(n,e,l),r&&r.m(e,null),i=!0},p(n,l){r&&r.p&&(!i||l&32)&&cn(r,a,n,n[5],i?hn(a,n[5],l,null):fn(n[5]),null)},i(n){i||(J(r,n),n&&nt(()=>{s||(s=Tt(e,It,{},!0)),s.run(1)}),i=!0)},o(n){$(r,n),n&&(s||(s=Tt(e,It,{},!1)),s.run(0)),i=!1},d(n){n&&C(e),r&&r.d(n),n&&s&&s.end()}}}function Wa(t){let e,s,i,a,r,n,l,o,u,c,g,p,k,q,O=t[0]!==void 0&&Zs(t),w=t[3]&&Js(t),T=t[1]&&xs(t);return{c(){e=H("div"),s=H("button"),i=H("div"),O&&O.c(),a=ee(),r=H("span"),n=we(t[2]),o=ee(),w&&w.c(),g=ee(),T&&T.c(),this.h()},l(f){e=V(f,"DIV",{class:!0});var b=z(e);s=V(b,"BUTTON",{class:!0});var S=z(s);i=V(S,"DIV",{class:!0});var A=z(i);O&&O.l(A),a=te(A),r=V(A,"SPAN",{class:!0});var L=z(r);n=Ce(L,t[2]),L.forEach(C),A.forEach(C),o=te(S),w&&w.l(S),S.forEach(C),g=te(b),T&&T.l(b),b.forEach(C),this.h()},h(){m(r,"class",l=t[0]===void 0?"ml-[21px]":""),m(i,"class","flex gap-1"),m(s,"class",u="flex justify-between px-4 py-2 "+(t[3]?"transition hover:bg-slate-800/40":"")+" rounded"),s.disabled=c=!t[3],m(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(f,b){Z(f,e,b),I(e,s),I(s,i),O&&O.m(i,null),I(i,a),I(i,r),I(r,n),I(s,o),w&&w.m(s,null),I(e,g),T&&T.m(e,null),p=!0,k||(q=fe(s,"click",t[10]),k=!0)},p(f,[b]){f[0]!==void 0?O?O.p(f,b):(O=Zs(f),O.c(),O.m(i,a)):O&&(O.d(1),O=null),(!p||b&4)&&qt(n,f[2]),(!p||b&1&&l!==(l=f[0]===void 0?"ml-[21px]":""))&&m(r,"class",l),f[3]?w?w.p(f,b):(w=Js(f),w.c(),w.m(s,null)):w&&(w.d(1),w=null),(!p||b&8&&u!==(u="flex justify-between px-4 py-2 "+(f[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&m(s,"class",u),(!p||b&8&&c!==(c=!f[3]))&&(s.disabled=c),f[1]?T?(T.p(f,b),b&2&&J(T,1)):(T=xs(f),T.c(),J(T,1),T.m(e,null)):T&&(Be(),$(T,1,1,()=>{T=null}),Ue())},i(f){p||(J(T),p=!0)},o(f){$(T),p=!1},d(f){f&&C(e),O&&O.d(),w&&w.d(),T&&T.d(),k=!1,q()}}}function ja(t,e,s){let{$$slots:i={},$$scope:a}=e;const r=kt();let{name:n="board"}=e,{enabled:l=void 0}=e,{showExpand:o=!0}=e,{expanded:u=!1}=e;function c(q){je.call(this,t,q)}const g=()=>r("changed",l);function p(){l=this.checked,s(0,l)}const k=()=>{s(1,u=!u)};return t.$$set=q=>{"name"in q&&s(2,n=q.name),"enabled"in q&&s(0,l=q.enabled),"showExpand"in q&&s(3,o=q.showExpand),"expanded"in q&&s(1,u=q.expanded),"$$scope"in q&&s(5,a=q.$$scope)},[l,u,n,o,r,a,i,c,g,p,k]}class rt extends Ie{constructor(e){super(),qe(this,e,ja,Wa,Fe,{name:2,enabled:0,showExpand:3,expanded:1})}}function $s(t,e,s){const i=t.slice();return i[12]=e[s],i}function en(t){let e,s=t[12]+"",i;return{c(){e=H("option"),i=we(s),this.h()},l(a){e=V(a,"OPTION",{});var r=z(e);i=Ce(r,s),r.forEach(C),this.h()},h(){e.__value=t[12],e.value=e.__value},m(a,r){Z(a,e,r),I(e,i)},p:Ae,d(a){a&&C(e)}}}function Ga(t){let e,s,i,a,r,n,l,o,u,c,g,p,k,q,O,w,T,f,b,S,A,L,N,K,B,R,G,ie,ve,x,d,M=Xs,h=[];for(let v=0;v<M.length;v+=1)h[v]=en($s(t,M,v));return{c(){e=H("div"),s=H("select");for(let v=0;v<h.length;v+=1)h[v].c();i=ee(),a=H("label"),r=we("board theme"),n=ee(),l=H("div"),o=H("input"),u=ee(),c=H("label"),g=we("mouseEvents"),p=ee(),k=H("div"),q=H("input"),O=ee(),w=H("label"),T=we("notation"),f=ee(),b=H("div"),S=H("input"),A=ee(),L=H("label"),N=we("flipped"),K=ee(),B=H("div"),R=H("input"),G=ee(),ie=H("label"),ve=we("resizible"),this.h()},l(v){e=V(v,"DIV",{class:!0});var y=z(e);s=V(y,"SELECT",{class:!0});var P=z(s);for(let ue=0;ue<h.length;ue+=1)h[ue].l(P);P.forEach(C),i=te(y),a=V(y,"LABEL",{for:!0,class:!0});var E=z(a);r=Ce(E,"board theme"),E.forEach(C),y.forEach(C),n=te(v),l=V(v,"DIV",{class:!0});var F=z(l);o=V(F,"INPUT",{id:!0,type:!0,class:!0}),u=te(F),c=V(F,"LABEL",{for:!0,class:!0});var Q=z(c);g=Ce(Q,"mouseEvents"),Q.forEach(C),F.forEach(C),p=te(v),k=V(v,"DIV",{class:!0});var ae=z(k);q=V(ae,"INPUT",{id:!0,type:!0,class:!0}),O=te(ae),w=V(ae,"LABEL",{for:!0,class:!0});var se=z(w);T=Ce(se,"notation"),se.forEach(C),ae.forEach(C),f=te(v),b=V(v,"DIV",{class:!0});var W=z(b);S=V(W,"INPUT",{id:!0,type:!0,class:!0}),A=te(W),L=V(W,"LABEL",{for:!0,class:!0});var ce=z(L);N=Ce(ce,"flipped"),ce.forEach(C),W.forEach(C),K=te(v),B=V(v,"DIV",{class:!0});var Y=z(B);R=V(Y,"INPUT",{id:!0,type:!0,class:!0}),G=te(Y),ie=V(Y,"LABEL",{for:!0,class:!0});var re=z(ie);ve=Ce(re,"resizible"),re.forEach(C),Y.forEach(C),this.h()},h(){m(s,"class","svelte-lnr7xr"),t[0]===void 0&&nt(()=>t[7].call(s)),m(a,"for","boardTheme"),m(a,"class","select-none"),m(e,"class","mb-2"),m(o,"id","mouseEvents"),m(o,"type","checkbox"),m(o,"class","svelte-lnr7xr"),m(c,"for","mouseEvents"),m(c,"class","select-none"),m(l,"class","mb-2"),m(q,"id","notation"),m(q,"type","checkbox"),m(q,"class","svelte-lnr7xr"),m(w,"for","notation"),m(w,"class","select-none"),m(k,"class","mb-2"),m(S,"id","flipped"),m(S,"type","checkbox"),m(S,"class","svelte-lnr7xr"),m(L,"for","flipped"),m(L,"class","select-none"),m(b,"class","mb-2"),m(R,"id","resizibleEnabled"),m(R,"type","checkbox"),m(R,"class","svelte-lnr7xr"),m(ie,"for","resizibleEnabled"),m(ie,"class","select-none"),m(B,"class","mt-2 mb-1")},m(v,y){Z(v,e,y),I(e,s);for(let P=0;P<h.length;P+=1)h[P].m(s,null);dt(s,t[0]),I(e,i),I(e,a),I(a,r),Z(v,n,y),Z(v,l,y),I(l,o),o.checked=t[1],I(l,u),I(l,c),I(c,g),Z(v,p,y),Z(v,k,y),I(k,q),q.checked=t[2],I(k,O),I(k,w),I(w,T),Z(v,f,y),Z(v,b,y),I(b,S),S.checked=t[3],I(b,A),I(b,L),I(L,N),Z(v,K,y),Z(v,B,y),I(B,R),R.checked=t[4],I(B,G),I(B,ie),I(ie,ve),x||(d=[fe(s,"change",t[7]),fe(o,"change",t[8]),fe(q,"change",t[9]),fe(S,"change",t[10]),fe(R,"change",t[11])],x=!0)},p(v,y){if(y&0){M=Xs;let P;for(P=0;P<M.length;P+=1){const E=$s(v,M,P);h[P]?h[P].p(E,y):(h[P]=en(E),h[P].c(),h[P].m(s,null))}for(;P<h.length;P+=1)h[P].d(1);h.length=M.length}y&1&&dt(s,v[0]),y&2&&(o.checked=v[1]),y&4&&(q.checked=v[2]),y&8&&(S.checked=v[3]),y&16&&(R.checked=v[4])},d(v){v&&C(e),it(h,v),v&&C(n),v&&C(l),v&&C(p),v&&C(k),v&&C(f),v&&C(b),v&&C(K),v&&C(B),x=!1,at(d)}}}function Qa(t){let e,s;return e=new rt({props:{name:t[5],expanded:t[6],$$slots:{default:[Ga]},$$scope:{ctx:t}}}),{c(){_e(e.$$.fragment)},l(i){Ee(e.$$.fragment,i)},m(i,a){Me(e,i,a),s=!0},p(i,[a]){const r={};a&32&&(r.name=i[5]),a&64&&(r.expanded=i[6]),a&32799&&(r.$$scope={dirty:a,ctx:i}),e.$set(r)},i(i){s||(J(e.$$.fragment,i),s=!0)},o(i){$(e.$$.fragment,i),s=!1},d(i){ke(e,i)}}}function Xa(t,e,s){let{name:i="Board"}=e,{boardTheme:a}=e,{mouseEvents:r}=e,{notation:n}=e,{flipped:l}=e,{resizible:o=!1}=e,{expanded:u=!1}=e;function c(){a=ns(this),s(0,a)}function g(){r=this.checked,s(1,r)}function p(){n=this.checked,s(2,n)}function k(){l=this.checked,s(3,l)}function q(){o=this.checked,s(4,o)}return t.$$set=O=>{"name"in O&&s(5,i=O.name),"boardTheme"in O&&s(0,a=O.boardTheme),"mouseEvents"in O&&s(1,r=O.mouseEvents),"notation"in O&&s(2,n=O.notation),"flipped"in O&&s(3,l=O.flipped),"resizible"in O&&s(4,o=O.resizible),"expanded"in O&&s(6,u=O.expanded)},[a,r,n,l,o,i,u,c,g,p,k,q]}class Ya extends Ie{constructor(e){super(),qe(this,e,Xa,Qa,Fe,{name:5,boardTheme:0,mouseEvents:1,notation:2,flipped:3,resizible:4,expanded:6})}}function Za(t){let e,s,i,a,r,n,l,o,u,c;return{c(){e=H("div"),s=H("select"),i=H("option"),a=we("Both"),r=H("option"),n=we("White"),l=H("option"),o=we("Black"),this.h()},l(g){e=V(g,"DIV",{});var p=z(e);s=V(p,"SELECT",{class:!0});var k=z(s);i=V(k,"OPTION",{});var q=z(i);a=Ce(q,"Both"),q.forEach(C),r=V(k,"OPTION",{});var O=z(r);n=Ce(O,"White"),O.forEach(C),l=V(k,"OPTION",{});var w=z(l);o=Ce(w,"Black"),w.forEach(C),k.forEach(C),p.forEach(C),this.h()},h(){i.__value=he.BOTH,i.value=i.__value,r.__value=he.WHITE,r.value=r.__value,l.__value=he.BLACK,l.value=l.__value,m(s,"class","svelte-xrxnwg"),t[1]===void 0&&nt(()=>t[4].call(s))},m(g,p){Z(g,e,p),I(e,s),I(s,i),I(i,a),I(s,r),I(r,n),I(s,l),I(l,o),dt(s,t[1]),u||(c=fe(s,"change",t[4]),u=!0)},p(g,p){p&2&&dt(s,g[1])},d(g){g&&C(e),u=!1,c()}}}function Ja(t){let e,s,i;function a(n){t[5](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[Za]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new rt({props:r}),oe.push(()=>ge(e,"enabled",a)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&66&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],be(()=>s=!1)),e.$set(o)},i(n){i||(J(e.$$.fragment,n),i=!0)},o(n){$(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function xa(t,e,s){let{name:i="Movable"}=e,{enabled:a=!1}=e,{color:r}=e,{expanded:n=!1}=e;function l(){r=ns(this),s(1,r)}function o(u){a=u,s(0,a)}return t.$$set=u=>{"name"in u&&s(2,i=u.name),"enabled"in u&&s(0,a=u.enabled),"color"in u&&s(1,r=u.color),"expanded"in u&&s(3,n=u.expanded)},[a,r,i,n,l,o]}class $a extends Ie{constructor(e){super(),qe(this,e,xa,Ja,Fe,{name:2,enabled:0,color:1,expanded:3})}}function tn(t,e,s){const i=t.slice();return i[12]=e[s],i}function sn(t){let e,s,i,a,r,n,l,o,u,c,g,p,k,q,O,w,T=Ys,f=[];for(let b=0;b<T.length;b+=1)f[b]=nn(tn(t,T,b));return{c(){e=H("div"),s=H("div"),i=H("input"),a=ee(),r=H("label"),n=we("duration"),l=ee(),o=H("div"),u=H("select");for(let b=0;b<f.length;b+=1)f[b].c();c=ee(),g=H("label"),p=we("easing"),this.h()},l(b){e=V(b,"DIV",{class:!0});var S=z(e);s=V(S,"DIV",{class:!0});var A=z(s);i=V(A,"INPUT",{id:!0,type:!0,class:!0}),a=te(A),r=V(A,"LABEL",{for:!0,class:!0});var L=z(r);n=Ce(L,"duration"),L.forEach(C),A.forEach(C),l=te(S),o=V(S,"DIV",{class:!0});var N=z(o);u=V(N,"SELECT",{id:!0,class:!0});var K=z(u);for(let R=0;R<f.length;R+=1)f[R].l(K);K.forEach(C),c=te(N),g=V(N,"LABEL",{for:!0,class:!0});var B=z(g);p=Ce(B,"easing"),B.forEach(C),N.forEach(C),S.forEach(C),this.h()},h(){m(i,"id","transitionDuration"),m(i,"type","number"),m(i,"class","w-16 svelte-1qpp6cx"),m(r,"for","transitionDuration"),m(r,"class","select-none"),m(s,"class","flex gap-2 mb-2"),m(u,"id","easingFuncs"),m(u,"class","svelte-1qpp6cx"),t[4]===void 0&&nt(()=>t[10].call(u)),m(g,"for","easingFuncs"),m(g,"class","select-none"),m(o,"class","flex gap-2"),m(e,"class","pl-2 pr-4 flex-col")},m(b,S){Z(b,e,S),I(e,s),I(s,i),fs(i,t[3]),I(s,a),I(s,r),I(r,n),I(e,l),I(e,o),I(o,u);for(let A=0;A<f.length;A+=1)f[A].m(u,null);dt(u,t[4]),I(o,c),I(o,g),I(g,p),q=!0,O||(w=[fe(i,"input",t[9]),fe(u,"change",t[10])],O=!0)},p(b,S){if(S&8&&vn(i.value)!==b[3]&&fs(i,b[3]),S&0){T=Ys;let A;for(A=0;A<T.length;A+=1){const L=tn(b,T,A);f[A]?f[A].p(L,S):(f[A]=nn(L),f[A].c(),f[A].m(u,null))}for(;A<f.length;A+=1)f[A].d(1);f.length=T.length}S&16&&dt(u,b[4])},i(b){q||(b&&nt(()=>{k||(k=Tt(e,It,{},!0)),k.run(1)}),q=!0)},o(b){b&&(k||(k=Tt(e,It,{},!1)),k.run(0)),q=!1},d(b){b&&C(e),it(f,b),b&&k&&k.end(),O=!1,at(w)}}}function nn(t){let e,s=t[12]+"",i;return{c(){e=H("option"),i=we(s),this.h()},l(a){e=V(a,"OPTION",{});var r=z(e);i=Ce(r,s),r.forEach(C),this.h()},h(){e.__value=t[12],e.value=e.__value},m(a,r){Z(a,e,r),I(e,i)},p:Ae,d(a){a&&C(e)}}}function er(t){let e,s,i,a,r,n,l,o,u,c,g,p,k,q,O,w=t[2]&&sn(t);return{c(){e=H("div"),s=H("input"),i=ee(),a=H("label"),r=we("ghost piece"),n=ee(),l=H("div"),o=H("input"),u=ee(),c=H("label"),g=we("transition"),p=ee(),w&&w.c(),k=Le(),this.h()},l(T){e=V(T,"DIV",{class:!0});var f=z(e);s=V(f,"INPUT",{id:!0,type:!0,class:!0}),i=te(f),a=V(f,"LABEL",{for:!0,class:!0});var b=z(a);r=Ce(b,"ghost piece"),b.forEach(C),f.forEach(C),n=te(T),l=V(T,"DIV",{class:!0});var S=z(l);o=V(S,"INPUT",{id:!0,type:!0,class:!0}),u=te(S),c=V(S,"LABEL",{for:!0,class:!0});var A=z(c);g=Ce(A,"transition"),A.forEach(C),S.forEach(C),p=te(T),w&&w.l(T),k=Le(),this.h()},h(){m(s,"id","ghostPiece"),m(s,"type","checkbox"),m(s,"class","svelte-1qpp6cx"),m(a,"for","ghostPiece"),m(a,"class","select-none"),m(e,"class","mb-2"),m(o,"id","draggableEnabled"),m(o,"type","checkbox"),m(o,"class","svelte-1qpp6cx"),m(c,"for","draggableEnabled"),m(c,"class","select-none"),m(l,"class","mb-2")},m(T,f){Z(T,e,f),I(e,s),s.checked=t[1],I(e,i),I(e,a),I(a,r),Z(T,n,f),Z(T,l,f),I(l,o),o.checked=t[2],I(l,u),I(l,c),I(c,g),Z(T,p,f),w&&w.m(T,f),Z(T,k,f),q||(O=[fe(s,"change",t[7]),fe(o,"change",t[8])],q=!0)},p(T,f){f&2&&(s.checked=T[1]),f&4&&(o.checked=T[2]),T[2]?w?(w.p(T,f),f&4&&J(w,1)):(w=sn(T),w.c(),J(w,1),w.m(k.parentNode,k)):w&&(Be(),$(w,1,1,()=>{w=null}),Ue())},d(T){T&&C(e),T&&C(n),T&&C(l),T&&C(p),w&&w.d(T),T&&C(k),q=!1,at(O)}}}function tr(t){let e,s,i;function a(n){t[11](n)}let r={name:t[5],expanded:t[6],$$slots:{default:[er]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new rt({props:r}),oe.push(()=>ge(e,"enabled",a)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&32&&(o.name=n[5]),l&64&&(o.expanded=n[6]),l&32798&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],be(()=>s=!1)),e.$set(o)},i(n){i||(J(e.$$.fragment,n),i=!0)},o(n){$(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function sr(t,e,s){let{name:i="Draggable"}=e,{enabled:a=!1}=e,{ghostPiece:r=!1}=e,{transition:n=!1}=e,{duration:l=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function c(){r=this.checked,s(1,r)}function g(){n=this.checked,s(2,n)}function p(){l=vn(this.value),s(3,l)}function k(){o=ns(this),s(4,o)}function q(O){a=O,s(0,a)}return t.$$set=O=>{"name"in O&&s(5,i=O.name),"enabled"in O&&s(0,a=O.enabled),"ghostPiece"in O&&s(1,r=O.ghostPiece),"transition"in O&&s(2,n=O.transition),"duration"in O&&s(3,l=O.duration),"easing"in O&&s(4,o=O.easing),"expanded"in O&&s(6,u=O.expanded)},[a,r,n,l,o,i,u,c,g,p,k,q]}class nr extends Ie{constructor(e){super(),qe(this,e,sr,tr,Fe,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function an(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function rn(t){let e,s,i,a,r=t[7]+"",n,l,o,u;function c(){t[5].call(s,t[7])}return{c(){e=H("div"),s=H("input"),i=ee(),a=H("label"),n=we(r),l=ee(),this.h()},l(g){e=V(g,"DIV",{class:!0});var p=z(e);s=V(p,"INPUT",{id:!0,type:!0}),i=te(p),a=V(p,"LABEL",{for:!0,class:!0});var k=z(a);n=Ce(k,r),k.forEach(C),l=te(p),p.forEach(C),this.h()},h(){m(s,"id",t[7]+"Enabled"),m(s,"type","checkbox"),m(a,"for",t[7]+"Enabled"),m(a,"class","select-none"),m(e,"class","mb-2")},m(g,p){Z(g,e,p),I(e,s),s.checked=t[1][t[7]],I(e,i),I(e,a),I(a,n),I(e,l),o||(u=fe(s,"change",c),o=!0)},p(g,p){t=g,p&18&&(s.checked=t[1][t[7]])},d(g){g&&C(e),o=!1,u()}}}function ir(t){let e,s=t[4],i=[];for(let a=0;a<s.length;a+=1)i[a]=rn(an(t,s,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Le()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);e=Le()},m(a,r){for(let n=0;n<i.length;n+=1)i[n].m(a,r);Z(a,e,r)},p(a,r){if(r&18){s=a[4];let n;for(n=0;n<s.length;n+=1){const l=an(a,s,n);i[n]?i[n].p(l,r):(i[n]=rn(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(a){it(i,a),a&&C(e)}}}function ar(t){let e,s,i;function a(n){t[6](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[ir]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new rt({props:r}),oe.push(()=>ge(e,"enabled",a)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],be(()=>s=!1)),e.$set(o)},i(n){i||(J(e.$$.fragment,n),i=!0)},o(n){$(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function rr(t,e,s){let{name:i="Highlight"}=e,{enabled:a=!1}=e,{settings:r}=e;const n=["select","legal","move","preMove","nextMove","check"];let{expanded:l=!1}=e;function o(c){r[c]=this.checked,s(1,r)}function u(c){a=c,s(0,a)}return t.$$set=c=>{"name"in c&&s(2,i=c.name),"enabled"in c&&s(0,a=c.enabled),"settings"in c&&s(1,r=c.settings),"expanded"in c&&s(3,l=c.expanded)},[a,r,i,l,n,o,u]}class lr extends Ie{constructor(e){super(),qe(this,e,rr,ar,Fe,{name:2,enabled:0,settings:1,expanded:3})}}function or(t){let e,s,i,a,r,n,l,o,u,c,g,p,k;return{c(){e=H("div"),s=H("input"),i=ee(),a=H("label"),r=we("L shape knight move"),n=ee(),l=H("div"),o=H("input"),u=ee(),c=H("label"),g=we("only chess move"),this.h()},l(q){e=V(q,"DIV",{class:!0});var O=z(e);s=V(O,"INPUT",{id:!0,type:!0}),i=te(O),a=V(O,"LABEL",{for:!0,class:!0});var w=z(a);r=Ce(w,"L shape knight move"),w.forEach(C),O.forEach(C),n=te(q),l=V(q,"DIV",{class:!0});var T=z(l);o=V(T,"INPUT",{id:!0,type:!0}),u=te(T),c=V(T,"LABEL",{for:!0,class:!0});var f=z(c);g=Ce(f,"only chess move"),f.forEach(C),T.forEach(C),this.h()},h(){m(s,"id","knightLShapeMoveEnabled"),m(s,"type","checkbox"),m(a,"for","knightLShapeMoveEnabled"),m(a,"class","select-none"),m(e,"class","mb-2"),m(o,"id","onlyChessMoveEnabled"),m(o,"type","checkbox"),m(c,"for","onlyChessMoveEnabled"),m(c,"class","select-none"),m(l,"class","mb-2")},m(q,O){Z(q,e,O),I(e,s),s.checked=t[1],I(e,i),I(e,a),I(a,r),Z(q,n,O),Z(q,l,O),I(l,o),o.checked=t[2],I(l,u),I(l,c),I(c,g),p||(k=[fe(s,"change",t[5]),fe(o,"change",t[6])],p=!0)},p(q,O){O&2&&(s.checked=q[1]),O&4&&(o.checked=q[2])},d(q){q&&C(e),q&&C(n),q&&C(l),p=!1,at(k)}}}function ur(t){let e,s,i;function a(n){t[7](n)}let r={name:t[3],expanded:t[4],$$slots:{default:[or]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new rt({props:r}),oe.push(()=>ge(e,"enabled",a)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&8&&(o.name=n[3]),l&16&&(o.expanded=n[4]),l&262&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],be(()=>s=!1)),e.$set(o)},i(n){i||(J(e.$$.fragment,n),i=!0)},o(n){$(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function cr(t,e,s){let{name:i="DrawTools"}=e,{enabled:a=!1}=e,{knightLShape:r=!1}=e,{onlyChessMove:n=!1}=e,{expanded:l=!1}=e;function o(){r=this.checked,s(1,r)}function u(){n=this.checked,s(2,n)}function c(g){a=g,s(0,a)}return t.$$set=g=>{"name"in g&&s(3,i=g.name),"enabled"in g&&s(0,a=g.enabled),"knightLShape"in g&&s(1,r=g.knightLShape),"onlyChessMove"in g&&s(2,n=g.onlyChessMove),"expanded"in g&&s(4,l=g.expanded)},[a,r,n,i,l,o,u,c]}class fr extends Ie{constructor(e){super(),qe(this,e,cr,ur,Fe,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function ln(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function on(t){let e,s,i,a,r=t[7].toLowerCase()+"",n,l,o,u;function c(){t[5].call(s,t[7])}return{c(){e=H("div"),s=H("input"),i=ee(),a=H("label"),n=we(r),l=ee(),this.h()},l(g){e=V(g,"DIV",{class:!0});var p=z(e);s=V(p,"INPUT",{id:!0,type:!0}),i=te(p),a=V(p,"LABEL",{for:!0,class:!0});var k=z(a);n=Ce(k,r),k.forEach(C),l=te(p),p.forEach(C),this.h()},h(){m(s,"id",t[7]+"Enabled"),m(s,"type","checkbox"),m(a,"for",t[7]+"Enabled"),m(a,"class","select-none"),m(e,"class","mb-2")},m(g,p){Z(g,e,p),I(e,s),s.checked=t[1][t[7]],I(e,i),I(e,a),I(a,n),I(e,l),o||(u=fe(s,"change",c),o=!0)},p(g,p){t=g,p&18&&(s.checked=t[1][t[7]])},d(g){g&&C(e),o=!1,u()}}}function hr(t){let e,s=t[4],i=[];for(let a=0;a<s.length;a+=1)i[a]=on(ln(t,s,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Le()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);e=Le()},m(a,r){for(let n=0;n<i.length;n+=1)i[n].m(a,r);Z(a,e,r)},p(a,r){if(r&18){s=a[4];let n;for(n=0;n<s.length;n+=1){const l=ln(a,s,n);i[n]?i[n].p(l,r):(i[n]=on(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(a){it(i,a),a&&C(e)}}}function dr(t){let e,s,i;function a(n){t[6](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[hr]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new rt({props:r}),oe.push(()=>ge(e,"enabled",a)),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],be(()=>s=!1)),e.$set(o)},i(n){i||(J(e.$$.fragment,n),i=!0)},o(n){$(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function gr(t,e,s){let{name:i="Sounds"}=e,{enabled:a=!1}=e,{settings:r}=e;const n=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:l=!1}=e;function o(c){r[c]=this.checked,s(1,r)}function u(c){a=c,s(0,a)}return t.$$set=c=>{"name"in c&&s(2,i=c.name),"enabled"in c&&s(0,a=c.enabled),"settings"in c&&s(1,r=c.settings),"expanded"in c&&s(3,l=c.expanded)},[a,r,i,l,n,o,u]}class br extends Ie{constructor(e){super(),qe(this,e,gr,dr,Fe,{name:2,enabled:0,settings:1,expanded:3})}}function pr(t){let e,s;return{c(){e=Re("svg"),s=Re("path"),this.h()},l(i){e=De(i,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=z(e);s=De(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),z(s).forEach(C),a.forEach(C),this.h()},h(){m(s,"stroke-linecap","round"),m(s,"stroke-linejoin","round"),m(s,"stroke-width","2"),m(s,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),Pe(e,"transform","translate(1px, 0px)"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"class","h-5"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"aria-hidden","true"),m(e,"stroke","currentColor")},m(i,a){Z(i,e,a),I(e,s)},d(i){i&&C(e)}}}function mr(t){let e,s;return{c(){e=Re("svg"),s=Re("path"),this.h()},l(i){e=De(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=z(e);s=De(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),z(s).forEach(C),a.forEach(C),this.h()},h(){m(s,"stroke-linecap","round"),m(s,"stroke-linejoin","round"),m(s,"stroke-width","2"),m(s,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"class","h-5 text-green-500"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"aria-hidden","true"),m(e,"stroke","currentColor")},m(i,a){Z(i,e,a),I(e,s)},d(i){i&&C(e)}}}function vr(t){let e,s,i;function a(l,o){return l[1]?mr:pr}let r=a(t),n=r(t);return{c(){e=H("button"),n.c(),this.h()},l(l){e=V(l,"BUTTON",{type:!0,class:!0});var o=z(e);n.l(o),o.forEach(C),this.h()},h(){m(e,"type","button"),m(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(l,o){Z(l,e,o),n.m(e,null),t[4](e),s||(i=fe(e,"click",t[2]),s=!0)},p(l,[o]){r!==(r=a(l))&&(n.d(1),n=r(l),n&&(n.c(),n.m(e,null)))},i:Ae,o:Ae,d(l){l&&C(e),n.d(),t[4](null),s=!1,i()}}}function _r(t,e,s){let{copyText:i}=e,a,r=!1;function n(){navigator.clipboard.writeText(i),s(1,r=!0),setTimeout(()=>{s(1,r=!1)},2e3),a.setAttribute("data-cooltipz-dir","top"),a.setAttribute("aria-label","Copied!"),setTimeout(()=>{a.removeAttribute("aria-label"),a.removeAttribute("data-cooltipz-dir")},2e3)}function l(o){oe[o?"unshift":"push"](()=>{a=o,s(0,a)})}return t.$$set=o=>{"copyText"in o&&s(3,i=o.copyText)},[a,r,n,i,l]}class Er extends Ie{constructor(e){super(),qe(this,e,_r,vr,Fe,{copyText:3})}}function Mr(t){let e,s,i;function a(n){t[2](n)}let r={name:t[1],showExpand:!1};return t[0]!==void 0&&(r.enabled=t[0]),e=new rt({props:r}),oe.push(()=>ge(e,"enabled",a)),e.$on("changed",t[3]),{c(){_e(e.$$.fragment)},l(n){Ee(e.$$.fragment,n)},m(n,l){Me(e,n,l),i=!0},p(n,[l]){const o={};l&2&&(o.name=n[1]),!s&&l&1&&(s=!0,o.enabled=n[0],be(()=>s=!1)),e.$set(o)},i(n){i||(J(e.$$.fragment,n),i=!0)},o(n){$(e.$$.fragment,n),i=!1},d(n){ke(e,n)}}}function kr(t,e,s){let{name:i="Legal"}=e,{enabled:a=!1}=e;function r(l){a=l,s(0,a)}function n(l){je.call(this,t,l)}return t.$$set=l=>{"name"in l&&s(1,i=l.name),"enabled"in l&&s(0,a=l.enabled)},[a,i,r,n]}class Sr extends Ie{constructor(e){super(),qe(this,e,kr,Mr,Fe,{name:1,enabled:0})}}function wr(t){let e,s,i,a,r,n,l,o,u,c,g,p,k,q,O,w,T,f,b,S,A,L,N,K,B,R,G,ie,ve,x,d,M,h,v,y,P,E,F,Q,ae,se,W,ce,Y,re,ue,pe,Oe,le,Se,Ne,Ge,Qe,Ke,Ve,gt,ct,Xe,bt,lt,ft,ze,pt,We,Je,mt,St;function Ft(U){t[7](U)}function Nt(U){t[8](U)}function Rt(U){t[9](U)}function Dt(U){t[10](U)}function Bt(U){t[11](U)}let xe={expanded:!0};t[0].board.boardTheme!==void 0&&(xe.boardTheme=t[0].board.boardTheme),t[0].board.mouseEvents!==void 0&&(xe.mouseEvents=t[0].board.mouseEvents),t[0].board.notation!==void 0&&(xe.notation=t[0].board.notation),t[0].board.flipped!==void 0&&(xe.flipped=t[0].board.flipped),t[0].board.resizible!==void 0&&(xe.resizible=t[0].board.resizible),n=new Ya({props:xe}),oe.push(()=>ge(n,"boardTheme",Ft)),oe.push(()=>ge(n,"mouseEvents",Nt)),oe.push(()=>ge(n,"notation",Rt)),oe.push(()=>ge(n,"flipped",Dt)),oe.push(()=>ge(n,"resizible",Bt));function Ut(U){t[12](U)}function Ht(U){t[13](U)}let vt={expanded:!0};t[0].movable.enabled!==void 0&&(vt.enabled=t[0].movable.enabled),t[0].movable.color!==void 0&&(vt.color=t[0].movable.color),k=new $a({props:vt}),oe.push(()=>ge(k,"enabled",Ut)),oe.push(()=>ge(k,"color",Ht));function Vt(U){t[14](U)}function Kt(U){t[15](U)}function zt(U){t[16](U)}function Wt(U){t[17](U)}function jt(U){t[18](U)}let _={};t[0].draggable.enabled!==void 0&&(_.enabled=t[0].draggable.enabled),t[0].draggable.ghostPiece.enabled!==void 0&&(_.ghostPiece=t[0].draggable.ghostPiece.enabled),t[0].draggable.transition.enabled!==void 0&&(_.transition=t[0].draggable.transition.enabled),t[0].draggable.transition.settings.duration!==void 0&&(_.duration=t[0].draggable.transition.settings.duration),t[0].draggable.transition.settings.easing!==void 0&&(_.easing=t[0].draggable.transition.settings.easing),T=new nr({props:_}),oe.push(()=>ge(T,"enabled",Vt)),oe.push(()=>ge(T,"ghostPiece",Kt)),oe.push(()=>ge(T,"transition",zt)),oe.push(()=>ge(T,"duration",Wt)),oe.push(()=>ge(T,"easing",jt));function j(U){t[19](U)}let ne={name:"Selectable",showExpand:!1};t[0].selectable.enabled!==void 0&&(ne.enabled=t[0].selectable.enabled),K=new rt({props:ne}),oe.push(()=>ge(K,"enabled",j));function me(U){t[20](U)}let Te={};t[0].legal.enabled!==void 0&&(Te.enabled=t[0].legal.enabled),G=new Sr({props:Te}),oe.push(()=>ge(G,"enabled",me)),G.$on("changed",t[21]);function $e(U){t[22](U)}function as(U){t[23](U)}let Gt={};t[0].highlight.enabled!==void 0&&(Gt.enabled=t[0].highlight.enabled),t[0].highlight.settings!==void 0&&(Gt.settings=t[0].highlight.settings),x=new lr({props:Gt}),oe.push(()=>ge(x,"enabled",$e)),oe.push(()=>ge(x,"settings",as));function yn(U){t[24](U)}function An(U){t[25](U)}function Tn(U){t[26](U)}let wt={};t[0].drawTools.enabled!==void 0&&(wt.enabled=t[0].drawTools.enabled),t[0].drawTools.settings.knightLShape!==void 0&&(wt.knightLShape=t[0].drawTools.settings.knightLShape),t[0].drawTools.settings.onlyChessMove!==void 0&&(wt.onlyChessMove=t[0].drawTools.settings.onlyChessMove),v=new fr({props:wt}),oe.push(()=>ge(v,"enabled",yn)),oe.push(()=>ge(v,"knightLShape",An)),oe.push(()=>ge(v,"onlyChessMove",Tn));function Ln(U){t[27](U)}function On(U){t[28](U)}let Qt={};t[0].sounds.enabled!==void 0&&(Qt.enabled=t[0].sounds.enabled),t[0].sounds.settings!==void 0&&(Qt.settings=t[0].sounds.settings),Q=new br({props:Qt}),oe.push(()=>ge(Q,"enabled",Ln)),oe.push(()=>ge(Q,"settings",On));let In={config:t[6],className:"rounded-md"};return re=new za({props:In}),t[29](re),ze=new Er({props:{copyText:t[4]}}),We=new Jn({props:{source:t[4],language:"svelte"}}),{c(){e=H("link"),s=ee(),i=H("div"),a=H("div"),r=H("div"),_e(n.$$.fragment),p=ee(),_e(k.$$.fragment),w=ee(),_e(T.$$.fragment),N=ee(),_e(K.$$.fragment),R=ee(),_e(G.$$.fragment),ve=ee(),_e(x.$$.fragment),h=ee(),_e(v.$$.fragment),F=ee(),_e(Q.$$.fragment),W=ee(),ce=H("div"),Y=H("div"),_e(re.$$.fragment),ue=ee(),pe=H("div"),Oe=H("div"),le=H("div"),Se=H("button"),Ne=H("span"),Ge=we("ts"),Ke=ee(),Ve=H("span"),gt=we("/"),ct=ee(),Xe=H("span"),bt=we("js"),ft=ee(),_e(ze.$$.fragment),pt=ee(),_e(We.$$.fragment),this.h()},l(U){const de=Wn("svelte-tebjht",document.head);e=V(de,"LINK",{rel:!0,href:!0}),de.forEach(C),s=te(U),i=V(U,"DIV",{class:!0});var Ye=z(i);a=V(Ye,"DIV",{class:!0});var et=z(a);r=V(et,"DIV",{class:!0});var ye=z(r);Ee(n.$$.fragment,ye),p=te(ye),Ee(k.$$.fragment,ye),w=te(ye),Ee(T.$$.fragment,ye),N=te(ye),Ee(K.$$.fragment,ye),R=te(ye),Ee(G.$$.fragment,ye),ve=te(ye),Ee(x.$$.fragment,ye),h=te(ye),Ee(v.$$.fragment,ye),F=te(ye),Ee(Q.$$.fragment,ye),ye.forEach(C),W=te(et),ce=V(et,"DIV",{class:!0});var ot=z(ce);Y=V(ot,"DIV",{class:!0});var _t=z(Y);Ee(re.$$.fragment,_t),_t.forEach(C),ue=te(ot),pe=V(ot,"DIV",{class:!0});var ht=z(pe);Oe=V(ht,"DIV",{class:!0});var Ze=z(Oe);le=V(Ze,"DIV",{class:!0});var tt=z(le);Se=V(tt,"BUTTON",{class:!0});var st=z(Se);Ne=V(st,"SPAN",{class:!0});var Et=z(Ne);Ge=Ce(Et,"ts"),Et.forEach(C),Ke=te(st),Ve=V(st,"SPAN",{class:!0});var Mt=z(Ve);gt=Ce(Mt,"/"),Mt.forEach(C),ct=te(st),Xe=V(st,"SPAN",{class:!0});var rs=z(Xe);bt=Ce(rs,"js"),rs.forEach(C),st.forEach(C),ft=te(tt),Ee(ze.$$.fragment,tt),tt.forEach(C),pt=te(Ze),Ee(We.$$.fragment,Ze),Ze.forEach(C),ht.forEach(C),ot.forEach(C),et.forEach(C),Ye.forEach(C),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",m(e,"rel","stylesheet"),m(e,"href","prism-one-dark.css"),m(r,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),m(Y,"class","w-full lg:w-[calc(70vh*(var(--boardScale,70)/100*0.7+0.3))]"),m(Ne,"class",Qe=t[1]?"text-yellow-600":""),m(Ve,"class","text-gray-600"),m(Xe,"class",lt=t[1]?"":"text-yellow-600"),m(Se,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),m(le,"class","absolute right-2 top-2 flex gap-4"),m(Oe,"class","shadow-lg rounded "),m(pe,"class","row-start-2 relative"),m(ce,"class","grid grid-rows-[90wh_auto] gap-10"),m(a,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),m(i,"class","my-10 grid grid-cols-center")},m(U,de){I(document.head,e),Z(U,s,de),Z(U,i,de),I(i,a),I(a,r),Me(n,r,null),I(r,p),Me(k,r,null),I(r,w),Me(T,r,null),I(r,N),Me(K,r,null),I(r,R),Me(G,r,null),I(r,ve),Me(x,r,null),I(r,h),Me(v,r,null),I(r,F),Me(Q,r,null),I(a,W),I(a,ce),I(ce,Y),Me(re,Y,null),I(ce,ue),I(ce,pe),I(pe,Oe),I(Oe,le),I(le,Se),I(Se,Ne),I(Ne,Ge),I(Se,Ke),I(Se,Ve),I(Ve,gt),I(Se,ct),I(Se,Xe),I(Xe,bt),I(le,ft),Me(ze,le,null),I(Oe,pt),Me(We,Oe,null),Je=!0,mt||(St=fe(Se,"click",t[30]),mt=!0)},p(U,de){const Ye={};!l&&de[0]&1&&(l=!0,Ye.boardTheme=U[0].board.boardTheme,be(()=>l=!1)),!o&&de[0]&1&&(o=!0,Ye.mouseEvents=U[0].board.mouseEvents,be(()=>o=!1)),!u&&de[0]&1&&(u=!0,Ye.notation=U[0].board.notation,be(()=>u=!1)),!c&&de[0]&1&&(c=!0,Ye.flipped=U[0].board.flipped,be(()=>c=!1)),!g&&de[0]&1&&(g=!0,Ye.resizible=U[0].board.resizible,be(()=>g=!1)),n.$set(Ye);const et={};!q&&de[0]&1&&(q=!0,et.enabled=U[0].movable.enabled,be(()=>q=!1)),!O&&de[0]&1&&(O=!0,et.color=U[0].movable.color,be(()=>O=!1)),k.$set(et);const ye={};!f&&de[0]&1&&(f=!0,ye.enabled=U[0].draggable.enabled,be(()=>f=!1)),!b&&de[0]&1&&(b=!0,ye.ghostPiece=U[0].draggable.ghostPiece.enabled,be(()=>b=!1)),!S&&de[0]&1&&(S=!0,ye.transition=U[0].draggable.transition.enabled,be(()=>S=!1)),!A&&de[0]&1&&(A=!0,ye.duration=U[0].draggable.transition.settings.duration,be(()=>A=!1)),!L&&de[0]&1&&(L=!0,ye.easing=U[0].draggable.transition.settings.easing,be(()=>L=!1)),T.$set(ye);const ot={};!B&&de[0]&1&&(B=!0,ot.enabled=U[0].selectable.enabled,be(()=>B=!1)),K.$set(ot);const _t={};!ie&&de[0]&1&&(ie=!0,_t.enabled=U[0].legal.enabled,be(()=>ie=!1)),G.$set(_t);const ht={};!d&&de[0]&1&&(d=!0,ht.enabled=U[0].highlight.enabled,be(()=>d=!1)),!M&&de[0]&1&&(M=!0,ht.settings=U[0].highlight.settings,be(()=>M=!1)),x.$set(ht);const Ze={};!y&&de[0]&1&&(y=!0,Ze.enabled=U[0].drawTools.enabled,be(()=>y=!1)),!P&&de[0]&1&&(P=!0,Ze.knightLShape=U[0].drawTools.settings.knightLShape,be(()=>P=!1)),!E&&de[0]&1&&(E=!0,Ze.onlyChessMove=U[0].drawTools.settings.onlyChessMove,be(()=>E=!1)),v.$set(Ze);const tt={};!ae&&de[0]&1&&(ae=!0,tt.enabled=U[0].sounds.enabled,be(()=>ae=!1)),!se&&de[0]&1&&(se=!0,tt.settings=U[0].sounds.settings,be(()=>se=!1)),Q.$set(tt);const st={};re.$set(st),(!Je||de[0]&2&&Qe!==(Qe=U[1]?"text-yellow-600":""))&&m(Ne,"class",Qe),(!Je||de[0]&2&&lt!==(lt=U[1]?"":"text-yellow-600"))&&m(Xe,"class",lt);const Et={};de[0]&16&&(Et.copyText=U[4]),ze.$set(Et);const Mt={};de[0]&16&&(Mt.source=U[4]),We.$set(Mt)},i(U){Je||(J(n.$$.fragment,U),J(k.$$.fragment,U),J(T.$$.fragment,U),J(K.$$.fragment,U),J(G.$$.fragment,U),J(x.$$.fragment,U),J(v.$$.fragment,U),J(Q.$$.fragment,U),J(re.$$.fragment,U),J(ze.$$.fragment,U),J(We.$$.fragment,U),Je=!0)},o(U){$(n.$$.fragment,U),$(k.$$.fragment,U),$(T.$$.fragment,U),$(K.$$.fragment,U),$(G.$$.fragment,U),$(x.$$.fragment,U),$(v.$$.fragment,U),$(Q.$$.fragment,U),$(re.$$.fragment,U),$(ze.$$.fragment,U),$(We.$$.fragment,U),Je=!1},d(U){C(e),U&&C(s),U&&C(i),ke(n),ke(k),ke(T),ke(K),ke(G),ke(x),ke(v),ke(Q),t[29](null),ke(re),ke(ze),ke(We),mt=!1,St()}}}function Cr(t,e,s){const i=new Mn.Chess,a={movable:he.BOTH,legal:!0,callbacks:{afterMove:E=>i.move({from:E.substring(0,2),to:E.substring(2,4),...E.length>4&&{promotion:E[4]}}),getLegalMoves:()=>i.moves({verbose:!0}).map(E=>{var F;return E.from+E.to+((F=E.promotion)!=null?F:"")}),getWhiteToMove:()=>i.turn()==="w",getInCheck:()=>i.inCheck(),getLastMove:()=>{var F;const E=i.history({verbose:!0}).pop();return E?E.from+E.to+((F=E.promotion)!=null?F:""):""}},board:{resizible:!0}},r=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,n=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let l,o=new kn(a),u=!1,c=!0,g="";ss(()=>{s(3,u=!0),s(0,o=l.getState())});const p=(E,F)=>{const Q=E.getConfig(),ae=`
	import type { ChessboardConfig } from '@powchess/chessboard/boardConfig';`;u&&l.setState(E);let se=JSON.stringify(Q,(re,ue)=>re==="callbacks"?"{functions}":ue,4);se=se.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',F?r:n);const W=`
	import { Color } from '@powchess/chessboard/enums';`;F&&(se=se.replaceAll(`movable: ${he.WHITE}`,"movable: Color.WHITE").replaceAll(`movable: ${he.BLACK}`,"movable: Color.BLACK").replaceAll(`movable: ${he.BOTH}`,"movable: Color.BOTH"));function ce(){return se.includes("movable: Color.WHITE")||se.includes("movable: Color.BLACK")||se.includes("movable: Color.BOTH")}let Y=`<script${F?' lang="ts"':""}>
	import Chessboard from '@powchess/chessboard';${F?ae:""}${ce()&&F?W:""}${o.legal.enabled?F?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${F?": ChessboardConfig":""} = ${se};
<\/script>

<Chessboard {config} className="rounded-md" />`;return F||(Y=Y.replaceAll("Color.WHITE",`${he.WHITE}`).replaceAll("Color.BLACK",`${he.BLACK}`).replaceAll("Color.BOTH",`${he.BOTH}`)),Y};function k(E){t.$$.not_equal(o.board.boardTheme,E)&&(o.board.boardTheme=E,s(0,o))}function q(E){t.$$.not_equal(o.board.mouseEvents,E)&&(o.board.mouseEvents=E,s(0,o))}function O(E){t.$$.not_equal(o.board.notation,E)&&(o.board.notation=E,s(0,o))}function w(E){t.$$.not_equal(o.board.flipped,E)&&(o.board.flipped=E,s(0,o))}function T(E){t.$$.not_equal(o.board.resizible,E)&&(o.board.resizible=E,s(0,o))}function f(E){t.$$.not_equal(o.movable.enabled,E)&&(o.movable.enabled=E,s(0,o))}function b(E){t.$$.not_equal(o.movable.color,E)&&(o.movable.color=E,s(0,o))}function S(E){t.$$.not_equal(o.draggable.enabled,E)&&(o.draggable.enabled=E,s(0,o))}function A(E){t.$$.not_equal(o.draggable.ghostPiece.enabled,E)&&(o.draggable.ghostPiece.enabled=E,s(0,o))}function L(E){t.$$.not_equal(o.draggable.transition.enabled,E)&&(o.draggable.transition.enabled=E,s(0,o))}function N(E){t.$$.not_equal(o.draggable.transition.settings.duration,E)&&(o.draggable.transition.settings.duration=E,s(0,o))}function K(E){t.$$.not_equal(o.draggable.transition.settings.easing,E)&&(o.draggable.transition.settings.easing=E,s(0,o))}function B(E){t.$$.not_equal(o.selectable.enabled,E)&&(o.selectable.enabled=E,s(0,o))}function R(E){t.$$.not_equal(o.legal.enabled,E)&&(o.legal.enabled=E,s(0,o))}const G=()=>{o.legal.enabled||(i.reset(),u&&l.setFEN(o.board.startFen,!0,!1))};function ie(E){t.$$.not_equal(o.highlight.enabled,E)&&(o.highlight.enabled=E,s(0,o))}function ve(E){t.$$.not_equal(o.highlight.settings,E)&&(o.highlight.settings=E,s(0,o))}function x(E){t.$$.not_equal(o.drawTools.enabled,E)&&(o.drawTools.enabled=E,s(0,o))}function d(E){t.$$.not_equal(o.drawTools.settings.knightLShape,E)&&(o.drawTools.settings.knightLShape=E,s(0,o))}function M(E){t.$$.not_equal(o.drawTools.settings.onlyChessMove,E)&&(o.drawTools.settings.onlyChessMove=E,s(0,o))}function h(E){t.$$.not_equal(o.sounds.enabled,E)&&(o.sounds.enabled=E,s(0,o))}function v(E){t.$$.not_equal(o.sounds.settings,E)&&(o.sounds.settings=E,s(0,o))}function y(E){oe[E?"unshift":"push"](()=>{l=E,s(2,l)})}const P=()=>{s(1,c=!c)};return t.$$.update=()=>{t.$$.dirty[0]&3&&s(4,g=p(o,c))},[o,c,l,u,g,i,a,k,q,O,w,T,f,b,S,A,L,N,K,B,R,G,ie,ve,x,d,M,h,v,y,P]}class Tr extends Ie{constructor(e){super(),qe(this,e,Cr,wr,Fe,{},null,[-1,-1])}}export{Tr as default};
