var Wn=Object.defineProperty;var Kn=(t,e,s)=>e in t?Wn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var H=(t,e,s)=>(Kn(t,typeof e!="symbol"?e+"":e,s),s);import{S as qe,i as Re,s as Ne,C as fn,k as B,a as te,l as U,m as j,h as E,c as se,p as Me,n as h,b as Y,G as C,D as dn,E as cn,F as hn,f as J,t as ae,I as qt,J as ls,K as de,L as jn,e as Ae,M as Gn,q as me,r as pe,u as Dt,N as xe,O as gn,B as Le,P as ft,Q as bn,R as Qn,T as Xn,U as os,V as bt,W as xt,X as ce,Y as $t,Z as $e,_ as Bt,H as Yn,$ as Je,a0 as We,a1 as Ke,o as es,g as He,d as Ve,a2 as Zn,a3 as Jn,a4 as ge,w as ke,x as we,y as Se,a5 as be,z as ye,a6 as us,a7 as mn,a8 as fs,a9 as xn,aa as pn,A as $n,ab as vn,ac as dt,ad as _t,ae as ts,af as ut,ag as ot,ah as ei}from"../../chunks/index-fec2cb7a.js";import{w as ti}from"../../chunks/index-27c90a1c.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_n={exports:{}};(function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var s=function(i){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},l={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function f(p){return p instanceof o?new o(p.type,f(p.content),p.alias):Array.isArray(p)?p.map(f):p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(f){return Object.prototype.toString.call(f).slice(8,-1)},objId:function(f){return f.__id||Object.defineProperty(f,"__id",{value:++n}),f.__id},clone:function f(p,S){S=S||{};var _,P;switch(l.util.type(p)){case"Object":if(P=l.util.objId(p),S[P])return S[P];_={},S[P]=_;for(var K in p)p.hasOwnProperty(K)&&(_[K]=f(p[K],S));return _;case"Array":return P=l.util.objId(p),S[P]?S[P]:(_=[],S[P]=_,p.forEach(function(G,W){_[W]=f(G,S)}),_);default:return p}},getLanguage:function(f){for(;f;){var p=a.exec(f.className);if(p)return p[1].toLowerCase();f=f.parentElement}return"none"},setLanguage:function(f,p){f.className=f.className.replace(RegExp(a,"gi"),""),f.classList.add("language-"+p)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(_){var f=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(_.stack)||[])[1];if(f){var p=document.getElementsByTagName("script");for(var S in p)if(p[S].src==f)return p[S]}return null}},isActive:function(f,p,S){for(var _="no-"+p;f;){var P=f.classList;if(P.contains(p))return!0;if(P.contains(_))return!1;f=f.parentElement}return!!S}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(f,p){var S=l.util.clone(l.languages[f]);for(var _ in p)S[_]=p[_];return S},insertBefore:function(f,p,S,_){_=_||l.languages;var P=_[f],K={};for(var G in P)if(P.hasOwnProperty(G)){if(G==p)for(var W in S)S.hasOwnProperty(W)&&(K[W]=S[W]);S.hasOwnProperty(G)||(K[G]=P[G])}var O=_[f];return _[f]=K,l.languages.DFS(l.languages,function(Q,le){le===O&&Q!=f&&(this[Q]=K)}),K},DFS:function f(p,S,_,P){P=P||{};var K=l.util.objId;for(var G in p)if(p.hasOwnProperty(G)){S.call(p,G,p[G],_||G);var W=p[G],O=l.util.type(W);O==="Object"&&!P[K(W)]?(P[K(W)]=!0,f(W,S,null,P)):O==="Array"&&!P[K(W)]&&(P[K(W)]=!0,f(W,S,G,P))}}},plugins:{},highlightAll:function(f,p){l.highlightAllUnder(document,f,p)},highlightAllUnder:function(f,p,S){var _={callback:S,container:f,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",_),_.elements=Array.prototype.slice.apply(_.container.querySelectorAll(_.selector)),l.hooks.run("before-all-elements-highlight",_);for(var P=0,K;K=_.elements[P++];)l.highlightElement(K,p===!0,_.callback)},highlightElement:function(f,p,S){var _=l.util.getLanguage(f),P=l.languages[_];l.util.setLanguage(f,_);var K=f.parentElement;K&&K.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(K,_);var G=f.textContent,W={element:f,language:_,grammar:P,code:G};function O(le){W.highlightedCode=le,l.hooks.run("before-insert",W),W.element.innerHTML=W.highlightedCode,l.hooks.run("after-highlight",W),l.hooks.run("complete",W),S&&S.call(W.element)}if(l.hooks.run("before-sanity-check",W),K=W.element.parentElement,K&&K.nodeName.toLowerCase()==="pre"&&!K.hasAttribute("tabindex")&&K.setAttribute("tabindex","0"),!W.code){l.hooks.run("complete",W),S&&S.call(W.element);return}if(l.hooks.run("before-highlight",W),!W.grammar){O(l.util.encode(W.code));return}if(p&&i.Worker){var Q=new Worker(l.filename);Q.onmessage=function(le){O(le.data)},Q.postMessage(JSON.stringify({language:W.language,code:W.code,immediateClose:!0}))}else O(l.highlight(W.code,W.grammar,W.language))},highlight:function(f,p,S){var _={code:f,grammar:p,language:S};if(l.hooks.run("before-tokenize",_),!_.grammar)throw new Error('The language "'+_.language+'" has no grammar.');return _.tokens=l.tokenize(_.code,_.grammar),l.hooks.run("after-tokenize",_),o.stringify(l.util.encode(_.tokens),_.language)},tokenize:function(f,p){var S=p.rest;if(S){for(var _ in S)p[_]=S[_];delete p.rest}var P=new d;return g(P,P.head,f),m(f,P,p,P.head,0),T(P)},hooks:{all:{},add:function(f,p){var S=l.hooks.all;S[f]=S[f]||[],S[f].push(p)},run:function(f,p){var S=l.hooks.all[f];if(!(!S||!S.length))for(var _=0,P;P=S[_++];)P(p)}},Token:o};i.Prism=l;function o(f,p,S,_){this.type=f,this.content=p,this.alias=S,this.length=(_||"").length|0}o.stringify=function f(p,S){if(typeof p=="string")return p;if(Array.isArray(p)){var _="";return p.forEach(function(O){_+=f(O,S)}),_}var P={type:p.type,content:f(p.content,S),tag:"span",classes:["token",p.type],attributes:{},language:S},K=p.alias;K&&(Array.isArray(K)?Array.prototype.push.apply(P.classes,K):P.classes.push(K)),l.hooks.run("wrap",P);var G="";for(var W in P.attributes)G+=" "+W+'="'+(P.attributes[W]||"").replace(/"/g,"&quot;")+'"';return"<"+P.tag+' class="'+P.classes.join(" ")+'"'+G+">"+P.content+"</"+P.tag+">"};function u(f,p,S,_){f.lastIndex=p;var P=f.exec(S);if(P&&_&&P[1]){var K=P[1].length;P.index+=K,P[0]=P[0].slice(K)}return P}function m(f,p,S,_,P,K){for(var G in S)if(!(!S.hasOwnProperty(G)||!S[G])){var W=S[G];W=Array.isArray(W)?W:[W];for(var O=0;O<W.length;++O){if(K&&K.cause==G+","+O)return;var Q=W[O],le=Q.inside,ve=!!Q.lookbehind,fe=!!Q.greedy,c=Q.alias;if(fe&&!Q.pattern.global){var v=Q.pattern.toString().match(/[imsuy]*$/)[0];Q.pattern=RegExp(Q.pattern.source,v+"g")}for(var b=Q.pattern||Q,A=_.next,F=P;A!==p.tail&&!(K&&F>=K.reach);F+=A.value.length,A=A.next){var I=A.value;if(p.length>f.length)return;if(!(I instanceof o)){var V=1,N;if(fe){if(N=u(b,F,f,ve),!N||N.index>=f.length)break;var z=N.index,x=N.index+N[0].length,oe=F;for(oe+=A.value.length;z>=oe;)A=A.next,oe+=A.value.length;if(oe-=A.value.length,F=oe,A.value instanceof o)continue;for(var L=A;L!==p.tail&&(oe<x||typeof L.value=="string");L=L.next)V++,oe+=L.value.length;V--,I=f.slice(F,oe),N.index-=F}else if(N=u(b,0,I,ve),!N)continue;var z=N.index,ne=N[0],X=I.slice(0,z),R=I.slice(z+ne.length),Z=F+I.length;K&&Z>K.reach&&(K.reach=Z);var re=A.prev;X&&(re=g(p,re,X),F+=X.length),y(p,re,V);var Ee=new o(G,le?l.tokenize(ne,le):ne,c,ne);if(A=g(p,re,Ee),R&&g(p,A,R),V>1){var ie={cause:G+","+O,reach:Z};m(f,p,S,A.prev,F,ie),K&&ie.reach>K.reach&&(K.reach=ie.reach)}}}}}}function d(){var f={value:null,prev:null,next:null},p={value:null,prev:f,next:null};f.next=p,this.head=f,this.tail=p,this.length=0}function g(f,p,S){var _=p.next,P={value:S,prev:p,next:_};return p.next=P,_.prev=P,f.length++,P}function y(f,p,S){for(var _=p.next,P=0;P<S&&_!==f.tail;P++)_=_.next;p.next=_,_.prev=p,f.length-=P}function T(f){for(var p=[],S=f.head.next;S!==f.tail;)p.push(S.value),S=S.next;return p}if(!i.document)return i.addEventListener&&(l.disableWorkerMessageHandler||i.addEventListener("message",function(f){var p=JSON.parse(f.data),S=p.language,_=p.code,P=p.immediateClose;i.postMessage(l.highlight(_,l.languages[S],S)),P&&i.close()},!1)),l;var q=l.util.currentScript();q&&(l.filename=q.src,q.hasAttribute("data-manual")&&(l.manual=!0));function k(){l.manual||l.highlightAll()}if(!l.manual){var w=document.readyState;w==="loading"||w==="interactive"&&q&&q.defer?document.addEventListener("DOMContentLoaded",k):window.requestAnimationFrame?window.requestAnimationFrame(k):window.setTimeout(k,16)}return l}(e);t.exports&&(t.exports=s),typeof ds<"u"&&(ds.Prism=s),s.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},s.languages.markup.tag.inside["attr-value"].inside.entity=s.languages.markup.entity,s.languages.markup.doctype.inside["internal-subset"].inside=s.languages.markup,s.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(s.languages.markup.tag,"addInlined",{value:function(a,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:s.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};l["language-"+n]={pattern:/[\s\S]+/,inside:s.languages[n]};var o={};o[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:l},s.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(s.languages.markup.tag,"addAttribute",{value:function(i,a){s.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:s.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),s.languages.html=s.languages.markup,s.languages.mathml=s.languages.markup,s.languages.svg=s.languages.markup,s.languages.xml=s.languages.extend("markup",{}),s.languages.ssml=s.languages.xml,s.languages.atom=s.languages.xml,s.languages.rss=s.languages.xml,function(i){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var n=i.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(s),s.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},s.languages.javascript=s.languages.extend("clike",{"class-name":[s.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),s.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,s.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:s.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:s.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:s.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:s.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:s.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),s.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:s.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),s.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),s.languages.markup&&(s.languages.markup.tag.addInlined("script","javascript"),s.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),s.languages.js=s.languages.javascript,function(){if(typeof s>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading\u2026",a=function(q,k){return"\u2716 Error "+q+" while fetching file: "+k},n="\u2716 Error: File does not exist or is empty",r={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",m="failed",d="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function g(q,k,w){var f=new XMLHttpRequest;f.open("GET",q,!0),f.onreadystatechange=function(){f.readyState==4&&(f.status<400&&f.responseText?k(f.responseText):f.status>=400?w(a(f.status,f.statusText)):w(n))},f.send(null)}function y(q){var k=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(q||"");if(k){var w=Number(k[1]),f=k[2],p=k[3];return f?p?[w,Number(p)]:[w,void 0]:[w,w]}}s.hooks.add("before-highlightall",function(q){q.selector+=", "+d}),s.hooks.add("before-sanity-check",function(q){var k=q.element;if(k.matches(d)){q.code="",k.setAttribute(l,o);var w=k.appendChild(document.createElement("CODE"));w.textContent=i;var f=k.getAttribute("data-src"),p=q.language;if(p==="none"){var S=(/\.(\w+)$/.exec(f)||[,"none"])[1];p=r[S]||S}s.util.setLanguage(w,p),s.util.setLanguage(k,p);var _=s.plugins.autoloader;_&&_.loadLanguages(p),g(f,function(P){k.setAttribute(l,u);var K=y(k.getAttribute("data-range"));if(K){var G=P.split(/\r\n?|\n/g),W=K[0],O=K[1]==null?G.length:K[1];W<0&&(W+=G.length),W=Math.max(0,Math.min(W-1,G.length)),O<0&&(O+=G.length),O=Math.max(0,Math.min(O,G.length)),P=G.slice(W,O).join(`
`),k.hasAttribute("data-start")||k.setAttribute("data-start",String(W+1))}w.textContent=P,s.highlightElement(w)},function(P){k.setAttribute(l,m),w.textContent=P})}}),s.plugins.fileHighlight={highlight:function(k){for(var w=(k||document).querySelectorAll(d),f=0,p;p=w[f++];)s.highlightElement(p)}};var T=!1;s.fileHighlight=function(){T||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),T=!0),s.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(_n);const En=_n.exports,cs="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+cs+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+cs+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",t=>{t.type==="entity"&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,s){const i={};i["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[s]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;const a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};a["language-"+s]={pattern:/[\s\S]+/,inside:Prism.languages[s]};const n={};n[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:a},Prism.languages.insertBefore("svelte","cdata",n)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function si(t){let e,s;return{c(){e=new jn(!1),s=Ae(),this.h()},l(i){e=Gn(i,!1),s=Ae(),this.h()},h(){e.a=s},m(i,a){e.m(t[2],i,a),Y(i,s,a)},p(i,a){a&4&&e.p(i[2])},d(i){i&&E(s),i&&e.d()}}}function ni(t){let e;return{c(){e=me(t[2])},l(s){e=pe(s,t[2])},m(s,i){Y(s,e,i)},p(s,i){i&4&&Dt(e,s[2])},d(s){s&&E(e)}}}function ii(t){let e,s,i,a,n,r,l;const o=t[6].default,u=fn(o,t,t[5],null);function m(y,T){return y[0]==="none"?ni:si}let d=m(t),g=d(t);return{c(){e=B("code"),u&&u.c(),s=te(),i=B("pre"),a=B("code"),g.c(),this.h()},l(y){e=U(y,"CODE",{style:!0});var T=j(e);u&&u.l(T),T.forEach(E),s=se(y),i=U(y,"PRE",{class:!0,"command-line":!0,"data-output":!0});var q=j(i);a=U(q,"CODE",{class:!0});var k=j(a);g.l(k),k.forEach(E),q.forEach(E),this.h()},h(){Me(e,"display","none"),h(a,"class",n="language-"+t[0]),h(i,"class",r="language-"+t[0]),h(i,"command-line",""),h(i,"data-output","2-17")},m(y,T){Y(y,e,T),u&&u.m(e,null),t[7](e),Y(y,s,T),Y(y,i,T),C(i,a),g.m(a,null),l=!0},p(y,[T]){u&&u.p&&(!l||T&32)&&dn(u,o,y,y[5],l?hn(o,y[5],T,null):cn(y[5]),null),d===(d=m(y))&&g?g.p(y,T):(g.d(1),g=d(y),g&&(g.c(),g.m(a,null))),(!l||T&1&&n!==(n="language-"+y[0]))&&h(a,"class",n),(!l||T&1&&r!==(r="language-"+y[0]))&&h(i,"class",r)},i(y){l||(J(u,y),l=!0)},o(y){ae(u,y),l=!1},d(y){y&&E(e),u&&u.d(y),t[7](null),y&&E(s),y&&E(i),g.d()}}}const hs=En;En.highlightElement;const ai={transform:t=>t};function ri(t,e,s){let{$$slots:i={},$$scope:a}=e,{language:n="javascript"}=e,{source:r=""}=e,{transform:l=g=>g}=e,o,u;function m(){const g=hs.languages[n];let y=r||o.textContent;y=ai.transform(y),y=l(y),s(2,u=n==="none"?y:hs.highlight(y,g,n))}function d(g){de[g?"unshift":"push"](()=>{o=g,s(1,o)})}return t.$$set=g=>{s(9,e=qt(qt({},e),ls(g))),"language"in g&&s(0,n=g.language),"source"in g&&s(3,r=g.source),"transform"in g&&s(4,l=g.transform),"$$scope"in g&&s(5,a=g.$$scope)},t.$$.update=()=>{e&&(r||o)&&m()},e=ls(e),[n,o,u,r,l,a,i,d]}class li extends qe{constructor(e){super(),Re(this,e,ri,ii,Ne,{language:0,source:3,transform:4})}}var Mn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Chess=t.validateFen=t.SQUARES=t.DEFAULT_POSITION=t.KING=t.QUEEN=t.ROOK=t.BISHOP=t.KNIGHT=t.PAWN=t.BLACK=t.WHITE=void 0,t.WHITE="w",t.BLACK="b",t.PAWN="p",t.KNIGHT="n",t.BISHOP="b",t.ROOK="r",t.QUEEN="q",t.KING="k",t.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";const e=-1,s={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"};t.SQUARES=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"];const i={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},a={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},n={b:[16,32,17,15],w:[-16,-32,-17,-15]},r={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},l=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],o=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],u={p:1,n:2,b:4,r:8,q:16,k:32},m="pnbrqkPNBRQK",d=[t.KNIGHT,t.BISHOP,t.ROOK,t.QUEEN],g=7,y=6,T=1,q=0,k={w:[{square:a.a1,flag:i.QSIDE_CASTLE},{square:a.h1,flag:i.KSIDE_CASTLE}],b:[{square:a.a8,flag:i.QSIDE_CASTLE},{square:a.h8,flag:i.KSIDE_CASTLE}]},w={b:T,w:y},f=["1-0","0-1","1/2-1/2","*"];function p(fe){return fe>>4}function S(fe){return fe&15}function _(fe){return"0123456789".indexOf(fe)!==-1}function P(fe){const c=S(fe),v=p(fe);return"abcdefgh".substring(c,c+1)+"87654321".substring(v,v+1)}function K(fe){return fe===t.WHITE?t.BLACK:t.WHITE}function G(fe){const c=[];c[0]="No errors.",c[1]="FEN string must contain six space-delimited fields.",c[2]="6th field (move number) must be a positive integer.",c[3]="5th field (half move counter) must be a non-negative integer.",c[4]="4th field (en-passant square) is invalid.",c[5]="3rd field (castling availability) is invalid.",c[6]="2nd field (side to move) is invalid.",c[7]="1st field (piece positions) does not contain 8 '/'-delimited rows.",c[8]="1st field (piece positions) is invalid [consecutive numbers].",c[9]="1st field (piece positions) is invalid [invalid piece].",c[10]="1st field (piece positions) is invalid [row too large].",c[11]="Illegal en-passant square";const v=fe.split(/\s+/);if(v.length!==6)return{valid:!1,errorNumber:1,error:c[1]};const b=parseInt(v[5],10);if(isNaN(b)||b<=0)return{valid:!1,errorNumber:2,error:c[2]};const A=parseInt(v[4],10);if(isNaN(A)||A<0)return{valid:!1,errorNumber:3,error:c[3]};if(!/^(-|[abcdefgh][36])$/.test(v[3]))return{valid:!1,errorNumber:4,error:c[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(v[2]))return{valid:!1,errorNumber:5,error:c[5]};if(!/^(w|b)$/.test(v[1]))return{valid:!1,errorNumber:6,error:c[6]};const F=v[0].split("/");if(F.length!==8)return{valid:!1,errorNumber:7,error:c[7]};for(let I=0;I<F.length;I++){let V=0,N=!1;for(let x=0;x<F[I].length;x++)if(_(F[I][x])){if(N)return{valid:!1,errorNumber:8,error:c[8]};V+=parseInt(F[I][x],10),N=!0}else{if(!/^[prnbqkPRNBQK]$/.test(F[I][x]))return{valid:!1,errorNumber:9,error:c[9]};V+=1,N=!1}if(V!==8)return{valid:!1,errorNumber:10,error:c[10]}}return v[3][1]=="3"&&v[1]=="w"||v[3][1]=="6"&&v[1]=="b"?{valid:!1,errorNumber:11,error:c[11]}:{valid:!0,errorNumber:0,error:c[0]}}t.validateFen=G;function W(fe,c){const v=fe.from,b=fe.to,A=fe.piece;let F=0,I=0,V=0;for(let N=0,x=c.length;N<x;N++){const oe=c[N].from,L=c[N].to,z=c[N].piece;A===z&&v!==oe&&b===L&&(F++,p(v)===p(oe)&&I++,S(v)===S(oe)&&V++)}return F>0?I>0&&V>0?P(v):V>0?P(v).charAt(1):P(v).charAt(0):""}function O(fe,c,v,b,A,F=void 0,I=i.NORMAL){const V=p(b);if(A===t.PAWN&&(V===g||V===q))for(let N=0;N<d.length;N++){const x=d[N];fe.push({color:c,from:v,to:b,piece:A,captured:F,promotion:x,flags:I|i.PROMOTION})}else fe.push({color:c,from:v,to:b,piece:A,captured:F,promotion:void 0,flags:I})}function Q(fe){let c=fe.charAt(0);return c>="a"&&c<="h"?fe.match(/[a-h]\d.*[a-h]\d/)?void 0:t.PAWN:(c=c.toLowerCase(),c==="o"?t.KING:c)}function le(fe){return fe.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class ve{constructor(c=t.DEFAULT_POSITION){this._board=new Array(128),this._turn=t.WHITE,this._header={},this._kings={w:e,b:e},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(c)}clear(c=!1){this._board=new Array(128),this._kings={w:e,b:e},this._turn=t.WHITE,this._castling={w:0,b:0},this._epSquare=e,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=c?this._header:{},this._updateSetup(this.fen())}load(c,v=!1){const b=c.split(/\s+/),A=b[0];let F=0;if(!G(c).valid)return!1;this.clear(v);for(let I=0;I<A.length;I++){const V=A.charAt(I);if(V==="/")F+=8;else if(_(V))F+=parseInt(V,10);else{const N=V<"a"?t.WHITE:t.BLACK;this.put({type:V.toLowerCase(),color:N},P(F)),F++}}return this._turn=b[1],b[2].indexOf("K")>-1&&(this._castling.w|=i.KSIDE_CASTLE),b[2].indexOf("Q")>-1&&(this._castling.w|=i.QSIDE_CASTLE),b[2].indexOf("k")>-1&&(this._castling.b|=i.KSIDE_CASTLE),b[2].indexOf("q")>-1&&(this._castling.b|=i.QSIDE_CASTLE),this._epSquare=b[3]==="-"?e:a[b[3]],this._halfMoves=parseInt(b[4],10),this._moveNumber=parseInt(b[5],10),this._updateSetup(this.fen()),!0}fen(){let c=0,v="";for(let F=a.a8;F<=a.h1;F++){if(this._board[F]){c>0&&(v+=c,c=0);const{color:I,type:V}=this._board[F];v+=I===t.WHITE?V.toUpperCase():V.toLowerCase()}else c++;F+1&136&&(c>0&&(v+=c),F!==a.h1&&(v+="/"),c=0,F+=8)}let b="";this._castling[t.WHITE]&i.KSIDE_CASTLE&&(b+="K"),this._castling[t.WHITE]&i.QSIDE_CASTLE&&(b+="Q"),this._castling[t.BLACK]&i.KSIDE_CASTLE&&(b+="k"),this._castling[t.BLACK]&i.QSIDE_CASTLE&&(b+="q"),b=b||"-";const A=this._epSquare===e?"-":P(this._epSquare);return[v,this._turn,b,A,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(c){this._history.length>0||(c!==t.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=c):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(t.DEFAULT_POSITION)}get(c){return this._board[a[c]]||!1}put({type:c,color:v},b){if(m.indexOf(c.toLowerCase())===-1||!(b in a))return!1;const A=a[b];return c==t.KING&&!(this._kings[v]==e||this._kings[v]==A)?!1:(this._board[A]={type:c,color:v},c===t.KING&&(this._kings[v]=A),this._updateSetup(this.fen()),!0)}remove(c){const v=this.get(c);return delete this._board[a[c]],v&&v.type===t.KING&&(this._kings[v.color]=e),this._updateSetup(this.fen()),v}_attacked(c,v){for(let b=a.a8;b<=a.h1;b++){if(b&136){b+=7;continue}if(this._board[b]===void 0||this._board[b].color!==c)continue;const A=this._board[b],F=b-v,I=F+119;if(l[I]&u[A.type]){if(A.type===t.PAWN){if(F>0){if(A.color===t.WHITE)return!0}else if(A.color===t.BLACK)return!0;continue}if(A.type==="n"||A.type==="k")return!0;const V=o[I];let N=b+V,x=!1;for(;N!==v;){if(this._board[N]!=null){x=!0;break}N+=V}if(!x)return!0}}return!1}_isKingAttacked(c){return this._attacked(K(c),this._kings[c])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const c={b:0,n:0,r:0,q:0,k:0,p:0},v=[];let b=0,A=0;for(let F=a.a8;F<=a.h1;F++){if(A=(A+1)%2,F&136){F+=7;continue}const I=this._board[F];I&&(c[I.type]=I.type in c?c[I.type]+1:1,I.type===t.BISHOP&&v.push(A),b++)}if(b===2)return!0;if(b===3&&(c[t.BISHOP]===1||c[t.KNIGHT]===1))return!0;if(b===c[t.BISHOP]+2){let F=0;const I=v.length;for(let V=0;V<I;V++)F+=v[V];if(F===0||F===I)return!0}return!1}isThreefoldRepetition(){const c=[],v={};let b=!1;for(;;){const A=this._undoMove();if(!A)break;c.push(A)}for(;;){const A=this.fen().split(" ").slice(0,4).join(" ");v[A]=A in v?v[A]+1:1,v[A]>=3&&(b=!0);const F=c.pop();if(F)this._makeMove(F);else break}return b}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:c=!1,square:v=void 0}={}){const b=this._moves({square:v});return c?b.map(A=>this._makePretty(A)):b.map(A=>this._moveToSan(A,b))}_moves({legal:c=!0,piece:v=void 0,square:b=void 0}={}){var A;const F=b?b.toLowerCase():void 0,I=v==null?void 0:v.toLowerCase(),V=[],N=this._turn,x=K(N);let oe=a.a8,L=a.h1,z=!1;if(F)if(F in a)oe=L=a[F],z=!0;else return[];for(let X=oe;X<=L;X++){if(X&136){X+=7;continue}if(!this._board[X]||this._board[X].color===x)continue;const{type:R}=this._board[X];let Z;if(R===t.PAWN){if(I&&I!==R)continue;Z=X+n[N][0],this._board[Z]||(O(V,N,X,Z,t.PAWN),Z=X+n[N][1],w[N]===p(X)&&!this._board[Z]&&O(V,N,X,Z,t.PAWN,void 0,i.BIG_PAWN));for(let re=2;re<4;re++)Z=X+n[N][re],!(Z&136)&&(((A=this._board[Z])===null||A===void 0?void 0:A.color)===x?O(V,N,X,Z,t.PAWN,this._board[Z].type,i.CAPTURE):Z===this._epSquare&&O(V,N,X,Z,t.PAWN,t.PAWN,i.EP_CAPTURE))}else{if(I&&I!==R)continue;for(let re=0,Ee=r[R].length;re<Ee;re++){const ie=r[R][re];for(Z=X;Z+=ie,!(Z&136);){if(!this._board[Z])O(V,N,X,Z,R);else{if(this._board[Z].color===N)break;O(V,N,X,Z,R,this._board[Z].type,i.CAPTURE);break}if(R===t.KNIGHT||R===t.KING)break}}}}if((I===void 0||I===t.KING)&&(!z||L===this._kings[N])){if(this._castling[N]&i.KSIDE_CASTLE){const X=this._kings[N],R=X+2;!this._board[X+1]&&!this._board[R]&&!this._attacked(x,this._kings[N])&&!this._attacked(x,X+1)&&!this._attacked(x,R)&&O(V,N,this._kings[N],R,t.KING,void 0,i.KSIDE_CASTLE)}if(this._castling[N]&i.QSIDE_CASTLE){const X=this._kings[N],R=X-2;!this._board[X-1]&&!this._board[X-2]&&!this._board[X-3]&&!this._attacked(x,this._kings[N])&&!this._attacked(x,X-1)&&!this._attacked(x,R)&&O(V,N,this._kings[N],R,t.KING,void 0,i.QSIDE_CASTLE)}}if(!c)return V;const ne=[];for(let X=0,R=V.length;X<R;X++)this._makeMove(V[X]),this._isKingAttacked(N)||ne.push(V[X]),this._undoMove();return ne}move(c,{sloppy:v=!1}={}){let b=null;if(typeof c=="string")b=this._moveFromSan(c,v);else if(typeof c=="object"){const F=this._moves();for(let I=0,V=F.length;I<V;I++)if(c.from===P(F[I].from)&&c.to===P(F[I].to)&&(!("promotion"in F[I])||c.promotion===F[I].promotion)){b=F[I];break}}if(!b)return null;const A=this._makePretty(b);return this._makeMove(b),A}_push(c){this._history.push({move:c,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(c){const v=this._turn,b=K(v);if(this._push(c),this._board[c.to]=this._board[c.from],delete this._board[c.from],c.flags&i.EP_CAPTURE&&(this._turn===t.BLACK?delete this._board[c.to-16]:delete this._board[c.to+16]),c.promotion&&(this._board[c.to]={type:c.promotion,color:v}),this._board[c.to].type===t.KING){if(this._kings[v]=c.to,c.flags&i.KSIDE_CASTLE){const A=c.to-1,F=c.to+1;this._board[A]=this._board[F],delete this._board[F]}else if(c.flags&i.QSIDE_CASTLE){const A=c.to+1,F=c.to-2;this._board[A]=this._board[F],delete this._board[F]}this._castling[v]=0}if(this._castling[v]){for(let A=0,F=k[v].length;A<F;A++)if(c.from===k[v][A].square&&this._castling[v]&k[v][A].flag){this._castling[v]^=k[v][A].flag;break}}if(this._castling[b]){for(let A=0,F=k[b].length;A<F;A++)if(c.to===k[b][A].square&&this._castling[b]&k[b][A].flag){this._castling[b]^=k[b][A].flag;break}}c.flags&i.BIG_PAWN?v===t.BLACK?this._epSquare=c.to-16:this._epSquare=c.to+16:this._epSquare=e,c.piece===t.PAWN?this._halfMoves=0:c.flags&(i.CAPTURE|i.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,v===t.BLACK&&this._moveNumber++,this._turn=b}undo(){const c=this._undoMove();return c?this._makePretty(c):null}_undoMove(){const c=this._history.pop();if(c===void 0)return null;const v=c.move;this._kings=c.kings,this._turn=c.turn,this._castling=c.castling,this._epSquare=c.epSquare,this._halfMoves=c.halfMoves,this._moveNumber=c.moveNumber;const b=this._turn,A=K(b);if(this._board[v.from]=this._board[v.to],this._board[v.from].type=v.piece,delete this._board[v.to],v.captured)if(v.flags&i.EP_CAPTURE){let F;b===t.BLACK?F=v.to-16:F=v.to+16,this._board[F]={type:t.PAWN,color:A}}else this._board[v.to]={type:v.captured,color:A};if(v.flags&(i.KSIDE_CASTLE|i.QSIDE_CASTLE)){let F,I;v.flags&i.KSIDE_CASTLE?(F=v.to+1,I=v.to-1):(F=v.to-2,I=v.to+1),this._board[F]=this._board[I],delete this._board[I]}return v}pgn({newline:c=`
`,maxWidth:v=0}={}){const b=[];let A=!1;for(const z in this._header)b.push("["+z+' "'+this._header[z]+'"]'+c),A=!0;A&&this._history.length&&b.push(c);const F=z=>{const ne=this._comments[this.fen()];if(typeof ne<"u"){const X=z.length>0?" ":"";z=`${z}${X}{${ne}}`}return z},I=[];for(;this._history.length>0;)I.push(this._undoMove());const V=[];let N="";for(I.length===0&&V.push(F(""));I.length>0;){N=F(N);const z=I.pop();if(!z)break;if(!this._history.length&&z.color==="b"){const ne=`${this._moveNumber}. ...`;N=N?`${N} ${ne}`:ne}else z.color==="w"&&(N.length&&V.push(N),N=this._moveNumber+".");N=N+" "+this._moveToSan(z,this._moves({legal:!0})),this._makeMove(z)}if(N.length&&V.push(F(N)),typeof this._header.Result<"u"&&V.push(this._header.Result),v===0)return b.join("")+V.join(" ");const x=function(){return b.length>0&&b[b.length-1]===" "?(b.pop(),!0):!1},oe=function(z,ne){for(const X of ne.split(" "))if(!!X){if(z+X.length>v){for(;x();)z--;b.push(c),z=0}b.push(X),z+=X.length,b.push(" "),z++}return x()&&z--,z};let L=0;for(let z=0;z<V.length;z++){if(L+V[z].length>v&&V[z].includes("{")){L=oe(L,V[z]);continue}L+V[z].length>v&&z!==0?(b[b.length-1]===" "&&b.pop(),b.push(c),L=0):z!==0&&(b.push(" "),L++),b.push(V[z]),L+=V[z].length}return b.join("")}header(...c){for(let v=0;v<c.length;v+=2)typeof c[v]=="string"&&typeof c[v+1]=="string"&&(this._header[c[v]]=c[v+1]);return this._header}loadPgn(c,{sloppy:v=!1,newlineChar:b=`\r?
`}={}){function A(ie){return ie.replace(/\\/g,"\\")}function F(ie){const Pe={},Ie=ie.split(new RegExp(A(b)));let Ue="",Be="";for(let Oe=0;Oe<Ie.length;Oe++){const ze=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;Ue=Ie[Oe].replace(ze,"$1"),Be=Ie[Oe].replace(ze,"$2"),Ue.trim().length>0&&(Pe[Ue]=Be)}return Pe}c=c.trim();const V=new RegExp("^(\\[((?:"+A(b)+")|.)*\\])(?:\\s*"+A(b)+"){2}").exec(c),N=V&&V.length>=2?V[1]:"";this.reset();const x=F(N);let oe="";for(const ie in x)ie.toLowerCase()==="fen"&&(oe=x[ie]),this.header(ie,x[ie]);if(v){if(oe&&!this.load(oe,!0))return!1}else if(x.SetUp==="1"&&!("FEN"in x&&this.load(x.FEN,!0)))return!1;function L(ie){return Array.from(ie).map(function(Pe){return Pe.charCodeAt(0)<128?Pe.charCodeAt(0).toString(16):encodeURIComponent(Pe).replace(/%/g,"").toLowerCase()}).join("")}function z(ie){return ie.length==0?"":decodeURIComponent("%"+(ie.match(/.{1,2}/g)||[]).join("%"))}const ne=function(ie){return ie=ie.replace(new RegExp(A(b),"g")," "),`{${L(ie.slice(1,ie.length-1))}}`},X=function(ie){if(ie.startsWith("{")&&ie.endsWith("}"))return z(ie.slice(1,ie.length-1))};let R=c.replace(N,"").replace(new RegExp(`({[^}]*})+?|;([^${A(b)}]*)`,"g"),function(ie,Pe,Ie){return Pe!==void 0?ne(Pe):" "+ne(`{${Ie.slice(1)}}`)}).replace(new RegExp(A(b),"g")," ");const Z=/(\([^()]+\))+?/g;for(;Z.test(R);)R=R.replace(Z,"");R=R.replace(/\d+\.(\.\.)?/g,""),R=R.replace(/\.\.\./g,""),R=R.replace(/\$\d+/g,"");let re=R.trim().split(new RegExp(/\s+/));re=re.join(",").replace(/,,+/g,",").split(",");let Ee="";for(let ie=0;ie<re.length;ie++){const Pe=X(re[ie]);if(Pe!==void 0){this._comments[this.fen()]=Pe;continue}const Ie=this._moveFromSan(re[ie],v);if(Ie==null)if(f.indexOf(re[ie])>-1)Ee=re[ie];else return!1;else Ee="",this._makeMove(Ie)}return Ee&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",Ee),!0}_moveToSan(c,v){let b="";if(c.flags&i.KSIDE_CASTLE)b="O-O";else if(c.flags&i.QSIDE_CASTLE)b="O-O-O";else{if(c.piece!==t.PAWN){const A=W(c,v);b+=c.piece.toUpperCase()+A}c.flags&(i.CAPTURE|i.EP_CAPTURE)&&(c.piece===t.PAWN&&(b+=P(c.from)[0]),b+="x"),b+=P(c.to),c.promotion&&(b+="="+c.promotion.toUpperCase())}return this._makeMove(c),this.isCheck()&&(this.isCheckmate()?b+="#":b+="+"),this._undoMove(),b}_moveFromSan(c,v=!1){const b=le(c);let A=Q(b),F=this._moves({legal:!0,piece:A});for(let z=0,ne=F.length;z<ne;z++)if(b===le(this._moveToSan(F[z],F)))return F[z];if(!v)return null;let I,V,N,x,oe,L=!1;V=b.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),V?(I=V[1],N=V[2],x=V[3],oe=V[4],N.length==1&&(L=!0)):(V=b.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),V&&(I=V[1],N=V[2],x=V[3],oe=V[4],N.length==1&&(L=!0))),A=Q(b),F=this._moves({legal:!0,piece:I||A});for(let z=0,ne=F.length;z<ne;z++)if(N&&x){if((!I||I.toLowerCase()==F[z].piece)&&a[N]==F[z].from&&a[x]==F[z].to&&(!oe||oe.toLowerCase()==F[z].promotion))return F[z];if(L){const X=P(F[z].from);if((!I||I.toLowerCase()==F[z].piece)&&a[x]==F[z].to&&(N==X[0]||N==X[1])&&(!oe||oe.toLowerCase()==F[z].promotion))return F[z]}}return null}ascii(){let c=`   +------------------------+
`;for(let v=a.a8;v<=a.h1;v++){if(S(v)===0&&(c+=" "+"87654321"[p(v)]+" |"),this._board[v]){const b=this._board[v].type,F=this._board[v].color===t.WHITE?b.toUpperCase():b.toLowerCase();c+=" "+F+" "}else c+=" . ";v+1&136&&(c+=`|
`,v+=8)}return c+=`   +------------------------+
`,c+="     a  b  c  d  e  f  g  h",c}perft(c){const v=this._moves({legal:!1});let b=0;const A=this._turn;for(let F=0,I=v.length;F<I;F++)this._makeMove(v[F]),this._isKingAttacked(A)||(c-1>0?b+=this.perft(c-1):b++),this._undoMove();return b}_makePretty(c){const{color:v,piece:b,from:A,to:F,flags:I,captured:V,promotion:N}=c;let x="";for(const L in i)i[L]&I&&(x+=s[L]);const oe={color:v,piece:b,from:P(A),to:P(F),san:this._moveToSan(c,this._moves({legal:!0})),flags:x};return V&&(oe.captured=V),N&&(oe.promotion=N),oe}turn(){return this._turn}board(){const c=[];let v=[];for(let b=a.a8;b<=a.h1;b++)this._board[b]==null?v.push(null):v.push({square:P(b),type:this._board[b].type,color:this._board[b].color}),b+1&136&&(c.push(v),v=[],b+=8);return c}squareColor(c){if(c in a){const v=a[c];return(p(v)+S(v))%2===0?"light":"dark"}return null}history({verbose:c=!1}={}){const v=[],b=[];for(;this._history.length>0;)v.push(this._undoMove());for(;;){const A=v.pop();if(!A)break;c?b.push(this._makePretty(A)):b.push(this._moveToSan(A,this._moves())),this._makeMove(A)}return b}_pruneComments(){const c=[],v={},b=A=>{A in this._comments&&(v[A]=this._comments[A])};for(;this._history.length>0;)c.push(this._undoMove());for(b(this.fen());;){const A=c.pop();if(!A)break;this._makeMove(A),b(this.fen())}this._comments=v}getComment(){return this._comments[this.fen()]}setComment(c){this._comments[this.fen()]=c.replace("{","[").replace("}","]")}deleteComment(){const c=this._comments[this.fen()];return delete this._comments[this.fen()],c}getComments(){return this._pruneComments(),Object.keys(this._comments).map(c=>({fen:c,comment:this._comments[c]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(c=>{const v=this._comments[c];return delete this._comments[c],{fen:c,comment:v}})}}t.Chess=ve})(Mn);var _e=(t=>(t[t.WHITE=0]="WHITE",t[t.BLACK=1]="BLACK",t[t.BOTH=2]="BOTH",t[t.SPECTATOR=3]="SPECTATOR",t[t.SERVER=4]="SERVER",t))(_e||{}),ee=(t=>(t[t.LEGAL=0]="LEGAL",t[t.LEGALHOVER=1]="LEGALHOVER",t[t.CHECK=2]="CHECK",t[t.MOVE=3]="MOVE",t[t.NEXTMOVE=4]="NEXTMOVE",t[t.PREMOVE=5]="PREMOVE",t[t.PREMOVEHOVER=6]="PREMOVEHOVER",t[t.SELECT=7]="SELECT",t))(ee||{});const It=t=>{if(typeof t=="string")return t;switch(t){case 0:case 1:return"legal";case 2:return"check";case 3:return"move";case 4:return"nextMove";case 5:case 6:return"preMove";case 7:return"select";default:return"check"}};class oi{constructor(e){H(this,"boardTheme");H(this,"piecesTheme");H(this,"mouseEvents");H(this,"flipped");H(this,"notation");H(this,"style");H(this,"startFen");H(this,"size");H(this,"resizible");H(this,"defaultState",{boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:pi,size:0,style:{shadow:!1,borderRadius:"0rem"},resizible:{enabled:!1,min:256,max:1024}});H(this,"setConfigSettings",e=>{e!==void 0&&(e.boardTheme!==void 0&&(this.boardTheme=e.boardTheme),e.piecesTheme!==void 0&&(this.piecesTheme=e.piecesTheme),e.mouseEvents!==void 0&&(this.mouseEvents=e.mouseEvents),e.flipped!==void 0&&(this.flipped=e.flipped),e.notation!==void 0&&(this.notation=e.notation),e.startFen!==void 0&&(this.startFen=e.startFen),e.style!==void 0&&(e.style.shadow!==void 0&&(this.style.shadow=e.style.shadow),e.style.borderRadius!==void 0&&(this.style.borderRadius=e.style.borderRadius)))});H(this,"getConfig",()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...(this.style.shadow!==this.defaultState.style.shadow||this.style.borderRadius!==this.defaultState.style.borderRadius)&&{style:{...this.style.shadow!==this.defaultState.style.shadow&&{shadow:this.style.shadow},...this.style.borderRadius!==this.defaultState.style.borderRadius&&{borderRadius:this.style.borderRadius}}}};if(Object.keys(e).length!==0)return e});this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.style={...this.defaultState.style},this.resizible={...this.defaultState.resizible},this.setConfigSettings(e)}}class ui{constructor(e){H(this,"enabled");H(this,"color");H(this,"defaultState",{enabled:!0,color:_e.BOTH});H(this,"setConfigSettings",e=>{switch(e){case!0:this.enabled=!0,this.color=_e.BOTH;break;case!1:this.enabled=!1;break;case _e.WHITE:this.enabled=!0,this.color=_e.WHITE;break;case _e.BLACK:this.enabled=!0,this.color=_e.BLACK;break}});H(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class fi{constructor(e){H(this,"enabled");H(this,"ghostPiece");H(this,"transition");H(this,"defaultState",{enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}});H(this,"setConfigSettings",e=>{var s,i,a,n;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(s=e==null?void 0:e.transition)!=null&&s.duration&&(this.transition.settings.duration=(i=e==null?void 0:e.transition)==null?void 0:i.duration),(a=e==null?void 0:e.transition)!=null&&a.easing&&(this.transition.settings.easing=(n=e==null?void 0:e.transition)==null?void 0:n.easing)))))});H(this,"getConfig",()=>{const e={},s={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(s.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(s.easing=this.transition.settings.easing),Object.keys(s).length!==0&&(e.transition=s)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class di{constructor(e){H(this,"enabled");H(this,"selectedPiece");H(this,"defaultState",{enabled:!0,selectedPiece:void 0});H(this,"setConfigSettings",e=>{e!==void 0&&(this.enabled=e)});H(this,"getConfig",()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class ci{constructor(e){H(this,"enabled");H(this,"whiteToMove");H(this,"moves");H(this,"settings");H(this,"preMoves");H(this,"lastMove");H(this,"checkSquare");H(this,"defaultState",{enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0});H(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))});H(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled});this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class hi{constructor(e){H(this,"enabled");H(this,"settings");H(this,"defaultState",{enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}});H(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))});H(this,"getConfig",()=>{const e={},s=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(s.forEach(i=>{this.settings[i]!==this.defaultState.settings[i]&&(e[i]=this.settings[i])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class gi{constructor(e){H(this,"enabled");H(this,"tools");H(this,"settings");H(this,"defaultState",{enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}});H(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.knightLShape!==void 0&&(this.settings.knightLShape=e.knightLShape),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))});H(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(e.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class bi{constructor(e){H(this,"enabled");H(this,"settings");H(this,"defaultState",{enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}});H(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))});H(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class mi{constructor(e){H(this,"getLegalMoves");H(this,"getPreMoves");H(this,"beforeMove");H(this,"afterMove");H(this,"getLastMove");H(this,"getInCheck");H(this,"getWhiteToMove");H(this,"defaultState",{getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0});H(this,"setConfigSettings",e=>{e!==void 0&&(e.getLegalMoves&&(this.getLegalMoves=e.getLegalMoves),e.getPreMoves&&(this.getPreMoves=e.getPreMoves),e.beforeMove&&(this.beforeMove=e.beforeMove),e.afterMove&&(this.afterMove=e.afterMove),e.getLastMove&&(this.getLastMove=e.getLastMove),e.getInCheck&&(this.getInCheck=e.getInCheck),e.getWhiteToMove&&(this.getWhiteToMove=e.getWhiteToMove))});H(this,"getConfig",()=>{const e={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(e).length>0?e:void 0});this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const pi="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class kn{constructor(e){H(this,"pieces");H(this,"markedSquares");H(this,"board");H(this,"movable");H(this,"draggable");H(this,"selectable");H(this,"legal");H(this,"callbacks");H(this,"highlight");H(this,"drawTools");H(this,"sounds");H(this,"getConfig",()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}));this.pieces=[],this.markedSquares=new Set,this.board=new oi(e==null?void 0:e.board),this.movable=new ui(e==null?void 0:e.movable),this.draggable=new fi(e==null?void 0:e.draggable),this.selectable=new di(e==null?void 0:e.selectable),this.legal=new ci(e==null?void 0:e.legal),this.callbacks=new mi(e==null?void 0:e.callbacks),this.highlight=new hi(e==null?void 0:e.highlight),this.drawTools=new gi(e==null?void 0:e.drawTools),this.sounds=new bi(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){!this.legalEnabled||(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){!this.preMovesEnabled||(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.preMovesEnabled?this.legal.preMoves.curMove:""}set currentPreMove(e){e.length<4||(this.preMovesEnabled?this.legal.preMoves.curMove=e:this.legal.preMoves.curMove="")}get selectableEnabled(){return this.selectable.enabled}get draggableEnabled(){return this.draggable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){!this.legalEnabled||(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4&&e!==""||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const vi=["a","b","c","d","e","f","g","h"],_i=["8","7","6","5","4","3","2","1"];function Ft(t){return{x:vi.indexOf(t[0]),y:_i.indexOf(t[1])}}function Gt(t){return t.charCodeAt(0)-97}function Ei(t){return 8-parseInt(t,10)}const Mi=t=>{let e="",s=0;for(let i=0;i<t.length;i++){i!==0&&(e+="/");for(let a=0;a<t[i].length;a++){const n=t[i][a];n!=null&&s===0?n[0]==="w"?e+=n[1]:e+=n[1].toLowerCase():n!=null&&s!==0?(e+=s.toString(),s=0,n[0]==="w"?e+=n[1]:e+=n[1].toLowerCase()):s++}s!==0&&(e+=s.toString(),s=0)}return e},ki="8/8/8/8/8/8/8/8 w - - 0 1";class wi{constructor(e){H(this,"letters",{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7});H(this,"state");H(this,"changeLegalHoverIfNeeded",e=>{e.color!==ee.LEGAL&&e.color!==ee.PREMOVE||this.state.pieces.forEach(s=>{s.square===e.square&&(e.color=e.color===ee.LEGAL?ee.LEGALHOVER:ee.PREMOVEHOVER)})});H(this,"highlightSquare",(e,s)=>{const i={square:e,color:s};this.state.markedSquares.forEach(a=>{a.square===e&&a.color!==ee.MOVE&&a.color!==ee.CHECK&&this.state.markedSquares.delete(a)}),this.changeLegalHoverIfNeeded(i),this.state.markedSquares.add(i)});H(this,"legalHover",e=>{this.state.markedSquares.forEach(s=>{if(s.square===e&&s.color===ee.LEGAL)s.color=ee.LEGALHOVER;else if(s.square!==e&&s.color===ee.LEGALHOVER){let i=!1;this.state.pieces.forEach(a=>{a.square===s.square&&(i=!0)}),i||(s.color=ee.LEGAL)}})});H(this,"preMoveHover",e=>{this.state.markedSquares.forEach(s=>{if(s.square===e&&s.color===ee.PREMOVE)s.color=ee.PREMOVEHOVER;else if(s.square!==e&&s.color===ee.PREMOVEHOVER){let i=!1;this.state.pieces.forEach(a=>{a.square===s.square&&(i=!0)}),i||(s.color=ee.PREMOVE)}})});H(this,"toggleSquareHighlight",(e,s)=>{const i={square:e,color:s};let a=!1;return this.state.markedSquares.forEach(n=>{n.square===e&&(this.state.markedSquares.delete(n),n.color===s&&(a=!0))}),this.changeLegalHoverIfNeeded(i),a?!0:(this.state.markedSquares.add(i),!1)});H(this,"getSelectedSquare",()=>{let e="";return this.state.markedSquares.forEach(s=>{s.color===ee.SELECT&&(e=s.square)}),e});H(this,"clearSquare",(e,s)=>{e.length===2&&this.state.markedSquares.forEach(i=>{i.square===e&&(i.color===s||s===void 0)&&this.state.markedSquares.delete(i)})});H(this,"clearAllSquares",e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(s=>{s.color===e&&this.state.markedSquares.delete(s)})});H(this,"setPiece",(e,s)=>{if(this.notValidThing({square:e,piece:s}))return;const i=this.state.pieces.find(a=>a.square===e);i?i.name=s:this.state.pieces.push({square:e,name:s})});H(this,"removePiece",e=>{this.notValidThing({square:e})||this.state.pieces.forEach((s,i)=>{s.square===e&&this.state.pieces.splice(i,1)})});H(this,"clearAllPieces",()=>{this.state.pieces.length=0});H(this,"getGridCoordsFromSquare",e=>{if(this.notValidThing({square:e}))return{x:0,y:0};const s=e[0],i=e[1],a=this.state.board.flipped?Math.abs(this.letters[s]-7):this.letters[s],n=this.state.board.flipped?Math.abs(parseInt(i,10)-8):parseInt(i,10)-1;return typeof a!="number"||n<0||n>7?{x:0,y:0}:{x:a,y:n}});H(this,"makeMove",e=>{if(this.notValidThing({move:e}))return;let s=!1,i;const a=e.substring(0,2),n=e.substring(2,4),r=e.substring(4);this.state.pieces.forEach(l=>{l.square===n&&(i=l,this.removePiece(l.square))}),this.state.pieces.forEach(l=>{l.square===a&&(l.square=n,s=!0,r&&(l.name=l.name[0]+r.toUpperCase()))}),s?this.state.legal.lastMove=e:i&&this.state.pieces.push(i)});H(this,"getSquareFromIndices",(e,s)=>`${Object.keys(this.letters)[e]}${(s+1).toString()}`);H(this,"updatePiecesWithFen",e=>{const s=[...Array(8)].map(()=>Array(8).fill(null)),i=["1","2","3","4","5","6","7","8"];let a=0,n=0;for(let o=0;o<(e.includes(" ")?e.indexOf(" "):e.length);o++)if(e[o]==="/")a++,n=0;else if(!i.includes(e[o]))e[o]===e[o].toUpperCase()?s[a][n]=`w${e[o]}`:s[a][n]=`b${e[o].toUpperCase()}`,n++;else for(let u=0;u<parseInt(e[o],10);u++)s[a][n]=null,n++;const r=[],l=[];for(let o=0;o<s.length;++o)for(let u=0;u<s.length;++u){const m=s[o][u],d=this.getPieceFromSquare(this.getSquareFromIndices(u,Math.abs(o-7)));m&&!d&&r.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:m}),!m&&d&&l.push(d),m&&d&&m!==d.name&&(r.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:m}),l.push(d))}for(let o=0;o<l.length;o++)for(let u=0;u<r.length;u++)!r[u]||!l[o]||r[u].name===l[o].name&&(l[o].square=r[u].square,l.splice(o,1),o--,r.splice(u,1),u--);r.forEach(o=>{this.state.pieces.push(o)}),l.forEach(o=>{this.state.pieces.splice(this.state.pieces.indexOf(o),1)})});H(this,"notValidThing",e=>{const{square:s,piece:i,move:a}=e;return!!(s&&s.length!==2||i&&i.length!==2||a&&a.length!==4&&a.length!==5)});H(this,"setGhostPiece",e=>{this.state.draggable.ghostPiece.piece=e});H(this,"removeGhostPiece",()=>{this.state.draggable.ghostPiece.piece=void 0});H(this,"isCastling",e=>{switch(e){case"e1g1":case"e1c1":case"e8g8":case"e8c8":return!0;default:return!1}});H(this,"getRookMoveIfIsCastling",e=>{switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return}});H(this,"isEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s===void 0||s.name!=="wP"&&s.name!=="bP")});H(this,"getCapturedPawnSquareIfIsEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const s=this.getPieceFromSquare(e.substring(0,2));if(s===void 0||s.name!=="wP"&&s.name!=="bP")return;const i=this.getPieceFromSquare(`${e[2]}${(parseInt(e[3],10)+(s.name==="wP"?-1:1)).toString()}`);return i==null?void 0:i.square});H(this,"isCapture",e=>!!this.getPieceFromSquare(e.substring(2,4)));H(this,"isPromotion",e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s&&(s.name[1]!=="P"||s.name[0]==="w"&&e[3]==="1"||s.name[0]==="b"&&e[3]==="8"))});H(this,"callbackExists",e=>this.state.callbacks[e]!==void 0);H(this,"flipBoard",e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped});H(this,"setConfigSettings",e=>{this.state.setConfigSettings(e)});this.state=new kn(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const e=this.state.pieces.find(s=>s.name==="wK");if(e)return e.square}getBlackKingSquare(){const e=this.state.pieces.find(s=>s.name==="bK");if(e)return e.square}getShortFEN(){if(this.state.pieces.length===0)return ki;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(s=>{e[Ei(s.square[1])][Gt(s.square[0])]=s.name}),Mi(e)}getPieceFromSquare(e){if(!e)return;let s;return this.state.pieces.forEach(i=>{i.square===e&&(s=i)}),s}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get draggableEnabled(){return this.state.draggableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}}const Si={[ee.LEGAL]:"legalSQ cursor-pointer",[ee.LEGALHOVER]:"legalSQ_hover cursor-pointer",[ee.SELECT]:"selectedSQ",[ee.MOVE]:"highlightMove",[ee.NEXTMOVE]:"nextMoveSQ",[ee.PREMOVE]:"preMoveSQ cursor-pointer",[ee.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[ee.CHECK]:"checkSQ"},yi={white:"#f0d9b5",black:"#b58863"},Ci="standard.svg",Ai={[ee.LEGAL]:"legalSQ cursor-pointer",[ee.LEGALHOVER]:"legalSQ_hover cursor-pointer",[ee.SELECT]:"selectedSQ-darkBlue",[ee.MOVE]:"highlightMove-darkBlue",[ee.NEXTMOVE]:"nextMoveSQ",[ee.PREMOVE]:"preMoveSQ cursor-pointer",[ee.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[ee.CHECK]:"checkSQ"},Pi={white:"#94A3B8",black:"#475569"},Ti="darkBlue.svg",Xe={squareStyles:{standard:Si,darkBlue:Ai},colors:{standard:yi,darkBlue:Pi},imageName:{standard:Ci,darkBlue:Ti}};function gs(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function bs(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function ms(t){let e,s=t[4][t[1]?Math.abs(t[8]-7):t[8]]+"",i,a;return{c(){e=B("span"),i=me(s),a=te(),this.h()},l(n){e=U(n,"SPAN",{"data-file":!0,style:!0,class:!0});var r=j(e);i=pe(r,s),a=se(r),r.forEach(E),this.h()},h(){h(e,"data-file",t[6]),Me(e,"--font-size",t[3]+"px"),Me(e,"color",t[8]%2===0?Xe.colors[t[0]].white:Xe.colors[t[0]].black),h(e,"class","svelte-1dkkugo")},m(n,r){Y(n,e,r),C(e,i),C(e,a)},p(n,r){r&2&&s!==(s=n[4][n[1]?Math.abs(n[8]-7):n[8]]+"")&&Dt(i,s),r&8&&Me(e,"--font-size",n[3]+"px"),r&1&&Me(e,"color",n[8]%2===0?Xe.colors[n[0]].white:Xe.colors[n[0]].black)},d(n){n&&E(e)}}}function ps(t){let e,s=(t[1]?t[8]+1:Math.abs(t[8]-8))+"",i,a,n;return{c(){e=B("span"),i=me(s),a=te(),this.h()},l(r){e=U(r,"SPAN",{"data-file":!0,style:!0,class:!0});var l=j(e);i=pe(l,s),a=se(l),l.forEach(E),this.h()},h(){h(e,"data-file",t[6]),h(e,"style",n="--font-size: "+t[3]+"px; color: "+(t[8]%2===0?Xe.colors[t[0]].white:Xe.colors[t[0]].black)+";"+(t[1]?" text-align: right;":"")),h(e,"class","svelte-1dkkugo")},m(r,l){Y(r,e,l),C(e,i),C(e,a)},p(r,l){l&2&&s!==(s=(r[1]?r[8]+1:Math.abs(r[8]-8))+"")&&Dt(i,s),l&11&&n!==(n="--font-size: "+r[3]+"px; color: "+(r[8]%2===0?Xe.colors[r[0]].white:Xe.colors[r[0]].black)+";"+(r[1]?" text-align: right;":""))&&h(e,"style",n)},d(r){r&&E(e)}}}function Li(t){let e,s,i,a,n=t[4],r=[];for(let u=0;u<n.length;u+=1)r[u]=ms(bs(t,n,u));let l=t[4],o=[];for(let u=0;u<l.length;u+=1)o[u]=ps(gs(t,l,u));return{c(){e=B("div");for(let u=0;u<r.length;u+=1)r[u].c();s=te(),i=B("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=U(u,"DIV",{class:!0});var m=j(e);for(let g=0;g<r.length;g+=1)r[g].l(m);m.forEach(E),s=se(u),i=U(u,"DIV",{class:!0});var d=j(i);for(let g=0;g<o.length;g+=1)o[g].l(d);d.forEach(E),this.h()},h(){h(e,"class","files noselect svelte-1dkkugo"),h(i,"class","ranks noselect svelte-1dkkugo"),xe(()=>t[5].call(i))},m(u,m){Y(u,e,m);for(let d=0;d<r.length;d+=1)r[d].m(e,null);Y(u,s,m),Y(u,i,m);for(let d=0;d<o.length;d+=1)o[d].m(i,null);a=gn(i,t[5].bind(i))},p(u,[m]){if(m&27){n=u[4];let d;for(d=0;d<n.length;d+=1){const g=bs(u,n,d);r[d]?r[d].p(g,m):(r[d]=ms(g),r[d].c(),r[d].m(e,null))}for(;d<r.length;d+=1)r[d].d(1);r.length=n.length}if(m&27){l=u[4];let d;for(d=0;d<l.length;d+=1){const g=gs(u,l,d);o[d]?o[d].p(g,m):(o[d]=ps(g),o[d].c(),o[d].m(i,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=l.length}},i:Le,o:Le,d(u){u&&E(e),ft(r,u),u&&E(s),u&&E(i),ft(o,u),a()}}}function Ii(t,e,s){let i,{theme:a}=e,{flipped:n}=e;const r=["a","b","c","d","e","f","g","h"];let l;function o(){l=this.clientHeight,s(2,l)}return t.$$set=u=>{"theme"in u&&s(0,a=u.theme),"flipped"in u&&s(1,n=u.flipped)},t.$$.update=()=>{t.$$.dirty&4&&s(3,i=Math.floor(Math.log(l/8)*3))},[a,n,l,i,r,o]}class Oi extends qe{constructor(e){super(),Re(this,e,Ii,Li,Ne,{theme:0,flipped:1})}}function Fi(t){const e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}function qi(t){return t*t*((1.70158+1)*t-1.70158)}function Ri(t){return--t*t*((1.70158+1)*t+1.70158)+1}function Rt(t){const e=.36363636363636365,s=8/11,i=9/10,a=4356/361,n=35442/1805,r=16061/1805,l=t*t;return t<e?7.5625*l:t<s?9.075*l-9.9*t+3.4:t<i?a*l-n*t+r:10.8*t*t-20.52*t+10.72}function Ni(t){return t<.5?.5*(1-Rt(1-t*2)):.5*Rt(t*2-1)+.5}function Di(t){return 1-Rt(1-t)}function Bi(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function Ui(t){return 1-Math.sqrt(1-t*t)}function zi(t){return Math.sqrt(1- --t*t)}function Hi(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Vi(t){return t*t*t}function ss(t){const e=t-1;return e*e*e+1}function Wi(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1}function Ki(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))}function ji(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1}function Gi(t){return t===0||t===1?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-t*20)+1}function Qi(t){return t===0?t:Math.pow(2,10*(t-1))}function Xi(t){return t===1?t:1-Math.pow(2,-10*t)}function Yi(t){return t/=.5,t<1?.5*t*t:(t--,-.5*(t*(t-2)-1))}function Zi(t){return t*t}function Ji(t){return-t*(t-2)}function xi(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1}function $i(t){return Math.pow(t,4)}function ea(t){return Math.pow(t-1,3)*(1-t)+1}function ta(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function sa(t){return t*t*t*t*t}function na(t){return--t*t*t*t*t+1}function ia(t){return-.5*(Math.cos(Math.PI*t)-1)}function aa(t){const e=Math.cos(t*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function ra(t){return Math.sin(t*Math.PI/2)}const Nt=Object.freeze(Object.defineProperty({__proto__:null,backIn:qi,backInOut:Fi,backOut:Ri,bounceIn:Di,bounceInOut:Ni,bounceOut:Rt,circIn:Ui,circInOut:Bi,circOut:zi,cubicIn:Vi,cubicInOut:Hi,cubicOut:ss,elasticIn:Ki,elasticInOut:Wi,elasticOut:ji,expoIn:Qi,expoInOut:Gi,expoOut:Xi,quadIn:Zi,quadInOut:Yi,quadOut:Ji,quartIn:$i,quartInOut:xi,quartOut:ea,quintIn:sa,quintInOut:ta,quintOut:na,sineIn:aa,sineInOut:ia,sineOut:ra,linear:bn},Symbol.toStringTag,{value:"Module"}));function vs(t){return Object.prototype.toString.call(t)==="[object Date]"}function Qt(t,e){if(t===e||t!==t)return()=>t;const s=typeof t;if(s!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map((a,n)=>Qt(t[n],a));return a=>i.map(n=>n(a))}if(s==="object"){if(!t||!e)throw new Error("Object cannot be null");if(vs(t)&&vs(e)){t=t.getTime(),e=e.getTime();const n=e-t;return r=>new Date(t+r*n)}const i=Object.keys(e),a={};return i.forEach(n=>{a[n]=Qt(t[n],e[n])}),n=>{const r={};return i.forEach(l=>{r[l]=a[l](n)}),r}}if(s==="number"){const i=e-t;return a=>t+a*i}throw new Error(`Cannot interpolate ${s} values`)}function la(t,e={}){const s=ti(t);let i,a=t;function n(r,l){if(t==null)return s.set(t=r),Promise.resolve();a=r;let o=i,u=!1,{delay:m=0,duration:d=400,easing:g=bn,interpolate:y=Qt}=qt(qt({},e),l);if(d===0)return o&&(o.abort(),o=null),s.set(t=a),Promise.resolve();const T=Qn()+m;let q;return i=Xn(k=>{if(k<T)return!0;u||(q=y(t,r),typeof d=="function"&&(d=d(t,r)),u=!0),o&&(o.abort(),o=null);const w=k-T;return w>d?(s.set(t=r),!1):(s.set(t=q(g(w/d))),!0)}),i.promise}return{set:n,update:(r,l)=>n(r(a,t),l),subscribe:s.subscribe}}function _s(t,e,s,i){if(e===0&&s===0)return t;const a=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r=a[i?7-a.indexOf(t[0])-e:a.indexOf(t[0])+e],l=n[i?7-n.indexOf(t[1])-s:n.indexOf(t[1])+s];if(!(!r||!l))return`${r}${l}`}function Es(t,e,s){const i=e*1.15,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",(t.offsetWidth*i).toString()),a.setAttribute("height",(t.offsetHeight*i).toString()),a.style.position="absolute",a.style.zIndex="100",a.style.translate=`${s?"":"-"}${25*i/2}% -${25*i/2}%`,a.style.opacity="0.2",n.setAttribute("r",(t.offsetWidth*i/2).toString()),n.setAttribute("cx",(t.offsetWidth*i/2).toString()),n.setAttribute("cy",(t.offsetHeight*i/2).toString()),n.setAttribute("fill","black"),a.appendChild(n),a}function oa(t,e){let s;function i(I,V=1e3){let N=!1;const x=()=>{s==null?N=!1:(I(...s),s=null,setTimeout(x,V))};return(...oe)=>{if(N){s=oe;return}I(...oe),N=!0,setTimeout(x,V)}}let a,n,r,l,o,u,m,d,g=!1,y;const T=t.parentNode;let q,k=!1,{startSquare:w,boardFlipped:f,mouseEvents:p,canDrag:S,canSelect:_,duration:P,easingFunc:K}=e;const{coords:G}=e;t.style.cursor=!S&&!_?"default":"pointer";let W=os(G).x,O=os(G).y;const Q=1.6;let le=Es(t,Q,f);t.draggable=!1;function ve(I){const V=I.clientX-a,N=I.clientY-n;if(a=I.clientX,n=I.clientY,o+=V,u+=N,g||(Math.abs(o)>1||Math.abs(u)>1)&&(G.update(x=>({x:x.x+(a-t.offsetWidth/2-t.getBoundingClientRect().x)/t.clientWidth,y:I.pointerType==="touch"?x.y-(n-t.offsetHeight*1.5-t.getBoundingClientRect().y)/t.clientWidth:x.y-(n-t.offsetHeight/2-t.getBoundingClientRect().y)/t.clientWidth,scale:I.pointerType==="touch"?Q:1}),{duration:P,easing:K}),g=!0,t.style.zIndex="30",t.style.cursor="grabbing",t.dispatchEvent(new CustomEvent("startMoving"))),!!g){if(I.pointerType==="touch"){const x=Math.floor((o+r)/t.offsetWidth),oe=Math.floor((u+l)/t.offsetHeight),L=_s(w,x,oe,f);if(L){if(L!==q){const z=Ft(L);le.style.left=`${z.x*12.5}%`,le.style.top=`${z.y*12.5}%`,T.appendChild(le)}}else q&&(q=void 0)}G.update(x=>({x:x.x+V/t.clientWidth,y:x.y-N/t.clientWidth,scale:I.pointerType==="touch"?Q:1}),{duration:0}),t.dispatchEvent(new CustomEvent("moving",{detail:{x:a,y:n}}))}}const fe=i(ve,10);function c(){const I=window.scrollX-m,V=window.scrollY-d;m=window.scrollX,d=window.scrollY,G.update(N=>({x:N.x+I,y:N.y+V,scale:1}),{duration:0})}function v(){window.removeEventListener("pointermove",fe),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),document.body.removeEventListener("pointerleave",v),window.removeEventListener("scroll",c),s=null;const I=Math.floor((o+r)/t.offsetWidth),V=Math.floor((u+l)/t.offsetHeight),N=_s(w,I,V,f);k=!1,t.dispatchEvent(new CustomEvent("dropped",{detail:N})),G.update(()=>({x:W,y:O,scale:1}),{duration:P,easing:K}).then(()=>{k||t.dispatchEvent(new CustomEvent("animationEnded")),k||(t.style.zIndex="2")}),a=0,n=0,o=0,u=0,t.style.cursor=!S&&!_?"default":"pointer",setTimeout(()=>{k||(t.style.zIndex="2")},P),g=!1,le.remove()}function b(I){if(I.button!==0||!I.isPrimary||!p)return;if((_||S)&&t.dispatchEvent(new CustomEvent("clicked")),!S){t.dispatchEvent(new CustomEvent("dropped",{detail:w}));return}W=f?7-Gt(w[0]):Gt(w[0]),O=f?8-parseInt(w[1],10):parseInt(w[1],10)-1,q=w;const V=I.target.getBoundingClientRect();I.pointerType==="touch"?(a=I.clientX,n=I.clientY,r=I.clientX-V.x,l=I.clientY-V.y):(a=I.clientX,n=I.clientY,r=I.offsetX,l=I.offsetY),o=0,u=0,m=window.scrollX,d=window.scrollY,k=!0,window.addEventListener("pointermove",fe),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),document.body.addEventListener("pointerleave",v),window.addEventListener("scroll",c)}function A(I){I.preventDefault()}function F(I){I.preventDefault()}return t.addEventListener("contextmenu",A),t.addEventListener("dragstart",F),t.addEventListener("pointerdown",b),{destroy(){t.removeEventListener("pointerdown",b),t.removeEventListener("contextmenu",A),t.removeEventListener("dragstart",F),window.clearTimeout(y)},update(I){w=I.startSquare,P=I.duration,K=I.easingFunc,(I.canDrag!==S||I.canSelect!==_)&&(t.style.cursor=!I.canDrag&&!I.canSelect?"default":"pointer"),I.canDrag!==S&&(S=I.canDrag),I.canSelect!==_&&(_=I.canSelect),I.mouseEvents!==p&&(p=I.mouseEvents),f!==I.boardFlipped&&(le=Es(t,Q,I.boardFlipped)),f=I.boardFlipped}}}const Ms=""+new URL("../../assets/wP-f78bae6c.svg",import.meta.url).href,ua=""+new URL("../../assets/wR-5eb92d73.svg",import.meta.url).href,fa=""+new URL("../../assets/wN-a4c975a2.svg",import.meta.url).href,da=""+new URL("../../assets/wB-1ff2f149.svg",import.meta.url).href,ca=""+new URL("../../assets/wQ-8568b485.svg",import.meta.url).href,ha=""+new URL("../../assets/wK-4cdf6dc9.svg",import.meta.url).href,ga=""+new URL("../../assets/bP-84e521e8.svg",import.meta.url).href,ba=""+new URL("../../assets/bR-e39efb08.svg",import.meta.url).href,ma=""+new URL("../../assets/bN-d3912d91.svg",import.meta.url).href,pa=""+new URL("../../assets/bB-c430b746.svg",import.meta.url).href,va=""+new URL("../../assets/bQ-c7b9a43e.svg",import.meta.url).href,_a=""+new URL("../../assets/bK-3500a2e6.svg",import.meta.url).href;function Xt(t){switch(t){case"wP":return Ms;case"wR":return ua;case"wN":return fa;case"wB":return da;case"wQ":return ca;case"wK":return ha;case"bP":return ga;case"bR":return ba;case"bN":return ma;case"bB":return pa;case"bQ":return va;case"bK":return _a;default:return Ms}}function Ea(t){let e,s,i,a,n;return{c(){e=B("img"),this.h()},l(r){e=U(r,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){Me(e,"left",t[9].x*12.5+"%"),Me(e,"bottom",t[9].y*12.5+"%"),Me(e,"scale",t[9].scale),Me(e,"z-Index",t[4]?0:t[8]),Me(e,"opacity",t[4]?.3:1),Me(e,"cursor","pointer"),h(e,"class","noselect svelte-1g241z"),bt(e.src,s=Xt(t[2]))||h(e,"src",s),h(e,"alt",t[2])},m(r,l){var o,u,m;Y(r,e,l),a||(n=[xt(i=oa.call(null,e,{startSquare:t[1],mouseEvents:t[0],canDrag:t[13](t[7],t[6]),canSelect:t[14](t[7],t[5]),boardFlipped:t[3],duration:(o=t[6])!=null&&o.transition.enabled?t[6].transition.settings.duration:0,easingFunc:Nt[(m=(u=t[6])==null?void 0:u.transition.settings.easing)!=null?m:"cubicInOut"],coords:t[11]})),ce(e,"dropped",t[12]),ce(e,"clicked",t[17]),ce(e,"startMoving",t[18]),ce(e,"animationEnded",t[19]),ce(e,"moving",t[20])],a=!0)},p(r,[l]){var o,u,m;l&512&&Me(e,"left",r[9].x*12.5+"%"),l&512&&Me(e,"bottom",r[9].y*12.5+"%"),l&512&&Me(e,"scale",r[9].scale),l&272&&Me(e,"z-Index",r[4]?0:r[8]),l&16&&Me(e,"opacity",r[4]?.3:1),l&4&&!bt(e.src,s=Xt(r[2]))&&h(e,"src",s),l&4&&h(e,"alt",r[2]),i&&$t(i.update)&&l&235&&i.update.call(null,{startSquare:r[1],mouseEvents:r[0],canDrag:r[13](r[7],r[6]),canSelect:r[14](r[7],r[5]),boardFlipped:r[3],duration:(o=r[6])!=null&&o.transition.enabled?r[6].transition.settings.duration:0,easingFunc:Nt[(m=(u=r[6])==null?void 0:u.transition.settings.easing)!=null?m:"cubicInOut"],coords:r[11]})},i:Le,o:Le,d(r){r&&E(e),a=!1,$e(n)}}}function Ma(t,e,s){var c,v;let i,a,{square:n}=e,{name:r}=e,{mouseEvents:l=!0}=e,{getGridCoordsFromSquare:o}=e,{flipped:u}=e,{isGhost:m=!1}=e;m&&(l=!1);let{selectableState:d=void 0}=e,{draggableState:g=void 0}=e,{legalState:y=void 0}=e,{movableState:T=void 0}=e,q=!1;const k=Bt();let w=(c=g==null?void 0:g.transition)!=null&&c.enabled?g.transition.settings.duration:0;const f=la({x:0,y:0,scale:1},{duration:w,easing:Nt[(v=g==null?void 0:g.transition.settings.easing)!=null?v:"cubicInOut"]});Yn(t,f,b=>s(9,a=b));let p=!1;const S=b=>b[0]==="w"?_e.WHITE:_e.BLACK,_=b=>{var F;const A=o(b);f.update(()=>({x:A.x,y:A.y,scale:1}),{duration:p?w:0,easing:Nt[(F=g==null?void 0:g.transition.settings.easing)!=null?F:"cubicInOut"]}),p||(p=!0),w=g!=null&&g.transition.enabled?g.transition.settings.duration:0},P=b=>{w=0,b.detail||k("deselect"),n===b.detail?(!q&&W(T,d)?k("select"):k("deselect"),q=!q):q=!1,G(T,g)&&k("endDragging",n+b.detail),n!==b.detail&&b.detail&&k("move",n+b.detail)},K=b=>y!=null&&y.enabled?!!(y.preMoves.enabled&&S(r)===b.color||b.color===_e.WHITE&&y.whiteToMove&&S(r)===_e.WHITE||b.color===_e.BLACK&&!y.whiteToMove&&S(r)===_e.BLACK||b.color===_e.BOTH&&(S(r)===_e.WHITE&&y.whiteToMove||S(r)===_e.BLACK&&!y.whiteToMove)):b.color===S(r)||b.color===_e.BOTH,G=(b,A)=>!(b!=null&&b.enabled)||!(A!=null&&A.enabled)||!l?!1:K(b),W=(b,A)=>!(b!=null&&b.enabled)||!(A!=null&&A.enabled)||!l?!1:K(b),O=b=>b===void 0||b.name!==r||b.square!==n;function Q(b){Je.call(this,t,b)}function le(b){Je.call(this,t,b)}function ve(b){Je.call(this,t,b)}const fe=b=>{k("moving",b.detail)};return t.$$set=b=>{"square"in b&&s(1,n=b.square),"name"in b&&s(2,r=b.name),"mouseEvents"in b&&s(0,l=b.mouseEvents),"getGridCoordsFromSquare"in b&&s(15,o=b.getGridCoordsFromSquare),"flipped"in b&&s(3,u=b.flipped),"isGhost"in b&&s(4,m=b.isGhost),"selectableState"in b&&s(5,d=b.selectableState),"draggableState"in b&&s(6,g=b.draggableState),"legalState"in b&&s(16,y=b.legalState),"movableState"in b&&s(7,T=b.movableState)},t.$$.update=()=>{t.$$.dirty&32&&O(d==null?void 0:d.selectedPiece)&&(q=!1),t.$$.dirty&10&&_(n),t.$$.dirty&128&&s(8,i=typeof T=="boolean"?T?2:1:T!=null&&T.enabled?2:1)},[l,n,r,u,m,d,g,T,i,a,k,f,P,G,W,o,y,Q,le,ve,fe]}class wn extends qe{constructor(e){super(),Re(this,e,Ma,Ea,Ne,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:15,flipped:3,isGhost:4,selectableState:5,draggableState:6,legalState:16,movableState:7})}}function ka(t){let e,s;return{c(){e=B("div"),this.h()},l(i){e=U(i,"DIV",{style:!0,class:!0}),j(e).forEach(E),this.h()},h(){Me(e,"left",t[3]*12.5+"%"),Me(e,"bottom",t[4]*12.5+"%"),h(e,"class",s="noselect "+Xe.squareStyles[t[1]][t[0]]+(t[2]?"":" pointer-events-none")+" svelte-10vytug")},m(i,a){Y(i,e,a)},p(i,[a]){a&8&&Me(e,"left",i[3]*12.5+"%"),a&16&&Me(e,"bottom",i[4]*12.5+"%"),a&7&&s!==(s="noselect "+Xe.squareStyles[i[1]][i[0]]+(i[2]?"":" pointer-events-none")+" svelte-10vytug")&&h(e,"class",s)},i:Le,o:Le,d(i){i&&E(e)}}}function wa(t,e,s){let{square:i}=e,{color:a}=e,{getGridCoordsFromSquare:n}=e,{flipped:r}=e,{theme:l}=e,{mouseEvents:o=!0}=e,u,m;const d=()=>{const g=n(i);s(3,u=g.x),s(4,m=g.y)};return t.$$set=g=>{"square"in g&&s(5,i=g.square),"color"in g&&s(0,a=g.color),"getGridCoordsFromSquare"in g&&s(6,n=g.getGridCoordsFromSquare),"flipped"in g&&s(7,r=g.flipped),"theme"in g&&s(1,l=g.theme),"mouseEvents"in g&&s(2,o=g.mouseEvents)},t.$$.update=()=>{t.$$.dirty&128&&d()},[a,l,o,u,m,i,n,r]}class Sa extends qe{constructor(e){super(),Re(this,e,wa,ka,Ne,{square:5,color:0,getGridCoordsFromSquare:6,flipped:7,theme:1,mouseEvents:2})}}const ya=["a","b","c","d","e","f","g","h"],Ca=["8","7","6","5","4","3","2","1"];function Aa(t){t.querySelectorAll("[fixed]").forEach(e=>e.remove())}function Yt(t){return`${ya[t.x]}${Ca[t.y]}`}function Sn(t,e){return Math.abs((t.x-e.x)*(t.y-e.y))===2}function Zt(t,e){return`${Yt(t)}${Yt(e)}`}function Pa(t,e){return!!(Sn(t,e)||Math.abs(t.x-e.x)===Math.abs(t.y-e.y)||t.x===e.x!=(t.y===e.y))}function yn(t,e,s,i,a,n){let r={x:-1,y:-1},l,o;Sn(e,s)&&i?(Math.abs(s.x-e.x)===2?r={x:s.x,y:e.y}:r={x:e.x,y:s.y},r.y-e.y<0?o=Math.PI+Math.atan((r.x-e.x)/(r.y-e.y)):o=Math.atan((r.x-e.x)/Math.abs(r.y-e.y)),l={x:s.x-Math.sign(s.x-r.x)*(r.x!==s.x?.4:0),y:s.y-Math.sign(s.y-r.y)*(r.y!==s.y?.4:0)}):(s.y-e.y<0?o=Math.PI+Math.atan((s.x-e.x)/(s.y-e.y)):o=Math.atan((s.x-e.x)/Math.abs(s.y-e.y)),l={x:s.x-Math.sin(o)*.4,y:s.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};t.setAttribute("points",`${u.x+.5},${u.y+.5} ${r.x!==-1&&r.y!==-1&&i?`${r.x+.5},${r.y+.5} `:""}${l.x+.5},${l.y+.5}`),t.setAttribute("data-sqID",`${Zt(e,s)}`),n!==void 0&&t.setAttribute("opacity",`${n}`),a!==void 0&&(t.setAttribute("marker-start",`url(#start-${a[0]})`),t.setAttribute("marker-end",`url(#end-${a[0]})`),t.setAttribute("stroke",a))}function Ot(t,e,s,i,a,n){if(!(e===void 0||s.x===-1&&s.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),i?e.setAttribute("stroke","red"):a?e.setAttribute("stroke","orange"):n?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),t.querySelectorAll(`\u0441ircle[cx="${s.x+.5}"][cy="${s.y+.5}"]`).forEach(r=>{e!==void 0&&r!==e&&(r.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const r=i?"red":a?"orange":n?"blue":"green";e.setAttribute("stroke",`${r}`),e.setAttribute("marker-start",`url(#start-${r[0]})`),e.setAttribute("marker-end",`url(#end-${r[0]})`),t.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(l=>{e instanceof SVGPolylineElement&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function Cn(t,e,s,i,a){const n=document.createElementNS("http://www.w3.org/2000/svg","polyline");return yn(n,t,e,s,i,a),n.setAttribute("fill","none"),n.setAttribute("stroke-width","0.25"),n.setAttribute("stroke-linejoin","round"),n.setAttribute("opacity",a!==void 0?`${a}`:"0.4"),n.setAttribute("marker-start",i?`url(#start-${i[0]})`:"url(#start-g)"),n.setAttribute("marker-end",i?`url(#end-${i[0]})`:"url(#end-g)"),n.setAttribute("stroke",i||"green"),n}function Jt(t,e,s){const i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",`${t.x+.5}`),i.setAttribute("cy",`${t.y+.5}`),i.setAttribute("r","0.465"),i.setAttribute("opacity",s?`${s}`:"0.4"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.07"),i.setAttribute("stroke",e!=null?e:"green"),i}function Ta(t,e,s){e.forEach(i=>{if(i.type==="circle"){const a=Ft(i.square),n=Jt(a,i.color,i.opacity);t.appendChild(n)}else if(i.type==="arrow"){const a=Cn(Ft(i.from),Ft(i.to),s,i.color,i.opacity);a.setAttribute("fixed",""),t.appendChild(a)}})}function ks(t){t.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("fixed")||e.remove()})}function La(t,e){let{svg:s,flipped:i,enabled:a,settings:n}=e,r=!1,l={x:-1,y:-1},o,u;function m(k,w){const f=t.getBoundingClientRect(),p=i?f.width-(k-f.left):k-f.left,S=i?f.height-(w-f.top):w-f.top;return{x:Math.max(0,Math.min(7,Math.floor(p/(t.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(S/(t.clientHeight/8))))}}function d(k){if(u===void 0||l.x===-1&&l.y===-1)return;const w=m(k.clientX,k.clientY);n.onlyChessMove&&!Pa(l,w)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),l.x===w.x&&l.y===w.y?(Zt(l,w),u instanceof SVGPolylineElement&&(u.remove(),u=Jt(w)),Ot(s,u,l,k.shiftKey,k.ctrlKey,k.altKey),s.appendChild(u),s.querySelectorAll(`circle[cx="${l.x+.5}"][cy="${l.y+.5}"]`).forEach(f=>{f!==u&&(o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,s.querySelectorAll(`polyline[data-sqID="${Zt(l,w)}"]`).forEach(f=>{u===void 0||l.x===-1&&l.y===-1||f===u||(o=f,f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=Cn(l,w,n.knightLShape),Ot(s,u,l,k.shiftKey,k.ctrlKey,k.altKey),s.appendChild(u)):u instanceof SVGPolylineElement&&yn(u,l,w,n.knightLShape)))}function g(k){k.preventDefault()}function y(k){k.preventDefault(),Ot(s,u,l,k.shiftKey,k.ctrlKey,k.altKey)}function T(k){if(k.button===0)r=!1;else if(k.button===2){if(l.x===-1&&l.y===-1)return;s.querySelectorAll("[remove]").forEach(w=>{w.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:Yt(l),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,l={x:-1,y:-1},r=!1,window.removeEventListener("mousemove",d),window.removeEventListener("keydown",y),window.removeEventListener("keyup",y),window.removeEventListener("contextmenu",g)}window.removeEventListener("mouseup",T)}function q(k){if(k.button===0)r=!0,ks(s),window.addEventListener("mouseup",T);else if(k.button===2&&!r){const w=m(k.clientX,k.clientY);l=w,u=Jt(w),Ot(s,u,l,k.shiftKey,k.ctrlKey,k.altKey),o=void 0,s.querySelectorAll(`circle[cx="${w.x+.5}"][cy="${w.y+.5}"]`).forEach(f=>{o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&s.appendChild(u),window.addEventListener("mousemove",d),window.addEventListener("mouseup",T),window.addEventListener("keydown",y),window.addEventListener("keyup",y),window.addEventListener("contextmenu",g)}}return a&&t.addEventListener("mousedown",q),{update(k){k.svg!==s&&(s=k.svg),k.enabled!==a&&(a=k.enabled,a?t.addEventListener("mousedown",q):(ks(s),t.removeEventListener("mousedown",q))),n=k.settings,i=k.flipped}}}function ws(t,e,s){const i=t.slice();return i[8]=e[s],i}function Ss(t){let e,s,i,a;return{c(){e=We("marker"),s=We("path"),i=We("marker"),a=We("path"),this.h()},l(n){e=Ke(n,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var r=j(e);s=Ke(r,"path",{fill:!0,d:!0}),j(s).forEach(E),r.forEach(E),i=Ke(n,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var l=j(i);a=Ke(l,"path",{fill:!0,d:!0}),j(a).forEach(E),l.forEach(E),this.h()},h(){h(s,"fill",t[8]),h(s,"d","M 0 5 v 10 c 0 2.8 2.2 5 5 5 L 6 20 V 0 L 5 0 C 2.2 0 0 2.2 0 5 z"),h(e,"id","start-"+t[8][0]),h(e,"viewBox","0 0 5 20"),h(e,"refX","4"),h(e,"refY","10"),h(e,"markerUnits","strokeWidth"),h(e,"markerWidth","0.5"),h(e,"markerHeight","1"),h(e,"orient","auto"),h(a,"fill",t[8]),h(a,"d","M 9.5 9.5 l -8.7 -5 C 0.5 4.3 0 4.6 0 5 v 10 c 0 0.4 0.5 0.7 0.9 0.5 l 8.7 -5 C 9.9 10.3 9.9 9.7 9.5 9.5 z"),h(i,"id","end-"+t[8][0]),h(i,"viewBox","0 0 10 20"),h(i,"refX","0.2"),h(i,"refY","10"),h(i,"markerUnits","strokeWidth"),h(i,"orient","auto"),h(i,"fill","currentColor")},m(n,r){Y(n,e,r),C(e,s),Y(n,i,r),C(i,a)},p:Le,d(n){n&&E(e),n&&E(i)}}}function Ia(t){let e,s,i,a=t[2],n=[];for(let r=0;r<a.length;r+=1)n[r]=Ss(ws(t,a,r));return{c(){e=We("svg"),s=We("defs");for(let r=0;r<n.length;r+=1)n[r].c();i=We("g"),this.h()},l(r){e=Ke(r,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var l=j(e);s=Ke(l,"defs",{});var o=j(s);for(let u=0;u<n.length;u+=1)n[u].l(o);o.forEach(E),i=Ke(l,"g",{}),j(i).forEach(E),l.forEach(E),this.h()},h(){h(e,"xmlns","http://www.w3.org/2000/svg"),Me(e,"transform","rotate("+(t[1]?"180deg":"0deg")+")"),h(e,"viewBox","0 0 8 8"),h(e,"class","svelte-19gv2n4")},m(r,l){Y(r,e,l),C(e,s);for(let o=0;o<n.length;o+=1)n[o].m(s,null);C(e,i),t[5](i)},p(r,[l]){if(l&4){a=r[2];let o;for(o=0;o<a.length;o+=1){const u=ws(r,a,o);n[o]?n[o].p(u,l):(n[o]=Ss(u),n[o].c(),n[o].m(s,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=a.length}l&2&&Me(e,"transform","rotate("+(r[1]?"180deg":"0deg")+")")},i:Le,o:Le,d(r){r&&E(e),ft(n,r),t[5](null)}}}function Oa(t,e,s){let{flipped:i=!1}=e,{svg:a}=e,{knightLShape:n=!1}=e,{tools:r=[]}=e,l=!1;function o(d){!l||(Aa(a),Ta(a,d,n))}es(()=>{l=!0,o(r)});const u=["green","red","blue","orange"];function m(d){de[d?"unshift":"push"](()=>{a=d,s(0,a)})}return t.$$set=d=>{"flipped"in d&&s(1,i=d.flipped),"svg"in d&&s(0,a=d.svg),"knightLShape"in d&&s(3,n=d.knightLShape),"tools"in d&&s(4,r=d.tools)},t.$$.update=()=>{t.$$.dirty&16&&o(r)},[a,i,u,n,r,m]}class Fa extends qe{constructor(e){super(),Re(this,e,Oa,Ia,Ne,{flipped:1,svg:0,knightLShape:3,tools:4})}}function ys(t,{delay:e=0,duration:s=400,easing:i=ss,x:a=0,y:n=0,opacity:r=0}={}){const l=getComputedStyle(t),o=+l.opacity,u=l.transform==="none"?"":l.transform,m=o*(1-r);return{delay:e,duration:s,easing:i,css:(d,g)=>`
			transform: ${u} translate(${(1-d)*a}px, ${(1-d)*n}px);
			opacity: ${o-m*g}`}}function ct(t,{delay:e=0,duration:s=400,easing:i=ss}={}){const a=getComputedStyle(t),n=+a.opacity,r=parseFloat(a.height),l=parseFloat(a.paddingTop),o=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),m=parseFloat(a.marginBottom),d=parseFloat(a.borderTopWidth),g=parseFloat(a.borderBottomWidth);return{delay:e,duration:s,easing:i,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*n};height: ${y*r}px;padding-top: ${y*l}px;padding-bottom: ${y*o}px;margin-top: ${y*u}px;margin-bottom: ${y*m}px;border-top-width: ${y*d}px;border-bottom-width: ${y*g}px;`}}function qa(t){let e,s,i,a,n,r;return{c(){e=B("button"),s=B("img"),this.h()},l(l){e=U(l,"BUTTON",{});var o=j(e);s=U(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(E),this.h()},h(){bt(s.src,i=t[1])||h(s,"src",i),h(s,"alt",a="Promotion to "+t[0].toUpperCase()),h(s,"class","svelte-17pqsbb")},m(l,o){Y(l,e,o),C(e,s),n||(r=ce(e,"click",t[2]),n=!0)},p(l,[o]){o&1&&a!==(a="Promotion to "+l[0].toUpperCase())&&h(s,"alt",a)},i:Le,o:Le,d(l){l&&E(e),n=!1,r()}}}function Ra(t,e,s){let{piece:i}=e,{isWhite:a}=e,{showModal:n}=e;const r=Bt(),l=(a?"w":"b")+i.toUpperCase(),o=Xt(l),u=()=>{r("newPromotion",i),s(3,n=!1)};return t.$$set=m=>{"piece"in m&&s(0,i=m.piece),"isWhite"in m&&s(4,a=m.isWhite),"showModal"in m&&s(3,n=m.showModal)},[i,o,u,n,a]}class Na extends qe{constructor(e){super(),Re(this,e,Ra,qa,Ne,{piece:0,isWhite:4,showModal:3})}}function Cs(t,e,s){const i=t.slice();return i[6]=e[s],i}function As(t){let e,s,i,a,n,r=["q","r","b","n"],l=[];for(let u=0;u<4;u+=1)l[u]=Ps(Cs(t,r,u));const o=u=>ae(l[u],1,1,()=>{l[u]=null});return{c(){e=B("div"),s=B("div");for(let u=0;u<4;u+=1)l[u].c();this.h()},l(u){e=U(u,"DIV",{class:!0});var m=j(e);s=U(m,"DIV",{class:!0});var d=j(s);for(let g=0;g<4;g+=1)l[g].l(d);d.forEach(E),m.forEach(E),this.h()},h(){h(s,"class","modal-content svelte-it5mr1"),h(e,"class","modal svelte-it5mr1")},m(u,m){Y(u,e,m),C(e,s);for(let d=0;d<4;d+=1)l[d].m(s,null);n=!0},p(u,m){if(m&3){r=["q","r","b","n"];let d;for(d=0;d<4;d+=1){const g=Cs(u,r,d);l[d]?(l[d].p(g,m),J(l[d],1)):(l[d]=Ps(g),l[d].c(),J(l[d],1),l[d].m(s,null))}for(He(),d=4;d<4;d+=1)o(d);Ve()}},i(u){if(!n){for(let m=0;m<4;m+=1)J(l[m]);xe(()=>{a&&a.end(1),i=Zn(s,ys,{x:100,duration:300}),i.start()}),n=!0}},o(u){l=l.filter(Boolean);for(let m=0;m<4;m+=1)ae(l[m]);i&&i.invalidate(),a=Jn(s,ys,{x:-200,duration:100}),n=!1},d(u){u&&E(e),ft(l,u),u&&a&&a.end()}}}function Ps(t){let e,s,i,a;function n(o){t[3](o)}function r(o){t[4](o)}let l={piece:t[6]};return t[1]!==void 0&&(l.isWhite=t[1]),t[0]!==void 0&&(l.showModal=t[0]),e=new Na({props:l}),de.push(()=>ge(e,"isWhite",n)),de.push(()=>ge(e,"showModal",r)),e.$on("newPromotion",t[5]),{c(){ke(e.$$.fragment)},l(o){we(e.$$.fragment,o)},m(o,u){Se(e,o,u),a=!0},p(o,u){const m={};!s&&u&2&&(s=!0,m.isWhite=o[1],be(()=>s=!1)),!i&&u&1&&(i=!0,m.showModal=o[0],be(()=>i=!1)),e.$set(m)},i(o){a||(J(e.$$.fragment,o),a=!0)},o(o){ae(e.$$.fragment,o),a=!1},d(o){ye(e,o)}}}function Da(t){let e,s,i=t[0]&&As(t);return{c(){i&&i.c(),e=Ae()},l(a){i&&i.l(a),e=Ae()},m(a,n){i&&i.m(a,n),Y(a,e,n),s=!0},p(a,[n]){a[0]?i?(i.p(a,n),n&1&&J(i,1)):(i=As(a),i.c(),J(i,1),i.m(e.parentNode,e)):i&&(He(),ae(i,1,1,()=>{i=null}),Ve())},i(a){s||(J(i),s=!0)},o(a){ae(i),s=!1},d(a){i&&i.d(a),a&&E(e)}}}function Ba(t,e,s){let i=!1,a;function n(u){s(0,i=!0),u?s(1,a=!0):s(1,a=!1)}function r(u){a=u,s(1,a)}function l(u){i=u,s(0,i)}function o(u){Je.call(this,t,u)}return[i,a,n,r,l,o]}class Ua extends qe{constructor(e){super(),Re(this,e,Ba,Da,Ne,{openPromotionModal:2})}get openPromotionModal(){return this.$$.ctx[2]}}const za=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,Ha=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,Va=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,Wa=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function Ts(t){let e,s,i,a;return{c(){e=B("audio"),s=B("track"),i=B("source"),this.h()},l(n){e=U(n,"AUDIO",{preload:!0});var r=j(e);s=U(r,"TRACK",{kind:!0}),i=U(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){h(s,"kind","captions"),bt(i.src,a=za)||h(i,"src",a),h(e,"preload","auto")},m(n,r){Y(n,e,r),C(e,s),C(e,i),t[3](e)},p:Le,d(n){n&&E(e),t[3](null)}}}function Ls(t){let e,s,i,a;return{c(){e=B("audio"),s=B("track"),i=B("source"),this.h()},l(n){e=U(n,"AUDIO",{preload:!0});var r=j(e);s=U(r,"TRACK",{kind:!0}),i=U(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){h(s,"kind","captions"),bt(i.src,a=Ha)||h(i,"src",a),h(e,"preload","auto")},m(n,r){Y(n,e,r),C(e,s),C(e,i),t[4](e)},p:Le,d(n){n&&E(e),t[4](null)}}}function Is(t){let e,s,i,a;return{c(){e=B("audio"),s=B("track"),i=B("source"),this.h()},l(n){e=U(n,"AUDIO",{preload:!0});var r=j(e);s=U(r,"TRACK",{kind:!0}),i=U(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){h(s,"kind","captions"),bt(i.src,a=Va)||h(i,"src",a),h(e,"preload","auto")},m(n,r){Y(n,e,r),C(e,s),C(e,i),t[5](e)},p:Le,d(n){n&&E(e),t[5](null)}}}function Os(t){let e,s,i,a;return{c(){e=B("audio"),s=B("track"),i=B("source"),this.h()},l(n){e=U(n,"AUDIO",{preload:!0});var r=j(e);s=U(r,"TRACK",{kind:!0}),i=U(r,"SOURCE",{src:!0}),r.forEach(E),this.h()},h(){h(s,"kind","captions"),bt(i.src,a=Wa)||h(i,"src",a),h(e,"preload","auto")},m(n,r){Y(n,e,r),C(e,s),C(e,i),t[6](e)},p:Le,d(n){n&&E(e),t[6](null)}}}function Ka(t){let e,s,i,a,n=t[0].MOVE&&Ts(t),r=t[0].CAPTURE&&Ls(t),l=t[0].CASTLE&&Is(t),o=t[0].UNDO&&Os(t);return{c(){n&&n.c(),e=te(),r&&r.c(),s=te(),l&&l.c(),i=te(),o&&o.c(),a=Ae()},l(u){n&&n.l(u),e=se(u),r&&r.l(u),s=se(u),l&&l.l(u),i=se(u),o&&o.l(u),a=Ae()},m(u,m){n&&n.m(u,m),Y(u,e,m),r&&r.m(u,m),Y(u,s,m),l&&l.m(u,m),Y(u,i,m),o&&o.m(u,m),Y(u,a,m)},p(u,[m]){u[0].MOVE?n?n.p(u,m):(n=Ts(u),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),u[0].CAPTURE?r?r.p(u,m):(r=Ls(u),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null),u[0].CASTLE?l?l.p(u,m):(l=Is(u),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),u[0].UNDO?o?o.p(u,m):(o=Os(u),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:Le,o:Le,d(u){n&&n.d(u),u&&E(e),r&&r.d(u),u&&E(s),l&&l.d(u),u&&E(i),o&&o.d(u),u&&E(a)}}}function ja(t,e,s){let{settings:i}=e;const a={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},n=()=>{a.CASTLE&&(a.CASTLE.pause(),s(1,a.CASTLE.currentTime=0,a)),a.MOVE&&(a.MOVE.pause(),s(1,a.MOVE.currentTime=0,a)),a.CAPTURE&&(a.CAPTURE.pause(),s(1,a.CAPTURE.currentTime=0,a)),a.UNDO&&(a.UNDO.pause(),s(1,a.UNDO.currentTime=0,a))},r=g=>g===void 0||i[g];function l(g){switch(n(),g){case"MOVE":a.MOVE&&r("MOVE")&&a.MOVE.play();break;case"CAPTURE":a.CAPTURE&&r("CAPTURE")?a.CAPTURE.play():a.MOVE&&r("MOVE")&&a.MOVE.play();break;case"CASTLE":a.CASTLE&&r("CASTLE")?a.CASTLE.play():a.MOVE&&r("MOVE")&&a.MOVE.play();break;case"UNDO":a.UNDO&&r("UNDO")?(s(1,a.UNDO.volume=.3,a),a.UNDO.play()):a.MOVE&&r("MOVE")&&a.MOVE.play();break}}function o(g){de[g?"unshift":"push"](()=>{a.MOVE=g,s(1,a)})}function u(g){de[g?"unshift":"push"](()=>{a.CAPTURE=g,s(1,a)})}function m(g){de[g?"unshift":"push"](()=>{a.CASTLE=g,s(1,a)})}function d(g){de[g?"unshift":"push"](()=>{a.UNDO=g,s(1,a)})}return t.$$set=g=>{"settings"in g&&s(0,i=g.settings)},[i,a,l,o,u,m,d]}class Ga extends qe{constructor(e){super(),Re(this,e,ja,Ka,Ne,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Fs=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,qs=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function Qa(t,e){const{minWidth:s,maxWidth:i,curWidth:a}=e;let{mouseEvents:n}=e,r=a,l,o,u,m;function d(T){T.stopPropagation(),t.dispatchEvent(new CustomEvent("resizing",{detail:{size:Math.max(Math.max(s,Math.min(i,u+(T.pageX-l))),Math.max(s,Math.min(i,m+(T.pageY-o))))}}))}function g(T){T.stopPropagation(),t.dispatchEvent(new CustomEvent("endResizing",{detail:{size:Math.max(Math.max(s,Math.min(i,u+Math.floor((T.pageX-l)/8)*8)),Math.max(s,Math.min(i,m+Math.floor((T.pageY-o)/8)*8)))}})),window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",g)}function y(T){!n||(T.stopPropagation(),T.button===0&&(l=T.pageX,u=r,o=T.pageY,m=r,window.addEventListener("mousemove",d),window.addEventListener("mouseup",g)))}return t.addEventListener("mousedown",y),{update(T){r=T.curWidth,n!==T.mouseEvents&&(n=T.mouseEvents)},destroy(){t.removeEventListener("mousedown",y)}}}function Xa(t){let e,s,i,a,n,r,l;return{c(){e=B("div"),s=We("svg"),i=We("path"),this.h()},l(o){e=U(o,"DIV",{style:!0,class:!0});var u=j(e);s=Ke(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var m=j(s);i=Ke(m,"path",{d:!0}),j(i).forEach(E),m.forEach(E),u.forEach(E),this.h()},h(){h(i,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),h(s,"xmlns","http://www.w3.org/2000/svg"),h(s,"viewBox","0 0 16 16"),h(s,"fill","currentColor"),Me(e,"color",Xe.colors[t[0].state.board.boardTheme].black),h(e,"class",a=us(t[2]?"cursor-nwse-resize":"")+" svelte-1ssh93t")},m(o,u){Y(o,e,u),C(e,s),C(s,i),r||(l=[ce(e,"pointerdown",mn(t[3])),xt(n=Qa.call(null,e,{mouseEvents:t[2],minWidth:t[0].state.board.resizible.min,maxWidth:t[0].state.board.resizible.max,curWidth:t[0].state.board.size})),ce(e,"resizing",t[4]),ce(e,"endResizing",t[5])],r=!0)},p(o,[u]){u&1&&Me(e,"color",Xe.colors[o[0].state.board.boardTheme].black),u&4&&a!==(a=us(o[2]?"cursor-nwse-resize":"")+" svelte-1ssh93t")&&h(e,"class",a),n&&$t(n.update)&&u&5&&n.update.call(null,{mouseEvents:o[2],minWidth:o[0].state.board.resizible.min,maxWidth:o[0].state.board.resizible.max,curWidth:o[0].state.board.size})},i:Le,o:Le,d(o){o&&E(e),r=!1,$e(l)}}}function Ya(t,e,s){let{chessboard:i}=e,{setSize:a}=e,{mouseEvents:n=!0}=e;function r(u){Je.call(this,t,u)}const l=u=>a(u.detail.size),o=u=>a(u.detail.size);return t.$$set=u=>{"chessboard"in u&&s(0,i=u.chessboard),"setSize"in u&&s(1,a=u.setSize),"mouseEvents"in u&&s(2,n=u.mouseEvents)},[i,a,n,r,l,o]}class Za extends qe{constructor(e){super(),Re(this,e,Ya,Xa,Ne,{chessboard:0,setSize:1,mouseEvents:2})}}function Rs(t,e,s){const i=t.slice();return i[73]=e[s],i}function Ns(t,e,s){const i=t.slice();return i[76]=e[s],i}function Ds(t){let e=[],s=new Map,i,a,n=t[5].state.pieces;const r=l=>l[76];for(let l=0;l<n.length;l+=1){let o=Ns(t,n,l),u=r(o);s.set(u,e[l]=Bs(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Ae()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Ae()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Y(l,i,o),a=!0},p(l,o){o[0]&29742&&(n=l[5].state.pieces,He(),e=pn(e,o,r,1,l,n,s,i.parentNode,vn,Bs,i,Ns),Ve())},i(l){if(!a){for(let o=0;o<n.length;o+=1)J(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)ae(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&E(i)}}}function Bs(t,e){let s,i,a;function n(){return e[53](e[76])}function r(){return e[54](e[76])}function l(...u){return e[55](e[76],...u)}function o(){return e[57](e[76])}return i=new wn({props:{square:e[76].square,name:e[76].name,mouseEvents:e[5].state.board.mouseEvents,legalState:e[5].state.legal,draggableState:e[5].state.draggable,selectableState:e[5].state.selectable,movableState:e[5].state.movable,getGridCoordsFromSquare:e[5].getGridCoordsFromSquare,flipped:e[5].flipped}}),i.$on("move",e[12]),i.$on("clicked",n),i.$on("startMoving",r),i.$on("moving",l),i.$on("endDragging",e[56]),i.$on("select",o),i.$on("deselect",e[58]),{key:t,first:null,c(){s=Ae(),ke(i.$$.fragment),this.h()},l(u){s=Ae(),we(i.$$.fragment,u),this.h()},h(){this.first=s},m(u,m){Y(u,s,m),Se(i,u,m),a=!0},p(u,m){e=u;const d={};m[0]&32&&(d.square=e[76].square),m[0]&32&&(d.name=e[76].name),m[0]&32&&(d.mouseEvents=e[5].state.board.mouseEvents),m[0]&32&&(d.legalState=e[5].state.legal),m[0]&32&&(d.draggableState=e[5].state.draggable),m[0]&32&&(d.selectableState=e[5].state.selectable),m[0]&32&&(d.movableState=e[5].state.movable),m[0]&32&&(d.getGridCoordsFromSquare=e[5].getGridCoordsFromSquare),m[0]&32&&(d.flipped=e[5].flipped),i.$set(d)},i(u){a||(J(i.$$.fragment,u),a=!0)},o(u){ae(i.$$.fragment,u),a=!1},d(u){u&&E(s),ye(i,u)}}}function Us(t){let e,s;return e=new wn({props:{isGhost:!0,square:t[5].ghostPiece.square,name:t[5].ghostPiece.name,getGridCoordsFromSquare:t[5].getGridCoordsFromSquare,flipped:t[5].flipped}}),{c(){ke(e.$$.fragment)},l(i){we(e.$$.fragment,i)},m(i,a){Se(e,i,a),s=!0},p(i,a){const n={};a[0]&32&&(n.square=i[5].ghostPiece.square),a[0]&32&&(n.name=i[5].ghostPiece.name),a[0]&32&&(n.getGridCoordsFromSquare=i[5].getGridCoordsFromSquare),a[0]&32&&(n.flipped=i[5].flipped),e.$set(n)},i(i){s||(J(e.$$.fragment,i),s=!0)},o(i){ae(e.$$.fragment,i),s=!1},d(i){ye(e,i)}}}function zs(t){let e=[],s=new Map,i,a,n=[...t[5].state.markedSquares];const r=l=>l[73];for(let l=0;l<n.length;l+=1){let o=Rs(t,n,l),u=r(o);s.set(u,e[l]=Hs(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Ae()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Ae()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);Y(l,i,o),a=!0},p(l,o){o[0]&34&&(n=[...l[5].state.markedSquares],He(),e=pn(e,o,r,1,l,n,s,i.parentNode,vn,Hs,i,Rs),Ve())},i(l){if(!a){for(let o=0;o<n.length;o+=1)J(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)ae(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&E(i)}}}function Hs(t,e){let s,i,a;return i=new Sa({props:{theme:e[5].state.board.boardTheme,square:e[73].square,color:e[73].color,getGridCoordsFromSquare:e[5].getGridCoordsFromSquare,flipped:e[5].flipped,mouseEvents:e[5].state.board.mouseEvents}}),i.$on("dragenter",e[59]),{key:t,first:null,c(){s=Ae(),ke(i.$$.fragment),this.h()},l(n){s=Ae(),we(i.$$.fragment,n),this.h()},h(){this.first=s},m(n,r){Y(n,s,r),Se(i,n,r),a=!0},p(n,r){e=n;const l={};r[0]&32&&(l.theme=e[5].state.board.boardTheme),r[0]&32&&(l.square=e[73].square),r[0]&32&&(l.color=e[73].color),r[0]&32&&(l.getGridCoordsFromSquare=e[5].getGridCoordsFromSquare),r[0]&32&&(l.flipped=e[5].flipped),r[0]&32&&(l.mouseEvents=e[5].state.board.mouseEvents),i.$set(l)},i(n){a||(J(i.$$.fragment,n),a=!0)},o(n){ae(i.$$.fragment,n),a=!1},d(n){n&&E(s),ye(i,n)}}}function Vs(t){let e,s;return e=new Oi({props:{theme:t[5].state.board.boardTheme,flipped:t[5].flipped}}),{c(){ke(e.$$.fragment)},l(i){we(e.$$.fragment,i)},m(i,a){Se(e,i,a),s=!0},p(i,a){const n={};a[0]&32&&(n.theme=i[5].state.board.boardTheme),a[0]&32&&(n.flipped=i[5].flipped),e.$set(n)},i(i){s||(J(e.$$.fragment,i),s=!0)},o(i){ae(e.$$.fragment,i),s=!1},d(i){ye(e,i)}}}function Ws(t){let e,s;return e=new Za({props:{chessboard:t[5],setSize:t[4],mouseEvents:t[5].state.board.mouseEvents}}),{c(){ke(e.$$.fragment)},l(i){we(e.$$.fragment,i)},m(i,a){Se(e,i,a),s=!0},p(i,a){const n={};a[0]&32&&(n.chessboard=i[5]),a[0]&32&&(n.mouseEvents=i[5].state.board.mouseEvents),e.$set(n)},i(i){s||(J(e.$$.fragment,i),s=!0)},o(i){ae(e.$$.fragment,i),s=!1},d(i){ye(e,i)}}}function Ks(t){let e,s,i;function a(r){t[60](r)}let n={flipped:t[5].flipped,tools:t[5].state.drawTools.tools,knightLShape:t[5].state.drawTools.settings.knightLShape};return t[7]!==void 0&&(n.svg=t[7]),e=new Fa({props:n}),de.push(()=>ge(e,"svg",a)),{c(){ke(e.$$.fragment)},l(r){we(e.$$.fragment,r)},m(r,l){Se(e,r,l),i=!0},p(r,l){const o={};l[0]&32&&(o.flipped=r[5].flipped),l[0]&32&&(o.tools=r[5].state.drawTools.tools),l[0]&32&&(o.knightLShape=r[5].state.drawTools.settings.knightLShape),!s&&l[0]&128&&(s=!0,o.svg=r[7],be(()=>s=!1)),e.$set(o)},i(r){i||(J(e.$$.fragment,r),i=!0)},o(r){ae(e.$$.fragment,r),i=!1},d(r){ye(e,r)}}}function js(t){let e,s,i={};return e=new Ua({props:i}),t[61](e),e.$on("newPromotion",t[15]),{c(){ke(e.$$.fragment)},l(a){we(e.$$.fragment,a)},m(a,n){Se(e,a,n),s=!0},p(a,n){const r={};e.$set(r)},i(a){s||(J(e.$$.fragment,a),s=!0)},o(a){ae(e.$$.fragment,a),s=!1},d(a){t[61](null),ye(e,a)}}}function Gs(t){let e,s,i={settings:t[5].state.sounds.settings};return e=new Ga({props:i}),t[66](e),{c(){ke(e.$$.fragment)},l(a){we(e.$$.fragment,a)},m(a,n){Se(e,a,n),s=!0},p(a,n){const r={};n[0]&32&&(r.settings=a[5].state.sounds.settings),e.$set(r)},i(a){s||(J(e.$$.fragment,a),s=!0)},o(a){ae(e.$$.fragment,a),s=!1},d(a){t[66](null),ye(e,a)}}}function Ja(t){let e,s,i,a,n,r,l,o,u,m,d,g,y,T,q,k,w,f=t[5].state.board.startFen&&Ds(t),p=t[5].ghostPiece&&Us(t),S=t[5].highlightEnabled&&zs(t),_=t[5].state.board.notation&&Vs(t),P=t[5].state.board.resizible.enabled&&Ws(t),K=t[5].state.drawTools.enabled&&Ks(t),G=t[5].legalEnabled&&js(t),W=t[5].soundsEnabled&&Gs(t);return{c(){e=B("div"),s=B("div"),f&&f.c(),i=te(),p&&p.c(),a=te(),S&&S.c(),n=te(),_&&_.c(),r=te(),P&&P.c(),l=te(),K&&K.c(),o=te(),G&&G.c(),y=te(),W&&W.c(),T=Ae(),this.h()},l(O){e=U(O,"DIV",{class:!0,style:!0});var Q=j(e);s=U(Q,"DIV",{style:!0,class:!0});var le=j(s);f&&f.l(le),le.forEach(E),i=se(Q),p&&p.l(Q),a=se(Q),S&&S.l(Q),n=se(Q),_&&_.l(Q),r=se(Q),P&&P.l(Q),l=se(Q),K&&K.l(Q),o=se(Q),G&&G.l(Q),Q.forEach(E),y=se(O),W&&W.l(O),T=Ae(),this.h()},h(){Me(s,"width","100%"),Me(s,"height","100%"),h(s,"class","noselect"),h(e,"class",u="noselect board "+(t[5].state.board.style.shadow?"shadow":"")+" text-sm "+t[0]+" svelte-1bsiysh"),h(e,"style",m="--boardTheme: url("+(t[5].state.board.boardTheme==="standard"?Fs:qs)+"); "+(t[5].state.board.style.borderRadius!=="0rem"&&t[5].state.board.style.borderRadius!=="0px"?`border-radius: ${t[5].state.board.style.borderRadius};`:"")),xe(()=>t[65].call(e))},m(O,Q){Y(O,e,Q),C(e,s),f&&f.m(s,null),C(e,i),p&&p.m(e,null),C(e,a),S&&S.m(e,null),C(e,n),_&&_.m(e,null),C(e,r),P&&P.m(e,null),C(e,l),K&&K.m(e,null),C(e,o),G&&G.m(e,null),t[64](e),g=gn(e,t[65].bind(e)),Y(O,y,Q),W&&W.m(O,Q),Y(O,T,Q),q=!0,k||(w=[ce(e,"pointerdown",t[11]),ce(e,"contextmenu",fs(t[51])),ce(e,"drag",fs(t[52])),xt(d=La.call(null,e,{svg:t[7],flipped:t[5].flipped,enabled:t[5].state.drawTools.enabled&&t[5].state.board.mouseEvents,settings:t[5].state.drawTools.settings})),ce(e,"drawCircle",t[62]),ce(e,"drawArrow",t[63])],k=!0)},p(O,Q){O[5].state.board.startFen?f?(f.p(O,Q),Q[0]&32&&J(f,1)):(f=Ds(O),f.c(),J(f,1),f.m(s,null)):f&&(He(),ae(f,1,1,()=>{f=null}),Ve()),O[5].ghostPiece?p?(p.p(O,Q),Q[0]&32&&J(p,1)):(p=Us(O),p.c(),J(p,1),p.m(e,a)):p&&(He(),ae(p,1,1,()=>{p=null}),Ve()),O[5].highlightEnabled?S?(S.p(O,Q),Q[0]&32&&J(S,1)):(S=zs(O),S.c(),J(S,1),S.m(e,n)):S&&(He(),ae(S,1,1,()=>{S=null}),Ve()),O[5].state.board.notation?_?(_.p(O,Q),Q[0]&32&&J(_,1)):(_=Vs(O),_.c(),J(_,1),_.m(e,r)):_&&(He(),ae(_,1,1,()=>{_=null}),Ve()),O[5].state.board.resizible.enabled?P?(P.p(O,Q),Q[0]&32&&J(P,1)):(P=Ws(O),P.c(),J(P,1),P.m(e,l)):P&&(He(),ae(P,1,1,()=>{P=null}),Ve()),O[5].state.drawTools.enabled?K?(K.p(O,Q),Q[0]&32&&J(K,1)):(K=Ks(O),K.c(),J(K,1),K.m(e,o)):K&&(He(),ae(K,1,1,()=>{K=null}),Ve()),O[5].legalEnabled?G?(G.p(O,Q),Q[0]&32&&J(G,1)):(G=js(O),G.c(),J(G,1),G.m(e,null)):G&&(He(),ae(G,1,1,()=>{G=null}),Ve()),(!q||Q[0]&33&&u!==(u="noselect board "+(O[5].state.board.style.shadow?"shadow":"")+" text-sm "+O[0]+" svelte-1bsiysh"))&&h(e,"class",u),(!q||Q[0]&32&&m!==(m="--boardTheme: url("+(O[5].state.board.boardTheme==="standard"?Fs:qs)+"); "+(O[5].state.board.style.borderRadius!=="0rem"&&O[5].state.board.style.borderRadius!=="0px"?`border-radius: ${O[5].state.board.style.borderRadius};`:"")))&&h(e,"style",m),d&&$t(d.update)&&Q[0]&160&&d.update.call(null,{svg:O[7],flipped:O[5].flipped,enabled:O[5].state.drawTools.enabled&&O[5].state.board.mouseEvents,settings:O[5].state.drawTools.settings}),O[5].soundsEnabled?W?(W.p(O,Q),Q[0]&32&&J(W,1)):(W=Gs(O),W.c(),J(W,1),W.m(T.parentNode,T)):W&&(He(),ae(W,1,1,()=>{W=null}),Ve())},i(O){q||(J(f),J(p),J(S),J(_),J(P),J(K),J(G),J(W),q=!0)},o(O){ae(f),ae(p),ae(S),ae(_),ae(P),ae(K),ae(G),ae(W),q=!1},d(O){O&&E(e),f&&f.d(),p&&p.d(),S&&S.d(),_&&_.d(),P&&P.d(),K&&K.d(),G&&G.d(),t[64](null),g(),O&&E(y),W&&W.d(O),O&&E(T),k=!1,$e(w)}}}function xa(t,e,s){let{config:i}=e,{className:a=""}=e;const n=new wi(i),r=Bt();let l,o,u,m,d="";xn(()=>{document.documentElement.hasAttribute("style")&&n.state.board.resizible.enabled&&document.documentElement.removeAttribute("style")});const g=M=>{n.clearAllSquares(M),M===ee.LEGAL&&n.clearAllSquares(ee.LEGALHOVER),M===ee.PREMOVE&&n.clearAllSquares(ee.PREMOVEHOVER),s(5,n)},y=(M,$)=>{!T(It($))||(n.highlightSquare(M,$),s(5,n))},T=M=>n.highlightEnabled&&(M===void 0||n.highlightSettings[typeof M=="string"?M:It(M)]),q=M=>{if(!n.selectableEnabled&&n.draggableEnabled&&z(M),!n.selectableEnabled)return;k(!0);const $=n.getPieceFromSquare(M);$!==void 0&&(s(5,n.selectedPiece=$,n),z())},k=(M=!0)=>{g(ee.SELECT),g(ee.LEGAL),g(ee.PREMOVE),s(5,n.selectedPiece=void 0,n),M&&(g(ee.NEXTMOVE),s(5,n.currentPreMove="",n))},w=M=>{g(ee.CHECK),M&&n.legalEnabled&&y(M,ee.CHECK),s(5,n)},f=()=>{g(ee.CHECK)},p=M=>{n.flipBoard(M),s(5,n)},S=(M,$)=>{M.forEach(ue=>n.highlightSquare(ue,$)),s(5,n)},_=(M,$=!0,ue=ee.MOVE)=>{M.length<4||!T(It(ue))||($&&g(ue),S([M.substring(0,2),M.substring(2,4)],ue))},P=(M,$,ue=ee.MOVE)=>{const Ce=[];$&&g(ue),M.forEach(Fe=>{Fe.length<4||(Ce.push(Fe.substring(0,2)),Ce.push(Fe.substring(2,4)))}),S(Ce,ue)},K=M=>{y(M.substring(2,4),ee.LEGAL)},G=(M,$,ue=ee.LEGAL)=>{g(ue),T(It(ue))&&(M.forEach(Ce=>{Ce.length<4||($===void 0||Ce.substring(0,2)===$)&&n.highlightSquare(Ce.substring(2,4),ue)}),s(5,n))},W=(M,$=!0)=>{n.makeMove(M),$&&_(M),s(5,n)},O=M=>{n.removePiece(M),s(5,n)},Q=M=>n.whiteToMove&&M[0]==="w"||!n.whiteToMove&&M[0]==="b",le=(M=!1)=>{!n.legalEnabled||(n.state.callbacks.getWhiteToMove&&s(5,n.whiteToMove=n.state.callbacks.getWhiteToMove(),n),n.state.callbacks.getPreMoves&&n.preMovesEnabled?s(5,n.preMoves=n.state.callbacks.getPreMoves(),n):s(5,n.preMoves=[],n),n.state.callbacks.getLegalMoves&&n.state.legal.enabled?s(5,n.legalMoves=n.state.callbacks.getLegalMoves(),n):s(5,n.legalMoves=[],n),M&&z(),n.state.callbacks.getInCheck&&n.state.callbacks.getInCheck()?n.whiteToMove?w(n.getWhiteKingSquare()):w(n.getBlackKingSquare()):f(),n.state.callbacks.getLastMove?(s(5,n.lastMove=n.state.callbacks.getLastMove(),n),_(n.lastMove)):g(ee.MOVE))},ve=M=>{n.soundsEnabled&&u&&u.playMoveSound(M)},fe=M=>{n.setGhostPiece(M),s(5,n)},c=()=>{n.removeGhostPiece(),s(5,n)},v=M=>{if(M.substring(0,2)===M.substring(2,4))return;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(M),k();const $=n.getRookMoveIfIsCastling(M),ue=n.getCapturedPawnSquareIfIsEnPassant(M);if($&&n.legalEnabled&&n.state.legal.settings.allowCastling?(W($,!1),ve("CASTLE")):ue&&n.legalEnabled&&n.state.legal.settings.allowEnPassant?(O(ue),ve("CAPTURE")):n.isCapture(M)?ve("CAPTURE"):ve("MOVE"),c(),W(M),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(M),le(),n.legalEnabled&&n.preMovesEnabled&&n.currentPreMove!==""){if(n.legalMoves.includes(n.state.legal.preMoves.curMove)||n.legalMoves.includes(`${n.state.legal.preMoves.curMove}q`)){const Ce=n.currentPreMove;s(5,n.currentPreMove="",n),$n().then(()=>{v(Ce)})}g(ee.NEXTMOVE)}},b=M=>{!n.legalEnabled||!n.preMovesEnabled||!n.movableEnabled||(g(ee.PREMOVE),_(M,!0,ee.NEXTMOVE),s(5,n.currentPreMove=M,n),r("nextMove",{move:M}))},A=M=>{m.openPromotionModal(!0),d=M,n.makeMove(M),g(ee.LEGAL),g(ee.SELECT),_(M)},F=(M,$)=>{n.clearSquare(M,$),s(5,n)},I=()=>{n.clearAllPieces(),s(5,n)},V=(M,$)=>{n.setPiece(M,$),s(5,n)},N=(M,$)=>{var Ce;const ue=(Ce=n.getPieceFromSquare(M))==null?void 0:Ce.name;!ue||($!==void 0?n.setPiece(M,`${$===_e.WHITE?"w":"b"}${ue[1]}`):n.setPiece(M,`${ue[0]==="w"?"b":"w"}${ue[1]}`),s(5,n))},x=(M,$)=>{const ue=Math.floor(M/n.state.board.size*8),Ce=Math.floor($/n.state.board.size*8),Fe=n.flipped?Math.abs(ue-7):ue,De=n.flipped?Ce:Math.abs(Ce-7);return`${Object.keys(n.letters)[Fe]}${(De+1).toString()}`},oe=M=>{if(!n.state.board.mouseEvents)return;if(M.button===2){k();return}if(!n.movableEnabled)return;const $=l.getBoundingClientRect(),ue=M.clientX-$.left,Ce=M.clientY-$.top,Fe=x(ue,Ce),De=n.getPieceFromSquare(Fe);if(r("squareClick",{square:Fe,piece:De?De.name:void 0}),!n.selectableEnabled&&!n.draggableEnabled){k();return}if(n.selectedPiece&&n.selectedPiece.square!==Fe&&!n.legalEnabled){v(n.selectedPiece.square+Fe),k();return}if(n.selectedPiece&&n.selectedPiece.square!==Fe&&!Q(n.selectedPiece.name)){n.preMovesEnabled&&n.preMoves.includes(n.selectedPiece.square+Fe)&&De!==void 0&&De.name[0]!==n.selectedPiece.name[0]&&b(n.selectedPiece.square+Fe),k(!1);return}n.selectedPiece&&n.selectedPiece.square!==Fe&&(De===void 0||De.name[0]!==n.selectedPiece.name[0])&&Q(n.selectedPiece.name)&&(n.isPromotion(n.selectedPiece.square+Fe)&&n.legalMoves.includes(`${n.selectedPiece.square+Fe}q`)?A(n.selectedPiece.square+Fe):n.legalMoves.includes(n.selectedPiece.square+Fe)&&v(n.selectedPiece.square+Fe),k())},L=M=>{const $=M.detail;n.legalEnabled?n.isPromotion($)&&n.legalMoves.includes(`${$}q`)?A($):n.legalMoves.includes($)?v($):n.preMovesEnabled&&n.preMoves.includes($)?b($):k():v($),g(ee.LEGAL),g(ee.PREMOVE),s(5,n)},z=M=>{var $;if(n.selectableEnabled||n.draggableEnabled){const ue=n.getPieceFromSquare(M!=null?M:($=n.selectedPiece)==null?void 0:$.square);if(!ue||(n.selectableEnabled&&y(ue.square,ee.SELECT),!n.legalEnabled))return;g(ee.LEGAL),g(ee.PREMOVE),Q(ue.name)&&G(n.legalMoves,ue.square),Q(ue.name)||G(n.preMoves,ue.square,ee.PREMOVE)}},ne=(M,$=!0,ue="MOVE")=>{if(n.updatePiecesWithFen(M),$&&k(),g(),c(),le(!1),s(5,n.currentPreMove="",n),n.state.callbacks.getLastMove){const Ce=n.state.callbacks.getLastMove();s(5,n.lastMove=Ce,n),ue!==!1&&(ue!=="MOVE"?ve(ue):n.isCastling(Ce)?ve("CASTLE"):ve(ue)),_(Ce)}else ue!==!1&&ve(ue);z(),s(5,n)},X=()=>n.getShortFEN(),R=M=>{!M||n.state.board.size===M||(s(5,n.state.board.size=M,n),n.state.board.resizible.enabled&&document.documentElement.style.setProperty("--boardSize",`${n.state.board.size}px`))},Z=M=>{var $;return($=n.getPieceFromSquare(M))==null?void 0:$.name},re=M=>{s(5,n.state.drawTools.tools=M,n)},Ee=M=>{s(5,n.state.drawTools.tools=n.state.drawTools.tools.filter($=>M?(!M.type||$.type!==M.type)&&(!M.from||$.type==="arrow"&&$.from!==M.from||$.type==="circle"&&$.square!==M.from)&&(!M.to||$.type==="arrow"&&$.to!==M.to)&&(M.fixed===void 0||$.fixed!==M.fixed):!1),n)},ie=M=>{M===!1?s(5,n.state.movable.enabled=!1,n):(s(5,n.state.movable.enabled=!0,n),s(5,n.state.movable.color=M===!0?_e.BOTH:M,n))},Pe=M=>{M.length<4||(s(5,n.lastMove=M,n),_(M))},Ie=M=>{s(5,n.legalMoves=M,n)},Ue=M=>{s(5,n.preMoves=M,n)},Be=()=>n.state,Oe=M=>{s(5,n.state=M,n),g(),le(!1),_(n.lastMove),_(n.currentPreMove,!0,ee.NEXTMOVE),z()},ze=M=>{M!==void 0&&(n.setConfigSettings(M),s(5,n),Oe(n.state))},nt=M=>M.getConfig(),Ge=(M,$)=>{const ue=l.getBoundingClientRect();n.legalEnabled&&(Q($.name)&&n.legalHover(x(M.detail.x-ue.x,M.detail.y-ue.y)),!Q($.name)&&n.preMovesEnabled&&n.preMoveHover(x(M.detail.x-ue.x,M.detail.y-ue.y))),s(5,n)},et=M=>{n.ghostPieceEnabled&&fe(M),g(ee.SELECT)},Qe=M=>{const $=n.getPieceFromSquare(d.substring(2,4));if(!$)return;const ue=$.name[0]+M.detail.toUpperCase(),Ce=d+M.detail;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(Ce),n.setPiece($.square,ue),s(5,n),ve("MOVE"),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(Ce),le()};es(()=>{le(!0),n.state.callbacks.getLastMove&&_(n.state.callbacks.getLastMove()),n.state.board.resizible&&R(n.state.board.size-n.state.board.size%8)});function Et(M){Je.call(this,t,M)}function Mt(M){Je.call(this,t,M)}const tt=M=>{r("piececlick",{piece:M}),q(M.square)},kt=M=>{r("startDragging",{piece:M}),et(M)},mt=(M,$)=>Ge($,M);function wt(M){Je.call(this,t,M)}const Ye=M=>{y(M.square,ee.SELECT)},St=()=>{k()},Ze=M=>{y(M.detail.square,ee.LEGALHOVER)};function it(M){o=M,s(7,o)}function yt(M){de[M?"unshift":"push"](()=>{m=M,s(9,m)})}const Tt=M=>r("drawCircle",{square:M.detail.square,color:M.detail.color}),Ut=M=>r("drawArrow",{move:M.detail.move,color:M.detail.color});function zt(M){de[M?"unshift":"push"](()=>{l=M,s(6,l)})}function Ht(){n.state.board.size=this.clientWidth,s(5,n)}function Vt(M){de[M?"unshift":"push"](()=>{u=M,s(8,u)})}return t.$$set=M=>{"config"in M&&s(16,i=M.config),"className"in M&&s(0,a=M.className)},t.$$.update=()=>{t.$$.dirty[0]&32&&R(n.state.board.size-n.state.board.size%8)},[a,y,q,k,R,n,l,o,u,m,r,oe,L,Ge,et,Qe,i,g,w,f,p,S,_,P,K,G,W,O,le,ve,v,b,A,F,I,V,N,x,ne,X,Z,re,Ee,ie,Pe,Ie,Ue,Be,Oe,ze,nt,Et,Mt,tt,kt,mt,wt,Ye,St,Ze,it,yt,Tt,Ut,zt,Ht,Vt]}class $a extends qe{constructor(e){super(),Re(this,e,xa,Ja,Ne,{config:16,className:0,clearAllSquares:17,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:18,removeCheckSquare:19,flipBoard:20,highlightManySquares:21,highlightMove:22,highlightMoves:23,highlightLegalMove:24,highlightLegalMoves:25,movePiece:26,removePiece:27,updateLegalState:28,playMoveSound:29,makeMove:30,makeNextMove:31,makeMovePromotion:32,removeSquareHighlight:33,removeAllPiece:34,createPiece:35,changeColorOfPiece:36,getSquareFromCoords:37,setFEN:38,getShortFEN:39,setSize:4,getPieceFromSquare:40,setTools:41,removeTools:42,setMovableColor:43,setLastMove:44,setLegalMoves:45,setPreMoves:46,getState:47,setState:48,setConfigSettings:49,getConfigFromState:50},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[17]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[18]}get removeCheckSquare(){return this.$$.ctx[19]}get flipBoard(){return this.$$.ctx[20]}get highlightManySquares(){return this.$$.ctx[21]}get highlightMove(){return this.$$.ctx[22]}get highlightMoves(){return this.$$.ctx[23]}get highlightLegalMove(){return this.$$.ctx[24]}get highlightLegalMoves(){return this.$$.ctx[25]}get movePiece(){return this.$$.ctx[26]}get removePiece(){return this.$$.ctx[27]}get updateLegalState(){return this.$$.ctx[28]}get playMoveSound(){return this.$$.ctx[29]}get makeMove(){return this.$$.ctx[30]}get makeNextMove(){return this.$$.ctx[31]}get makeMovePromotion(){return this.$$.ctx[32]}get removeSquareHighlight(){return this.$$.ctx[33]}get removeAllPiece(){return this.$$.ctx[34]}get createPiece(){return this.$$.ctx[35]}get changeColorOfPiece(){return this.$$.ctx[36]}get getSquareFromCoords(){return this.$$.ctx[37]}get setFEN(){return this.$$.ctx[38]}get getShortFEN(){return this.$$.ctx[39]}get setSize(){return this.$$.ctx[4]}get getPieceFromSquare(){return this.$$.ctx[40]}get setTools(){return this.$$.ctx[41]}get removeTools(){return this.$$.ctx[42]}get setMovableColor(){return this.$$.ctx[43]}get setLastMove(){return this.$$.ctx[44]}get setLegalMoves(){return this.$$.ctx[45]}get setPreMoves(){return this.$$.ctx[46]}get getState(){return this.$$.ctx[47]}get setState(){return this.$$.ctx[48]}get setConfigSettings(){return this.$$.ctx[49]}get getConfigFromState(){return this.$$.ctx[50]}}const Qs=["standard","darkBlue"],Xs=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function Ys(t){let e,s,i;return{c(){e=B("input"),this.h()},l(a){e=U(a,"INPUT",{type:!0,class:!0}),this.h()},h(){h(e,"type","checkbox"),h(e,"class","mr-1")},m(a,n){Y(a,e,n),e.checked=t[0],s||(i=[ce(e,"change",t[8]),ce(e,"click",mn(t[7])),ce(e,"change",t[9])],s=!0)},p(a,n){n&1&&(e.checked=a[0])},d(a){a&&E(e),s=!1,$e(i)}}}function Zs(t){let e,s,i;return{c(){e=We("svg"),s=We("path"),this.h()},l(a){e=Ke(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=j(e);s=Ke(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),j(s).forEach(E),n.forEach(E),this.h()},h(){h(s,"fill-rule","evenodd"),h(s,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),h(s,"clip-rule","evenodd"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"viewBox","0 0 20 20"),h(e,"fill","currentColor"),h(e,"class",i="w-5 h-5 transition "+(t[1]?"rotate-180":"rotate-0"))},m(a,n){Y(a,e,n),C(e,s)},p(a,n){n&2&&i!==(i="w-5 h-5 transition "+(a[1]?"rotate-180":"rotate-0"))&&h(e,"class",i)},d(a){a&&E(e)}}}function Js(t){let e,s,i;const a=t[6].default,n=fn(a,t,t[5],null);return{c(){e=B("div"),n&&n.c(),this.h()},l(r){e=U(r,"DIV",{class:!0});var l=j(e);n&&n.l(l),l.forEach(E),this.h()},h(){h(e,"class","py-2 px-4")},m(r,l){Y(r,e,l),n&&n.m(e,null),i=!0},p(r,l){n&&n.p&&(!i||l&32)&&dn(n,a,r,r[5],i?hn(a,r[5],l,null):cn(r[5]),null)},i(r){i||(J(n,r),r&&xe(()=>{s||(s=dt(e,ct,{},!0)),s.run(1)}),i=!0)},o(r){ae(n,r),r&&(s||(s=dt(e,ct,{},!1)),s.run(0)),i=!1},d(r){r&&E(e),n&&n.d(r),r&&s&&s.end()}}}function er(t){let e,s,i,a,n,r,l,o,u,m,d,g,y,T,q=t[0]!==void 0&&Ys(t),k=t[3]&&Zs(t),w=t[1]&&Js(t);return{c(){e=B("div"),s=B("button"),i=B("div"),q&&q.c(),a=te(),n=B("span"),r=me(t[2]),o=te(),k&&k.c(),d=te(),w&&w.c(),this.h()},l(f){e=U(f,"DIV",{class:!0});var p=j(e);s=U(p,"BUTTON",{class:!0});var S=j(s);i=U(S,"DIV",{class:!0});var _=j(i);q&&q.l(_),a=se(_),n=U(_,"SPAN",{class:!0});var P=j(n);r=pe(P,t[2]),P.forEach(E),_.forEach(E),o=se(S),k&&k.l(S),S.forEach(E),d=se(p),w&&w.l(p),p.forEach(E),this.h()},h(){h(n,"class",l=t[0]===void 0?"ml-[21px]":""),h(i,"class","flex gap-1"),h(s,"class",u="flex justify-between px-4 py-2 "+(t[3]?"transition hover:bg-slate-800/40":"")+" rounded"),s.disabled=m=!t[3],h(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(f,p){Y(f,e,p),C(e,s),C(s,i),q&&q.m(i,null),C(i,a),C(i,n),C(n,r),C(s,o),k&&k.m(s,null),C(e,d),w&&w.m(e,null),g=!0,y||(T=ce(s,"click",t[10]),y=!0)},p(f,[p]){f[0]!==void 0?q?q.p(f,p):(q=Ys(f),q.c(),q.m(i,a)):q&&(q.d(1),q=null),(!g||p&4)&&Dt(r,f[2]),(!g||p&1&&l!==(l=f[0]===void 0?"ml-[21px]":""))&&h(n,"class",l),f[3]?k?k.p(f,p):(k=Zs(f),k.c(),k.m(s,null)):k&&(k.d(1),k=null),(!g||p&8&&u!==(u="flex justify-between px-4 py-2 "+(f[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&h(s,"class",u),(!g||p&8&&m!==(m=!f[3]))&&(s.disabled=m),f[1]?w?(w.p(f,p),p&2&&J(w,1)):(w=Js(f),w.c(),J(w,1),w.m(e,null)):w&&(He(),ae(w,1,1,()=>{w=null}),Ve())},i(f){g||(J(w),g=!0)},o(f){ae(w),g=!1},d(f){f&&E(e),q&&q.d(),k&&k.d(),w&&w.d(),y=!1,T()}}}function tr(t,e,s){let{$$slots:i={},$$scope:a}=e;const n=Bt();let{name:r="board"}=e,{enabled:l=void 0}=e,{showExpand:o=!0}=e,{expanded:u=!1}=e;function m(T){Je.call(this,t,T)}const d=()=>n("changed",l);function g(){l=this.checked,s(0,l)}const y=()=>{s(1,u=!u)};return t.$$set=T=>{"name"in T&&s(2,r=T.name),"enabled"in T&&s(0,l=T.enabled),"showExpand"in T&&s(3,o=T.showExpand),"expanded"in T&&s(1,u=T.expanded),"$$scope"in T&&s(5,a=T.$$scope)},[l,u,r,o,n,a,i,m,d,g,y]}class ht extends qe{constructor(e){super(),Re(this,e,tr,er,Ne,{name:2,enabled:0,showExpand:3,expanded:1})}}function xs(t,e,s){const i=t.slice();return i[23]=e[s],i}function $s(t){let e,s=t[23]+"",i;return{c(){e=B("option"),i=me(s),this.h()},l(a){e=U(a,"OPTION",{});var n=j(e);i=pe(n,s),n.forEach(E),this.h()},h(){e.__value=t[23],e.value=e.__value},m(a,n){Y(a,e,n),C(e,i)},p:Le,d(a){a&&E(e)}}}function en(t){let e,s,i,a,n,r,l,o,u,m,d,g,y,T,q,k;return{c(){e=B("div"),s=B("div"),i=B("input"),a=te(),n=B("label"),r=me("shadow"),l=te(),o=B("div"),u=B("input"),m=te(),d=B("label"),g=me("border-radius (rem)"),this.h()},l(w){e=U(w,"DIV",{class:!0});var f=j(e);s=U(f,"DIV",{class:!0});var p=j(s);i=U(p,"INPUT",{id:!0,type:!0,class:!0}),a=se(p),n=U(p,"LABEL",{for:!0,class:!0});var S=j(n);r=pe(S,"shadow"),S.forEach(E),p.forEach(E),l=se(f),o=U(f,"DIV",{class:!0});var _=j(o);u=U(_,"INPUT",{id:!0,type:!0,class:!0,min:!0,max:!0}),m=se(_),d=U(_,"LABEL",{for:!0,class:!0});var P=j(d);g=pe(P,"border-radius (rem)"),P.forEach(E),_.forEach(E),f.forEach(E),this.h()},h(){h(i,"id","shadow"),h(i,"type","checkbox"),h(i,"class","svelte-lnr7xr"),h(n,"for","shadow"),h(n,"class","select-none"),h(s,"class","flex gap-2 mb-2"),h(u,"id","borderRadius"),h(u,"type","number"),h(u,"class","w-16 svelte-lnr7xr"),h(u,"min",0),h(u,"max",1),h(d,"for","borderRadius"),h(d,"class","select-none whitespace-nowrap"),h(o,"class","flex gap-2 mb-2"),h(e,"class","pl-2 pr-4 flex-col")},m(w,f){Y(w,e,f),C(e,s),C(s,i),i.checked=t[4],C(s,a),C(s,n),C(n,r),C(e,l),C(e,o),C(o,u),ot(u,t[10]),C(o,m),C(o,d),C(d,g),T=!0,q||(k=[ce(i,"change",t[18]),ce(u,"input",t[19])],q=!0)},p(w,f){f&16&&(i.checked=w[4]),f&1024&&ut(u.value)!==w[10]&&ot(u,w[10])},i(w){T||(w&&xe(()=>{y||(y=dt(e,ct,{},!0)),y.run(1)}),T=!0)},o(w){w&&(y||(y=dt(e,ct,{},!1)),y.run(0)),T=!1},d(w){w&&E(e),w&&y&&y.end(),q=!1,$e(k)}}}function tn(t){let e,s,i,a,n,r,l,o,u,m,d,g,y,T,q,k;return{c(){e=B("div"),s=B("div"),i=B("input"),a=te(),n=B("label"),r=me("min"),l=te(),o=B("div"),u=B("input"),m=te(),d=B("label"),g=me("max"),this.h()},l(w){e=U(w,"DIV",{class:!0});var f=j(e);s=U(f,"DIV",{class:!0});var p=j(s);i=U(p,"INPUT",{id:!0,type:!0,class:!0}),a=se(p),n=U(p,"LABEL",{for:!0,class:!0});var S=j(n);r=pe(S,"min"),S.forEach(E),p.forEach(E),l=se(f),o=U(f,"DIV",{class:!0});var _=j(o);u=U(_,"INPUT",{id:!0,type:!0,class:!0}),m=se(_),d=U(_,"LABEL",{for:!0,class:!0});var P=j(d);g=pe(P,"max"),P.forEach(E),_.forEach(E),f.forEach(E),this.h()},h(){h(i,"id","resizibleMin"),h(i,"type","number"),h(i,"class","w-16 svelte-lnr7xr"),h(n,"for","resizibleMin"),h(n,"class","select-none"),h(s,"class","flex gap-2 mb-2"),h(u,"id","resizibleMax"),h(u,"type","number"),h(u,"class","w-16 svelte-lnr7xr"),h(d,"for","resizibleMax"),h(d,"class","select-none"),h(o,"class","flex gap-2"),h(e,"class","pl-2 pr-4 flex-col")},m(w,f){Y(w,e,f),C(e,s),C(s,i),ot(i,t[6]),C(s,a),C(s,n),C(n,r),C(e,l),C(e,o),C(o,u),ot(u,t[7]),C(o,m),C(o,d),C(d,g),T=!0,q||(k=[ce(i,"input",t[21]),ce(u,"input",t[22])],q=!0)},p(w,f){f&64&&ut(i.value)!==w[6]&&ot(i,w[6]),f&128&&ut(u.value)!==w[7]&&ot(u,w[7])},i(w){T||(w&&xe(()=>{y||(y=dt(e,ct,{},!0)),y.run(1)}),T=!0)},o(w){w&&(y||(y=dt(e,ct,{},!1)),y.run(0)),T=!1},d(w){w&&E(e),w&&y&&y.end(),q=!1,$e(k)}}}function sr(t){let e,s,i,a,n,r,l,o,u,m,d,g,y,T,q,k,w,f,p,S,_,P,K,G,W,O,Q,le,ve,fe,c,v,b,A,F,I,V,N,x,oe,L=Qs,z=[];for(let R=0;R<L.length;R+=1)z[R]=$s(xs(t,L,R));let ne=t[11]&&en(t),X=t[5]&&tn(t);return{c(){e=B("div"),s=B("select");for(let R=0;R<z.length;R+=1)z[R].c();i=te(),a=B("label"),n=me("board theme"),r=te(),l=B("div"),o=B("input"),u=te(),m=B("label"),d=me("mouseEvents"),g=te(),y=B("div"),T=B("input"),q=te(),k=B("label"),w=me("notation"),f=te(),p=B("div"),S=B("input"),_=te(),P=B("label"),K=me("flipped"),G=te(),W=B("div"),O=B("input"),Q=te(),le=B("label"),ve=me("style"),fe=te(),ne&&ne.c(),c=te(),v=B("div"),b=B("input"),A=te(),F=B("label"),I=me("resizible"),V=te(),X&&X.c(),N=Ae(),this.h()},l(R){e=U(R,"DIV",{class:!0});var Z=j(e);s=U(Z,"SELECT",{class:!0});var re=j(s);for(let Qe=0;Qe<z.length;Qe+=1)z[Qe].l(re);re.forEach(E),i=se(Z),a=U(Z,"LABEL",{for:!0,class:!0});var Ee=j(a);n=pe(Ee,"board theme"),Ee.forEach(E),Z.forEach(E),r=se(R),l=U(R,"DIV",{class:!0});var ie=j(l);o=U(ie,"INPUT",{id:!0,type:!0,class:!0}),u=se(ie),m=U(ie,"LABEL",{for:!0,class:!0});var Pe=j(m);d=pe(Pe,"mouseEvents"),Pe.forEach(E),ie.forEach(E),g=se(R),y=U(R,"DIV",{class:!0});var Ie=j(y);T=U(Ie,"INPUT",{id:!0,type:!0,class:!0}),q=se(Ie),k=U(Ie,"LABEL",{for:!0,class:!0});var Ue=j(k);w=pe(Ue,"notation"),Ue.forEach(E),Ie.forEach(E),f=se(R),p=U(R,"DIV",{class:!0});var Be=j(p);S=U(Be,"INPUT",{id:!0,type:!0,class:!0}),_=se(Be),P=U(Be,"LABEL",{for:!0,class:!0});var Oe=j(P);K=pe(Oe,"flipped"),Oe.forEach(E),Be.forEach(E),G=se(R),W=U(R,"DIV",{});var ze=j(W);O=U(ze,"INPUT",{id:!0,type:!0,class:!0}),Q=se(ze),le=U(ze,"LABEL",{for:!0,class:!0});var nt=j(le);ve=pe(nt,"style"),nt.forEach(E),ze.forEach(E),fe=se(R),ne&&ne.l(R),c=se(R),v=U(R,"DIV",{class:!0});var Ge=j(v);b=U(Ge,"INPUT",{id:!0,type:!0,class:!0}),A=se(Ge),F=U(Ge,"LABEL",{for:!0,class:!0});var et=j(F);I=pe(et,"resizible"),et.forEach(E),Ge.forEach(E),V=se(R),X&&X.l(R),N=Ae(),this.h()},h(){h(s,"class","svelte-lnr7xr"),t[0]===void 0&&xe(()=>t[13].call(s)),h(a,"for","boardTheme"),h(a,"class","select-none"),h(e,"class","mb-2"),h(o,"id","mouseEvents"),h(o,"type","checkbox"),h(o,"class","svelte-lnr7xr"),h(m,"for","mouseEvents"),h(m,"class","select-none"),h(l,"class","mb-2"),h(T,"id","notation"),h(T,"type","checkbox"),h(T,"class","svelte-lnr7xr"),h(k,"for","notation"),h(k,"class","select-none"),h(y,"class","mb-2"),h(S,"id","flipped"),h(S,"type","checkbox"),h(S,"class","svelte-lnr7xr"),h(P,"for","flipped"),h(P,"class","select-none"),h(p,"class","mb-2"),h(O,"id","styleEnabled"),h(O,"type","checkbox"),h(O,"class","svelte-lnr7xr"),h(le,"for","styleEnabled"),h(le,"class","select-none"),h(b,"id","resizibleEnabled"),h(b,"type","checkbox"),h(b,"class","svelte-lnr7xr"),h(F,"for","resizibleEnabled"),h(F,"class","select-none"),h(v,"class","mt-2 mb-1")},m(R,Z){Y(R,e,Z),C(e,s);for(let re=0;re<z.length;re+=1)z[re].m(s,null);_t(s,t[0]),C(e,i),C(e,a),C(a,n),Y(R,r,Z),Y(R,l,Z),C(l,o),o.checked=t[1],C(l,u),C(l,m),C(m,d),Y(R,g,Z),Y(R,y,Z),C(y,T),T.checked=t[2],C(y,q),C(y,k),C(k,w),Y(R,f,Z),Y(R,p,Z),C(p,S),S.checked=t[3],C(p,_),C(p,P),C(P,K),Y(R,G,Z),Y(R,W,Z),C(W,O),O.checked=t[11],C(W,Q),C(W,le),C(le,ve),Y(R,fe,Z),ne&&ne.m(R,Z),Y(R,c,Z),Y(R,v,Z),C(v,b),b.checked=t[5],C(v,A),C(v,F),C(F,I),Y(R,V,Z),X&&X.m(R,Z),Y(R,N,Z),x||(oe=[ce(s,"change",t[13]),ce(o,"change",t[14]),ce(T,"change",t[15]),ce(S,"change",t[16]),ce(O,"change",t[17]),ce(b,"change",t[20])],x=!0)},p(R,Z){if(Z&0){L=Qs;let re;for(re=0;re<L.length;re+=1){const Ee=xs(R,L,re);z[re]?z[re].p(Ee,Z):(z[re]=$s(Ee),z[re].c(),z[re].m(s,null))}for(;re<z.length;re+=1)z[re].d(1);z.length=L.length}Z&1&&_t(s,R[0]),Z&2&&(o.checked=R[1]),Z&4&&(T.checked=R[2]),Z&8&&(S.checked=R[3]),Z&2048&&(O.checked=R[11]),R[11]?ne?(ne.p(R,Z),Z&2048&&J(ne,1)):(ne=en(R),ne.c(),J(ne,1),ne.m(c.parentNode,c)):ne&&(He(),ae(ne,1,1,()=>{ne=null}),Ve()),Z&32&&(b.checked=R[5]),R[5]?X?(X.p(R,Z),Z&32&&J(X,1)):(X=tn(R),X.c(),J(X,1),X.m(N.parentNode,N)):X&&(He(),ae(X,1,1,()=>{X=null}),Ve())},d(R){R&&E(e),ft(z,R),R&&E(r),R&&E(l),R&&E(g),R&&E(y),R&&E(f),R&&E(p),R&&E(G),R&&E(W),R&&E(fe),ne&&ne.d(R),R&&E(c),R&&E(v),R&&E(V),X&&X.d(R),R&&E(N),x=!1,$e(oe)}}}function nr(t){let e,s;return e=new ht({props:{name:t[8],expanded:t[9],$$slots:{default:[sr]},$$scope:{ctx:t}}}),{c(){ke(e.$$.fragment)},l(i){we(e.$$.fragment,i)},m(i,a){Se(e,i,a),s=!0},p(i,[a]){const n={};a&256&&(n.name=i[8]),a&512&&(n.expanded=i[9]),a&67112191&&(n.$$scope={dirty:a,ctx:i}),e.$set(n)},i(i){s||(J(e.$$.fragment,i),s=!0)},o(i){ae(e.$$.fragment,i),s=!1},d(i){ye(e,i)}}}function ir(t,e,s){let{name:i="Board"}=e,{boardTheme:a}=e,{mouseEvents:n}=e,{notation:r}=e,{flipped:l}=e,{shadow:o}=e,{borderRadius:u="0px"}=e,{resizible:m=!1}=e,{min:d=0}=e,{max:g=0}=e,{expanded:y=!1}=e,T=!0,q=parseFloat(u.endsWith("px")?u.slice(0,-2):u.slice(0,-3));function k(){a=ts(this),s(0,a)}function w(){n=this.checked,s(1,n)}function f(){r=this.checked,s(2,r)}function p(){l=this.checked,s(3,l)}function S(){T=this.checked,s(11,T)}function _(){o=this.checked,s(4,o)}function P(){q=ut(this.value),s(10,q)}function K(){m=this.checked,s(5,m)}function G(){d=ut(this.value),s(6,d)}function W(){g=ut(this.value),s(7,g)}return t.$$set=O=>{"name"in O&&s(8,i=O.name),"boardTheme"in O&&s(0,a=O.boardTheme),"mouseEvents"in O&&s(1,n=O.mouseEvents),"notation"in O&&s(2,r=O.notation),"flipped"in O&&s(3,l=O.flipped),"shadow"in O&&s(4,o=O.shadow),"borderRadius"in O&&s(12,u=O.borderRadius),"resizible"in O&&s(5,m=O.resizible),"min"in O&&s(6,d=O.min),"max"in O&&s(7,g=O.max),"expanded"in O&&s(9,y=O.expanded)},t.$$.update=()=>{t.$$.dirty&1024&&s(12,u=`${q!=null?q:0}rem`)},[a,n,r,l,o,m,d,g,i,y,q,T,u,k,w,f,p,S,_,P,K,G,W]}class ar extends qe{constructor(e){super(),Re(this,e,ir,nr,Ne,{name:8,boardTheme:0,mouseEvents:1,notation:2,flipped:3,shadow:4,borderRadius:12,resizible:5,min:6,max:7,expanded:9})}}function rr(t){let e,s,i,a,n,r,l,o,u,m;return{c(){e=B("div"),s=B("select"),i=B("option"),a=me("Both"),n=B("option"),r=me("White"),l=B("option"),o=me("Black"),this.h()},l(d){e=U(d,"DIV",{});var g=j(e);s=U(g,"SELECT",{class:!0});var y=j(s);i=U(y,"OPTION",{});var T=j(i);a=pe(T,"Both"),T.forEach(E),n=U(y,"OPTION",{});var q=j(n);r=pe(q,"White"),q.forEach(E),l=U(y,"OPTION",{});var k=j(l);o=pe(k,"Black"),k.forEach(E),y.forEach(E),g.forEach(E),this.h()},h(){i.__value=_e.BOTH,i.value=i.__value,n.__value=_e.WHITE,n.value=n.__value,l.__value=_e.BLACK,l.value=l.__value,h(s,"class","svelte-xrxnwg"),t[1]===void 0&&xe(()=>t[4].call(s))},m(d,g){Y(d,e,g),C(e,s),C(s,i),C(i,a),C(s,n),C(n,r),C(s,l),C(l,o),_t(s,t[1]),u||(m=ce(s,"change",t[4]),u=!0)},p(d,g){g&2&&_t(s,d[1])},d(d){d&&E(e),u=!1,m()}}}function lr(t){let e,s,i;function a(r){t[5](r)}let n={name:t[2],expanded:t[3],$$slots:{default:[rr]},$$scope:{ctx:t}};return t[0]!==void 0&&(n.enabled=t[0]),e=new ht({props:n}),de.push(()=>ge(e,"enabled",a)),{c(){ke(e.$$.fragment)},l(r){we(e.$$.fragment,r)},m(r,l){Se(e,r,l),i=!0},p(r,[l]){const o={};l&4&&(o.name=r[2]),l&8&&(o.expanded=r[3]),l&66&&(o.$$scope={dirty:l,ctx:r}),!s&&l&1&&(s=!0,o.enabled=r[0],be(()=>s=!1)),e.$set(o)},i(r){i||(J(e.$$.fragment,r),i=!0)},o(r){ae(e.$$.fragment,r),i=!1},d(r){ye(e,r)}}}function or(t,e,s){let{name:i="Movable"}=e,{enabled:a=!1}=e,{color:n}=e,{expanded:r=!1}=e;function l(){n=ts(this),s(1,n)}function o(u){a=u,s(0,a)}return t.$$set=u=>{"name"in u&&s(2,i=u.name),"enabled"in u&&s(0,a=u.enabled),"color"in u&&s(1,n=u.color),"expanded"in u&&s(3,r=u.expanded)},[a,n,i,r,l,o]}class ur extends qe{constructor(e){super(),Re(this,e,or,lr,Ne,{name:2,enabled:0,color:1,expanded:3})}}function sn(t,e,s){const i=t.slice();return i[12]=e[s],i}function nn(t){let e,s,i,a,n,r,l,o,u,m,d,g,y,T,q,k,w=Xs,f=[];for(let p=0;p<w.length;p+=1)f[p]=an(sn(t,w,p));return{c(){e=B("div"),s=B("div"),i=B("input"),a=te(),n=B("label"),r=me("duration"),l=te(),o=B("div"),u=B("select");for(let p=0;p<f.length;p+=1)f[p].c();m=te(),d=B("label"),g=me("easing"),this.h()},l(p){e=U(p,"DIV",{class:!0});var S=j(e);s=U(S,"DIV",{class:!0});var _=j(s);i=U(_,"INPUT",{id:!0,type:!0,class:!0}),a=se(_),n=U(_,"LABEL",{for:!0,class:!0});var P=j(n);r=pe(P,"duration"),P.forEach(E),_.forEach(E),l=se(S),o=U(S,"DIV",{class:!0});var K=j(o);u=U(K,"SELECT",{id:!0,class:!0});var G=j(u);for(let O=0;O<f.length;O+=1)f[O].l(G);G.forEach(E),m=se(K),d=U(K,"LABEL",{for:!0,class:!0});var W=j(d);g=pe(W,"easing"),W.forEach(E),K.forEach(E),S.forEach(E),this.h()},h(){h(i,"id","transitionDuration"),h(i,"type","number"),h(i,"class","w-16 svelte-1qpp6cx"),h(n,"for","transitionDuration"),h(n,"class","select-none"),h(s,"class","flex gap-2 mb-2"),h(u,"id","easingFuncs"),h(u,"class","svelte-1qpp6cx"),t[4]===void 0&&xe(()=>t[10].call(u)),h(d,"for","easingFuncs"),h(d,"class","select-none"),h(o,"class","flex gap-2"),h(e,"class","pl-2 pr-4 flex-col")},m(p,S){Y(p,e,S),C(e,s),C(s,i),ot(i,t[3]),C(s,a),C(s,n),C(n,r),C(e,l),C(e,o),C(o,u);for(let _=0;_<f.length;_+=1)f[_].m(u,null);_t(u,t[4]),C(o,m),C(o,d),C(d,g),T=!0,q||(k=[ce(i,"input",t[9]),ce(u,"change",t[10])],q=!0)},p(p,S){if(S&8&&ut(i.value)!==p[3]&&ot(i,p[3]),S&0){w=Xs;let _;for(_=0;_<w.length;_+=1){const P=sn(p,w,_);f[_]?f[_].p(P,S):(f[_]=an(P),f[_].c(),f[_].m(u,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=w.length}S&16&&_t(u,p[4])},i(p){T||(p&&xe(()=>{y||(y=dt(e,ct,{},!0)),y.run(1)}),T=!0)},o(p){p&&(y||(y=dt(e,ct,{},!1)),y.run(0)),T=!1},d(p){p&&E(e),ft(f,p),p&&y&&y.end(),q=!1,$e(k)}}}function an(t){let e,s=t[12]+"",i;return{c(){e=B("option"),i=me(s),this.h()},l(a){e=U(a,"OPTION",{});var n=j(e);i=pe(n,s),n.forEach(E),this.h()},h(){e.__value=t[12],e.value=e.__value},m(a,n){Y(a,e,n),C(e,i)},p:Le,d(a){a&&E(e)}}}function fr(t){let e,s,i,a,n,r,l,o,u,m,d,g,y,T,q,k=t[2]&&nn(t);return{c(){e=B("div"),s=B("input"),i=te(),a=B("label"),n=me("ghost piece"),r=te(),l=B("div"),o=B("input"),u=te(),m=B("label"),d=me("transition"),g=te(),k&&k.c(),y=Ae(),this.h()},l(w){e=U(w,"DIV",{class:!0});var f=j(e);s=U(f,"INPUT",{id:!0,type:!0,class:!0}),i=se(f),a=U(f,"LABEL",{for:!0,class:!0});var p=j(a);n=pe(p,"ghost piece"),p.forEach(E),f.forEach(E),r=se(w),l=U(w,"DIV",{class:!0});var S=j(l);o=U(S,"INPUT",{id:!0,type:!0,class:!0}),u=se(S),m=U(S,"LABEL",{for:!0,class:!0});var _=j(m);d=pe(_,"transition"),_.forEach(E),S.forEach(E),g=se(w),k&&k.l(w),y=Ae(),this.h()},h(){h(s,"id","ghostPiece"),h(s,"type","checkbox"),h(s,"class","svelte-1qpp6cx"),h(a,"for","ghostPiece"),h(a,"class","select-none"),h(e,"class","mb-2"),h(o,"id","draggableEnabled"),h(o,"type","checkbox"),h(o,"class","svelte-1qpp6cx"),h(m,"for","draggableEnabled"),h(m,"class","select-none"),h(l,"class","mb-2")},m(w,f){Y(w,e,f),C(e,s),s.checked=t[1],C(e,i),C(e,a),C(a,n),Y(w,r,f),Y(w,l,f),C(l,o),o.checked=t[2],C(l,u),C(l,m),C(m,d),Y(w,g,f),k&&k.m(w,f),Y(w,y,f),T||(q=[ce(s,"change",t[7]),ce(o,"change",t[8])],T=!0)},p(w,f){f&2&&(s.checked=w[1]),f&4&&(o.checked=w[2]),w[2]?k?(k.p(w,f),f&4&&J(k,1)):(k=nn(w),k.c(),J(k,1),k.m(y.parentNode,y)):k&&(He(),ae(k,1,1,()=>{k=null}),Ve())},d(w){w&&E(e),w&&E(r),w&&E(l),w&&E(g),k&&k.d(w),w&&E(y),T=!1,$e(q)}}}function dr(t){let e,s,i;function a(r){t[11](r)}let n={name:t[5],expanded:t[6],$$slots:{default:[fr]},$$scope:{ctx:t}};return t[0]!==void 0&&(n.enabled=t[0]),e=new ht({props:n}),de.push(()=>ge(e,"enabled",a)),{c(){ke(e.$$.fragment)},l(r){we(e.$$.fragment,r)},m(r,l){Se(e,r,l),i=!0},p(r,[l]){const o={};l&32&&(o.name=r[5]),l&64&&(o.expanded=r[6]),l&32798&&(o.$$scope={dirty:l,ctx:r}),!s&&l&1&&(s=!0,o.enabled=r[0],be(()=>s=!1)),e.$set(o)},i(r){i||(J(e.$$.fragment,r),i=!0)},o(r){ae(e.$$.fragment,r),i=!1},d(r){ye(e,r)}}}function cr(t,e,s){let{name:i="Draggable"}=e,{enabled:a=!1}=e,{ghostPiece:n=!1}=e,{transition:r=!1}=e,{duration:l=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function m(){n=this.checked,s(1,n)}function d(){r=this.checked,s(2,r)}function g(){l=ut(this.value),s(3,l)}function y(){o=ts(this),s(4,o)}function T(q){a=q,s(0,a)}return t.$$set=q=>{"name"in q&&s(5,i=q.name),"enabled"in q&&s(0,a=q.enabled),"ghostPiece"in q&&s(1,n=q.ghostPiece),"transition"in q&&s(2,r=q.transition),"duration"in q&&s(3,l=q.duration),"easing"in q&&s(4,o=q.easing),"expanded"in q&&s(6,u=q.expanded)},[a,n,r,l,o,i,u,m,d,g,y,T]}class hr extends qe{constructor(e){super(),Re(this,e,cr,dr,Ne,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function rn(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function ln(t){let e,s,i,a,n=t[7]+"",r,l,o,u;function m(){t[5].call(s,t[7])}return{c(){e=B("div"),s=B("input"),i=te(),a=B("label"),r=me(n),l=te(),this.h()},l(d){e=U(d,"DIV",{class:!0});var g=j(e);s=U(g,"INPUT",{id:!0,type:!0}),i=se(g),a=U(g,"LABEL",{for:!0,class:!0});var y=j(a);r=pe(y,n),y.forEach(E),l=se(g),g.forEach(E),this.h()},h(){h(s,"id",t[7]+"Enabled"),h(s,"type","checkbox"),h(a,"for",t[7]+"Enabled"),h(a,"class","select-none"),h(e,"class","mb-2")},m(d,g){Y(d,e,g),C(e,s),s.checked=t[1][t[7]],C(e,i),C(e,a),C(a,r),C(e,l),o||(u=ce(s,"change",m),o=!0)},p(d,g){t=d,g&18&&(s.checked=t[1][t[7]])},d(d){d&&E(e),o=!1,u()}}}function gr(t){let e,s=t[4],i=[];for(let a=0;a<s.length;a+=1)i[a]=ln(rn(t,s,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Ae()},l(a){for(let n=0;n<i.length;n+=1)i[n].l(a);e=Ae()},m(a,n){for(let r=0;r<i.length;r+=1)i[r].m(a,n);Y(a,e,n)},p(a,n){if(n&18){s=a[4];let r;for(r=0;r<s.length;r+=1){const l=rn(a,s,r);i[r]?i[r].p(l,n):(i[r]=ln(l),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}},d(a){ft(i,a),a&&E(e)}}}function br(t){let e,s,i;function a(r){t[6](r)}let n={name:t[2],expanded:t[3],$$slots:{default:[gr]},$$scope:{ctx:t}};return t[0]!==void 0&&(n.enabled=t[0]),e=new ht({props:n}),de.push(()=>ge(e,"enabled",a)),{c(){ke(e.$$.fragment)},l(r){we(e.$$.fragment,r)},m(r,l){Se(e,r,l),i=!0},p(r,[l]){const o={};l&4&&(o.name=r[2]),l&8&&(o.expanded=r[3]),l&1026&&(o.$$scope={dirty:l,ctx:r}),!s&&l&1&&(s=!0,o.enabled=r[0],be(()=>s=!1)),e.$set(o)},i(r){i||(J(e.$$.fragment,r),i=!0)},o(r){ae(e.$$.fragment,r),i=!1},d(r){ye(e,r)}}}function mr(t,e,s){let{name:i="Highlight"}=e,{enabled:a=!1}=e,{settings:n}=e;const r=["select","legal","move","preMove","nextMove","check"];let{expanded:l=!1}=e;function o(m){n[m]=this.checked,s(1,n)}function u(m){a=m,s(0,a)}return t.$$set=m=>{"name"in m&&s(2,i=m.name),"enabled"in m&&s(0,a=m.enabled),"settings"in m&&s(1,n=m.settings),"expanded"in m&&s(3,l=m.expanded)},[a,n,i,l,r,o,u]}class pr extends qe{constructor(e){super(),Re(this,e,mr,br,Ne,{name:2,enabled:0,settings:1,expanded:3})}}function vr(t){let e,s,i,a,n,r,l,o,u,m,d,g,y;return{c(){e=B("div"),s=B("input"),i=te(),a=B("label"),n=me("L shape knight move"),r=te(),l=B("div"),o=B("input"),u=te(),m=B("label"),d=me("only chess move"),this.h()},l(T){e=U(T,"DIV",{class:!0});var q=j(e);s=U(q,"INPUT",{id:!0,type:!0}),i=se(q),a=U(q,"LABEL",{for:!0,class:!0});var k=j(a);n=pe(k,"L shape knight move"),k.forEach(E),q.forEach(E),r=se(T),l=U(T,"DIV",{class:!0});var w=j(l);o=U(w,"INPUT",{id:!0,type:!0}),u=se(w),m=U(w,"LABEL",{for:!0,class:!0});var f=j(m);d=pe(f,"only chess move"),f.forEach(E),w.forEach(E),this.h()},h(){h(s,"id","knightLShapeMoveEnabled"),h(s,"type","checkbox"),h(a,"for","knightLShapeMoveEnabled"),h(a,"class","select-none"),h(e,"class","mb-2"),h(o,"id","onlyChessMoveEnabled"),h(o,"type","checkbox"),h(m,"for","onlyChessMoveEnabled"),h(m,"class","select-none"),h(l,"class","mb-2")},m(T,q){Y(T,e,q),C(e,s),s.checked=t[1],C(e,i),C(e,a),C(a,n),Y(T,r,q),Y(T,l,q),C(l,o),o.checked=t[2],C(l,u),C(l,m),C(m,d),g||(y=[ce(s,"change",t[5]),ce(o,"change",t[6])],g=!0)},p(T,q){q&2&&(s.checked=T[1]),q&4&&(o.checked=T[2])},d(T){T&&E(e),T&&E(r),T&&E(l),g=!1,$e(y)}}}function _r(t){let e,s,i;function a(r){t[7](r)}let n={name:t[3],expanded:t[4],$$slots:{default:[vr]},$$scope:{ctx:t}};return t[0]!==void 0&&(n.enabled=t[0]),e=new ht({props:n}),de.push(()=>ge(e,"enabled",a)),{c(){ke(e.$$.fragment)},l(r){we(e.$$.fragment,r)},m(r,l){Se(e,r,l),i=!0},p(r,[l]){const o={};l&8&&(o.name=r[3]),l&16&&(o.expanded=r[4]),l&262&&(o.$$scope={dirty:l,ctx:r}),!s&&l&1&&(s=!0,o.enabled=r[0],be(()=>s=!1)),e.$set(o)},i(r){i||(J(e.$$.fragment,r),i=!0)},o(r){ae(e.$$.fragment,r),i=!1},d(r){ye(e,r)}}}function Er(t,e,s){let{name:i="DrawTools"}=e,{enabled:a=!1}=e,{knightLShape:n=!1}=e,{onlyChessMove:r=!1}=e,{expanded:l=!1}=e;function o(){n=this.checked,s(1,n)}function u(){r=this.checked,s(2,r)}function m(d){a=d,s(0,a)}return t.$$set=d=>{"name"in d&&s(3,i=d.name),"enabled"in d&&s(0,a=d.enabled),"knightLShape"in d&&s(1,n=d.knightLShape),"onlyChessMove"in d&&s(2,r=d.onlyChessMove),"expanded"in d&&s(4,l=d.expanded)},[a,n,r,i,l,o,u,m]}class Mr extends qe{constructor(e){super(),Re(this,e,Er,_r,Ne,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function on(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function un(t){let e,s,i,a,n=t[7].toLowerCase()+"",r,l,o,u;function m(){t[5].call(s,t[7])}return{c(){e=B("div"),s=B("input"),i=te(),a=B("label"),r=me(n),l=te(),this.h()},l(d){e=U(d,"DIV",{class:!0});var g=j(e);s=U(g,"INPUT",{id:!0,type:!0}),i=se(g),a=U(g,"LABEL",{for:!0,class:!0});var y=j(a);r=pe(y,n),y.forEach(E),l=se(g),g.forEach(E),this.h()},h(){h(s,"id",t[7]+"Enabled"),h(s,"type","checkbox"),h(a,"for",t[7]+"Enabled"),h(a,"class","select-none"),h(e,"class","mb-2")},m(d,g){Y(d,e,g),C(e,s),s.checked=t[1][t[7]],C(e,i),C(e,a),C(a,r),C(e,l),o||(u=ce(s,"change",m),o=!0)},p(d,g){t=d,g&18&&(s.checked=t[1][t[7]])},d(d){d&&E(e),o=!1,u()}}}function kr(t){let e,s=t[4],i=[];for(let a=0;a<s.length;a+=1)i[a]=un(on(t,s,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Ae()},l(a){for(let n=0;n<i.length;n+=1)i[n].l(a);e=Ae()},m(a,n){for(let r=0;r<i.length;r+=1)i[r].m(a,n);Y(a,e,n)},p(a,n){if(n&18){s=a[4];let r;for(r=0;r<s.length;r+=1){const l=on(a,s,r);i[r]?i[r].p(l,n):(i[r]=un(l),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}},d(a){ft(i,a),a&&E(e)}}}function wr(t){let e,s,i;function a(r){t[6](r)}let n={name:t[2],expanded:t[3],$$slots:{default:[kr]},$$scope:{ctx:t}};return t[0]!==void 0&&(n.enabled=t[0]),e=new ht({props:n}),de.push(()=>ge(e,"enabled",a)),{c(){ke(e.$$.fragment)},l(r){we(e.$$.fragment,r)},m(r,l){Se(e,r,l),i=!0},p(r,[l]){const o={};l&4&&(o.name=r[2]),l&8&&(o.expanded=r[3]),l&1026&&(o.$$scope={dirty:l,ctx:r}),!s&&l&1&&(s=!0,o.enabled=r[0],be(()=>s=!1)),e.$set(o)},i(r){i||(J(e.$$.fragment,r),i=!0)},o(r){ae(e.$$.fragment,r),i=!1},d(r){ye(e,r)}}}function Sr(t,e,s){let{name:i="Sounds"}=e,{enabled:a=!1}=e,{settings:n}=e;const r=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:l=!1}=e;function o(m){n[m]=this.checked,s(1,n)}function u(m){a=m,s(0,a)}return t.$$set=m=>{"name"in m&&s(2,i=m.name),"enabled"in m&&s(0,a=m.enabled),"settings"in m&&s(1,n=m.settings),"expanded"in m&&s(3,l=m.expanded)},[a,n,i,l,r,o,u]}class yr extends qe{constructor(e){super(),Re(this,e,Sr,wr,Ne,{name:2,enabled:0,settings:1,expanded:3})}}function Cr(t){let e,s;return{c(){e=We("svg"),s=We("path"),this.h()},l(i){e=Ke(i,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=j(e);s=Ke(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),j(s).forEach(E),a.forEach(E),this.h()},h(){h(s,"stroke-linecap","round"),h(s,"stroke-linejoin","round"),h(s,"stroke-width","2"),h(s,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),Me(e,"transform","translate(1px, 0px)"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"class","h-5"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"aria-hidden","true"),h(e,"stroke","currentColor")},m(i,a){Y(i,e,a),C(e,s)},d(i){i&&E(e)}}}function Ar(t){let e,s;return{c(){e=We("svg"),s=We("path"),this.h()},l(i){e=Ke(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=j(e);s=Ke(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),j(s).forEach(E),a.forEach(E),this.h()},h(){h(s,"stroke-linecap","round"),h(s,"stroke-linejoin","round"),h(s,"stroke-width","2"),h(s,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"class","h-5 text-green-500"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"aria-hidden","true"),h(e,"stroke","currentColor")},m(i,a){Y(i,e,a),C(e,s)},d(i){i&&E(e)}}}function Pr(t){let e,s,i;function a(l,o){return l[1]?Ar:Cr}let n=a(t),r=n(t);return{c(){e=B("button"),r.c(),this.h()},l(l){e=U(l,"BUTTON",{type:!0,class:!0});var o=j(e);r.l(o),o.forEach(E),this.h()},h(){h(e,"type","button"),h(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(l,o){Y(l,e,o),r.m(e,null),t[4](e),s||(i=ce(e,"click",t[2]),s=!0)},p(l,[o]){n!==(n=a(l))&&(r.d(1),r=n(l),r&&(r.c(),r.m(e,null)))},i:Le,o:Le,d(l){l&&E(e),r.d(),t[4](null),s=!1,i()}}}function Tr(t,e,s){let{copyText:i}=e,a,n=!1;function r(){navigator.clipboard.writeText(i),s(1,n=!0),setTimeout(()=>{s(1,n=!1)},2e3),a.setAttribute("data-cooltipz-dir","top"),a.setAttribute("aria-label","Copied!"),setTimeout(()=>{a.removeAttribute("aria-label"),a.removeAttribute("data-cooltipz-dir")},2e3)}function l(o){de[o?"unshift":"push"](()=>{a=o,s(0,a)})}return t.$$set=o=>{"copyText"in o&&s(3,i=o.copyText)},[a,n,r,i,l]}class Lr extends qe{constructor(e){super(),Re(this,e,Tr,Pr,Ne,{copyText:3})}}function Ir(t){let e,s,i;function a(r){t[2](r)}let n={name:t[1],showExpand:!1};return t[0]!==void 0&&(n.enabled=t[0]),e=new ht({props:n}),de.push(()=>ge(e,"enabled",a)),e.$on("changed",t[3]),{c(){ke(e.$$.fragment)},l(r){we(e.$$.fragment,r)},m(r,l){Se(e,r,l),i=!0},p(r,[l]){const o={};l&2&&(o.name=r[1]),!s&&l&1&&(s=!0,o.enabled=r[0],be(()=>s=!1)),e.$set(o)},i(r){i||(J(e.$$.fragment,r),i=!0)},o(r){ae(e.$$.fragment,r),i=!1},d(r){ye(e,r)}}}function Or(t,e,s){let{name:i="Legal"}=e,{enabled:a=!1}=e;function n(l){a=l,s(0,a)}function r(l){Je.call(this,t,l)}return t.$$set=l=>{"name"in l&&s(1,i=l.name),"enabled"in l&&s(0,a=l.enabled)},[a,i,n,r]}class Fr extends qe{constructor(e){super(),Re(this,e,Or,Ir,Ne,{name:1,enabled:0})}}function qr(t){let e,s,i,a,n,r,l,o,u,m,d,g,y,T,q,k,w,f,p,S,_,P,K,G,W,O,Q,le,ve,fe,c,v,b,A,F,I,V,N,x,oe,L,z,ne,X,R,Z,re,Ee,ie,Pe,Ie,Ue,Be,Oe,ze,nt,Ge,et,Qe,Et,Mt,tt,kt,mt,wt,Ye,St,Ze,it,yt,Tt;function Ut(D){t[7](D)}function zt(D){t[8](D)}function Ht(D){t[9](D)}function Vt(D){t[10](D)}function M(D){t[11](D)}function $(D){t[12](D)}function ue(D){t[13](D)}function Ce(D){t[14](D)}function Fe(D){t[15](D)}let De={expanded:!0};t[0].board.boardTheme!==void 0&&(De.boardTheme=t[0].board.boardTheme),t[0].board.mouseEvents!==void 0&&(De.mouseEvents=t[0].board.mouseEvents),t[0].board.notation!==void 0&&(De.notation=t[0].board.notation),t[0].board.flipped!==void 0&&(De.flipped=t[0].board.flipped),t[0].board.style.shadow!==void 0&&(De.shadow=t[0].board.style.shadow),t[0].board.style.borderRadius!==void 0&&(De.borderRadius=t[0].board.style.borderRadius),t[0].board.resizible.enabled!==void 0&&(De.resizible=t[0].board.resizible.enabled),t[0].board.resizible.min!==void 0&&(De.min=t[0].board.resizible.min),t[0].board.resizible.max!==void 0&&(De.max=t[0].board.resizible.max),r=new ar({props:De}),de.push(()=>ge(r,"boardTheme",Ut)),de.push(()=>ge(r,"mouseEvents",zt)),de.push(()=>ge(r,"notation",Ht)),de.push(()=>ge(r,"flipped",Vt)),de.push(()=>ge(r,"shadow",M)),de.push(()=>ge(r,"borderRadius",$)),de.push(()=>ge(r,"resizible",ue)),de.push(()=>ge(r,"min",Ce)),de.push(()=>ge(r,"max",Fe));function ns(D){t[16](D)}function An(D){t[17](D)}let Wt={expanded:!0};t[0].movable.enabled!==void 0&&(Wt.enabled=t[0].movable.enabled),t[0].movable.color!==void 0&&(Wt.color=t[0].movable.color),w=new ur({props:Wt}),de.push(()=>ge(w,"enabled",ns)),de.push(()=>ge(w,"color",An));function Pn(D){t[18](D)}function Tn(D){t[19](D)}function Ln(D){t[20](D)}function In(D){t[21](D)}function On(D){t[22](D)}let pt={};t[0].draggable.enabled!==void 0&&(pt.enabled=t[0].draggable.enabled),t[0].draggable.ghostPiece.enabled!==void 0&&(pt.ghostPiece=t[0].draggable.ghostPiece.enabled),t[0].draggable.transition.enabled!==void 0&&(pt.transition=t[0].draggable.transition.enabled),t[0].draggable.transition.settings.duration!==void 0&&(pt.duration=t[0].draggable.transition.settings.duration),t[0].draggable.transition.settings.easing!==void 0&&(pt.easing=t[0].draggable.transition.settings.easing),_=new hr({props:pt}),de.push(()=>ge(_,"enabled",Pn)),de.push(()=>ge(_,"ghostPiece",Tn)),de.push(()=>ge(_,"transition",Ln)),de.push(()=>ge(_,"duration",In)),de.push(()=>ge(_,"easing",On));function Fn(D){t[23](D)}let is={name:"Selectable",showExpand:!1};t[0].selectable.enabled!==void 0&&(is.enabled=t[0].selectable.enabled),le=new ht({props:is}),de.push(()=>ge(le,"enabled",Fn));function qn(D){t[24](D)}let as={};t[0].legal.enabled!==void 0&&(as.enabled=t[0].legal.enabled),c=new Fr({props:as}),de.push(()=>ge(c,"enabled",qn)),c.$on("changed",t[25]);function Rn(D){t[26](D)}function Nn(D){t[27](D)}let Kt={};t[0].highlight.enabled!==void 0&&(Kt.enabled=t[0].highlight.enabled),t[0].highlight.settings!==void 0&&(Kt.settings=t[0].highlight.settings),A=new pr({props:Kt}),de.push(()=>ge(A,"enabled",Rn)),de.push(()=>ge(A,"settings",Nn));function Dn(D){t[28](D)}function Bn(D){t[29](D)}function Un(D){t[30](D)}let Lt={};t[0].drawTools.enabled!==void 0&&(Lt.enabled=t[0].drawTools.enabled),t[0].drawTools.settings.knightLShape!==void 0&&(Lt.knightLShape=t[0].drawTools.settings.knightLShape),t[0].drawTools.settings.onlyChessMove!==void 0&&(Lt.onlyChessMove=t[0].drawTools.settings.onlyChessMove),N=new Mr({props:Lt}),de.push(()=>ge(N,"enabled",Dn)),de.push(()=>ge(N,"knightLShape",Bn)),de.push(()=>ge(N,"onlyChessMove",Un));function zn(D){t[31](D)}function Hn(D){t[32](D)}let jt={};t[0].sounds.enabled!==void 0&&(jt.enabled=t[0].sounds.enabled),t[0].sounds.settings!==void 0&&(jt.settings=t[0].sounds.settings),ne=new yr({props:jt}),de.push(()=>ge(ne,"enabled",zn)),de.push(()=>ge(ne,"settings",Hn));let Vn={config:t[6]};return ie=new $a({props:Vn}),t[33](ie),Ye=new Lr({props:{copyText:t[4]}}),Ze=new li({props:{source:t[4],language:"svelte"}}),{c(){e=B("link"),s=te(),i=B("div"),a=B("div"),n=B("div"),ke(r.$$.fragment),k=te(),ke(w.$$.fragment),S=te(),ke(_.$$.fragment),Q=te(),ke(le.$$.fragment),fe=te(),ke(c.$$.fragment),b=te(),ke(A.$$.fragment),V=te(),ke(N.$$.fragment),z=te(),ke(ne.$$.fragment),Z=te(),re=B("div"),Ee=B("div"),ke(ie.$$.fragment),Pe=te(),Ie=B("div"),Ue=B("div"),Be=B("div"),Oe=B("button"),ze=B("span"),nt=me("ts"),et=te(),Qe=B("span"),Et=me("/"),Mt=te(),tt=B("span"),kt=me("js"),wt=te(),ke(Ye.$$.fragment),St=te(),ke(Ze.$$.fragment),this.h()},l(D){const he=ei("svelte-tebjht",document.head);e=U(he,"LINK",{rel:!0,href:!0}),he.forEach(E),s=se(D),i=U(D,"DIV",{class:!0});var je=j(i);a=U(je,"DIV",{class:!0});var at=j(a);n=U(at,"DIV",{class:!0});var Te=j(n);we(r.$$.fragment,Te),k=se(Te),we(w.$$.fragment,Te),S=se(Te),we(_.$$.fragment,Te),Q=se(Te),we(le.$$.fragment,Te),fe=se(Te),we(c.$$.fragment,Te),b=se(Te),we(A.$$.fragment,Te),V=se(Te),we(N.$$.fragment,Te),z=se(Te),we(ne.$$.fragment,Te),Te.forEach(E),Z=se(at),re=U(at,"DIV",{class:!0});var gt=j(re);Ee=U(gt,"DIV",{class:!0});var Ct=j(Ee);we(ie.$$.fragment,Ct),Ct.forEach(E),Pe=se(gt),Ie=U(gt,"DIV",{class:!0});var vt=j(Ie);Ue=U(vt,"DIV",{class:!0});var st=j(Ue);Be=U(st,"DIV",{class:!0});var rt=j(Be);Oe=U(rt,"BUTTON",{class:!0});var lt=j(Oe);ze=U(lt,"SPAN",{class:!0});var At=j(ze);nt=pe(At,"ts"),At.forEach(E),et=se(lt),Qe=U(lt,"SPAN",{class:!0});var Pt=j(Qe);Et=pe(Pt,"/"),Pt.forEach(E),Mt=se(lt),tt=U(lt,"SPAN",{class:!0});var rs=j(tt);kt=pe(rs,"js"),rs.forEach(E),lt.forEach(E),wt=se(rt),we(Ye.$$.fragment,rt),rt.forEach(E),St=se(st),we(Ze.$$.fragment,st),st.forEach(E),vt.forEach(E),gt.forEach(E),at.forEach(E),je.forEach(E),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",h(e,"rel","stylesheet"),h(e,"href","prism-one-dark.css"),h(n,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),h(Ee,"class","w-full lg:w-[var(--boardSize,50rem)]"),h(ze,"class",Ge=t[1]?"text-yellow-600":""),h(Qe,"class","text-gray-600"),h(tt,"class",mt=t[1]?"":"text-yellow-600"),h(Oe,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),h(Be,"class","absolute right-2 top-2 flex gap-4"),h(Ue,"class","shadow-lg rounded "),h(Ie,"class","row-start-2 relative"),h(re,"class","grid grid-rows-[min-content_auto] gap-10"),h(a,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),h(i,"class","my-10 grid grid-cols-center")},m(D,he){C(document.head,e),Y(D,s,he),Y(D,i,he),C(i,a),C(a,n),Se(r,n,null),C(n,k),Se(w,n,null),C(n,S),Se(_,n,null),C(n,Q),Se(le,n,null),C(n,fe),Se(c,n,null),C(n,b),Se(A,n,null),C(n,V),Se(N,n,null),C(n,z),Se(ne,n,null),C(a,Z),C(a,re),C(re,Ee),Se(ie,Ee,null),C(re,Pe),C(re,Ie),C(Ie,Ue),C(Ue,Be),C(Be,Oe),C(Oe,ze),C(ze,nt),C(Oe,et),C(Oe,Qe),C(Qe,Et),C(Oe,Mt),C(Oe,tt),C(tt,kt),C(Be,wt),Se(Ye,Be,null),C(Ue,St),Se(Ze,Ue,null),it=!0,yt||(Tt=ce(Oe,"click",t[34]),yt=!0)},p(D,he){const je={};!l&&he[0]&1&&(l=!0,je.boardTheme=D[0].board.boardTheme,be(()=>l=!1)),!o&&he[0]&1&&(o=!0,je.mouseEvents=D[0].board.mouseEvents,be(()=>o=!1)),!u&&he[0]&1&&(u=!0,je.notation=D[0].board.notation,be(()=>u=!1)),!m&&he[0]&1&&(m=!0,je.flipped=D[0].board.flipped,be(()=>m=!1)),!d&&he[0]&1&&(d=!0,je.shadow=D[0].board.style.shadow,be(()=>d=!1)),!g&&he[0]&1&&(g=!0,je.borderRadius=D[0].board.style.borderRadius,be(()=>g=!1)),!y&&he[0]&1&&(y=!0,je.resizible=D[0].board.resizible.enabled,be(()=>y=!1)),!T&&he[0]&1&&(T=!0,je.min=D[0].board.resizible.min,be(()=>T=!1)),!q&&he[0]&1&&(q=!0,je.max=D[0].board.resizible.max,be(()=>q=!1)),r.$set(je);const at={};!f&&he[0]&1&&(f=!0,at.enabled=D[0].movable.enabled,be(()=>f=!1)),!p&&he[0]&1&&(p=!0,at.color=D[0].movable.color,be(()=>p=!1)),w.$set(at);const Te={};!P&&he[0]&1&&(P=!0,Te.enabled=D[0].draggable.enabled,be(()=>P=!1)),!K&&he[0]&1&&(K=!0,Te.ghostPiece=D[0].draggable.ghostPiece.enabled,be(()=>K=!1)),!G&&he[0]&1&&(G=!0,Te.transition=D[0].draggable.transition.enabled,be(()=>G=!1)),!W&&he[0]&1&&(W=!0,Te.duration=D[0].draggable.transition.settings.duration,be(()=>W=!1)),!O&&he[0]&1&&(O=!0,Te.easing=D[0].draggable.transition.settings.easing,be(()=>O=!1)),_.$set(Te);const gt={};!ve&&he[0]&1&&(ve=!0,gt.enabled=D[0].selectable.enabled,be(()=>ve=!1)),le.$set(gt);const Ct={};!v&&he[0]&1&&(v=!0,Ct.enabled=D[0].legal.enabled,be(()=>v=!1)),c.$set(Ct);const vt={};!F&&he[0]&1&&(F=!0,vt.enabled=D[0].highlight.enabled,be(()=>F=!1)),!I&&he[0]&1&&(I=!0,vt.settings=D[0].highlight.settings,be(()=>I=!1)),A.$set(vt);const st={};!x&&he[0]&1&&(x=!0,st.enabled=D[0].drawTools.enabled,be(()=>x=!1)),!oe&&he[0]&1&&(oe=!0,st.knightLShape=D[0].drawTools.settings.knightLShape,be(()=>oe=!1)),!L&&he[0]&1&&(L=!0,st.onlyChessMove=D[0].drawTools.settings.onlyChessMove,be(()=>L=!1)),N.$set(st);const rt={};!X&&he[0]&1&&(X=!0,rt.enabled=D[0].sounds.enabled,be(()=>X=!1)),!R&&he[0]&1&&(R=!0,rt.settings=D[0].sounds.settings,be(()=>R=!1)),ne.$set(rt);const lt={};ie.$set(lt),(!it||he[0]&2&&Ge!==(Ge=D[1]?"text-yellow-600":""))&&h(ze,"class",Ge),(!it||he[0]&2&&mt!==(mt=D[1]?"":"text-yellow-600"))&&h(tt,"class",mt);const At={};he[0]&16&&(At.copyText=D[4]),Ye.$set(At);const Pt={};he[0]&16&&(Pt.source=D[4]),Ze.$set(Pt)},i(D){it||(J(r.$$.fragment,D),J(w.$$.fragment,D),J(_.$$.fragment,D),J(le.$$.fragment,D),J(c.$$.fragment,D),J(A.$$.fragment,D),J(N.$$.fragment,D),J(ne.$$.fragment,D),J(ie.$$.fragment,D),J(Ye.$$.fragment,D),J(Ze.$$.fragment,D),it=!0)},o(D){ae(r.$$.fragment,D),ae(w.$$.fragment,D),ae(_.$$.fragment,D),ae(le.$$.fragment,D),ae(c.$$.fragment,D),ae(A.$$.fragment,D),ae(N.$$.fragment,D),ae(ne.$$.fragment,D),ae(ie.$$.fragment,D),ae(Ye.$$.fragment,D),ae(Ze.$$.fragment,D),it=!1},d(D){E(e),D&&E(s),D&&E(i),ye(r),ye(w),ye(_),ye(le),ye(c),ye(A),ye(N),ye(ne),t[33](null),ye(ie),ye(Ye),ye(Ze),yt=!1,Tt()}}}function Rr(t,e,s){const i=new Mn.Chess,a={movable:_e.BOTH,legal:!0,callbacks:{afterMove:L=>i.move({from:L.substring(0,2),to:L.substring(2,4),...L.length>4&&{promotion:L[4]}}),getLegalMoves:()=>i.moves({verbose:!0}).map(L=>{var z;return L.from+L.to+((z=L.promotion)!=null?z:"")}),getWhiteToMove:()=>i.turn()==="w",getInCheck:()=>i.inCheck(),getLastMove:()=>{var z;const L=i.history({verbose:!0}).pop();return L?L.from+L.to+((z=L.promotion)!=null?z:""):""}},board:{style:{shadow:!0,borderRadius:"0.25rem"},resizible:!0}},n=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,r=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let l,o=new kn(a),u=!1,m=!0,d="";es(()=>{s(3,u=!0),s(0,o=l.getState())});const g=(L,z)=>{const ne=L.getConfig(),X=`
	import type { ChessboardConfig } from '@powchess/chessboard/boardConfig';`;u&&l.setState(L);let R=JSON.stringify(ne,(ie,Pe)=>ie==="callbacks"?"{functions}":Pe,4);R=R.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',z?n:r);const Z=`
	import { Color } from '@powchess/chessboard/enums';`;z&&(R=R.replaceAll(`movable: ${_e.WHITE}`,"movable: Color.WHITE").replaceAll(`movable: ${_e.BLACK}`,"movable: Color.BLACK").replaceAll(`movable: ${_e.BOTH}`,"movable: Color.BOTH"));function re(){return R.includes("movable: Color.WHITE")||R.includes("movable: Color.BLACK")||R.includes("movable: Color.BOTH")}let Ee=`<script${z?' lang="ts"':""}>
	import Chessboard from '@powchess/chessboard';${z?X:""}${re()&&z?Z:""}${o.legal.enabled?z?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${z?": ChessboardConfig":""} = ${R};
<\/script>

<Chessboard {config} />`;return z||(Ee=Ee.replaceAll("Color.WHITE",`${_e.WHITE}`).replaceAll("Color.BLACK",`${_e.BLACK}`).replaceAll("Color.BOTH",`${_e.BOTH}`)),Ee};function y(L){t.$$.not_equal(o.board.boardTheme,L)&&(o.board.boardTheme=L,s(0,o))}function T(L){t.$$.not_equal(o.board.mouseEvents,L)&&(o.board.mouseEvents=L,s(0,o))}function q(L){t.$$.not_equal(o.board.notation,L)&&(o.board.notation=L,s(0,o))}function k(L){t.$$.not_equal(o.board.flipped,L)&&(o.board.flipped=L,s(0,o))}function w(L){t.$$.not_equal(o.board.style.shadow,L)&&(o.board.style.shadow=L,s(0,o))}function f(L){t.$$.not_equal(o.board.style.borderRadius,L)&&(o.board.style.borderRadius=L,s(0,o))}function p(L){t.$$.not_equal(o.board.resizible.enabled,L)&&(o.board.resizible.enabled=L,s(0,o))}function S(L){t.$$.not_equal(o.board.resizible.min,L)&&(o.board.resizible.min=L,s(0,o))}function _(L){t.$$.not_equal(o.board.resizible.max,L)&&(o.board.resizible.max=L,s(0,o))}function P(L){t.$$.not_equal(o.movable.enabled,L)&&(o.movable.enabled=L,s(0,o))}function K(L){t.$$.not_equal(o.movable.color,L)&&(o.movable.color=L,s(0,o))}function G(L){t.$$.not_equal(o.draggable.enabled,L)&&(o.draggable.enabled=L,s(0,o))}function W(L){t.$$.not_equal(o.draggable.ghostPiece.enabled,L)&&(o.draggable.ghostPiece.enabled=L,s(0,o))}function O(L){t.$$.not_equal(o.draggable.transition.enabled,L)&&(o.draggable.transition.enabled=L,s(0,o))}function Q(L){t.$$.not_equal(o.draggable.transition.settings.duration,L)&&(o.draggable.transition.settings.duration=L,s(0,o))}function le(L){t.$$.not_equal(o.draggable.transition.settings.easing,L)&&(o.draggable.transition.settings.easing=L,s(0,o))}function ve(L){t.$$.not_equal(o.selectable.enabled,L)&&(o.selectable.enabled=L,s(0,o))}function fe(L){t.$$.not_equal(o.legal.enabled,L)&&(o.legal.enabled=L,s(0,o))}const c=()=>{o.legal.enabled||(i.reset(),u&&l.setFEN(o.board.startFen,!0,!1))};function v(L){t.$$.not_equal(o.highlight.enabled,L)&&(o.highlight.enabled=L,s(0,o))}function b(L){t.$$.not_equal(o.highlight.settings,L)&&(o.highlight.settings=L,s(0,o))}function A(L){t.$$.not_equal(o.drawTools.enabled,L)&&(o.drawTools.enabled=L,s(0,o))}function F(L){t.$$.not_equal(o.drawTools.settings.knightLShape,L)&&(o.drawTools.settings.knightLShape=L,s(0,o))}function I(L){t.$$.not_equal(o.drawTools.settings.onlyChessMove,L)&&(o.drawTools.settings.onlyChessMove=L,s(0,o))}function V(L){t.$$.not_equal(o.sounds.enabled,L)&&(o.sounds.enabled=L,s(0,o))}function N(L){t.$$.not_equal(o.sounds.settings,L)&&(o.sounds.settings=L,s(0,o))}function x(L){de[L?"unshift":"push"](()=>{l=L,s(2,l)})}const oe=()=>{s(1,m=!m)};return t.$$.update=()=>{t.$$.dirty[0]&3&&s(4,d=g(o,m))},[o,m,l,u,d,i,a,y,T,q,k,w,f,p,S,_,P,K,G,W,O,Q,le,ve,fe,c,v,b,A,F,I,V,N,x,oe]}class Ur extends qe{constructor(e){super(),Re(this,e,Rr,qr,Ne,{},null,[-1,-1])}}export{Ur as default};
