var Ln=Object.defineProperty;var On=(t,e,s)=>e in t?Ln(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var D=(t,e,s)=>(On(t,typeof e!="symbol"?e+"":e,s),s);import{S as Te,i as Le,s as Oe,C as fn,k as z,a as te,l as V,m as W,h as C,c as se,p as Fe,n as v,b as X,G as I,D as cn,E as dn,F as hn,f as Z,t as ee,I as Lt,J as us,K as oe,L as In,e as Ae,M as qn,q as we,r as Ce,u as Nt,N as ut,O as Fn,B as Pe,P as at,Q as gn,R as Nn,T as Rn,U as fs,V as is,W as ce,X as as,Y as rt,Z as St,H as Dn,o as Rt,_ as je,$ as Ne,a0 as Re,g as De,d as Be,a1 as Bn,a2 as Un,a3 as be,w as ve,x as _e,y as Ee,a4 as pe,z as Me,a5 as Dt,a6 as cs,a7 as bn,a8 as ds,a9 as Hn,aa as pn,A as zn,ab as mn,ac as Ot,ad as ht,ae as rs,af as vn,ag as hs,ah as Vn}from"../../chunks/index-e8cb9686.js";import{w as Kn}from"../../chunks/index-2b094520.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_n={exports:{}};(function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var s=function(i){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,n={},l={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function g(h){return h instanceof o?new o(h.type,g(h.content),h.alias):Array.isArray(h)?h.map(g):h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(g){return Object.prototype.toString.call(g).slice(8,-1)},objId:function(g){return g.__id||Object.defineProperty(g,"__id",{value:++r}),g.__id},clone:function g(h,y){y=y||{};var T,L;switch(l.util.type(h)){case"Object":if(L=l.util.objId(h),y[L])return y[L];T={},y[L]=T;for(var R in h)h.hasOwnProperty(R)&&(T[R]=g(h[R],y));return T;case"Array":return L=l.util.objId(h),y[L]?y[L]:(T=[],y[L]=T,h.forEach(function(H,B){T[B]=g(H,y)}),T);default:return h}},getLanguage:function(g){for(;g;){var h=a.exec(g.className);if(h)return h[1].toLowerCase();g=g.parentElement}return"none"},setLanguage:function(g,h){g.className=g.className.replace(RegExp(a,"gi"),""),g.classList.add("language-"+h)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(T){var g=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(T.stack)||[])[1];if(g){var h=document.getElementsByTagName("script");for(var y in h)if(h[y].src==g)return h[y]}return null}},isActive:function(g,h,y){for(var T="no-"+h;g;){var L=g.classList;if(L.contains(h))return!0;if(L.contains(T))return!1;g=g.parentElement}return!!y}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(g,h){var y=l.util.clone(l.languages[g]);for(var T in h)y[T]=h[T];return y},insertBefore:function(g,h,y,T){T=T||l.languages;var L=T[g],R={};for(var H in L)if(L.hasOwnProperty(H)){if(H==h)for(var B in y)y.hasOwnProperty(B)&&(R[B]=y[B]);y.hasOwnProperty(H)||(R[H]=L[H])}var N=T[g];return T[g]=R,l.languages.DFS(l.languages,function(Q,ne){ne===N&&Q!=g&&(this[Q]=R)}),R},DFS:function g(h,y,T,L){L=L||{};var R=l.util.objId;for(var H in h)if(h.hasOwnProperty(H)){y.call(h,H,h[H],T||H);var B=h[H],N=l.util.type(B);N==="Object"&&!L[R(B)]?(L[R(B)]=!0,g(B,y,null,L)):N==="Array"&&!L[R(B)]&&(L[R(B)]=!0,g(B,y,H,L))}}},plugins:{},highlightAll:function(g,h){l.highlightAllUnder(document,g,h)},highlightAllUnder:function(g,h,y){var T={callback:y,container:g,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",T),T.elements=Array.prototype.slice.apply(T.container.querySelectorAll(T.selector)),l.hooks.run("before-all-elements-highlight",T);for(var L=0,R;R=T.elements[L++];)l.highlightElement(R,h===!0,T.callback)},highlightElement:function(g,h,y){var T=l.util.getLanguage(g),L=l.languages[T];l.util.setLanguage(g,T);var R=g.parentElement;R&&R.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(R,T);var H=g.textContent,B={element:g,language:T,grammar:L,code:H};function N(ne){B.highlightedCode=ne,l.hooks.run("before-insert",B),B.element.innerHTML=B.highlightedCode,l.hooks.run("after-highlight",B),l.hooks.run("complete",B),y&&y.call(B.element)}if(l.hooks.run("before-sanity-check",B),R=B.element.parentElement,R&&R.nodeName.toLowerCase()==="pre"&&!R.hasAttribute("tabindex")&&R.setAttribute("tabindex","0"),!B.code){l.hooks.run("complete",B),y&&y.call(B.element);return}if(l.hooks.run("before-highlight",B),!B.grammar){N(l.util.encode(B.code));return}if(h&&i.Worker){var Q=new Worker(l.filename);Q.onmessage=function(ne){N(ne.data)},Q.postMessage(JSON.stringify({language:B.language,code:B.code,immediateClose:!0}))}else N(l.highlight(B.code,B.grammar,B.language))},highlight:function(g,h,y){var T={code:g,grammar:h,language:y};if(l.hooks.run("before-tokenize",T),!T.grammar)throw new Error('The language "'+T.language+'" has no grammar.');return T.tokens=l.tokenize(T.code,T.grammar),l.hooks.run("after-tokenize",T),o.stringify(l.util.encode(T.tokens),T.language)},tokenize:function(g,h){var y=h.rest;if(y){for(var T in y)h[T]=y[T];delete h.rest}var L=new f;return b(L,L.head,g),c(g,L,h,L.head,0),F(L)},hooks:{all:{},add:function(g,h){var y=l.hooks.all;y[g]=y[g]||[],y[g].push(h)},run:function(g,h){var y=l.hooks.all[g];if(!(!y||!y.length))for(var T=0,L;L=y[T++];)L(h)}},Token:o};i.Prism=l;function o(g,h,y,T){this.type=g,this.content=h,this.alias=y,this.length=(T||"").length|0}o.stringify=function g(h,y){if(typeof h=="string")return h;if(Array.isArray(h)){var T="";return h.forEach(function(N){T+=g(N,y)}),T}var L={type:h.type,content:g(h.content,y),tag:"span",classes:["token",h.type],attributes:{},language:y},R=h.alias;R&&(Array.isArray(R)?Array.prototype.push.apply(L.classes,R):L.classes.push(R)),l.hooks.run("wrap",L);var H="";for(var B in L.attributes)H+=" "+B+'="'+(L.attributes[B]||"").replace(/"/g,"&quot;")+'"';return"<"+L.tag+' class="'+L.classes.join(" ")+'"'+H+">"+L.content+"</"+L.tag+">"};function u(g,h,y,T){g.lastIndex=h;var L=g.exec(y);if(L&&T&&L[1]){var R=L[1].length;L.index+=R,L[0]=L[0].slice(R)}return L}function c(g,h,y,T,L,R){for(var H in y)if(!(!y.hasOwnProperty(H)||!y[H])){var B=y[H];B=Array.isArray(B)?B:[B];for(var N=0;N<B.length;++N){if(R&&R.cause==H+","+N)return;var Q=B[N],ne=Q.inside,Se=!!Q.lookbehind,x=!!Q.greedy,d=Q.alias;if(x&&!Q.pattern.global){var k=Q.pattern.toString().match(/[imsuy]*$/)[0];Q.pattern=RegExp(Q.pattern.source,k+"g")}for(var S=Q.pattern||Q,M=T.next,m=L;M!==h.tail&&!(R&&m>=R.reach);m+=M.value.length,M=M.next){var q=M.value;if(h.length>g.length)return;if(!(q instanceof o)){var E=1,_;if(x){if(_=u(S,m,g,Se),!_||_.index>=g.length)break;var j=_.index,G=_.index+_[0].length,$=m;for($+=M.value.length;j>=$;)M=M.next,$+=M.value.length;if($-=M.value.length,m=$,M.value instanceof o)continue;for(var ae=M;ae!==h.tail&&($<G||typeof ae.value=="string");ae=ae.next)E++,$+=ae.value.length;E--,q=g.slice(m,$),_.index-=m}else if(_=u(S,0,q,Se),!_)continue;var j=_.index,fe=_[0],Y=q.slice(0,j),ie=q.slice(j+fe.length),ue=m+q.length;R&&ue>R.reach&&(R.reach=ue);var me=M.prev;Y&&(me=b(h,me,Y),m+=Y.length),w(h,me,E);var Ie=new o(H,ne?l.tokenize(fe,ne):fe,d,fe);if(M=b(h,me,Ie),ie&&b(h,M,ie),E>1){var le={cause:H+","+N,reach:ue};c(g,h,y,M.prev,m,le),R&&le.reach>R.reach&&(R.reach=le.reach)}}}}}}function f(){var g={value:null,prev:null,next:null},h={value:null,prev:g,next:null};g.next=h,this.head=g,this.tail=h,this.length=0}function b(g,h,y){var T=h.next,L={value:y,prev:h,next:T};return h.next=L,T.prev=L,g.length++,L}function w(g,h,y){for(var T=h.next,L=0;L<y&&T!==g.tail;L++)T=T.next;h.next=T,T.prev=h,g.length-=L}function F(g){for(var h=[],y=g.head.next;y!==g.tail;)h.push(y.value),y=y.next;return h}if(!i.document)return i.addEventListener&&(l.disableWorkerMessageHandler||i.addEventListener("message",function(g){var h=JSON.parse(g.data),y=h.language,T=h.code,L=h.immediateClose;i.postMessage(l.highlight(T,l.languages[y],y)),L&&i.close()},!1)),l;var P=l.util.currentScript();P&&(l.filename=P.src,P.hasAttribute("data-manual")&&(l.manual=!0));function A(){l.manual||l.highlightAll()}if(!l.manual){var O=document.readyState;O==="loading"||O==="interactive"&&P&&P.defer?document.addEventListener("DOMContentLoaded",A):window.requestAnimationFrame?window.requestAnimationFrame(A):window.setTimeout(A,16)}return l}(e);t.exports&&(t.exports=s),typeof gs<"u"&&(gs.Prism=s),s.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},s.languages.markup.tag.inside["attr-value"].inside.entity=s.languages.markup.entity,s.languages.markup.doctype.inside["internal-subset"].inside=s.languages.markup,s.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(s.languages.markup.tag,"addInlined",{value:function(a,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:s.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};l["language-"+r]={pattern:/[\s\S]+/,inside:s.languages[r]};var o={};o[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:l},s.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(s.languages.markup.tag,"addAttribute",{value:function(i,a){s.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:s.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),s.languages.html=s.languages.markup,s.languages.mathml=s.languages.markup,s.languages.svg=s.languages.markup,s.languages.xml=s.languages.extend("markup",{}),s.languages.ssml=s.languages.xml,s.languages.atom=s.languages.xml,s.languages.rss=s.languages.xml,function(i){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var r=i.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(s),s.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},s.languages.javascript=s.languages.extend("clike",{"class-name":[s.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),s.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,s.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:s.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:s.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:s.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:s.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:s.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),s.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:s.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),s.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),s.languages.markup&&(s.languages.markup.tag.addInlined("script","javascript"),s.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),s.languages.js=s.languages.javascript,function(){if(typeof s>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading\u2026",a=function(P,A){return"\u2716 Error "+P+" while fetching file: "+A},r="\u2716 Error: File does not exist or is empty",n={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",c="failed",f="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function b(P,A,O){var g=new XMLHttpRequest;g.open("GET",P,!0),g.onreadystatechange=function(){g.readyState==4&&(g.status<400&&g.responseText?A(g.responseText):g.status>=400?O(a(g.status,g.statusText)):O(r))},g.send(null)}function w(P){var A=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(P||"");if(A){var O=Number(A[1]),g=A[2],h=A[3];return g?h?[O,Number(h)]:[O,void 0]:[O,O]}}s.hooks.add("before-highlightall",function(P){P.selector+=", "+f}),s.hooks.add("before-sanity-check",function(P){var A=P.element;if(A.matches(f)){P.code="",A.setAttribute(l,o);var O=A.appendChild(document.createElement("CODE"));O.textContent=i;var g=A.getAttribute("data-src"),h=P.language;if(h==="none"){var y=(/\.(\w+)$/.exec(g)||[,"none"])[1];h=n[y]||y}s.util.setLanguage(O,h),s.util.setLanguage(A,h);var T=s.plugins.autoloader;T&&T.loadLanguages(h),b(g,function(L){A.setAttribute(l,u);var R=w(A.getAttribute("data-range"));if(R){var H=L.split(/\r\n?|\n/g),B=R[0],N=R[1]==null?H.length:R[1];B<0&&(B+=H.length),B=Math.max(0,Math.min(B-1,H.length)),N<0&&(N+=H.length),N=Math.max(0,Math.min(N,H.length)),L=H.slice(B,N).join(`
`),A.hasAttribute("data-start")||A.setAttribute("data-start",String(B+1))}O.textContent=L,s.highlightElement(O)},function(L){A.setAttribute(l,c),O.textContent=L})}}),s.plugins.fileHighlight={highlight:function(A){for(var O=(A||document).querySelectorAll(f),g=0,h;h=O[g++];)s.highlightElement(h)}};var F=!1;s.fileHighlight=function(){F||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),F=!0),s.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(_n);const En=_n.exports,bs="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+bs+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+bs+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",t=>{t.type==="entity"&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,s){const i={};i["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[s]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;const a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};a["language-"+s]={pattern:/[\s\S]+/,inside:Prism.languages[s]};const r={};r[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:a},Prism.languages.insertBefore("svelte","cdata",r)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function Wn(t){let e,s;return{c(){e=new In(!1),s=Ae(),this.h()},l(i){e=qn(i,!1),s=Ae(),this.h()},h(){e.a=s},m(i,a){e.m(t[2],i,a),X(i,s,a)},p(i,a){a&4&&e.p(i[2])},d(i){i&&C(s),i&&e.d()}}}function jn(t){let e;return{c(){e=we(t[2])},l(s){e=Ce(s,t[2])},m(s,i){X(s,e,i)},p(s,i){i&4&&Nt(e,s[2])},d(s){s&&C(e)}}}function Gn(t){let e,s,i,a,r,n,l;const o=t[6].default,u=fn(o,t,t[5],null);function c(w,F){return w[0]==="none"?jn:Wn}let f=c(t),b=f(t);return{c(){e=z("code"),u&&u.c(),s=te(),i=z("pre"),a=z("code"),b.c(),this.h()},l(w){e=V(w,"CODE",{style:!0});var F=W(e);u&&u.l(F),F.forEach(C),s=se(w),i=V(w,"PRE",{class:!0,"command-line":!0,"data-output":!0});var P=W(i);a=V(P,"CODE",{class:!0});var A=W(a);b.l(A),A.forEach(C),P.forEach(C),this.h()},h(){Fe(e,"display","none"),v(a,"class",r="language-"+t[0]),v(i,"class",n="language-"+t[0]),v(i,"command-line",""),v(i,"data-output","2-17")},m(w,F){X(w,e,F),u&&u.m(e,null),t[7](e),X(w,s,F),X(w,i,F),I(i,a),b.m(a,null),l=!0},p(w,[F]){u&&u.p&&(!l||F&32)&&cn(u,o,w,w[5],l?hn(o,w[5],F,null):dn(w[5]),null),f===(f=c(w))&&b?b.p(w,F):(b.d(1),b=f(w),b&&(b.c(),b.m(a,null))),(!l||F&1&&r!==(r="language-"+w[0]))&&v(a,"class",r),(!l||F&1&&n!==(n="language-"+w[0]))&&v(i,"class",n)},i(w){l||(Z(u,w),l=!0)},o(w){ee(u,w),l=!1},d(w){w&&C(e),u&&u.d(w),t[7](null),w&&C(s),w&&C(i),b.d()}}}const ps=En;En.highlightElement;const Qn={transform:t=>t};function Xn(t,e,s){let{$$slots:i={},$$scope:a}=e,{language:r="javascript"}=e,{source:n=""}=e,{transform:l=b=>b}=e,o,u;function c(){const b=ps.languages[r];let w=n||o.textContent;w=Qn.transform(w),w=l(w),s(2,u=r==="none"?w:ps.highlight(w,b,r))}function f(b){oe[b?"unshift":"push"](()=>{o=b,s(1,o)})}return t.$$set=b=>{s(9,e=Lt(Lt({},e),us(b))),"language"in b&&s(0,r=b.language),"source"in b&&s(3,n=b.source),"transform"in b&&s(4,l=b.transform),"$$scope"in b&&s(5,a=b.$$scope)},t.$$.update=()=>{e&&(n||o)&&c()},e=us(e),[r,o,u,n,l,a,i,f]}class Yn extends Te{constructor(e){super(),Le(this,e,Xn,Gn,Oe,{language:0,source:3,transform:4})}}var Mn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Chess=t.validateFen=t.SQUARES=t.DEFAULT_POSITION=t.KING=t.QUEEN=t.ROOK=t.BISHOP=t.KNIGHT=t.PAWN=t.BLACK=t.WHITE=void 0,t.WHITE="w",t.BLACK="b",t.PAWN="p",t.KNIGHT="n",t.BISHOP="b",t.ROOK="r",t.QUEEN="q",t.KING="k",t.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";const e=-1,s={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"};t.SQUARES=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"];const i={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},a={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},r={b:[16,32,17,15],w:[-16,-32,-17,-15]},n={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},l=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],o=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],u={p:1,n:2,b:4,r:8,q:16,k:32},c="pnbrqkPNBRQK",f=[t.KNIGHT,t.BISHOP,t.ROOK,t.QUEEN],b=7,w=6,F=1,P=0,A={w:[{square:a.a1,flag:i.QSIDE_CASTLE},{square:a.h1,flag:i.KSIDE_CASTLE}],b:[{square:a.a8,flag:i.QSIDE_CASTLE},{square:a.h8,flag:i.KSIDE_CASTLE}]},O={b:F,w},g=["1-0","0-1","1/2-1/2","*"];function h(x){return x>>4}function y(x){return x&15}function T(x){return"0123456789".indexOf(x)!==-1}function L(x){const d=y(x),k=h(x);return"abcdefgh".substring(d,d+1)+"87654321".substring(k,k+1)}function R(x){return x===t.WHITE?t.BLACK:t.WHITE}function H(x){const d=[];d[0]="No errors.",d[1]="FEN string must contain six space-delimited fields.",d[2]="6th field (move number) must be a positive integer.",d[3]="5th field (half move counter) must be a non-negative integer.",d[4]="4th field (en-passant square) is invalid.",d[5]="3rd field (castling availability) is invalid.",d[6]="2nd field (side to move) is invalid.",d[7]="1st field (piece positions) does not contain 8 '/'-delimited rows.",d[8]="1st field (piece positions) is invalid [consecutive numbers].",d[9]="1st field (piece positions) is invalid [invalid piece].",d[10]="1st field (piece positions) is invalid [row too large].",d[11]="Illegal en-passant square";const k=x.split(/\s+/);if(k.length!==6)return{valid:!1,errorNumber:1,error:d[1]};const S=parseInt(k[5],10);if(isNaN(S)||S<=0)return{valid:!1,errorNumber:2,error:d[2]};const M=parseInt(k[4],10);if(isNaN(M)||M<0)return{valid:!1,errorNumber:3,error:d[3]};if(!/^(-|[abcdefgh][36])$/.test(k[3]))return{valid:!1,errorNumber:4,error:d[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(k[2]))return{valid:!1,errorNumber:5,error:d[5]};if(!/^(w|b)$/.test(k[1]))return{valid:!1,errorNumber:6,error:d[6]};const m=k[0].split("/");if(m.length!==8)return{valid:!1,errorNumber:7,error:d[7]};for(let q=0;q<m.length;q++){let E=0,_=!1;for(let G=0;G<m[q].length;G++)if(T(m[q][G])){if(_)return{valid:!1,errorNumber:8,error:d[8]};E+=parseInt(m[q][G],10),_=!0}else{if(!/^[prnbqkPRNBQK]$/.test(m[q][G]))return{valid:!1,errorNumber:9,error:d[9]};E+=1,_=!1}if(E!==8)return{valid:!1,errorNumber:10,error:d[10]}}return k[3][1]=="3"&&k[1]=="w"||k[3][1]=="6"&&k[1]=="b"?{valid:!1,errorNumber:11,error:d[11]}:{valid:!0,errorNumber:0,error:d[0]}}t.validateFen=H;function B(x,d){const k=x.from,S=x.to,M=x.piece;let m=0,q=0,E=0;for(let _=0,G=d.length;_<G;_++){const $=d[_].from,ae=d[_].to,j=d[_].piece;M===j&&k!==$&&S===ae&&(m++,h(k)===h($)&&q++,y(k)===y($)&&E++)}return m>0?q>0&&E>0?L(k):E>0?L(k).charAt(1):L(k).charAt(0):""}function N(x,d,k,S,M,m=void 0,q=i.NORMAL){const E=h(S);if(M===t.PAWN&&(E===b||E===P))for(let _=0;_<f.length;_++){const G=f[_];x.push({color:d,from:k,to:S,piece:M,captured:m,promotion:G,flags:q|i.PROMOTION})}else x.push({color:d,from:k,to:S,piece:M,captured:m,promotion:void 0,flags:q})}function Q(x){let d=x.charAt(0);return d>="a"&&d<="h"?x.match(/[a-h]\d.*[a-h]\d/)?void 0:t.PAWN:(d=d.toLowerCase(),d==="o"?t.KING:d)}function ne(x){return x.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Se{constructor(d=t.DEFAULT_POSITION){this._board=new Array(128),this._turn=t.WHITE,this._header={},this._kings={w:e,b:e},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(d)}clear(d=!1){this._board=new Array(128),this._kings={w:e,b:e},this._turn=t.WHITE,this._castling={w:0,b:0},this._epSquare=e,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=d?this._header:{},this._updateSetup(this.fen())}load(d,k=!1){const S=d.split(/\s+/),M=S[0];let m=0;if(!H(d).valid)return!1;this.clear(k);for(let q=0;q<M.length;q++){const E=M.charAt(q);if(E==="/")m+=8;else if(T(E))m+=parseInt(E,10);else{const _=E<"a"?t.WHITE:t.BLACK;this.put({type:E.toLowerCase(),color:_},L(m)),m++}}return this._turn=S[1],S[2].indexOf("K")>-1&&(this._castling.w|=i.KSIDE_CASTLE),S[2].indexOf("Q")>-1&&(this._castling.w|=i.QSIDE_CASTLE),S[2].indexOf("k")>-1&&(this._castling.b|=i.KSIDE_CASTLE),S[2].indexOf("q")>-1&&(this._castling.b|=i.QSIDE_CASTLE),this._epSquare=S[3]==="-"?e:a[S[3]],this._halfMoves=parseInt(S[4],10),this._moveNumber=parseInt(S[5],10),this._updateSetup(this.fen()),!0}fen(){let d=0,k="";for(let m=a.a8;m<=a.h1;m++){if(this._board[m]){d>0&&(k+=d,d=0);const{color:q,type:E}=this._board[m];k+=q===t.WHITE?E.toUpperCase():E.toLowerCase()}else d++;m+1&136&&(d>0&&(k+=d),m!==a.h1&&(k+="/"),d=0,m+=8)}let S="";this._castling[t.WHITE]&i.KSIDE_CASTLE&&(S+="K"),this._castling[t.WHITE]&i.QSIDE_CASTLE&&(S+="Q"),this._castling[t.BLACK]&i.KSIDE_CASTLE&&(S+="k"),this._castling[t.BLACK]&i.QSIDE_CASTLE&&(S+="q"),S=S||"-";const M=this._epSquare===e?"-":L(this._epSquare);return[k,this._turn,S,M,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(d){this._history.length>0||(d!==t.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=d):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(t.DEFAULT_POSITION)}get(d){return this._board[a[d]]||!1}put({type:d,color:k},S){if(c.indexOf(d.toLowerCase())===-1||!(S in a))return!1;const M=a[S];return d==t.KING&&!(this._kings[k]==e||this._kings[k]==M)?!1:(this._board[M]={type:d,color:k},d===t.KING&&(this._kings[k]=M),this._updateSetup(this.fen()),!0)}remove(d){const k=this.get(d);return delete this._board[a[d]],k&&k.type===t.KING&&(this._kings[k.color]=e),this._updateSetup(this.fen()),k}_attacked(d,k){for(let S=a.a8;S<=a.h1;S++){if(S&136){S+=7;continue}if(this._board[S]===void 0||this._board[S].color!==d)continue;const M=this._board[S],m=S-k,q=m+119;if(l[q]&u[M.type]){if(M.type===t.PAWN){if(m>0){if(M.color===t.WHITE)return!0}else if(M.color===t.BLACK)return!0;continue}if(M.type==="n"||M.type==="k")return!0;const E=o[q];let _=S+E,G=!1;for(;_!==k;){if(this._board[_]!=null){G=!0;break}_+=E}if(!G)return!0}}return!1}_isKingAttacked(d){return this._attacked(R(d),this._kings[d])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const d={b:0,n:0,r:0,q:0,k:0,p:0},k=[];let S=0,M=0;for(let m=a.a8;m<=a.h1;m++){if(M=(M+1)%2,m&136){m+=7;continue}const q=this._board[m];q&&(d[q.type]=q.type in d?d[q.type]+1:1,q.type===t.BISHOP&&k.push(M),S++)}if(S===2)return!0;if(S===3&&(d[t.BISHOP]===1||d[t.KNIGHT]===1))return!0;if(S===d[t.BISHOP]+2){let m=0;const q=k.length;for(let E=0;E<q;E++)m+=k[E];if(m===0||m===q)return!0}return!1}isThreefoldRepetition(){const d=[],k={};let S=!1;for(;;){const M=this._undoMove();if(!M)break;d.push(M)}for(;;){const M=this.fen().split(" ").slice(0,4).join(" ");k[M]=M in k?k[M]+1:1,k[M]>=3&&(S=!0);const m=d.pop();if(m)this._makeMove(m);else break}return S}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:d=!1,square:k=void 0}={}){const S=this._moves({square:k});return d?S.map(M=>this._makePretty(M)):S.map(M=>this._moveToSan(M,S))}_moves({legal:d=!0,piece:k=void 0,square:S=void 0}={}){var M;const m=S?S.toLowerCase():void 0,q=k==null?void 0:k.toLowerCase(),E=[],_=this._turn,G=R(_);let $=a.a8,ae=a.h1,j=!1;if(m)if(m in a)$=ae=a[m],j=!0;else return[];for(let Y=$;Y<=ae;Y++){if(Y&136){Y+=7;continue}if(!this._board[Y]||this._board[Y].color===G)continue;const{type:ie}=this._board[Y];let ue;if(ie===t.PAWN){if(q&&q!==ie)continue;ue=Y+r[_][0],this._board[ue]||(N(E,_,Y,ue,t.PAWN),ue=Y+r[_][1],O[_]===h(Y)&&!this._board[ue]&&N(E,_,Y,ue,t.PAWN,void 0,i.BIG_PAWN));for(let me=2;me<4;me++)ue=Y+r[_][me],!(ue&136)&&(((M=this._board[ue])===null||M===void 0?void 0:M.color)===G?N(E,_,Y,ue,t.PAWN,this._board[ue].type,i.CAPTURE):ue===this._epSquare&&N(E,_,Y,ue,t.PAWN,t.PAWN,i.EP_CAPTURE))}else{if(q&&q!==ie)continue;for(let me=0,Ie=n[ie].length;me<Ie;me++){const le=n[ie][me];for(ue=Y;ue+=le,!(ue&136);){if(!this._board[ue])N(E,_,Y,ue,ie);else{if(this._board[ue].color===_)break;N(E,_,Y,ue,ie,this._board[ue].type,i.CAPTURE);break}if(ie===t.KNIGHT||ie===t.KING)break}}}}if((q===void 0||q===t.KING)&&(!j||ae===this._kings[_])){if(this._castling[_]&i.KSIDE_CASTLE){const Y=this._kings[_],ie=Y+2;!this._board[Y+1]&&!this._board[ie]&&!this._attacked(G,this._kings[_])&&!this._attacked(G,Y+1)&&!this._attacked(G,ie)&&N(E,_,this._kings[_],ie,t.KING,void 0,i.KSIDE_CASTLE)}if(this._castling[_]&i.QSIDE_CASTLE){const Y=this._kings[_],ie=Y-2;!this._board[Y-1]&&!this._board[Y-2]&&!this._board[Y-3]&&!this._attacked(G,this._kings[_])&&!this._attacked(G,Y-1)&&!this._attacked(G,ie)&&N(E,_,this._kings[_],ie,t.KING,void 0,i.QSIDE_CASTLE)}}if(!d)return E;const fe=[];for(let Y=0,ie=E.length;Y<ie;Y++)this._makeMove(E[Y]),this._isKingAttacked(_)||fe.push(E[Y]),this._undoMove();return fe}move(d,{sloppy:k=!1}={}){let S=null;if(typeof d=="string")S=this._moveFromSan(d,k);else if(typeof d=="object"){const m=this._moves();for(let q=0,E=m.length;q<E;q++)if(d.from===L(m[q].from)&&d.to===L(m[q].to)&&(!("promotion"in m[q])||d.promotion===m[q].promotion)){S=m[q];break}}if(!S)return null;const M=this._makePretty(S);return this._makeMove(S),M}_push(d){this._history.push({move:d,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(d){const k=this._turn,S=R(k);if(this._push(d),this._board[d.to]=this._board[d.from],delete this._board[d.from],d.flags&i.EP_CAPTURE&&(this._turn===t.BLACK?delete this._board[d.to-16]:delete this._board[d.to+16]),d.promotion&&(this._board[d.to]={type:d.promotion,color:k}),this._board[d.to].type===t.KING){if(this._kings[k]=d.to,d.flags&i.KSIDE_CASTLE){const M=d.to-1,m=d.to+1;this._board[M]=this._board[m],delete this._board[m]}else if(d.flags&i.QSIDE_CASTLE){const M=d.to+1,m=d.to-2;this._board[M]=this._board[m],delete this._board[m]}this._castling[k]=0}if(this._castling[k]){for(let M=0,m=A[k].length;M<m;M++)if(d.from===A[k][M].square&&this._castling[k]&A[k][M].flag){this._castling[k]^=A[k][M].flag;break}}if(this._castling[S]){for(let M=0,m=A[S].length;M<m;M++)if(d.to===A[S][M].square&&this._castling[S]&A[S][M].flag){this._castling[S]^=A[S][M].flag;break}}d.flags&i.BIG_PAWN?k===t.BLACK?this._epSquare=d.to-16:this._epSquare=d.to+16:this._epSquare=e,d.piece===t.PAWN?this._halfMoves=0:d.flags&(i.CAPTURE|i.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,k===t.BLACK&&this._moveNumber++,this._turn=S}undo(){const d=this._undoMove();return d?this._makePretty(d):null}_undoMove(){const d=this._history.pop();if(d===void 0)return null;const k=d.move;this._kings=d.kings,this._turn=d.turn,this._castling=d.castling,this._epSquare=d.epSquare,this._halfMoves=d.halfMoves,this._moveNumber=d.moveNumber;const S=this._turn,M=R(S);if(this._board[k.from]=this._board[k.to],this._board[k.from].type=k.piece,delete this._board[k.to],k.captured)if(k.flags&i.EP_CAPTURE){let m;S===t.BLACK?m=k.to-16:m=k.to+16,this._board[m]={type:t.PAWN,color:M}}else this._board[k.to]={type:k.captured,color:M};if(k.flags&(i.KSIDE_CASTLE|i.QSIDE_CASTLE)){let m,q;k.flags&i.KSIDE_CASTLE?(m=k.to+1,q=k.to-1):(m=k.to-2,q=k.to+1),this._board[m]=this._board[q],delete this._board[q]}return k}pgn({newline:d=`
`,maxWidth:k=0}={}){const S=[];let M=!1;for(const j in this._header)S.push("["+j+' "'+this._header[j]+'"]'+d),M=!0;M&&this._history.length&&S.push(d);const m=j=>{const fe=this._comments[this.fen()];if(typeof fe<"u"){const Y=j.length>0?" ":"";j=`${j}${Y}{${fe}}`}return j},q=[];for(;this._history.length>0;)q.push(this._undoMove());const E=[];let _="";for(q.length===0&&E.push(m(""));q.length>0;){_=m(_);const j=q.pop();if(!j)break;if(!this._history.length&&j.color==="b"){const fe=`${this._moveNumber}. ...`;_=_?`${_} ${fe}`:fe}else j.color==="w"&&(_.length&&E.push(_),_=this._moveNumber+".");_=_+" "+this._moveToSan(j,this._moves({legal:!0})),this._makeMove(j)}if(_.length&&E.push(m(_)),typeof this._header.Result<"u"&&E.push(this._header.Result),k===0)return S.join("")+E.join(" ");const G=function(){return S.length>0&&S[S.length-1]===" "?(S.pop(),!0):!1},$=function(j,fe){for(const Y of fe.split(" "))if(!!Y){if(j+Y.length>k){for(;G();)j--;S.push(d),j=0}S.push(Y),j+=Y.length,S.push(" "),j++}return G()&&j--,j};let ae=0;for(let j=0;j<E.length;j++){if(ae+E[j].length>k&&E[j].includes("{")){ae=$(ae,E[j]);continue}ae+E[j].length>k&&j!==0?(S[S.length-1]===" "&&S.pop(),S.push(d),ae=0):j!==0&&(S.push(" "),ae++),S.push(E[j]),ae+=E[j].length}return S.join("")}header(...d){for(let k=0;k<d.length;k+=2)typeof d[k]=="string"&&typeof d[k+1]=="string"&&(this._header[d[k]]=d[k+1]);return this._header}loadPgn(d,{sloppy:k=!1,newlineChar:S=`\r?
`}={}){function M(le){return le.replace(/\\/g,"\\")}function m(le){const ke={},qe=le.split(new RegExp(M(S)));let Xe="",Ye="";for(let Ge=0;Ge<qe.length;Ge++){const Ve=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;Xe=qe[Ge].replace(Ve,"$1"),Ye=qe[Ge].replace(Ve,"$2"),Xe.trim().length>0&&(ke[Xe]=Ye)}return ke}d=d.trim();const E=new RegExp("^(\\[((?:"+M(S)+")|.)*\\])(?:\\s*"+M(S)+"){2}").exec(d),_=E&&E.length>=2?E[1]:"";this.reset();const G=m(_);let $="";for(const le in G)le.toLowerCase()==="fen"&&($=G[le]),this.header(le,G[le]);if(k){if($&&!this.load($,!0))return!1}else if(G.SetUp==="1"&&!("FEN"in G&&this.load(G.FEN,!0)))return!1;function ae(le){return Array.from(le).map(function(ke){return ke.charCodeAt(0)<128?ke.charCodeAt(0).toString(16):encodeURIComponent(ke).replace(/%/g,"").toLowerCase()}).join("")}function j(le){return le.length==0?"":decodeURIComponent("%"+(le.match(/.{1,2}/g)||[]).join("%"))}const fe=function(le){return le=le.replace(new RegExp(M(S),"g")," "),`{${ae(le.slice(1,le.length-1))}}`},Y=function(le){if(le.startsWith("{")&&le.endsWith("}"))return j(le.slice(1,le.length-1))};let ie=d.replace(_,"").replace(new RegExp(`({[^}]*})+?|;([^${M(S)}]*)`,"g"),function(le,ke,qe){return ke!==void 0?fe(ke):" "+fe(`{${qe.slice(1)}}`)}).replace(new RegExp(M(S),"g")," ");const ue=/(\([^()]+\))+?/g;for(;ue.test(ie);)ie=ie.replace(ue,"");ie=ie.replace(/\d+\.(\.\.)?/g,""),ie=ie.replace(/\.\.\./g,""),ie=ie.replace(/\$\d+/g,"");let me=ie.trim().split(new RegExp(/\s+/));me=me.join(",").replace(/,,+/g,",").split(",");let Ie="";for(let le=0;le<me.length;le++){const ke=Y(me[le]);if(ke!==void 0){this._comments[this.fen()]=ke;continue}const qe=this._moveFromSan(me[le],k);if(qe==null)if(g.indexOf(me[le])>-1)Ie=me[le];else return!1;else Ie="",this._makeMove(qe)}return Ie&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",Ie),!0}_moveToSan(d,k){let S="";if(d.flags&i.KSIDE_CASTLE)S="O-O";else if(d.flags&i.QSIDE_CASTLE)S="O-O-O";else{if(d.piece!==t.PAWN){const M=B(d,k);S+=d.piece.toUpperCase()+M}d.flags&(i.CAPTURE|i.EP_CAPTURE)&&(d.piece===t.PAWN&&(S+=L(d.from)[0]),S+="x"),S+=L(d.to),d.promotion&&(S+="="+d.promotion.toUpperCase())}return this._makeMove(d),this.isCheck()&&(this.isCheckmate()?S+="#":S+="+"),this._undoMove(),S}_moveFromSan(d,k=!1){const S=ne(d);let M=Q(S),m=this._moves({legal:!0,piece:M});for(let j=0,fe=m.length;j<fe;j++)if(S===ne(this._moveToSan(m[j],m)))return m[j];if(!k)return null;let q,E,_,G,$,ae=!1;E=S.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),E?(q=E[1],_=E[2],G=E[3],$=E[4],_.length==1&&(ae=!0)):(E=S.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),E&&(q=E[1],_=E[2],G=E[3],$=E[4],_.length==1&&(ae=!0))),M=Q(S),m=this._moves({legal:!0,piece:q||M});for(let j=0,fe=m.length;j<fe;j++)if(_&&G){if((!q||q.toLowerCase()==m[j].piece)&&a[_]==m[j].from&&a[G]==m[j].to&&(!$||$.toLowerCase()==m[j].promotion))return m[j];if(ae){const Y=L(m[j].from);if((!q||q.toLowerCase()==m[j].piece)&&a[G]==m[j].to&&(_==Y[0]||_==Y[1])&&(!$||$.toLowerCase()==m[j].promotion))return m[j]}}return null}ascii(){let d=`   +------------------------+
`;for(let k=a.a8;k<=a.h1;k++){if(y(k)===0&&(d+=" "+"87654321"[h(k)]+" |"),this._board[k]){const S=this._board[k].type,m=this._board[k].color===t.WHITE?S.toUpperCase():S.toLowerCase();d+=" "+m+" "}else d+=" . ";k+1&136&&(d+=`|
`,k+=8)}return d+=`   +------------------------+
`,d+="     a  b  c  d  e  f  g  h",d}perft(d){const k=this._moves({legal:!1});let S=0;const M=this._turn;for(let m=0,q=k.length;m<q;m++)this._makeMove(k[m]),this._isKingAttacked(M)||(d-1>0?S+=this.perft(d-1):S++),this._undoMove();return S}_makePretty(d){const{color:k,piece:S,from:M,to:m,flags:q,captured:E,promotion:_}=d;let G="";for(const ae in i)i[ae]&q&&(G+=s[ae]);const $={color:k,piece:S,from:L(M),to:L(m),san:this._moveToSan(d,this._moves({legal:!0})),flags:G};return E&&($.captured=E),_&&($.promotion=_),$}turn(){return this._turn}board(){const d=[];let k=[];for(let S=a.a8;S<=a.h1;S++)this._board[S]==null?k.push(null):k.push({square:L(S),type:this._board[S].type,color:this._board[S].color}),S+1&136&&(d.push(k),k=[],S+=8);return d}squareColor(d){if(d in a){const k=a[d];return(h(k)+y(k))%2===0?"light":"dark"}return null}history({verbose:d=!1}={}){const k=[],S=[];for(;this._history.length>0;)k.push(this._undoMove());for(;;){const M=k.pop();if(!M)break;d?S.push(this._makePretty(M)):S.push(this._moveToSan(M,this._moves())),this._makeMove(M)}return S}_pruneComments(){const d=[],k={},S=M=>{M in this._comments&&(k[M]=this._comments[M])};for(;this._history.length>0;)d.push(this._undoMove());for(S(this.fen());;){const M=d.pop();if(!M)break;this._makeMove(M),S(this.fen())}this._comments=k}getComment(){return this._comments[this.fen()]}setComment(d){this._comments[this.fen()]=d.replace("{","[").replace("}","]")}deleteComment(){const d=this._comments[this.fen()];return delete this._comments[this.fen()],d}getComments(){return this._pruneComments(),Object.keys(this._comments).map(d=>({fen:d,comment:this._comments[d]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(d=>{const k=this._comments[d];return delete this._comments[d],{fen:d,comment:k}})}}t.Chess=Se})(Mn);var he=(t=>(t[t.WHITE=0]="WHITE",t[t.BLACK=1]="BLACK",t[t.BOTH=2]="BOTH",t[t.SPECTATOR=3]="SPECTATOR",t[t.SERVER=4]="SERVER",t))(he||{}),J=(t=>(t[t.LEGAL=0]="LEGAL",t[t.LEGALHOVER=1]="LEGALHOVER",t[t.CHECK=2]="CHECK",t[t.MOVE=3]="MOVE",t[t.NEXTMOVE=4]="NEXTMOVE",t[t.PREMOVE=5]="PREMOVE",t[t.PREMOVEHOVER=6]="PREMOVEHOVER",t[t.SELECT=7]="SELECT",t))(J||{});const yt=t=>{if(typeof t=="string")return t;switch(t){case 0:case 1:return"legal";case 2:return"check";case 3:return"move";case 4:return"nextMove";case 5:case 6:return"preMove";case 7:return"select";default:return"check"}};class Zn{constructor(e){D(this,"boardTheme");D(this,"piecesTheme");D(this,"mouseEvents");D(this,"flipped");D(this,"notation");D(this,"startFen");D(this,"size");D(this,"scale");D(this,"resizible");D(this,"defaultState",{boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:ai,size:0,scale:70,resizible:!1});D(this,"setConfigSettings",e=>{e!==void 0&&(e.boardTheme!==void 0&&(this.boardTheme=e.boardTheme),e.piecesTheme!==void 0&&(this.piecesTheme=e.piecesTheme),e.mouseEvents!==void 0&&(this.mouseEvents=e.mouseEvents),e.flipped!==void 0&&(this.flipped=e.flipped),e.notation!==void 0&&(this.notation=e.notation),e.startFen!==void 0&&(this.startFen=e.startFen),e.resizible!==void 0&&(this.resizible=e.resizible))});D(this,"getConfig",()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...this.resizible!==this.defaultState.resizible&&{resizible:this.resizible}};if(Object.keys(e).length!==0)return e});this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.scale=this.defaultState.scale,this.resizible=this.defaultState.resizible,this.setConfigSettings(e)}}class Jn{constructor(e){D(this,"enabled");D(this,"color");D(this,"defaultState",{enabled:!0,color:he.BOTH});D(this,"setConfigSettings",e=>{switch(e){case!0:this.enabled=!0,this.color=he.BOTH;break;case!1:this.enabled=!1;break;case he.WHITE:this.enabled=!0,this.color=he.WHITE;break;case he.BLACK:this.enabled=!0,this.color=he.BLACK;break}});D(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class xn{constructor(e){D(this,"enabled");D(this,"ghostPiece");D(this,"transition");D(this,"defaultState",{enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}});D(this,"setConfigSettings",e=>{var s,i,a,r;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(s=e==null?void 0:e.transition)!=null&&s.duration&&(this.transition.settings.duration=(i=e==null?void 0:e.transition)==null?void 0:i.duration),(a=e==null?void 0:e.transition)!=null&&a.easing&&(this.transition.settings.easing=(r=e==null?void 0:e.transition)==null?void 0:r.easing)))))});D(this,"getConfig",()=>{const e={},s={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(s.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(s.easing=this.transition.settings.easing),Object.keys(s).length!==0&&(e.transition=s)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class $n{constructor(e){D(this,"enabled");D(this,"selectedPiece");D(this,"defaultState",{enabled:!0,selectedPiece:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(this.enabled=e)});D(this,"getConfig",()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class ei{constructor(e){D(this,"enabled");D(this,"whiteToMove");D(this,"moves");D(this,"settings");D(this,"preMoves");D(this,"lastMove");D(this,"checkSquare");D(this,"defaultState",{enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!0,allowEnPassant:!0,allowCastling:!0},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))});D(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled});this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class ti{constructor(e){D(this,"enabled");D(this,"settings");D(this,"defaultState",{enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))});D(this,"getConfig",()=>{const e={},s=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(s.forEach(i=>{this.settings[i]!==this.defaultState.settings[i]&&(e[i]=this.settings[i])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class si{constructor(e){D(this,"enabled");D(this,"tools");D(this,"settings");D(this,"defaultState",{enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.knightLShape!==void 0&&(this.settings.knightLShape=e.knightLShape),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))});D(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(e.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class ni{constructor(e){D(this,"enabled");D(this,"settings");D(this,"defaultState",{enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}});D(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))});D(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class ii{constructor(e){D(this,"getLegalMoves");D(this,"getPreMoves");D(this,"beforeMove");D(this,"afterMove");D(this,"getLastMove");D(this,"getInCheck");D(this,"getWhiteToMove");D(this,"defaultState",{getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0});D(this,"setConfigSettings",e=>{e!==void 0&&(e.getLegalMoves&&(this.getLegalMoves=e.getLegalMoves),e.getPreMoves&&(this.getPreMoves=e.getPreMoves),e.beforeMove&&(this.beforeMove=e.beforeMove),e.afterMove&&(this.afterMove=e.afterMove),e.getLastMove&&(this.getLastMove=e.getLastMove),e.getInCheck&&(this.getInCheck=e.getInCheck),e.getWhiteToMove&&(this.getWhiteToMove=e.getWhiteToMove))});D(this,"getConfig",()=>{const e={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(e).length>0?e:void 0});this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const ai="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class kn{constructor(e){D(this,"pieces");D(this,"markedSquares");D(this,"board");D(this,"movable");D(this,"draggable");D(this,"selectable");D(this,"legal");D(this,"callbacks");D(this,"highlight");D(this,"drawTools");D(this,"sounds");D(this,"getConfig",()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}));this.pieces=[],this.markedSquares=new Set,this.board=new Zn(e==null?void 0:e.board),this.movable=new Jn(e==null?void 0:e.movable),this.draggable=new xn(e==null?void 0:e.draggable),this.selectable=new $n(e==null?void 0:e.selectable),this.legal=new ei(e==null?void 0:e.legal),this.callbacks=new ii(e==null?void 0:e.callbacks),this.highlight=new ti(e==null?void 0:e.highlight),this.drawTools=new si(e==null?void 0:e.drawTools),this.sounds=new ni(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){!this.legalEnabled||(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){!this.preMovesEnabled||(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.preMovesEnabled?this.legal.preMoves.curMove:""}set currentPreMove(e){e!==""&&(this.preMovesEnabled?this.legal.preMoves.curMove=e:this.legal.preMoves.curMove="")}get selectableEnabled(){return this.selectable.enabled}get draggableEnabled(){return this.draggable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){!this.legalEnabled||(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4&&e!==""||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const ri=["a","b","c","d","e","f","g","h"],li=["8","7","6","5","4","3","2","1"];function Tt(t){return{x:ri.indexOf(t[0]),y:li.indexOf(t[1])}}function $t(t){return t.charCodeAt(0)-97}function oi(t){return 8-parseInt(t,10)}const ui=t=>{let e="",s=0;for(let i=0;i<t.length;i++){i!==0&&(e+="/");for(let a=0;a<t[i].length;a++){const r=t[i][a];r!=null&&s===0?r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase():r!=null&&s!==0?(e+=s.toString(),s=0,r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase()):s++}s!==0&&(e+=s.toString(),s=0)}return e},fi="8/8/8/8/8/8/8/8 w - - 0 1";class ci{constructor(e){D(this,"letters",{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7});D(this,"state");D(this,"changeLegalHoverIfNeeded",e=>{e.color!==J.LEGAL&&e.color!==J.PREMOVE||this.state.pieces.forEach(s=>{s.square===e.square&&(e.color=e.color===J.LEGAL?J.LEGALHOVER:J.PREMOVEHOVER)})});D(this,"highlightSquare",(e,s)=>{const i={square:e,color:s};this.state.markedSquares.forEach(a=>{a.square===e&&a.color!==J.MOVE&&a.color!==J.CHECK&&this.state.markedSquares.delete(a)}),this.changeLegalHoverIfNeeded(i),this.state.markedSquares.add(i)});D(this,"legalHover",e=>{this.state.markedSquares.forEach(s=>{if(s.square===e&&s.color===J.LEGAL)s.color=J.LEGALHOVER;else if(s.square!==e&&s.color===J.LEGALHOVER){let i=!1;this.state.pieces.forEach(a=>{a.square===s.square&&(i=!0)}),i||(s.color=J.LEGAL)}})});D(this,"preMoveHover",e=>{this.state.markedSquares.forEach(s=>{if(s.square===e&&s.color===J.PREMOVE)s.color=J.PREMOVEHOVER;else if(s.square!==e&&s.color===J.PREMOVEHOVER){let i=!1;this.state.pieces.forEach(a=>{a.square===s.square&&(i=!0)}),i||(s.color=J.PREMOVE)}})});D(this,"toggleSquareHighlight",(e,s)=>{const i={square:e,color:s};let a=!1;return this.state.markedSquares.forEach(r=>{r.square===e&&(this.state.markedSquares.delete(r),r.color===s&&(a=!0))}),this.changeLegalHoverIfNeeded(i),a?!0:(this.state.markedSquares.add(i),!1)});D(this,"getSelectedSquare",()=>{let e="";return this.state.markedSquares.forEach(s=>{s.color===J.SELECT&&(e=s.square)}),e});D(this,"clearSquare",(e,s)=>{e.length===2&&this.state.markedSquares.forEach(i=>{i.square===e&&(i.color===s||s===void 0)&&this.state.markedSquares.delete(i)})});D(this,"clearAllSquares",e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(s=>{s.color===e&&this.state.markedSquares.delete(s)})});D(this,"setPiece",(e,s)=>{if(this.notValidThing({square:e,piece:s}))return;const i=this.state.pieces.find(a=>a.square===e);i?i.name=s:this.state.pieces.push({square:e,name:s})});D(this,"removePiece",e=>{this.notValidThing({square:e})||this.state.pieces.forEach((s,i)=>{s.square===e&&this.state.pieces.splice(i,1)})});D(this,"clearAllPieces",()=>{this.state.pieces.length=0});D(this,"getGridCoordsFromSquare",e=>{if(this.notValidThing({square:e}))return{x:0,y:0};const s=e[0],i=e[1],a=this.state.board.flipped?Math.abs(this.letters[s]-7):this.letters[s],r=this.state.board.flipped?Math.abs(parseInt(i,10)-8):parseInt(i,10)-1;return typeof a!="number"||r<0||r>7?{x:0,y:0}:{x:a,y:r}});D(this,"makeMove",e=>{if(this.notValidThing({move:e}))return;let s=!1,i;const a=e.substring(0,2),r=e.substring(2,4),n=e.substring(4);this.state.pieces.forEach(l=>{l.square===r&&(i=l,this.removePiece(l.square))}),this.state.pieces.forEach(l=>{l.square===a&&(l.square=r,s=!0,n&&(l.name=l.name[0]+n.toUpperCase()))}),s?this.state.legal.lastMove=e:i&&this.state.pieces.push(i)});D(this,"getSquareFromIndices",(e,s)=>`${Object.keys(this.letters)[e]}${(s+1).toString()}`);D(this,"updatePiecesWithFen",e=>{const s=[...Array(8)].map(()=>Array(8).fill(null)),i=["1","2","3","4","5","6","7","8"];let a=0,r=0;for(let o=0;o<(e.includes(" ")?e.indexOf(" "):e.length);o++)if(e[o]==="/")a++,r=0;else if(!i.includes(e[o]))e[o]===e[o].toUpperCase()?s[a][r]=`w${e[o]}`:s[a][r]=`b${e[o].toUpperCase()}`,r++;else for(let u=0;u<parseInt(e[o],10);u++)s[a][r]=null,r++;const n=[],l=[];for(let o=0;o<s.length;++o)for(let u=0;u<s.length;++u){const c=s[o][u],f=this.getPieceFromSquare(this.getSquareFromIndices(u,Math.abs(o-7)));c&&!f&&n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),!c&&f&&l.push(f),c&&f&&c!==f.name&&(n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),l.push(f))}for(let o=0;o<l.length;o++)for(let u=0;u<n.length;u++)!n[u]||!l[o]||n[u].name===l[o].name&&(l[o].square=n[u].square,l.splice(o,1),o--,n.splice(u,1),u--);n.forEach(o=>{this.state.pieces.push(o)}),l.forEach(o=>{this.state.pieces.splice(this.state.pieces.indexOf(o),1)})});D(this,"notValidThing",e=>{const{square:s,piece:i,move:a}=e;return!!(s&&s.length!==2||i&&i.length!==2||a&&a.length!==4&&a.length!==5)});D(this,"setGhostPiece",e=>{this.state.draggable.ghostPiece.piece=e});D(this,"removeGhostPiece",()=>{this.state.draggable.ghostPiece.piece=void 0});D(this,"isCastling",e=>{const s=e.slice(0,2),i=this.getPieceFromSquare(s);return!i||i.name[1]!=="K"?!1:e==="e1g1"||e==="e1c1"||e==="e8g8"||e==="e8c8"});D(this,"getRookMoveIfIsCastling",e=>{if(!this.isCastling(e))return null;switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return null}});D(this,"isEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s===void 0||s.name!=="wP"&&s.name!=="bP")});D(this,"getCapturedPawnSquareIfIsEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const s=this.getPieceFromSquare(e.substring(0,2));if(s===void 0||s.name!=="wP"&&s.name!=="bP")return;const i=this.getPieceFromSquare(`${e[2]}${(parseInt(e[3],10)+(s.name==="wP"?-1:1)).toString()}`);return i==null?void 0:i.square});D(this,"isCapture",e=>!!this.getPieceFromSquare(e.substring(2,4)));D(this,"isPromotion",e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const s=this.getPieceFromSquare(e.substring(0,2));return!(s&&(s.name[1]!=="P"||s.name[0]==="w"&&e[3]==="1"||s.name[0]==="b"&&e[3]==="8"))});D(this,"callbackExists",e=>this.state.callbacks[e]!==void 0);D(this,"flipBoard",e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped});D(this,"setConfigSettings",e=>{this.state.setConfigSettings(e)});this.state=new kn(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const e=this.state.pieces.find(s=>s.name==="wK");if(e)return e.square}getBlackKingSquare(){const e=this.state.pieces.find(s=>s.name==="bK");if(e)return e.square}getShortFEN(){if(this.state.pieces.length===0)return fi;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(s=>{e[oi(s.square[1])][$t(s.square[0])]=s.name}),ui(e)}getPieceFromSquare(e){if(!!e)return this.state.pieces.find(s=>s.square===e)}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get draggableEnabled(){return this.state.draggableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}}const di={[J.LEGAL]:"legalSQ cursor-pointer",[J.LEGALHOVER]:"legalSQ_hover cursor-pointer",[J.SELECT]:"selectedSQ",[J.MOVE]:"highlightMove",[J.NEXTMOVE]:"nextMoveSQ",[J.PREMOVE]:"preMoveSQ cursor-pointer",[J.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[J.CHECK]:"checkSQ"},hi={white:"#f0d9b5",black:"#b58863"},gi="standard.svg",bi={[J.LEGAL]:"legalSQ cursor-pointer",[J.LEGALHOVER]:"legalSQ_hover cursor-pointer",[J.SELECT]:"selectedSQ-darkBlue",[J.MOVE]:"highlightMove-darkBlue",[J.NEXTMOVE]:"nextMoveSQ",[J.PREMOVE]:"preMoveSQ cursor-pointer",[J.PREMOVEHOVER]:"preMoveSQ_hover cursor-pointer",[J.CHECK]:"checkSQ"},pi={white:"#94A3B8",black:"#475569"},mi="darkBlue.svg",ze={squareStyles:{standard:di,darkBlue:bi},colors:{standard:hi,darkBlue:pi},imageName:{standard:gi,darkBlue:mi}};function ms(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function vs(t,e,s){const i=t.slice();return i[6]=e[s],i[8]=s,i}function _s(t){let e,s=t[4][t[1]?Math.abs(t[8]-7):t[8]]+"",i,a;return{c(){e=z("span"),i=we(s),a=te(),this.h()},l(r){e=V(r,"SPAN",{"data-file":!0,style:!0,class:!0});var n=W(e);i=Ce(n,s),a=se(n),n.forEach(C),this.h()},h(){v(e,"data-file",t[6]),Fe(e,"--font-size",t[3]+"px"),Fe(e,"color",t[8]%2===0?ze.colors[t[0]].white:ze.colors[t[0]].black),v(e,"class","svelte-1dkkugo")},m(r,n){X(r,e,n),I(e,i),I(e,a)},p(r,n){n&2&&s!==(s=r[4][r[1]?Math.abs(r[8]-7):r[8]]+"")&&Nt(i,s),n&8&&Fe(e,"--font-size",r[3]+"px"),n&1&&Fe(e,"color",r[8]%2===0?ze.colors[r[0]].white:ze.colors[r[0]].black)},d(r){r&&C(e)}}}function Es(t){let e,s=(t[1]?t[8]+1:Math.abs(t[8]-8))+"",i,a,r;return{c(){e=z("span"),i=we(s),a=te(),this.h()},l(n){e=V(n,"SPAN",{"data-file":!0,style:!0,class:!0});var l=W(e);i=Ce(l,s),a=se(l),l.forEach(C),this.h()},h(){v(e,"data-file",t[6]),v(e,"style",r="--font-size: "+t[3]+"px; color: "+(t[8]%2===0?ze.colors[t[0]].white:ze.colors[t[0]].black)+";"+(t[1]?" text-align: right;":"")),v(e,"class","svelte-1dkkugo")},m(n,l){X(n,e,l),I(e,i),I(e,a)},p(n,l){l&2&&s!==(s=(n[1]?n[8]+1:Math.abs(n[8]-8))+"")&&Nt(i,s),l&11&&r!==(r="--font-size: "+n[3]+"px; color: "+(n[8]%2===0?ze.colors[n[0]].white:ze.colors[n[0]].black)+";"+(n[1]?" text-align: right;":""))&&v(e,"style",r)},d(n){n&&C(e)}}}function vi(t){let e,s,i,a,r=t[4],n=[];for(let u=0;u<r.length;u+=1)n[u]=_s(vs(t,r,u));let l=t[4],o=[];for(let u=0;u<l.length;u+=1)o[u]=Es(ms(t,l,u));return{c(){e=z("div");for(let u=0;u<n.length;u+=1)n[u].c();s=te(),i=z("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=V(u,"DIV",{class:!0});var c=W(e);for(let b=0;b<n.length;b+=1)n[b].l(c);c.forEach(C),s=se(u),i=V(u,"DIV",{class:!0});var f=W(i);for(let b=0;b<o.length;b+=1)o[b].l(f);f.forEach(C),this.h()},h(){v(e,"class","files noselect svelte-1dkkugo"),v(i,"class","ranks noselect svelte-1dkkugo"),ut(()=>t[5].call(i))},m(u,c){X(u,e,c);for(let f=0;f<n.length;f+=1)n[f].m(e,null);X(u,s,c),X(u,i,c);for(let f=0;f<o.length;f+=1)o[f].m(i,null);a=Fn(i,t[5].bind(i))},p(u,[c]){if(c&27){r=u[4];let f;for(f=0;f<r.length;f+=1){const b=vs(u,r,f);n[f]?n[f].p(b,c):(n[f]=_s(b),n[f].c(),n[f].m(e,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=r.length}if(c&27){l=u[4];let f;for(f=0;f<l.length;f+=1){const b=ms(u,l,f);o[f]?o[f].p(b,c):(o[f]=Es(b),o[f].c(),o[f].m(i,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}},i:Pe,o:Pe,d(u){u&&C(e),at(n,u),u&&C(s),u&&C(i),at(o,u),a()}}}function _i(t,e,s){let i,{theme:a}=e,{flipped:r}=e;const n=["a","b","c","d","e","f","g","h"];let l;function o(){l=this.clientHeight,s(2,l)}return t.$$set=u=>{"theme"in u&&s(0,a=u.theme),"flipped"in u&&s(1,r=u.flipped)},t.$$.update=()=>{t.$$.dirty&4&&s(3,i=Math.floor(Math.log(l/8)*3))},[a,r,l,i,n,o]}class Ei extends Te{constructor(e){super(),Le(this,e,_i,vi,Oe,{theme:0,flipped:1})}}function Mi(t){const e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}function ki(t){return t*t*((1.70158+1)*t-1.70158)}function Si(t){return--t*t*((1.70158+1)*t+1.70158)+1}function It(t){const e=.36363636363636365,s=8/11,i=9/10,a=4356/361,r=35442/1805,n=16061/1805,l=t*t;return t<e?7.5625*l:t<s?9.075*l-9.9*t+3.4:t<i?a*l-r*t+n:10.8*t*t-20.52*t+10.72}function wi(t){return t<.5?.5*(1-It(1-t*2)):.5*It(t*2-1)+.5}function Ci(t){return 1-It(1-t)}function Pi(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function yi(t){return 1-Math.sqrt(1-t*t)}function Ai(t){return Math.sqrt(1- --t*t)}function Ti(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Li(t){return t*t*t}function ls(t){const e=t-1;return e*e*e+1}function Oi(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1}function Ii(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))}function qi(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1}function Fi(t){return t===0||t===1?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-t*20)+1}function Ni(t){return t===0?t:Math.pow(2,10*(t-1))}function Ri(t){return t===1?t:1-Math.pow(2,-10*t)}function Di(t){return t/=.5,t<1?.5*t*t:(t--,-.5*(t*(t-2)-1))}function Bi(t){return t*t}function Ui(t){return-t*(t-2)}function Hi(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1}function zi(t){return Math.pow(t,4)}function Vi(t){return Math.pow(t-1,3)*(1-t)+1}function Ki(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function Wi(t){return t*t*t*t*t}function ji(t){return--t*t*t*t*t+1}function Gi(t){return-.5*(Math.cos(Math.PI*t)-1)}function Qi(t){const e=Math.cos(t*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function Xi(t){return Math.sin(t*Math.PI/2)}const qt=Object.freeze(Object.defineProperty({__proto__:null,backIn:ki,backInOut:Mi,backOut:Si,bounceIn:Ci,bounceInOut:wi,bounceOut:It,circIn:yi,circInOut:Pi,circOut:Ai,cubicIn:Li,cubicInOut:Ti,cubicOut:ls,elasticIn:Ii,elasticInOut:Oi,elasticOut:qi,expoIn:Ni,expoInOut:Fi,expoOut:Ri,quadIn:Bi,quadInOut:Di,quadOut:Ui,quartIn:zi,quartInOut:Hi,quartOut:Vi,quintIn:Wi,quintInOut:Ki,quintOut:ji,sineIn:Qi,sineInOut:Gi,sineOut:Xi,linear:gn},Symbol.toStringTag,{value:"Module"}));function Ms(t){return Object.prototype.toString.call(t)==="[object Date]"}function es(t,e){if(t===e||t!==t)return()=>t;const s=typeof t;if(s!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map((a,r)=>es(t[r],a));return a=>i.map(r=>r(a))}if(s==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Ms(t)&&Ms(e)){t=t.getTime(),e=e.getTime();const r=e-t;return n=>new Date(t+n*r)}const i=Object.keys(e),a={};return i.forEach(r=>{a[r]=es(t[r],e[r])}),r=>{const n={};return i.forEach(l=>{n[l]=a[l](r)}),n}}if(s==="number"){const i=e-t;return a=>t+a*i}throw new Error(`Cannot interpolate ${s} values`)}function Yi(t,e={}){const s=Kn(t);let i,a=t;function r(n,l){if(t==null)return s.set(t=n),Promise.resolve();a=n;let o=i,u=!1,{delay:c=0,duration:f=400,easing:b=gn,interpolate:w=es}=Lt(Lt({},e),l);if(f===0)return o&&(o.abort(),o=null),s.set(t=a),Promise.resolve();const F=Nn()+c;let P;return i=Rn(A=>{if(A<F)return!0;u||(P=w(t,n),typeof f=="function"&&(f=f(t,n)),u=!0),o&&(o.abort(),o=null);const O=A-F;return O>f?(s.set(t=n),!1):(s.set(t=P(b(O/f))),!0)}),i.promise}return{set:r,update:(n,l)=>r(n(a,t),l),subscribe:s.subscribe}}function ks(t,e,s,i){if(e===0&&s===0)return t;const a=i?["a","b","c","d","e","f","g","h"].reverse():["a","b","c","d","e","f","g","h"],r=i?["8","7","6","5","4","3","2","1"].reverse():["8","7","6","5","4","3","2","1"],n=a[a.indexOf(t[0])+e],l=r[r.indexOf(t[1])+s];if(!(!n||!l))return`${n}${l}`}function Ss(t,e,s){const i=e*1.15,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",(t.offsetWidth*i).toString()),a.setAttribute("height",(t.offsetHeight*i).toString()),a.style.position="absolute",a.style.zIndex="100",a.style.translate=`${s?"":"-"}${25*i/2}% -${25*i/2}%`,a.style.opacity="0.2",r.setAttribute("r",(t.offsetWidth*i/2).toString()),r.setAttribute("cx",(t.offsetWidth*i/2).toString()),r.setAttribute("cy",(t.offsetHeight*i/2).toString()),r.setAttribute("fill","black"),a.appendChild(r),a}function Zi(t,e){let s,i,a,r,n,l,o,u,c=!1,f;const b=t.parentNode;let w,F=!1,{startSquare:P,boardSize:A,boardFlipped:O,mouseEvents:g,canDrag:h,canSelect:y,canCapture:T,duration:L,easingFunc:R}=e;const{coords:H}=e;let B=fs(H).x,N=fs(H).y;const Q=1.6;let ne=Ss(t,Q,O);function Se(m){const q=m.clientX-s,E=m.clientY-i;if(s=m.clientX,i=m.clientY,n+=q,l+=E,c||(Math.abs(n)>1||Math.abs(l)>1)&&(H.update(_=>({x:_.x+(s-t.offsetWidth/2-t.getBoundingClientRect().x)/t.clientWidth,y:m.pointerType==="touch"?_.y-(i-t.offsetHeight*1.5-t.getBoundingClientRect().y)/t.clientWidth:_.y-(i-t.offsetHeight/2-t.getBoundingClientRect().y)/t.clientWidth,scale:m.pointerType==="touch"?Q:1}),{duration:L,easing:R}),c=!0,t.classList.add("dragging"),t.dispatchEvent(new CustomEvent("startMoving"))),!!c){if(m.pointerType==="touch"){const _=Math.floor((n+a)/t.offsetWidth),G=Math.floor((l+r)/t.offsetHeight),$=ks(P,_,G,O);if($){if($!==w){const ae=Tt($);ne.style.left=`${ae.x*12.5}%`,ne.style.top=`${ae.y*12.5}%`,b.appendChild(ne)}}else w&&(w=void 0)}H.update(_=>({x:_.x+q/t.clientWidth,y:_.y-E/t.clientWidth,scale:m.pointerType==="touch"?Q:1}),{duration:0}),t.dispatchEvent(new CustomEvent("moving",{detail:{x:s,y:i}}))}}function x(){const m=window.scrollX-o,q=window.scrollY-u;o=window.scrollX,u=window.scrollY,H.update(E=>({x:E.x+m,y:E.y+q,scale:1}),{duration:0})}function d(){window.removeEventListener("pointermove",Se),window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d),document.body.removeEventListener("pointerleave",d),window.removeEventListener("scroll",x);const m=Math.floor((n+a)/t.offsetWidth),q=Math.floor((l+r)/t.offsetHeight),E=ks(P,m,q,O);F=!1,t.dispatchEvent(new CustomEvent("dropped",{detail:E})),H.update(()=>({x:B,y:N,scale:1}),{duration:L,easing:R}).then(()=>{F||t.dispatchEvent(new CustomEvent("animationEnded")),F||t.classList.remove("dragging")}),s=0,i=0,n=0,l=0,setTimeout(()=>{F||t.classList.remove("dragging")},L),c=!1,ne.remove()}function k(m){if(m.button!==0||!m.isPrimary||!g)return;if(T){t.dispatchEvent(new CustomEvent("captured"));return}if((y||h)&&t.dispatchEvent(new CustomEvent("clicked")),!h){t.dispatchEvent(new CustomEvent("dropped",{detail:P}));return}B=O?7-$t(P[0]):$t(P[0]),N=O?8-parseInt(P[1],10):parseInt(P[1],10)-1,w=P;const q=m.target.getBoundingClientRect();m.pointerType==="touch"?(s=m.clientX,i=m.clientY,a=m.clientX-q.x,r=m.clientY-q.y):(s=m.clientX,i=m.clientY,a=m.offsetX,r=m.offsetY),n=0,l=0,o=window.scrollX,u=window.scrollY,F=!0,window.addEventListener("pointermove",Se),window.addEventListener("pointerup",d),window.addEventListener("pointercancel",d),document.body.addEventListener("pointerleave",d),window.addEventListener("scroll",x)}function S(m){m.preventDefault()}function M(m){m.preventDefault()}return t.addEventListener("contextmenu",S),t.addEventListener("dragstart",M),t.addEventListener("pointerdown",k),{destroy(){t.removeEventListener("pointerdown",k),t.removeEventListener("contextmenu",S),t.removeEventListener("dragstart",M),window.clearTimeout(f)},update(m){P=m.startSquare,m.boardSize!==A&&(A=m.boardSize),L=m.duration,R=m.easingFunc,m.canDrag!==h&&(h=m.canDrag),m.canSelect!==y&&(y=m.canSelect),m.canCapture!==T&&(T=m.canCapture),m.mouseEvents!==g&&(g=m.mouseEvents),O!==m.boardFlipped&&(ne=Ss(t,Q,m.boardFlipped)),O=m.boardFlipped}}}function Ji(t){let e,s,i,a,r;return{c(){e=z("div"),this.h()},l(n){e=V(n,"DIV",{style:!0,class:!0}),W(e).forEach(C),this.h()},h(){var n;Fe(e,"transform","translate("+t[12].x*t[5]/8+"px, "+(7-t[12].y)*t[5]/8+"px)"),v(e,"class",s=t[2]+(t[2][0]==="w"?" white":" black")+(t[4]?" ghost":"")+(!((n=t[7])!=null&&n.enabled)&&!t[4]?" static":"")+(t[11]?"":" opacity-0")+(t[10]?" capture":"")+" svelte-xg76yd")},m(n,l){var o,u,c;X(n,e,l),a||(r=[is(i=Zi.call(null,e,{startSquare:t[1],boardSize:t[5],mouseEvents:t[0],canDrag:t[8],canSelect:t[9],canCapture:t[10],boardFlipped:t[3],duration:(o=t[6])!=null&&o.transition.enabled?t[6].transition.settings.duration:0,easingFunc:qt[(c=(u=t[6])==null?void 0:u.transition.settings.easing)!=null?c:"cubicInOut"],coords:t[14]})),ce(e,"dropped",t[15]),ce(e,"clicked",t[19]),ce(e,"startMoving",t[20]),ce(e,"animationEnded",t[21]),ce(e,"captured",t[22]),ce(e,"moving",t[23])],a=!0)},p(n,l){var o,u,c,f;l[0]&4128&&Fe(e,"transform","translate("+n[12].x*n[5]/8+"px, "+(7-n[12].y)*n[5]/8+"px)"),l[0]&3220&&s!==(s=n[2]+(n[2][0]==="w"?" white":" black")+(n[4]?" ghost":"")+(!((o=n[7])!=null&&o.enabled)&&!n[4]?" static":"")+(n[11]?"":" opacity-0")+(n[10]?" capture":"")+" svelte-xg76yd")&&v(e,"class",s),i&&as(i.update)&&l[0]&1899&&i.update.call(null,{startSquare:n[1],boardSize:n[5],mouseEvents:n[0],canDrag:n[8],canSelect:n[9],canCapture:n[10],boardFlipped:n[3],duration:(u=n[6])!=null&&u.transition.enabled?n[6].transition.settings.duration:0,easingFunc:qt[(f=(c=n[6])==null?void 0:c.transition.settings.easing)!=null?f:"cubicInOut"],coords:n[14]})},i:Pe,o:Pe,d(n){n&&C(e),a=!1,rt(r)}}}function xi(t,e,s){var q,E;let i,{square:a}=e,{name:r}=e,{mouseEvents:n=!0}=e,{getGridCoordsFromSquare:l}=e,{flipped:o}=e,{isGhost:u=!1}=e,{boardSize:c}=e;u&&(n=!1);let{selectableState:f=void 0}=e,{draggableState:b=void 0}=e,{legalState:w=void 0}=e,{movableState:F=void 0}=e,P=!1,A=!1,O=!1,g=!1;const h=St();let y=(q=b==null?void 0:b.transition)!=null&&q.enabled?b.transition.settings.duration:0;const T=Yi({x:0,y:0,scale:1},{duration:y,easing:qt[(E=b==null?void 0:b.transition.settings.easing)!=null?E:"cubicInOut"]});Dn(t,T,_=>s(12,i=_));let L=!1;const R=_=>_[0]==="w"?he.WHITE:he.BLACK,H=_=>{var $;const G=l(_);T.update(()=>({x:G.x,y:G.y,scale:1}),{duration:L?y:0,easing:qt[($=b==null?void 0:b.transition.settings.easing)!=null?$:"cubicInOut"]}),y=b!=null&&b.transition.enabled?b.transition.settings.duration:0},B=_=>{y=0,_.detail||h("deselect"),a===_.detail?(!P&&ne(F,f)?h("select"):h("deselect"),P=!P):P=!1,Q(F,b)&&h("endDragging",a+_.detail),a!==_.detail&&_.detail&&h("move",a+_.detail)},N=_=>w!=null&&w.enabled?!!(w.preMoves.enabled&&R(r)===_.color||_.color===he.WHITE&&w.whiteToMove&&R(r)===he.WHITE||_.color===he.BLACK&&!w.whiteToMove&&R(r)===he.BLACK||_.color===he.BOTH&&(R(r)===he.WHITE&&w.whiteToMove||R(r)===he.BLACK&&!w.whiteToMove)):_.color===R(r)||_.color===he.BOTH,Q=(_,G)=>!(_!=null&&_.enabled)||!(G!=null&&G.enabled)||!n?!1:N(_),ne=(_,G)=>!(_!=null&&_.enabled)||!(G!=null&&G.enabled)||!n?!1:N(_),Se=(_,G,$)=>{var ae,j;return!(G!=null&&G.enabled)||!($!=null&&$.enabled)||!n?!1:_!=null&&_.enabled?!!((f==null?void 0:f.selectedPiece)!==void 0&&((ae=f==null?void 0:f.selectedPiece)==null?void 0:ae.square)!==a&&(_.moves.includes(f.selectedPiece.square+a)||_.moves.includes(`${f.selectedPiece.square+a}q`))||(f==null?void 0:f.selectedPiece)!==void 0&&_.preMoves.enabled&&R(f==null?void 0:f.selectedPiece.name)===G.color&&(_.preMoves.moves.includes(f.selectedPiece.square+a)||_.preMoves.moves.includes(`${f.selectedPiece.square+a}q`))):(f==null?void 0:f.selectedPiece)!==void 0&&((j=f==null?void 0:f.selectedPiece)==null?void 0:j.square)!==a},x=_=>_===void 0||_.name!==r||_.square!==a;Rt(()=>{s(11,L=!0)});function d(_){je.call(this,t,_)}function k(_){je.call(this,t,_)}function S(_){je.call(this,t,_)}function M(_){je.call(this,t,_)}const m=_=>{h("moving",_.detail)};return t.$$set=_=>{"square"in _&&s(1,a=_.square),"name"in _&&s(2,r=_.name),"mouseEvents"in _&&s(0,n=_.mouseEvents),"getGridCoordsFromSquare"in _&&s(16,l=_.getGridCoordsFromSquare),"flipped"in _&&s(3,o=_.flipped),"isGhost"in _&&s(4,u=_.isGhost),"boardSize"in _&&s(5,c=_.boardSize),"selectableState"in _&&s(17,f=_.selectableState),"draggableState"in _&&s(6,b=_.draggableState),"legalState"in _&&s(18,w=_.legalState),"movableState"in _&&s(7,F=_.movableState)},t.$$.update=()=>{t.$$.dirty[0]&192&&s(8,A=Q(F,b)),t.$$.dirty[0]&131200&&s(9,O=ne(F,f)),t.$$.dirty[0]&393344&&s(10,g=Se(w,F,f)),t.$$.dirty[0]&131072&&x(f==null?void 0:f.selectedPiece)&&(P=!1),t.$$.dirty[0]&10&&H(a)},[n,a,r,o,u,c,b,F,A,O,g,L,i,h,T,B,l,f,w,d,k,S,M,m]}class Sn extends Te{constructor(e){super(),Le(this,e,xi,Ji,Oe,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:16,flipped:3,isGhost:4,boardSize:5,selectableState:17,draggableState:6,legalState:18,movableState:7},null,[-1,-1])}}function $i(t){let e,s,i;return{c(){e=z("div"),this.h()},l(a){e=V(a,"DIV",{style:!0,class:!0}),W(e).forEach(C),this.h()},h(){v(e,"style",s="left: "+t[4]*12.5+"%; bottom: "+t[5]*12.5+"%;"+(t[3]?` border-${t[3]}-radius: inherit;`:"")),v(e,"class",i="noselect "+ze.squareStyles[t[1]][t[0]]+(t[2]?"":" pointer-events-none")+" svelte-10vytug")},m(a,r){X(a,e,r)},p(a,[r]){r&56&&s!==(s="left: "+a[4]*12.5+"%; bottom: "+a[5]*12.5+"%;"+(a[3]?` border-${a[3]}-radius: inherit;`:""))&&v(e,"style",s),r&7&&i!==(i="noselect "+ze.squareStyles[a[1]][a[0]]+(a[2]?"":" pointer-events-none")+" svelte-10vytug")&&v(e,"class",i)},i:Pe,o:Pe,d(a){a&&C(e)}}}function ea(t,e,s){let{square:i}=e,{color:a}=e,{getGridCoordsFromSquare:r}=e,{flipped:n}=e,{theme:l}=e,{mouseEvents:o=!0}=e,{corner:u=""}=e,c,f;const b=()=>{const w=r(i);s(4,c=w.x),s(5,f=w.y)};return t.$$set=w=>{"square"in w&&s(6,i=w.square),"color"in w&&s(0,a=w.color),"getGridCoordsFromSquare"in w&&s(7,r=w.getGridCoordsFromSquare),"flipped"in w&&s(8,n=w.flipped),"theme"in w&&s(1,l=w.theme),"mouseEvents"in w&&s(2,o=w.mouseEvents),"corner"in w&&s(3,u=w.corner)},t.$$.update=()=>{t.$$.dirty&256&&b()},[a,l,o,u,c,f,i,r,n]}class ta extends Te{constructor(e){super(),Le(this,e,ea,$i,Oe,{square:6,color:0,getGridCoordsFromSquare:7,flipped:8,theme:1,mouseEvents:2,corner:3})}}const sa=["a","b","c","d","e","f","g","h"],na=["8","7","6","5","4","3","2","1"];function ia(t){t.querySelectorAll("[fixed]").forEach(e=>e.remove())}function ts(t){return`${sa[t.x]}${na[t.y]}`}function wn(t,e){return Math.abs((t.x-e.x)*(t.y-e.y))===2}function ss(t,e){return`${ts(t)}${ts(e)}`}function aa(t,e){return!!(wn(t,e)||Math.abs(t.x-e.x)===Math.abs(t.y-e.y)||t.x===e.x!=(t.y===e.y))}function Cn(t,e,s,i,a,r){let n={x:-1,y:-1},l,o;wn(e,s)&&i?(Math.abs(s.x-e.x)===2?n={x:s.x,y:e.y}:n={x:e.x,y:s.y},n.y-e.y<0?o=Math.PI+Math.atan((n.x-e.x)/(n.y-e.y)):o=Math.atan((n.x-e.x)/Math.abs(n.y-e.y)),l={x:s.x-Math.sign(s.x-n.x)*(n.x!==s.x?.4:0),y:s.y-Math.sign(s.y-n.y)*(n.y!==s.y?.4:0)}):(s.y-e.y<0?o=Math.PI+Math.atan((s.x-e.x)/(s.y-e.y)):o=Math.atan((s.x-e.x)/Math.abs(s.y-e.y)),l={x:s.x-Math.sin(o)*.4,y:s.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};t.setAttribute("points",`${u.x+.5},${u.y+.5} ${n.x!==-1&&n.y!==-1&&i?`${n.x+.5},${n.y+.5} `:""}${l.x+.5},${l.y+.5}`),t.setAttribute("data-sqID",`${ss(e,s)}`),r!==void 0&&t.setAttribute("opacity",`${r}`),a!==void 0&&(t.setAttribute("marker-start",`url(#start-${a[0]})`),t.setAttribute("marker-end",`url(#end-${a[0]})`),t.setAttribute("stroke",a))}function At(t,e,s,i,a,r){if(!(e===void 0||s.x===-1&&s.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),i?e.setAttribute("stroke","red"):a?e.setAttribute("stroke","orange"):r?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),t.querySelectorAll(`\u0441ircle[cx="${s.x+.5}"][cy="${s.y+.5}"]`).forEach(n=>{e!==void 0&&n!==e&&(n.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const n=i?"red":a?"orange":r?"blue":"green";e.setAttribute("stroke",`${n}`),e.setAttribute("marker-start",`url(#start-${n[0]})`),e.setAttribute("marker-end",`url(#end-${n[0]})`),t.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(l=>{e instanceof SVGPolylineElement&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function Pn(t,e,s,i,a){const r=document.createElementNS("http://www.w3.org/2000/svg","polyline");return Cn(r,t,e,s,i,a),r.setAttribute("fill","none"),r.setAttribute("stroke-width","0.25"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("opacity",a!==void 0?`${a}`:"0.4"),r.setAttribute("marker-start",i?`url(#start-${i[0]})`:"url(#start-g)"),r.setAttribute("marker-end",i?`url(#end-${i[0]})`:"url(#end-g)"),r.setAttribute("stroke",i||"green"),r}function ns(t,e,s){const i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",`${t.x+.5}`),i.setAttribute("cy",`${t.y+.5}`),i.setAttribute("r","0.465"),i.setAttribute("opacity",s?`${s}`:"0.4"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.07"),i.setAttribute("stroke",e!=null?e:"green"),i}function ra(t,e,s){e.forEach(i=>{if(i.type==="circle"){const a=Tt(i.square),r=ns(a,i.color,i.opacity);t.appendChild(r)}else if(i.type==="arrow"){const a=Pn(Tt(i.from),Tt(i.to),s,i.color,i.opacity);a.setAttribute("fixed",""),t.appendChild(a)}})}function ws(t){t.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("fixed")||e.remove()})}function la(t,e){let{svg:s,flipped:i,enabled:a,settings:r}=e,n=!1,l={x:-1,y:-1},o,u;function c(A,O){const g=t.getBoundingClientRect(),h=i?g.width-(A-g.left):A-g.left,y=i?g.height-(O-g.top):O-g.top;return{x:Math.max(0,Math.min(7,Math.floor(h/(t.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(y/(t.clientHeight/8))))}}function f(A){if(u===void 0||l.x===-1&&l.y===-1)return;const O=c(A.clientX,A.clientY);r.onlyChessMove&&!aa(l,O)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),l.x===O.x&&l.y===O.y?(ss(l,O),u instanceof SVGPolylineElement&&(u.remove(),u=ns(O)),At(s,u,l,A.shiftKey,A.ctrlKey,A.altKey),s.appendChild(u),s.querySelectorAll(`circle[cx="${l.x+.5}"][cy="${l.y+.5}"]`).forEach(g=>{g!==u&&(o=g,u!==void 0&&g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,s.querySelectorAll(`polyline[data-sqID="${ss(l,O)}"]`).forEach(g=>{u===void 0||l.x===-1&&l.y===-1||g===u||(o=g,g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=Pn(l,O,r.knightLShape),At(s,u,l,A.shiftKey,A.ctrlKey,A.altKey),s.appendChild(u)):u instanceof SVGPolylineElement&&Cn(u,l,O,r.knightLShape)))}function b(A){A.preventDefault()}function w(A){A.preventDefault(),At(s,u,l,A.shiftKey,A.ctrlKey,A.altKey)}function F(A){if(A.button===0)n=!1;else if(A.button===2){if(l.x===-1&&l.y===-1)return;s.querySelectorAll("[remove]").forEach(O=>{O.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:ts(l),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&t.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,l={x:-1,y:-1},n=!1,window.removeEventListener("mousemove",f),window.removeEventListener("keydown",w),window.removeEventListener("keyup",w),window.removeEventListener("contextmenu",b)}window.removeEventListener("mouseup",F)}function P(A){if(A.button===0)n=!0,ws(s),window.addEventListener("mouseup",F);else if(A.button===2&&!n){const O=c(A.clientX,A.clientY);l=O,u=ns(O),At(s,u,l,A.shiftKey,A.ctrlKey,A.altKey),o=void 0,s.querySelectorAll(`circle[cx="${O.x+.5}"][cy="${O.y+.5}"]`).forEach(g=>{o=g,u!==void 0&&g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&s.appendChild(u),window.addEventListener("mousemove",f),window.addEventListener("mouseup",F),window.addEventListener("keydown",w),window.addEventListener("keyup",w),window.addEventListener("contextmenu",b)}}return a&&t.addEventListener("mousedown",P),{update(A){A.svg!==s&&(s=A.svg),A.enabled!==a&&(a=A.enabled,a?t.addEventListener("mousedown",P):(ws(s),t.removeEventListener("mousedown",P))),r=A.settings,i=A.flipped}}}function Cs(t,e,s){const i=t.slice();return i[8]=e[s],i}function Ps(t){let e,s,i,a;return{c(){e=Ne("marker"),s=Ne("path"),i=Ne("marker"),a=Ne("path"),this.h()},l(r){e=Re(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var n=W(e);s=Re(n,"path",{fill:!0,d:!0}),W(s).forEach(C),n.forEach(C),i=Re(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var l=W(i);a=Re(l,"path",{fill:!0,d:!0}),W(a).forEach(C),l.forEach(C),this.h()},h(){v(s,"fill",t[8]),v(s,"d","M 0 5 v 10 c 0 2.8 2.2 5 5 5 L 6 20 V 0 L 5 0 C 2.2 0 0 2.2 0 5 z"),v(e,"id","start-"+t[8][0]),v(e,"viewBox","0 0 5 20"),v(e,"refX","4"),v(e,"refY","10"),v(e,"markerUnits","strokeWidth"),v(e,"markerWidth","0.5"),v(e,"markerHeight","1"),v(e,"orient","auto"),v(a,"fill",t[8]),v(a,"d","M 9.5 9.5 l -8.7 -5 C 0.5 4.3 0 4.6 0 5 v 10 c 0 0.4 0.5 0.7 0.9 0.5 l 8.7 -5 C 9.9 10.3 9.9 9.7 9.5 9.5 z"),v(i,"id","end-"+t[8][0]),v(i,"viewBox","0 0 10 20"),v(i,"refX","0.2"),v(i,"refY","10"),v(i,"markerUnits","strokeWidth"),v(i,"orient","auto"),v(i,"fill","currentColor")},m(r,n){X(r,e,n),I(e,s),X(r,i,n),I(i,a)},p:Pe,d(r){r&&C(e),r&&C(i)}}}function oa(t){let e,s,i,a=t[2],r=[];for(let n=0;n<a.length;n+=1)r[n]=Ps(Cs(t,a,n));return{c(){e=Ne("svg"),s=Ne("defs");for(let n=0;n<r.length;n+=1)r[n].c();i=Ne("g"),this.h()},l(n){e=Re(n,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var l=W(e);s=Re(l,"defs",{});var o=W(s);for(let u=0;u<r.length;u+=1)r[u].l(o);o.forEach(C),i=Re(l,"g",{}),W(i).forEach(C),l.forEach(C),this.h()},h(){v(e,"xmlns","http://www.w3.org/2000/svg"),Fe(e,"transform","rotate("+(t[1]?"180deg":"0deg")+")"),v(e,"viewBox","0 0 8 8"),v(e,"class","svelte-19gv2n4")},m(n,l){X(n,e,l),I(e,s);for(let o=0;o<r.length;o+=1)r[o].m(s,null);I(e,i),t[5](i)},p(n,[l]){if(l&4){a=n[2];let o;for(o=0;o<a.length;o+=1){const u=Cs(n,a,o);r[o]?r[o].p(u,l):(r[o]=Ps(u),r[o].c(),r[o].m(s,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}l&2&&Fe(e,"transform","rotate("+(n[1]?"180deg":"0deg")+")")},i:Pe,o:Pe,d(n){n&&C(e),at(r,n),t[5](null)}}}function ua(t,e,s){let{flipped:i=!1}=e,{svg:a}=e,{knightLShape:r=!1}=e,{tools:n=[]}=e,l=!1;function o(f){!l||(ia(a),ra(a,f,r))}Rt(()=>{l=!0,o(n)});const u=["green","red","blue","orange"];function c(f){oe[f?"unshift":"push"](()=>{a=f,s(0,a)})}return t.$$set=f=>{"flipped"in f&&s(1,i=f.flipped),"svg"in f&&s(0,a=f.svg),"knightLShape"in f&&s(3,r=f.knightLShape),"tools"in f&&s(4,n=f.tools)},t.$$.update=()=>{t.$$.dirty&16&&o(n)},[a,i,u,r,n,c]}class fa extends Te{constructor(e){super(),Le(this,e,ua,oa,Oe,{flipped:1,svg:0,knightLShape:3,tools:4})}}function ys(t,{delay:e=0,duration:s=400,easing:i=ls,x:a=0,y:r=0,opacity:n=0}={}){const l=getComputedStyle(t),o=+l.opacity,u=l.transform==="none"?"":l.transform,c=o*(1-n);return{delay:e,duration:s,easing:i,css:(f,b)=>`
			transform: ${u} translate(${(1-f)*a}px, ${(1-f)*r}px);
			opacity: ${o-c*b}`}}function Ft(t,{delay:e=0,duration:s=400,easing:i=ls}={}){const a=getComputedStyle(t),r=+a.opacity,n=parseFloat(a.height),l=parseFloat(a.paddingTop),o=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),f=parseFloat(a.borderTopWidth),b=parseFloat(a.borderBottomWidth);return{delay:e,duration:s,easing:i,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*r};height: ${w*n}px;padding-top: ${w*l}px;padding-bottom: ${w*o}px;margin-top: ${w*u}px;margin-bottom: ${w*c}px;border-top-width: ${w*f}px;border-bottom-width: ${w*b}px;`}}function ca(t){let e,s,i,a;return{c(){e=z("button"),s=z("div"),this.h()},l(r){e=V(r,"BUTTON",{class:!0});var n=W(e);s=V(n,"DIV",{class:!0}),W(s).forEach(C),n.forEach(C),this.h()},h(){v(s,"class","piece "+t[0]+" svelte-l2mpzl"),v(e,"class","svelte-l2mpzl")},m(r,n){X(r,e,n),I(e,s),i||(a=ce(e,"click",t[1]),i=!0)},p:Pe,i:Pe,o:Pe,d(r){r&&C(e),i=!1,a()}}}function da(t,e,s){let{piece:i}=e,{isWhite:a}=e,{showModal:r}=e;const n=St(),l=(a?"w":"b")+i.toUpperCase(),o=()=>{n("newPromotion",i),s(2,r=!1)};return t.$$set=u=>{"piece"in u&&s(3,i=u.piece),"isWhite"in u&&s(4,a=u.isWhite),"showModal"in u&&s(2,r=u.showModal)},[l,o,r,i,a]}class ha extends Te{constructor(e){super(),Le(this,e,da,ca,Oe,{piece:3,isWhite:4,showModal:2})}}function As(t,e,s){const i=t.slice();return i[7]=e[s],i}function Ts(t){let e,s,i,a,r,n,l=["q","r","b","n"],o=[];for(let c=0;c<4;c+=1)o[c]=Ls(As(t,l,c));const u=c=>ee(o[c],1,1,()=>{o[c]=null});return{c(){e=z("div"),s=z("div");for(let c=0;c<4;c+=1)o[c].c();this.h()},l(c){e=V(c,"DIV",{class:!0});var f=W(e);s=V(f,"DIV",{class:!0});var b=W(s);for(let w=0;w<4;w+=1)o[w].l(b);b.forEach(C),f.forEach(C),this.h()},h(){v(s,"class","modal-content svelte-17eh97x"),v(e,"class",r="modal "+t[0]+" svelte-17eh97x")},m(c,f){X(c,e,f),I(e,s);for(let b=0;b<4;b+=1)o[b].m(s,null);n=!0},p(c,f){if(f&6){l=["q","r","b","n"];let b;for(b=0;b<4;b+=1){const w=As(c,l,b);o[b]?(o[b].p(w,f),Z(o[b],1)):(o[b]=Ls(w),o[b].c(),Z(o[b],1),o[b].m(s,null))}for(De(),b=4;b<4;b+=1)u(b);Be()}(!n||f&1&&r!==(r="modal "+c[0]+" svelte-17eh97x"))&&v(e,"class",r)},i(c){if(!n){for(let f=0;f<4;f+=1)Z(o[f]);ut(()=>{a&&a.end(1),i=Bn(s,ys,{x:100,duration:300}),i.start()}),n=!0}},o(c){o=o.filter(Boolean);for(let f=0;f<4;f+=1)ee(o[f]);i&&i.invalidate(),a=Un(s,ys,{x:-200,duration:100}),n=!1},d(c){c&&C(e),at(o,c),c&&a&&a.end()}}}function Ls(t){let e,s,i,a;function r(o){t[4](o)}function n(o){t[5](o)}let l={piece:t[7]};return t[2]!==void 0&&(l.isWhite=t[2]),t[1]!==void 0&&(l.showModal=t[1]),e=new ha({props:l}),oe.push(()=>be(e,"isWhite",r)),oe.push(()=>be(e,"showModal",n)),e.$on("newPromotion",t[6]),{c(){ve(e.$$.fragment)},l(o){_e(e.$$.fragment,o)},m(o,u){Ee(e,o,u),a=!0},p(o,u){const c={};!s&&u&4&&(s=!0,c.isWhite=o[2],pe(()=>s=!1)),!i&&u&2&&(i=!0,c.showModal=o[1],pe(()=>i=!1)),e.$set(c)},i(o){a||(Z(e.$$.fragment,o),a=!0)},o(o){ee(e.$$.fragment,o),a=!1},d(o){Me(e,o)}}}function ga(t){let e,s,i=t[1]&&Ts(t);return{c(){i&&i.c(),e=Ae()},l(a){i&&i.l(a),e=Ae()},m(a,r){i&&i.m(a,r),X(a,e,r),s=!0},p(a,[r]){a[1]?i?(i.p(a,r),r&2&&Z(i,1)):(i=Ts(a),i.c(),Z(i,1),i.m(e.parentNode,e)):i&&(De(),ee(i,1,1,()=>{i=null}),Be())},i(a){s||(Z(i),s=!0)},o(a){ee(i),s=!1},d(a){i&&i.d(a),a&&C(e)}}}function ba(t,e,s){let i=!1,a,{className:r=""}=e;function n(c){s(1,i=!0),c?s(2,a=!0):s(2,a=!1)}function l(c){a=c,s(2,a)}function o(c){i=c,s(1,i)}function u(c){je.call(this,t,c)}return t.$$set=c=>{"className"in c&&s(0,r=c.className)},[r,i,a,n,l,o,u]}class pa extends Te{constructor(e){super(),Le(this,e,ba,ga,Oe,{className:0,openPromotionModal:3})}get openPromotionModal(){return this.$$.ctx[3]}}const ma=""+new URL("../../assets/move-e4d827fe.wav",import.meta.url).href,va=""+new URL("../../assets/capture-3dff493a.wav",import.meta.url).href,_a=""+new URL("../../assets/castle-dcf4b2c5.wav",import.meta.url).href,Ea=""+new URL("../../assets/undo-b4184324.mp3",import.meta.url).href;function Os(t){let e,s,i,a;return{c(){e=z("audio"),s=z("track"),i=z("source"),this.h()},l(r){e=V(r,"AUDIO",{preload:!0});var n=W(e);s=V(n,"TRACK",{kind:!0}),i=V(n,"SOURCE",{src:!0}),n.forEach(C),this.h()},h(){v(s,"kind","captions"),Dt(i.src,a=ma)||v(i,"src",a),v(e,"preload","auto")},m(r,n){X(r,e,n),I(e,s),I(e,i),t[3](e)},p:Pe,d(r){r&&C(e),t[3](null)}}}function Is(t){let e,s,i,a;return{c(){e=z("audio"),s=z("track"),i=z("source"),this.h()},l(r){e=V(r,"AUDIO",{preload:!0});var n=W(e);s=V(n,"TRACK",{kind:!0}),i=V(n,"SOURCE",{src:!0}),n.forEach(C),this.h()},h(){v(s,"kind","captions"),Dt(i.src,a=va)||v(i,"src",a),v(e,"preload","auto")},m(r,n){X(r,e,n),I(e,s),I(e,i),t[4](e)},p:Pe,d(r){r&&C(e),t[4](null)}}}function qs(t){let e,s,i,a;return{c(){e=z("audio"),s=z("track"),i=z("source"),this.h()},l(r){e=V(r,"AUDIO",{preload:!0});var n=W(e);s=V(n,"TRACK",{kind:!0}),i=V(n,"SOURCE",{src:!0}),n.forEach(C),this.h()},h(){v(s,"kind","captions"),Dt(i.src,a=_a)||v(i,"src",a),v(e,"preload","auto")},m(r,n){X(r,e,n),I(e,s),I(e,i),t[5](e)},p:Pe,d(r){r&&C(e),t[5](null)}}}function Fs(t){let e,s,i,a;return{c(){e=z("audio"),s=z("track"),i=z("source"),this.h()},l(r){e=V(r,"AUDIO",{preload:!0});var n=W(e);s=V(n,"TRACK",{kind:!0}),i=V(n,"SOURCE",{src:!0}),n.forEach(C),this.h()},h(){v(s,"kind","captions"),Dt(i.src,a=Ea)||v(i,"src",a),v(e,"preload","auto")},m(r,n){X(r,e,n),I(e,s),I(e,i),t[6](e)},p:Pe,d(r){r&&C(e),t[6](null)}}}function Ma(t){let e,s,i,a,r=t[0].MOVE&&Os(t),n=t[0].CAPTURE&&Is(t),l=t[0].CASTLE&&qs(t),o=t[0].UNDO&&Fs(t);return{c(){r&&r.c(),e=te(),n&&n.c(),s=te(),l&&l.c(),i=te(),o&&o.c(),a=Ae()},l(u){r&&r.l(u),e=se(u),n&&n.l(u),s=se(u),l&&l.l(u),i=se(u),o&&o.l(u),a=Ae()},m(u,c){r&&r.m(u,c),X(u,e,c),n&&n.m(u,c),X(u,s,c),l&&l.m(u,c),X(u,i,c),o&&o.m(u,c),X(u,a,c)},p(u,[c]){u[0].MOVE?r?r.p(u,c):(r=Os(u),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0].CAPTURE?n?n.p(u,c):(n=Is(u),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null),u[0].CASTLE?l?l.p(u,c):(l=qs(u),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),u[0].UNDO?o?o.p(u,c):(o=Fs(u),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:Pe,o:Pe,d(u){r&&r.d(u),u&&C(e),n&&n.d(u),u&&C(s),l&&l.d(u),u&&C(i),o&&o.d(u),u&&C(a)}}}function ka(t,e,s){let{settings:i}=e;const a={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},r=()=>{a.CASTLE&&(a.CASTLE.pause(),s(1,a.CASTLE.currentTime=0,a)),a.MOVE&&(a.MOVE.pause(),s(1,a.MOVE.currentTime=0,a)),a.CAPTURE&&(a.CAPTURE.pause(),s(1,a.CAPTURE.currentTime=0,a)),a.UNDO&&(a.UNDO.pause(),s(1,a.UNDO.currentTime=0,a))},n=b=>b===void 0||i[b];function l(b){switch(r(),b){case"MOVE":a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CAPTURE":a.CAPTURE&&n("CAPTURE")?a.CAPTURE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CASTLE":a.CASTLE&&n("CASTLE")?a.CASTLE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"UNDO":a.UNDO&&n("UNDO")?(s(1,a.UNDO.volume=.3,a),a.UNDO.play()):a.MOVE&&n("MOVE")&&a.MOVE.play();break}}function o(b){oe[b?"unshift":"push"](()=>{a.MOVE=b,s(1,a)})}function u(b){oe[b?"unshift":"push"](()=>{a.CAPTURE=b,s(1,a)})}function c(b){oe[b?"unshift":"push"](()=>{a.CASTLE=b,s(1,a)})}function f(b){oe[b?"unshift":"push"](()=>{a.UNDO=b,s(1,a)})}return t.$$set=b=>{"settings"in b&&s(0,i=b.settings)},[i,a,l,o,u,c,f]}class Sa extends Te{constructor(e){super(),Le(this,e,ka,Ma,Oe,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}}const Ns=""+new URL("../../assets/standard-97995bf9.svg",import.meta.url).href,Rs=""+new URL("../../assets/darkBlue-02863507.svg",import.meta.url).href;function wa(t,e){let{mouseEvents:s}=e,i=e.curScale,a,r,n;function l(c){c.stopPropagation(),t.dispatchEvent(new CustomEvent("resizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-a)/3)),Math.max(0,Math.min(100,n+(c.pageY-r)/3))))}}))}function o(c){c.stopPropagation(),t.dispatchEvent(new CustomEvent("endResizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-a)/3)),Math.max(0,Math.min(100,n+(c.pageY-r)/3))))}})),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",o)}function u(c){!s||(c.stopPropagation(),c.button===0&&(a=c.pageX,r=c.pageY,n=i,window.addEventListener("pointermove",l),window.addEventListener("pointerup",o)))}return t.addEventListener("pointerdown",u),{update(c){i=c.curScale,s!==c.mouseEvents&&(s=c.mouseEvents)},destroy(){t.removeEventListener("mousedown",u)}}}function Ca(t){let e,s,i,a,r,n,l;return{c(){e=z("div"),s=Ne("svg"),i=Ne("path"),this.h()},l(o){e=V(o,"DIV",{style:!0,class:!0});var u=W(e);s=Re(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var c=W(s);i=Re(c,"path",{d:!0}),W(i).forEach(C),c.forEach(C),u.forEach(C),this.h()},h(){v(i,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),v(s,"xmlns","http://www.w3.org/2000/svg"),v(s,"viewBox","0 0 16 16"),v(s,"fill","currentColor"),Fe(e,"color",ze.colors[t[0].state.board.boardTheme].black),v(e,"class",a=cs(t[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")},m(o,u){X(o,e,u),I(e,s),I(s,i),n||(l=[ce(e,"pointerdown",bn(t[3])),is(r=wa.call(null,e,{mouseEvents:t[1],curScale:t[0].state.board.scale})),ce(e,"resizing",t[4]),ce(e,"endResizing",t[5])],n=!0)},p(o,[u]){u&1&&Fe(e,"color",ze.colors[o[0].state.board.boardTheme].black),u&2&&a!==(a=cs(o[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")&&v(e,"class",a),r&&as(r.update)&&u&3&&r.update.call(null,{mouseEvents:o[1],curScale:o[0].state.board.scale})},i:Pe,o:Pe,d(o){o&&C(e),n=!1,rt(l)}}}function Pa(t,e,s){const i=St();let{chessboard:a}=e,{mouseEvents:r=!0}=e;function n(u){je.call(this,t,u)}const l=u=>i("resizing",u.detail.scale),o=u=>i("endResizing",u.detail.scale);return t.$$set=u=>{"chessboard"in u&&s(0,a=u.chessboard),"mouseEvents"in u&&s(1,r=u.mouseEvents)},[a,r,i,n,l,o]}class ya extends Te{constructor(e){super(),Le(this,e,Pa,Ca,Oe,{chessboard:0,mouseEvents:1})}}function Ds(t,e,s){const i=t.slice();return i[83]=e[s],i}function Bs(t,e,s){const i=t.slice();return i[86]=e[s],i}function Us(t){let e=[],s=new Map,i,a,r=t[6].state.pieces;const n=l=>l[86];for(let l=0;l<r.length;l+=1){let o=Bs(t,r,l),u=n(o);s.set(u,e[l]=Hs(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Ae()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Ae()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);X(l,i,o),a=!0},p(l,o){o[0]&905292&&(r=l[6].state.pieces,De(),e=pn(e,o,n,1,l,r,s,i.parentNode,mn,Hs,i,Bs),Be())},i(l){if(!a){for(let o=0;o<r.length;o+=1)Z(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)ee(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&C(i)}}}function Hs(t,e){let s,i,a;function r(){return e[59](e[86])}function n(){return e[60](e[86])}function l(...c){return e[61](e[86],...c)}function o(){return e[63](e[86])}function u(){return e[65](e[86])}return i=new Sn({props:{square:e[86].square,name:e[86].name,boardSize:e[6].state.board.size,mouseEvents:e[6].state.board.mouseEvents,legalState:e[6].state.legal,draggableState:e[6].state.draggable,selectableState:e[6].state.selectable,movableState:e[6].state.movable,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped}}),i.$on("move",e[14]),i.$on("clicked",r),i.$on("startMoving",n),i.$on("moving",l),i.$on("endDragging",e[62]),i.$on("select",o),i.$on("deselect",e[64]),i.$on("captured",u),{key:t,first:null,c(){s=Ae(),ve(i.$$.fragment),this.h()},l(c){s=Ae(),_e(i.$$.fragment,c),this.h()},h(){this.first=s},m(c,f){X(c,s,f),Ee(i,c,f),a=!0},p(c,f){e=c;const b={};f[0]&64&&(b.square=e[86].square),f[0]&64&&(b.name=e[86].name),f[0]&64&&(b.boardSize=e[6].state.board.size),f[0]&64&&(b.mouseEvents=e[6].state.board.mouseEvents),f[0]&64&&(b.legalState=e[6].state.legal),f[0]&64&&(b.draggableState=e[6].state.draggable),f[0]&64&&(b.selectableState=e[6].state.selectable),f[0]&64&&(b.movableState=e[6].state.movable),f[0]&64&&(b.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),f[0]&64&&(b.flipped=e[6].flipped),i.$set(b)},i(c){a||(Z(i.$$.fragment,c),a=!0)},o(c){ee(i.$$.fragment,c),a=!1},d(c){c&&C(s),Me(i,c)}}}function zs(t){let e,s;return e=new Sn({props:{isGhost:!0,boardSize:t[6].state.board.size,square:t[6].ghostPiece.square,name:t[6].ghostPiece.name,getGridCoordsFromSquare:t[6].getGridCoordsFromSquare,flipped:t[6].flipped}}),{c(){ve(e.$$.fragment)},l(i){_e(e.$$.fragment,i)},m(i,a){Ee(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.boardSize=i[6].state.board.size),a[0]&64&&(r.square=i[6].ghostPiece.square),a[0]&64&&(r.name=i[6].ghostPiece.name),a[0]&64&&(r.getGridCoordsFromSquare=i[6].getGridCoordsFromSquare),a[0]&64&&(r.flipped=i[6].flipped),e.$set(r)},i(i){s||(Z(e.$$.fragment,i),s=!0)},o(i){ee(e.$$.fragment,i),s=!1},d(i){Me(e,i)}}}function Vs(t){let e=[],s=new Map,i,a,r=[...t[6].state.markedSquares];const n=l=>l[83];for(let l=0;l<r.length;l+=1){let o=Ds(t,r,l),u=n(o);s.set(u,e[l]=Ks(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Ae()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Ae()},m(l,o){for(let u=0;u<e.length;u+=1)e[u].m(l,o);X(l,i,o),a=!0},p(l,o){o[0]&1048642&&(r=[...l[6].state.markedSquares],De(),e=pn(e,o,n,1,l,r,s,i.parentNode,mn,Ks,i,Ds),Be())},i(l){if(!a){for(let o=0;o<r.length;o+=1)Z(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)ee(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&C(i)}}}function Ks(t,e){let s,i,a;return i=new ta({props:{theme:e[6].state.board.boardTheme,square:e[83].square,color:e[83].color,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped,mouseEvents:e[6].state.board.mouseEvents,corner:e[20](e[83].square)}}),i.$on("dragenter",e[66]),{key:t,first:null,c(){s=Ae(),ve(i.$$.fragment),this.h()},l(r){s=Ae(),_e(i.$$.fragment,r),this.h()},h(){this.first=s},m(r,n){X(r,s,n),Ee(i,r,n),a=!0},p(r,n){e=r;const l={};n[0]&64&&(l.theme=e[6].state.board.boardTheme),n[0]&64&&(l.square=e[83].square),n[0]&64&&(l.color=e[83].color),n[0]&64&&(l.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),n[0]&64&&(l.flipped=e[6].flipped),n[0]&64&&(l.mouseEvents=e[6].state.board.mouseEvents),n[0]&64&&(l.corner=e[20](e[83].square)),i.$set(l)},i(r){a||(Z(i.$$.fragment,r),a=!0)},o(r){ee(i.$$.fragment,r),a=!1},d(r){r&&C(s),Me(i,r)}}}function Ws(t){let e,s;return e=new Ei({props:{theme:t[6].state.board.boardTheme,flipped:t[6].flipped}}),{c(){ve(e.$$.fragment)},l(i){_e(e.$$.fragment,i)},m(i,a){Ee(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.theme=i[6].state.board.boardTheme),a[0]&64&&(r.flipped=i[6].flipped),e.$set(r)},i(i){s||(Z(e.$$.fragment,i),s=!0)},o(i){ee(e.$$.fragment,i),s=!1},d(i){Me(e,i)}}}function js(t){let e,s;return e=new ya({props:{chessboard:t[6],mouseEvents:t[6].state.board.mouseEvents}}),e.$on("resizing",t[67]),{c(){ve(e.$$.fragment)},l(i){_e(e.$$.fragment,i)},m(i,a){Ee(e,i,a),s=!0},p(i,a){const r={};a[0]&64&&(r.chessboard=i[6]),a[0]&64&&(r.mouseEvents=i[6].state.board.mouseEvents),e.$set(r)},i(i){s||(Z(e.$$.fragment,i),s=!0)},o(i){ee(e.$$.fragment,i),s=!1},d(i){Me(e,i)}}}function Gs(t){let e,s,i;function a(n){t[68](n)}let r={flipped:t[6].flipped,tools:t[6].state.drawTools.tools,knightLShape:t[6].state.drawTools.settings.knightLShape};return t[8]!==void 0&&(r.svg=t[8]),e=new fa({props:r}),oe.push(()=>be(e,"svg",a)),{c(){ve(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,l){Ee(e,n,l),i=!0},p(n,l){const o={};l[0]&64&&(o.flipped=n[6].flipped),l[0]&64&&(o.tools=n[6].state.drawTools.tools),l[0]&64&&(o.knightLShape=n[6].state.drawTools.settings.knightLShape),!s&&l[0]&256&&(s=!0,o.svg=n[8],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){ee(e.$$.fragment,n),i=!1},d(n){Me(e,n)}}}function Qs(t){let e,s,i={};return e=new pa({props:i}),t[69](e),e.$on("newPromotion",t[17]),{c(){ve(e.$$.fragment)},l(a){_e(e.$$.fragment,a)},m(a,r){Ee(e,a,r),s=!0},p(a,r){const n={};e.$set(n)},i(a){s||(Z(e.$$.fragment,a),s=!0)},o(a){ee(e.$$.fragment,a),s=!1},d(a){t[69](null),Me(e,a)}}}function Xs(t){let e,s,i={settings:t[6].state.sounds.settings};return e=new Sa({props:i}),t[74](e),{c(){ve(e.$$.fragment)},l(a){_e(e.$$.fragment,a)},m(a,r){Ee(e,a,r),s=!0},p(a,r){const n={};r[0]&64&&(n.settings=a[6].state.sounds.settings),e.$set(n)},i(a){s||(Z(e.$$.fragment,a),s=!0)},o(a){ee(e.$$.fragment,a),s=!1},d(a){t[74](null),Me(e,a)}}}function Aa(t){let e,s,i,a,r,n,l,o,u,c,f,b,w,F,P,A,O,g=t[6].state.board.startFen&&Us(t),h=t[6].ghostPiece&&zs(t),y=t[6].highlightEnabled&&Vs(t),T=t[6].state.board.notation&&t[11]&&Ws(t),L=t[6].state.board.resizible&&t[11]&&js(t),R=t[6].state.drawTools.enabled&&Gs(t),H=t[6].legalEnabled&&Qs(t),B=t[6].soundsEnabled&&Xs(t);return{c(){e=z("div"),s=z("div"),i=z("div"),g&&g.c(),r=te(),h&&h.c(),n=te(),y&&y.c(),l=te(),T&&T.c(),o=te(),L&&L.c(),u=te(),R&&R.c(),c=te(),H&&H.c(),w=te(),B&&B.c(),F=Ae(),this.h()},l(N){e=V(N,"DIV",{class:!0});var Q=W(e);s=V(Q,"DIV",{class:!0,style:!0});var ne=W(s);i=V(ne,"DIV",{style:!0,class:!0});var Se=W(i);g&&g.l(Se),Se.forEach(C),r=se(ne),h&&h.l(ne),n=se(ne),y&&y.l(ne),l=se(ne),T&&T.l(ne),o=se(ne),L&&L.l(ne),u=se(ne),R&&R.l(ne),c=se(ne),H&&H.l(ne),ne.forEach(C),Q.forEach(C),w=se(N),B&&B.l(N),F=Ae(),this.h()},h(){Fe(i,"width","100%"),Fe(i,"height","100%"),v(i,"class",a="noselect"+(t[6].whiteToMove?" w":" b")),v(s,"class",f="noselect board text-sm "+t[0]+(!t[6].legalEnabled&&t[6].selectedPiece?" pointer":"")+" svelte-iuha5g"),Fe(s,"--boardTheme","url("+(t[6].state.board.boardTheme==="standard"?Ns:Rs)+")"),v(e,"class","boardWrapper svelte-iuha5g")},m(N,Q){X(N,e,Q),I(e,s),I(s,i),g&&g.m(i,null),I(s,r),h&&h.m(s,null),I(s,n),y&&y.m(s,null),I(s,l),T&&T.m(s,null),I(s,o),L&&L.m(s,null),I(s,u),R&&R.m(s,null),I(s,c),H&&H.m(s,null),t[72](s),t[73](e),X(N,w,Q),B&&B.m(N,Q),X(N,F,Q),P=!0,A||(O=[ce(s,"pointerdown",t[13]),ce(s,"contextmenu",ds(t[57])),ce(s,"drag",ds(t[58])),is(b=la.call(null,s,{svg:t[8],flipped:t[6].flipped,enabled:t[6].state.drawTools.enabled&&t[6].state.board.mouseEvents,settings:t[6].state.drawTools.settings})),ce(s,"drawCircle",t[70]),ce(s,"drawArrow",t[71])],A=!0)},p(N,Q){N[6].state.board.startFen?g?(g.p(N,Q),Q[0]&64&&Z(g,1)):(g=Us(N),g.c(),Z(g,1),g.m(i,null)):g&&(De(),ee(g,1,1,()=>{g=null}),Be()),(!P||Q[0]&64&&a!==(a="noselect"+(N[6].whiteToMove?" w":" b")))&&v(i,"class",a),N[6].ghostPiece?h?(h.p(N,Q),Q[0]&64&&Z(h,1)):(h=zs(N),h.c(),Z(h,1),h.m(s,n)):h&&(De(),ee(h,1,1,()=>{h=null}),Be()),N[6].highlightEnabled?y?(y.p(N,Q),Q[0]&64&&Z(y,1)):(y=Vs(N),y.c(),Z(y,1),y.m(s,l)):y&&(De(),ee(y,1,1,()=>{y=null}),Be()),N[6].state.board.notation&&N[11]?T?(T.p(N,Q),Q[0]&2112&&Z(T,1)):(T=Ws(N),T.c(),Z(T,1),T.m(s,o)):T&&(De(),ee(T,1,1,()=>{T=null}),Be()),N[6].state.board.resizible&&N[11]?L?(L.p(N,Q),Q[0]&2112&&Z(L,1)):(L=js(N),L.c(),Z(L,1),L.m(s,u)):L&&(De(),ee(L,1,1,()=>{L=null}),Be()),N[6].state.drawTools.enabled?R?(R.p(N,Q),Q[0]&64&&Z(R,1)):(R=Gs(N),R.c(),Z(R,1),R.m(s,c)):R&&(De(),ee(R,1,1,()=>{R=null}),Be()),N[6].legalEnabled?H?(H.p(N,Q),Q[0]&64&&Z(H,1)):(H=Qs(N),H.c(),Z(H,1),H.m(s,null)):H&&(De(),ee(H,1,1,()=>{H=null}),Be()),(!P||Q[0]&65&&f!==(f="noselect board text-sm "+N[0]+(!N[6].legalEnabled&&N[6].selectedPiece?" pointer":"")+" svelte-iuha5g"))&&v(s,"class",f),(!P||Q[0]&64)&&Fe(s,"--boardTheme","url("+(N[6].state.board.boardTheme==="standard"?Ns:Rs)+")"),b&&as(b.update)&&Q[0]&320&&b.update.call(null,{svg:N[8],flipped:N[6].flipped,enabled:N[6].state.drawTools.enabled&&N[6].state.board.mouseEvents,settings:N[6].state.drawTools.settings}),N[6].soundsEnabled?B?(B.p(N,Q),Q[0]&64&&Z(B,1)):(B=Xs(N),B.c(),Z(B,1),B.m(F.parentNode,F)):B&&(De(),ee(B,1,1,()=>{B=null}),Be())},i(N){P||(Z(g),Z(h),Z(y),Z(T),Z(L),Z(R),Z(H),Z(B),P=!0)},o(N){ee(g),ee(h),ee(y),ee(T),ee(L),ee(R),ee(H),ee(B),P=!1},d(N){N&&C(e),g&&g.d(),h&&h.d(),y&&y.d(),T&&T.d(),L&&L.d(),R&&R.d(),H&&H.d(),t[72](null),t[73](null),N&&C(w),B&&B.d(N),N&&C(F),A=!1,rt(O)}}}function Ta(t,e,s){let i,{config:a}=e,{className:r=""}=e;const n=new ci(a),l=St();let o,u,c,f,b,w="",F=!1;const P=p=>{n.clearAllSquares(p),p===J.LEGAL&&n.clearAllSquares(J.LEGALHOVER),p===J.PREMOVE&&n.clearAllSquares(J.PREMOVEHOVER),s(6,n)},A=(p,K)=>{!O(yt(K))||(n.highlightSquare(p,K),s(6,n))},O=p=>n.highlightEnabled&&(p===void 0||n.highlightSettings[typeof p=="string"?p:yt(p)]),g=p=>{if(!n.selectableEnabled&&n.draggableEnabled&&ie(p),!n.selectableEnabled)return;h(!0);const K=n.getPieceFromSquare(p);K!==void 0&&(s(6,n.selectedPiece=K,n),ie())},h=(p=!0)=>{P(J.SELECT),P(J.LEGAL),P(J.PREMOVE),s(6,n.selectedPiece=void 0,n),p&&(P(J.NEXTMOVE),s(6,n.currentPreMove="",n))},y=p=>{P(J.CHECK),p&&n.legalEnabled&&A(p,J.CHECK),s(6,n)},T=()=>{P(J.CHECK)},L=p=>{n.flipBoard(p),s(6,n)},R=(p,K)=>{p.forEach(re=>n.highlightSquare(re,K)),s(6,n)},H=(p,K=!0,re=J.MOVE)=>{p.length<4||!O(yt(re))||(K&&P(re),R([p.substring(0,2),p.substring(2,4)],re))},B=(p,K,re=J.MOVE)=>{const de=[];K&&P(re),p.forEach(He=>{He.length<4||(de.push(He.substring(0,2)),de.push(He.substring(2,4)))}),R(de,re)},N=p=>{A(p.substring(2,4),J.LEGAL)},Q=(p,K,re=J.LEGAL)=>{P(re),O(yt(re))&&(p.forEach(de=>{de.length<4||(K===void 0||de.substring(0,2)===K)&&n.highlightSquare(de.substring(2,4),re)}),s(6,n))},ne=(p,K=!0)=>{n.makeMove(p),K&&H(p),s(6,n)},Se=p=>{var K;n.removePiece(p),n.ghostPieceEnabled&&((K=n.ghostPiece)==null?void 0:K.square)===p&&(n.removeGhostPiece(),s(6,n)),s(6,n)},x=p=>n.whiteToMove&&p[0]==="w"||!n.whiteToMove&&p[0]==="b",d=(p=!1)=>{!n.legalEnabled||(n.state.callbacks.getWhiteToMove&&s(6,n.whiteToMove=n.state.callbacks.getWhiteToMove(),n),n.state.callbacks.getPreMoves&&n.preMovesEnabled?s(6,n.preMoves=n.state.callbacks.getPreMoves(),n):s(6,n.preMoves=[],n),n.state.callbacks.getLegalMoves&&n.state.legal.enabled?s(6,n.legalMoves=n.state.callbacks.getLegalMoves(),n):s(6,n.legalMoves=[],n),p&&ie(),n.state.callbacks.getInCheck&&n.state.callbacks.getInCheck()?n.whiteToMove?y(n.getWhiteKingSquare()):y(n.getBlackKingSquare()):T(),n.state.callbacks.getLastMove?(s(6,n.lastMove=n.state.callbacks.getLastMove(),n),H(n.lastMove)):P(J.MOVE))},k=p=>{n.soundsEnabled&&f&&f.playMoveSound(p)},S=p=>{n.setGhostPiece(p),s(6,n)},M=()=>{n.removeGhostPiece(),s(6,n)},m=p=>{if(p.substring(0,2)===p.substring(2,4))return;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(p),h(!1);const K=n.getRookMoveIfIsCastling(p),re=n.getCapturedPawnSquareIfIsEnPassant(p);if(K&&n.legalEnabled&&n.state.legal.settings.allowCastling?(ne(K,!1),k("CASTLE")):re&&n.legalEnabled&&n.state.legal.settings.allowEnPassant?(Se(re),k("CAPTURE")):n.isCapture(p)?k("CAPTURE"):k("MOVE"),M(),ne(p),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(p),d(),n.legalEnabled&&n.preMovesEnabled&&n.currentPreMove!==""){if(n.legalMoves.includes(n.currentPreMove)){const de=n.currentPreMove;zn().then(()=>{m(de)})}s(6,n.currentPreMove="",n),P(J.NEXTMOVE)}},q=p=>{!n.legalEnabled||!n.preMovesEnabled||!n.movableEnabled||(P(J.PREMOVE),H(p,!0,J.NEXTMOVE),s(6,n.currentPreMove=p,n),l("nextMove",{move:p}))},E=p=>{const K=n.getPieceFromSquare(p.substring(0,2));if(!K)return;const re=K.name[0]==="w"?he.WHITE:he.BLACK;b.openPromotionModal(re===he.WHITE),w=p,n.makeMove(p),P(J.LEGAL),P(J.SELECT),H(p)},_=(p,K)=>{n.clearSquare(p,K),s(6,n)},G=()=>{n.clearAllPieces(),s(6,n)},$=(p,K)=>{n.setPiece(p,K),s(6,n)},ae=(p,K)=>{var de;const re=(de=n.getPieceFromSquare(p))==null?void 0:de.name;!re||(K!==void 0?n.setPiece(p,`${K===he.WHITE?"w":"b"}${re[1]}`):n.setPiece(p,`${re[0]==="w"?"b":"w"}${re[1]}`),s(6,n))},j=(p,K)=>{const re=Math.floor(p/n.state.board.size*8),de=Math.floor(K/n.state.board.size*8),He=n.flipped?Math.abs(re-7):re,tt=n.flipped?de:Math.abs(de-7);return`${Object.keys(n.letters)[He]}${(tt+1).toString()}`},fe=p=>{if(!n.state.board.mouseEvents)return;if(p.button===2){h();return}if(!n.movableEnabled)return;const K=o.getBoundingClientRect(),re=p.clientX-K.left,de=p.clientY-K.top,He=j(re,de),tt=n.getPieceFromSquare(He);if(l("squareClick",{square:He,piece:tt?tt.name:void 0}),!n.selectableEnabled&&!n.draggableEnabled){h();return}if(!n.selectedPiece||n.selectedPiece.square===He)return;const Ue=n.selectedPiece.square+He;if(!n.legalEnabled){m(Ue),h();return}if(!x(n.selectedPiece.name)){n.preMovesEnabled&&n.preMoves.includes(Ue)&&(n.isPromotion(Ue)?q(`${Ue}q`):q(Ue)),h(!1);return}(tt===void 0||tt.name[0]!==n.selectedPiece.name[0])&&x(n.selectedPiece.name)&&(n.isPromotion(Ue)&&n.legalMoves.includes(Ue)?E(Ue):n.legalMoves.includes(Ue)&&m(Ue),h())},Y=p=>{const K=p.detail;n.legalEnabled?n.isPromotion(K)&&n.legalMoves.includes(`${K}q`)?E(K):n.legalMoves.includes(K)?m(K):n.preMovesEnabled&&n.preMoves.includes(K)?n.isPromotion(K)?q(`${K}q`):q(K):h():m(K),P(J.LEGAL),P(J.PREMOVE),s(6,n)},ie=p=>{var K;if(n.selectableEnabled||n.draggableEnabled){const re=n.getPieceFromSquare(p!=null?p:(K=n.selectedPiece)==null?void 0:K.square);if(!re||(n.selectableEnabled&&A(re.square,J.SELECT),!n.legalEnabled))return;P(J.LEGAL),P(J.PREMOVE),x(re.name)&&Q(n.legalMoves,re.square),x(re.name)||Q(n.preMoves,re.square,J.PREMOVE)}},ue=(p,K=!0,re="MOVE")=>{if(n.updatePiecesWithFen(p),K&&h(),P(),M(),d(!1),s(6,n.currentPreMove="",n),n.state.callbacks.getLastMove){const de=n.state.callbacks.getLastMove();s(6,n.lastMove=de,n),re!==!1&&(re!=="MOVE"?k(re):n.isCastling(de)?k("CASTLE"):k(re)),H(de)}else re!==!1&&k(re);ie(),s(6,n)},me=()=>n.getShortFEN(),Ie=p=>{!p||n.state.board.size===p||(s(6,n.state.board.size=p,n),n.state.board.resizible&&document.body.style.setProperty("--boardSize",`${n.state.board.size}px`))},le=p=>{!p||n.state.board.scale===p||(s(6,n.state.board.scale=p,n),n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`))},ke=p=>{var K;return(K=n.getPieceFromSquare(p))==null?void 0:K.name},qe=p=>{s(6,n.state.drawTools.tools=p,n)},Xe=p=>{s(6,n.state.drawTools.tools=n.state.drawTools.tools.filter(K=>p?(!p.type||K.type!==p.type)&&(!p.from||K.type==="arrow"&&K.from!==p.from||K.type==="circle"&&K.square!==p.from)&&(!p.to||K.type==="arrow"&&K.to!==p.to)&&(p.fixed===void 0||K.fixed!==p.fixed):!1),n)},Ye=p=>{p===!1?s(6,n.state.movable.enabled=!1,n):(s(6,n.state.movable.enabled=!0,n),s(6,n.state.movable.color=p===!0?he.BOTH:p,n))},Ge=p=>{p.length<4||(s(6,n.lastMove=p,n),H(p))},Ve=p=>{s(6,n.legalMoves=p,n)},gt=p=>{s(6,n.preMoves=p,n)},bt=()=>n.state,Qe=p=>{s(6,n.state=p,n),P(),d(!1),H(n.lastMove),H(n.currentPreMove,!0,J.NEXTMOVE),ie()},pt=p=>{p!==void 0&&(n.setConfigSettings(p),s(6,n),Qe(n.state))},ft=p=>p.getConfig(),ct=(p,K)=>{const re=o.getBoundingClientRect();n.legalEnabled&&(x(K.name)&&n.legalHover(j(p.detail.x-re.x,p.detail.y-re.y)),!x(K.name)&&n.preMovesEnabled&&n.preMoveHover(j(p.detail.x-re.x,p.detail.y-re.y))),s(6,n)},Ke=p=>{n.ghostPieceEnabled&&S(p),P(J.SELECT)},mt=p=>{const K=n.getPieceFromSquare(w.substring(2,4));if(!K)return;const re=K.name[0]+p.detail.toUpperCase(),de=w+p.detail;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(de),n.setPiece(K.square,re),s(6,n),k("MOVE"),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(de),d()},We=p=>{if(!n.selectedPiece)return;const K=n.selectedPiece.square+p;n.legalEnabled?n.isPromotion(K)&&n.legalMoves.includes(`${K}q`)?E(K):n.legalMoves.includes(K)?m(K):n.preMovesEnabled&&n.preMoves.includes(K)?n.isPromotion(K)?q(`${K}q`):q(K):h():m(K),h(!1)},Ze=p=>{const K=n.getPieceFromSquare(p.square);K&&K.square===p.square&&K.name===p.name&&A(p.square,J.SELECT)};function vt(p){if(!o||!p)return;if(i==null||i(),typeof window.ResizeObserver>"u")throw new Error("window.ResizeObserver is missing.");const K=new ResizeObserver(re=>{const de=p.getBoundingClientRect();re.forEach(()=>{s(6,n.state.board.size=Math.floor(de.width*window.devicePixelRatio/8)*8/window.devicePixelRatio,n),o.style.setProperty("width",`${Math.floor(de.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`),o.style.setProperty("height",`${Math.floor(de.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`)})});return K.observe(p),()=>{K.unobserve(p),K.disconnect()}}const wt=p=>p==="a1"?n.flipped?"top-right":"bottom-left":p==="a8"?n.flipped?"bottom-right":"top-left":p==="h1"?n.flipped?"top-left":"bottom-right":p==="h8"?n.flipped?"bottom-left":"top-right":"";Rt(()=>{s(11,F=!0),d(!0),n.state.callbacks.getLastMove&&H(n.state.callbacks.getLastMove()),n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`)}),Hn(()=>{i==null||i(),n.state.board.resizible&&document.body.style.removeProperty("--boardScale")});function Bt(p){je.call(this,t,p)}function Ut(p){je.call(this,t,p)}const Ht=p=>{l("piececlick",{piece:p}),g(p.square)},zt=p=>{l("startDragging",{piece:p}),Ke(p)},Vt=(p,K)=>ct(K,p);function $e(p){je.call(this,t,p)}const Kt=p=>Ze(p),Wt=()=>{h()},_t=p=>We(p.square),jt=p=>{A(p.detail.square,J.LEGALHOVER)},Gt=p=>{le(p.detail)};function Qt(p){c=p,s(8,c)}function Xt(p){oe[p?"unshift":"push"](()=>{b=p,s(10,b)})}const Yt=p=>l("drawCircle",{square:p.detail.square,color:p.detail.color}),et=p=>l("drawArrow",{move:p.detail.move,color:p.detail.color});function Zt(p){oe[p?"unshift":"push"](()=>{o=p,s(7,o)})}function Ct(p){oe[p?"unshift":"push"](()=>{u=p,s(5,u)})}function Jt(p){oe[p?"unshift":"push"](()=>{f=p,s(9,f)})}return t.$$set=p=>{"config"in p&&s(21,a=p.config),"className"in p&&s(0,r=p.className)},t.$$.update=()=>{t.$$.dirty[0]&32&&(i=vt(u))},[r,A,g,h,le,u,n,o,c,f,b,F,l,fe,Y,ct,Ke,mt,We,Ze,wt,a,P,y,T,L,R,H,B,N,Q,ne,Se,d,k,m,q,E,_,G,$,ae,j,ue,me,Ie,ke,qe,Xe,Ye,Ge,Ve,gt,bt,Qe,pt,ft,Bt,Ut,Ht,zt,Vt,$e,Kt,Wt,_t,jt,Gt,Qt,Xt,Yt,et,Zt,Ct,Jt]}class La extends Te{constructor(e){super(),Le(this,e,Ta,Aa,Oe,{config:21,className:0,clearAllSquares:22,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:23,removeCheckSquare:24,flipBoard:25,highlightManySquares:26,highlightMove:27,highlightMoves:28,highlightLegalMove:29,highlightLegalMoves:30,movePiece:31,removePiece:32,updateLegalState:33,playMoveSound:34,makeMove:35,makeNextMove:36,makeMovePromotion:37,removeSquareHighlight:38,removeAllPiece:39,createPiece:40,changeColorOfPiece:41,getSquareFromCoords:42,setFEN:43,getShortFEN:44,setSize:45,setScale:4,getPieceFromSquare:46,setTools:47,removeTools:48,setMovableColor:49,setLastMove:50,setLegalMoves:51,setPreMoves:52,getState:53,setState:54,setConfigSettings:55,getConfigFromState:56},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[22]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[23]}get removeCheckSquare(){return this.$$.ctx[24]}get flipBoard(){return this.$$.ctx[25]}get highlightManySquares(){return this.$$.ctx[26]}get highlightMove(){return this.$$.ctx[27]}get highlightMoves(){return this.$$.ctx[28]}get highlightLegalMove(){return this.$$.ctx[29]}get highlightLegalMoves(){return this.$$.ctx[30]}get movePiece(){return this.$$.ctx[31]}get removePiece(){return this.$$.ctx[32]}get updateLegalState(){return this.$$.ctx[33]}get playMoveSound(){return this.$$.ctx[34]}get makeMove(){return this.$$.ctx[35]}get makeNextMove(){return this.$$.ctx[36]}get makeMovePromotion(){return this.$$.ctx[37]}get removeSquareHighlight(){return this.$$.ctx[38]}get removeAllPiece(){return this.$$.ctx[39]}get createPiece(){return this.$$.ctx[40]}get changeColorOfPiece(){return this.$$.ctx[41]}get getSquareFromCoords(){return this.$$.ctx[42]}get setFEN(){return this.$$.ctx[43]}get getShortFEN(){return this.$$.ctx[44]}get setSize(){return this.$$.ctx[45]}get setScale(){return this.$$.ctx[4]}get getPieceFromSquare(){return this.$$.ctx[46]}get setTools(){return this.$$.ctx[47]}get removeTools(){return this.$$.ctx[48]}get setMovableColor(){return this.$$.ctx[49]}get setLastMove(){return this.$$.ctx[50]}get setLegalMoves(){return this.$$.ctx[51]}get setPreMoves(){return this.$$.ctx[52]}get getState(){return this.$$.ctx[53]}get setState(){return this.$$.ctx[54]}get setConfigSettings(){return this.$$.ctx[55]}get getConfigFromState(){return this.$$.ctx[56]}}const Ys=["standard","darkBlue"],Zs=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function Js(t){let e,s,i;return{c(){e=z("input"),this.h()},l(a){e=V(a,"INPUT",{type:!0,class:!0}),this.h()},h(){v(e,"type","checkbox"),v(e,"class","mr-1")},m(a,r){X(a,e,r),e.checked=t[0],s||(i=[ce(e,"change",t[8]),ce(e,"click",bn(t[7])),ce(e,"change",t[9])],s=!0)},p(a,r){r&1&&(e.checked=a[0])},d(a){a&&C(e),s=!1,rt(i)}}}function xs(t){let e,s,i;return{c(){e=Ne("svg"),s=Ne("path"),this.h()},l(a){e=Re(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=W(e);s=Re(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),W(s).forEach(C),r.forEach(C),this.h()},h(){v(s,"fill-rule","evenodd"),v(s,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),v(s,"clip-rule","evenodd"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"viewBox","0 0 20 20"),v(e,"fill","currentColor"),v(e,"class",i="w-5 h-5 transition "+(t[1]?"rotate-180":"rotate-0"))},m(a,r){X(a,e,r),I(e,s)},p(a,r){r&2&&i!==(i="w-5 h-5 transition "+(a[1]?"rotate-180":"rotate-0"))&&v(e,"class",i)},d(a){a&&C(e)}}}function $s(t){let e,s,i;const a=t[6].default,r=fn(a,t,t[5],null);return{c(){e=z("div"),r&&r.c(),this.h()},l(n){e=V(n,"DIV",{class:!0});var l=W(e);r&&r.l(l),l.forEach(C),this.h()},h(){v(e,"class","py-2 px-4")},m(n,l){X(n,e,l),r&&r.m(e,null),i=!0},p(n,l){r&&r.p&&(!i||l&32)&&cn(r,a,n,n[5],i?hn(a,n[5],l,null):dn(n[5]),null)},i(n){i||(Z(r,n),n&&ut(()=>{s||(s=Ot(e,Ft,{},!0)),s.run(1)}),i=!0)},o(n){ee(r,n),n&&(s||(s=Ot(e,Ft,{},!1)),s.run(0)),i=!1},d(n){n&&C(e),r&&r.d(n),n&&s&&s.end()}}}function Oa(t){let e,s,i,a,r,n,l,o,u,c,f,b,w,F,P=t[0]!==void 0&&Js(t),A=t[3]&&xs(t),O=t[1]&&$s(t);return{c(){e=z("div"),s=z("button"),i=z("div"),P&&P.c(),a=te(),r=z("span"),n=we(t[2]),o=te(),A&&A.c(),f=te(),O&&O.c(),this.h()},l(g){e=V(g,"DIV",{class:!0});var h=W(e);s=V(h,"BUTTON",{class:!0});var y=W(s);i=V(y,"DIV",{class:!0});var T=W(i);P&&P.l(T),a=se(T),r=V(T,"SPAN",{class:!0});var L=W(r);n=Ce(L,t[2]),L.forEach(C),T.forEach(C),o=se(y),A&&A.l(y),y.forEach(C),f=se(h),O&&O.l(h),h.forEach(C),this.h()},h(){v(r,"class",l=t[0]===void 0?"ml-[21px]":""),v(i,"class","flex gap-1"),v(s,"class",u="flex justify-between px-4 py-2 "+(t[3]?"transition hover:bg-slate-800/40":"")+" rounded"),s.disabled=c=!t[3],v(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(g,h){X(g,e,h),I(e,s),I(s,i),P&&P.m(i,null),I(i,a),I(i,r),I(r,n),I(s,o),A&&A.m(s,null),I(e,f),O&&O.m(e,null),b=!0,w||(F=ce(s,"click",t[10]),w=!0)},p(g,[h]){g[0]!==void 0?P?P.p(g,h):(P=Js(g),P.c(),P.m(i,a)):P&&(P.d(1),P=null),(!b||h&4)&&Nt(n,g[2]),(!b||h&1&&l!==(l=g[0]===void 0?"ml-[21px]":""))&&v(r,"class",l),g[3]?A?A.p(g,h):(A=xs(g),A.c(),A.m(s,null)):A&&(A.d(1),A=null),(!b||h&8&&u!==(u="flex justify-between px-4 py-2 "+(g[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&v(s,"class",u),(!b||h&8&&c!==(c=!g[3]))&&(s.disabled=c),g[1]?O?(O.p(g,h),h&2&&Z(O,1)):(O=$s(g),O.c(),Z(O,1),O.m(e,null)):O&&(De(),ee(O,1,1,()=>{O=null}),Be())},i(g){b||(Z(O),b=!0)},o(g){ee(O),b=!1},d(g){g&&C(e),P&&P.d(),A&&A.d(),O&&O.d(),w=!1,F()}}}function Ia(t,e,s){let{$$slots:i={},$$scope:a}=e;const r=St();let{name:n="board"}=e,{enabled:l=void 0}=e,{showExpand:o=!0}=e,{expanded:u=!1}=e;function c(F){je.call(this,t,F)}const f=()=>r("changed",l);function b(){l=this.checked,s(0,l)}const w=()=>{s(1,u=!u)};return t.$$set=F=>{"name"in F&&s(2,n=F.name),"enabled"in F&&s(0,l=F.enabled),"showExpand"in F&&s(3,o=F.showExpand),"expanded"in F&&s(1,u=F.expanded),"$$scope"in F&&s(5,a=F.$$scope)},[l,u,n,o,r,a,i,c,f,b,w]}class lt extends Te{constructor(e){super(),Le(this,e,Ia,Oa,Oe,{name:2,enabled:0,showExpand:3,expanded:1})}}function en(t,e,s){const i=t.slice();return i[12]=e[s],i}function tn(t){let e,s=t[12]+"",i;return{c(){e=z("option"),i=we(s),this.h()},l(a){e=V(a,"OPTION",{});var r=W(e);i=Ce(r,s),r.forEach(C),this.h()},h(){e.__value=t[12],e.value=e.__value},m(a,r){X(a,e,r),I(e,i)},p:Pe,d(a){a&&C(e)}}}function qa(t){let e,s,i,a,r,n,l,o,u,c,f,b,w,F,P,A,O,g,h,y,T,L,R,H,B,N,Q,ne,Se,x,d,k=Ys,S=[];for(let M=0;M<k.length;M+=1)S[M]=tn(en(t,k,M));return{c(){e=z("div"),s=z("select");for(let M=0;M<S.length;M+=1)S[M].c();i=te(),a=z("label"),r=we("board theme"),n=te(),l=z("div"),o=z("input"),u=te(),c=z("label"),f=we("mouseEvents"),b=te(),w=z("div"),F=z("input"),P=te(),A=z("label"),O=we("notation"),g=te(),h=z("div"),y=z("input"),T=te(),L=z("label"),R=we("flipped"),H=te(),B=z("div"),N=z("input"),Q=te(),ne=z("label"),Se=we("resizible"),this.h()},l(M){e=V(M,"DIV",{class:!0});var m=W(e);s=V(m,"SELECT",{class:!0});var q=W(s);for(let ue=0;ue<S.length;ue+=1)S[ue].l(q);q.forEach(C),i=se(m),a=V(m,"LABEL",{for:!0,class:!0});var E=W(a);r=Ce(E,"board theme"),E.forEach(C),m.forEach(C),n=se(M),l=V(M,"DIV",{class:!0});var _=W(l);o=V(_,"INPUT",{id:!0,type:!0,class:!0}),u=se(_),c=V(_,"LABEL",{for:!0,class:!0});var G=W(c);f=Ce(G,"mouseEvents"),G.forEach(C),_.forEach(C),b=se(M),w=V(M,"DIV",{class:!0});var $=W(w);F=V($,"INPUT",{id:!0,type:!0,class:!0}),P=se($),A=V($,"LABEL",{for:!0,class:!0});var ae=W(A);O=Ce(ae,"notation"),ae.forEach(C),$.forEach(C),g=se(M),h=V(M,"DIV",{class:!0});var j=W(h);y=V(j,"INPUT",{id:!0,type:!0,class:!0}),T=se(j),L=V(j,"LABEL",{for:!0,class:!0});var fe=W(L);R=Ce(fe,"flipped"),fe.forEach(C),j.forEach(C),H=se(M),B=V(M,"DIV",{class:!0});var Y=W(B);N=V(Y,"INPUT",{id:!0,type:!0,class:!0}),Q=se(Y),ne=V(Y,"LABEL",{for:!0,class:!0});var ie=W(ne);Se=Ce(ie,"resizible"),ie.forEach(C),Y.forEach(C),this.h()},h(){v(s,"class","svelte-lnr7xr"),t[0]===void 0&&ut(()=>t[7].call(s)),v(a,"for","boardTheme"),v(a,"class","select-none"),v(e,"class","mb-2"),v(o,"id","mouseEvents"),v(o,"type","checkbox"),v(o,"class","svelte-lnr7xr"),v(c,"for","mouseEvents"),v(c,"class","select-none"),v(l,"class","mb-2"),v(F,"id","notation"),v(F,"type","checkbox"),v(F,"class","svelte-lnr7xr"),v(A,"for","notation"),v(A,"class","select-none"),v(w,"class","mb-2"),v(y,"id","flipped"),v(y,"type","checkbox"),v(y,"class","svelte-lnr7xr"),v(L,"for","flipped"),v(L,"class","select-none"),v(h,"class","mb-2"),v(N,"id","resizibleEnabled"),v(N,"type","checkbox"),v(N,"class","svelte-lnr7xr"),v(ne,"for","resizibleEnabled"),v(ne,"class","select-none"),v(B,"class","mt-2 mb-1")},m(M,m){X(M,e,m),I(e,s);for(let q=0;q<S.length;q+=1)S[q].m(s,null);ht(s,t[0]),I(e,i),I(e,a),I(a,r),X(M,n,m),X(M,l,m),I(l,o),o.checked=t[1],I(l,u),I(l,c),I(c,f),X(M,b,m),X(M,w,m),I(w,F),F.checked=t[2],I(w,P),I(w,A),I(A,O),X(M,g,m),X(M,h,m),I(h,y),y.checked=t[3],I(h,T),I(h,L),I(L,R),X(M,H,m),X(M,B,m),I(B,N),N.checked=t[4],I(B,Q),I(B,ne),I(ne,Se),x||(d=[ce(s,"change",t[7]),ce(o,"change",t[8]),ce(F,"change",t[9]),ce(y,"change",t[10]),ce(N,"change",t[11])],x=!0)},p(M,m){if(m&0){k=Ys;let q;for(q=0;q<k.length;q+=1){const E=en(M,k,q);S[q]?S[q].p(E,m):(S[q]=tn(E),S[q].c(),S[q].m(s,null))}for(;q<S.length;q+=1)S[q].d(1);S.length=k.length}m&1&&ht(s,M[0]),m&2&&(o.checked=M[1]),m&4&&(F.checked=M[2]),m&8&&(y.checked=M[3]),m&16&&(N.checked=M[4])},d(M){M&&C(e),at(S,M),M&&C(n),M&&C(l),M&&C(b),M&&C(w),M&&C(g),M&&C(h),M&&C(H),M&&C(B),x=!1,rt(d)}}}function Fa(t){let e,s;return e=new lt({props:{name:t[5],expanded:t[6],$$slots:{default:[qa]},$$scope:{ctx:t}}}),{c(){ve(e.$$.fragment)},l(i){_e(e.$$.fragment,i)},m(i,a){Ee(e,i,a),s=!0},p(i,[a]){const r={};a&32&&(r.name=i[5]),a&64&&(r.expanded=i[6]),a&32799&&(r.$$scope={dirty:a,ctx:i}),e.$set(r)},i(i){s||(Z(e.$$.fragment,i),s=!0)},o(i){ee(e.$$.fragment,i),s=!1},d(i){Me(e,i)}}}function Na(t,e,s){let{name:i="Board"}=e,{boardTheme:a}=e,{mouseEvents:r}=e,{notation:n}=e,{flipped:l}=e,{resizible:o=!1}=e,{expanded:u=!1}=e;function c(){a=rs(this),s(0,a)}function f(){r=this.checked,s(1,r)}function b(){n=this.checked,s(2,n)}function w(){l=this.checked,s(3,l)}function F(){o=this.checked,s(4,o)}return t.$$set=P=>{"name"in P&&s(5,i=P.name),"boardTheme"in P&&s(0,a=P.boardTheme),"mouseEvents"in P&&s(1,r=P.mouseEvents),"notation"in P&&s(2,n=P.notation),"flipped"in P&&s(3,l=P.flipped),"resizible"in P&&s(4,o=P.resizible),"expanded"in P&&s(6,u=P.expanded)},[a,r,n,l,o,i,u,c,f,b,w,F]}class Ra extends Te{constructor(e){super(),Le(this,e,Na,Fa,Oe,{name:5,boardTheme:0,mouseEvents:1,notation:2,flipped:3,resizible:4,expanded:6})}}function Da(t){let e,s,i,a,r,n,l,o,u,c;return{c(){e=z("div"),s=z("select"),i=z("option"),a=we("Both"),r=z("option"),n=we("White"),l=z("option"),o=we("Black"),this.h()},l(f){e=V(f,"DIV",{});var b=W(e);s=V(b,"SELECT",{class:!0});var w=W(s);i=V(w,"OPTION",{});var F=W(i);a=Ce(F,"Both"),F.forEach(C),r=V(w,"OPTION",{});var P=W(r);n=Ce(P,"White"),P.forEach(C),l=V(w,"OPTION",{});var A=W(l);o=Ce(A,"Black"),A.forEach(C),w.forEach(C),b.forEach(C),this.h()},h(){i.__value=he.BOTH,i.value=i.__value,r.__value=he.WHITE,r.value=r.__value,l.__value=he.BLACK,l.value=l.__value,v(s,"class","svelte-xrxnwg"),t[1]===void 0&&ut(()=>t[4].call(s))},m(f,b){X(f,e,b),I(e,s),I(s,i),I(i,a),I(s,r),I(r,n),I(s,l),I(l,o),ht(s,t[1]),u||(c=ce(s,"change",t[4]),u=!0)},p(f,b){b&2&&ht(s,f[1])},d(f){f&&C(e),u=!1,c()}}}function Ba(t){let e,s,i;function a(n){t[5](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[Da]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),oe.push(()=>be(e,"enabled",a)),{c(){ve(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,l){Ee(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&66&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){ee(e.$$.fragment,n),i=!1},d(n){Me(e,n)}}}function Ua(t,e,s){let{name:i="Movable"}=e,{enabled:a=!1}=e,{color:r}=e,{expanded:n=!1}=e;function l(){r=rs(this),s(1,r)}function o(u){a=u,s(0,a)}return t.$$set=u=>{"name"in u&&s(2,i=u.name),"enabled"in u&&s(0,a=u.enabled),"color"in u&&s(1,r=u.color),"expanded"in u&&s(3,n=u.expanded)},[a,r,i,n,l,o]}class Ha extends Te{constructor(e){super(),Le(this,e,Ua,Ba,Oe,{name:2,enabled:0,color:1,expanded:3})}}function sn(t,e,s){const i=t.slice();return i[12]=e[s],i}function nn(t){let e,s,i,a,r,n,l,o,u,c,f,b,w,F,P,A,O=Zs,g=[];for(let h=0;h<O.length;h+=1)g[h]=an(sn(t,O,h));return{c(){e=z("div"),s=z("div"),i=z("input"),a=te(),r=z("label"),n=we("duration"),l=te(),o=z("div"),u=z("select");for(let h=0;h<g.length;h+=1)g[h].c();c=te(),f=z("label"),b=we("easing"),this.h()},l(h){e=V(h,"DIV",{class:!0});var y=W(e);s=V(y,"DIV",{class:!0});var T=W(s);i=V(T,"INPUT",{id:!0,type:!0,class:!0}),a=se(T),r=V(T,"LABEL",{for:!0,class:!0});var L=W(r);n=Ce(L,"duration"),L.forEach(C),T.forEach(C),l=se(y),o=V(y,"DIV",{class:!0});var R=W(o);u=V(R,"SELECT",{id:!0,class:!0});var H=W(u);for(let N=0;N<g.length;N+=1)g[N].l(H);H.forEach(C),c=se(R),f=V(R,"LABEL",{for:!0,class:!0});var B=W(f);b=Ce(B,"easing"),B.forEach(C),R.forEach(C),y.forEach(C),this.h()},h(){v(i,"id","transitionDuration"),v(i,"type","number"),v(i,"class","w-16 svelte-1qpp6cx"),v(r,"for","transitionDuration"),v(r,"class","select-none"),v(s,"class","flex gap-2 mb-2"),v(u,"id","easingFuncs"),v(u,"class","svelte-1qpp6cx"),t[4]===void 0&&ut(()=>t[10].call(u)),v(f,"for","easingFuncs"),v(f,"class","select-none"),v(o,"class","flex gap-2"),v(e,"class","pl-2 pr-4 flex-col")},m(h,y){X(h,e,y),I(e,s),I(s,i),hs(i,t[3]),I(s,a),I(s,r),I(r,n),I(e,l),I(e,o),I(o,u);for(let T=0;T<g.length;T+=1)g[T].m(u,null);ht(u,t[4]),I(o,c),I(o,f),I(f,b),F=!0,P||(A=[ce(i,"input",t[9]),ce(u,"change",t[10])],P=!0)},p(h,y){if(y&8&&vn(i.value)!==h[3]&&hs(i,h[3]),y&0){O=Zs;let T;for(T=0;T<O.length;T+=1){const L=sn(h,O,T);g[T]?g[T].p(L,y):(g[T]=an(L),g[T].c(),g[T].m(u,null))}for(;T<g.length;T+=1)g[T].d(1);g.length=O.length}y&16&&ht(u,h[4])},i(h){F||(h&&ut(()=>{w||(w=Ot(e,Ft,{},!0)),w.run(1)}),F=!0)},o(h){h&&(w||(w=Ot(e,Ft,{},!1)),w.run(0)),F=!1},d(h){h&&C(e),at(g,h),h&&w&&w.end(),P=!1,rt(A)}}}function an(t){let e,s=t[12]+"",i;return{c(){e=z("option"),i=we(s),this.h()},l(a){e=V(a,"OPTION",{});var r=W(e);i=Ce(r,s),r.forEach(C),this.h()},h(){e.__value=t[12],e.value=e.__value},m(a,r){X(a,e,r),I(e,i)},p:Pe,d(a){a&&C(e)}}}function za(t){let e,s,i,a,r,n,l,o,u,c,f,b,w,F,P,A=t[2]&&nn(t);return{c(){e=z("div"),s=z("input"),i=te(),a=z("label"),r=we("ghost piece"),n=te(),l=z("div"),o=z("input"),u=te(),c=z("label"),f=we("transition"),b=te(),A&&A.c(),w=Ae(),this.h()},l(O){e=V(O,"DIV",{class:!0});var g=W(e);s=V(g,"INPUT",{id:!0,type:!0,class:!0}),i=se(g),a=V(g,"LABEL",{for:!0,class:!0});var h=W(a);r=Ce(h,"ghost piece"),h.forEach(C),g.forEach(C),n=se(O),l=V(O,"DIV",{class:!0});var y=W(l);o=V(y,"INPUT",{id:!0,type:!0,class:!0}),u=se(y),c=V(y,"LABEL",{for:!0,class:!0});var T=W(c);f=Ce(T,"transition"),T.forEach(C),y.forEach(C),b=se(O),A&&A.l(O),w=Ae(),this.h()},h(){v(s,"id","ghostPiece"),v(s,"type","checkbox"),v(s,"class","svelte-1qpp6cx"),v(a,"for","ghostPiece"),v(a,"class","select-none"),v(e,"class","mb-2"),v(o,"id","draggableEnabled"),v(o,"type","checkbox"),v(o,"class","svelte-1qpp6cx"),v(c,"for","draggableEnabled"),v(c,"class","select-none"),v(l,"class","mb-2")},m(O,g){X(O,e,g),I(e,s),s.checked=t[1],I(e,i),I(e,a),I(a,r),X(O,n,g),X(O,l,g),I(l,o),o.checked=t[2],I(l,u),I(l,c),I(c,f),X(O,b,g),A&&A.m(O,g),X(O,w,g),F||(P=[ce(s,"change",t[7]),ce(o,"change",t[8])],F=!0)},p(O,g){g&2&&(s.checked=O[1]),g&4&&(o.checked=O[2]),O[2]?A?(A.p(O,g),g&4&&Z(A,1)):(A=nn(O),A.c(),Z(A,1),A.m(w.parentNode,w)):A&&(De(),ee(A,1,1,()=>{A=null}),Be())},d(O){O&&C(e),O&&C(n),O&&C(l),O&&C(b),A&&A.d(O),O&&C(w),F=!1,rt(P)}}}function Va(t){let e,s,i;function a(n){t[11](n)}let r={name:t[5],expanded:t[6],$$slots:{default:[za]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),oe.push(()=>be(e,"enabled",a)),{c(){ve(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,l){Ee(e,n,l),i=!0},p(n,[l]){const o={};l&32&&(o.name=n[5]),l&64&&(o.expanded=n[6]),l&32798&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){ee(e.$$.fragment,n),i=!1},d(n){Me(e,n)}}}function Ka(t,e,s){let{name:i="Draggable"}=e,{enabled:a=!1}=e,{ghostPiece:r=!1}=e,{transition:n=!1}=e,{duration:l=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function c(){r=this.checked,s(1,r)}function f(){n=this.checked,s(2,n)}function b(){l=vn(this.value),s(3,l)}function w(){o=rs(this),s(4,o)}function F(P){a=P,s(0,a)}return t.$$set=P=>{"name"in P&&s(5,i=P.name),"enabled"in P&&s(0,a=P.enabled),"ghostPiece"in P&&s(1,r=P.ghostPiece),"transition"in P&&s(2,n=P.transition),"duration"in P&&s(3,l=P.duration),"easing"in P&&s(4,o=P.easing),"expanded"in P&&s(6,u=P.expanded)},[a,r,n,l,o,i,u,c,f,b,w,F]}class Wa extends Te{constructor(e){super(),Le(this,e,Ka,Va,Oe,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function rn(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function ln(t){let e,s,i,a,r=t[7]+"",n,l,o,u;function c(){t[5].call(s,t[7])}return{c(){e=z("div"),s=z("input"),i=te(),a=z("label"),n=we(r),l=te(),this.h()},l(f){e=V(f,"DIV",{class:!0});var b=W(e);s=V(b,"INPUT",{id:!0,type:!0}),i=se(b),a=V(b,"LABEL",{for:!0,class:!0});var w=W(a);n=Ce(w,r),w.forEach(C),l=se(b),b.forEach(C),this.h()},h(){v(s,"id",t[7]+"Enabled"),v(s,"type","checkbox"),v(a,"for",t[7]+"Enabled"),v(a,"class","select-none"),v(e,"class","mb-2")},m(f,b){X(f,e,b),I(e,s),s.checked=t[1][t[7]],I(e,i),I(e,a),I(a,n),I(e,l),o||(u=ce(s,"change",c),o=!0)},p(f,b){t=f,b&18&&(s.checked=t[1][t[7]])},d(f){f&&C(e),o=!1,u()}}}function ja(t){let e,s=t[4],i=[];for(let a=0;a<s.length;a+=1)i[a]=ln(rn(t,s,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Ae()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);e=Ae()},m(a,r){for(let n=0;n<i.length;n+=1)i[n].m(a,r);X(a,e,r)},p(a,r){if(r&18){s=a[4];let n;for(n=0;n<s.length;n+=1){const l=rn(a,s,n);i[n]?i[n].p(l,r):(i[n]=ln(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(a){at(i,a),a&&C(e)}}}function Ga(t){let e,s,i;function a(n){t[6](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[ja]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),oe.push(()=>be(e,"enabled",a)),{c(){ve(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,l){Ee(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){ee(e.$$.fragment,n),i=!1},d(n){Me(e,n)}}}function Qa(t,e,s){let{name:i="Highlight"}=e,{enabled:a=!1}=e,{settings:r}=e;const n=["select","legal","move","preMove","nextMove","check"];let{expanded:l=!1}=e;function o(c){r[c]=this.checked,s(1,r)}function u(c){a=c,s(0,a)}return t.$$set=c=>{"name"in c&&s(2,i=c.name),"enabled"in c&&s(0,a=c.enabled),"settings"in c&&s(1,r=c.settings),"expanded"in c&&s(3,l=c.expanded)},[a,r,i,l,n,o,u]}class Xa extends Te{constructor(e){super(),Le(this,e,Qa,Ga,Oe,{name:2,enabled:0,settings:1,expanded:3})}}function Ya(t){let e,s,i,a,r,n,l,o,u,c,f,b,w;return{c(){e=z("div"),s=z("input"),i=te(),a=z("label"),r=we("L shape knight move"),n=te(),l=z("div"),o=z("input"),u=te(),c=z("label"),f=we("only chess move"),this.h()},l(F){e=V(F,"DIV",{class:!0});var P=W(e);s=V(P,"INPUT",{id:!0,type:!0}),i=se(P),a=V(P,"LABEL",{for:!0,class:!0});var A=W(a);r=Ce(A,"L shape knight move"),A.forEach(C),P.forEach(C),n=se(F),l=V(F,"DIV",{class:!0});var O=W(l);o=V(O,"INPUT",{id:!0,type:!0}),u=se(O),c=V(O,"LABEL",{for:!0,class:!0});var g=W(c);f=Ce(g,"only chess move"),g.forEach(C),O.forEach(C),this.h()},h(){v(s,"id","knightLShapeMoveEnabled"),v(s,"type","checkbox"),v(a,"for","knightLShapeMoveEnabled"),v(a,"class","select-none"),v(e,"class","mb-2"),v(o,"id","onlyChessMoveEnabled"),v(o,"type","checkbox"),v(c,"for","onlyChessMoveEnabled"),v(c,"class","select-none"),v(l,"class","mb-2")},m(F,P){X(F,e,P),I(e,s),s.checked=t[1],I(e,i),I(e,a),I(a,r),X(F,n,P),X(F,l,P),I(l,o),o.checked=t[2],I(l,u),I(l,c),I(c,f),b||(w=[ce(s,"change",t[5]),ce(o,"change",t[6])],b=!0)},p(F,P){P&2&&(s.checked=F[1]),P&4&&(o.checked=F[2])},d(F){F&&C(e),F&&C(n),F&&C(l),b=!1,rt(w)}}}function Za(t){let e,s,i;function a(n){t[7](n)}let r={name:t[3],expanded:t[4],$$slots:{default:[Ya]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),oe.push(()=>be(e,"enabled",a)),{c(){ve(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,l){Ee(e,n,l),i=!0},p(n,[l]){const o={};l&8&&(o.name=n[3]),l&16&&(o.expanded=n[4]),l&262&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){ee(e.$$.fragment,n),i=!1},d(n){Me(e,n)}}}function Ja(t,e,s){let{name:i="DrawTools"}=e,{enabled:a=!1}=e,{knightLShape:r=!1}=e,{onlyChessMove:n=!1}=e,{expanded:l=!1}=e;function o(){r=this.checked,s(1,r)}function u(){n=this.checked,s(2,n)}function c(f){a=f,s(0,a)}return t.$$set=f=>{"name"in f&&s(3,i=f.name),"enabled"in f&&s(0,a=f.enabled),"knightLShape"in f&&s(1,r=f.knightLShape),"onlyChessMove"in f&&s(2,n=f.onlyChessMove),"expanded"in f&&s(4,l=f.expanded)},[a,r,n,i,l,o,u,c]}class xa extends Te{constructor(e){super(),Le(this,e,Ja,Za,Oe,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function on(t,e,s){const i=t.slice();return i[7]=e[s],i[8]=e,i[9]=s,i}function un(t){let e,s,i,a,r=t[7].toLowerCase()+"",n,l,o,u;function c(){t[5].call(s,t[7])}return{c(){e=z("div"),s=z("input"),i=te(),a=z("label"),n=we(r),l=te(),this.h()},l(f){e=V(f,"DIV",{class:!0});var b=W(e);s=V(b,"INPUT",{id:!0,type:!0}),i=se(b),a=V(b,"LABEL",{for:!0,class:!0});var w=W(a);n=Ce(w,r),w.forEach(C),l=se(b),b.forEach(C),this.h()},h(){v(s,"id",t[7]+"Enabled"),v(s,"type","checkbox"),v(a,"for",t[7]+"Enabled"),v(a,"class","select-none"),v(e,"class","mb-2")},m(f,b){X(f,e,b),I(e,s),s.checked=t[1][t[7]],I(e,i),I(e,a),I(a,n),I(e,l),o||(u=ce(s,"change",c),o=!0)},p(f,b){t=f,b&18&&(s.checked=t[1][t[7]])},d(f){f&&C(e),o=!1,u()}}}function $a(t){let e,s=t[4],i=[];for(let a=0;a<s.length;a+=1)i[a]=un(on(t,s,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Ae()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);e=Ae()},m(a,r){for(let n=0;n<i.length;n+=1)i[n].m(a,r);X(a,e,r)},p(a,r){if(r&18){s=a[4];let n;for(n=0;n<s.length;n+=1){const l=on(a,s,n);i[n]?i[n].p(l,r):(i[n]=un(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(a){at(i,a),a&&C(e)}}}function er(t){let e,s,i;function a(n){t[6](n)}let r={name:t[2],expanded:t[3],$$slots:{default:[$a]},$$scope:{ctx:t}};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),oe.push(()=>be(e,"enabled",a)),{c(){ve(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,l){Ee(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){ee(e.$$.fragment,n),i=!1},d(n){Me(e,n)}}}function tr(t,e,s){let{name:i="Sounds"}=e,{enabled:a=!1}=e,{settings:r}=e;const n=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:l=!1}=e;function o(c){r[c]=this.checked,s(1,r)}function u(c){a=c,s(0,a)}return t.$$set=c=>{"name"in c&&s(2,i=c.name),"enabled"in c&&s(0,a=c.enabled),"settings"in c&&s(1,r=c.settings),"expanded"in c&&s(3,l=c.expanded)},[a,r,i,l,n,o,u]}class sr extends Te{constructor(e){super(),Le(this,e,tr,er,Oe,{name:2,enabled:0,settings:1,expanded:3})}}function nr(t){let e,s;return{c(){e=Ne("svg"),s=Ne("path"),this.h()},l(i){e=Re(i,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=W(e);s=Re(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),W(s).forEach(C),a.forEach(C),this.h()},h(){v(s,"stroke-linecap","round"),v(s,"stroke-linejoin","round"),v(s,"stroke-width","2"),v(s,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),Fe(e,"transform","translate(1px, 0px)"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"class","h-5"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"aria-hidden","true"),v(e,"stroke","currentColor")},m(i,a){X(i,e,a),I(e,s)},d(i){i&&C(e)}}}function ir(t){let e,s;return{c(){e=Ne("svg"),s=Ne("path"),this.h()},l(i){e=Re(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=W(e);s=Re(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),W(s).forEach(C),a.forEach(C),this.h()},h(){v(s,"stroke-linecap","round"),v(s,"stroke-linejoin","round"),v(s,"stroke-width","2"),v(s,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"class","h-5 text-green-500"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"aria-hidden","true"),v(e,"stroke","currentColor")},m(i,a){X(i,e,a),I(e,s)},d(i){i&&C(e)}}}function ar(t){let e,s,i;function a(l,o){return l[1]?ir:nr}let r=a(t),n=r(t);return{c(){e=z("button"),n.c(),this.h()},l(l){e=V(l,"BUTTON",{type:!0,class:!0});var o=W(e);n.l(o),o.forEach(C),this.h()},h(){v(e,"type","button"),v(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(l,o){X(l,e,o),n.m(e,null),t[4](e),s||(i=ce(e,"click",t[2]),s=!0)},p(l,[o]){r!==(r=a(l))&&(n.d(1),n=r(l),n&&(n.c(),n.m(e,null)))},i:Pe,o:Pe,d(l){l&&C(e),n.d(),t[4](null),s=!1,i()}}}function rr(t,e,s){let{copyText:i}=e,a,r=!1;function n(){navigator.clipboard.writeText(i),s(1,r=!0),setTimeout(()=>{s(1,r=!1)},2e3),a.setAttribute("data-cooltipz-dir","top"),a.setAttribute("aria-label","Copied!"),setTimeout(()=>{a.removeAttribute("aria-label"),a.removeAttribute("data-cooltipz-dir")},2e3)}function l(o){oe[o?"unshift":"push"](()=>{a=o,s(0,a)})}return t.$$set=o=>{"copyText"in o&&s(3,i=o.copyText)},[a,r,n,i,l]}class lr extends Te{constructor(e){super(),Le(this,e,rr,ar,Oe,{copyText:3})}}function or(t){let e,s,i;function a(n){t[2](n)}let r={name:t[1],showExpand:!1};return t[0]!==void 0&&(r.enabled=t[0]),e=new lt({props:r}),oe.push(()=>be(e,"enabled",a)),e.$on("changed",t[3]),{c(){ve(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,l){Ee(e,n,l),i=!0},p(n,[l]){const o={};l&2&&(o.name=n[1]),!s&&l&1&&(s=!0,o.enabled=n[0],pe(()=>s=!1)),e.$set(o)},i(n){i||(Z(e.$$.fragment,n),i=!0)},o(n){ee(e.$$.fragment,n),i=!1},d(n){Me(e,n)}}}function ur(t,e,s){let{name:i="Legal"}=e,{enabled:a=!1}=e;function r(l){a=l,s(0,a)}function n(l){je.call(this,t,l)}return t.$$set=l=>{"name"in l&&s(1,i=l.name),"enabled"in l&&s(0,a=l.enabled)},[a,i,r,n]}class fr extends Te{constructor(e){super(),Le(this,e,ur,or,Oe,{name:1,enabled:0})}}function cr(t){let e,s,i,a,r,n,l,o,u,c,f,b,w,F,P,A,O,g,h,y,T,L,R,H,B,N,Q,ne,Se,x,d,k,S,M,m,q,E,_,G,$,ae,j,fe,Y,ie,ue,me,Ie,le,ke,qe,Xe,Ye,Ge,Ve,gt,bt,Qe,pt,ft,ct,Ke,mt,We,Ze,vt,wt;function Bt(U){t[7](U)}function Ut(U){t[8](U)}function Ht(U){t[9](U)}function zt(U){t[10](U)}function Vt(U){t[11](U)}let $e={expanded:!0};t[0].board.boardTheme!==void 0&&($e.boardTheme=t[0].board.boardTheme),t[0].board.mouseEvents!==void 0&&($e.mouseEvents=t[0].board.mouseEvents),t[0].board.notation!==void 0&&($e.notation=t[0].board.notation),t[0].board.flipped!==void 0&&($e.flipped=t[0].board.flipped),t[0].board.resizible!==void 0&&($e.resizible=t[0].board.resizible),n=new Ra({props:$e}),oe.push(()=>be(n,"boardTheme",Bt)),oe.push(()=>be(n,"mouseEvents",Ut)),oe.push(()=>be(n,"notation",Ht)),oe.push(()=>be(n,"flipped",zt)),oe.push(()=>be(n,"resizible",Vt));function Kt(U){t[12](U)}function Wt(U){t[13](U)}let _t={expanded:!0};t[0].movable.enabled!==void 0&&(_t.enabled=t[0].movable.enabled),t[0].movable.color!==void 0&&(_t.color=t[0].movable.color),w=new Ha({props:_t}),oe.push(()=>be(w,"enabled",Kt)),oe.push(()=>be(w,"color",Wt));function jt(U){t[14](U)}function Gt(U){t[15](U)}function Qt(U){t[16](U)}function Xt(U){t[17](U)}function Yt(U){t[18](U)}let et={};t[0].draggable.enabled!==void 0&&(et.enabled=t[0].draggable.enabled),t[0].draggable.ghostPiece.enabled!==void 0&&(et.ghostPiece=t[0].draggable.ghostPiece.enabled),t[0].draggable.transition.enabled!==void 0&&(et.transition=t[0].draggable.transition.enabled),t[0].draggable.transition.settings.duration!==void 0&&(et.duration=t[0].draggable.transition.settings.duration),t[0].draggable.transition.settings.easing!==void 0&&(et.easing=t[0].draggable.transition.settings.easing),O=new Wa({props:et}),oe.push(()=>be(O,"enabled",jt)),oe.push(()=>be(O,"ghostPiece",Gt)),oe.push(()=>be(O,"transition",Qt)),oe.push(()=>be(O,"duration",Xt)),oe.push(()=>be(O,"easing",Yt));function Zt(U){t[19](U)}let Ct={name:"Selectable",showExpand:!1};t[0].selectable.enabled!==void 0&&(Ct.enabled=t[0].selectable.enabled),H=new lt({props:Ct}),oe.push(()=>be(H,"enabled",Zt));function Jt(U){t[20](U)}let p={};t[0].legal.enabled!==void 0&&(p.enabled=t[0].legal.enabled),Q=new fr({props:p}),oe.push(()=>be(Q,"enabled",Jt)),Q.$on("changed",t[21]);function K(U){t[22](U)}function re(U){t[23](U)}let de={};t[0].highlight.enabled!==void 0&&(de.enabled=t[0].highlight.enabled),t[0].highlight.settings!==void 0&&(de.settings=t[0].highlight.settings),x=new Xa({props:de}),oe.push(()=>be(x,"enabled",K)),oe.push(()=>be(x,"settings",re));function He(U){t[24](U)}function tt(U){t[25](U)}function Ue(U){t[26](U)}let Pt={};t[0].drawTools.enabled!==void 0&&(Pt.enabled=t[0].drawTools.enabled),t[0].drawTools.settings.knightLShape!==void 0&&(Pt.knightLShape=t[0].drawTools.settings.knightLShape),t[0].drawTools.settings.onlyChessMove!==void 0&&(Pt.onlyChessMove=t[0].drawTools.settings.onlyChessMove),M=new xa({props:Pt}),oe.push(()=>be(M,"enabled",He)),oe.push(()=>be(M,"knightLShape",tt)),oe.push(()=>be(M,"onlyChessMove",Ue));function yn(U){t[27](U)}function An(U){t[28](U)}let xt={};t[0].sounds.enabled!==void 0&&(xt.enabled=t[0].sounds.enabled),t[0].sounds.settings!==void 0&&(xt.settings=t[0].sounds.settings),G=new sr({props:xt}),oe.push(()=>be(G,"enabled",yn)),oe.push(()=>be(G,"settings",An));let Tn={config:t[6],className:"rounded-md"};return ie=new La({props:Tn}),t[29](ie),Ke=new lr({props:{copyText:t[4]}}),We=new Yn({props:{source:t[4],language:"svelte"}}),{c(){e=z("link"),s=te(),i=z("div"),a=z("div"),r=z("div"),ve(n.$$.fragment),b=te(),ve(w.$$.fragment),A=te(),ve(O.$$.fragment),R=te(),ve(H.$$.fragment),N=te(),ve(Q.$$.fragment),Se=te(),ve(x.$$.fragment),S=te(),ve(M.$$.fragment),_=te(),ve(G.$$.fragment),j=te(),fe=z("div"),Y=z("div"),ve(ie.$$.fragment),ue=te(),me=z("div"),Ie=z("div"),le=z("div"),ke=z("button"),qe=z("span"),Xe=we("ts"),Ge=te(),Ve=z("span"),gt=we("/"),bt=te(),Qe=z("span"),pt=we("js"),ct=te(),ve(Ke.$$.fragment),mt=te(),ve(We.$$.fragment),this.h()},l(U){const ge=Vn("svelte-tebjht",document.head);e=V(ge,"LINK",{rel:!0,href:!0}),ge.forEach(C),s=se(U),i=V(U,"DIV",{class:!0});var Je=W(i);a=V(Je,"DIV",{class:!0});var st=W(a);r=V(st,"DIV",{class:!0});var ye=W(r);_e(n.$$.fragment,ye),b=se(ye),_e(w.$$.fragment,ye),A=se(ye),_e(O.$$.fragment,ye),R=se(ye),_e(H.$$.fragment,ye),N=se(ye),_e(Q.$$.fragment,ye),Se=se(ye),_e(x.$$.fragment,ye),S=se(ye),_e(M.$$.fragment,ye),_=se(ye),_e(G.$$.fragment,ye),ye.forEach(C),j=se(st),fe=V(st,"DIV",{class:!0});var ot=W(fe);Y=V(ot,"DIV",{class:!0});var Et=W(Y);_e(ie.$$.fragment,Et),Et.forEach(C),ue=se(ot),me=V(ot,"DIV",{class:!0});var dt=W(me);Ie=V(dt,"DIV",{class:!0});var xe=W(Ie);le=V(xe,"DIV",{class:!0});var nt=W(le);ke=V(nt,"BUTTON",{class:!0});var it=W(ke);qe=V(it,"SPAN",{class:!0});var Mt=W(qe);Xe=Ce(Mt,"ts"),Mt.forEach(C),Ge=se(it),Ve=V(it,"SPAN",{class:!0});var kt=W(Ve);gt=Ce(kt,"/"),kt.forEach(C),bt=se(it),Qe=V(it,"SPAN",{class:!0});var os=W(Qe);pt=Ce(os,"js"),os.forEach(C),it.forEach(C),ct=se(nt),_e(Ke.$$.fragment,nt),nt.forEach(C),mt=se(xe),_e(We.$$.fragment,xe),xe.forEach(C),dt.forEach(C),ot.forEach(C),st.forEach(C),Je.forEach(C),this.h()},h(){document.title="Chessboard \u2022 PowChess.com",v(e,"rel","stylesheet"),v(e,"href","prism-one-dark.css"),v(r,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),v(Y,"class","w-full lg:w-[calc(70vh*(var(--boardScale,70)/100*0.7+0.3))]"),v(qe,"class",Ye=t[1]?"text-yellow-600":""),v(Ve,"class","text-gray-600"),v(Qe,"class",ft=t[1]?"":"text-yellow-600"),v(ke,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),v(le,"class","absolute right-2 top-2 flex gap-4"),v(Ie,"class","shadow-lg rounded "),v(me,"class","row-start-2 relative"),v(fe,"class","grid grid-rows-[90wh_auto] gap-10"),v(a,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),v(i,"class","my-10 grid grid-cols-center")},m(U,ge){I(document.head,e),X(U,s,ge),X(U,i,ge),I(i,a),I(a,r),Ee(n,r,null),I(r,b),Ee(w,r,null),I(r,A),Ee(O,r,null),I(r,R),Ee(H,r,null),I(r,N),Ee(Q,r,null),I(r,Se),Ee(x,r,null),I(r,S),Ee(M,r,null),I(r,_),Ee(G,r,null),I(a,j),I(a,fe),I(fe,Y),Ee(ie,Y,null),I(fe,ue),I(fe,me),I(me,Ie),I(Ie,le),I(le,ke),I(ke,qe),I(qe,Xe),I(ke,Ge),I(ke,Ve),I(Ve,gt),I(ke,bt),I(ke,Qe),I(Qe,pt),I(le,ct),Ee(Ke,le,null),I(Ie,mt),Ee(We,Ie,null),Ze=!0,vt||(wt=ce(ke,"click",t[30]),vt=!0)},p(U,ge){const Je={};!l&&ge[0]&1&&(l=!0,Je.boardTheme=U[0].board.boardTheme,pe(()=>l=!1)),!o&&ge[0]&1&&(o=!0,Je.mouseEvents=U[0].board.mouseEvents,pe(()=>o=!1)),!u&&ge[0]&1&&(u=!0,Je.notation=U[0].board.notation,pe(()=>u=!1)),!c&&ge[0]&1&&(c=!0,Je.flipped=U[0].board.flipped,pe(()=>c=!1)),!f&&ge[0]&1&&(f=!0,Je.resizible=U[0].board.resizible,pe(()=>f=!1)),n.$set(Je);const st={};!F&&ge[0]&1&&(F=!0,st.enabled=U[0].movable.enabled,pe(()=>F=!1)),!P&&ge[0]&1&&(P=!0,st.color=U[0].movable.color,pe(()=>P=!1)),w.$set(st);const ye={};!g&&ge[0]&1&&(g=!0,ye.enabled=U[0].draggable.enabled,pe(()=>g=!1)),!h&&ge[0]&1&&(h=!0,ye.ghostPiece=U[0].draggable.ghostPiece.enabled,pe(()=>h=!1)),!y&&ge[0]&1&&(y=!0,ye.transition=U[0].draggable.transition.enabled,pe(()=>y=!1)),!T&&ge[0]&1&&(T=!0,ye.duration=U[0].draggable.transition.settings.duration,pe(()=>T=!1)),!L&&ge[0]&1&&(L=!0,ye.easing=U[0].draggable.transition.settings.easing,pe(()=>L=!1)),O.$set(ye);const ot={};!B&&ge[0]&1&&(B=!0,ot.enabled=U[0].selectable.enabled,pe(()=>B=!1)),H.$set(ot);const Et={};!ne&&ge[0]&1&&(ne=!0,Et.enabled=U[0].legal.enabled,pe(()=>ne=!1)),Q.$set(Et);const dt={};!d&&ge[0]&1&&(d=!0,dt.enabled=U[0].highlight.enabled,pe(()=>d=!1)),!k&&ge[0]&1&&(k=!0,dt.settings=U[0].highlight.settings,pe(()=>k=!1)),x.$set(dt);const xe={};!m&&ge[0]&1&&(m=!0,xe.enabled=U[0].drawTools.enabled,pe(()=>m=!1)),!q&&ge[0]&1&&(q=!0,xe.knightLShape=U[0].drawTools.settings.knightLShape,pe(()=>q=!1)),!E&&ge[0]&1&&(E=!0,xe.onlyChessMove=U[0].drawTools.settings.onlyChessMove,pe(()=>E=!1)),M.$set(xe);const nt={};!$&&ge[0]&1&&($=!0,nt.enabled=U[0].sounds.enabled,pe(()=>$=!1)),!ae&&ge[0]&1&&(ae=!0,nt.settings=U[0].sounds.settings,pe(()=>ae=!1)),G.$set(nt);const it={};ie.$set(it),(!Ze||ge[0]&2&&Ye!==(Ye=U[1]?"text-yellow-600":""))&&v(qe,"class",Ye),(!Ze||ge[0]&2&&ft!==(ft=U[1]?"":"text-yellow-600"))&&v(Qe,"class",ft);const Mt={};ge[0]&16&&(Mt.copyText=U[4]),Ke.$set(Mt);const kt={};ge[0]&16&&(kt.source=U[4]),We.$set(kt)},i(U){Ze||(Z(n.$$.fragment,U),Z(w.$$.fragment,U),Z(O.$$.fragment,U),Z(H.$$.fragment,U),Z(Q.$$.fragment,U),Z(x.$$.fragment,U),Z(M.$$.fragment,U),Z(G.$$.fragment,U),Z(ie.$$.fragment,U),Z(Ke.$$.fragment,U),Z(We.$$.fragment,U),Ze=!0)},o(U){ee(n.$$.fragment,U),ee(w.$$.fragment,U),ee(O.$$.fragment,U),ee(H.$$.fragment,U),ee(Q.$$.fragment,U),ee(x.$$.fragment,U),ee(M.$$.fragment,U),ee(G.$$.fragment,U),ee(ie.$$.fragment,U),ee(Ke.$$.fragment,U),ee(We.$$.fragment,U),Ze=!1},d(U){C(e),U&&C(s),U&&C(i),Me(n),Me(w),Me(O),Me(H),Me(Q),Me(x),Me(M),Me(G),t[29](null),Me(ie),Me(Ke),Me(We),vt=!1,wt()}}}function dr(t,e,s){const i=new Mn.Chess,a={movable:he.BOTH,legal:!0,callbacks:{afterMove:E=>i.move({from:E.substring(0,2),to:E.substring(2,4),...E.length>4&&{promotion:E[4]}}),getLegalMoves:()=>i.moves({verbose:!0}).map(E=>{var _;return E.from+E.to+((_=E.promotion)!=null?_:"")}),getWhiteToMove:()=>i.turn()==="w",getInCheck:()=>i.inCheck(),getLastMove:()=>{var _;const E=i.history({verbose:!0}).pop();return E?E.from+E.to+((_=E.promotion)!=null?_:""):""}},board:{resizible:!0}},r=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,n=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let l,o=new kn(a),u=!1,c=!0,f="";Rt(()=>{s(3,u=!0),s(0,o=l.getState())});const b=(E,_)=>{const G=E.getConfig(),$=`
	import type { ChessboardConfig } from '@powchess/chessboard/boardConfig';`;u&&l.setState(E);let ae=JSON.stringify(G,(ie,ue)=>ie==="callbacks"?"{functions}":ue,4);ae=ae.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',_?r:n);const j=`
	import { Color } from '@powchess/chessboard/enums';`;_&&(ae=ae.replaceAll(`movable: ${he.WHITE}`,"movable: Color.WHITE").replaceAll(`movable: ${he.BLACK}`,"movable: Color.BLACK").replaceAll(`movable: ${he.BOTH}`,"movable: Color.BOTH"));function fe(){return ae.includes("movable: Color.WHITE")||ae.includes("movable: Color.BLACK")||ae.includes("movable: Color.BOTH")}let Y=`<script${_?' lang="ts"':""}>
	import Chessboard from '@powchess/chessboard';${_?$:""}${fe()&&_?j:""}${o.legal.enabled?_?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${_?": ChessboardConfig":""} = ${ae};
<\/script>

<Chessboard {config} className="rounded-md" />`;return _||(Y=Y.replaceAll("Color.WHITE",`${he.WHITE}`).replaceAll("Color.BLACK",`${he.BLACK}`).replaceAll("Color.BOTH",`${he.BOTH}`)),Y};function w(E){t.$$.not_equal(o.board.boardTheme,E)&&(o.board.boardTheme=E,s(0,o))}function F(E){t.$$.not_equal(o.board.mouseEvents,E)&&(o.board.mouseEvents=E,s(0,o))}function P(E){t.$$.not_equal(o.board.notation,E)&&(o.board.notation=E,s(0,o))}function A(E){t.$$.not_equal(o.board.flipped,E)&&(o.board.flipped=E,s(0,o))}function O(E){t.$$.not_equal(o.board.resizible,E)&&(o.board.resizible=E,s(0,o))}function g(E){t.$$.not_equal(o.movable.enabled,E)&&(o.movable.enabled=E,s(0,o))}function h(E){t.$$.not_equal(o.movable.color,E)&&(o.movable.color=E,s(0,o))}function y(E){t.$$.not_equal(o.draggable.enabled,E)&&(o.draggable.enabled=E,s(0,o))}function T(E){t.$$.not_equal(o.draggable.ghostPiece.enabled,E)&&(o.draggable.ghostPiece.enabled=E,s(0,o))}function L(E){t.$$.not_equal(o.draggable.transition.enabled,E)&&(o.draggable.transition.enabled=E,s(0,o))}function R(E){t.$$.not_equal(o.draggable.transition.settings.duration,E)&&(o.draggable.transition.settings.duration=E,s(0,o))}function H(E){t.$$.not_equal(o.draggable.transition.settings.easing,E)&&(o.draggable.transition.settings.easing=E,s(0,o))}function B(E){t.$$.not_equal(o.selectable.enabled,E)&&(o.selectable.enabled=E,s(0,o))}function N(E){t.$$.not_equal(o.legal.enabled,E)&&(o.legal.enabled=E,s(0,o))}const Q=()=>{o.legal.enabled||(i.reset(),u&&l.setFEN(o.board.startFen,!0,!1))};function ne(E){t.$$.not_equal(o.highlight.enabled,E)&&(o.highlight.enabled=E,s(0,o))}function Se(E){t.$$.not_equal(o.highlight.settings,E)&&(o.highlight.settings=E,s(0,o))}function x(E){t.$$.not_equal(o.drawTools.enabled,E)&&(o.drawTools.enabled=E,s(0,o))}function d(E){t.$$.not_equal(o.drawTools.settings.knightLShape,E)&&(o.drawTools.settings.knightLShape=E,s(0,o))}function k(E){t.$$.not_equal(o.drawTools.settings.onlyChessMove,E)&&(o.drawTools.settings.onlyChessMove=E,s(0,o))}function S(E){t.$$.not_equal(o.sounds.enabled,E)&&(o.sounds.enabled=E,s(0,o))}function M(E){t.$$.not_equal(o.sounds.settings,E)&&(o.sounds.settings=E,s(0,o))}function m(E){oe[E?"unshift":"push"](()=>{l=E,s(2,l)})}const q=()=>{s(1,c=!c)};return t.$$.update=()=>{t.$$.dirty[0]&3&&s(4,f=b(o,c))},[o,c,l,u,f,i,a,w,F,P,A,O,g,h,y,T,L,R,H,B,N,Q,ne,Se,x,d,k,S,M,m,q]}class pr extends Te{constructor(e){super(),Le(this,e,dr,cr,Oe,{},null,[-1,-1])}}export{pr as default};
