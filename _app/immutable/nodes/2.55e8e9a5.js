var Zn=Object.defineProperty;var Jn=(s,e,t)=>e in s?Zn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var q=(s,e,t)=>(Jn(s,typeof e!="symbol"?e+"":e,t),t);import{A as st,s as Ce,r as Tn,f as R,a as W,g as D,h as B,d as S,c as G,k as Be,j as p,i as V,x as L,u as Ln,v as qn,w as In,B as Zt,C as Fs,p as Z,H as $n,e as ke,D as ei,l as et,m as tt,n as is,E as yt,F as ti,y as be,G as vt,I as On,J as Ns,K as Jt,L as $,M as qs,N as jt,z as si,o as as,O as Qe,P as Re,Q as De,R as Rs,S as ie,T as Se,U as $t,V as Fn,W as Ds,t as ni,X as It,Y as Is,Z as St,_ as Nn,$ as ii}from"../chunks/scheduler.460cee8a.js";import{t as X,a as H,S as ye,i as Pe,n as ai,l as ri,g as ze,c as Ue,f as li,h as oi,j as ae,b as ce,d as fe,m as de,e as he,k as es}from"../chunks/index.3667c5db.js";import{w as ui}from"../chunks/index.2ffdca00.js";function qe(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Rn(s,e){X(s,1,1,()=>{e.delete(s.key)})}function Dn(s,e,t,n,a,i,l,r,o,u,c,d){let f=s.length,E=i.length,b=f;const _={};for(;b--;)_[s[b].key]=b;const v=[],k=new Map,h=new Map,g=[];for(b=E;b--;){const P=d(a,i,b),N=t(P);let T=l.get(N);T?n&&g.push(()=>T.p(P,e)):(T=u(N,P),T.c()),k.set(N,v[b]=T),N in _&&h.set(N,Math.abs(b-_[N]))}const w=new Set,C=new Set;function y(P){H(P,1),P.m(r,c),l.set(P.key,P),c=P.first,E--}for(;f&&E;){const P=v[E-1],N=s[f-1],T=P.key,I=N.key;P===N?(c=P.first,f--,E--):k.has(I)?!l.has(T)||w.has(T)?y(P):C.has(I)?f--:h.get(T)>h.get(I)?(C.add(T),y(P)):(w.add(I),f--):(o(N,l),f--)}for(;f--;){const P=s[f];k.has(P.key)||o(P,l)}for(;E;)y(v[E-1]);return st(g),v}typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var zs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ci(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var zn={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,l={},r={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function h(g){return g instanceof o?new o(g.type,h(g.content),g.alias):Array.isArray(g)?g.map(h):g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(h){return Object.prototype.toString.call(h).slice(8,-1)},objId:function(h){return h.__id||Object.defineProperty(h,"__id",{value:++i}),h.__id},clone:function h(g,w){w=w||{};var C,y;switch(r.util.type(g)){case"Object":if(y=r.util.objId(g),w[y])return w[y];C={},w[y]=C;for(var P in g)g.hasOwnProperty(P)&&(C[P]=h(g[P],w));return C;case"Array":return y=r.util.objId(g),w[y]?w[y]:(C=[],w[y]=C,g.forEach(function(N,T){C[T]=h(N,w)}),C);default:return g}},getLanguage:function(h){for(;h;){var g=a.exec(h.className);if(g)return g[1].toLowerCase();h=h.parentElement}return"none"},setLanguage:function(h,g){h.className=h.className.replace(RegExp(a,"gi"),""),h.classList.add("language-"+g)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(C){var h=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(h){var g=document.getElementsByTagName("script");for(var w in g)if(g[w].src==h)return g[w]}return null}},isActive:function(h,g,w){for(var C="no-"+g;h;){var y=h.classList;if(y.contains(g))return!0;if(y.contains(C))return!1;h=h.parentElement}return!!w}},languages:{plain:l,plaintext:l,text:l,txt:l,extend:function(h,g){var w=r.util.clone(r.languages[h]);for(var C in g)w[C]=g[C];return w},insertBefore:function(h,g,w,C){C=C||r.languages;var y=C[h],P={};for(var N in y)if(y.hasOwnProperty(N)){if(N==g)for(var T in w)w.hasOwnProperty(T)&&(P[T]=w[T]);w.hasOwnProperty(N)||(P[N]=y[N])}var I=C[h];return C[h]=P,r.languages.DFS(r.languages,function(z,K){K===I&&z!=h&&(this[z]=P)}),P},DFS:function h(g,w,C,y){y=y||{};var P=r.util.objId;for(var N in g)if(g.hasOwnProperty(N)){w.call(g,N,g[N],C||N);var T=g[N],I=r.util.type(T);I==="Object"&&!y[P(T)]?(y[P(T)]=!0,h(T,w,null,y)):I==="Array"&&!y[P(T)]&&(y[P(T)]=!0,h(T,w,N,y))}}},plugins:{},highlightAll:function(h,g){r.highlightAllUnder(document,h,g)},highlightAllUnder:function(h,g,w){var C={callback:w,container:h,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),r.hooks.run("before-all-elements-highlight",C);for(var y=0,P;P=C.elements[y++];)r.highlightElement(P,g===!0,C.callback)},highlightElement:function(h,g,w){var C=r.util.getLanguage(h),y=r.languages[C];r.util.setLanguage(h,C);var P=h.parentElement;P&&P.nodeName.toLowerCase()==="pre"&&r.util.setLanguage(P,C);var N=h.textContent,T={element:h,language:C,grammar:y,code:N};function I(K){T.highlightedCode=K,r.hooks.run("before-insert",T),T.element.innerHTML=T.highlightedCode,r.hooks.run("after-highlight",T),r.hooks.run("complete",T),w&&w.call(T.element)}if(r.hooks.run("before-sanity-check",T),P=T.element.parentElement,P&&P.nodeName.toLowerCase()==="pre"&&!P.hasAttribute("tabindex")&&P.setAttribute("tabindex","0"),!T.code){r.hooks.run("complete",T),w&&w.call(T.element);return}if(r.hooks.run("before-highlight",T),!T.grammar){I(r.util.encode(T.code));return}if(g&&n.Worker){var z=new Worker(r.filename);z.onmessage=function(K){I(K.data)},z.postMessage(JSON.stringify({language:T.language,code:T.code,immediateClose:!0}))}else I(r.highlight(T.code,T.grammar,T.language))},highlight:function(h,g,w){var C={code:h,grammar:g,language:w};if(r.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=r.tokenize(C.code,C.grammar),r.hooks.run("after-tokenize",C),o.stringify(r.util.encode(C.tokens),C.language)},tokenize:function(h,g){var w=g.rest;if(w){for(var C in w)g[C]=w[C];delete g.rest}var y=new d;return f(y,y.head,h),c(h,y,g,y.head,0),b(y)},hooks:{all:{},add:function(h,g){var w=r.hooks.all;w[h]=w[h]||[],w[h].push(g)},run:function(h,g){var w=r.hooks.all[h];if(!(!w||!w.length))for(var C=0,y;y=w[C++];)y(g)}},Token:o};n.Prism=r;function o(h,g,w,C){this.type=h,this.content=g,this.alias=w,this.length=(C||"").length|0}o.stringify=function h(g,w){if(typeof g=="string")return g;if(Array.isArray(g)){var C="";return g.forEach(function(I){C+=h(I,w)}),C}var y={type:g.type,content:h(g.content,w),tag:"span",classes:["token",g.type],attributes:{},language:w},P=g.alias;P&&(Array.isArray(P)?Array.prototype.push.apply(y.classes,P):y.classes.push(P)),r.hooks.run("wrap",y);var N="";for(var T in y.attributes)N+=" "+T+'="'+(y.attributes[T]||"").replace(/"/g,"&quot;")+'"';return"<"+y.tag+' class="'+y.classes.join(" ")+'"'+N+">"+y.content+"</"+y.tag+">"};function u(h,g,w,C){h.lastIndex=g;var y=h.exec(w);if(y&&C&&y[1]){var P=y[1].length;y.index+=P,y[0]=y[0].slice(P)}return y}function c(h,g,w,C,y,P){for(var N in w)if(!(!w.hasOwnProperty(N)||!w[N])){var T=w[N];T=Array.isArray(T)?T:[T];for(var I=0;I<T.length;++I){if(P&&P.cause==N+","+I)return;var z=T[I],K=z.inside,re=!!z.lookbehind,le=!!z.greedy,Ie=z.alias;if(le&&!z.pattern.global){var ge=z.pattern.toString().match(/[imsuy]*$/)[0];z.pattern=RegExp(z.pattern.source,ge+"g")}for(var se=z.pattern||z,U=C.next,Q=y;U!==g.tail&&!(P&&Q>=P.reach);Q+=U.value.length,U=U.next){var ee=U.value;if(g.length>h.length)return;if(!(ee instanceof o)){var ve=1,oe;if(le){if(oe=u(se,Q,h,re),!oe||oe.index>=h.length)break;var ne=oe.index,M=oe.index+oe[0].length,A=Q;for(A+=U.value.length;ne>=A;)U=U.next,A+=U.value.length;if(A-=U.value.length,Q=A,U.value instanceof o)continue;for(var j=U;j!==g.tail&&(A<M||typeof j.value=="string");j=j.next)ve++,A+=j.value.length;ve--,ee=h.slice(Q,A),oe.index-=Q}else if(oe=u(se,0,ee,re),!oe)continue;var ne=oe.index,_e=oe[0],Oe=ee.slice(0,ne),Ae=ee.slice(ne+_e.length),Fe=Q+ee.length;P&&Fe>P.reach&&(P.reach=Fe);var Me=U.prev;Oe&&(Me=f(g,Me,Oe),Q+=Oe.length),E(g,Me,ve);var nt=new o(N,K?r.tokenize(_e,K):_e,Ie,_e);if(U=f(g,Me,nt),Ae&&f(g,U,Ae),ve>1){var Ke={cause:N+","+I,reach:Fe};c(h,g,w,U.prev,Q,Ke),P&&Ke.reach>P.reach&&(P.reach=Ke.reach)}}}}}}function d(){var h={value:null,prev:null,next:null},g={value:null,prev:h,next:null};h.next=g,this.head=h,this.tail=g,this.length=0}function f(h,g,w){var C=g.next,y={value:w,prev:g,next:C};return g.next=y,C.prev=y,h.length++,y}function E(h,g,w){for(var C=g.next,y=0;y<w&&C!==h.tail;y++)C=C.next;g.next=C,C.prev=g,h.length-=y}function b(h){for(var g=[],w=h.head.next;w!==h.tail;)g.push(w.value),w=w.next;return g}if(!n.document)return n.addEventListener&&(r.disableWorkerMessageHandler||n.addEventListener("message",function(h){var g=JSON.parse(h.data),w=g.language,C=g.code,y=g.immediateClose;n.postMessage(r.highlight(C,r.languages[w],w)),y&&n.close()},!1)),r;var _=r.util.currentScript();_&&(r.filename=_.src,_.hasAttribute("data-manual")&&(r.manual=!0));function v(){r.manual||r.highlightAll()}if(!r.manual){var k=document.readyState;k==="loading"||k==="interactive"&&_&&_.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return r}(e);s.exports&&(s.exports=t),typeof zs<"u"&&(zs.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(a,i){var l={};l["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},l.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:l}};r["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var o={};o[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:r},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,a){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:t.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var i=n.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading…",a=function(_,v){return"✖ Error "+_+" while fetching file: "+v},i="✖ Error: File does not exist or is empty",l={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},r="data-src-status",o="loading",u="loaded",c="failed",d="pre[data-src]:not(["+r+'="'+u+'"]):not(['+r+'="'+o+'"])';function f(_,v,k){var h=new XMLHttpRequest;h.open("GET",_,!0),h.onreadystatechange=function(){h.readyState==4&&(h.status<400&&h.responseText?v(h.responseText):h.status>=400?k(a(h.status,h.statusText)):k(i))},h.send(null)}function E(_){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(_||"");if(v){var k=Number(v[1]),h=v[2],g=v[3];return h?g?[k,Number(g)]:[k,void 0]:[k,k]}}t.hooks.add("before-highlightall",function(_){_.selector+=", "+d}),t.hooks.add("before-sanity-check",function(_){var v=_.element;if(v.matches(d)){_.code="",v.setAttribute(r,o);var k=v.appendChild(document.createElement("CODE"));k.textContent=n;var h=v.getAttribute("data-src"),g=_.language;if(g==="none"){var w=(/\.(\w+)$/.exec(h)||[,"none"])[1];g=l[w]||w}t.util.setLanguage(k,g),t.util.setLanguage(v,g);var C=t.plugins.autoloader;C&&C.loadLanguages(g),f(h,function(y){v.setAttribute(r,u);var P=E(v.getAttribute("data-range"));if(P){var N=y.split(/\r\n?|\n/g),T=P[0],I=P[1]==null?N.length:P[1];T<0&&(T+=N.length),T=Math.max(0,Math.min(T-1,N.length)),I<0&&(I+=N.length),I=Math.max(0,Math.min(I,N.length)),y=N.slice(T,I).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(T+1))}k.textContent=y,t.highlightElement(k)},function(y){v.setAttribute(r,c),k.textContent=y})}}),t.plugins.fileHighlight={highlight:function(v){for(var k=(v||document).querySelectorAll(d),h=0,g;g=k[h++];)t.highlightElement(g)}};var b=!1;t.fileHighlight=function(){b||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),b=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(zn);var fi=zn.exports;const Un=ci(fi),Us="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+Us+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+Us+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",s=>{s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,t){const n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;const a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};a["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};const i={};i[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:a},Prism.languages.insertBefore("svelte","cdata",i)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function di(s){let e,t;return{c(){e=new $n(!1),t=ke(),this.h()},l(n){e=ei(n,!1),t=ke(),this.h()},h(){e.a=t},m(n,a){e.m(s[2],n,a),V(n,t,a)},p(n,a){a&4&&e.p(n[2])},d(n){n&&(S(t),e.d())}}}function hi(s){let e;return{c(){e=et(s[2])},l(t){e=tt(t,s[2])},m(t,n){V(t,e,n)},p(t,n){n&4&&is(e,t[2])},d(t){t&&S(e)}}}function gi(s){let e,t,n,a,i,l,r;const o=s[6].default,u=Tn(o,s,s[5],null);function c(E,b){return E[0]==="none"?hi:di}let d=c(s),f=d(s);return{c(){e=R("code"),u&&u.c(),t=W(),n=R("pre"),a=R("code"),f.c(),this.h()},l(E){e=D(E,"CODE",{style:!0});var b=B(e);u&&u.l(b),b.forEach(S),t=G(E),n=D(E,"PRE",{class:!0,"command-line":!0,"data-output":!0});var _=B(n);a=D(_,"CODE",{class:!0});var v=B(a);f.l(v),v.forEach(S),_.forEach(S),this.h()},h(){Be(e,"display","none"),p(a,"class",i="language-"+s[0]),p(n,"class",l="language-"+s[0]),p(n,"command-line",""),p(n,"data-output","2-17")},m(E,b){V(E,e,b),u&&u.m(e,null),s[7](e),V(E,t,b),V(E,n,b),L(n,a),f.m(a,null),r=!0},p(E,[b]){u&&u.p&&(!r||b&32)&&Ln(u,o,E,E[5],r?In(o,E[5],b,null):qn(E[5]),null),d===(d=c(E))&&f?f.p(E,b):(f.d(1),f=d(E),f&&(f.c(),f.m(a,null))),(!r||b&1&&i!==(i="language-"+E[0]))&&p(a,"class",i),(!r||b&1&&l!==(l="language-"+E[0]))&&p(n,"class",l)},i(E){r||(H(u,E),r=!0)},o(E){X(u,E),r=!1},d(E){E&&(S(e),S(t),S(n)),u&&u.d(E),s[7](null),f.d()}}}const Bs=Un;Un.highlightElement;const bi={transform:s=>s};function pi(s,e,t){let{$$slots:n={},$$scope:a}=e,{language:i="javascript"}=e,{source:l=""}=e,{transform:r=f=>f}=e,o,u;function c(){const f=Bs.languages[i];let E=l||o.textContent;E=bi.transform(E),E=r(E),t(2,u=i==="none"?E:Bs.highlight(E,f,i))}function d(f){Z[f?"unshift":"push"](()=>{o=f,t(1,o)})}return s.$$set=f=>{t(9,e=Zt(Zt({},e),Fs(f))),"language"in f&&t(0,i=f.language),"source"in f&&t(3,l=f.source),"transform"in f&&t(4,r=f.transform),"$$scope"in f&&t(5,a=f.$$scope)},s.$$.update=()=>{e&&(l||o)&&c()},e=Fs(e),[i,o,u,l,r,a,n,d]}let mi=class extends ye{constructor(e){super(),Pe(this,e,pi,gi,Ce,{language:0,source:3,transform:4})}};/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Ne="w",Ge="b",Te="p",Ss="n",Yt="b",Vt="r",mt="q",Le="k",Es="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",He=-1,vi={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},x={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},J={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},ws={b:[16,32,17,15],w:[-16,-32,-17,-15]},Vs={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},_i=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Ei=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],wi={p:1,n:2,b:4,r:8,q:16,k:32},ki="pnbrqkPNBRQK",Hs=[Ss,Yt,Vt,mt],Mi=7,Si=6,Ci=1,yi=0,Xt={[Le]:x.KSIDE_CASTLE,[mt]:x.QSIDE_CASTLE},bt={w:[{square:J.a1,flag:x.QSIDE_CASTLE},{square:J.h1,flag:x.KSIDE_CASTLE}],b:[{square:J.a8,flag:x.QSIDE_CASTLE},{square:J.h8,flag:x.KSIDE_CASTLE}]},Pi={b:Ci,w:Si},Ai=["1-0","0-1","1/2-1/2","*"];function Ct(s){return s>>4}function Ht(s){return s&15}function Bn(s){return"0123456789".indexOf(s)!==-1}function je(s){const e=Ht(s),t=Ct(s);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function Bt(s){return s===Ne?Ge:Ne}function Ti(s){const e=s.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(e[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const a=e[0].split("/");if(a.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let l=0;l<a.length;l++){let r=0,o=!1;for(let u=0;u<a[l].length;u++)if(Bn(a[l][u])){if(o)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};r+=parseInt(a[l][u],10),o=!0}else{if(!/^[prnbqkPRNBQK]$/.test(a[l][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};r+=1,o=!1}if(r!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:l,regex:r}of i){if(!r.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${l} king`};if((e[0].match(r)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${l} kings`}}return{ok:!0}}function Li(s,e){const t=s.from,n=s.to,a=s.piece;let i=0,l=0,r=0;for(let o=0,u=e.length;o<u;o++){const c=e[o].from,d=e[o].to,f=e[o].piece;a===f&&t!==c&&n===d&&(i++,Ct(t)===Ct(c)&&l++,Ht(t)===Ht(c)&&r++)}return i>0?l>0&&r>0?je(t):r>0?je(t).charAt(1):je(t).charAt(0):""}function pt(s,e,t,n,a,i=void 0,l=x.NORMAL){const r=Ct(n);if(a===Te&&(r===Mi||r===yi))for(let o=0;o<Hs.length;o++){const u=Hs[o];s.push({color:e,from:t,to:n,piece:a,captured:i,promotion:u,flags:l|x.PROMOTION})}else s.push({color:e,from:t,to:n,piece:a,captured:i,flags:l})}function js(s){let e=s.charAt(0);return e>="a"&&e<="h"?s.match(/[a-h]\d.*[a-h]\d/)?void 0:Te:(e=e.toLowerCase(),e==="o"?Le:e)}function ks(s){return s.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class qi{constructor(e=Es){q(this,"_board",new Array(128));q(this,"_turn",Ne);q(this,"_header",{});q(this,"_kings",{w:He,b:He});q(this,"_epSquare",-1);q(this,"_halfMoves",0);q(this,"_moveNumber",0);q(this,"_history",[]);q(this,"_comments",{});q(this,"_castling",{w:0,b:0});this.load(e)}clear(e=!1){this._board=new Array(128),this._kings={w:He,b:He},this._turn=Ne,this._castling={w:0,b:0},this._epSquare=He,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._updateSetup(this.fen())}removeHeader(e){e in this._header&&delete this._header[e]}load(e,t=!1){let n=e.split(/\s+/);if(n.length>=2&&n.length<6){const o=["-","-","0","1"];e=n.concat(o.slice(-(6-n.length))).join(" ")}n=e.split(/\s+/);const{ok:a,error:i}=Ti(e);if(!a)throw new Error(i);const l=n[0];let r=0;this.clear(t);for(let o=0;o<l.length;o++){const u=l.charAt(o);if(u==="/")r+=8;else if(Bn(u))r+=parseInt(u,10);else{const c=u<"a"?Ne:Ge;this.put({type:u.toLowerCase(),color:c},je(r)),r++}}this._turn=n[1],n[2].indexOf("K")>-1&&(this._castling.w|=x.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(this._castling.w|=x.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(this._castling.b|=x.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(this._castling.b|=x.QSIDE_CASTLE),this._epSquare=n[3]==="-"?He:J[n[3]],this._halfMoves=parseInt(n[4],10),this._moveNumber=parseInt(n[5],10),this._updateSetup(this.fen())}fen(){var i,l;let e=0,t="";for(let r=J.a8;r<=J.h1;r++){if(this._board[r]){e>0&&(t+=e,e=0);const{color:o,type:u}=this._board[r];t+=o===Ne?u.toUpperCase():u.toLowerCase()}else e++;r+1&136&&(e>0&&(t+=e),r!==J.h1&&(t+="/"),e=0,r+=8)}let n="";this._castling[Ne]&x.KSIDE_CASTLE&&(n+="K"),this._castling[Ne]&x.QSIDE_CASTLE&&(n+="Q"),this._castling[Ge]&x.KSIDE_CASTLE&&(n+="k"),this._castling[Ge]&x.QSIDE_CASTLE&&(n+="q"),n=n||"-";let a="-";if(this._epSquare!==He){const r=this._epSquare+(this._turn===Ne?16:-16),o=[r+1,r-1];for(const u of o){if(u&136)continue;const c=this._turn;if(((i=this._board[u])==null?void 0:i.color)===c&&((l=this._board[u])==null?void 0:l.type)===Te){this._makeMove({color:c,from:u,to:this._epSquare,piece:Te,captured:Te,flags:x.EP_CAPTURE});const d=!this._isKingAttacked(c);if(this._undoMove(),d){a=je(this._epSquare);break}}}}return[t,this._turn,n,a,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==Es?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(Es)}get(e){return this._board[J[e]]||!1}put({type:e,color:t},n){if(ki.indexOf(e.toLowerCase())===-1||!(n in J))return!1;const a=J[n];return e==Le&&!(this._kings[t]==He||this._kings[t]==a)?!1:(this._board[a]={type:e,color:t},e===Le&&(this._kings[t]=a),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}remove(e){const t=this.get(e);return delete this._board[J[e]],t&&t.type===Le&&(this._kings[t.color]=He),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){var n,a,i,l,r,o,u,c,d,f,E,b;const e=((n=this._board[J.e1])==null?void 0:n.type)===Le&&((a=this._board[J.e1])==null?void 0:a.color)===Ne,t=((i=this._board[J.e8])==null?void 0:i.type)===Le&&((l=this._board[J.e8])==null?void 0:l.color)===Ge;(!e||((r=this._board[J.a1])==null?void 0:r.type)!==Vt||((o=this._board[J.a1])==null?void 0:o.color)!==Ne)&&(this._castling.w&=~x.QSIDE_CASTLE),(!e||((u=this._board[J.h1])==null?void 0:u.type)!==Vt||((c=this._board[J.h1])==null?void 0:c.color)!==Ne)&&(this._castling.w&=~x.KSIDE_CASTLE),(!t||((d=this._board[J.a8])==null?void 0:d.type)!==Vt||((f=this._board[J.a8])==null?void 0:f.color)!==Ge)&&(this._castling.b&=~x.QSIDE_CASTLE),(!t||((E=this._board[J.h8])==null?void 0:E.type)!==Vt||((b=this._board[J.h8])==null?void 0:b.color)!==Ge)&&(this._castling.b&=~x.KSIDE_CASTLE)}_updateEnPassantSquare(){var i,l;if(this._epSquare===He)return;const e=this._epSquare+(this._turn===Ne?-16:16),t=this._epSquare+(this._turn===Ne?16:-16),n=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((i=this._board[t])==null?void 0:i.color)!==Bt(this._turn)||((l=this._board[t])==null?void 0:l.type)!==Te){this._epSquare=He;return}const a=r=>{var o,u;return!(r&136)&&((o=this._board[r])==null?void 0:o.color)===this._turn&&((u=this._board[r])==null?void 0:u.type)===Te};n.some(a)||(this._epSquare=He)}_attacked(e,t){for(let n=J.a8;n<=J.h1;n++){if(n&136){n+=7;continue}if(this._board[n]===void 0||this._board[n].color!==e)continue;const a=this._board[n],i=n-t;if(i===0)continue;const l=i+119;if(_i[l]&wi[a.type]){if(a.type===Te){if(i>0){if(a.color===Ne)return!0}else if(a.color===Ge)return!0;continue}if(a.type==="n"||a.type==="k")return!0;const r=Ei[l];let o=n+r,u=!1;for(;o!==t;){if(this._board[o]!=null){u=!0;break}o+=r}if(!u)return!0}}return!1}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(Bt(e),t)}isAttacked(e,t){return this._attacked(t,J[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let n=0,a=0;for(let i=J.a8;i<=J.h1;i++){if(a=(a+1)%2,i&136){i+=7;continue}const l=this._board[i];l&&(e[l.type]=l.type in e?e[l.type]+1:1,l.type===Yt&&t.push(a),n++)}if(n===2)return!0;if(n===3&&(e[Yt]===1||e[Ss]===1))return!0;if(n===e[Yt]+2){let i=0;const l=t.length;for(let r=0;r<l;r++)i+=t[r];if(i===0||i===l)return!0}return!1}isThreefoldRepetition(){const e=[],t={};let n=!1;for(;;){const a=this._undoMove();if(!a)break;e.push(a)}for(;;){const a=this.fen().split(" ").slice(0,4).join(" ");t[a]=a in t?t[a]+1:1,t[a]>=3&&(n=!0);const i=e.pop();if(i)this._makeMove(i);else break}return n}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:n=void 0}={}){const a=this._moves({square:t,piece:n});return e?a.map(i=>this._makePretty(i)):a.map(i=>this._moveToSan(i,a))}_moves({legal:e=!0,piece:t=void 0,square:n=void 0}={}){var E;const a=n?n.toLowerCase():void 0,i=t==null?void 0:t.toLowerCase(),l=[],r=this._turn,o=Bt(r);let u=J.a8,c=J.h1,d=!1;if(a)if(a in J)u=c=J[a],d=!0;else return[];for(let b=u;b<=c;b++){if(b&136){b+=7;continue}if(!this._board[b]||this._board[b].color===o)continue;const{type:_}=this._board[b];let v;if(_===Te){if(i&&i!==_)continue;v=b+ws[r][0],this._board[v]||(pt(l,r,b,v,Te),v=b+ws[r][1],Pi[r]===Ct(b)&&!this._board[v]&&pt(l,r,b,v,Te,void 0,x.BIG_PAWN));for(let k=2;k<4;k++)v=b+ws[r][k],!(v&136)&&(((E=this._board[v])==null?void 0:E.color)===o?pt(l,r,b,v,Te,this._board[v].type,x.CAPTURE):v===this._epSquare&&pt(l,r,b,v,Te,Te,x.EP_CAPTURE))}else{if(i&&i!==_)continue;for(let k=0,h=Vs[_].length;k<h;k++){const g=Vs[_][k];for(v=b;v+=g,!(v&136);){if(!this._board[v])pt(l,r,b,v,_);else{if(this._board[v].color===r)break;pt(l,r,b,v,_,this._board[v].type,x.CAPTURE);break}if(_===Ss||_===Le)break}}}}if((i===void 0||i===Le)&&(!d||c===this._kings[r])){if(this._castling[r]&x.KSIDE_CASTLE){const b=this._kings[r],_=b+2;!this._board[b+1]&&!this._board[_]&&!this._attacked(o,this._kings[r])&&!this._attacked(o,b+1)&&!this._attacked(o,_)&&pt(l,r,this._kings[r],_,Le,void 0,x.KSIDE_CASTLE)}if(this._castling[r]&x.QSIDE_CASTLE){const b=this._kings[r],_=b-2;!this._board[b-1]&&!this._board[b-2]&&!this._board[b-3]&&!this._attacked(o,this._kings[r])&&!this._attacked(o,b-1)&&!this._attacked(o,_)&&pt(l,r,this._kings[r],_,Le,void 0,x.QSIDE_CASTLE)}}if(!e||this._kings[r]===-1)return l;const f=[];for(let b=0,_=l.length;b<_;b++)this._makeMove(l[b]),this._isKingAttacked(r)||f.push(l[b]),this._undoMove();return f}move(e,{strict:t=!1}={}){let n=null;if(typeof e=="string")n=this._moveFromSan(e,t);else if(typeof e=="object"){const i=this._moves();for(let l=0,r=i.length;l<r;l++)if(e.from===je(i[l].from)&&e.to===je(i[l].to)&&(!("promotion"in i[l])||e.promotion===i[l].promotion)){n=i[l];break}}if(!n)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const a=this._makePretty(n);return this._makeMove(n),a}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const t=this._turn,n=Bt(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&x.EP_CAPTURE&&(this._turn===Ge?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===Le){if(this._kings[t]=e.to,e.flags&x.KSIDE_CASTLE){const a=e.to-1,i=e.to+1;this._board[a]=this._board[i],delete this._board[i]}else if(e.flags&x.QSIDE_CASTLE){const a=e.to+1,i=e.to-2;this._board[a]=this._board[i],delete this._board[i]}this._castling[t]=0}if(this._castling[t]){for(let a=0,i=bt[t].length;a<i;a++)if(e.from===bt[t][a].square&&this._castling[t]&bt[t][a].flag){this._castling[t]^=bt[t][a].flag;break}}if(this._castling[n]){for(let a=0,i=bt[n].length;a<i;a++)if(e.to===bt[n][a].square&&this._castling[n]&bt[n][a].flag){this._castling[n]^=bt[n][a].flag;break}}e.flags&x.BIG_PAWN?t===Ge?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=He,e.piece===Te?this._halfMoves=0:e.flags&(x.CAPTURE|x.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===Ge&&this._moveNumber++,this._turn=n}undo(){const e=this._undoMove();return e?this._makePretty(e):null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const n=this._turn,a=Bt(n);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)if(t.flags&x.EP_CAPTURE){let i;n===Ge?i=t.to-16:i=t.to+16,this._board[i]={type:Te,color:a}}else this._board[t.to]={type:t.captured,color:a};if(t.flags&(x.KSIDE_CASTLE|x.QSIDE_CASTLE)){let i,l;t.flags&x.KSIDE_CASTLE?(i=t.to+1,l=t.to-1):(i=t.to-2,l=t.to+1),this._board[i]=this._board[l],delete this._board[l]}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const n=[];let a=!1;for(const f in this._header)n.push("["+f+' "'+this._header[f]+'"]'+e),a=!0;a&&this._history.length&&n.push(e);const i=f=>{const E=this._comments[this.fen()];if(typeof E<"u"){const b=f.length>0?" ":"";f=`${f}${b}{${E}}`}return f},l=[];for(;this._history.length>0;)l.push(this._undoMove());const r=[];let o="";for(l.length===0&&r.push(i(""));l.length>0;){o=i(o);const f=l.pop();if(!f)break;if(!this._history.length&&f.color==="b"){const E=`${this._moveNumber}. ...`;o=o?`${o} ${E}`:E}else f.color==="w"&&(o.length&&r.push(o),o=this._moveNumber+".");o=o+" "+this._moveToSan(f,this._moves({legal:!0})),this._makeMove(f)}if(o.length&&r.push(i(o)),typeof this._header.Result<"u"&&r.push(this._header.Result),t===0)return n.join("")+r.join(" ");const u=function(){return n.length>0&&n[n.length-1]===" "?(n.pop(),!0):!1},c=function(f,E){for(const b of E.split(" "))if(b){if(f+b.length>t){for(;u();)f--;n.push(e),f=0}n.push(b),f+=b.length,n.push(" "),f++}return u()&&f--,f};let d=0;for(let f=0;f<r.length;f++){if(d+r[f].length>t&&r[f].includes("{")){d=c(d,r[f]);continue}d+r[f].length>t&&f!==0?(n[n.length-1]===" "&&n.pop(),n.push(e),d=0):f!==0&&(n.push(" "),d++),n.push(r[f]),d+=r[f].length}return n.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{strict:t=!1,newlineChar:n=`\r?
`}={}){function a(g){return g.replace(/\\/g,"\\")}function i(g){const w={},C=g.split(new RegExp(a(n)));let y="",P="";for(let N=0;N<C.length;N++){const T=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;y=C[N].replace(T,"$1"),P=C[N].replace(T,"$2"),y.trim().length>0&&(w[y]=P)}return w}e=e.trim();const r=new RegExp("^(\\[((?:"+a(n)+")|.)*\\])((?:\\s*"+a(n)+"){2}|(?:\\s*"+a(n)+")*$)").exec(e),o=r&&r.length>=2?r[1]:"";this.reset();const u=i(o);let c="";for(const g in u)g.toLowerCase()==="fen"&&(c=u[g]),this.header(g,u[g]);if(!t)c&&this.load(c,!0);else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,!0)}function d(g){return Array.from(g).map(function(w){return w.charCodeAt(0)<128?w.charCodeAt(0).toString(16):encodeURIComponent(w).replace(/%/g,"").toLowerCase()}).join("")}function f(g){return g.length==0?"":decodeURIComponent("%"+(g.match(/.{1,2}/g)||[]).join("%"))}const E=function(g){return g=g.replace(new RegExp(a(n),"g")," "),`{${d(g.slice(1,g.length-1))}}`},b=function(g){if(g.startsWith("{")&&g.endsWith("}"))return f(g.slice(1,g.length-1))};let _=e.replace(o,"").replace(new RegExp(`({[^}]*})+?|;([^${a(n)}]*)`,"g"),function(g,w,C){return w!==void 0?E(w):" "+E(`{${C.slice(1)}}`)}).replace(new RegExp(a(n),"g")," ");const v=/(\([^()]+\))+?/g;for(;v.test(_);)_=_.replace(v,"");_=_.replace(/\d+\.(\.\.)?/g,""),_=_.replace(/\.\.\./g,""),_=_.replace(/\$\d+/g,"");let k=_.trim().split(new RegExp(/\s+/));k=k.filter(g=>g!=="");let h="";for(let g=0;g<k.length;g++){const w=b(k[g]);if(w!==void 0){this._comments[this.fen()]=w;continue}const C=this._moveFromSan(k[g],t);if(C==null)if(Ai.indexOf(k[g])>-1)h=k[g];else throw new Error(`Invalid move in PGN: ${k[g]}`);else h="",this._makeMove(C)}h&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",h)}_moveToSan(e,t){let n="";if(e.flags&x.KSIDE_CASTLE)n="O-O";else if(e.flags&x.QSIDE_CASTLE)n="O-O-O";else{if(e.piece!==Te){const a=Li(e,t);n+=e.piece.toUpperCase()+a}e.flags&(x.CAPTURE|x.EP_CAPTURE)&&(e.piece===Te&&(n+=je(e.from)[0]),n+="x"),n+=je(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(e,t=!1){const n=ks(e);let a=js(n),i=this._moves({legal:!0,piece:a});for(let f=0,E=i.length;f<E;f++)if(n===ks(this._moveToSan(i[f],i)))return i[f];if(t)return null;let l,r,o,u,c,d=!1;if(r=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),r?(l=r[1],o=r[2],u=r[3],c=r[4],o.length==1&&(d=!0)):(r=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),r&&(l=r[1],o=r[2],u=r[3],c=r[4],o.length==1&&(d=!0))),a=js(n),i=this._moves({legal:!0,piece:l||a}),!u)return null;for(let f=0,E=i.length;f<E;f++)if(o){if((!l||l.toLowerCase()==i[f].piece)&&J[o]==i[f].from&&J[u]==i[f].to&&(!c||c.toLowerCase()==i[f].promotion))return i[f];if(d){const b=je(i[f].from);if((!l||l.toLowerCase()==i[f].piece)&&J[u]==i[f].to&&(o==b[0]||o==b[1])&&(!c||c.toLowerCase()==i[f].promotion))return i[f]}}else if(n===ks(this._moveToSan(i[f],i)).replace("x",""))return i[f];return null}ascii(){let e=`   +------------------------+
`;for(let t=J.a8;t<=J.h1;t++){if(Ht(t)===0&&(e+=" "+"87654321"[Ct(t)]+" |"),this._board[t]){const n=this._board[t].type,i=this._board[t].color===Ne?n.toUpperCase():n.toLowerCase();e+=" "+i+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let n=0;const a=this._turn;for(let i=0,l=t.length;i<l;i++)this._makeMove(t[i]),this._isKingAttacked(a)||(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}_makePretty(e){const{color:t,piece:n,from:a,to:i,flags:l,captured:r,promotion:o}=e;let u="";for(const E in x)x[E]&l&&(u+=vi[E]);const c=je(a),d=je(i),f={color:t,piece:n,from:c,to:d,san:this._moveToSan(e,this._moves({legal:!0})),flags:u,lan:c+d,before:this.fen(),after:""};return this._makeMove(e),f.after=this.fen(),this._undoMove(),r&&(f.captured=r),o&&(f.promotion=o,f.lan+=o),f}turn(){return this._turn}board(){const e=[];let t=[];for(let n=J.a8;n<=J.h1;n++)this._board[n]==null?t.push(null):t.push({square:je(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e}squareColor(e){if(e in J){const t=J[e];return(Ct(t)+Ht(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],n=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const a=t.pop();if(!a)break;e?n.push(this._makePretty(a)):n.push(this._moveToSan(a,this._moves())),this._makeMove(a)}return n}_pruneComments(){const e=[],t={},n=a=>{a in this._comments&&(t[a]=this._comments[a])};for(;this._history.length>0;)e.push(this._undoMove());for(n(this.fen());;){const a=e.pop();if(!a)break;this._makeMove(a),n(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const a of[Le,mt])t[a]!==void 0&&(t[a]?this._castling[e]|=Xt[a]:this._castling[e]&=~Xt[a]);this._updateCastlingRights();const n=this.getCastlingRights(e);return(t[Le]===void 0||t[Le]===n[Le])&&(t[mt]===void 0||t[mt]===n[mt])}getCastlingRights(e){return{[Le]:(this._castling[e]&Xt[Le])!==0,[mt]:(this._castling[e]&Xt[mt])!==0}}moveNumber(){return this._moveNumber}}class Ii{constructor(e){q(this,"boardTheme");q(this,"piecesTheme");q(this,"mouseEvents");q(this,"flipped");q(this,"notation");q(this,"startFen");q(this,"size");q(this,"scale");q(this,"resizible");q(this,"defaultState",{boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:Vi,size:0,scale:70,resizible:!1});q(this,"setConfigSettings",e=>{e!==void 0&&(e.boardTheme!==void 0&&(this.boardTheme=e.boardTheme),e.piecesTheme!==void 0&&(this.piecesTheme=e.piecesTheme),e.mouseEvents!==void 0&&(this.mouseEvents=e.mouseEvents),e.flipped!==void 0&&(this.flipped=e.flipped),e.notation!==void 0&&(this.notation=e.notation),e.startFen!==void 0&&(this.startFen=e.startFen),e.resizible!==void 0&&(this.resizible=e.resizible))});q(this,"getConfig",()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...this.resizible!==this.defaultState.resizible&&{resizible:this.resizible}};if(Object.keys(e).length!==0)return e});this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.scale=this.defaultState.scale,this.resizible=this.defaultState.resizible,this.setConfigSettings(e)}}class Oi{constructor(e){q(this,"enabled");q(this,"color");q(this,"defaultState",{enabled:!0,color:"BOTH"});q(this,"setConfigSettings",e=>{switch(e){case!0:this.enabled=!0,this.color="BOTH";break;case!1:this.enabled=!1;break;case"WHITE":this.enabled=!0,this.color="WHITE";break;case"BLACK":this.enabled=!0,this.color="BLACK";break}});q(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class Fi{constructor(e){q(this,"enabled");q(this,"ghostPiece");q(this,"transition");q(this,"defaultState",{enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}});q(this,"setConfigSettings",e=>{var t,n,a,i;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(t=e==null?void 0:e.transition)!=null&&t.duration&&(this.transition.settings.duration=(n=e==null?void 0:e.transition)==null?void 0:n.duration),(a=e==null?void 0:e.transition)!=null&&a.easing&&(this.transition.settings.easing=(i=e==null?void 0:e.transition)==null?void 0:i.easing)))))});q(this,"getConfig",()=>{const e={},t={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(t.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(t.easing=this.transition.settings.easing),Object.keys(t).length!==0&&(e.transition=t)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class Ni{constructor(e){q(this,"enabled");q(this,"selectedPiece");q(this,"defaultState",{enabled:!0,selectedPiece:void 0});q(this,"setConfigSettings",e=>{e!==void 0&&(this.enabled=e)});q(this,"getConfig",()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class Ri{constructor(e){q(this,"enabled");q(this,"whiteToMove");q(this,"moves");q(this,"settings");q(this,"preMoves");q(this,"lastMove");q(this,"checkSquare");q(this,"defaultState",{enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!1,allowEnPassant:!1,allowCastling:!1},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0});q(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?(this.enabled=!0,this.settings.allowCastling=!0,this.settings.allowEnPassant=!0,this.settings.allowPromotion=!0):e===!1?this.enabled=!1:(e.enabled!==void 0&&(this.enabled=e.enabled),e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))});q(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled});this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class Di{constructor(e){q(this,"enabled");q(this,"settings");q(this,"defaultState",{enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}});q(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))});q(this,"getConfig",()=>{const e={},t=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(t.forEach(n=>{this.settings[n]!==this.defaultState.settings[n]&&(e[n]=this.settings[n])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class zi{constructor(e){q(this,"enabled");q(this,"tools");q(this,"settings");q(this,"defaultState",{enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}});q(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.knightLShape!==void 0&&(this.settings.knightLShape=e.knightLShape),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))});q(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(e.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class Ui{constructor(e){q(this,"enabled");q(this,"settings");q(this,"defaultState",{enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}});q(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))});q(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class Bi{constructor(e){q(this,"getLegalMoves");q(this,"getPreMoves");q(this,"beforeMove");q(this,"afterMove");q(this,"getLastMove");q(this,"getInCheck");q(this,"getWhiteToMove");q(this,"defaultState",{getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0});q(this,"setConfigSettings",e=>{e!==void 0&&(e.getLegalMoves&&(this.getLegalMoves=e.getLegalMoves),e.getPreMoves&&(this.getPreMoves=e.getPreMoves),e.beforeMove&&(this.beforeMove=e.beforeMove),e.afterMove&&(this.afterMove=e.afterMove),e.getLastMove&&(this.getLastMove=e.getLastMove),e.getInCheck&&(this.getInCheck=e.getInCheck),e.getWhiteToMove&&(this.getWhiteToMove=e.getWhiteToMove))});q(this,"getConfig",()=>{const e={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(e).length>0?e:void 0});this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const Vi="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Vn{constructor(e){q(this,"pieces");q(this,"markedSquares");q(this,"board");q(this,"movable");q(this,"draggable");q(this,"selectable");q(this,"legal");q(this,"callbacks");q(this,"highlight");q(this,"drawTools");q(this,"sounds");q(this,"getConfig",()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}));this.pieces=[],this.markedSquares=new Set,this.board=new Ii(e==null?void 0:e.board),this.movable=new Oi(e==null?void 0:e.movable),this.draggable=new Fi(e==null?void 0:e.draggable),this.selectable=new Ni(e==null?void 0:e.selectable),this.legal=new Ri(e==null?void 0:e.legal),this.callbacks=new Bi(e==null?void 0:e.callbacks),this.highlight=new Di(e==null?void 0:e.highlight),this.drawTools=new zi(e==null?void 0:e.drawTools),this.sounds=new Ui(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){this.legalEnabled&&(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){this.preMovesEnabled&&(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.legal.preMoves.curMove}set currentPreMove(e){this.legal.preMoves.curMove=e}get selectableEnabled(){return this.selectable.enabled}get draggableEnabled(){return this.draggable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){this.legalEnabled&&(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4&&e!==""||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const Hi=["a","b","c","d","e","f","g","h"],ji=["8","7","6","5","4","3","2","1"];function xt(s){return{x:Hi.indexOf(s[0]),y:ji.indexOf(s[1])}}function Cs(s){return s.charCodeAt(0)-97}function Ki(s){return 8-parseInt(s,10)}const Wi=s=>{let e="",t=0;for(let n=0;n<s.length;n++){n!==0&&(e+="/");for(let a=0;a<s[n].length;a++){const i=s[n][a];i!=null&&t===0?i[0]==="w"?e+=i[1]:e+=i[1].toLowerCase():i!=null&&t!==0?(e+=t.toString(),t=0,i[0]==="w"?e+=i[1]:e+=i[1].toLowerCase()):t++}t!==0&&(e+=t.toString(),t=0)}return e},Gi="8/8/8/8/8/8/8/8 w - - 0 1",Mt=class Mt{constructor(e){q(this,"letters",{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7});q(this,"state");q(this,"changeLegalHoverIfNeeded",e=>{e.color!=="LEGAL"&&e.color!=="PREMOVE"||this.state.pieces.forEach(t=>{t.square===e.square&&(e.color=e.color==="LEGAL"?"LEGALHOVER":"PREMOVEHOVER")})});q(this,"highlightSquare",(e,t)=>{const n={square:e,color:t};this.state.markedSquares.forEach(a=>{a.square===e&&a.color!=="MOVE"&&a.color!=="CHECK"&&this.state.markedSquares.delete(a)}),this.changeLegalHoverIfNeeded(n),this.state.markedSquares.add(n)});q(this,"legalHover",(e,t="LEGAL")=>{e!==void 0&&this.state.markedSquares.forEach(n=>{if(n.square===e&&n.color===t)n.color=t==="LEGAL"?"LEGALHOVER":"PREMOVEHOVER";else if(n.square!==e&&n.color===(t==="LEGAL"?"LEGALHOVER":"PREMOVEHOVER")){let a=!1;this.state.pieces.forEach(i=>{i.square===n.square&&(a=!0)}),a||(n.color=t)}})});q(this,"toggleSquareHighlight",(e,t)=>{const n={square:e,color:t};let a=!1;return this.state.markedSquares.forEach(i=>{i.square===e&&(this.state.markedSquares.delete(i),i.color===t&&(a=!0))}),this.changeLegalHoverIfNeeded(n),a?!0:(this.state.markedSquares.add(n),!1)});q(this,"getSelectedSquare",()=>{let e="";return this.state.markedSquares.forEach(t=>{t.color==="SELECT"&&(e=t.square)}),e});q(this,"clearSquare",(e,t)=>{e.length===2&&this.state.markedSquares.forEach(n=>{n.square===e&&(n.color===t||t===void 0)&&this.state.markedSquares.delete(n)})});q(this,"clearAllSquares",e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(t=>{t.color===e&&this.state.markedSquares.delete(t)})});q(this,"setPiece",(e,t)=>{if(!Mt.isValidThing({square:e,piece:t}))return;const n=this.state.pieces.find(a=>a.square===e);n?n.name=t:this.state.pieces.push({square:e,name:t})});q(this,"removePiece",e=>{Mt.isValidThing({square:e})&&this.state.pieces.forEach((t,n)=>{t.square===e&&this.state.pieces.splice(n,1)})});q(this,"clearAllPieces",()=>{this.state.pieces.length=0});q(this,"getGridCoordsFromSquare",e=>{if(!Mt.isValidThing({square:e}))return{x:0,y:0};const t=e[0],n=e[1],a=this.state.board.flipped?Math.abs(this.letters[t]-7):this.letters[t],i=this.state.board.flipped?Math.abs(parseInt(n,10)-8):parseInt(n,10)-1;return typeof a!="number"||i<0||i>7?{x:0,y:0}:{x:a,y:i}});q(this,"makeMove",e=>{if(!Mt.isValidThing({move:e}))return;let t=!1,n;const a=e.substring(0,2),i=e.substring(2,4),l=e.substring(4);this.state.pieces.forEach(r=>{r.square===i&&(n=r,this.removePiece(r.square))}),this.state.pieces.forEach(r=>{r.square===a&&(r.square=i,t=!0,l&&(r.name=r.name[0]+l.toUpperCase()))}),t?this.state.legal.lastMove=e:n&&this.state.pieces.push(n)});q(this,"getSquareFromIndices",(e,t)=>`${Object.keys(this.letters)[e]}${(t+1).toString()}`);q(this,"updatePiecesWithFen",e=>{const t=[...Array(8)].map(()=>Array(8).fill(null)),n=["1","2","3","4","5","6","7","8"];let a=0,i=0;for(let o=0;o<(e.includes(" ")?e.indexOf(" "):e.length);o++)if(e[o]==="/")a++,i=0;else if(!n.includes(e[o]))e[o]===e[o].toUpperCase()?t[a][i]=`w${e[o]}`:t[a][i]=`b${e[o].toUpperCase()}`,i++;else for(let u=0;u<parseInt(e[o],10);u++)t[a][i]=null,i++;const l=[],r=[];for(let o=0;o<t.length;++o)for(let u=0;u<t.length;++u){const c=t[o][u],d=this.getPieceFromSquare(this.getSquareFromIndices(u,Math.abs(o-7)));c&&!d&&l.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),!c&&d&&r.push(d),c&&d&&c!==d.name&&(l.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),r.push(d))}for(let o=0;o<r.length;o++)for(let u=0;u<l.length;u++)!l[u]||!r[o]||l[u].name===r[o].name&&(r[o].square=l[u].square,r.splice(o,1),o--,l.splice(u,1),u--);l.forEach(o=>{this.state.pieces.push(o)}),r.forEach(o=>{this.state.pieces.splice(this.state.pieces.indexOf(o),1)})});q(this,"setGhostPiece",e=>{this.state.draggable.ghostPiece.piece=e});q(this,"removeGhostPiece",()=>{this.state.draggable.ghostPiece.piece=void 0});q(this,"isCastling",e=>{const t=e.slice(0,2),n=this.getPieceFromSquare(t);return!n||n.name[1]!=="K"?!1:e==="e1g1"||e==="e1c1"||e==="e8g8"||e==="e8c8"});q(this,"getRookMoveIfIsCastling",e=>{if(!this.isCastling(e))return null;switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return null}});q(this,"isEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const t=this.getPieceFromSquare(e.substring(0,2));return!(t===void 0||t.name!=="wP"&&t.name!=="bP")});q(this,"getCapturedPawnSquareIfIsEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const t=this.getPieceFromSquare(e.substring(0,2));if(t===void 0||t.name!=="wP"&&t.name!=="bP")return;const n=`${e[2]}${(parseInt(e[3],10)+(t.name==="wP"?-1:1)).toString()}`;if(this.state.legal.lastMove.substring(2,4)!==n)return;const a=this.getPieceFromSquare(n);if(!(!a||a.name[1]!=="P")&&Math.abs(parseInt(this.state.legal.lastMove[1],10)-parseInt(this.state.legal.lastMove[3],10))===2)return n});q(this,"isCapture",e=>!!this.getPieceFromSquare(e.substring(2,4)));q(this,"isPromotion",e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const t=this.getPieceFromSquare(e.substring(0,2));return!(t&&(t.name[1]!=="P"||t.name[0]==="w"&&e[3]==="1"||t.name[0]==="b"&&e[3]==="8"))});q(this,"callbackExists",e=>this.state.callbacks[e]!==void 0);q(this,"flipBoard",e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped});q(this,"setConfigSettings",e=>{this.state.setConfigSettings(e)});this.state=new Vn(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const e=this.state.pieces.find(t=>t.name==="wK");if(e)return e.square}getBlackKingSquare(){const e=this.state.pieces.find(t=>t.name==="bK");if(e)return e.square}getShortFEN(){if(this.state.pieces.length===0)return Gi;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(t=>{e[Ki(t.square[1])][Cs(t.square[0])]=t.name}),Wi(e)}getPieceFromSquare(e){if(e)return this.state.pieces.find(t=>t.square===e)}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get draggableEnabled(){return this.state.draggableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}};q(Mt,"isValidThing",e=>{const{square:t,piece:n,move:a}=e;return!(t&&t.length!==2||n&&n.length!==2||a&&a.length!==4&&a.length!==5)});let ys=Mt;const Xi={LEGAL:"legal cursor-pointer",LEGALHOVER:"legal-h cursor-pointer",SELECT:"select",MOVE:"move",NEXTMOVE:"nextMove",PREMOVE:"preMove cursor-pointer",PREMOVEHOVER:"preMove-h cursor-pointer",CHECK:"check"},Qi={white:"#f0d9b5",black:"#b58863"},Yi="standard.svg",xi={LEGAL:"legal cursor-pointer",LEGALHOVER:"legal-h cursor-pointer",SELECT:"select-db",MOVE:"move-db",NEXTMOVE:"nextMove",PREMOVE:"preMove cursor-pointer",PREMOVEHOVER:"preMove-h cursor-pointer",CHECK:"check"},Zi={white:"#94A3B8",black:"#475569"},Ji="darkBlue.svg",Xe={squareStyles:{standard:Xi,darkBlue:xi},colors:{standard:Qi,darkBlue:Zi},imageName:{standard:Yi,darkBlue:Ji}};function Ks(s,e,t){const n=s.slice();return n[6]=e[t],n[8]=t,n}function Ws(s,e,t){const n=s.slice();return n[6]=e[t],n[8]=t,n}function Gs(s){let e,t=s[4][s[1]?Math.abs(s[8]-7):s[8]]+"",n,a;return{c(){e=R("span"),n=et(t),a=W(),this.h()},l(i){e=D(i,"SPAN",{"data-file":!0,style:!0,class:!0});var l=B(e);n=tt(l,t),a=G(l),l.forEach(S),this.h()},h(){p(e,"data-file",s[6]),Be(e,"--font-size",s[3]+"px"),Be(e,"color",s[8]%2===0?Xe.colors[s[0]].white:Xe.colors[s[0]].black),p(e,"class","svelte-2dna4v")},m(i,l){V(i,e,l),L(e,n),L(e,a)},p(i,l){l&2&&t!==(t=i[4][i[1]?Math.abs(i[8]-7):i[8]]+"")&&is(n,t),l&8&&Be(e,"--font-size",i[3]+"px"),l&1&&Be(e,"color",i[8]%2===0?Xe.colors[i[0]].white:Xe.colors[i[0]].black)},d(i){i&&S(e)}}}function Xs(s){let e,t=(s[1]?s[8]+1:Math.abs(s[8]-8))+"",n,a,i;return{c(){e=R("span"),n=et(t),a=W(),this.h()},l(l){e=D(l,"SPAN",{"data-file":!0,style:!0,class:!0});var r=B(e);n=tt(r,t),a=G(r),r.forEach(S),this.h()},h(){p(e,"data-file",s[6]),p(e,"style",i="--font-size: "+s[3]+"px; color: "+(s[8]%2===0?Xe.colors[s[0]].white:Xe.colors[s[0]].black)+";"+(s[1]?" text-align: right;":"")),p(e,"class","svelte-2dna4v")},m(l,r){V(l,e,r),L(e,n),L(e,a)},p(l,r){r&2&&t!==(t=(l[1]?l[8]+1:Math.abs(l[8]-8))+"")&&is(n,t),r&11&&i!==(i="--font-size: "+l[3]+"px; color: "+(l[8]%2===0?Xe.colors[l[0]].white:Xe.colors[l[0]].black)+";"+(l[1]?" text-align: right;":""))&&p(e,"style",i)},d(l){l&&S(e)}}}function $i(s){let e,t,n,a,i=qe(s[4]),l=[];for(let u=0;u<i.length;u+=1)l[u]=Gs(Ws(s,i,u));let r=qe(s[4]),o=[];for(let u=0;u<r.length;u+=1)o[u]=Xs(Ks(s,r,u));return{c(){e=R("div");for(let u=0;u<l.length;u+=1)l[u].c();t=W(),n=R("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=D(u,"DIV",{class:!0});var c=B(e);for(let f=0;f<l.length;f+=1)l[f].l(c);c.forEach(S),t=G(u),n=D(u,"DIV",{class:!0});var d=B(n);for(let f=0;f<o.length;f+=1)o[f].l(d);d.forEach(S),this.h()},h(){p(e,"class","files svelte-2dna4v"),p(n,"class","ranks svelte-2dna4v"),yt(()=>s[5].call(n))},m(u,c){V(u,e,c);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);V(u,t,c),V(u,n,c);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(n,null);a=ti(n,s[5].bind(n))},p(u,[c]){if(c&27){i=qe(u[4]);let d;for(d=0;d<i.length;d+=1){const f=Ws(u,i,d);l[d]?l[d].p(f,c):(l[d]=Gs(f),l[d].c(),l[d].m(e,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=i.length}if(c&27){r=qe(u[4]);let d;for(d=0;d<r.length;d+=1){const f=Ks(u,r,d);o[d]?o[d].p(f,c):(o[d]=Xs(f),o[d].c(),o[d].m(n,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=r.length}},i:be,o:be,d(u){u&&(S(e),S(t),S(n)),vt(l,u),vt(o,u),a()}}}function ea(s,e,t){let n,{theme:a}=e,{flipped:i}=e;const l=["a","b","c","d","e","f","g","h"];let r;function o(){r=this.clientHeight,t(2,r)}return s.$$set=u=>{"theme"in u&&t(0,a=u.theme),"flipped"in u&&t(1,i=u.flipped)},s.$$.update=()=>{s.$$.dirty&4&&t(3,n=Math.floor(Math.log(r/8)*3))},[a,i,r,n,l,o]}class ta extends ye{constructor(e){super(),Pe(this,e,ea,$i,Ce,{theme:0,flipped:1})}}function Qs(s){return Object.prototype.toString.call(s)==="[object Date]"}function sa(s){const e=2.5949095;return(s*=2)<1?.5*(s*s*((e+1)*s-e)):.5*((s-=2)*s*((e+1)*s+e)+2)}function na(s){return s*s*((1.70158+1)*s-1.70158)}function ia(s){return--s*s*((1.70158+1)*s+1.70158)+1}function ts(s){const e=.36363636363636365,t=8/11,n=9/10,a=4356/361,i=35442/1805,l=16061/1805,r=s*s;return s<e?7.5625*r:s<t?9.075*r-9.9*s+3.4:s<n?a*r-i*s+l:10.8*s*s-20.52*s+10.72}function aa(s){return s<.5?.5*(1-ts(1-s*2)):.5*ts(s*2-1)+.5}function ra(s){return 1-ts(1-s)}function la(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)}function oa(s){return 1-Math.sqrt(1-s*s)}function ua(s){return Math.sqrt(1- --s*s)}function ca(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function fa(s){return s*s*s}function Os(s){const e=s-1;return e*e*e+1}function da(s){return s<.5?.5*Math.sin(13*Math.PI/2*2*s)*Math.pow(2,10*(2*s-1)):.5*Math.sin(-13*Math.PI/2*(2*s-1+1))*Math.pow(2,-10*(2*s-1))+1}function ha(s){return Math.sin(13*s*Math.PI/2)*Math.pow(2,10*(s-1))}function ga(s){return Math.sin(-13*(s+1)*Math.PI/2)*Math.pow(2,-10*s)+1}function ba(s){return s===0||s===1?s:s<.5?.5*Math.pow(2,20*s-10):-.5*Math.pow(2,10-s*20)+1}function pa(s){return s===0?s:Math.pow(2,10*(s-1))}function ma(s){return s===1?s:1-Math.pow(2,-10*s)}function va(s){return s/=.5,s<1?.5*s*s:(s--,-.5*(s*(s-2)-1))}function _a(s){return s*s}function Ea(s){return-s*(s-2)}function wa(s){return s<.5?8*Math.pow(s,4):-8*Math.pow(s-1,4)+1}function ka(s){return Math.pow(s,4)}function Ma(s){return Math.pow(s-1,3)*(1-s)+1}function Sa(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)}function Ca(s){return s*s*s*s*s}function ya(s){return--s*s*s*s*s+1}function Pa(s){return-.5*(Math.cos(Math.PI*s)-1)}function Aa(s){const e=Math.cos(s*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function Ta(s){return Math.sin(s*Math.PI/2)}const ss=Object.freeze(Object.defineProperty({__proto__:null,backIn:na,backInOut:sa,backOut:ia,bounceIn:ra,bounceInOut:aa,bounceOut:ts,circIn:oa,circInOut:la,circOut:ua,cubicIn:fa,cubicInOut:ca,cubicOut:Os,elasticIn:ha,elasticInOut:da,elasticOut:ga,expoIn:pa,expoInOut:ba,expoOut:ma,linear:On,quadIn:_a,quadInOut:va,quadOut:Ea,quartIn:ka,quartInOut:wa,quartOut:Ma,quintIn:Ca,quintInOut:Sa,quintOut:ya,sineIn:Aa,sineInOut:Pa,sineOut:Ta},Symbol.toStringTag,{value:"Module"}));function Ps(s,e){if(s===e||s!==s)return()=>s;const t=typeof s;if(t!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const n=e.map((a,i)=>Ps(s[i],a));return a=>n.map(i=>i(a))}if(t==="object"){if(!s||!e)throw new Error("Object cannot be null");if(Qs(s)&&Qs(e)){s=s.getTime(),e=e.getTime();const i=e-s;return l=>new Date(s+l*i)}const n=Object.keys(e),a={};return n.forEach(i=>{a[i]=Ps(s[i],e[i])}),i=>{const l={};return n.forEach(r=>{l[r]=a[r](i)}),l}}if(t==="number"){const n=e-s;return a=>s+a*n}throw new Error(`Cannot interpolate ${t} values`)}function La(s,e={}){const t=ui(s);let n,a=s;function i(l,r){if(s==null)return t.set(s=l),Promise.resolve();a=l;let o=n,u=!1,{delay:c=0,duration:d=400,easing:f=On,interpolate:E=Ps}=Zt(Zt({},e),r);if(d===0)return o&&(o.abort(),o=null),t.set(s=a),Promise.resolve();const b=ai()+c;let _;return n=ri(v=>{if(v<b)return!0;u||(_=E(s,l),typeof d=="function"&&(d=d(s,l)),u=!0),o&&(o.abort(),o=null);const k=v-b;return k>d?(t.set(s=l),!1):(t.set(s=_(f(k/d))),!0)}),n.promise}return{set:i,update:(l,r)=>i(l(a,s),r),subscribe:t.subscribe}}function Ms(s,e,t,n){if(e===0&&t===0)return s;const a=n?["h","g","f","e","d","c","b","a"]:["a","b","c","d","e","f","g","h"],i=n?["1","2","3","4","5","6","7","8"]:["8","7","6","5","4","3","2","1"],l=a[a.indexOf(s[0])+e],r=i[i.indexOf(s[1])+t];if(!(!l||!r))return`${l}${r}`}function qa(s,e,t){const n=e*1.15,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",`${s.offsetWidth*n}`),a.setAttribute("height",`${s.offsetHeight*n}`),a.style.position="absolute",a.style.zIndex="100",a.style.translate=`${t?"":"-"}${25*n/2}% -${25*n/2}%`,a.style.opacity="0.2",a.style.pointerEvents="none",i.setAttribute("r",`${s.offsetWidth*n/2}`),i.setAttribute("cx",`${s.offsetWidth*n/2}`),i.setAttribute("cy",`${s.offsetHeight*n/2}`),i.setAttribute("fill","black"),a.appendChild(i),a}function Ia(s,e){let t,n,a,i,l,r,o,u,c=!1,d;const f=s.parentNode;let E,b=!1,_=!1,v=!1,{startSquare:k,boardFlipped:h,mouseEvents:g,canDrag:w,canSelect:C,canCapture:y,duration:P,easingFunc:N}=e;const{coords:T}=e;let I=Ns(T).x,z=Ns(T).y;const K=1.6,re=qa(s,K,h);function le(M){var ne;if(M.button!==0||!M.isPrimary||!g)return;if(M.pointerType==="touch"?v=!0:v=!1,y){s.dispatchEvent(new CustomEvent("captured"));return}if((C||w)&&s.dispatchEvent(new CustomEvent("clicked")),!w){s.dispatchEvent(new CustomEvent("dropped",{detail:k}));return}I=(h?7-Cs(k[0]):Cs(k[0]))*f.clientWidth/8,z=(h?parseInt(k[1],10)-1:8-parseInt(k[1],10))*f.clientWidth/8,E=k;const A=M.target.getBoundingClientRect();t=M.clientX,n=M.clientY,M.pointerType==="touch"?(a=M.clientX-A.x,i=M.clientY-A.y):(a=M.offsetX,i=M.offsetY);const j=(ne=s.parentElement)==null?void 0:ne.getBoundingClientRect();j&&(l=M.clientX-a-j.x-I,r=M.clientY-i-j.y-z,o=window.scrollX,u=window.scrollY,_=!0,window.addEventListener("pointermove",Ie),window.addEventListener("pointerup",U),window.addEventListener("pointercancel",Q),document.body.addEventListener("pointerleave",Q),window.addEventListener("scroll",ge))}function Ie(M){const A=M.clientX-t,j=M.clientY-n;if(t=M.clientX,n=M.clientY,l+=A,r+=j,c||ee(v),!!c){if(v){const ne=Math.floor((l+a)/s.offsetWidth),_e=Math.floor((r+i)/s.offsetHeight),Oe=Ms(k,ne,_e,h);if(Oe){const Ae=xt(Oe);re.setAttribute("r",`${s.offsetWidth*K*1.15/2}`),re.setAttribute("cx",`${s.offsetWidth*K*1.15/2}`),re.setAttribute("cy",`${s.offsetHeight*K*1.15/2}`);const Fe=(h?(7-Ae.x)*f.clientWidth/8:Ae.x*f.clientWidth/8)-s.offsetWidth*K*1.15/2+s.offsetWidth/2,Me=(h?(7-Ae.y)*f.clientWidth/8:Ae.y*f.clientWidth/8)-s.offsetWidth*K*1.15/2+s.offsetWidth/2;re.style.translate=`${Fe}px ${Me}px`,b||(f.appendChild(re),b=!0)}else E&&(E=void 0)}T.update(ne=>({x:ne.x+A,y:ne.y+j,scale:v?K:1}),{duration:0}),E=se()}}function ge(){const M=window.scrollX-o,A=window.scrollY-u;o=window.scrollX,u=window.scrollY,l+=M,r+=A,c||ee(v),c&&(T.update(j=>({x:j.x+M,y:j.y+A,scale:v?K:1}),{duration:0}),E=se())}function se(){const M=Ms(k,Math.floor((l+a)/s.offsetWidth),Math.floor((r+i)/s.offsetHeight),h);return M!==E&&s.dispatchEvent(new CustomEvent("squareover",{detail:{square:M}})),M}function U(){const M=Math.floor((l+a)/s.offsetWidth),A=Math.floor((r+i)/s.offsetHeight),j=Ms(k,M,A,h);s.dispatchEvent(new CustomEvent("dropped",{detail:j})),_=!1,Q()}function Q(){window.removeEventListener("pointermove",Ie),window.removeEventListener("pointerup",U),window.removeEventListener("pointercancel",Q),document.body.removeEventListener("pointerleave",Q),window.removeEventListener("scroll",ge),_&&s.dispatchEvent(new CustomEvent("canceled")),_=!1,T.update(()=>({x:I,y:z,scale:1}),{duration:P,easing:N}).then(()=>{_||s.classList.remove("dragging")}),t=0,n=0,l=0,r=0,c=!1,re.remove(),b=!1}function ee(M=!1){var A;if(T.update(()=>({x:I,y:z,scale:1}),{duration:0}),Math.abs(l)>1||Math.abs(r)>1){const j=(A=s.parentElement)==null?void 0:A.getBoundingClientRect();if(!j)return;T.update(()=>({x:t-s.offsetWidth/2-j.x,y:M?n-s.offsetHeight*1.5-j.y:n-s.offsetHeight/2-j.y,scale:M?K:1}),{duration:0}),c=!0,s.classList.add("dragging"),s.dispatchEvent(new CustomEvent("startMoving"))}}function ve(M){_&&Q(),M.preventDefault()}function oe(M){M.preventDefault()}return s.addEventListener("contextmenu",ve),s.addEventListener("dragstart",oe),s.addEventListener("pointerdown",le),{destroy(){s.removeEventListener("pointerdown",le),s.removeEventListener("contextmenu",ve),s.removeEventListener("dragstart",oe),window.clearTimeout(d)},update(M){k=M.startSquare,P=M.duration,N=M.easingFunc,M.canDrag!==w&&(w=M.canDrag),M.canSelect!==C&&(C=M.canSelect),M.canCapture!==y&&(y=M.canCapture),M.mouseEvents!==g&&(g=M.mouseEvents),h=M.boardFlipped}}}function Oa(s){let e,t,n,a,i,l;return{c(){e=R("div"),this.h()},l(r){e=D(r,"DIV",{style:!0,class:!0}),B(e).forEach(S),this.h()},h(){var r;p(e,"style",t="translate: "+s[12].x+"px "+s[12].y+"px;"+(s[12].scale!==1?` scale: ${s[12].scale}`:"")),p(e,"class",n=s[2]+(s[2][0]==="w"?" white":" black")+(s[4]?" ghost":"")+(!((r=s[6])!=null&&r.enabled)&&!s[4]?" static":"")+(s[11]?"":" opacity-0")+(s[10]?" capture":"")+" svelte-1chvf31")},m(r,o){var u,c;V(r,e,o),s[24](e),i||(l=[Jt(a=Ia.call(null,e,{startSquare:s[1],mouseEvents:s[0],canDrag:s[8],canSelect:s[9],canCapture:s[10],boardFlipped:s[3],duration:(u=s[5])!=null&&u.transition.enabled?s[5].transition.settings.duration:0,easingFunc:ss[((c=s[5])==null?void 0:c.transition.settings.easing)??"cubicInOut"],coords:s[14]})),$(e,"dropped",s[15]),$(e,"clicked",s[20]),$(e,"startMoving",s[21]),$(e,"captured",s[22]),$(e,"canceled",s[23]),$(e,"squareover",s[25])],i=!0)},p(r,o){var u,c,d;o[0]&4096&&t!==(t="translate: "+r[12].x+"px "+r[12].y+"px;"+(r[12].scale!==1?` scale: ${r[12].scale}`:""))&&p(e,"style",t),o[0]&3156&&n!==(n=r[2]+(r[2][0]==="w"?" white":" black")+(r[4]?" ghost":"")+(!((u=r[6])!=null&&u.enabled)&&!r[4]?" static":"")+(r[11]?"":" opacity-0")+(r[10]?" capture":"")+" svelte-1chvf31")&&p(e,"class",n),a&&qs(a.update)&&o[0]&1835&&a.update.call(null,{startSquare:r[1],mouseEvents:r[0],canDrag:r[8],canSelect:r[9],canCapture:r[10],boardFlipped:r[3],duration:(c=r[5])!=null&&c.transition.enabled?r[5].transition.settings.duration:0,easingFunc:ss[((d=r[5])==null?void 0:d.transition.settings.easing)??"cubicInOut"],coords:r[14]})},i:be,o:be,d(r){r&&S(e),s[24](null),i=!1,st(l)}}}function Fa(s,e,t){var M;let n,{square:a}=e,{name:i}=e,{mouseEvents:l=!0}=e,{getGridCoordsFromSquare:r}=e,{flipped:o}=e,{isGhost:u=!1}=e,{boardSize:c}=e;u&&(l=!1);let{selectableState:d=void 0}=e,{draggableState:f=void 0}=e,{legalState:E=void 0}=e,{movableState:b=void 0}=e,_,v=!1,k=!1,h=!1,g=!1;const w=jt();let C=(M=f==null?void 0:f.transition)!=null&&M.enabled?f.transition.settings.duration:0;const y=La({x:0,y:0,scale:1},{duration:C,easing:ss[(f==null?void 0:f.transition.settings.easing)??"cubicInOut"]});si(s,y,A=>t(12,n=A));let P=!1;const N=A=>A[0]==="w"?"WHITE":"BLACK",T=(A,j)=>{_==null||_.classList.remove("dragging");const ne=r(A);y.update(()=>({x:ne.x*c/8,y:(7-ne.y)*c/8,scale:1}),{duration:(j===void 0||j)&&P?C:0,easing:ss[(f==null?void 0:f.transition.settings.easing)??"cubicInOut"]}),C=f!=null&&f.transition.enabled?f.transition.settings.duration:0},I=A=>{const j=r(a);y.update(()=>({x:j.x*A/8,y:(7-j.y)*A/8,scale:1}),{duration:0})},z=A=>{C=0,A.detail||w("deselect"),a===A.detail?(!v&&le(b,d)?w("select"):w("deselect"),v=!v):v=!1,re(b,f)&&w("endDragging",a+A.detail),a!==A.detail&&A.detail&&w("move",a+A.detail)},K=A=>E!=null&&E.enabled?!!(E.preMoves.enabled&&N(i)===A.color||A.color==="WHITE"&&E.whiteToMove&&N(i)==="WHITE"||A.color==="BLACK"&&!E.whiteToMove&&N(i)==="BLACK"||A.color==="BOTH"&&(N(i)==="WHITE"&&E.whiteToMove||N(i)==="BLACK"&&!E.whiteToMove)):A.color===N(i)||A.color==="BOTH",re=(A,j)=>!(A!=null&&A.enabled)||!(j!=null&&j.enabled)||!l?!1:K(A),le=(A,j)=>!(A!=null&&A.enabled)||!(j!=null&&j.enabled)||!l?!1:K(A),Ie=(A,j,ne)=>{var _e,Oe;return!(j!=null&&j.enabled)||!(ne!=null&&ne.enabled)||!l?!1:A!=null&&A.enabled?!!((d==null?void 0:d.selectedPiece)!==void 0&&((_e=d==null?void 0:d.selectedPiece)==null?void 0:_e.square)!==a&&(A.moves.includes(d.selectedPiece.square+a)||A.moves.includes(`${d.selectedPiece.square+a}q`))||(d==null?void 0:d.selectedPiece)!==void 0&&A.preMoves.enabled&&N(d==null?void 0:d.selectedPiece.name)===j.color&&(A.preMoves.moves.includes(d.selectedPiece.square+a)||A.preMoves.moves.includes(`${d.selectedPiece.square+a}q`))):(d==null?void 0:d.selectedPiece)!==void 0&&((Oe=d==null?void 0:d.selectedPiece)==null?void 0:Oe.square)!==a},ge=A=>A===void 0||A.name!==i||A.square!==a;as(()=>{t(11,P=!0)});function se(A){Qe.call(this,s,A)}function U(A){Qe.call(this,s,A)}function Q(A){Qe.call(this,s,A)}function ee(A){Qe.call(this,s,A)}function ve(A){Z[A?"unshift":"push"](()=>{_=A,t(7,_)})}const oe=A=>{w("squareover",A.detail)};return s.$$set=A=>{"square"in A&&t(1,a=A.square),"name"in A&&t(2,i=A.name),"mouseEvents"in A&&t(0,l=A.mouseEvents),"getGridCoordsFromSquare"in A&&t(16,r=A.getGridCoordsFromSquare),"flipped"in A&&t(3,o=A.flipped),"isGhost"in A&&t(4,u=A.isGhost),"boardSize"in A&&t(17,c=A.boardSize),"selectableState"in A&&t(18,d=A.selectableState),"draggableState"in A&&t(5,f=A.draggableState),"legalState"in A&&t(19,E=A.legalState),"movableState"in A&&t(6,b=A.movableState)},s.$$.update=()=>{s.$$.dirty[0]&96&&t(8,k=re(b,f)),s.$$.dirty[0]&262208&&t(9,h=le(b,d)),s.$$.dirty[0]&786496&&t(10,g=Ie(E,b,d)),s.$$.dirty[0]&262144&&ge(d==null?void 0:d.selectedPiece)&&(v=!1),s.$$.dirty[0]&10&&T(a,!1),s.$$.dirty[0]&131072&&I(c)},[l,a,i,o,u,f,b,_,k,h,g,P,n,w,y,z,r,c,d,E,se,U,Q,ee,ve,oe]}class Hn extends ye{constructor(e){super(),Pe(this,e,Fa,Oa,Ce,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:16,flipped:3,isGhost:4,boardSize:17,selectableState:18,draggableState:5,legalState:19,movableState:6},null,[-1,-1])}}function Na(s){let e,t,n;return{c(){e=R("div"),this.h()},l(a){e=D(a,"DIV",{style:!0,class:!0}),B(e).forEach(S),this.h()},h(){p(e,"style",t="translate: "+s[5]*s[3]/8+"px "+(7-s[6])*s[3]/8+"px;"+(s[4]?` border-${s[4]}-radius: inherit;`:"")),p(e,"class",n=Xe.squareStyles[s[1]][s[0]]+(s[2]?"":" pointer-events-none")+" svelte-183l4qv")},m(a,i){V(a,e,i)},p(a,[i]){i&120&&t!==(t="translate: "+a[5]*a[3]/8+"px "+(7-a[6])*a[3]/8+"px;"+(a[4]?` border-${a[4]}-radius: inherit;`:""))&&p(e,"style",t),i&7&&n!==(n=Xe.squareStyles[a[1]][a[0]]+(a[2]?"":" pointer-events-none")+" svelte-183l4qv")&&p(e,"class",n)},i:be,o:be,d(a){a&&S(e)}}}function Ra(s,e,t){let{square:n}=e,{color:a}=e,{getGridCoordsFromSquare:i}=e,{flipped:l}=e,{theme:r}=e,{mouseEvents:o=!0}=e,{boardSize:u}=e,{corner:c=""}=e,d,f;const E=()=>{const b=i(n);t(5,d=b.x),t(6,f=b.y)};return s.$$set=b=>{"square"in b&&t(7,n=b.square),"color"in b&&t(0,a=b.color),"getGridCoordsFromSquare"in b&&t(8,i=b.getGridCoordsFromSquare),"flipped"in b&&t(9,l=b.flipped),"theme"in b&&t(1,r=b.theme),"mouseEvents"in b&&t(2,o=b.mouseEvents),"boardSize"in b&&t(3,u=b.boardSize),"corner"in b&&t(4,c=b.corner)},s.$$.update=()=>{s.$$.dirty&512&&E()},[a,r,o,u,c,d,f,n,i,l]}class Da extends ye{constructor(e){super(),Pe(this,e,Ra,Na,Ce,{square:7,color:0,getGridCoordsFromSquare:8,flipped:9,theme:1,mouseEvents:2,boardSize:3,corner:4})}}const za=["a","b","c","d","e","f","g","h"],Ua=["8","7","6","5","4","3","2","1"];function Ba(s){s.querySelectorAll("[fixed]").forEach(e=>e.remove())}function As(s){return`${za[s.x]}${Ua[s.y]}`}function jn(s,e){return Math.abs((s.x-e.x)*(s.y-e.y))===2}function Ts(s,e){return`${As(s)}${As(e)}`}function Va(s,e){return!!(jn(s,e)||Math.abs(s.x-e.x)===Math.abs(s.y-e.y)||s.x===e.x!=(s.y===e.y))}function Kn(s,e,t,n,a,i){let l={x:-1,y:-1},r,o;jn(e,t)&&n?(Math.abs(t.x-e.x)===2?l={x:t.x,y:e.y}:l={x:e.x,y:t.y},l.y-e.y<0?o=Math.PI+Math.atan((l.x-e.x)/(l.y-e.y)):o=Math.atan((l.x-e.x)/Math.abs(l.y-e.y)),r={x:t.x-Math.sign(t.x-l.x)*(l.x!==t.x?.4:0),y:t.y-Math.sign(t.y-l.y)*(l.y!==t.y?.4:0)}):(t.y-e.y<0?o=Math.PI+Math.atan((t.x-e.x)/(t.y-e.y)):o=Math.atan((t.x-e.x)/Math.abs(t.y-e.y)),r={x:t.x-Math.sin(o)*.4,y:t.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};s.setAttribute("points",`${u.x+.5},${u.y+.5} ${l.x!==-1&&l.y!==-1&&n?`${l.x+.5},${l.y+.5} `:""}${r.x+.5},${r.y+.5}`),s.setAttribute("data-sqID",`${Ts(e,t)}`),i!==void 0&&s.setAttribute("opacity",`${i}`),a!==void 0&&(s.setAttribute("marker-start",`url(#start-${a[0]})`),s.setAttribute("marker-end",`url(#end-${a[0]})`),s.setAttribute("stroke",a))}function Qt(s,e,t,n,a,i){if(!(e===void 0||t.x===-1&&t.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),n?e.setAttribute("stroke","red"):a?e.setAttribute("stroke","orange"):i?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),s.querySelectorAll(`сircle[cx="${t.x+.5}"][cy="${t.y+.5}"]`).forEach(l=>{e!==void 0&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const l=n?"red":a?"orange":i?"blue":"green";e.setAttribute("stroke",`${l}`),e.setAttribute("marker-start",`url(#start-${l[0]})`),e.setAttribute("marker-end",`url(#end-${l[0]})`),s.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(r=>{e instanceof SVGPolylineElement&&r!==e&&(r.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function Wn(s,e,t,n,a){const i=document.createElementNS("http://www.w3.org/2000/svg","polyline");return Kn(i,s,e,t,n,a),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.25"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("opacity",a!==void 0?`${a}`:"0.4"),i.setAttribute("marker-start",n?`url(#start-${n[0]})`:"url(#start-g)"),i.setAttribute("marker-end",n?`url(#end-${n[0]})`:"url(#end-g)"),i.setAttribute("stroke",n||"green"),i}function Ls(s,e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",`${s.x+.5}`),n.setAttribute("cy",`${s.y+.5}`),n.setAttribute("r","0.465"),n.setAttribute("opacity",t?`${t}`:"0.4"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","0.07"),n.setAttribute("stroke",e??"green"),n}function Ha(s,e,t){e.forEach(n=>{if(n.type==="circle"){const a=xt(n.square),i=Ls(a,n.color,n.opacity);s.appendChild(i)}else if(n.type==="arrow"){const a=Wn(xt(n.from),xt(n.to),t,n.color,n.opacity);a.setAttribute("fixed",""),s.appendChild(a)}})}function Ys(s){s.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("fixed")||e.remove()})}function ja(s,e){let{svg:t,flipped:n,enabled:a,settings:i}=e,l=!1,r={x:-1,y:-1},o,u;function c(v,k){const h=s.getBoundingClientRect(),g=n?h.width-(v-h.left):v-h.left,w=n?h.height-(k-h.top):k-h.top;return{x:Math.max(0,Math.min(7,Math.floor(g/(s.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(w/(s.clientHeight/8))))}}function d(v){if(u===void 0||r.x===-1&&r.y===-1)return;const k=c(v.clientX,v.clientY);i.onlyChessMove&&!Va(r,k)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),r.x===k.x&&r.y===k.y?(Ts(r,k),u instanceof SVGPolylineElement&&(u.remove(),u=Ls(k)),Qt(t,u,r,v.shiftKey,v.ctrlKey,v.altKey),t.appendChild(u),t.querySelectorAll(`circle[cx="${r.x+.5}"][cy="${r.y+.5}"]`).forEach(h=>{h!==u&&(o=h,u!==void 0&&h.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,t.querySelectorAll(`polyline[data-sqID="${Ts(r,k)}"]`).forEach(h=>{u===void 0||r.x===-1&&r.y===-1||h===u||(o=h,h.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=Wn(r,k,i.knightLShape),Qt(t,u,r,v.shiftKey,v.ctrlKey,v.altKey),t.appendChild(u)):u instanceof SVGPolylineElement&&Kn(u,r,k,i.knightLShape)))}function f(v){v.preventDefault()}function E(v){v.preventDefault(),Qt(t,u,r,v.shiftKey,v.ctrlKey,v.altKey)}function b(v){if(v.button===0)l=!1;else if(v.button===2){if(r.x===-1&&r.y===-1)return;t.querySelectorAll("[remove]").forEach(k=>{k.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:As(r),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,r={x:-1,y:-1},l=!1,window.removeEventListener("mousemove",d),window.removeEventListener("keydown",E),window.removeEventListener("keyup",E),window.removeEventListener("contextmenu",f)}window.removeEventListener("mouseup",b)}function _(v){if(v.button===0)l=!0,Ys(t),window.addEventListener("mouseup",b);else if(v.button===2&&!l){const k=c(v.clientX,v.clientY);r=k,u=Ls(k),Qt(t,u,r,v.shiftKey,v.ctrlKey,v.altKey),o=void 0,t.querySelectorAll(`circle[cx="${k.x+.5}"][cy="${k.y+.5}"]`).forEach(h=>{o=h,u!==void 0&&h.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&t.appendChild(u),window.addEventListener("mousemove",d),window.addEventListener("mouseup",b),window.addEventListener("keydown",E),window.addEventListener("keyup",E),window.addEventListener("contextmenu",f)}}return a&&s.addEventListener("mousedown",_),{update(v){v.svg!==t&&(t=v.svg),v.enabled!==a&&(a=v.enabled,a?s.addEventListener("mousedown",_):(Ys(t),s.removeEventListener("mousedown",_))),i=v.settings,n=v.flipped}}}function xs(s,e,t){const n=s.slice();return n[8]=e[t],n}function Zs(s){let e,t,n,a;return{c(){e=Re("marker"),t=Re("path"),n=Re("marker"),a=Re("path"),this.h()},l(i){e=De(i,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var l=B(e);t=De(l,"path",{fill:!0,d:!0}),B(t).forEach(S),l.forEach(S),n=De(i,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var r=B(n);a=De(r,"path",{fill:!0,d:!0}),B(a).forEach(S),r.forEach(S),this.h()},h(){p(t,"fill",s[8]),p(t,"d","M 0 5 v 10 c 0 2.8 2.2 5 5 5 L 6 20 V 0 L 5 0 C 2.2 0 0 2.2 0 5 z"),p(e,"id","start-"+s[8][0]),p(e,"viewBox","0 0 5 20"),p(e,"refX","4"),p(e,"refY","10"),p(e,"markerUnits","strokeWidth"),p(e,"markerWidth","0.5"),p(e,"markerHeight","1"),p(e,"orient","auto"),p(a,"fill",s[8]),p(a,"d","M 9.5 9.5 l -8.7 -5 C 0.5 4.3 0 4.6 0 5 v 10 c 0 0.4 0.5 0.7 0.9 0.5 l 8.7 -5 C 9.9 10.3 9.9 9.7 9.5 9.5 z"),p(n,"id","end-"+s[8][0]),p(n,"viewBox","0 0 10 20"),p(n,"refX","0.2"),p(n,"refY","10"),p(n,"markerUnits","strokeWidth"),p(n,"orient","auto"),p(n,"fill","currentColor")},m(i,l){V(i,e,l),L(e,t),V(i,n,l),L(n,a)},p:be,d(i){i&&(S(e),S(n))}}}function Ka(s){let e,t,n,a=qe(s[2]),i=[];for(let l=0;l<a.length;l+=1)i[l]=Zs(xs(s,a,l));return{c(){e=Re("svg"),t=Re("defs");for(let l=0;l<i.length;l+=1)i[l].c();n=Re("g"),this.h()},l(l){e=De(l,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var r=B(e);t=De(r,"defs",{});var o=B(t);for(let u=0;u<i.length;u+=1)i[u].l(o);o.forEach(S),n=De(r,"g",{}),B(n).forEach(S),r.forEach(S),this.h()},h(){p(e,"xmlns","http://www.w3.org/2000/svg"),Be(e,"transform","rotate("+(s[1]?"180deg":"0deg")+")"),p(e,"viewBox","0 0 8 8"),p(e,"class","svelte-d96ma4")},m(l,r){V(l,e,r),L(e,t);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(t,null);L(e,n),s[5](n)},p(l,[r]){if(r&4){a=qe(l[2]);let o;for(o=0;o<a.length;o+=1){const u=xs(l,a,o);i[o]?i[o].p(u,r):(i[o]=Zs(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=a.length}r&2&&Be(e,"transform","rotate("+(l[1]?"180deg":"0deg")+")")},i:be,o:be,d(l){l&&S(e),vt(i,l),s[5](null)}}}function Wa(s,e,t){let{flipped:n=!1}=e,{svg:a}=e,{knightLShape:i=!1}=e,{tools:l=[]}=e,r=!1;function o(d){r&&(Ba(a),Ha(a,d,i))}as(()=>{r=!0,o(l)});const u=["green","red","blue","orange"];function c(d){Z[d?"unshift":"push"](()=>{a=d,t(0,a)})}return s.$$set=d=>{"flipped"in d&&t(1,n=d.flipped),"svg"in d&&t(0,a=d.svg),"knightLShape"in d&&t(3,i=d.knightLShape),"tools"in d&&t(4,l=d.tools)},s.$$.update=()=>{s.$$.dirty&16&&o(l)},[a,n,u,i,l,c]}class Ga extends ye{constructor(e){super(),Pe(this,e,Wa,Ka,Ce,{flipped:1,svg:0,knightLShape:3,tools:4})}}function Js(s,{delay:e=0,duration:t=400,easing:n=Os,x:a=0,y:i=0,opacity:l=0}={}){const r=getComputedStyle(s),o=+r.opacity,u=r.transform==="none"?"":r.transform,c=o*(1-l),[d,f]=Rs(a),[E,b]=Rs(i);return{delay:e,duration:t,easing:n,css:(_,v)=>`
			transform: ${u} translate(${(1-_)*d}${f}, ${(1-_)*E}${b});
			opacity: ${o-c*v}`}}function ns(s,{delay:e=0,duration:t=400,easing:n=Os,axis:a="y"}={}){const i=getComputedStyle(s),l=+i.opacity,r=a==="y"?"height":"width",o=parseFloat(i[r]),u=a==="y"?["top","bottom"]:["left","right"],c=u.map(k=>`${k[0].toUpperCase()}${k.slice(1)}`),d=parseFloat(i[`padding${c[0]}`]),f=parseFloat(i[`padding${c[1]}`]),E=parseFloat(i[`margin${c[0]}`]),b=parseFloat(i[`margin${c[1]}`]),_=parseFloat(i[`border${c[0]}Width`]),v=parseFloat(i[`border${c[1]}Width`]);return{delay:e,duration:t,easing:n,css:k=>`overflow: hidden;opacity: ${Math.min(k*20,1)*l};${r}: ${k*o}px;padding-${u[0]}: ${k*d}px;padding-${u[1]}: ${k*f}px;margin-${u[0]}: ${k*E}px;margin-${u[1]}: ${k*b}px;border-${u[0]}-width: ${k*_}px;border-${u[1]}-width: ${k*v}px;`}}function Xa(s){let e,t,n,a;return{c(){e=R("button"),t=R("div"),this.h()},l(i){e=D(i,"BUTTON",{class:!0});var l=B(e);t=D(l,"DIV",{class:!0}),B(t).forEach(S),l.forEach(S),this.h()},h(){p(t,"class","piece "+s[0]+" svelte-rp9lvv"),p(e,"class","svelte-rp9lvv")},m(i,l){V(i,e,l),L(e,t),n||(a=$(e,"click",s[1]),n=!0)},p:be,i:be,o:be,d(i){i&&S(e),n=!1,a()}}}function Qa(s,e,t){let{piece:n}=e,{isWhite:a}=e,{showModal:i}=e;const l=jt(),r=(a?"w":"b")+n.toUpperCase(),o=()=>{l("newPromotion",n),t(2,i=!1)};return s.$$set=u=>{"piece"in u&&t(3,n=u.piece),"isWhite"in u&&t(4,a=u.isWhite),"showModal"in u&&t(2,i=u.showModal)},[r,o,i,n,a]}class Ya extends ye{constructor(e){super(),Pe(this,e,Qa,Xa,Ce,{piece:3,isWhite:4,showModal:2})}}function $s(s,e,t){const n=s.slice();return n[7]=e[t],n}function en(s){let e,t,n,a,i,l,r=qe(["q","r","b","n"]),o=[];for(let c=0;c<4;c+=1)o[c]=tn($s(s,r,c));const u=c=>X(o[c],1,1,()=>{o[c]=null});return{c(){e=R("div"),t=R("div");for(let c=0;c<4;c+=1)o[c].c();this.h()},l(c){e=D(c,"DIV",{class:!0});var d=B(e);t=D(d,"DIV",{class:!0});var f=B(t);for(let E=0;E<4;E+=1)o[E].l(f);f.forEach(S),d.forEach(S),this.h()},h(){p(t,"class","modal-content svelte-1ms2fdt"),p(e,"class",i="modal "+s[0]+" svelte-1ms2fdt")},m(c,d){V(c,e,d),L(e,t);for(let f=0;f<4;f+=1)o[f]&&o[f].m(t,null);l=!0},p(c,d){if(d&6){r=qe(["q","r","b","n"]);let f;for(f=0;f<4;f+=1){const E=$s(c,r,f);o[f]?(o[f].p(E,d),H(o[f],1)):(o[f]=tn(E),o[f].c(),H(o[f],1),o[f].m(t,null))}for(ze(),f=4;f<4;f+=1)u(f);Ue()}(!l||d&1&&i!==(i="modal "+c[0]+" svelte-1ms2fdt"))&&p(e,"class",i)},i(c){if(!l){for(let d=0;d<4;d+=1)H(o[d]);c&&yt(()=>{l&&(a&&a.end(1),n=li(t,Js,{x:100,duration:300}),n.start())}),l=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<4;d+=1)X(o[d]);n&&n.invalidate(),c&&(a=oi(t,Js,{x:-200,duration:100})),l=!1},d(c){c&&S(e),vt(o,c),c&&a&&a.end()}}}function tn(s){let e,t,n,a;function i(o){s[4](o)}function l(o){s[5](o)}let r={piece:s[7]};return s[2]!==void 0&&(r.isWhite=s[2]),s[1]!==void 0&&(r.showModal=s[1]),e=new Ya({props:r}),Z.push(()=>ae(e,"isWhite",i)),Z.push(()=>ae(e,"showModal",l)),e.$on("newPromotion",s[6]),{c(){ce(e.$$.fragment)},l(o){fe(e.$$.fragment,o)},m(o,u){de(e,o,u),a=!0},p(o,u){const c={};!t&&u&4&&(t=!0,c.isWhite=o[2],ie(()=>t=!1)),!n&&u&2&&(n=!0,c.showModal=o[1],ie(()=>n=!1)),e.$set(c)},i(o){a||(H(e.$$.fragment,o),a=!0)},o(o){X(e.$$.fragment,o),a=!1},d(o){he(e,o)}}}function xa(s){let e,t,n=s[1]&&en(s);return{c(){n&&n.c(),e=ke()},l(a){n&&n.l(a),e=ke()},m(a,i){n&&n.m(a,i),V(a,e,i),t=!0},p(a,[i]){a[1]?n?(n.p(a,i),i&2&&H(n,1)):(n=en(a),n.c(),H(n,1),n.m(e.parentNode,e)):n&&(ze(),X(n,1,1,()=>{n=null}),Ue())},i(a){t||(H(n),t=!0)},o(a){X(n),t=!1},d(a){a&&S(e),n&&n.d(a)}}}function Za(s,e,t){let n=!1,a,{className:i=""}=e;function l(c){t(1,n=!0),c?t(2,a=!0):t(2,a=!1)}function r(c){a=c,t(2,a)}function o(c){n=c,t(1,n)}function u(c){Qe.call(this,s,c)}return s.$$set=c=>{"className"in c&&t(0,i=c.className)},[i,n,a,l,r,o,u]}class Ja extends ye{constructor(e){super(),Pe(this,e,Za,xa,Ce,{className:0,openPromotionModal:3})}get openPromotionModal(){return this.$$.ctx[3]}}const $a=""+new URL("../assets/move.e4d827fe.wav",import.meta.url).href,er=""+new URL("../assets/capture.3dff493a.wav",import.meta.url).href,tr=""+new URL("../assets/castle.dcf4b2c5.wav",import.meta.url).href,sr=""+new URL("../assets/undo.b4184324.mp3",import.meta.url).href;function sn(s){let e,t=`<track kind="captions"/><source src="${$a}"/>`;return{c(){e=R("audio"),e.innerHTML=t,this.h()},l(n){e=D(n,"AUDIO",{preload:!0,"data-svelte-h":!0}),Se(e)!=="svelte-965mdm"&&(e.innerHTML=t),this.h()},h(){p(e,"preload","auto")},m(n,a){V(n,e,a),s[3](e)},p:be,d(n){n&&S(e),s[3](null)}}}function nn(s){let e,t=`<track kind="captions"/><source src="${er}"/>`;return{c(){e=R("audio"),e.innerHTML=t,this.h()},l(n){e=D(n,"AUDIO",{preload:!0,"data-svelte-h":!0}),Se(e)!=="svelte-yx772y"&&(e.innerHTML=t),this.h()},h(){p(e,"preload","auto")},m(n,a){V(n,e,a),s[4](e)},p:be,d(n){n&&S(e),s[4](null)}}}function an(s){let e,t=`<track kind="captions"/><source src="${tr}"/>`;return{c(){e=R("audio"),e.innerHTML=t,this.h()},l(n){e=D(n,"AUDIO",{preload:!0,"data-svelte-h":!0}),Se(e)!=="svelte-1g92guo"&&(e.innerHTML=t),this.h()},h(){p(e,"preload","auto")},m(n,a){V(n,e,a),s[5](e)},p:be,d(n){n&&S(e),s[5](null)}}}function rn(s){let e,t=`<track kind="captions"/><source src="${sr}"/>`;return{c(){e=R("audio"),e.innerHTML=t,this.h()},l(n){e=D(n,"AUDIO",{preload:!0,"data-svelte-h":!0}),Se(e)!=="svelte-e2b5hc"&&(e.innerHTML=t),this.h()},h(){p(e,"preload","auto")},m(n,a){V(n,e,a),s[6](e)},p:be,d(n){n&&S(e),s[6](null)}}}function nr(s){let e,t,n,a,i=s[0].MOVE&&sn(s),l=s[0].CAPTURE&&nn(s),r=s[0].CASTLE&&an(s),o=s[0].UNDO&&rn(s);return{c(){i&&i.c(),e=W(),l&&l.c(),t=W(),r&&r.c(),n=W(),o&&o.c(),a=ke()},l(u){i&&i.l(u),e=G(u),l&&l.l(u),t=G(u),r&&r.l(u),n=G(u),o&&o.l(u),a=ke()},m(u,c){i&&i.m(u,c),V(u,e,c),l&&l.m(u,c),V(u,t,c),r&&r.m(u,c),V(u,n,c),o&&o.m(u,c),V(u,a,c)},p(u,[c]){u[0].MOVE?i?i.p(u,c):(i=sn(u),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),u[0].CAPTURE?l?l.p(u,c):(l=nn(u),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),u[0].CASTLE?r?r.p(u,c):(r=an(u),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),u[0].UNDO?o?o.p(u,c):(o=rn(u),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:be,o:be,d(u){u&&(S(e),S(t),S(n),S(a)),i&&i.d(u),l&&l.d(u),r&&r.d(u),o&&o.d(u)}}}function ir(s,e,t){let{settings:n}=e;const a={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},i=()=>{a.CASTLE&&(a.CASTLE.pause(),t(1,a.CASTLE.currentTime=0,a)),a.MOVE&&(a.MOVE.pause(),t(1,a.MOVE.currentTime=0,a)),a.CAPTURE&&(a.CAPTURE.pause(),t(1,a.CAPTURE.currentTime=0,a)),a.UNDO&&(a.UNDO.pause(),t(1,a.UNDO.currentTime=0,a))},l=f=>f===void 0||n[f];function r(f){switch(i(),f){case"MOVE":a.MOVE&&l("MOVE")&&a.MOVE.play();break;case"CAPTURE":a.CAPTURE&&l("CAPTURE")?a.CAPTURE.play():a.MOVE&&l("MOVE")&&a.MOVE.play();break;case"CASTLE":a.CASTLE&&l("CASTLE")?a.CASTLE.play():a.MOVE&&l("MOVE")&&a.MOVE.play();break;case"UNDO":a.UNDO&&l("UNDO")?(t(1,a.UNDO.volume=.3,a),a.UNDO.play()):a.MOVE&&l("MOVE")&&a.MOVE.play();break}}function o(f){Z[f?"unshift":"push"](()=>{a.MOVE=f,t(1,a)})}function u(f){Z[f?"unshift":"push"](()=>{a.CAPTURE=f,t(1,a)})}function c(f){Z[f?"unshift":"push"](()=>{a.CASTLE=f,t(1,a)})}function d(f){Z[f?"unshift":"push"](()=>{a.UNDO=f,t(1,a)})}return s.$$set=f=>{"settings"in f&&t(0,n=f.settings)},[n,a,r,o,u,c,d]}let ar=class extends ye{constructor(e){super(),Pe(this,e,ir,nr,Ce,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}};const ln=""+new URL("../assets/standard.97995bf9.svg",import.meta.url).href,on=""+new URL("../assets/darkBlue.02863507.svg",import.meta.url).href;function rr(s,e){let{mouseEvents:t}=e,n=e.curScale,a,i,l;function r(c){c.stopPropagation(),s.dispatchEvent(new CustomEvent("resizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,l+(c.pageX-a)/3)),Math.max(0,Math.min(100,l+(c.pageY-i)/3))))}}))}function o(c){c.stopPropagation(),s.dispatchEvent(new CustomEvent("endResizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,l+(c.pageX-a)/3)),Math.max(0,Math.min(100,l+(c.pageY-i)/3))))}})),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",o)}function u(c){t&&(c.stopPropagation(),c.button===0&&(a=c.pageX,i=c.pageY,l=n,window.addEventListener("pointermove",r),window.addEventListener("pointerup",o)))}return s.addEventListener("pointerdown",u),{update(c){n=c.curScale,t!==c.mouseEvents&&(t=c.mouseEvents)},destroy(){s.removeEventListener("mousedown",u)}}}function lr(s){let e,t,n,a,i,l,r;return{c(){e=R("div"),t=Re("svg"),n=Re("path"),this.h()},l(o){e=D(o,"DIV",{style:!0,class:!0});var u=B(e);t=De(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var c=B(t);n=De(c,"path",{d:!0}),B(n).forEach(S),c.forEach(S),u.forEach(S),this.h()},h(){p(n,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),p(t,"xmlns","http://www.w3.org/2000/svg"),p(t,"viewBox","0 0 16 16"),p(t,"fill","currentColor"),Be(e,"color",Xe.colors[s[0].state.board.boardTheme].black),p(e,"class",a=$t(s[1]?"cursor-nwse-resize":"")+" svelte-1rxhlfj")},m(o,u){V(o,e,u),L(e,t),L(t,n),l||(r=[$(e,"pointerdown",Fn(s[3])),Jt(i=rr.call(null,e,{mouseEvents:s[1],curScale:s[0].state.board.scale})),$(e,"resizing",s[4]),$(e,"endResizing",s[5])],l=!0)},p(o,[u]){u&1&&Be(e,"color",Xe.colors[o[0].state.board.boardTheme].black),u&2&&a!==(a=$t(o[1]?"cursor-nwse-resize":"")+" svelte-1rxhlfj")&&p(e,"class",a),i&&qs(i.update)&&u&3&&i.update.call(null,{mouseEvents:o[1],curScale:o[0].state.board.scale})},i:be,o:be,d(o){o&&S(e),l=!1,st(r)}}}function or(s,e,t){const n=jt();let{chessboard:a}=e,{mouseEvents:i=!0}=e;function l(u){Qe.call(this,s,u)}const r=u=>n("resizing",u.detail.scale),o=u=>n("endResizing",u.detail.scale);return s.$$set=u=>{"chessboard"in u&&t(0,a=u.chessboard),"mouseEvents"in u&&t(1,i=u.mouseEvents)},[a,i,n,l,r,o]}class ur extends ye{constructor(e){super(),Pe(this,e,or,lr,Ce,{chessboard:0,mouseEvents:1})}}const cr=s=>{if(s[0]===s[0].toLowerCase())return s;switch(s){case"LEGAL":case"LEGALHOVER":return"legal";case"CHECK":return"check";case"MOVE":return"move";case"NEXTMOVE":return"nextMove";case"PREMOVE":case"PREMOVEHOVER":return"preMove";case"SELECT":return"select";default:return"check"}},fr=s=>Math.floor(s*window.devicePixelRatio/8)*8/window.devicePixelRatio;function dr(s){const e=s.parentElement;if(typeof window.ResizeObserver>"u")throw new Error("window.ResizeObserver is missing.");const t=new ResizeObserver(n=>{const a=e.getBoundingClientRect();n.forEach(()=>{const i=fr(a.width);s.dispatchEvent(new CustomEvent("newsize",{detail:i})),s.style.setProperty("width",`${i}px`),s.style.setProperty("height",`${i}px`)})});return t.observe(e),{update(){t.unobserve(e),t.disconnect(),t.observe(e)},destroy(){t.unobserve(e),t.disconnect()}}}function un(s,e,t){const n=s.slice();return n[82]=e[t],n}function cn(s,e,t){const n=s.slice();return n[85]=e[t],n}function fn(s){let e=[],t=new Map,n,a,i=qe(s[5].state.pieces);const l=r=>r[85];for(let r=0;r<i.length;r+=1){let o=cn(s,i,r),u=l(o);t.set(u,e[r]=dn(u,o))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();n=ke()},l(r){for(let o=0;o<e.length;o+=1)e[o].l(r);n=ke()},m(r,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(r,o);V(r,n,o),a=!0},p(r,o){o[0]&452652&&(i=qe(r[5].state.pieces),ze(),e=Dn(e,o,l,1,r,i,t,n.parentNode,Rn,dn,n,cn),Ue())},i(r){if(!a){for(let o=0;o<i.length;o+=1)H(e[o]);a=!0}},o(r){for(let o=0;o<e.length;o+=1)X(e[o]);a=!1},d(r){r&&S(n);for(let o=0;o<e.length;o+=1)e[o].d(r)}}}function dn(s,e){let t,n,a;function i(){return e[58](e[85])}function l(){return e[59](e[85])}function r(...c){return e[60](e[85],...c)}function o(){return e[62](e[85])}function u(){return e[65](e[85])}return n=new Hn({props:{square:e[85].square,name:e[85].name,boardSize:e[5].state.board.size,mouseEvents:e[5].state.board.mouseEvents,legalState:e[5].state.legal,draggableState:e[5].state.draggable,selectableState:e[5].state.selectable,movableState:e[5].state.movable,getGridCoordsFromSquare:e[5].getGridCoordsFromSquare,flipped:e[5].flipped}}),n.$on("move",e[13]),n.$on("clicked",i),n.$on("startMoving",l),n.$on("squareover",r),n.$on("endDragging",e[61]),n.$on("select",o),n.$on("canceled",e[63]),n.$on("deselect",e[64]),n.$on("captured",u),{key:s,first:null,c(){t=ke(),ce(n.$$.fragment),this.h()},l(c){t=ke(),fe(n.$$.fragment,c),this.h()},h(){this.first=t},m(c,d){V(c,t,d),de(n,c,d),a=!0},p(c,d){e=c;const f={};d[0]&32&&(f.square=e[85].square),d[0]&32&&(f.name=e[85].name),d[0]&32&&(f.boardSize=e[5].state.board.size),d[0]&32&&(f.mouseEvents=e[5].state.board.mouseEvents),d[0]&32&&(f.legalState=e[5].state.legal),d[0]&32&&(f.draggableState=e[5].state.draggable),d[0]&32&&(f.selectableState=e[5].state.selectable),d[0]&32&&(f.movableState=e[5].state.movable),d[0]&32&&(f.getGridCoordsFromSquare=e[5].getGridCoordsFromSquare),d[0]&32&&(f.flipped=e[5].flipped),n.$set(f)},i(c){a||(H(n.$$.fragment,c),a=!0)},o(c){X(n.$$.fragment,c),a=!1},d(c){c&&S(t),he(n,c)}}}function hn(s){let e,t;return e=new Hn({props:{isGhost:!0,boardSize:s[5].state.board.size,square:s[5].ghostPiece.square,name:s[5].ghostPiece.name,getGridCoordsFromSquare:s[5].getGridCoordsFromSquare,flipped:s[5].flipped}}),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,a){de(e,n,a),t=!0},p(n,a){const i={};a[0]&32&&(i.boardSize=n[5].state.board.size),a[0]&32&&(i.square=n[5].ghostPiece.square),a[0]&32&&(i.name=n[5].ghostPiece.name),a[0]&32&&(i.getGridCoordsFromSquare=n[5].getGridCoordsFromSquare),a[0]&32&&(i.flipped=n[5].flipped),e.$set(i)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){X(e.$$.fragment,n),t=!1},d(n){he(e,n)}}}function gn(s){let e=[],t=new Map,n,a,i=qe([...s[5].state.markedSquares]);const l=r=>r[82];for(let r=0;r<i.length;r+=1){let o=un(s,i,r),u=l(o);t.set(u,e[r]=bn(u,o))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();n=ke()},l(r){for(let o=0;o<e.length;o+=1)e[o].l(r);n=ke()},m(r,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(r,o);V(r,n,o),a=!0},p(r,o){o[0]&524322&&(i=qe([...r[5].state.markedSquares]),ze(),e=Dn(e,o,l,1,r,i,t,n.parentNode,Rn,bn,n,un),Ue())},i(r){if(!a){for(let o=0;o<i.length;o+=1)H(e[o]);a=!0}},o(r){for(let o=0;o<e.length;o+=1)X(e[o]);a=!1},d(r){r&&S(n);for(let o=0;o<e.length;o+=1)e[o].d(r)}}}function bn(s,e){let t,n,a;return n=new Da({props:{boardSize:e[5].state.board.size,theme:e[5].state.board.boardTheme,square:e[82].square,color:e[82].color,getGridCoordsFromSquare:e[5].getGridCoordsFromSquare,flipped:e[5].flipped,mouseEvents:e[5].state.board.mouseEvents,corner:e[19](e[82].square)}}),n.$on("dragenter",e[66]),{key:s,first:null,c(){t=ke(),ce(n.$$.fragment),this.h()},l(i){t=ke(),fe(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,l){V(i,t,l),de(n,i,l),a=!0},p(i,l){e=i;const r={};l[0]&32&&(r.boardSize=e[5].state.board.size),l[0]&32&&(r.theme=e[5].state.board.boardTheme),l[0]&32&&(r.square=e[82].square),l[0]&32&&(r.color=e[82].color),l[0]&32&&(r.getGridCoordsFromSquare=e[5].getGridCoordsFromSquare),l[0]&32&&(r.flipped=e[5].flipped),l[0]&32&&(r.mouseEvents=e[5].state.board.mouseEvents),l[0]&32&&(r.corner=e[19](e[82].square)),n.$set(r)},i(i){a||(H(n.$$.fragment,i),a=!0)},o(i){X(n.$$.fragment,i),a=!1},d(i){i&&S(t),he(n,i)}}}function pn(s){let e,t;return e=new ta({props:{theme:s[5].state.board.boardTheme,flipped:s[5].flipped}}),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,a){de(e,n,a),t=!0},p(n,a){const i={};a[0]&32&&(i.theme=n[5].state.board.boardTheme),a[0]&32&&(i.flipped=n[5].flipped),e.$set(i)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){X(e.$$.fragment,n),t=!1},d(n){he(e,n)}}}function mn(s){let e,t;return e=new ur({props:{chessboard:s[5],mouseEvents:s[5].state.board.mouseEvents}}),e.$on("resizing",s[67]),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,a){de(e,n,a),t=!0},p(n,a){const i={};a[0]&32&&(i.chessboard=n[5]),a[0]&32&&(i.mouseEvents=n[5].state.board.mouseEvents),e.$set(i)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){X(e.$$.fragment,n),t=!1},d(n){he(e,n)}}}function vn(s){let e,t,n;function a(l){s[68](l)}let i={flipped:s[5].flipped,tools:s[5].state.drawTools.tools,knightLShape:s[5].state.drawTools.settings.knightLShape};return s[7]!==void 0&&(i.svg=s[7]),e=new Ga({props:i}),Z.push(()=>ae(e,"svg",a)),{c(){ce(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,r){de(e,l,r),n=!0},p(l,r){const o={};r[0]&32&&(o.flipped=l[5].flipped),r[0]&32&&(o.tools=l[5].state.drawTools.tools),r[0]&32&&(o.knightLShape=l[5].state.drawTools.settings.knightLShape),!t&&r[0]&128&&(t=!0,o.svg=l[7],ie(()=>t=!1)),e.$set(o)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){X(e.$$.fragment,l),n=!1},d(l){he(e,l)}}}function _n(s){let e,t,n={};return e=new Ja({props:n}),s[69](e),e.$on("newPromotion",s[16]),{c(){ce(e.$$.fragment)},l(a){fe(e.$$.fragment,a)},m(a,i){de(e,a,i),t=!0},p(a,i){const l={};e.$set(l)},i(a){t||(H(e.$$.fragment,a),t=!0)},o(a){X(e.$$.fragment,a),t=!1},d(a){s[69](null),he(e,a)}}}function En(s){let e,t,n={settings:s[5].state.sounds.settings};return e=new ar({props:n}),s[74](e),{c(){ce(e.$$.fragment)},l(a){fe(e.$$.fragment,a)},m(a,i){de(e,a,i),t=!0},p(a,i){const l={};i[0]&32&&(l.settings=a[5].state.sounds.settings),e.$set(l)},i(a){t||(H(e.$$.fragment,a),t=!0)},o(a){X(e.$$.fragment,a),t=!1},d(a){s[74](null),he(e,a)}}}function hr(s){let e,t,n,a,i,l,r,o,u,c,d,f,E,b,_,v,k,h=s[5].state.board.startFen&&fn(s),g=s[5].ghostPiece&&hn(s),w=s[5].highlightEnabled&&gn(s),C=s[5].state.board.notation&&s[10]&&pn(s),y=s[5].state.board.resizible&&s[10]&&mn(s),P=s[5].state.drawTools.enabled&&vn(s),N=s[5].legalEnabled&&_n(s),T=s[5].soundsEnabled&&En(s);return{c(){e=R("div"),t=R("div"),n=R("div"),h&&h.c(),i=W(),g&&g.c(),l=W(),w&&w.c(),r=W(),C&&C.c(),o=W(),y&&y.c(),u=W(),P&&P.c(),c=W(),N&&N.c(),E=W(),T&&T.c(),b=ke(),this.h()},l(I){e=D(I,"DIV",{class:!0});var z=B(e);t=D(z,"DIV",{role:!0,tabindex:!0,class:!0,style:!0});var K=B(t);n=D(K,"DIV",{style:!0,class:!0});var re=B(n);h&&h.l(re),re.forEach(S),i=G(K),g&&g.l(K),l=G(K),w&&w.l(K),r=G(K),C&&C.l(K),o=G(K),y&&y.l(K),u=G(K),P&&P.l(K),c=G(K),N&&N.l(K),K.forEach(S),z.forEach(S),E=G(I),T&&T.l(I),b=ke(),this.h()},h(){Be(n,"width","100%"),Be(n,"height","100%"),p(n,"class",a=$t(s[20](s[5].whiteToMove))+" svelte-pzwh5"),p(t,"role","button"),p(t,"tabindex","0"),p(t,"class",d="board text-sm "+s[0]+(!s[5].legalEnabled&&s[5].selectedPiece?" pointer":"")+" svelte-pzwh5"),Be(t,"--boardTheme","url("+(s[5].state.board.boardTheme==="standard"?ln:on)+")"),p(e,"class","boardWrapper svelte-pzwh5")},m(I,z){V(I,e,z),L(e,t),L(t,n),h&&h.m(n,null),L(t,i),g&&g.m(t,null),L(t,l),w&&w.m(t,null),L(t,r),C&&C.m(t,null),L(t,o),y&&y.m(t,null),L(t,u),P&&P.m(t,null),L(t,c),N&&N.m(t,null),s[72](t),V(I,E,z),T&&T.m(I,z),V(I,b,z),_=!0,v||(k=[$(t,"pointerdown",s[12],!0),$(t,"contextmenu",Ds(s[56])),$(t,"drag",Ds(s[57])),Jt(f=ja.call(null,t,{svg:s[7],flipped:s[5].flipped,enabled:s[5].state.drawTools.enabled&&s[5].state.board.mouseEvents,settings:s[5].state.drawTools.settings})),$(t,"drawCircle",s[70]),$(t,"drawArrow",s[71]),Jt(dr.call(null,e)),$(e,"newsize",s[73])],v=!0)},p(I,z){I[5].state.board.startFen?h?(h.p(I,z),z[0]&32&&H(h,1)):(h=fn(I),h.c(),H(h,1),h.m(n,null)):h&&(ze(),X(h,1,1,()=>{h=null}),Ue()),(!_||z[0]&32&&a!==(a=$t(I[20](I[5].whiteToMove))+" svelte-pzwh5"))&&p(n,"class",a),I[5].ghostPiece?g?(g.p(I,z),z[0]&32&&H(g,1)):(g=hn(I),g.c(),H(g,1),g.m(t,l)):g&&(ze(),X(g,1,1,()=>{g=null}),Ue()),I[5].highlightEnabled?w?(w.p(I,z),z[0]&32&&H(w,1)):(w=gn(I),w.c(),H(w,1),w.m(t,r)):w&&(ze(),X(w,1,1,()=>{w=null}),Ue()),I[5].state.board.notation&&I[10]?C?(C.p(I,z),z[0]&1056&&H(C,1)):(C=pn(I),C.c(),H(C,1),C.m(t,o)):C&&(ze(),X(C,1,1,()=>{C=null}),Ue()),I[5].state.board.resizible&&I[10]?y?(y.p(I,z),z[0]&1056&&H(y,1)):(y=mn(I),y.c(),H(y,1),y.m(t,u)):y&&(ze(),X(y,1,1,()=>{y=null}),Ue()),I[5].state.drawTools.enabled?P?(P.p(I,z),z[0]&32&&H(P,1)):(P=vn(I),P.c(),H(P,1),P.m(t,c)):P&&(ze(),X(P,1,1,()=>{P=null}),Ue()),I[5].legalEnabled?N?(N.p(I,z),z[0]&32&&H(N,1)):(N=_n(I),N.c(),H(N,1),N.m(t,null)):N&&(ze(),X(N,1,1,()=>{N=null}),Ue()),(!_||z[0]&33&&d!==(d="board text-sm "+I[0]+(!I[5].legalEnabled&&I[5].selectedPiece?" pointer":"")+" svelte-pzwh5"))&&p(t,"class",d),(!_||z[0]&32)&&Be(t,"--boardTheme","url("+(I[5].state.board.boardTheme==="standard"?ln:on)+")"),f&&qs(f.update)&&z[0]&160&&f.update.call(null,{svg:I[7],flipped:I[5].flipped,enabled:I[5].state.drawTools.enabled&&I[5].state.board.mouseEvents,settings:I[5].state.drawTools.settings}),I[5].soundsEnabled?T?(T.p(I,z),z[0]&32&&H(T,1)):(T=En(I),T.c(),H(T,1),T.m(b.parentNode,b)):T&&(ze(),X(T,1,1,()=>{T=null}),Ue())},i(I){_||(H(h),H(g),H(w),H(C),H(y),H(P),H(N),H(T),_=!0)},o(I){X(h),X(g),X(w),X(C),X(y),X(P),X(N),X(T),_=!1},d(I){I&&(S(e),S(E),S(b)),h&&h.d(),g&&g.d(),w&&w.d(),C&&C.d(),y&&y.d(),P&&P.d(),N&&N.d(),s[72](null),T&&T.d(I),v=!1,st(k)}}}function gr(s,e,t){let{config:n}=e,{class:a=void 0}=e;const i=new ys(n),l=jt();let r,o,u,c,d="",f=!1,E=!1;const b=m=>{i.clearAllSquares(m),m==="LEGAL"&&i.clearAllSquares("LEGALHOVER"),m==="PREMOVE"&&i.clearAllSquares("PREMOVEHOVER"),t(5,i)},_=(m,O)=>{v(O)&&(i.highlightSquare(m,O),t(5,i))},v=m=>i.highlightEnabled&&(m===void 0||i.highlightSettings[cr(m)]),k=m=>{if(!i.selectableEnabled&&i.draggableEnabled&&_e(m),!i.selectableEnabled)return;h(!0);const O=i.getPieceFromSquare(m);O!==void 0&&(t(5,i.selectedPiece=O,i),_e())},h=(m=!0)=>{b("SELECT"),b("LEGAL"),b("PREMOVE"),t(5,i.selectedPiece=void 0,i),m&&(b("NEXTMOVE"),t(5,i.currentPreMove="",i))},g=m=>{b("CHECK"),m&&i.legalEnabled&&_(m,"CHECK"),t(5,i)},w=()=>{b("CHECK")},C=m=>{i.flipBoard(m),t(5,i)},y=(m,O)=>{m.forEach(Y=>i.highlightSquare(Y,O)),t(5,i)},P=(m,O=!0,Y="MOVE")=>{m!==void 0&&(m.length<4||!v(Y)||(O&&b(Y),y([m.substring(0,2),m.substring(2,4)],Y)))},N=m=>{_(m.substring(2,4),"LEGAL")},T=(m,O,Y="LEGAL")=>{b(Y),v(Y)&&(m.forEach(ue=>{ue.length<4||(O===void 0||ue.substring(0,2)===O)&&i.highlightSquare(ue.substring(2,4),Y)}),t(5,i))},I=(m,O=!0)=>{i.makeMove(m),O&&P(m),t(5,i)},z=m=>{var O;m&&(i.removePiece(m),i.ghostPieceEnabled&&((O=i.ghostPiece)==null?void 0:O.square)===m&&(i.removeGhostPiece(),t(5,i)),t(5,i))},K=m=>i.whiteToMove&&m[0]==="w"||!i.whiteToMove&&m[0]==="b",re=(m=!1)=>{var O,Y,ue,Ee,we,pe,We,rt;i.legalEnabled&&(t(5,i.whiteToMove=((Y=(O=i.state.callbacks).getWhiteToMove)==null?void 0:Y.call(O))??i.whiteToMove,i),i.preMovesEnabled&&t(5,i.preMoves=((Ee=(ue=i.state.callbacks).getPreMoves)==null?void 0:Ee.call(ue))??[],i),i.legalEnabled&&t(5,i.legalMoves=((pe=(we=i.state.callbacks).getLegalMoves)==null?void 0:pe.call(we))??[],i),m&&_e(),(rt=(We=i.state.callbacks).getInCheck)!=null&&rt.call(We)?i.whiteToMove?g(i.getWhiteKingSquare()):g(i.getBlackKingSquare()):w(),i.state.callbacks.getLastMove?(t(5,i.lastMove=i.state.callbacks.getLastMove(),i),P(i.lastMove)):b("MOVE"))},le=m=>{var O;i.soundsEnabled&&u&&((O=u.playMoveSound)==null||O.call(u,m))},Ie=m=>{i.setGhostPiece(m),t(5,i)},ge=()=>{i.removeGhostPiece(),t(5,i)},se=m=>{var we,pe,We,rt;if(m.substring(0,2)===m.substring(2,4))return;(pe=(we=i.state.callbacks).beforeMove)==null||pe.call(we,m);const O=i.selectedPiece?{...i.selectedPiece}:void 0;h(!1);const Y=i.getRookMoveIfIsCastling(m),ue=i.getCapturedPawnSquareIfIsEnPassant(m);Y&&i.state.legal.settings.allowCastling?(I(Y,!1),le("CASTLE")):ue&&i.state.legal.settings.allowEnPassant?(z(ue),le("CAPTURE")):i.isCapture(m)?le("CAPTURE"):le("MOVE"),ge(),I(m),(rt=(We=i.state.callbacks).afterMove)==null||rt.call(We,m),re(!1);const Ee=i.getPieceFromSquare(O==null?void 0:O.square);if(Ee&&O&&Ee.square===O.square&&Ee.name===(O==null?void 0:O.name)?t(5,i.selectedPiece=Ee,i):t(5,i.selectedPiece=void 0,i),i.selectedPiece!==void 0&&_e(),i.legalEnabled&&i.preMovesEnabled&&i.currentPreMove!==""){if(i.legalMoves.includes(i.currentPreMove)){const vs=i.currentPreMove;ni().then(()=>{se(vs)})}t(5,i.currentPreMove="",i),b("NEXTMOVE")}},U=m=>{!i.legalEnabled||!i.preMovesEnabled||!i.movableEnabled||(h(!1),P(m,!0,"NEXTMOVE"),t(5,i.currentPreMove=m,i),l("nextMove",{move:m}))},Q=m=>{var ue;const O=i.getPieceFromSquare(m.substring(0,2));if(!O)return;const Y=O.name[0]==="w"?"WHITE":"BLACK";(ue=c.openPromotionModal)==null||ue.call(c,Y==="WHITE"),d=m,f=i.isCapture(m),i.makeMove(m),b("LEGAL"),b("SELECT"),P(m)},ee=(m,O)=>{i.clearSquare(m,O),t(5,i)},ve=()=>{i.clearAllPieces(),t(5,i)},oe=(m,O)=>{i.setPiece(m,O),t(5,i)},M=(m,O)=>{var ue;const Y=(ue=i.getPieceFromSquare(m))==null?void 0:ue.name;Y&&(O!==void 0?i.setPiece(m,`${O==="WHITE"?"w":"b"}${Y[1]}`):i.setPiece(m,`${Y[0]==="w"?"b":"w"}${Y[1]}`),t(5,i))},A=(m,O)=>{const Y=Math.floor(m/i.state.board.size*8),ue=Math.floor(O/i.state.board.size*8),Ee=i.flipped?7-Y:Y,we=i.flipped?ue:7-ue;if(Ee<0||Ee>7||we<0||we>7)return;const pe=Object.keys(i.letters)[Ee],We=(we+1).toString();return`${pe}${We}`},j=m=>{if(!i.state.board.mouseEvents)return;if(m.button===2){h();return}if(!i.movableEnabled)return;const O=r.getBoundingClientRect(),Y=m.clientX-O.left,ue=m.clientY-O.top,Ee=A(Y,ue);if(!Ee)return;const we=i.getPieceFromSquare(Ee);if(l("squareClick",{square:Ee,piece:we?we.name:void 0}),!i.selectableEnabled&&!i.draggableEnabled){h();return}if(!i.selectedPiece||i.selectedPiece.square===Ee)return;const pe=i.selectedPiece.square+Ee;if(!i.legalEnabled){se(pe),h();return}if(!K(i.selectedPiece.name)){i.preMovesEnabled&&i.preMoves.includes(pe)&&(i.isPromotion(pe)?U(`${pe}q`):U(pe)),h(!1);return}(we===void 0||we.name[0]!==i.selectedPiece.name[0])&&K(i.selectedPiece.name)&&(i.isPromotion(pe)&&i.legalMoves.includes(pe)?Q(pe):i.legalMoves.includes(pe)&&se(pe),h())},ne=m=>{const O=m.detail;i.legalEnabled?i.isPromotion(O)&&i.legalMoves.includes(`${O}q`)?Q(O):i.legalMoves.includes(O)?se(O):i.preMovesEnabled&&i.preMoves.includes(O)?i.isPromotion(O)?U(`${O}q`):U(O):h():se(O),b("LEGAL"),b("PREMOVE"),t(5,i)},_e=m=>{var O;if(i.selectableEnabled||i.draggableEnabled){const Y=i.getPieceFromSquare(m??((O=i.selectedPiece)==null?void 0:O.square));if(!Y||(i.selectableEnabled&&_(Y.square,"SELECT"),!i.legalEnabled))return;b("LEGAL"),b("PREMOVE"),K(Y.name)&&T(i.legalMoves,Y.square),K(Y.name)||T(i.preMoves,Y.square,"PREMOVE")}},Oe=(m,O=!0,Y="MOVE")=>{if(i.updatePiecesWithFen(m),O&&h(),b(),ge(),re(!1),t(5,i.currentPreMove="",i),i.state.callbacks.getLastMove){const ue=i.state.callbacks.getLastMove();t(5,i.lastMove=ue,i),Y!==!1&&(Y!=="MOVE"?le(Y):i.isCastling(ue)?le("CASTLE"):le(Y)),P(ue)}else Y!==!1&&le(Y);_e(),t(5,i)},Ae=()=>i.getShortFEN(),Fe=m=>{!m||i.state.board.size===m||(t(5,i.state.board.size=m,i),E&&i.state.board.resizible&&document.body.style.setProperty("--boardSize",`${i.state.board.size}px`))},Me=m=>{!m||i.state.board.scale===m||(t(5,i.state.board.scale=m,i),E&&i.state.board.resizible&&document.body.style.setProperty("--boardScale",`${i.state.board.scale}`))},nt=m=>{var O;return(O=i.getPieceFromSquare(m))==null?void 0:O.name},Ke=m=>{t(5,i.state.drawTools.tools=m,i)},Ye=m=>{t(5,i.state.drawTools.tools=i.state.drawTools.tools.filter(O=>m?(!m.type||O.type!==m.type)&&(!m.from||O.type==="arrow"&&O.from!==m.from||O.type==="circle"&&O.square!==m.from)&&(!m.to||O.type==="arrow"&&O.to!==m.to)&&(m.fixed===void 0||O.fixed!==m.fixed):!1),i)},xe=m=>{m===!1?t(5,i.state.movable.enabled=!1,i):(t(5,i.state.movable.enabled=!0,i),t(5,i.state.movable.color=m===!0?"BOTH":m,i))},Ve=m=>{m.length<4||(t(5,i.lastMove=m,i),P(m))},it=m=>{t(5,i.legalMoves=m,i)},Ot=m=>{t(5,i.preMoves=m,i)},Pt=()=>i.state,At=m=>{t(5,i.state=m,i),b(),re(!1),P(i.lastMove),P(i.currentPreMove,!0,"NEXTMOVE"),_e()},at=m=>{m!==void 0&&(i.setConfigSettings(m),t(5,i),At(i.state))},Kt=m=>m.getConfig(),Tt=(m,O)=>{i.legalEnabled&&(K(O.name)&&i.legalHover(m.detail.square),!K(O.name)&&i.preMovesEnabled&&i.legalHover(m.detail.square,"PREMOVE")),t(5,i)},Ze=m=>{i.ghostPieceEnabled&&Ie(m),b("SELECT")},Ft=m=>{var Ee,we,pe,We;const O=i.getPieceFromSquare(d.substring(2,4));if(!O)return;const Y=O.name[0]+m.detail.toUpperCase(),ue=d+m.detail;(we=(Ee=i.state.callbacks).beforeMove)==null||we.call(Ee,ue),i.setPiece(O.square,Y),t(5,i),le(f?"CAPTURE":"MOVE"),(We=(pe=i.state.callbacks).afterMove)==null||We.call(pe,ue),re()},Et=m=>{if(!i.selectedPiece)return;const O=i.selectedPiece.square+m;i.legalEnabled?i.isPromotion(O)&&i.legalMoves.includes(`${O}q`)?Q(O):i.legalMoves.includes(O)?se(O):i.preMovesEnabled&&i.preMoves.includes(O)?i.isPromotion(O)?U(`${O}q`):U(O):h():se(O),h(!1)},Lt=m=>{const O=i.getPieceFromSquare(m.square);O&&O.square===m.square&&O.name===m.name&&_(m.square,"SELECT")},Je=m=>m==="a1"?i.flipped?"top-right":"bottom-left":m==="a8"?i.flipped?"bottom-right":"top-left":m==="h1"?i.flipped?"top-left":"bottom-right":m==="h8"?i.flipped?"bottom-left":"top-right":"",Nt=m=>!i.movableEnabled||!i.state.board.mouseEvents||!i.draggableEnabled&&!i.selectableEnabled?"":i.legalEnabled?i.state.movable.color==="BOTH"?m?"w":"b":i.state.movable.color==="WHITE"&&(m||!m&&i.preMovesEnabled)?"w":i.state.movable.color==="BLACK"&&(!m||m&&i.preMovesEnabled)?"b":"":"wb";as(()=>{var m,O;return t(10,E=!0),re(!0),P((O=(m=i.state.callbacks).getLastMove)==null?void 0:O.call(m)),i.state.board.resizible&&document.body.style.setProperty("--boardScale",`${i.state.board.scale}`),()=>{i.state.board.resizible&&document.body.style.removeProperty("--boardScale")}});function $e(m){Qe.call(this,s,m)}function ut(m){Qe.call(this,s,m)}const Rt=m=>{l("piececlick",{piece:m}),k(m.square)},Wt=m=>{l("startDragging",{piece:m}),Ze(m)},rs=(m,O)=>Tt(O,m);function ls(m){Qe.call(this,s,m)}const os=m=>Lt(m),us=()=>h(),cs=()=>h(),ct=m=>Et(m.square),fs=m=>{_(m.detail.square,"LEGALHOVER")},ds=m=>{Me(m.detail)};function Dt(m){o=m,t(7,o)}function hs(m){Z[m?"unshift":"push"](()=>{c=m,t(9,c)})}const gs=m=>l("drawCircle",{square:m.detail.square,color:m.detail.color}),bs=m=>l("drawArrow",{move:m.detail.move,color:m.detail.color});function ps(m){Z[m?"unshift":"push"](()=>{r=m,t(6,r)})}const ms=m=>{t(5,i.state.board.size=m.detail,i)};function ft(m){Z[m?"unshift":"push"](()=>{u=m,t(8,u)})}return s.$$set=m=>{"config"in m&&t(21,n=m.config),"class"in m&&t(0,a=m.class)},[a,_,k,h,Me,i,r,o,u,c,E,l,j,ne,Tt,Ze,Ft,Et,Lt,Je,Nt,n,b,g,w,C,y,P,N,T,I,z,re,le,se,U,Q,ee,ve,oe,M,A,Oe,Ae,Fe,nt,Ke,Ye,xe,Ve,it,Ot,Pt,At,at,Kt,$e,ut,Rt,Wt,rs,ls,os,us,cs,ct,fs,ds,Dt,hs,gs,bs,ps,ms,ft]}class br extends ye{constructor(e){super(),Pe(this,e,gr,hr,Ce,{config:21,class:0,clearAllSquares:22,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:23,removeCheckSquare:24,flipBoard:25,highlightManySquares:26,highlightMove:27,highlightLegalMove:28,highlightLegalMoves:29,movePiece:30,removePiece:31,updateLegalState:32,playMoveSound:33,makeMove:34,makeNextMove:35,makeMovePromotion:36,removeSquareHighlight:37,removeAllPiece:38,createPiece:39,changeColorOfPiece:40,getSquareFromCoords:41,setFEN:42,getShortFEN:43,setSize:44,setScale:4,getPieceNameFromSquare:45,setTools:46,removeTools:47,setMovableColor:48,setLastMove:49,setLegalMoves:50,setPreMoves:51,getState:52,setState:53,setConfigSettings:54,getConfigFromState:55},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[22]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[23]}get removeCheckSquare(){return this.$$.ctx[24]}get flipBoard(){return this.$$.ctx[25]}get highlightManySquares(){return this.$$.ctx[26]}get highlightMove(){return this.$$.ctx[27]}get highlightLegalMove(){return this.$$.ctx[28]}get highlightLegalMoves(){return this.$$.ctx[29]}get movePiece(){return this.$$.ctx[30]}get removePiece(){return this.$$.ctx[31]}get updateLegalState(){return this.$$.ctx[32]}get playMoveSound(){return this.$$.ctx[33]}get makeMove(){return this.$$.ctx[34]}get makeNextMove(){return this.$$.ctx[35]}get makeMovePromotion(){return this.$$.ctx[36]}get removeSquareHighlight(){return this.$$.ctx[37]}get removeAllPiece(){return this.$$.ctx[38]}get createPiece(){return this.$$.ctx[39]}get changeColorOfPiece(){return this.$$.ctx[40]}get getSquareFromCoords(){return this.$$.ctx[41]}get setFEN(){return this.$$.ctx[42]}get getShortFEN(){return this.$$.ctx[43]}get setSize(){return this.$$.ctx[44]}get setScale(){return this.$$.ctx[4]}get getPieceNameFromSquare(){return this.$$.ctx[45]}get setTools(){return this.$$.ctx[46]}get removeTools(){return this.$$.ctx[47]}get setMovableColor(){return this.$$.ctx[48]}get setLastMove(){return this.$$.ctx[49]}get setLegalMoves(){return this.$$.ctx[50]}get setPreMoves(){return this.$$.ctx[51]}get getState(){return this.$$.ctx[52]}get setState(){return this.$$.ctx[53]}get setConfigSettings(){return this.$$.ctx[54]}get getConfigFromState(){return this.$$.ctx[55]}}const pr=["standard","darkBlue"],mr=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function wn(s){let e,t,n;return{c(){e=R("input"),this.h()},l(a){e=D(a,"INPUT",{type:!0,class:!0}),this.h()},h(){p(e,"type","checkbox"),p(e,"class","mr-1")},m(a,i){V(a,e,i),e.checked=s[0],t||(n=[$(e,"change",s[8]),$(e,"click",Fn(s[7])),$(e,"change",s[9])],t=!0)},p(a,i){i&1&&(e.checked=a[0])},d(a){a&&S(e),t=!1,st(n)}}}function kn(s){let e,t,n;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(a){e=De(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var i=B(e);t=De(i,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),B(t).forEach(S),i.forEach(S),this.h()},h(){p(t,"fill-rule","evenodd"),p(t,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),p(t,"clip-rule","evenodd"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 20 20"),p(e,"fill","currentColor"),p(e,"class",n="w-5 h-5 transition "+(s[1]?"rotate-180":"rotate-0"))},m(a,i){V(a,e,i),L(e,t)},p(a,i){i&2&&n!==(n="w-5 h-5 transition "+(a[1]?"rotate-180":"rotate-0"))&&p(e,"class",n)},d(a){a&&S(e)}}}function Mn(s){let e,t,n;const a=s[6].default,i=Tn(a,s,s[5],null);return{c(){e=R("div"),i&&i.c(),this.h()},l(l){e=D(l,"DIV",{class:!0});var r=B(e);i&&i.l(r),r.forEach(S),this.h()},h(){p(e,"class","py-2 px-4")},m(l,r){V(l,e,r),i&&i.m(e,null),n=!0},p(l,r){i&&i.p&&(!n||r&32)&&Ln(i,a,l,l[5],n?In(a,l[5],r,null):qn(l[5]),null)},i(l){n||(H(i,l),l&&yt(()=>{n&&(t||(t=es(e,ns,{},!0)),t.run(1))}),n=!0)},o(l){X(i,l),l&&(t||(t=es(e,ns,{},!1)),t.run(0)),n=!1},d(l){l&&S(e),i&&i.d(l),l&&t&&t.end()}}}function vr(s){let e,t,n,a,i,l,r,o,u,c,d,f,E,b,_=s[0]!==void 0&&wn(s),v=s[3]&&kn(s),k=s[1]&&Mn(s);return{c(){e=R("div"),t=R("button"),n=R("div"),_&&_.c(),a=W(),i=R("span"),l=et(s[2]),o=W(),v&&v.c(),d=W(),k&&k.c(),this.h()},l(h){e=D(h,"DIV",{class:!0});var g=B(e);t=D(g,"BUTTON",{class:!0});var w=B(t);n=D(w,"DIV",{class:!0});var C=B(n);_&&_.l(C),a=G(C),i=D(C,"SPAN",{class:!0});var y=B(i);l=tt(y,s[2]),y.forEach(S),C.forEach(S),o=G(w),v&&v.l(w),w.forEach(S),d=G(g),k&&k.l(g),g.forEach(S),this.h()},h(){p(i,"class",r=s[0]===void 0?"ml-[21px]":""),p(n,"class","flex gap-1"),p(t,"class",u="flex justify-between px-4 py-2 "+(s[3]?"transition hover:bg-slate-800/40":"")+" rounded"),t.disabled=c=!s[3],p(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(h,g){V(h,e,g),L(e,t),L(t,n),_&&_.m(n,null),L(n,a),L(n,i),L(i,l),L(t,o),v&&v.m(t,null),L(e,d),k&&k.m(e,null),f=!0,E||(b=$(t,"click",s[10]),E=!0)},p(h,[g]){h[0]!==void 0?_?_.p(h,g):(_=wn(h),_.c(),_.m(n,a)):_&&(_.d(1),_=null),(!f||g&4)&&is(l,h[2]),(!f||g&1&&r!==(r=h[0]===void 0?"ml-[21px]":""))&&p(i,"class",r),h[3]?v?v.p(h,g):(v=kn(h),v.c(),v.m(t,null)):v&&(v.d(1),v=null),(!f||g&8&&u!==(u="flex justify-between px-4 py-2 "+(h[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&p(t,"class",u),(!f||g&8&&c!==(c=!h[3]))&&(t.disabled=c),h[1]?k?(k.p(h,g),g&2&&H(k,1)):(k=Mn(h),k.c(),H(k,1),k.m(e,null)):k&&(ze(),X(k,1,1,()=>{k=null}),Ue())},i(h){f||(H(k),f=!0)},o(h){X(k),f=!1},d(h){h&&S(e),_&&_.d(),v&&v.d(),k&&k.d(),E=!1,b()}}}function _r(s,e,t){let{$$slots:n={},$$scope:a}=e;const i=jt();let{name:l="board"}=e,{enabled:r=void 0}=e,{showExpand:o=!0}=e,{expanded:u=!1}=e;function c(b){Qe.call(this,s,b)}const d=()=>i("changed",r);function f(){r=this.checked,t(0,r)}const E=()=>{t(1,u=!u)};return s.$$set=b=>{"name"in b&&t(2,l=b.name),"enabled"in b&&t(0,r=b.enabled),"showExpand"in b&&t(3,o=b.showExpand),"expanded"in b&&t(1,u=b.expanded),"$$scope"in b&&t(5,a=b.$$scope)},[r,u,l,o,i,a,n,c,d,f,E]}class _t extends ye{constructor(e){super(),Pe(this,e,_r,vr,Ce,{name:2,enabled:0,showExpand:3,expanded:1})}}function Er(s,e,t){const n=s.slice();return n[12]=e[t],n}function wr(s){let e,t;return{c(){e=R("option"),t=et(s[12]),this.h()},l(n){e=D(n,"OPTION",{});var a=B(e);t=tt(a,s[12]),a.forEach(S),this.h()},h(){e.__value=s[12],St(e,e.__value)},m(n,a){V(n,e,a),L(e,t)},p:be,d(n){n&&S(e)}}}function kr(s){let e,t,n,a,i="board theme",l,r,o,u,c,d="mouseEvents",f,E,b,_,v,k="notation",h,g,w,C,y,P="flipped",N,T,I,z,K,re="resizible",le,Ie,ge=qe(pr),se=[];for(let U=0;U<ge.length;U+=1)se[U]=wr(Er(s,ge,U));return{c(){e=R("div"),t=R("select");for(let U=0;U<se.length;U+=1)se[U].c();n=W(),a=R("label"),a.textContent=i,l=W(),r=R("div"),o=R("input"),u=W(),c=R("label"),c.textContent=d,f=W(),E=R("div"),b=R("input"),_=W(),v=R("label"),v.textContent=k,h=W(),g=R("div"),w=R("input"),C=W(),y=R("label"),y.textContent=P,N=W(),T=R("div"),I=R("input"),z=W(),K=R("label"),K.textContent=re,this.h()},l(U){e=D(U,"DIV",{class:!0});var Q=B(e);t=D(Q,"SELECT",{class:!0});var ee=B(t);for(let j=0;j<se.length;j+=1)se[j].l(ee);ee.forEach(S),n=G(Q),a=D(Q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(a)!=="svelte-ew2mxm"&&(a.textContent=i),Q.forEach(S),l=G(U),r=D(U,"DIV",{class:!0});var ve=B(r);o=D(ve,"INPUT",{id:!0,type:!0,class:!0}),u=G(ve),c=D(ve,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(c)!=="svelte-1la83j8"&&(c.textContent=d),ve.forEach(S),f=G(U),E=D(U,"DIV",{class:!0});var oe=B(E);b=D(oe,"INPUT",{id:!0,type:!0,class:!0}),_=G(oe),v=D(oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(v)!=="svelte-lv5m04"&&(v.textContent=k),oe.forEach(S),h=G(U),g=D(U,"DIV",{class:!0});var M=B(g);w=D(M,"INPUT",{id:!0,type:!0,class:!0}),C=G(M),y=D(M,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(y)!=="svelte-60d3o8"&&(y.textContent=P),M.forEach(S),N=G(U),T=D(U,"DIV",{class:!0});var A=B(T);I=D(A,"INPUT",{id:!0,type:!0,class:!0}),z=G(A),K=D(A,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(K)!=="svelte-nvi1b1"&&(K.textContent=re),A.forEach(S),this.h()},h(){p(t,"class","svelte-1c01etf"),s[0]===void 0&&yt(()=>s[7].call(t)),p(a,"for","boardTheme"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","mouseEvents"),p(o,"type","checkbox"),p(o,"class","svelte-1c01etf"),p(c,"for","mouseEvents"),p(c,"class","select-none"),p(r,"class","mb-2"),p(b,"id","notation"),p(b,"type","checkbox"),p(b,"class","svelte-1c01etf"),p(v,"for","notation"),p(v,"class","select-none"),p(E,"class","mb-2"),p(w,"id","flipped"),p(w,"type","checkbox"),p(w,"class","svelte-1c01etf"),p(y,"for","flipped"),p(y,"class","select-none"),p(g,"class","mb-2"),p(I,"id","resizibleEnabled"),p(I,"type","checkbox"),p(I,"class","svelte-1c01etf"),p(K,"for","resizibleEnabled"),p(K,"class","select-none"),p(T,"class","mt-2 mb-1")},m(U,Q){V(U,e,Q),L(e,t);for(let ee=0;ee<se.length;ee+=1)se[ee]&&se[ee].m(t,null);It(t,s[0],!0),L(e,n),L(e,a),V(U,l,Q),V(U,r,Q),L(r,o),o.checked=s[1],L(r,u),L(r,c),V(U,f,Q),V(U,E,Q),L(E,b),b.checked=s[2],L(E,_),L(E,v),V(U,h,Q),V(U,g,Q),L(g,w),w.checked=s[3],L(g,C),L(g,y),V(U,N,Q),V(U,T,Q),L(T,I),I.checked=s[4],L(T,z),L(T,K),le||(Ie=[$(t,"change",s[7]),$(o,"change",s[8]),$(b,"change",s[9]),$(w,"change",s[10]),$(I,"change",s[11])],le=!0)},p(U,Q){Q&1&&It(t,U[0]),Q&2&&(o.checked=U[1]),Q&4&&(b.checked=U[2]),Q&8&&(w.checked=U[3]),Q&16&&(I.checked=U[4])},d(U){U&&(S(e),S(l),S(r),S(f),S(E),S(h),S(g),S(N),S(T)),vt(se,U),le=!1,st(Ie)}}}function Mr(s){let e,t;return e=new _t({props:{name:s[5],expanded:s[6],$$slots:{default:[kr]},$$scope:{ctx:s}}}),{c(){ce(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,a){de(e,n,a),t=!0},p(n,[a]){const i={};a&32&&(i.name=n[5]),a&64&&(i.expanded=n[6]),a&32799&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){X(e.$$.fragment,n),t=!1},d(n){he(e,n)}}}function Sr(s,e,t){let{name:n="Board"}=e,{boardTheme:a}=e,{mouseEvents:i}=e,{notation:l}=e,{flipped:r}=e,{resizible:o=!1}=e,{expanded:u=!1}=e;function c(){a=Is(this),t(0,a)}function d(){i=this.checked,t(1,i)}function f(){l=this.checked,t(2,l)}function E(){r=this.checked,t(3,r)}function b(){o=this.checked,t(4,o)}return s.$$set=_=>{"name"in _&&t(5,n=_.name),"boardTheme"in _&&t(0,a=_.boardTheme),"mouseEvents"in _&&t(1,i=_.mouseEvents),"notation"in _&&t(2,l=_.notation),"flipped"in _&&t(3,r=_.flipped),"resizible"in _&&t(4,o=_.resizible),"expanded"in _&&t(6,u=_.expanded)},[a,i,l,r,o,n,u,c,d,f,E,b]}class Cr extends ye{constructor(e){super(),Pe(this,e,Sr,Mr,Ce,{name:5,boardTheme:0,mouseEvents:1,notation:2,flipped:3,resizible:4,expanded:6})}}function yr(s){let e,t,n,a="Both",i,l="White",r,o="Black",u,c;return{c(){e=R("div"),t=R("select"),n=R("option"),n.textContent=a,i=R("option"),i.textContent=l,r=R("option"),r.textContent=o,this.h()},l(d){e=D(d,"DIV",{});var f=B(e);t=D(f,"SELECT",{class:!0});var E=B(t);n=D(E,"OPTION",{"data-svelte-h":!0}),Se(n)!=="svelte-1gzt2we"&&(n.textContent=a),i=D(E,"OPTION",{"data-svelte-h":!0}),Se(i)!=="svelte-d910yg"&&(i.textContent=l),r=D(E,"OPTION",{"data-svelte-h":!0}),Se(r)!=="svelte-1nle290"&&(r.textContent=o),E.forEach(S),f.forEach(S),this.h()},h(){n.__value="BOTH",St(n,n.__value),i.__value="WHITE",St(i,i.__value),r.__value="BLACK",St(r,r.__value),p(t,"class","svelte-1bvjddo"),s[1]===void 0&&yt(()=>s[4].call(t))},m(d,f){V(d,e,f),L(e,t),L(t,n),L(t,i),L(t,r),It(t,s[1],!0),u||(c=$(t,"change",s[4]),u=!0)},p(d,f){f&2&&It(t,d[1])},d(d){d&&S(e),u=!1,c()}}}function Pr(s){let e,t,n;function a(l){s[5](l)}let i={name:s[2],expanded:s[3],$$slots:{default:[yr]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new _t({props:i}),Z.push(()=>ae(e,"enabled",a)),{c(){ce(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,r){de(e,l,r),n=!0},p(l,[r]){const o={};r&4&&(o.name=l[2]),r&8&&(o.expanded=l[3]),r&66&&(o.$$scope={dirty:r,ctx:l}),!t&&r&1&&(t=!0,o.enabled=l[0],ie(()=>t=!1)),e.$set(o)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){X(e.$$.fragment,l),n=!1},d(l){he(e,l)}}}function Ar(s,e,t){let{name:n="Movable"}=e,{enabled:a=!1}=e,{color:i}=e,{expanded:l=!1}=e;function r(){i=Is(this),t(1,i)}function o(u){a=u,t(0,a)}return s.$$set=u=>{"name"in u&&t(2,n=u.name),"enabled"in u&&t(0,a=u.enabled),"color"in u&&t(1,i=u.color),"expanded"in u&&t(3,l=u.expanded)},[a,i,n,l,r,o]}class Tr extends ye{constructor(e){super(),Pe(this,e,Ar,Pr,Ce,{name:2,enabled:0,color:1,expanded:3})}}function Lr(s,e,t){const n=s.slice();return n[12]=e[t],n}function Sn(s){let e,t,n,a,i,l="duration",r,o,u,c,d,f="easing",E,b,_,v,k=qe(mr),h=[];for(let g=0;g<k.length;g+=1)h[g]=qr(Lr(s,k,g));return{c(){e=R("div"),t=R("div"),n=R("input"),a=W(),i=R("label"),i.textContent=l,r=W(),o=R("div"),u=R("select");for(let g=0;g<h.length;g+=1)h[g].c();c=W(),d=R("label"),d.textContent=f,this.h()},l(g){e=D(g,"DIV",{class:!0});var w=B(e);t=D(w,"DIV",{class:!0});var C=B(t);n=D(C,"INPUT",{id:!0,type:!0,class:!0}),a=G(C),i=D(C,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(i)!=="svelte-4eor77"&&(i.textContent=l),C.forEach(S),r=G(w),o=D(w,"DIV",{class:!0});var y=B(o);u=D(y,"SELECT",{id:!0,class:!0});var P=B(u);for(let N=0;N<h.length;N+=1)h[N].l(P);P.forEach(S),c=G(y),d=D(y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(d)!=="svelte-ch5b0z"&&(d.textContent=f),y.forEach(S),w.forEach(S),this.h()},h(){p(n,"id","transitionDuration"),p(n,"type","number"),p(n,"class","w-16 svelte-16wipjp"),p(i,"for","transitionDuration"),p(i,"class","select-none"),p(t,"class","flex gap-2 mb-2"),p(u,"id","easingFuncs"),p(u,"class","svelte-16wipjp"),s[4]===void 0&&yt(()=>s[10].call(u)),p(d,"for","easingFuncs"),p(d,"class","select-none"),p(o,"class","flex gap-2"),p(e,"class","pl-2 pr-4 flex-col")},m(g,w){V(g,e,w),L(e,t),L(t,n),St(n,s[3]),L(t,a),L(t,i),L(e,r),L(e,o),L(o,u);for(let C=0;C<h.length;C+=1)h[C]&&h[C].m(u,null);It(u,s[4],!0),L(o,c),L(o,d),b=!0,_||(v=[$(n,"input",s[9]),$(u,"change",s[10])],_=!0)},p(g,w){w&8&&Nn(n.value)!==g[3]&&St(n,g[3]),w&16&&It(u,g[4])},i(g){b||(g&&yt(()=>{b&&(E||(E=es(e,ns,{},!0)),E.run(1))}),b=!0)},o(g){g&&(E||(E=es(e,ns,{},!1)),E.run(0)),b=!1},d(g){g&&S(e),vt(h,g),g&&E&&E.end(),_=!1,st(v)}}}function qr(s){let e,t;return{c(){e=R("option"),t=et(s[12]),this.h()},l(n){e=D(n,"OPTION",{});var a=B(e);t=tt(a,s[12]),a.forEach(S),this.h()},h(){e.__value=s[12],St(e,e.__value)},m(n,a){V(n,e,a),L(e,t)},p:be,d(n){n&&S(e)}}}function Ir(s){let e,t,n,a,i="ghost piece",l,r,o,u,c,d="transition",f,E,b,_,v=s[2]&&Sn(s);return{c(){e=R("div"),t=R("input"),n=W(),a=R("label"),a.textContent=i,l=W(),r=R("div"),o=R("input"),u=W(),c=R("label"),c.textContent=d,f=W(),v&&v.c(),E=ke(),this.h()},l(k){e=D(k,"DIV",{class:!0});var h=B(e);t=D(h,"INPUT",{id:!0,type:!0,class:!0}),n=G(h),a=D(h,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(a)!=="svelte-1m15pvs"&&(a.textContent=i),h.forEach(S),l=G(k),r=D(k,"DIV",{class:!0});var g=B(r);o=D(g,"INPUT",{id:!0,type:!0,class:!0}),u=G(g),c=D(g,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(c)!=="svelte-62e5k3"&&(c.textContent=d),g.forEach(S),f=G(k),v&&v.l(k),E=ke(),this.h()},h(){p(t,"id","ghostPiece"),p(t,"type","checkbox"),p(t,"class","svelte-16wipjp"),p(a,"for","ghostPiece"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","draggableEnabled"),p(o,"type","checkbox"),p(o,"class","svelte-16wipjp"),p(c,"for","draggableEnabled"),p(c,"class","select-none"),p(r,"class","mb-2")},m(k,h){V(k,e,h),L(e,t),t.checked=s[1],L(e,n),L(e,a),V(k,l,h),V(k,r,h),L(r,o),o.checked=s[2],L(r,u),L(r,c),V(k,f,h),v&&v.m(k,h),V(k,E,h),b||(_=[$(t,"change",s[7]),$(o,"change",s[8])],b=!0)},p(k,h){h&2&&(t.checked=k[1]),h&4&&(o.checked=k[2]),k[2]?v?(v.p(k,h),h&4&&H(v,1)):(v=Sn(k),v.c(),H(v,1),v.m(E.parentNode,E)):v&&(ze(),X(v,1,1,()=>{v=null}),Ue())},d(k){k&&(S(e),S(l),S(r),S(f),S(E)),v&&v.d(k),b=!1,st(_)}}}function Or(s){let e,t,n;function a(l){s[11](l)}let i={name:s[5],expanded:s[6],$$slots:{default:[Ir]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new _t({props:i}),Z.push(()=>ae(e,"enabled",a)),{c(){ce(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,r){de(e,l,r),n=!0},p(l,[r]){const o={};r&32&&(o.name=l[5]),r&64&&(o.expanded=l[6]),r&32798&&(o.$$scope={dirty:r,ctx:l}),!t&&r&1&&(t=!0,o.enabled=l[0],ie(()=>t=!1)),e.$set(o)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){X(e.$$.fragment,l),n=!1},d(l){he(e,l)}}}function Fr(s,e,t){let{name:n="Draggable"}=e,{enabled:a=!1}=e,{ghostPiece:i=!1}=e,{transition:l=!1}=e,{duration:r=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function c(){i=this.checked,t(1,i)}function d(){l=this.checked,t(2,l)}function f(){r=Nn(this.value),t(3,r)}function E(){o=Is(this),t(4,o)}function b(_){a=_,t(0,a)}return s.$$set=_=>{"name"in _&&t(5,n=_.name),"enabled"in _&&t(0,a=_.enabled),"ghostPiece"in _&&t(1,i=_.ghostPiece),"transition"in _&&t(2,l=_.transition),"duration"in _&&t(3,r=_.duration),"easing"in _&&t(4,o=_.easing),"expanded"in _&&t(6,u=_.expanded)},[a,i,l,r,o,n,u,c,d,f,E,b]}class Nr extends ye{constructor(e){super(),Pe(this,e,Fr,Or,Ce,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function Cn(s,e,t){const n=s.slice();return n[7]=e[t],n[8]=e,n[9]=t,n}function yn(s){let e,t,n,a,i=s[7]+"",l,r,o,u;function c(){s[5].call(t,s[7])}return{c(){e=R("div"),t=R("input"),n=W(),a=R("label"),l=et(i),r=W(),this.h()},l(d){e=D(d,"DIV",{class:!0});var f=B(e);t=D(f,"INPUT",{id:!0,type:!0}),n=G(f),a=D(f,"LABEL",{for:!0,class:!0});var E=B(a);l=tt(E,i),E.forEach(S),r=G(f),f.forEach(S),this.h()},h(){p(t,"id",s[7]+"Enabled"),p(t,"type","checkbox"),p(a,"for",s[7]+"Enabled"),p(a,"class","select-none"),p(e,"class","mb-2")},m(d,f){V(d,e,f),L(e,t),t.checked=s[1][s[7]],L(e,n),L(e,a),L(a,l),L(e,r),o||(u=$(t,"change",c),o=!0)},p(d,f){s=d,f&18&&(t.checked=s[1][s[7]])},d(d){d&&S(e),o=!1,u()}}}function Rr(s){let e,t=qe(s[4]),n=[];for(let a=0;a<t.length;a+=1)n[a]=yn(Cn(s,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=ke()},l(a){for(let i=0;i<n.length;i+=1)n[i].l(a);e=ke()},m(a,i){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,i);V(a,e,i)},p(a,i){if(i&18){t=qe(a[4]);let l;for(l=0;l<t.length;l+=1){const r=Cn(a,t,l);n[l]?n[l].p(r,i):(n[l]=yn(r),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(a){a&&S(e),vt(n,a)}}}function Dr(s){let e,t,n;function a(l){s[6](l)}let i={name:s[2],expanded:s[3],$$slots:{default:[Rr]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new _t({props:i}),Z.push(()=>ae(e,"enabled",a)),{c(){ce(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,r){de(e,l,r),n=!0},p(l,[r]){const o={};r&4&&(o.name=l[2]),r&8&&(o.expanded=l[3]),r&1026&&(o.$$scope={dirty:r,ctx:l}),!t&&r&1&&(t=!0,o.enabled=l[0],ie(()=>t=!1)),e.$set(o)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){X(e.$$.fragment,l),n=!1},d(l){he(e,l)}}}function zr(s,e,t){let{name:n="Highlight"}=e,{enabled:a=!1}=e,{settings:i}=e;const l=["select","legal","move","preMove","nextMove","check"];let{expanded:r=!1}=e;function o(c){i[c]=this.checked,t(1,i)}function u(c){a=c,t(0,a)}return s.$$set=c=>{"name"in c&&t(2,n=c.name),"enabled"in c&&t(0,a=c.enabled),"settings"in c&&t(1,i=c.settings),"expanded"in c&&t(3,r=c.expanded)},[a,i,n,r,l,o,u]}class Ur extends ye{constructor(e){super(),Pe(this,e,zr,Dr,Ce,{name:2,enabled:0,settings:1,expanded:3})}}function Br(s){let e,t,n,a,i="L shape knight move",l,r,o,u,c,d="only chess move",f,E;return{c(){e=R("div"),t=R("input"),n=W(),a=R("label"),a.textContent=i,l=W(),r=R("div"),o=R("input"),u=W(),c=R("label"),c.textContent=d,this.h()},l(b){e=D(b,"DIV",{class:!0});var _=B(e);t=D(_,"INPUT",{id:!0,type:!0}),n=G(_),a=D(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(a)!=="svelte-c4ll25"&&(a.textContent=i),_.forEach(S),l=G(b),r=D(b,"DIV",{class:!0});var v=B(r);o=D(v,"INPUT",{id:!0,type:!0}),u=G(v),c=D(v,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(c)!=="svelte-6d7bc1"&&(c.textContent=d),v.forEach(S),this.h()},h(){p(t,"id","knightLShapeMoveEnabled"),p(t,"type","checkbox"),p(a,"for","knightLShapeMoveEnabled"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","onlyChessMoveEnabled"),p(o,"type","checkbox"),p(c,"for","onlyChessMoveEnabled"),p(c,"class","select-none"),p(r,"class","mb-2")},m(b,_){V(b,e,_),L(e,t),t.checked=s[1],L(e,n),L(e,a),V(b,l,_),V(b,r,_),L(r,o),o.checked=s[2],L(r,u),L(r,c),f||(E=[$(t,"change",s[5]),$(o,"change",s[6])],f=!0)},p(b,_){_&2&&(t.checked=b[1]),_&4&&(o.checked=b[2])},d(b){b&&(S(e),S(l),S(r)),f=!1,st(E)}}}function Vr(s){let e,t,n;function a(l){s[7](l)}let i={name:s[3],expanded:s[4],$$slots:{default:[Br]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new _t({props:i}),Z.push(()=>ae(e,"enabled",a)),{c(){ce(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,r){de(e,l,r),n=!0},p(l,[r]){const o={};r&8&&(o.name=l[3]),r&16&&(o.expanded=l[4]),r&262&&(o.$$scope={dirty:r,ctx:l}),!t&&r&1&&(t=!0,o.enabled=l[0],ie(()=>t=!1)),e.$set(o)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){X(e.$$.fragment,l),n=!1},d(l){he(e,l)}}}function Hr(s,e,t){let{name:n="DrawTools"}=e,{enabled:a=!1}=e,{knightLShape:i=!1}=e,{onlyChessMove:l=!1}=e,{expanded:r=!1}=e;function o(){i=this.checked,t(1,i)}function u(){l=this.checked,t(2,l)}function c(d){a=d,t(0,a)}return s.$$set=d=>{"name"in d&&t(3,n=d.name),"enabled"in d&&t(0,a=d.enabled),"knightLShape"in d&&t(1,i=d.knightLShape),"onlyChessMove"in d&&t(2,l=d.onlyChessMove),"expanded"in d&&t(4,r=d.expanded)},[a,i,l,n,r,o,u,c]}class jr extends ye{constructor(e){super(),Pe(this,e,Hr,Vr,Ce,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function Pn(s,e,t){const n=s.slice();return n[7]=e[t],n[8]=e,n[9]=t,n}function An(s){let e,t,n,a,i=s[7].toLowerCase()+"",l,r,o,u;function c(){s[5].call(t,s[7])}return{c(){e=R("div"),t=R("input"),n=W(),a=R("label"),l=et(i),r=W(),this.h()},l(d){e=D(d,"DIV",{class:!0});var f=B(e);t=D(f,"INPUT",{id:!0,type:!0}),n=G(f),a=D(f,"LABEL",{for:!0,class:!0});var E=B(a);l=tt(E,i),E.forEach(S),r=G(f),f.forEach(S),this.h()},h(){p(t,"id",s[7]+"Enabled"),p(t,"type","checkbox"),p(a,"for",s[7]+"Enabled"),p(a,"class","select-none"),p(e,"class","mb-2")},m(d,f){V(d,e,f),L(e,t),t.checked=s[1][s[7]],L(e,n),L(e,a),L(a,l),L(e,r),o||(u=$(t,"change",c),o=!0)},p(d,f){s=d,f&18&&(t.checked=s[1][s[7]])},d(d){d&&S(e),o=!1,u()}}}function Kr(s){let e,t=qe(s[4]),n=[];for(let a=0;a<t.length;a+=1)n[a]=An(Pn(s,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=ke()},l(a){for(let i=0;i<n.length;i+=1)n[i].l(a);e=ke()},m(a,i){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,i);V(a,e,i)},p(a,i){if(i&18){t=qe(a[4]);let l;for(l=0;l<t.length;l+=1){const r=Pn(a,t,l);n[l]?n[l].p(r,i):(n[l]=An(r),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(a){a&&S(e),vt(n,a)}}}function Wr(s){let e,t,n;function a(l){s[6](l)}let i={name:s[2],expanded:s[3],$$slots:{default:[Kr]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new _t({props:i}),Z.push(()=>ae(e,"enabled",a)),{c(){ce(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,r){de(e,l,r),n=!0},p(l,[r]){const o={};r&4&&(o.name=l[2]),r&8&&(o.expanded=l[3]),r&1026&&(o.$$scope={dirty:r,ctx:l}),!t&&r&1&&(t=!0,o.enabled=l[0],ie(()=>t=!1)),e.$set(o)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){X(e.$$.fragment,l),n=!1},d(l){he(e,l)}}}function Gr(s,e,t){let{name:n="Sounds"}=e,{enabled:a=!1}=e,{settings:i}=e;const l=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:r=!1}=e;function o(c){i[c]=this.checked,t(1,i)}function u(c){a=c,t(0,a)}return s.$$set=c=>{"name"in c&&t(2,n=c.name),"enabled"in c&&t(0,a=c.enabled),"settings"in c&&t(1,i=c.settings),"expanded"in c&&t(3,r=c.expanded)},[a,i,n,r,l,o,u]}class Xr extends ye{constructor(e){super(),Pe(this,e,Gr,Wr,Ce,{name:2,enabled:0,settings:1,expanded:3})}}function Qr(s){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(n){e=De(n,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=B(e);t=De(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),B(t).forEach(S),a.forEach(S),this.h()},h(){p(t,"stroke-linecap","round"),p(t,"stroke-linejoin","round"),p(t,"stroke-width","2"),p(t,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),Be(e,"transform","translate(1px, 0px)"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"class","h-5"),p(e,"fill","none"),p(e,"viewBox","0 0 24 24"),p(e,"aria-hidden","true"),p(e,"stroke","currentColor")},m(n,a){V(n,e,a),L(e,t)},d(n){n&&S(e)}}}function Yr(s){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(n){e=De(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=B(e);t=De(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),B(t).forEach(S),a.forEach(S),this.h()},h(){p(t,"stroke-linecap","round"),p(t,"stroke-linejoin","round"),p(t,"stroke-width","2"),p(t,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"class","h-5 text-green-500"),p(e,"fill","none"),p(e,"viewBox","0 0 24 24"),p(e,"aria-hidden","true"),p(e,"stroke","currentColor")},m(n,a){V(n,e,a),L(e,t)},d(n){n&&S(e)}}}function xr(s){let e,t,n;function a(r,o){return r[1]?Yr:Qr}let i=a(s),l=i(s);return{c(){e=R("button"),l.c(),this.h()},l(r){e=D(r,"BUTTON",{type:!0,class:!0});var o=B(e);l.l(o),o.forEach(S),this.h()},h(){p(e,"type","button"),p(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(r,o){V(r,e,o),l.m(e,null),s[4](e),t||(n=$(e,"click",s[2]),t=!0)},p(r,[o]){i!==(i=a(r))&&(l.d(1),l=i(r),l&&(l.c(),l.m(e,null)))},i:be,o:be,d(r){r&&S(e),l.d(),s[4](null),t=!1,n()}}}function Zr(s,e,t){let{copyText:n}=e,a,i=!1;function l(){navigator.clipboard.writeText(n),t(1,i=!0),setTimeout(()=>{t(1,i=!1)},2e3),a.setAttribute("data-cooltipz-dir","top"),a.setAttribute("aria-label","Copied!"),setTimeout(()=>{a.removeAttribute("aria-label"),a.removeAttribute("data-cooltipz-dir")},2e3)}function r(o){Z[o?"unshift":"push"](()=>{a=o,t(0,a)})}return s.$$set=o=>{"copyText"in o&&t(3,n=o.copyText)},[a,i,l,n,r]}class Jr extends ye{constructor(e){super(),Pe(this,e,Zr,xr,Ce,{copyText:3})}}function $r(s){let e,t,n,a,i="allow Castling",l,r,o,u,c,d="allow EnPassant",f,E;return{c(){e=R("div"),t=R("input"),n=W(),a=R("label"),a.textContent=i,l=W(),r=R("div"),o=R("input"),u=W(),c=R("label"),c.textContent=d,this.h()},l(b){e=D(b,"DIV",{class:!0});var _=B(e);t=D(_,"INPUT",{id:!0,type:!0}),n=G(_),a=D(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(a)!=="svelte-1u6v9be"&&(a.textContent=i),_.forEach(S),l=G(b),r=D(b,"DIV",{class:!0});var v=B(r);o=D(v,"INPUT",{id:!0,type:!0}),u=G(v),c=D(v,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Se(c)!=="svelte-1u3ql6u"&&(c.textContent=d),v.forEach(S),this.h()},h(){p(t,"id","allowCastling"),p(t,"type","checkbox"),p(a,"for","allowCastling"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","allowEnPassant"),p(o,"type","checkbox"),p(c,"for","allowEnPassant"),p(c,"class","select-none"),p(r,"class","mb-2")},m(b,_){V(b,e,_),L(e,t),t.checked=s[1],L(e,n),L(e,a),V(b,l,_),V(b,r,_),L(r,o),o.checked=s[2],L(r,u),L(r,c),f||(E=[$(t,"change",s[4]),$(o,"change",s[5])],f=!0)},p(b,_){_&2&&(t.checked=b[1]),_&4&&(o.checked=b[2])},d(b){b&&(S(e),S(l),S(r)),f=!1,st(E)}}}function el(s){let e,t,n;function a(l){s[6](l)}let i={name:s[3],showExpand:!0,$$slots:{default:[$r]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.enabled=s[0]),e=new _t({props:i}),Z.push(()=>ae(e,"enabled",a)),e.$on("changed",s[7]),{c(){ce(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,r){de(e,l,r),n=!0},p(l,[r]){const o={};r&8&&(o.name=l[3]),r&262&&(o.$$scope={dirty:r,ctx:l}),!t&&r&1&&(t=!0,o.enabled=l[0],ie(()=>t=!1)),e.$set(o)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){X(e.$$.fragment,l),n=!1},d(l){he(e,l)}}}function tl(s,e,t){let{name:n="Legal"}=e,{enabled:a=!1}=e,{allowCastling:i}=e,{allowEnPassant:l}=e;function r(){i=this.checked,t(1,i)}function o(){l=this.checked,t(2,l)}function u(d){a=d,t(0,a)}function c(d){Qe.call(this,s,d)}return s.$$set=d=>{"name"in d&&t(3,n=d.name),"enabled"in d&&t(0,a=d.enabled),"allowCastling"in d&&t(1,i=d.allowCastling),"allowEnPassant"in d&&t(2,l=d.allowEnPassant)},[a,i,l,n,r,o,u,c]}class sl extends ye{constructor(e){super(),Pe(this,e,tl,el,Ce,{name:3,enabled:0,allowCastling:1,allowEnPassant:2})}}function nl(s){let e,t,n,a,i,l,r,o,u,c,d,f,E,b,_,v,k,h,g,w,C,y,P,N,T,I,z,K,re,le,Ie,ge,se,U,Q,ee,ve,oe,M,A,j,ne,_e,Oe,Ae,Fe,Me,nt,Ke,Ye,xe,Ve,it,Ot,Pt,At,at,Kt="/",Tt,Ze,Ft,Et,Lt,Je,Nt,$e,ut,Rt,Wt;function rs(F){s[7](F)}function ls(F){s[8](F)}function os(F){s[9](F)}function us(F){s[10](F)}function cs(F){s[11](F)}let ct={expanded:!0};s[0].board.boardTheme!==void 0&&(ct.boardTheme=s[0].board.boardTheme),s[0].board.mouseEvents!==void 0&&(ct.mouseEvents=s[0].board.mouseEvents),s[0].board.notation!==void 0&&(ct.notation=s[0].board.notation),s[0].board.flipped!==void 0&&(ct.flipped=s[0].board.flipped),s[0].board.resizible!==void 0&&(ct.resizible=s[0].board.resizible),l=new Cr({props:ct}),Z.push(()=>ae(l,"boardTheme",rs)),Z.push(()=>ae(l,"mouseEvents",ls)),Z.push(()=>ae(l,"notation",os)),Z.push(()=>ae(l,"flipped",us)),Z.push(()=>ae(l,"resizible",cs));function fs(F){s[12](F)}function ds(F){s[13](F)}let Dt={expanded:!0};s[0].movable.enabled!==void 0&&(Dt.enabled=s[0].movable.enabled),s[0].movable.color!==void 0&&(Dt.color=s[0].movable.color),E=new Tr({props:Dt}),Z.push(()=>ae(E,"enabled",fs)),Z.push(()=>ae(E,"color",ds));function hs(F){s[14](F)}function gs(F){s[15](F)}function bs(F){s[16](F)}function ps(F){s[17](F)}function ms(F){s[18](F)}let ft={};s[0].draggable.enabled!==void 0&&(ft.enabled=s[0].draggable.enabled),s[0].draggable.ghostPiece.enabled!==void 0&&(ft.ghostPiece=s[0].draggable.ghostPiece.enabled),s[0].draggable.transition.enabled!==void 0&&(ft.transition=s[0].draggable.transition.enabled),s[0].draggable.transition.settings.duration!==void 0&&(ft.duration=s[0].draggable.transition.settings.duration),s[0].draggable.transition.settings.easing!==void 0&&(ft.easing=s[0].draggable.transition.settings.easing),k=new Nr({props:ft}),Z.push(()=>ae(k,"enabled",hs)),Z.push(()=>ae(k,"ghostPiece",gs)),Z.push(()=>ae(k,"transition",bs)),Z.push(()=>ae(k,"duration",ps)),Z.push(()=>ae(k,"easing",ms));function m(F){s[19](F)}let O={name:"Selectable",showExpand:!1};s[0].selectable.enabled!==void 0&&(O.enabled=s[0].selectable.enabled),N=new _t({props:O}),Z.push(()=>ae(N,"enabled",m));function Y(F){s[20](F)}function ue(F){s[21](F)}function Ee(F){s[22](F)}let we={};s[0].legal.settings.allowCastling!==void 0&&(we.allowCastling=s[0].legal.settings.allowCastling),s[0].legal.settings.allowEnPassant!==void 0&&(we.allowEnPassant=s[0].legal.settings.allowEnPassant),s[0].legal.enabled!==void 0&&(we.enabled=s[0].legal.enabled),z=new sl({props:we}),Z.push(()=>ae(z,"allowCastling",Y)),Z.push(()=>ae(z,"allowEnPassant",ue)),Z.push(()=>ae(z,"enabled",Ee)),z.$on("changed",s[23]);function pe(F){s[24](F)}function We(F){s[25](F)}let rt={};s[0].highlight.enabled!==void 0&&(rt.enabled=s[0].highlight.enabled),s[0].highlight.settings!==void 0&&(rt.settings=s[0].highlight.settings),ge=new Ur({props:rt}),Z.push(()=>ae(ge,"enabled",pe)),Z.push(()=>ae(ge,"settings",We));function vs(F){s[26](F)}function Gn(F){s[27](F)}function Xn(F){s[28](F)}let Gt={};s[0].drawTools.enabled!==void 0&&(Gt.enabled=s[0].drawTools.enabled),s[0].drawTools.settings.knightLShape!==void 0&&(Gt.knightLShape=s[0].drawTools.settings.knightLShape),s[0].drawTools.settings.onlyChessMove!==void 0&&(Gt.onlyChessMove=s[0].drawTools.settings.onlyChessMove),ee=new jr({props:Gt}),Z.push(()=>ae(ee,"enabled",vs)),Z.push(()=>ae(ee,"knightLShape",Gn)),Z.push(()=>ae(ee,"onlyChessMove",Xn));function Qn(F){s[29](F)}function Yn(F){s[30](F)}let _s={};s[0].sounds.enabled!==void 0&&(_s.enabled=s[0].sounds.enabled),s[0].sounds.settings!==void 0&&(_s.settings=s[0].sounds.settings),j=new Xr({props:_s}),Z.push(()=>ae(j,"enabled",Qn)),Z.push(()=>ae(j,"settings",Yn));let xn={config:s[6],class:"rounded-md"};return Me=new br({props:xn}),s[31](Me),Je=new Jr({props:{copyText:s[4]}}),$e=new mi({props:{source:s[4],language:"svelte"}}),{c(){e=R("link"),t=W(),n=R("div"),a=R("div"),i=R("div"),ce(l.$$.fragment),f=W(),ce(E.$$.fragment),v=W(),ce(k.$$.fragment),P=W(),ce(N.$$.fragment),I=W(),ce(z.$$.fragment),Ie=W(),ce(ge.$$.fragment),Q=W(),ce(ee.$$.fragment),A=W(),ce(j.$$.fragment),Oe=W(),Ae=R("div"),Fe=R("div"),ce(Me.$$.fragment),nt=W(),Ke=R("div"),Ye=R("div"),xe=R("div"),Ve=R("button"),it=R("span"),Ot=et("ts"),At=W(),at=R("span"),at.textContent=Kt,Tt=W(),Ze=R("span"),Ft=et("js"),Lt=W(),ce(Je.$$.fragment),Nt=W(),ce($e.$$.fragment),this.h()},l(F){const te=ii("svelte-tebjht",document.head);e=D(te,"LINK",{rel:!0,href:!0}),te.forEach(S),t=G(F),n=D(F,"DIV",{class:!0});var lt=B(n);a=D(lt,"DIV",{class:!0});var dt=B(a);i=D(dt,"DIV",{class:!0});var me=B(i);fe(l.$$.fragment,me),f=G(me),fe(E.$$.fragment,me),v=G(me),fe(k.$$.fragment,me),P=G(me),fe(N.$$.fragment,me),I=G(me),fe(z.$$.fragment,me),Ie=G(me),fe(ge.$$.fragment,me),Q=G(me),fe(ee.$$.fragment,me),A=G(me),fe(j.$$.fragment,me),me.forEach(S),Oe=G(dt),Ae=D(dt,"DIV",{class:!0});var wt=B(Ae);Fe=D(wt,"DIV",{class:!0});var kt=B(Fe);fe(Me.$$.fragment,kt),kt.forEach(S),nt=G(wt),Ke=D(wt,"DIV",{class:!0});var qt=B(Ke);Ye=D(qt,"DIV",{class:!0});var ot=B(Ye);xe=D(ot,"DIV",{class:!0});var ht=B(xe);Ve=D(ht,"BUTTON",{class:!0});var gt=B(Ve);it=D(gt,"SPAN",{class:!0});var zt=B(it);Ot=tt(zt,"ts"),zt.forEach(S),At=G(gt),at=D(gt,"SPAN",{class:!0,"data-svelte-h":!0}),Se(at)!=="svelte-eqi2a4"&&(at.textContent=Kt),Tt=G(gt),Ze=D(gt,"SPAN",{class:!0});var Ut=B(Ze);Ft=tt(Ut,"js"),Ut.forEach(S),gt.forEach(S),Lt=G(ht),fe(Je.$$.fragment,ht),ht.forEach(S),Nt=G(ot),fe($e.$$.fragment,ot),ot.forEach(S),qt.forEach(S),wt.forEach(S),dt.forEach(S),lt.forEach(S),this.h()},h(){document.title="Chessboard • PowChess.com",p(e,"rel","stylesheet"),p(e,"href","prism-one-dark.css"),p(i,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),p(Fe,"class","w-full lg:w-[calc(70vh*(var(--boardScale,70)/100*0.7+0.3))]"),p(it,"class",Pt=s[1]?"text-yellow-600":""),p(at,"class","text-gray-600"),p(Ze,"class",Et=s[1]?"":"text-yellow-600"),p(Ve,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),p(xe,"class","absolute right-2 top-2 flex gap-4"),p(Ye,"class","shadow-lg rounded"),p(Ke,"class","row-start-2 relative"),p(Ae,"class","grid grid-rows-[90wh_auto] gap-10"),p(a,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),p(n,"class","my-10 grid grid-cols-center")},m(F,te){L(document.head,e),V(F,t,te),V(F,n,te),L(n,a),L(a,i),de(l,i,null),L(i,f),de(E,i,null),L(i,v),de(k,i,null),L(i,P),de(N,i,null),L(i,I),de(z,i,null),L(i,Ie),de(ge,i,null),L(i,Q),de(ee,i,null),L(i,A),de(j,i,null),L(a,Oe),L(a,Ae),L(Ae,Fe),de(Me,Fe,null),L(Ae,nt),L(Ae,Ke),L(Ke,Ye),L(Ye,xe),L(xe,Ve),L(Ve,it),L(it,Ot),L(Ve,At),L(Ve,at),L(Ve,Tt),L(Ve,Ze),L(Ze,Ft),L(xe,Lt),de(Je,xe,null),L(Ye,Nt),de($e,Ye,null),ut=!0,Rt||(Wt=$(Ve,"click",s[32]),Rt=!0)},p(F,te){const lt={};!r&&te[0]&1&&(r=!0,lt.boardTheme=F[0].board.boardTheme,ie(()=>r=!1)),!o&&te[0]&1&&(o=!0,lt.mouseEvents=F[0].board.mouseEvents,ie(()=>o=!1)),!u&&te[0]&1&&(u=!0,lt.notation=F[0].board.notation,ie(()=>u=!1)),!c&&te[0]&1&&(c=!0,lt.flipped=F[0].board.flipped,ie(()=>c=!1)),!d&&te[0]&1&&(d=!0,lt.resizible=F[0].board.resizible,ie(()=>d=!1)),l.$set(lt);const dt={};!b&&te[0]&1&&(b=!0,dt.enabled=F[0].movable.enabled,ie(()=>b=!1)),!_&&te[0]&1&&(_=!0,dt.color=F[0].movable.color,ie(()=>_=!1)),E.$set(dt);const me={};!h&&te[0]&1&&(h=!0,me.enabled=F[0].draggable.enabled,ie(()=>h=!1)),!g&&te[0]&1&&(g=!0,me.ghostPiece=F[0].draggable.ghostPiece.enabled,ie(()=>g=!1)),!w&&te[0]&1&&(w=!0,me.transition=F[0].draggable.transition.enabled,ie(()=>w=!1)),!C&&te[0]&1&&(C=!0,me.duration=F[0].draggable.transition.settings.duration,ie(()=>C=!1)),!y&&te[0]&1&&(y=!0,me.easing=F[0].draggable.transition.settings.easing,ie(()=>y=!1)),k.$set(me);const wt={};!T&&te[0]&1&&(T=!0,wt.enabled=F[0].selectable.enabled,ie(()=>T=!1)),N.$set(wt);const kt={};!K&&te[0]&1&&(K=!0,kt.allowCastling=F[0].legal.settings.allowCastling,ie(()=>K=!1)),!re&&te[0]&1&&(re=!0,kt.allowEnPassant=F[0].legal.settings.allowEnPassant,ie(()=>re=!1)),!le&&te[0]&1&&(le=!0,kt.enabled=F[0].legal.enabled,ie(()=>le=!1)),z.$set(kt);const qt={};!se&&te[0]&1&&(se=!0,qt.enabled=F[0].highlight.enabled,ie(()=>se=!1)),!U&&te[0]&1&&(U=!0,qt.settings=F[0].highlight.settings,ie(()=>U=!1)),ge.$set(qt);const ot={};!ve&&te[0]&1&&(ve=!0,ot.enabled=F[0].drawTools.enabled,ie(()=>ve=!1)),!oe&&te[0]&1&&(oe=!0,ot.knightLShape=F[0].drawTools.settings.knightLShape,ie(()=>oe=!1)),!M&&te[0]&1&&(M=!0,ot.onlyChessMove=F[0].drawTools.settings.onlyChessMove,ie(()=>M=!1)),ee.$set(ot);const ht={};!ne&&te[0]&1&&(ne=!0,ht.enabled=F[0].sounds.enabled,ie(()=>ne=!1)),!_e&&te[0]&1&&(_e=!0,ht.settings=F[0].sounds.settings,ie(()=>_e=!1)),j.$set(ht);const gt={};Me.$set(gt),(!ut||te[0]&2&&Pt!==(Pt=F[1]?"text-yellow-600":""))&&p(it,"class",Pt),(!ut||te[0]&2&&Et!==(Et=F[1]?"":"text-yellow-600"))&&p(Ze,"class",Et);const zt={};te[0]&16&&(zt.copyText=F[4]),Je.$set(zt);const Ut={};te[0]&16&&(Ut.source=F[4]),$e.$set(Ut)},i(F){ut||(H(l.$$.fragment,F),H(E.$$.fragment,F),H(k.$$.fragment,F),H(N.$$.fragment,F),H(z.$$.fragment,F),H(ge.$$.fragment,F),H(ee.$$.fragment,F),H(j.$$.fragment,F),H(Me.$$.fragment,F),H(Je.$$.fragment,F),H($e.$$.fragment,F),ut=!0)},o(F){X(l.$$.fragment,F),X(E.$$.fragment,F),X(k.$$.fragment,F),X(N.$$.fragment,F),X(z.$$.fragment,F),X(ge.$$.fragment,F),X(ee.$$.fragment,F),X(j.$$.fragment,F),X(Me.$$.fragment,F),X(Je.$$.fragment,F),X($e.$$.fragment,F),ut=!1},d(F){F&&(S(t),S(n)),S(e),he(l),he(E),he(k),he(N),he(z),he(ge),he(ee),he(j),s[31](null),he(Me),he(Je),he($e),Rt=!1,Wt()}}}function il(s,e,t){const n=new qi,a={movable:"BOTH",legal:!0,callbacks:{afterMove:M=>n.move({from:M.substring(0,2),to:M.substring(2,4),...M.length>4&&{promotion:M[4]}}),getLegalMoves:()=>n.moves({verbose:!0}).map(M=>M.from+M.to+(M.promotion??"")),getWhiteToMove:()=>n.turn()==="w",getInCheck:()=>n.inCheck(),getLastMove:()=>{const M=n.history({verbose:!0}).pop();return M?M.from+M.to+(M.promotion??""):""}},board:{resizible:!0}},i=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,l=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let r,o=new Vn(a),u=!1,c=!0,d="";as(()=>{var M;t(3,u=!0),t(0,o=(M=r.getState)==null?void 0:M.call(r))});const f=(M,A)=>{var Fe;const j=M.getConfig();u&&((Fe=r.setState)==null||Fe.call(r,M));let ne=JSON.stringify(j,(Me,nt)=>Me==="callbacks"?"{functions}":nt,4);ne=ne.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',A?i:l);const _e=`
	import { Color } from '@powchess/chessboard/enums';`;function Oe(){return ne.includes("movable: 'WHITE'")||ne.includes("movable: 'BLACK'")||ne.includes("movable: 'BOTH'")}return`<script${A?' lang="ts"':""}>
	import Chessboard${A?", { type ChessboardConfig }":""} from '@powchess/chessboard';${Oe()&&A?_e:""}${o.legal.enabled?A?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${A?": ChessboardConfig":""} = ${ne};
<\/script>

<Chessboard {config} className="rounded-md" />`};function E(M){s.$$.not_equal(o.board.boardTheme,M)&&(o.board.boardTheme=M,t(0,o))}function b(M){s.$$.not_equal(o.board.mouseEvents,M)&&(o.board.mouseEvents=M,t(0,o))}function _(M){s.$$.not_equal(o.board.notation,M)&&(o.board.notation=M,t(0,o))}function v(M){s.$$.not_equal(o.board.flipped,M)&&(o.board.flipped=M,t(0,o))}function k(M){s.$$.not_equal(o.board.resizible,M)&&(o.board.resizible=M,t(0,o))}function h(M){s.$$.not_equal(o.movable.enabled,M)&&(o.movable.enabled=M,t(0,o))}function g(M){s.$$.not_equal(o.movable.color,M)&&(o.movable.color=M,t(0,o))}function w(M){s.$$.not_equal(o.draggable.enabled,M)&&(o.draggable.enabled=M,t(0,o))}function C(M){s.$$.not_equal(o.draggable.ghostPiece.enabled,M)&&(o.draggable.ghostPiece.enabled=M,t(0,o))}function y(M){s.$$.not_equal(o.draggable.transition.enabled,M)&&(o.draggable.transition.enabled=M,t(0,o))}function P(M){s.$$.not_equal(o.draggable.transition.settings.duration,M)&&(o.draggable.transition.settings.duration=M,t(0,o))}function N(M){s.$$.not_equal(o.draggable.transition.settings.easing,M)&&(o.draggable.transition.settings.easing=M,t(0,o))}function T(M){s.$$.not_equal(o.selectable.enabled,M)&&(o.selectable.enabled=M,t(0,o))}function I(M){s.$$.not_equal(o.legal.settings.allowCastling,M)&&(o.legal.settings.allowCastling=M,t(0,o))}function z(M){s.$$.not_equal(o.legal.settings.allowEnPassant,M)&&(o.legal.settings.allowEnPassant=M,t(0,o))}function K(M){s.$$.not_equal(o.legal.enabled,M)&&(o.legal.enabled=M,t(0,o))}const re=()=>{var M;o.legal.enabled||(n.reset(),u&&((M=r.setFEN)==null||M.call(r,o.board.startFen,!0,!1)))};function le(M){s.$$.not_equal(o.highlight.enabled,M)&&(o.highlight.enabled=M,t(0,o))}function Ie(M){s.$$.not_equal(o.highlight.settings,M)&&(o.highlight.settings=M,t(0,o))}function ge(M){s.$$.not_equal(o.drawTools.enabled,M)&&(o.drawTools.enabled=M,t(0,o))}function se(M){s.$$.not_equal(o.drawTools.settings.knightLShape,M)&&(o.drawTools.settings.knightLShape=M,t(0,o))}function U(M){s.$$.not_equal(o.drawTools.settings.onlyChessMove,M)&&(o.drawTools.settings.onlyChessMove=M,t(0,o))}function Q(M){s.$$.not_equal(o.sounds.enabled,M)&&(o.sounds.enabled=M,t(0,o))}function ee(M){s.$$.not_equal(o.sounds.settings,M)&&(o.sounds.settings=M,t(0,o))}function ve(M){Z[M?"unshift":"push"](()=>{r=M,t(2,r)})}const oe=()=>{t(1,c=!c)};return s.$$.update=()=>{s.$$.dirty[0]&3&&t(4,d=f(o,c))},[o,c,r,u,d,n,a,E,b,_,v,k,h,g,w,C,y,P,N,T,I,z,K,re,le,Ie,ge,se,U,Q,ee,ve,oe]}class fl extends ye{constructor(e){super(),Pe(this,e,il,nl,Ce,{},null,[-1,-1])}}export{fl as component};
