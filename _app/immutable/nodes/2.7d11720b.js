var Zn=Object.defineProperty;var Jn=(s,e,t)=>e in s?Zn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var L=(s,e,t)=>(Jn(s,typeof e!="symbol"?e+"":e,t),t);import{A as et,s as Me,r as Ln,f as R,a as j,g as D,h as U,d as S,c as K,k as Be,j as p,i as B,x as T,u as qn,v as In,w as On,B as xt,C as Ns,p as x,H as $n,e as Ee,D as ei,l as Je,m as $e,n as ss,E as St,F as ti,y as me,G as pt,I as Fn,J as Rs,K as qs,L as ee,M as Is,N as Ht,z as si,o as ns,O as Qe,P as Ie,Q as Oe,R as Ds,S as ie,T as we,U as Zt,V as Nn,W as zs,X as ni,t as ii,Y as Tt,Z as Os,_ as kt,$ as Rn,a0 as ai}from"../chunks/scheduler.b2bc4f97.js";import{t as X,a as H,S as Se,i as Ce,n as ri,l as li,g as ze,c as Ue,f as oi,h as ui,j as ae,b as oe,d as ue,m as ce,e as fe,k as Jt}from"../chunks/index.23aa396a.js";import{w as ci}from"../chunks/index.48d9f02b.js";function Ae(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Dn(s,e){X(s,1,1,()=>{e.delete(s.key)})}function zn(s,e,t,i,a,l,n,r,o,u,f,d){let c=s.length,E=l.length,v=c;const _={};for(;v--;)_[s[v].key]=v;const m=[],M=new Map,g=new Map,h=[];for(v=E;v--;){const A=d(a,l,v),N=t(A);let P=n.get(N);P?i&&h.push(()=>P.p(A,e)):(P=u(N,A),P.c()),M.set(N,m[v]=P),N in _&&g.set(N,Math.abs(v-_[N]))}const k=new Set,C=new Set;function y(A){H(A,1),A.m(r,f),n.set(A.key,A),f=A.first,E--}for(;c&&E;){const A=m[E-1],N=s[c-1],P=A.key,O=N.key;A===N?(f=A.first,c--,E--):M.has(O)?!n.has(P)||k.has(P)?y(A):C.has(O)?c--:g.get(P)>g.get(O)?(C.add(P),y(A)):(k.add(O),c--):(o(N,n),c--)}for(;c--;){const A=s[c];M.has(A.key)||o(A,n)}for(;E;)y(m[E-1]);return et(h),m}typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var Us=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fi(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Un={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(i){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,l=0,n={},r={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function g(h){return h instanceof o?new o(h.type,g(h.content),h.alias):Array.isArray(h)?h.map(g):h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(g){return Object.prototype.toString.call(g).slice(8,-1)},objId:function(g){return g.__id||Object.defineProperty(g,"__id",{value:++l}),g.__id},clone:function g(h,k){k=k||{};var C,y;switch(r.util.type(h)){case"Object":if(y=r.util.objId(h),k[y])return k[y];C={},k[y]=C;for(var A in h)h.hasOwnProperty(A)&&(C[A]=g(h[A],k));return C;case"Array":return y=r.util.objId(h),k[y]?k[y]:(C=[],k[y]=C,h.forEach(function(N,P){C[P]=g(N,k)}),C);default:return h}},getLanguage:function(g){for(;g;){var h=a.exec(g.className);if(h)return h[1].toLowerCase();g=g.parentElement}return"none"},setLanguage:function(g,h){g.className=g.className.replace(RegExp(a,"gi"),""),g.classList.add("language-"+h)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(C){var g=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(g){var h=document.getElementsByTagName("script");for(var k in h)if(h[k].src==g)return h[k]}return null}},isActive:function(g,h,k){for(var C="no-"+h;g;){var y=g.classList;if(y.contains(h))return!0;if(y.contains(C))return!1;g=g.parentElement}return!!k}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(g,h){var k=r.util.clone(r.languages[g]);for(var C in h)k[C]=h[C];return k},insertBefore:function(g,h,k,C){C=C||r.languages;var y=C[g],A={};for(var N in y)if(y.hasOwnProperty(N)){if(N==h)for(var P in k)k.hasOwnProperty(P)&&(A[P]=k[P]);k.hasOwnProperty(N)||(A[N]=y[N])}var O=C[g];return C[g]=A,r.languages.DFS(r.languages,function(z,W){W===O&&z!=g&&(this[z]=A)}),A},DFS:function g(h,k,C,y){y=y||{};var A=r.util.objId;for(var N in h)if(h.hasOwnProperty(N)){k.call(h,N,h[N],C||N);var P=h[N],O=r.util.type(P);O==="Object"&&!y[A(P)]?(y[A(P)]=!0,g(P,k,null,y)):O==="Array"&&!y[A(P)]&&(y[A(P)]=!0,g(P,k,N,y))}}},plugins:{},highlightAll:function(g,h){r.highlightAllUnder(document,g,h)},highlightAllUnder:function(g,h,k){var C={callback:k,container:g,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),r.hooks.run("before-all-elements-highlight",C);for(var y=0,A;A=C.elements[y++];)r.highlightElement(A,h===!0,C.callback)},highlightElement:function(g,h,k){var C=r.util.getLanguage(g),y=r.languages[C];r.util.setLanguage(g,C);var A=g.parentElement;A&&A.nodeName.toLowerCase()==="pre"&&r.util.setLanguage(A,C);var N=g.textContent,P={element:g,language:C,grammar:y,code:N};function O(W){P.highlightedCode=W,r.hooks.run("before-insert",P),P.element.innerHTML=P.highlightedCode,r.hooks.run("after-highlight",P),r.hooks.run("complete",P),k&&k.call(P.element)}if(r.hooks.run("before-sanity-check",P),A=P.element.parentElement,A&&A.nodeName.toLowerCase()==="pre"&&!A.hasAttribute("tabindex")&&A.setAttribute("tabindex","0"),!P.code){r.hooks.run("complete",P),k&&k.call(P.element);return}if(r.hooks.run("before-highlight",P),!P.grammar){O(r.util.encode(P.code));return}if(h&&i.Worker){var z=new Worker(r.filename);z.onmessage=function(W){O(W.data)},z.postMessage(JSON.stringify({language:P.language,code:P.code,immediateClose:!0}))}else O(r.highlight(P.code,P.grammar,P.language))},highlight:function(g,h,k){var C={code:g,grammar:h,language:k};if(r.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=r.tokenize(C.code,C.grammar),r.hooks.run("after-tokenize",C),o.stringify(r.util.encode(C.tokens),C.language)},tokenize:function(g,h){var k=h.rest;if(k){for(var C in k)h[C]=k[C];delete h.rest}var y=new d;return c(y,y.head,g),f(g,y,h,y.head,0),v(y)},hooks:{all:{},add:function(g,h){var k=r.hooks.all;k[g]=k[g]||[],k[g].push(h)},run:function(g,h){var k=r.hooks.all[g];if(!(!k||!k.length))for(var C=0,y;y=k[C++];)y(h)}},Token:o};i.Prism=r;function o(g,h,k,C){this.type=g,this.content=h,this.alias=k,this.length=(C||"").length|0}o.stringify=function g(h,k){if(typeof h=="string")return h;if(Array.isArray(h)){var C="";return h.forEach(function(O){C+=g(O,k)}),C}var y={type:h.type,content:g(h.content,k),tag:"span",classes:["token",h.type],attributes:{},language:k},A=h.alias;A&&(Array.isArray(A)?Array.prototype.push.apply(y.classes,A):y.classes.push(A)),r.hooks.run("wrap",y);var N="";for(var P in y.attributes)N+=" "+P+'="'+(y.attributes[P]||"").replace(/"/g,"&quot;")+'"';return"<"+y.tag+' class="'+y.classes.join(" ")+'"'+N+">"+y.content+"</"+y.tag+">"};function u(g,h,k,C){g.lastIndex=h;var y=g.exec(k);if(y&&C&&y[1]){var A=y[1].length;y.index+=A,y[0]=y[0].slice(A)}return y}function f(g,h,k,C,y,A){for(var N in k)if(!(!k.hasOwnProperty(N)||!k[N])){var P=k[N];P=Array.isArray(P)?P:[P];for(var O=0;O<P.length;++O){if(A&&A.cause==N+","+O)return;var z=P[O],W=z.inside,le=!!z.lookbehind,be=!!z.greedy,_e=z.alias;if(be&&!z.pattern.global){var se=z.pattern.toString().match(/[imsuy]*$/)[0];z.pattern=RegExp(z.pattern.source,se+"g")}for(var ge=z.pattern||z,V=C.next,G=y;V!==h.tail&&!(A&&G>=A.reach);G+=V.value.length,V=V.next){var J=V.value;if(h.length>g.length)return;if(!(J instanceof o)){var de=1,q;if(be){if(q=u(ge,G,g,le),!q||q.index>=g.length)break;var he=q.index,w=q.index+q[0].length,$=G;for($+=V.value.length;he>=$;)V=V.next,$+=V.value.length;if($-=V.value.length,G=$,V.value instanceof o)continue;for(var te=V;te!==h.tail&&($<w||typeof te.value=="string");te=te.next)de++,$+=te.value.length;de--,J=g.slice(G,$),q.index-=G}else if(q=u(ge,0,J,le),!q)continue;var he=q.index,Fe=q[0],Ne=J.slice(0,he),pe=J.slice(he+Fe.length),Te=G+J.length;A&&Te>A.reach&&(A.reach=Te);var ke=V.prev;Ne&&(ke=c(h,ke,Ne),G+=Ne.length),E(h,ke,de);var tt=new o(N,W?r.tokenize(Fe,W):Fe,_e,Fe);if(V=c(h,ke,tt),pe&&c(h,V,pe),de>1){var Ve={cause:N+","+O,reach:Te};f(g,h,k,V.prev,G,Ve),A&&Ve.reach>A.reach&&(A.reach=Ve.reach)}}}}}}function d(){var g={value:null,prev:null,next:null},h={value:null,prev:g,next:null};g.next=h,this.head=g,this.tail=h,this.length=0}function c(g,h,k){var C=h.next,y={value:k,prev:h,next:C};return h.next=y,C.prev=y,g.length++,y}function E(g,h,k){for(var C=h.next,y=0;y<k&&C!==g.tail;y++)C=C.next;h.next=C,C.prev=h,g.length-=y}function v(g){for(var h=[],k=g.head.next;k!==g.tail;)h.push(k.value),k=k.next;return h}if(!i.document)return i.addEventListener&&(r.disableWorkerMessageHandler||i.addEventListener("message",function(g){var h=JSON.parse(g.data),k=h.language,C=h.code,y=h.immediateClose;i.postMessage(r.highlight(C,r.languages[k],k)),y&&i.close()},!1)),r;var _=r.util.currentScript();_&&(r.filename=_.src,_.hasAttribute("data-manual")&&(r.manual=!0));function m(){r.manual||r.highlightAll()}if(!r.manual){var M=document.readyState;M==="loading"||M==="interactive"&&_&&_.defer?document.addEventListener("DOMContentLoaded",m):window.requestAnimationFrame?window.requestAnimationFrame(m):window.setTimeout(m,16)}return r}(e);s.exports&&(s.exports=t),typeof Us<"u"&&(Us.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(a,l){var n={};n["language-"+l]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[l]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+l]={pattern:/[\s\S]+/,inside:t.languages[l]};var o={};o[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:r},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(i,a){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:t.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(i){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var l=i.languages.markup;l&&(l.tag.addInlined("style","css"),l.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading…",a=function(_,m){return"✖ Error "+_+" while fetching file: "+m},l="✖ Error: File does not exist or is empty",n={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},r="data-src-status",o="loading",u="loaded",f="failed",d="pre[data-src]:not(["+r+'="'+u+'"]):not(['+r+'="'+o+'"])';function c(_,m,M){var g=new XMLHttpRequest;g.open("GET",_,!0),g.onreadystatechange=function(){g.readyState==4&&(g.status<400&&g.responseText?m(g.responseText):g.status>=400?M(a(g.status,g.statusText)):M(l))},g.send(null)}function E(_){var m=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(_||"");if(m){var M=Number(m[1]),g=m[2],h=m[3];return g?h?[M,Number(h)]:[M,void 0]:[M,M]}}t.hooks.add("before-highlightall",function(_){_.selector+=", "+d}),t.hooks.add("before-sanity-check",function(_){var m=_.element;if(m.matches(d)){_.code="",m.setAttribute(r,o);var M=m.appendChild(document.createElement("CODE"));M.textContent=i;var g=m.getAttribute("data-src"),h=_.language;if(h==="none"){var k=(/\.(\w+)$/.exec(g)||[,"none"])[1];h=n[k]||k}t.util.setLanguage(M,h),t.util.setLanguage(m,h);var C=t.plugins.autoloader;C&&C.loadLanguages(h),c(g,function(y){m.setAttribute(r,u);var A=E(m.getAttribute("data-range"));if(A){var N=y.split(/\r\n?|\n/g),P=A[0],O=A[1]==null?N.length:A[1];P<0&&(P+=N.length),P=Math.max(0,Math.min(P-1,N.length)),O<0&&(O+=N.length),O=Math.max(0,Math.min(O,N.length)),y=N.slice(P,O).join(`
`),m.hasAttribute("data-start")||m.setAttribute("data-start",String(P+1))}M.textContent=y,t.highlightElement(M)},function(y){m.setAttribute(r,f),M.textContent=y})}}),t.plugins.fileHighlight={highlight:function(m){for(var M=(m||document).querySelectorAll(d),g=0,h;h=M[g++];)t.highlightElement(h)}};var v=!1;t.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Un);var di=Un.exports;const Bn=fi(di),Bs="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+Bs+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+Bs+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",s=>{s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,t){const i={};i["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;const a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};a["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};const l={};l[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:a},Prism.languages.insertBefore("svelte","cdata",l)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function hi(s){let e,t;return{c(){e=new $n(!1),t=Ee(),this.h()},l(i){e=ei(i,!1),t=Ee(),this.h()},h(){e.a=t},m(i,a){e.m(s[2],i,a),B(i,t,a)},p(i,a){a&4&&e.p(i[2])},d(i){i&&(S(t),e.d())}}}function gi(s){let e;return{c(){e=Je(s[2])},l(t){e=$e(t,s[2])},m(t,i){B(t,e,i)},p(t,i){i&4&&ss(e,t[2])},d(t){t&&S(e)}}}function bi(s){let e,t,i,a,l,n,r;const o=s[6].default,u=Ln(o,s,s[5],null);function f(E,v){return E[0]==="none"?gi:hi}let d=f(s),c=d(s);return{c(){e=R("code"),u&&u.c(),t=j(),i=R("pre"),a=R("code"),c.c(),this.h()},l(E){e=D(E,"CODE",{style:!0});var v=U(e);u&&u.l(v),v.forEach(S),t=K(E),i=D(E,"PRE",{class:!0,"command-line":!0,"data-output":!0});var _=U(i);a=D(_,"CODE",{class:!0});var m=U(a);c.l(m),m.forEach(S),_.forEach(S),this.h()},h(){Be(e,"display","none"),p(a,"class",l="language-"+s[0]),p(i,"class",n="language-"+s[0]),p(i,"command-line",""),p(i,"data-output","2-17")},m(E,v){B(E,e,v),u&&u.m(e,null),s[7](e),B(E,t,v),B(E,i,v),T(i,a),c.m(a,null),r=!0},p(E,[v]){u&&u.p&&(!r||v&32)&&qn(u,o,E,E[5],r?On(o,E[5],v,null):In(E[5]),null),d===(d=f(E))&&c?c.p(E,v):(c.d(1),c=d(E),c&&(c.c(),c.m(a,null))),(!r||v&1&&l!==(l="language-"+E[0]))&&p(a,"class",l),(!r||v&1&&n!==(n="language-"+E[0]))&&p(i,"class",n)},i(E){r||(H(u,E),r=!0)},o(E){X(u,E),r=!1},d(E){E&&(S(e),S(t),S(i)),u&&u.d(E),s[7](null),c.d()}}}const Vs=Bn;Bn.highlightElement;const pi={transform:s=>s};function mi(s,e,t){let{$$slots:i={},$$scope:a}=e,{language:l="javascript"}=e,{source:n=""}=e,{transform:r=c=>c}=e,o,u;function f(){const c=Vs.languages[l];let E=n||o.textContent;E=pi.transform(E),E=r(E),t(2,u=l==="none"?E:Vs.highlight(E,c,l))}function d(c){x[c?"unshift":"push"](()=>{o=c,t(1,o)})}return s.$$set=c=>{t(9,e=xt(xt({},e),Ns(c))),"language"in c&&t(0,l=c.language),"source"in c&&t(3,n=c.source),"transform"in c&&t(4,r=c.transform),"$$scope"in c&&t(5,a=c.$$scope)},s.$$.update=()=>{e&&(n||o)&&f()},e=Ns(e),[l,o,u,n,r,a,i,d]}let vi=class extends Se{constructor(e){super(),Ce(this,e,mi,bi,Me,{language:0,source:3,transform:4})}};/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const qe="w",We="b",ye="p",Ss="n",Qt="b",Bt="r",bt="q",Pe="k",Es="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",je=-1,_i={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},Y={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},Z={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},ws={b:[16,32,17,15],w:[-16,-32,-17,-15]},Hs={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Ei=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],wi=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],ki={p:1,n:2,b:4,r:8,q:16,k:32},Mi="pnbrqkPNBRQK",js=[Ss,Qt,Bt,bt],Si=7,Ci=6,yi=1,Pi=0,Gt={[Pe]:Y.KSIDE_CASTLE,[bt]:Y.QSIDE_CASTLE},ht={w:[{square:Z.a1,flag:Y.QSIDE_CASTLE},{square:Z.h1,flag:Y.KSIDE_CASTLE}],b:[{square:Z.a8,flag:Y.QSIDE_CASTLE},{square:Z.h8,flag:Y.KSIDE_CASTLE}]},Ai={b:yi,w:Ci},Ti=["1-0","0-1","1/2-1/2","*"];function Mt(s){return s>>4}function Vt(s){return s&15}function Vn(s){return"0123456789".indexOf(s)!==-1}function Ke(s){const e=Vt(s),t=Mt(s);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function Ut(s){return s===qe?We:qe}function Li(s){const e=s.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const i=parseInt(e[4],10);if(isNaN(i)||i<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const a=e[0].split("/");if(a.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let n=0;n<a.length;n++){let r=0,o=!1;for(let u=0;u<a[n].length;u++)if(Vn(a[n][u])){if(o)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};r+=parseInt(a[n][u],10),o=!0}else{if(!/^[prnbqkPRNBQK]$/.test(a[n][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};r+=1,o=!1}if(r!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const l=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:n,regex:r}of l){if(!r.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${n} king`};if((e[0].match(r)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${n} kings`}}return{ok:!0}}function qi(s,e){const t=s.from,i=s.to,a=s.piece;let l=0,n=0,r=0;for(let o=0,u=e.length;o<u;o++){const f=e[o].from,d=e[o].to,c=e[o].piece;a===c&&t!==f&&i===d&&(l++,Mt(t)===Mt(f)&&n++,Vt(t)===Vt(f)&&r++)}return l>0?n>0&&r>0?Ke(t):r>0?Ke(t).charAt(1):Ke(t).charAt(0):""}function gt(s,e,t,i,a,l=void 0,n=Y.NORMAL){const r=Mt(i);if(a===ye&&(r===Si||r===Pi))for(let o=0;o<js.length;o++){const u=js[o];s.push({color:e,from:t,to:i,piece:a,captured:l,promotion:u,flags:n|Y.PROMOTION})}else s.push({color:e,from:t,to:i,piece:a,captured:l,flags:n})}function Ks(s){let e=s.charAt(0);return e>="a"&&e<="h"?s.match(/[a-h]\d.*[a-h]\d/)?void 0:ye:(e=e.toLowerCase(),e==="o"?Pe:e)}function ks(s){return s.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Ii{constructor(e=Es){L(this,"_board",new Array(128));L(this,"_turn",qe);L(this,"_header",{});L(this,"_kings",{w:je,b:je});L(this,"_epSquare",-1);L(this,"_halfMoves",0);L(this,"_moveNumber",0);L(this,"_history",[]);L(this,"_comments",{});L(this,"_castling",{w:0,b:0});this.load(e)}clear(e=!1){this._board=new Array(128),this._kings={w:je,b:je},this._turn=qe,this._castling={w:0,b:0},this._epSquare=je,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._updateSetup(this.fen())}removeHeader(e){e in this._header&&delete this._header[e]}load(e,t=!1){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const o=["-","-","0","1"];e=i.concat(o.slice(-(6-i.length))).join(" ")}i=e.split(/\s+/);const{ok:a,error:l}=Li(e);if(!a)throw new Error(l);const n=i[0];let r=0;this.clear(t);for(let o=0;o<n.length;o++){const u=n.charAt(o);if(u==="/")r+=8;else if(Vn(u))r+=parseInt(u,10);else{const f=u<"a"?qe:We;this.put({type:u.toLowerCase(),color:f},Ke(r)),r++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=Y.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=Y.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=Y.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=Y.QSIDE_CASTLE),this._epSquare=i[3]==="-"?je:Z[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._updateSetup(this.fen())}fen(){var l,n;let e=0,t="";for(let r=Z.a8;r<=Z.h1;r++){if(this._board[r]){e>0&&(t+=e,e=0);const{color:o,type:u}=this._board[r];t+=o===qe?u.toUpperCase():u.toLowerCase()}else e++;r+1&136&&(e>0&&(t+=e),r!==Z.h1&&(t+="/"),e=0,r+=8)}let i="";this._castling[qe]&Y.KSIDE_CASTLE&&(i+="K"),this._castling[qe]&Y.QSIDE_CASTLE&&(i+="Q"),this._castling[We]&Y.KSIDE_CASTLE&&(i+="k"),this._castling[We]&Y.QSIDE_CASTLE&&(i+="q"),i=i||"-";let a="-";if(this._epSquare!==je){const r=this._epSquare+(this._turn===qe?16:-16),o=[r+1,r-1];for(const u of o){if(u&136)continue;const f=this._turn;if(((l=this._board[u])==null?void 0:l.color)===f&&((n=this._board[u])==null?void 0:n.type)===ye){this._makeMove({color:f,from:u,to:this._epSquare,piece:ye,captured:ye,flags:Y.EP_CAPTURE});const d=!this._isKingAttacked(f);if(this._undoMove(),d){a=Ke(this._epSquare);break}}}}return[t,this._turn,i,a,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==Es?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(Es)}get(e){return this._board[Z[e]]||!1}put({type:e,color:t},i){if(Mi.indexOf(e.toLowerCase())===-1||!(i in Z))return!1;const a=Z[i];return e==Pe&&!(this._kings[t]==je||this._kings[t]==a)?!1:(this._board[a]={type:e,color:t},e===Pe&&(this._kings[t]=a),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}remove(e){const t=this.get(e);return delete this._board[Z[e]],t&&t.type===Pe&&(this._kings[t.color]=je),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){var i,a,l,n,r,o,u,f,d,c,E,v;const e=((i=this._board[Z.e1])==null?void 0:i.type)===Pe&&((a=this._board[Z.e1])==null?void 0:a.color)===qe,t=((l=this._board[Z.e8])==null?void 0:l.type)===Pe&&((n=this._board[Z.e8])==null?void 0:n.color)===We;(!e||((r=this._board[Z.a1])==null?void 0:r.type)!==Bt||((o=this._board[Z.a1])==null?void 0:o.color)!==qe)&&(this._castling.w&=~Y.QSIDE_CASTLE),(!e||((u=this._board[Z.h1])==null?void 0:u.type)!==Bt||((f=this._board[Z.h1])==null?void 0:f.color)!==qe)&&(this._castling.w&=~Y.KSIDE_CASTLE),(!t||((d=this._board[Z.a8])==null?void 0:d.type)!==Bt||((c=this._board[Z.a8])==null?void 0:c.color)!==We)&&(this._castling.b&=~Y.QSIDE_CASTLE),(!t||((E=this._board[Z.h8])==null?void 0:E.type)!==Bt||((v=this._board[Z.h8])==null?void 0:v.color)!==We)&&(this._castling.b&=~Y.KSIDE_CASTLE)}_updateEnPassantSquare(){var l,n;if(this._epSquare===je)return;const e=this._epSquare+(this._turn===qe?-16:16),t=this._epSquare+(this._turn===qe?16:-16),i=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((l=this._board[t])==null?void 0:l.color)!==Ut(this._turn)||((n=this._board[t])==null?void 0:n.type)!==ye){this._epSquare=je;return}const a=r=>{var o,u;return!(r&136)&&((o=this._board[r])==null?void 0:o.color)===this._turn&&((u=this._board[r])==null?void 0:u.type)===ye};i.some(a)||(this._epSquare=je)}_attacked(e,t){for(let i=Z.a8;i<=Z.h1;i++){if(i&136){i+=7;continue}if(this._board[i]===void 0||this._board[i].color!==e)continue;const a=this._board[i],l=i-t;if(l===0)continue;const n=l+119;if(Ei[n]&ki[a.type]){if(a.type===ye){if(l>0){if(a.color===qe)return!0}else if(a.color===We)return!0;continue}if(a.type==="n"||a.type==="k")return!0;const r=wi[n];let o=i+r,u=!1;for(;o!==t;){if(this._board[o]!=null){u=!0;break}o+=r}if(!u)return!0}}return!1}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(Ut(e),t)}isAttacked(e,t){return this._attacked(t,Z[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let i=0,a=0;for(let l=Z.a8;l<=Z.h1;l++){if(a=(a+1)%2,l&136){l+=7;continue}const n=this._board[l];n&&(e[n.type]=n.type in e?e[n.type]+1:1,n.type===Qt&&t.push(a),i++)}if(i===2)return!0;if(i===3&&(e[Qt]===1||e[Ss]===1))return!0;if(i===e[Qt]+2){let l=0;const n=t.length;for(let r=0;r<n;r++)l+=t[r];if(l===0||l===n)return!0}return!1}isThreefoldRepetition(){const e=[],t={};let i=!1;for(;;){const a=this._undoMove();if(!a)break;e.push(a)}for(;;){const a=this.fen().split(" ").slice(0,4).join(" ");t[a]=a in t?t[a]+1:1,t[a]>=3&&(i=!0);const l=e.pop();if(l)this._makeMove(l);else break}return i}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:i=void 0}={}){const a=this._moves({square:t,piece:i});return e?a.map(l=>this._makePretty(l)):a.map(l=>this._moveToSan(l,a))}_moves({legal:e=!0,piece:t=void 0,square:i=void 0}={}){var E;const a=i?i.toLowerCase():void 0,l=t==null?void 0:t.toLowerCase(),n=[],r=this._turn,o=Ut(r);let u=Z.a8,f=Z.h1,d=!1;if(a)if(a in Z)u=f=Z[a],d=!0;else return[];for(let v=u;v<=f;v++){if(v&136){v+=7;continue}if(!this._board[v]||this._board[v].color===o)continue;const{type:_}=this._board[v];let m;if(_===ye){if(l&&l!==_)continue;m=v+ws[r][0],this._board[m]||(gt(n,r,v,m,ye),m=v+ws[r][1],Ai[r]===Mt(v)&&!this._board[m]&&gt(n,r,v,m,ye,void 0,Y.BIG_PAWN));for(let M=2;M<4;M++)m=v+ws[r][M],!(m&136)&&(((E=this._board[m])==null?void 0:E.color)===o?gt(n,r,v,m,ye,this._board[m].type,Y.CAPTURE):m===this._epSquare&&gt(n,r,v,m,ye,ye,Y.EP_CAPTURE))}else{if(l&&l!==_)continue;for(let M=0,g=Hs[_].length;M<g;M++){const h=Hs[_][M];for(m=v;m+=h,!(m&136);){if(!this._board[m])gt(n,r,v,m,_);else{if(this._board[m].color===r)break;gt(n,r,v,m,_,this._board[m].type,Y.CAPTURE);break}if(_===Ss||_===Pe)break}}}}if((l===void 0||l===Pe)&&(!d||f===this._kings[r])){if(this._castling[r]&Y.KSIDE_CASTLE){const v=this._kings[r],_=v+2;!this._board[v+1]&&!this._board[_]&&!this._attacked(o,this._kings[r])&&!this._attacked(o,v+1)&&!this._attacked(o,_)&&gt(n,r,this._kings[r],_,Pe,void 0,Y.KSIDE_CASTLE)}if(this._castling[r]&Y.QSIDE_CASTLE){const v=this._kings[r],_=v-2;!this._board[v-1]&&!this._board[v-2]&&!this._board[v-3]&&!this._attacked(o,this._kings[r])&&!this._attacked(o,v-1)&&!this._attacked(o,_)&&gt(n,r,this._kings[r],_,Pe,void 0,Y.QSIDE_CASTLE)}}if(!e||this._kings[r]===-1)return n;const c=[];for(let v=0,_=n.length;v<_;v++)this._makeMove(n[v]),this._isKingAttacked(r)||c.push(n[v]),this._undoMove();return c}move(e,{strict:t=!1}={}){let i=null;if(typeof e=="string")i=this._moveFromSan(e,t);else if(typeof e=="object"){const l=this._moves();for(let n=0,r=l.length;n<r;n++)if(e.from===Ke(l[n].from)&&e.to===Ke(l[n].to)&&(!("promotion"in l[n])||e.promotion===l[n].promotion)){i=l[n];break}}if(!i)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const a=this._makePretty(i);return this._makeMove(i),a}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const t=this._turn,i=Ut(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&Y.EP_CAPTURE&&(this._turn===We?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===Pe){if(this._kings[t]=e.to,e.flags&Y.KSIDE_CASTLE){const a=e.to-1,l=e.to+1;this._board[a]=this._board[l],delete this._board[l]}else if(e.flags&Y.QSIDE_CASTLE){const a=e.to+1,l=e.to-2;this._board[a]=this._board[l],delete this._board[l]}this._castling[t]=0}if(this._castling[t]){for(let a=0,l=ht[t].length;a<l;a++)if(e.from===ht[t][a].square&&this._castling[t]&ht[t][a].flag){this._castling[t]^=ht[t][a].flag;break}}if(this._castling[i]){for(let a=0,l=ht[i].length;a<l;a++)if(e.to===ht[i][a].square&&this._castling[i]&ht[i][a].flag){this._castling[i]^=ht[i][a].flag;break}}e.flags&Y.BIG_PAWN?t===We?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=je,e.piece===ye?this._halfMoves=0:e.flags&(Y.CAPTURE|Y.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===We&&this._moveNumber++,this._turn=i}undo(){const e=this._undoMove();return e?this._makePretty(e):null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const i=this._turn,a=Ut(i);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)if(t.flags&Y.EP_CAPTURE){let l;i===We?l=t.to-16:l=t.to+16,this._board[l]={type:ye,color:a}}else this._board[t.to]={type:t.captured,color:a};if(t.flags&(Y.KSIDE_CASTLE|Y.QSIDE_CASTLE)){let l,n;t.flags&Y.KSIDE_CASTLE?(l=t.to+1,n=t.to-1):(l=t.to-2,n=t.to+1),this._board[l]=this._board[n],delete this._board[n]}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const i=[];let a=!1;for(const c in this._header)i.push("["+c+' "'+this._header[c]+'"]'+e),a=!0;a&&this._history.length&&i.push(e);const l=c=>{const E=this._comments[this.fen()];if(typeof E<"u"){const v=c.length>0?" ":"";c=`${c}${v}{${E}}`}return c},n=[];for(;this._history.length>0;)n.push(this._undoMove());const r=[];let o="";for(n.length===0&&r.push(l(""));n.length>0;){o=l(o);const c=n.pop();if(!c)break;if(!this._history.length&&c.color==="b"){const E=`${this._moveNumber}. ...`;o=o?`${o} ${E}`:E}else c.color==="w"&&(o.length&&r.push(o),o=this._moveNumber+".");o=o+" "+this._moveToSan(c,this._moves({legal:!0})),this._makeMove(c)}if(o.length&&r.push(l(o)),typeof this._header.Result<"u"&&r.push(this._header.Result),t===0)return i.join("")+r.join(" ");const u=function(){return i.length>0&&i[i.length-1]===" "?(i.pop(),!0):!1},f=function(c,E){for(const v of E.split(" "))if(v){if(c+v.length>t){for(;u();)c--;i.push(e),c=0}i.push(v),c+=v.length,i.push(" "),c++}return u()&&c--,c};let d=0;for(let c=0;c<r.length;c++){if(d+r[c].length>t&&r[c].includes("{")){d=f(d,r[c]);continue}d+r[c].length>t&&c!==0?(i[i.length-1]===" "&&i.pop(),i.push(e),d=0):c!==0&&(i.push(" "),d++),i.push(r[c]),d+=r[c].length}return i.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{strict:t=!1,newlineChar:i=`\r?
`}={}){function a(h){return h.replace(/\\/g,"\\")}function l(h){const k={},C=h.split(new RegExp(a(i)));let y="",A="";for(let N=0;N<C.length;N++){const P=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;y=C[N].replace(P,"$1"),A=C[N].replace(P,"$2"),y.trim().length>0&&(k[y]=A)}return k}e=e.trim();const r=new RegExp("^(\\[((?:"+a(i)+")|.)*\\])((?:\\s*"+a(i)+"){2}|(?:\\s*"+a(i)+")*$)").exec(e),o=r&&r.length>=2?r[1]:"";this.reset();const u=l(o);let f="";for(const h in u)h.toLowerCase()==="fen"&&(f=u[h]),this.header(h,u[h]);if(!t)f&&this.load(f,!0);else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,!0)}function d(h){return Array.from(h).map(function(k){return k.charCodeAt(0)<128?k.charCodeAt(0).toString(16):encodeURIComponent(k).replace(/%/g,"").toLowerCase()}).join("")}function c(h){return h.length==0?"":decodeURIComponent("%"+(h.match(/.{1,2}/g)||[]).join("%"))}const E=function(h){return h=h.replace(new RegExp(a(i),"g")," "),`{${d(h.slice(1,h.length-1))}}`},v=function(h){if(h.startsWith("{")&&h.endsWith("}"))return c(h.slice(1,h.length-1))};let _=e.replace(o,"").replace(new RegExp(`({[^}]*})+?|;([^${a(i)}]*)`,"g"),function(h,k,C){return k!==void 0?E(k):" "+E(`{${C.slice(1)}}`)}).replace(new RegExp(a(i),"g")," ");const m=/(\([^()]+\))+?/g;for(;m.test(_);)_=_.replace(m,"");_=_.replace(/\d+\.(\.\.)?/g,""),_=_.replace(/\.\.\./g,""),_=_.replace(/\$\d+/g,"");let M=_.trim().split(new RegExp(/\s+/));M=M.filter(h=>h!=="");let g="";for(let h=0;h<M.length;h++){const k=v(M[h]);if(k!==void 0){this._comments[this.fen()]=k;continue}const C=this._moveFromSan(M[h],t);if(C==null)if(Ti.indexOf(M[h])>-1)g=M[h];else throw new Error(`Invalid move in PGN: ${M[h]}`);else g="",this._makeMove(C)}g&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",g)}_moveToSan(e,t){let i="";if(e.flags&Y.KSIDE_CASTLE)i="O-O";else if(e.flags&Y.QSIDE_CASTLE)i="O-O-O";else{if(e.piece!==ye){const a=qi(e,t);i+=e.piece.toUpperCase()+a}e.flags&(Y.CAPTURE|Y.EP_CAPTURE)&&(e.piece===ye&&(i+=Ke(e.from)[0]),i+="x"),i+=Ke(e.to),e.promotion&&(i+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?i+="#":i+="+"),this._undoMove(),i}_moveFromSan(e,t=!1){const i=ks(e);let a=Ks(i),l=this._moves({legal:!0,piece:a});for(let c=0,E=l.length;c<E;c++)if(i===ks(this._moveToSan(l[c],l)))return l[c];if(t)return null;let n,r,o,u,f,d=!1;if(r=i.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),r?(n=r[1],o=r[2],u=r[3],f=r[4],o.length==1&&(d=!0)):(r=i.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),r&&(n=r[1],o=r[2],u=r[3],f=r[4],o.length==1&&(d=!0))),a=Ks(i),l=this._moves({legal:!0,piece:n||a}),!u)return null;for(let c=0,E=l.length;c<E;c++)if(o){if((!n||n.toLowerCase()==l[c].piece)&&Z[o]==l[c].from&&Z[u]==l[c].to&&(!f||f.toLowerCase()==l[c].promotion))return l[c];if(d){const v=Ke(l[c].from);if((!n||n.toLowerCase()==l[c].piece)&&Z[u]==l[c].to&&(o==v[0]||o==v[1])&&(!f||f.toLowerCase()==l[c].promotion))return l[c]}}else if(i===ks(this._moveToSan(l[c],l)).replace("x",""))return l[c];return null}ascii(){let e=`   +------------------------+
`;for(let t=Z.a8;t<=Z.h1;t++){if(Vt(t)===0&&(e+=" "+"87654321"[Mt(t)]+" |"),this._board[t]){const i=this._board[t].type,l=this._board[t].color===qe?i.toUpperCase():i.toLowerCase();e+=" "+l+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let i=0;const a=this._turn;for(let l=0,n=t.length;l<n;l++)this._makeMove(t[l]),this._isKingAttacked(a)||(e-1>0?i+=this.perft(e-1):i++),this._undoMove();return i}_makePretty(e){const{color:t,piece:i,from:a,to:l,flags:n,captured:r,promotion:o}=e;let u="";for(const E in Y)Y[E]&n&&(u+=_i[E]);const f=Ke(a),d=Ke(l),c={color:t,piece:i,from:f,to:d,san:this._moveToSan(e,this._moves({legal:!0})),flags:u,lan:f+d,before:this.fen(),after:""};return this._makeMove(e),c.after=this.fen(),this._undoMove(),r&&(c.captured=r),o&&(c.promotion=o,c.lan+=o),c}turn(){return this._turn}board(){const e=[];let t=[];for(let i=Z.a8;i<=Z.h1;i++)this._board[i]==null?t.push(null):t.push({square:Ke(i),type:this._board[i].type,color:this._board[i].color}),i+1&136&&(e.push(t),t=[],i+=8);return e}squareColor(e){if(e in Z){const t=Z[e];return(Mt(t)+Vt(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],i=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const a=t.pop();if(!a)break;e?i.push(this._makePretty(a)):i.push(this._moveToSan(a,this._moves())),this._makeMove(a)}return i}_pruneComments(){const e=[],t={},i=a=>{a in this._comments&&(t[a]=this._comments[a])};for(;this._history.length>0;)e.push(this._undoMove());for(i(this.fen());;){const a=e.pop();if(!a)break;this._makeMove(a),i(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const a of[Pe,bt])t[a]!==void 0&&(t[a]?this._castling[e]|=Gt[a]:this._castling[e]&=~Gt[a]);this._updateCastlingRights();const i=this.getCastlingRights(e);return(t[Pe]===void 0||t[Pe]===i[Pe])&&(t[bt]===void 0||t[bt]===i[bt])}getCastlingRights(e){return{[Pe]:(this._castling[e]&Gt[Pe])!==0,[bt]:(this._castling[e]&Gt[bt])!==0}}moveNumber(){return this._moveNumber}}class Oi{constructor(e){L(this,"boardTheme");L(this,"piecesTheme");L(this,"mouseEvents");L(this,"flipped");L(this,"notation");L(this,"startFen");L(this,"size");L(this,"scale");L(this,"resizible");L(this,"defaultState",{boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:Hi,size:0,scale:70,resizible:!1});L(this,"setConfigSettings",e=>{e!==void 0&&(e.boardTheme!==void 0&&(this.boardTheme=e.boardTheme),e.piecesTheme!==void 0&&(this.piecesTheme=e.piecesTheme),e.mouseEvents!==void 0&&(this.mouseEvents=e.mouseEvents),e.flipped!==void 0&&(this.flipped=e.flipped),e.notation!==void 0&&(this.notation=e.notation),e.startFen!==void 0&&(this.startFen=e.startFen),e.resizible!==void 0&&(this.resizible=e.resizible))});L(this,"getConfig",()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...this.resizible!==this.defaultState.resizible&&{resizible:this.resizible}};if(Object.keys(e).length!==0)return e});this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.scale=this.defaultState.scale,this.resizible=this.defaultState.resizible,this.setConfigSettings(e)}}class Fi{constructor(e){L(this,"enabled");L(this,"color");L(this,"defaultState",{enabled:!0,color:"BOTH"});L(this,"setConfigSettings",e=>{switch(e){case!0:this.enabled=!0,this.color="BOTH";break;case!1:this.enabled=!1;break;case"WHITE":this.enabled=!0,this.color="WHITE";break;case"BLACK":this.enabled=!0,this.color="BLACK";break}});L(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class Ni{constructor(e){L(this,"enabled");L(this,"ghostPiece");L(this,"transition");L(this,"defaultState",{enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}});L(this,"setConfigSettings",e=>{var t,i,a,l;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(t=e==null?void 0:e.transition)!=null&&t.duration&&(this.transition.settings.duration=(i=e==null?void 0:e.transition)==null?void 0:i.duration),(a=e==null?void 0:e.transition)!=null&&a.easing&&(this.transition.settings.easing=(l=e==null?void 0:e.transition)==null?void 0:l.easing)))))});L(this,"getConfig",()=>{const e={},t={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(t.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(t.easing=this.transition.settings.easing),Object.keys(t).length!==0&&(e.transition=t)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class Ri{constructor(e){L(this,"enabled");L(this,"selectedPiece");L(this,"defaultState",{enabled:!0,selectedPiece:void 0});L(this,"setConfigSettings",e=>{e!==void 0&&(this.enabled=e)});L(this,"getConfig",()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class Di{constructor(e){L(this,"enabled");L(this,"whiteToMove");L(this,"moves");L(this,"settings");L(this,"preMoves");L(this,"lastMove");L(this,"checkSquare");L(this,"defaultState",{enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!1,allowEnPassant:!1,allowCastling:!1},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0});L(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?(this.enabled=!0,this.settings.allowCastling=!0,this.settings.allowEnPassant=!0,this.settings.allowPromotion=!0):e===!1?this.enabled=!1:(e.enabled!==void 0&&(this.enabled=e.enabled),e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))});L(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled});this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class zi{constructor(e){L(this,"enabled");L(this,"settings");L(this,"defaultState",{enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}});L(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))});L(this,"getConfig",()=>{const e={},t=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(t.forEach(i=>{this.settings[i]!==this.defaultState.settings[i]&&(e[i]=this.settings[i])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class Ui{constructor(e){L(this,"enabled");L(this,"tools");L(this,"settings");L(this,"defaultState",{enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}});L(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.knightLShape!==void 0&&(this.settings.knightLShape=e.knightLShape),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))});L(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(e.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class Bi{constructor(e){L(this,"enabled");L(this,"settings");L(this,"defaultState",{enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}});L(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))});L(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class Vi{constructor(e){L(this,"getLegalMoves");L(this,"getPreMoves");L(this,"beforeMove");L(this,"afterMove");L(this,"getLastMove");L(this,"getInCheck");L(this,"getWhiteToMove");L(this,"defaultState",{getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0});L(this,"setConfigSettings",e=>{e!==void 0&&(e.getLegalMoves&&(this.getLegalMoves=e.getLegalMoves),e.getPreMoves&&(this.getPreMoves=e.getPreMoves),e.beforeMove&&(this.beforeMove=e.beforeMove),e.afterMove&&(this.afterMove=e.afterMove),e.getLastMove&&(this.getLastMove=e.getLastMove),e.getInCheck&&(this.getInCheck=e.getInCheck),e.getWhiteToMove&&(this.getWhiteToMove=e.getWhiteToMove))});L(this,"getConfig",()=>{const e={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(e).length>0?e:void 0});this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const Hi="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Hn{constructor(e){L(this,"pieces");L(this,"markedSquares");L(this,"board");L(this,"movable");L(this,"draggable");L(this,"selectable");L(this,"legal");L(this,"callbacks");L(this,"highlight");L(this,"drawTools");L(this,"sounds");L(this,"getConfig",()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}));this.pieces=[],this.markedSquares=new Set,this.board=new Oi(e==null?void 0:e.board),this.movable=new Fi(e==null?void 0:e.movable),this.draggable=new Ni(e==null?void 0:e.draggable),this.selectable=new Ri(e==null?void 0:e.selectable),this.legal=new Di(e==null?void 0:e.legal),this.callbacks=new Vi(e==null?void 0:e.callbacks),this.highlight=new zi(e==null?void 0:e.highlight),this.drawTools=new Ui(e==null?void 0:e.drawTools),this.sounds=new Bi(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){this.legalEnabled&&(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){this.preMovesEnabled&&(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.legal.preMoves.curMove}set currentPreMove(e){this.legal.preMoves.curMove=e}get selectableEnabled(){return this.selectable.enabled}get draggableEnabled(){return this.draggable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){this.legalEnabled&&(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4&&e!==""||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const ji=["a","b","c","d","e","f","g","h"],Ki=["8","7","6","5","4","3","2","1"];function Yt(s){return{x:ji.indexOf(s[0]),y:Ki.indexOf(s[1])}}function Cs(s){return s.charCodeAt(0)-97}function Wi(s){return 8-parseInt(s,10)}const Gi=s=>{let e="",t=0;for(let i=0;i<s.length;i++){i!==0&&(e+="/");for(let a=0;a<s[i].length;a++){const l=s[i][a];l!=null&&t===0?l[0]==="w"?e+=l[1]:e+=l[1].toLowerCase():l!=null&&t!==0?(e+=t.toString(),t=0,l[0]==="w"?e+=l[1]:e+=l[1].toLowerCase()):t++}t!==0&&(e+=t.toString(),t=0)}return e},Xi="8/8/8/8/8/8/8/8 w - - 0 1",wt=class wt{constructor(e){L(this,"letters",{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7});L(this,"state");L(this,"changeLegalHoverIfNeeded",e=>{e.color!=="LEGAL"&&e.color!=="PREMOVE"||this.state.pieces.forEach(t=>{t.square===e.square&&(e.color=e.color==="LEGAL"?"LEGALHOVER":"PREMOVEHOVER")})});L(this,"highlightSquare",(e,t)=>{const i={square:e,color:t};this.state.markedSquares.forEach(a=>{a.square===e&&a.color!=="MOVE"&&a.color!=="CHECK"&&this.state.markedSquares.delete(a)}),this.changeLegalHoverIfNeeded(i),this.state.markedSquares.add(i)});L(this,"legalHover",(e,t="LEGAL")=>{e!==void 0&&this.state.markedSquares.forEach(i=>{if(i.square===e&&i.color===t)i.color=t==="LEGAL"?"LEGALHOVER":"PREMOVEHOVER";else if(i.square!==e&&i.color===(t==="LEGAL"?"LEGALHOVER":"PREMOVEHOVER")){let a=!1;this.state.pieces.forEach(l=>{l.square===i.square&&(a=!0)}),a||(i.color=t)}})});L(this,"toggleSquareHighlight",(e,t)=>{const i={square:e,color:t};let a=!1;return this.state.markedSquares.forEach(l=>{l.square===e&&(this.state.markedSquares.delete(l),l.color===t&&(a=!0))}),this.changeLegalHoverIfNeeded(i),a?!0:(this.state.markedSquares.add(i),!1)});L(this,"getSelectedSquare",()=>{let e="";return this.state.markedSquares.forEach(t=>{t.color==="SELECT"&&(e=t.square)}),e});L(this,"clearSquare",(e,t)=>{e.length===2&&this.state.markedSquares.forEach(i=>{i.square===e&&(i.color===t||t===void 0)&&this.state.markedSquares.delete(i)})});L(this,"clearAllSquares",e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(t=>{t.color===e&&this.state.markedSquares.delete(t)})});L(this,"setPiece",(e,t)=>{if(wt.notValidThing({square:e,piece:t}))return;const i=this.state.pieces.find(a=>a.square===e);i?i.name=t:this.state.pieces.push({square:e,name:t})});L(this,"removePiece",e=>{wt.notValidThing({square:e})||this.state.pieces.forEach((t,i)=>{t.square===e&&this.state.pieces.splice(i,1)})});L(this,"clearAllPieces",()=>{this.state.pieces.length=0});L(this,"getGridCoordsFromSquare",e=>{if(wt.notValidThing({square:e}))return{x:0,y:0};const t=e[0],i=e[1],a=this.state.board.flipped?Math.abs(this.letters[t]-7):this.letters[t],l=this.state.board.flipped?Math.abs(parseInt(i,10)-8):parseInt(i,10)-1;return typeof a!="number"||l<0||l>7?{x:0,y:0}:{x:a,y:l}});L(this,"makeMove",e=>{if(wt.notValidThing({move:e}))return;let t=!1,i;const a=e.substring(0,2),l=e.substring(2,4),n=e.substring(4);this.state.pieces.forEach(r=>{r.square===l&&(i=r,this.removePiece(r.square))}),this.state.pieces.forEach(r=>{r.square===a&&(r.square=l,t=!0,n&&(r.name=r.name[0]+n.toUpperCase()))}),t?this.state.legal.lastMove=e:i&&this.state.pieces.push(i)});L(this,"getSquareFromIndices",(e,t)=>`${Object.keys(this.letters)[e]}${(t+1).toString()}`);L(this,"updatePiecesWithFen",e=>{const t=[...Array(8)].map(()=>Array(8).fill(null)),i=["1","2","3","4","5","6","7","8"];let a=0,l=0;for(let o=0;o<(e.includes(" ")?e.indexOf(" "):e.length);o++)if(e[o]==="/")a++,l=0;else if(!i.includes(e[o]))e[o]===e[o].toUpperCase()?t[a][l]=`w${e[o]}`:t[a][l]=`b${e[o].toUpperCase()}`,l++;else for(let u=0;u<parseInt(e[o],10);u++)t[a][l]=null,l++;const n=[],r=[];for(let o=0;o<t.length;++o)for(let u=0;u<t.length;++u){const f=t[o][u],d=this.getPieceFromSquare(this.getSquareFromIndices(u,Math.abs(o-7)));f&&!d&&n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:f}),!f&&d&&r.push(d),f&&d&&f!==d.name&&(n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:f}),r.push(d))}for(let o=0;o<r.length;o++)for(let u=0;u<n.length;u++)!n[u]||!r[o]||n[u].name===r[o].name&&(r[o].square=n[u].square,r.splice(o,1),o--,n.splice(u,1),u--);n.forEach(o=>{this.state.pieces.push(o)}),r.forEach(o=>{this.state.pieces.splice(this.state.pieces.indexOf(o),1)})});L(this,"setGhostPiece",e=>{this.state.draggable.ghostPiece.piece=e});L(this,"removeGhostPiece",()=>{this.state.draggable.ghostPiece.piece=void 0});L(this,"isCastling",e=>{const t=e.slice(0,2),i=this.getPieceFromSquare(t);return!i||i.name[1]!=="K"?!1:e==="e1g1"||e==="e1c1"||e==="e8g8"||e==="e8c8"});L(this,"getRookMoveIfIsCastling",e=>{if(!this.isCastling(e))return null;switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return null}});L(this,"isEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const t=this.getPieceFromSquare(e.substring(0,2));return!(t===void 0||t.name!=="wP"&&t.name!=="bP")});L(this,"getCapturedPawnSquareIfIsEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const t=this.getPieceFromSquare(e.substring(0,2));if(t===void 0||t.name!=="wP"&&t.name!=="bP")return;const i=`${e[2]}${(parseInt(e[3],10)+(t.name==="wP"?-1:1)).toString()}`;if(this.state.legal.lastMove.substring(2,4)!==i)return;const a=this.getPieceFromSquare(i);if(!(!a||a.name[1]!=="P")&&Math.abs(parseInt(this.state.legal.lastMove[1],10)-parseInt(this.state.legal.lastMove[3],10))===2)return i});L(this,"isCapture",e=>!!this.getPieceFromSquare(e.substring(2,4)));L(this,"isPromotion",e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const t=this.getPieceFromSquare(e.substring(0,2));return!(t&&(t.name[1]!=="P"||t.name[0]==="w"&&e[3]==="1"||t.name[0]==="b"&&e[3]==="8"))});L(this,"callbackExists",e=>this.state.callbacks[e]!==void 0);L(this,"flipBoard",e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped});L(this,"setConfigSettings",e=>{this.state.setConfigSettings(e)});this.state=new Hn(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const e=this.state.pieces.find(t=>t.name==="wK");if(e)return e.square}getBlackKingSquare(){const e=this.state.pieces.find(t=>t.name==="bK");if(e)return e.square}getShortFEN(){if(this.state.pieces.length===0)return Xi;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(t=>{e[Wi(t.square[1])][Cs(t.square[0])]=t.name}),Gi(e)}getPieceFromSquare(e){if(e)return this.state.pieces.find(t=>t.square===e)}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get draggableEnabled(){return this.state.draggableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}};L(wt,"notValidThing",e=>{const{square:t,piece:i,move:a}=e;return!!(t&&t.length!==2||i&&i.length!==2||a&&a.length!==4&&a.length!==5)});let ys=wt;const Qi={LEGAL:"legal cursor-pointer",LEGALHOVER:"legal-h cursor-pointer",SELECT:"select",MOVE:"move",NEXTMOVE:"nextMove",PREMOVE:"preMove cursor-pointer",PREMOVEHOVER:"preMove-h cursor-pointer",CHECK:"check"},Yi={white:"#f0d9b5",black:"#b58863"},xi="standard.svg",Zi={LEGAL:"legal cursor-pointer",LEGALHOVER:"legal-h cursor-pointer",SELECT:"select-db",MOVE:"move-db",NEXTMOVE:"nextMove",PREMOVE:"preMove cursor-pointer",PREMOVEHOVER:"preMove-h cursor-pointer",CHECK:"check"},Ji={white:"#94A3B8",black:"#475569"},$i="darkBlue.svg",Ge={squareStyles:{standard:Qi,darkBlue:Zi},colors:{standard:Yi,darkBlue:Ji},imageName:{standard:xi,darkBlue:$i}};function Ws(s,e,t){const i=s.slice();return i[6]=e[t],i[8]=t,i}function Gs(s,e,t){const i=s.slice();return i[6]=e[t],i[8]=t,i}function Xs(s){let e,t=s[4][s[1]?Math.abs(s[8]-7):s[8]]+"",i,a;return{c(){e=R("span"),i=Je(t),a=j(),this.h()},l(l){e=D(l,"SPAN",{"data-file":!0,style:!0,class:!0});var n=U(e);i=$e(n,t),a=K(n),n.forEach(S),this.h()},h(){p(e,"data-file",s[6]),Be(e,"--font-size",s[3]+"px"),Be(e,"color",s[8]%2===0?Ge.colors[s[0]].white:Ge.colors[s[0]].black),p(e,"class","svelte-2dna4v")},m(l,n){B(l,e,n),T(e,i),T(e,a)},p(l,n){n&2&&t!==(t=l[4][l[1]?Math.abs(l[8]-7):l[8]]+"")&&ss(i,t),n&8&&Be(e,"--font-size",l[3]+"px"),n&1&&Be(e,"color",l[8]%2===0?Ge.colors[l[0]].white:Ge.colors[l[0]].black)},d(l){l&&S(e)}}}function Qs(s){let e,t=(s[1]?s[8]+1:Math.abs(s[8]-8))+"",i,a,l;return{c(){e=R("span"),i=Je(t),a=j(),this.h()},l(n){e=D(n,"SPAN",{"data-file":!0,style:!0,class:!0});var r=U(e);i=$e(r,t),a=K(r),r.forEach(S),this.h()},h(){p(e,"data-file",s[6]),p(e,"style",l="--font-size: "+s[3]+"px; color: "+(s[8]%2===0?Ge.colors[s[0]].white:Ge.colors[s[0]].black)+";"+(s[1]?" text-align: right;":"")),p(e,"class","svelte-2dna4v")},m(n,r){B(n,e,r),T(e,i),T(e,a)},p(n,r){r&2&&t!==(t=(n[1]?n[8]+1:Math.abs(n[8]-8))+"")&&ss(i,t),r&11&&l!==(l="--font-size: "+n[3]+"px; color: "+(n[8]%2===0?Ge.colors[n[0]].white:Ge.colors[n[0]].black)+";"+(n[1]?" text-align: right;":""))&&p(e,"style",l)},d(n){n&&S(e)}}}function ea(s){let e,t,i,a,l=Ae(s[4]),n=[];for(let u=0;u<l.length;u+=1)n[u]=Xs(Gs(s,l,u));let r=Ae(s[4]),o=[];for(let u=0;u<r.length;u+=1)o[u]=Qs(Ws(s,r,u));return{c(){e=R("div");for(let u=0;u<n.length;u+=1)n[u].c();t=j(),i=R("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=D(u,"DIV",{class:!0});var f=U(e);for(let c=0;c<n.length;c+=1)n[c].l(f);f.forEach(S),t=K(u),i=D(u,"DIV",{class:!0});var d=U(i);for(let c=0;c<o.length;c+=1)o[c].l(d);d.forEach(S),this.h()},h(){p(e,"class","files svelte-2dna4v"),p(i,"class","ranks svelte-2dna4v"),St(()=>s[5].call(i))},m(u,f){B(u,e,f);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);B(u,t,f),B(u,i,f);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(i,null);a=ti(i,s[5].bind(i))},p(u,[f]){if(f&27){l=Ae(u[4]);let d;for(d=0;d<l.length;d+=1){const c=Gs(u,l,d);n[d]?n[d].p(c,f):(n[d]=Xs(c),n[d].c(),n[d].m(e,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=l.length}if(f&27){r=Ae(u[4]);let d;for(d=0;d<r.length;d+=1){const c=Ws(u,r,d);o[d]?o[d].p(c,f):(o[d]=Qs(c),o[d].c(),o[d].m(i,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=r.length}},i:me,o:me,d(u){u&&(S(e),S(t),S(i)),pt(n,u),pt(o,u),a()}}}function ta(s,e,t){let i,{theme:a}=e,{flipped:l}=e;const n=["a","b","c","d","e","f","g","h"];let r;function o(){r=this.clientHeight,t(2,r)}return s.$$set=u=>{"theme"in u&&t(0,a=u.theme),"flipped"in u&&t(1,l=u.flipped)},s.$$.update=()=>{s.$$.dirty&4&&t(3,i=Math.floor(Math.log(r/8)*3))},[a,l,r,i,n,o]}class sa extends Se{constructor(e){super(),Ce(this,e,ta,ea,Me,{theme:0,flipped:1})}}function Ys(s){return Object.prototype.toString.call(s)==="[object Date]"}function na(s){const e=2.5949095;return(s*=2)<1?.5*(s*s*((e+1)*s-e)):.5*((s-=2)*s*((e+1)*s+e)+2)}function ia(s){return s*s*((1.70158+1)*s-1.70158)}function aa(s){return--s*s*((1.70158+1)*s+1.70158)+1}function $t(s){const e=.36363636363636365,t=8/11,i=9/10,a=4356/361,l=35442/1805,n=16061/1805,r=s*s;return s<e?7.5625*r:s<t?9.075*r-9.9*s+3.4:s<i?a*r-l*s+n:10.8*s*s-20.52*s+10.72}function ra(s){return s<.5?.5*(1-$t(1-s*2)):.5*$t(s*2-1)+.5}function la(s){return 1-$t(1-s)}function oa(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)}function ua(s){return 1-Math.sqrt(1-s*s)}function ca(s){return Math.sqrt(1- --s*s)}function fa(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function da(s){return s*s*s}function Fs(s){const e=s-1;return e*e*e+1}function ha(s){return s<.5?.5*Math.sin(13*Math.PI/2*2*s)*Math.pow(2,10*(2*s-1)):.5*Math.sin(-13*Math.PI/2*(2*s-1+1))*Math.pow(2,-10*(2*s-1))+1}function ga(s){return Math.sin(13*s*Math.PI/2)*Math.pow(2,10*(s-1))}function ba(s){return Math.sin(-13*(s+1)*Math.PI/2)*Math.pow(2,-10*s)+1}function pa(s){return s===0||s===1?s:s<.5?.5*Math.pow(2,20*s-10):-.5*Math.pow(2,10-s*20)+1}function ma(s){return s===0?s:Math.pow(2,10*(s-1))}function va(s){return s===1?s:1-Math.pow(2,-10*s)}function _a(s){return s/=.5,s<1?.5*s*s:(s--,-.5*(s*(s-2)-1))}function Ea(s){return s*s}function wa(s){return-s*(s-2)}function ka(s){return s<.5?8*Math.pow(s,4):-8*Math.pow(s-1,4)+1}function Ma(s){return Math.pow(s,4)}function Sa(s){return Math.pow(s-1,3)*(1-s)+1}function Ca(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)}function ya(s){return s*s*s*s*s}function Pa(s){return--s*s*s*s*s+1}function Aa(s){return-.5*(Math.cos(Math.PI*s)-1)}function Ta(s){const e=Math.cos(s*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function La(s){return Math.sin(s*Math.PI/2)}const es=Object.freeze(Object.defineProperty({__proto__:null,backIn:ia,backInOut:na,backOut:aa,bounceIn:la,bounceInOut:ra,bounceOut:$t,circIn:ua,circInOut:oa,circOut:ca,cubicIn:da,cubicInOut:fa,cubicOut:Fs,elasticIn:ga,elasticInOut:ha,elasticOut:ba,expoIn:ma,expoInOut:pa,expoOut:va,linear:Fn,quadIn:Ea,quadInOut:_a,quadOut:wa,quartIn:Ma,quartInOut:ka,quartOut:Sa,quintIn:ya,quintInOut:Ca,quintOut:Pa,sineIn:Ta,sineInOut:Aa,sineOut:La},Symbol.toStringTag,{value:"Module"}));function Ps(s,e){if(s===e||s!==s)return()=>s;const t=typeof s;if(t!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const i=e.map((a,l)=>Ps(s[l],a));return a=>i.map(l=>l(a))}if(t==="object"){if(!s||!e)throw new Error("Object cannot be null");if(Ys(s)&&Ys(e)){s=s.getTime(),e=e.getTime();const l=e-s;return n=>new Date(s+n*l)}const i=Object.keys(e),a={};return i.forEach(l=>{a[l]=Ps(s[l],e[l])}),l=>{const n={};return i.forEach(r=>{n[r]=a[r](l)}),n}}if(t==="number"){const i=e-s;return a=>s+a*i}throw new Error(`Cannot interpolate ${t} values`)}function qa(s,e={}){const t=ci(s);let i,a=s;function l(n,r){if(s==null)return t.set(s=n),Promise.resolve();a=n;let o=i,u=!1,{delay:f=0,duration:d=400,easing:c=Fn,interpolate:E=Ps}=xt(xt({},e),r);if(d===0)return o&&(o.abort(),o=null),t.set(s=a),Promise.resolve();const v=ri()+f;let _;return i=li(m=>{if(m<v)return!0;u||(_=E(s,n),typeof d=="function"&&(d=d(s,n)),u=!0),o&&(o.abort(),o=null);const M=m-v;return M>d?(t.set(s=n),!1):(t.set(s=_(c(M/d))),!0)}),i.promise}return{set:l,update:(n,r)=>l(n(a,s),r),subscribe:t.subscribe}}function Ms(s,e,t,i){if(e===0&&t===0)return s;const a=i?["h","g","f","e","d","c","b","a"]:["a","b","c","d","e","f","g","h"],l=i?["1","2","3","4","5","6","7","8"]:["8","7","6","5","4","3","2","1"],n=a[a.indexOf(s[0])+e],r=l[l.indexOf(s[1])+t];if(!(!n||!r))return`${n}${r}`}function Ia(s,e,t){const i=e*1.15,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),l=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",`${s.offsetWidth*i}`),a.setAttribute("height",`${s.offsetHeight*i}`),a.style.position="absolute",a.style.zIndex="100",a.style.translate=`${t?"":"-"}${25*i/2}% -${25*i/2}%`,a.style.opacity="0.2",a.style.pointerEvents="none",l.setAttribute("r",`${s.offsetWidth*i/2}`),l.setAttribute("cx",`${s.offsetWidth*i/2}`),l.setAttribute("cy",`${s.offsetHeight*i/2}`),l.setAttribute("fill","black"),a.appendChild(l),a}function Oa(s,e){let t,i,a,l,n,r,o,u,f=!1,d;const c=s.parentNode;let E,v=!1,_=!1,m=!1,{startSquare:M,boardFlipped:g,mouseEvents:h,canDrag:k,canSelect:C,canCapture:y,duration:A,easingFunc:N}=e;const{coords:P}=e;let O=Rs(P).x,z=Rs(P).y;const W=1.6,le=Ia(s,W,g);function be(w){if(w.button!==0||!w.isPrimary||!h)return;if(w.pointerType==="touch"?m=!0:m=!1,y){s.dispatchEvent(new CustomEvent("captured"));return}if((C||k)&&s.dispatchEvent(new CustomEvent("clicked")),!k){s.dispatchEvent(new CustomEvent("dropped",{detail:M}));return}O=(g?7-Cs(M[0]):Cs(M[0]))*c.clientWidth/8,z=(g?parseInt(M[1],10)-1:8-parseInt(M[1],10))*c.clientWidth/8,E=M;const $=w.target.getBoundingClientRect();w.pointerType==="touch"?(t=w.clientX,i=w.clientY,a=w.clientX-$.x,l=w.clientY-$.y):(t=w.clientX,i=w.clientY,a=w.offsetX,l=w.offsetY),n=0,r=0,o=window.scrollX,u=window.scrollY,_=!0,window.addEventListener("pointermove",_e),window.addEventListener("pointerup",V),window.addEventListener("pointercancel",G),document.body.addEventListener("pointerleave",G),window.addEventListener("scroll",se)}function _e(w){const $=w.clientX-t,te=w.clientY-i;if(t=w.clientX,i=w.clientY,n+=$,r+=te,f||J(m),!!f){if(m){const he=Math.floor((n+a)/s.offsetWidth),Fe=Math.floor((r+l)/s.offsetHeight),Ne=Ms(M,he,Fe,g);if(Ne){const pe=Yt(Ne);le.setAttribute("r",`${s.offsetWidth*W*1.15/2}`),le.setAttribute("cx",`${s.offsetWidth*W*1.15/2}`),le.setAttribute("cy",`${s.offsetHeight*W*1.15/2}`);const Te=(g?(7-pe.x)*c.clientWidth/8:pe.x*c.clientWidth/8)-s.offsetWidth*W*1.15/2+s.offsetWidth/2,ke=(g?(7-pe.y)*c.clientWidth/8:pe.y*c.clientWidth/8)-s.offsetWidth*W*1.15/2+s.offsetWidth/2;le.style.translate=`${Te}px ${ke}px`,v||(c.appendChild(le),v=!0)}else E&&(E=void 0)}P.update(he=>({x:he.x+$,y:he.y+te,scale:m?W:1}),{duration:0}),E=ge()}}function se(){const w=window.scrollX-o,$=window.scrollY-u;o=window.scrollX,u=window.scrollY,n+=w,r+=$,f||J(m),f&&(P.update(te=>({x:te.x+w,y:te.y+$,scale:m?W:1}),{duration:0}),E=ge())}function ge(){const w=Ms(M,Math.floor((n+a)/s.offsetWidth),Math.floor((r+l)/s.offsetHeight),g);return w!==E&&s.dispatchEvent(new CustomEvent("squareover",{detail:{square:w}})),w}function V(){const w=Math.floor((n+a)/s.offsetWidth),$=Math.floor((r+l)/s.offsetHeight),te=Ms(M,w,$,g);s.dispatchEvent(new CustomEvent("dropped",{detail:te})),_=!1,G()}function G(){window.removeEventListener("pointermove",_e),window.removeEventListener("pointerup",V),window.removeEventListener("pointercancel",G),document.body.removeEventListener("pointerleave",G),window.removeEventListener("scroll",se),_&&s.dispatchEvent(new CustomEvent("canceled")),_=!1,P.update(()=>({x:O,y:z,scale:1}),{duration:A,easing:N}).then(()=>{_||s.classList.remove("dragging")}),t=0,i=0,n=0,r=0,setTimeout(()=>{_||s.classList.remove("dragging")},A),f=!1,le.remove(),v=!1}function J(w=!1){P.update(()=>({x:O,y:z,scale:1}),{duration:0}),(Math.abs(n)>1||Math.abs(r)>1)&&(P.update(()=>({x:O+(t-s.offsetWidth/2-s.getBoundingClientRect().x),y:w?z+(i-s.offsetHeight*1.5-s.getBoundingClientRect().y):z+(i-s.offsetHeight/2-s.getBoundingClientRect().y),scale:w?W:1}),{duration:0}),f=!0,s.classList.add("dragging"),s.dispatchEvent(new CustomEvent("startMoving")))}function de(w){_&&G(),w.preventDefault()}function q(w){w.preventDefault()}return s.addEventListener("contextmenu",de),s.addEventListener("dragstart",q),s.addEventListener("pointerdown",be),{destroy(){s.removeEventListener("pointerdown",be),s.removeEventListener("contextmenu",de),s.removeEventListener("dragstart",q),window.clearTimeout(d)},update(w){M=w.startSquare,A=w.duration,N=w.easingFunc,w.canDrag!==k&&(k=w.canDrag),w.canSelect!==C&&(C=w.canSelect),w.canCapture!==y&&(y=w.canCapture),w.mouseEvents!==h&&(h=w.mouseEvents),g=w.boardFlipped}}}function Fa(s){let e,t,i,a,l,n;return{c(){e=R("div"),this.h()},l(r){e=D(r,"DIV",{style:!0,class:!0}),U(e).forEach(S),this.h()},h(){var r;p(e,"style",t="translate: "+s[11].x+"px "+s[11].y+"px;"+(s[11].scale!==1?` scale: ${s[11].scale}`:"")),p(e,"class",i=s[2]+(s[2][0]==="w"?" white":" black")+(s[4]?" ghost":"")+(!((r=s[6])!=null&&r.enabled)&&!s[4]?" static":"")+(s[10]?"":" opacity-0")+(s[9]?" capture":"")+" svelte-1chvf31")},m(r,o){var u,f;B(r,e,o),l||(n=[qs(a=Oa.call(null,e,{startSquare:s[1],mouseEvents:s[0],canDrag:s[7],canSelect:s[8],canCapture:s[9],boardFlipped:s[3],duration:(u=s[5])!=null&&u.transition.enabled?s[5].transition.settings.duration:0,easingFunc:es[((f=s[5])==null?void 0:f.transition.settings.easing)??"cubicInOut"],coords:s[13]})),ee(e,"dropped",s[14]),ee(e,"clicked",s[19]),ee(e,"startMoving",s[20]),ee(e,"captured",s[21]),ee(e,"canceled",s[22]),ee(e,"squareover",s[23])],l=!0)},p(r,o){var u,f,d;o[0]&2048&&t!==(t="translate: "+r[11].x+"px "+r[11].y+"px;"+(r[11].scale!==1?` scale: ${r[11].scale}`:""))&&p(e,"style",t),o[0]&1620&&i!==(i=r[2]+(r[2][0]==="w"?" white":" black")+(r[4]?" ghost":"")+(!((u=r[6])!=null&&u.enabled)&&!r[4]?" static":"")+(r[10]?"":" opacity-0")+(r[9]?" capture":"")+" svelte-1chvf31")&&p(e,"class",i),a&&Is(a.update)&&o[0]&939&&a.update.call(null,{startSquare:r[1],mouseEvents:r[0],canDrag:r[7],canSelect:r[8],canCapture:r[9],boardFlipped:r[3],duration:(f=r[5])!=null&&f.transition.enabled?r[5].transition.settings.duration:0,easingFunc:es[((d=r[5])==null?void 0:d.transition.settings.easing)??"cubicInOut"],coords:r[13]})},i:me,o:me,d(r){r&&S(e),l=!1,et(n)}}}function Na(s,e,t){var de;let i,{square:a}=e,{name:l}=e,{mouseEvents:n=!0}=e,{getGridCoordsFromSquare:r}=e,{flipped:o}=e,{isGhost:u=!1}=e,{boardSize:f}=e;u&&(n=!1);let{selectableState:d=void 0}=e,{draggableState:c=void 0}=e,{legalState:E=void 0}=e,{movableState:v=void 0}=e,_=!1,m=!1,M=!1,g=!1;const h=Ht();let k=(de=c==null?void 0:c.transition)!=null&&de.enabled?c.transition.settings.duration:0;const C=qa({x:0,y:0,scale:1},{duration:k,easing:es[(c==null?void 0:c.transition.settings.easing)??"cubicInOut"]});si(s,C,q=>t(11,i=q));let y=!1;const A=q=>q[0]==="w"?"WHITE":"BLACK",N=q=>{const w=r(q);C.update(()=>({x:w.x*f/8,y:(7-w.y)*f/8,scale:1}),{duration:y?k:0,easing:es[(c==null?void 0:c.transition.settings.easing)??"cubicInOut"]}),k=c!=null&&c.transition.enabled?c.transition.settings.duration:0},P=q=>{const w=r(a);C.update(()=>({x:w.x*q/8,y:(7-w.y)*q/8,scale:1}),{duration:0})},O=q=>{k=0,q.detail||h("deselect"),a===q.detail?(!_&&le(v,d)?h("select"):h("deselect"),_=!_):_=!1,W(v,c)&&h("endDragging",a+q.detail),a!==q.detail&&q.detail&&h("move",a+q.detail)},z=q=>E!=null&&E.enabled?!!(E.preMoves.enabled&&A(l)===q.color||q.color==="WHITE"&&E.whiteToMove&&A(l)==="WHITE"||q.color==="BLACK"&&!E.whiteToMove&&A(l)==="BLACK"||q.color==="BOTH"&&(A(l)==="WHITE"&&E.whiteToMove||A(l)==="BLACK"&&!E.whiteToMove)):q.color===A(l)||q.color==="BOTH",W=(q,w)=>!(q!=null&&q.enabled)||!(w!=null&&w.enabled)||!n?!1:z(q),le=(q,w)=>!(q!=null&&q.enabled)||!(w!=null&&w.enabled)||!n?!1:z(q),be=(q,w,$)=>{var te,he;return!(w!=null&&w.enabled)||!($!=null&&$.enabled)||!n?!1:q!=null&&q.enabled?!!((d==null?void 0:d.selectedPiece)!==void 0&&((te=d==null?void 0:d.selectedPiece)==null?void 0:te.square)!==a&&(q.moves.includes(d.selectedPiece.square+a)||q.moves.includes(`${d.selectedPiece.square+a}q`))||(d==null?void 0:d.selectedPiece)!==void 0&&q.preMoves.enabled&&A(d==null?void 0:d.selectedPiece.name)===w.color&&(q.preMoves.moves.includes(d.selectedPiece.square+a)||q.preMoves.moves.includes(`${d.selectedPiece.square+a}q`))):(d==null?void 0:d.selectedPiece)!==void 0&&((he=d==null?void 0:d.selectedPiece)==null?void 0:he.square)!==a},_e=q=>q===void 0||q.name!==l||q.square!==a;ns(()=>{t(10,y=!0)});function se(q){Qe.call(this,s,q)}function ge(q){Qe.call(this,s,q)}function V(q){Qe.call(this,s,q)}function G(q){Qe.call(this,s,q)}const J=q=>{h("squareover",q.detail)};return s.$$set=q=>{"square"in q&&t(1,a=q.square),"name"in q&&t(2,l=q.name),"mouseEvents"in q&&t(0,n=q.mouseEvents),"getGridCoordsFromSquare"in q&&t(15,r=q.getGridCoordsFromSquare),"flipped"in q&&t(3,o=q.flipped),"isGhost"in q&&t(4,u=q.isGhost),"boardSize"in q&&t(16,f=q.boardSize),"selectableState"in q&&t(17,d=q.selectableState),"draggableState"in q&&t(5,c=q.draggableState),"legalState"in q&&t(18,E=q.legalState),"movableState"in q&&t(6,v=q.movableState)},s.$$.update=()=>{s.$$.dirty[0]&96&&t(7,m=W(v,c)),s.$$.dirty[0]&131136&&t(8,M=le(v,d)),s.$$.dirty[0]&393280&&t(9,g=be(E,v,d)),s.$$.dirty[0]&131072&&_e(d==null?void 0:d.selectedPiece)&&(_=!1),s.$$.dirty[0]&10&&N(a),s.$$.dirty[0]&65536&&P(f)},[n,a,l,o,u,c,v,m,M,g,y,i,h,C,O,r,f,d,E,se,ge,V,G,J]}class jn extends Se{constructor(e){super(),Ce(this,e,Na,Fa,Me,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:15,flipped:3,isGhost:4,boardSize:16,selectableState:17,draggableState:5,legalState:18,movableState:6},null,[-1,-1])}}function Ra(s){let e,t,i;return{c(){e=R("div"),this.h()},l(a){e=D(a,"DIV",{style:!0,class:!0}),U(e).forEach(S),this.h()},h(){p(e,"style",t="translate: "+s[5]*s[3]/8+"px "+(7-s[6])*s[3]/8+"px;"+(s[4]?` border-${s[4]}-radius: inherit;`:"")),p(e,"class",i=Ge.squareStyles[s[1]][s[0]]+(s[2]?"":" pointer-events-none")+" svelte-183l4qv")},m(a,l){B(a,e,l)},p(a,[l]){l&120&&t!==(t="translate: "+a[5]*a[3]/8+"px "+(7-a[6])*a[3]/8+"px;"+(a[4]?` border-${a[4]}-radius: inherit;`:""))&&p(e,"style",t),l&7&&i!==(i=Ge.squareStyles[a[1]][a[0]]+(a[2]?"":" pointer-events-none")+" svelte-183l4qv")&&p(e,"class",i)},i:me,o:me,d(a){a&&S(e)}}}function Da(s,e,t){let{square:i}=e,{color:a}=e,{getGridCoordsFromSquare:l}=e,{flipped:n}=e,{theme:r}=e,{mouseEvents:o=!0}=e,{boardSize:u}=e,{corner:f=""}=e,d,c;const E=()=>{const v=l(i);t(5,d=v.x),t(6,c=v.y)};return s.$$set=v=>{"square"in v&&t(7,i=v.square),"color"in v&&t(0,a=v.color),"getGridCoordsFromSquare"in v&&t(8,l=v.getGridCoordsFromSquare),"flipped"in v&&t(9,n=v.flipped),"theme"in v&&t(1,r=v.theme),"mouseEvents"in v&&t(2,o=v.mouseEvents),"boardSize"in v&&t(3,u=v.boardSize),"corner"in v&&t(4,f=v.corner)},s.$$.update=()=>{s.$$.dirty&512&&E()},[a,r,o,u,f,d,c,i,l,n]}class za extends Se{constructor(e){super(),Ce(this,e,Da,Ra,Me,{square:7,color:0,getGridCoordsFromSquare:8,flipped:9,theme:1,mouseEvents:2,boardSize:3,corner:4})}}const Ua=["a","b","c","d","e","f","g","h"],Ba=["8","7","6","5","4","3","2","1"];function Va(s){s.querySelectorAll("[fixed]").forEach(e=>e.remove())}function As(s){return`${Ua[s.x]}${Ba[s.y]}`}function Kn(s,e){return Math.abs((s.x-e.x)*(s.y-e.y))===2}function Ts(s,e){return`${As(s)}${As(e)}`}function Ha(s,e){return!!(Kn(s,e)||Math.abs(s.x-e.x)===Math.abs(s.y-e.y)||s.x===e.x!=(s.y===e.y))}function Wn(s,e,t,i,a,l){let n={x:-1,y:-1},r,o;Kn(e,t)&&i?(Math.abs(t.x-e.x)===2?n={x:t.x,y:e.y}:n={x:e.x,y:t.y},n.y-e.y<0?o=Math.PI+Math.atan((n.x-e.x)/(n.y-e.y)):o=Math.atan((n.x-e.x)/Math.abs(n.y-e.y)),r={x:t.x-Math.sign(t.x-n.x)*(n.x!==t.x?.4:0),y:t.y-Math.sign(t.y-n.y)*(n.y!==t.y?.4:0)}):(t.y-e.y<0?o=Math.PI+Math.atan((t.x-e.x)/(t.y-e.y)):o=Math.atan((t.x-e.x)/Math.abs(t.y-e.y)),r={x:t.x-Math.sin(o)*.4,y:t.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};s.setAttribute("points",`${u.x+.5},${u.y+.5} ${n.x!==-1&&n.y!==-1&&i?`${n.x+.5},${n.y+.5} `:""}${r.x+.5},${r.y+.5}`),s.setAttribute("data-sqID",`${Ts(e,t)}`),l!==void 0&&s.setAttribute("opacity",`${l}`),a!==void 0&&(s.setAttribute("marker-start",`url(#start-${a[0]})`),s.setAttribute("marker-end",`url(#end-${a[0]})`),s.setAttribute("stroke",a))}function Xt(s,e,t,i,a,l){if(!(e===void 0||t.x===-1&&t.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),i?e.setAttribute("stroke","red"):a?e.setAttribute("stroke","orange"):l?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),s.querySelectorAll(`сircle[cx="${t.x+.5}"][cy="${t.y+.5}"]`).forEach(n=>{e!==void 0&&n!==e&&(n.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const n=i?"red":a?"orange":l?"blue":"green";e.setAttribute("stroke",`${n}`),e.setAttribute("marker-start",`url(#start-${n[0]})`),e.setAttribute("marker-end",`url(#end-${n[0]})`),s.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(r=>{e instanceof SVGPolylineElement&&r!==e&&(r.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function Gn(s,e,t,i,a){const l=document.createElementNS("http://www.w3.org/2000/svg","polyline");return Wn(l,s,e,t,i,a),l.setAttribute("fill","none"),l.setAttribute("stroke-width","0.25"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("opacity",a!==void 0?`${a}`:"0.4"),l.setAttribute("marker-start",i?`url(#start-${i[0]})`:"url(#start-g)"),l.setAttribute("marker-end",i?`url(#end-${i[0]})`:"url(#end-g)"),l.setAttribute("stroke",i||"green"),l}function Ls(s,e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",`${s.x+.5}`),i.setAttribute("cy",`${s.y+.5}`),i.setAttribute("r","0.465"),i.setAttribute("opacity",t?`${t}`:"0.4"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.07"),i.setAttribute("stroke",e??"green"),i}function ja(s,e,t){e.forEach(i=>{if(i.type==="circle"){const a=Yt(i.square),l=Ls(a,i.color,i.opacity);s.appendChild(l)}else if(i.type==="arrow"){const a=Gn(Yt(i.from),Yt(i.to),t,i.color,i.opacity);a.setAttribute("fixed",""),s.appendChild(a)}})}function xs(s){s.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("fixed")||e.remove()})}function Ka(s,e){let{svg:t,flipped:i,enabled:a,settings:l}=e,n=!1,r={x:-1,y:-1},o,u;function f(m,M){const g=s.getBoundingClientRect(),h=i?g.width-(m-g.left):m-g.left,k=i?g.height-(M-g.top):M-g.top;return{x:Math.max(0,Math.min(7,Math.floor(h/(s.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(k/(s.clientHeight/8))))}}function d(m){if(u===void 0||r.x===-1&&r.y===-1)return;const M=f(m.clientX,m.clientY);l.onlyChessMove&&!Ha(r,M)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),r.x===M.x&&r.y===M.y?(Ts(r,M),u instanceof SVGPolylineElement&&(u.remove(),u=Ls(M)),Xt(t,u,r,m.shiftKey,m.ctrlKey,m.altKey),t.appendChild(u),t.querySelectorAll(`circle[cx="${r.x+.5}"][cy="${r.y+.5}"]`).forEach(g=>{g!==u&&(o=g,u!==void 0&&g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,t.querySelectorAll(`polyline[data-sqID="${Ts(r,M)}"]`).forEach(g=>{u===void 0||r.x===-1&&r.y===-1||g===u||(o=g,g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=Gn(r,M,l.knightLShape),Xt(t,u,r,m.shiftKey,m.ctrlKey,m.altKey),t.appendChild(u)):u instanceof SVGPolylineElement&&Wn(u,r,M,l.knightLShape)))}function c(m){m.preventDefault()}function E(m){m.preventDefault(),Xt(t,u,r,m.shiftKey,m.ctrlKey,m.altKey)}function v(m){if(m.button===0)n=!1;else if(m.button===2){if(r.x===-1&&r.y===-1)return;t.querySelectorAll("[remove]").forEach(M=>{M.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:As(r),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,r={x:-1,y:-1},n=!1,window.removeEventListener("mousemove",d),window.removeEventListener("keydown",E),window.removeEventListener("keyup",E),window.removeEventListener("contextmenu",c)}window.removeEventListener("mouseup",v)}function _(m){if(m.button===0)n=!0,xs(t),window.addEventListener("mouseup",v);else if(m.button===2&&!n){const M=f(m.clientX,m.clientY);r=M,u=Ls(M),Xt(t,u,r,m.shiftKey,m.ctrlKey,m.altKey),o=void 0,t.querySelectorAll(`circle[cx="${M.x+.5}"][cy="${M.y+.5}"]`).forEach(g=>{o=g,u!==void 0&&g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&t.appendChild(u),window.addEventListener("mousemove",d),window.addEventListener("mouseup",v),window.addEventListener("keydown",E),window.addEventListener("keyup",E),window.addEventListener("contextmenu",c)}}return a&&s.addEventListener("mousedown",_),{update(m){m.svg!==t&&(t=m.svg),m.enabled!==a&&(a=m.enabled,a?s.addEventListener("mousedown",_):(xs(t),s.removeEventListener("mousedown",_))),l=m.settings,i=m.flipped}}}function Zs(s,e,t){const i=s.slice();return i[8]=e[t],i}function Js(s){let e,t,i,a;return{c(){e=Ie("marker"),t=Ie("path"),i=Ie("marker"),a=Ie("path"),this.h()},l(l){e=Oe(l,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var n=U(e);t=Oe(n,"path",{fill:!0,d:!0}),U(t).forEach(S),n.forEach(S),i=Oe(l,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var r=U(i);a=Oe(r,"path",{fill:!0,d:!0}),U(a).forEach(S),r.forEach(S),this.h()},h(){p(t,"fill",s[8]),p(t,"d","M 0 5 v 10 c 0 2.8 2.2 5 5 5 L 6 20 V 0 L 5 0 C 2.2 0 0 2.2 0 5 z"),p(e,"id","start-"+s[8][0]),p(e,"viewBox","0 0 5 20"),p(e,"refX","4"),p(e,"refY","10"),p(e,"markerUnits","strokeWidth"),p(e,"markerWidth","0.5"),p(e,"markerHeight","1"),p(e,"orient","auto"),p(a,"fill",s[8]),p(a,"d","M 9.5 9.5 l -8.7 -5 C 0.5 4.3 0 4.6 0 5 v 10 c 0 0.4 0.5 0.7 0.9 0.5 l 8.7 -5 C 9.9 10.3 9.9 9.7 9.5 9.5 z"),p(i,"id","end-"+s[8][0]),p(i,"viewBox","0 0 10 20"),p(i,"refX","0.2"),p(i,"refY","10"),p(i,"markerUnits","strokeWidth"),p(i,"orient","auto"),p(i,"fill","currentColor")},m(l,n){B(l,e,n),T(e,t),B(l,i,n),T(i,a)},p:me,d(l){l&&(S(e),S(i))}}}function Wa(s){let e,t,i,a=Ae(s[2]),l=[];for(let n=0;n<a.length;n+=1)l[n]=Js(Zs(s,a,n));return{c(){e=Ie("svg"),t=Ie("defs");for(let n=0;n<l.length;n+=1)l[n].c();i=Ie("g"),this.h()},l(n){e=Oe(n,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var r=U(e);t=Oe(r,"defs",{});var o=U(t);for(let u=0;u<l.length;u+=1)l[u].l(o);o.forEach(S),i=Oe(r,"g",{}),U(i).forEach(S),r.forEach(S),this.h()},h(){p(e,"xmlns","http://www.w3.org/2000/svg"),Be(e,"transform","rotate("+(s[1]?"180deg":"0deg")+")"),p(e,"viewBox","0 0 8 8"),p(e,"class","svelte-d96ma4")},m(n,r){B(n,e,r),T(e,t);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,null);T(e,i),s[5](i)},p(n,[r]){if(r&4){a=Ae(n[2]);let o;for(o=0;o<a.length;o+=1){const u=Zs(n,a,o);l[o]?l[o].p(u,r):(l[o]=Js(u),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}r&2&&Be(e,"transform","rotate("+(n[1]?"180deg":"0deg")+")")},i:me,o:me,d(n){n&&S(e),pt(l,n),s[5](null)}}}function Ga(s,e,t){let{flipped:i=!1}=e,{svg:a}=e,{knightLShape:l=!1}=e,{tools:n=[]}=e,r=!1;function o(d){r&&(Va(a),ja(a,d,l))}ns(()=>{r=!0,o(n)});const u=["green","red","blue","orange"];function f(d){x[d?"unshift":"push"](()=>{a=d,t(0,a)})}return s.$$set=d=>{"flipped"in d&&t(1,i=d.flipped),"svg"in d&&t(0,a=d.svg),"knightLShape"in d&&t(3,l=d.knightLShape),"tools"in d&&t(4,n=d.tools)},s.$$.update=()=>{s.$$.dirty&16&&o(n)},[a,i,u,l,n,f]}class Xa extends Se{constructor(e){super(),Ce(this,e,Ga,Wa,Me,{flipped:1,svg:0,knightLShape:3,tools:4})}}function $s(s,{delay:e=0,duration:t=400,easing:i=Fs,x:a=0,y:l=0,opacity:n=0}={}){const r=getComputedStyle(s),o=+r.opacity,u=r.transform==="none"?"":r.transform,f=o*(1-n),[d,c]=Ds(a),[E,v]=Ds(l);return{delay:e,duration:t,easing:i,css:(_,m)=>`
			transform: ${u} translate(${(1-_)*d}${c}, ${(1-_)*E}${v});
			opacity: ${o-f*m}`}}function ts(s,{delay:e=0,duration:t=400,easing:i=Fs,axis:a="y"}={}){const l=getComputedStyle(s),n=+l.opacity,r=a==="y"?"height":"width",o=parseFloat(l[r]),u=a==="y"?["top","bottom"]:["left","right"],f=u.map(M=>`${M[0].toUpperCase()}${M.slice(1)}`),d=parseFloat(l[`padding${f[0]}`]),c=parseFloat(l[`padding${f[1]}`]),E=parseFloat(l[`margin${f[0]}`]),v=parseFloat(l[`margin${f[1]}`]),_=parseFloat(l[`border${f[0]}Width`]),m=parseFloat(l[`border${f[1]}Width`]);return{delay:e,duration:t,easing:i,css:M=>`overflow: hidden;opacity: ${Math.min(M*20,1)*n};${r}: ${M*o}px;padding-${u[0]}: ${M*d}px;padding-${u[1]}: ${M*c}px;margin-${u[0]}: ${M*E}px;margin-${u[1]}: ${M*v}px;border-${u[0]}-width: ${M*_}px;border-${u[1]}-width: ${M*m}px;`}}function Qa(s){let e,t,i,a;return{c(){e=R("button"),t=R("div"),this.h()},l(l){e=D(l,"BUTTON",{class:!0});var n=U(e);t=D(n,"DIV",{class:!0}),U(t).forEach(S),n.forEach(S),this.h()},h(){p(t,"class","piece "+s[0]+" svelte-rp9lvv"),p(e,"class","svelte-rp9lvv")},m(l,n){B(l,e,n),T(e,t),i||(a=ee(e,"click",s[1]),i=!0)},p:me,i:me,o:me,d(l){l&&S(e),i=!1,a()}}}function Ya(s,e,t){let{piece:i}=e,{isWhite:a}=e,{showModal:l}=e;const n=Ht(),r=(a?"w":"b")+i.toUpperCase(),o=()=>{n("newPromotion",i),t(2,l=!1)};return s.$$set=u=>{"piece"in u&&t(3,i=u.piece),"isWhite"in u&&t(4,a=u.isWhite),"showModal"in u&&t(2,l=u.showModal)},[r,o,l,i,a]}class xa extends Se{constructor(e){super(),Ce(this,e,Ya,Qa,Me,{piece:3,isWhite:4,showModal:2})}}function en(s,e,t){const i=s.slice();return i[7]=e[t],i}function tn(s){let e,t,i,a,l,n,r=Ae(["q","r","b","n"]),o=[];for(let f=0;f<4;f+=1)o[f]=sn(en(s,r,f));const u=f=>X(o[f],1,1,()=>{o[f]=null});return{c(){e=R("div"),t=R("div");for(let f=0;f<4;f+=1)o[f].c();this.h()},l(f){e=D(f,"DIV",{class:!0});var d=U(e);t=D(d,"DIV",{class:!0});var c=U(t);for(let E=0;E<4;E+=1)o[E].l(c);c.forEach(S),d.forEach(S),this.h()},h(){p(t,"class","modal-content svelte-1ms2fdt"),p(e,"class",l="modal "+s[0]+" svelte-1ms2fdt")},m(f,d){B(f,e,d),T(e,t);for(let c=0;c<4;c+=1)o[c]&&o[c].m(t,null);n=!0},p(f,d){if(d&6){r=Ae(["q","r","b","n"]);let c;for(c=0;c<4;c+=1){const E=en(f,r,c);o[c]?(o[c].p(E,d),H(o[c],1)):(o[c]=sn(E),o[c].c(),H(o[c],1),o[c].m(t,null))}for(ze(),c=4;c<4;c+=1)u(c);Ue()}(!n||d&1&&l!==(l="modal "+f[0]+" svelte-1ms2fdt"))&&p(e,"class",l)},i(f){if(!n){for(let d=0;d<4;d+=1)H(o[d]);f&&St(()=>{n&&(a&&a.end(1),i=oi(t,$s,{x:100,duration:300}),i.start())}),n=!0}},o(f){o=o.filter(Boolean);for(let d=0;d<4;d+=1)X(o[d]);i&&i.invalidate(),f&&(a=ui(t,$s,{x:-200,duration:100})),n=!1},d(f){f&&S(e),pt(o,f),f&&a&&a.end()}}}function sn(s){let e,t,i,a;function l(o){s[4](o)}function n(o){s[5](o)}let r={piece:s[7]};return s[2]!==void 0&&(r.isWhite=s[2]),s[1]!==void 0&&(r.showModal=s[1]),e=new xa({props:r}),x.push(()=>ae(e,"isWhite",l)),x.push(()=>ae(e,"showModal",n)),e.$on("newPromotion",s[6]),{c(){oe(e.$$.fragment)},l(o){ue(e.$$.fragment,o)},m(o,u){ce(e,o,u),a=!0},p(o,u){const f={};!t&&u&4&&(t=!0,f.isWhite=o[2],ie(()=>t=!1)),!i&&u&2&&(i=!0,f.showModal=o[1],ie(()=>i=!1)),e.$set(f)},i(o){a||(H(e.$$.fragment,o),a=!0)},o(o){X(e.$$.fragment,o),a=!1},d(o){fe(e,o)}}}function Za(s){let e,t,i=s[1]&&tn(s);return{c(){i&&i.c(),e=Ee()},l(a){i&&i.l(a),e=Ee()},m(a,l){i&&i.m(a,l),B(a,e,l),t=!0},p(a,[l]){a[1]?i?(i.p(a,l),l&2&&H(i,1)):(i=tn(a),i.c(),H(i,1),i.m(e.parentNode,e)):i&&(ze(),X(i,1,1,()=>{i=null}),Ue())},i(a){t||(H(i),t=!0)},o(a){X(i),t=!1},d(a){a&&S(e),i&&i.d(a)}}}function Ja(s,e,t){let i=!1,a,{className:l=""}=e;function n(f){t(1,i=!0),f?t(2,a=!0):t(2,a=!1)}function r(f){a=f,t(2,a)}function o(f){i=f,t(1,i)}function u(f){Qe.call(this,s,f)}return s.$$set=f=>{"className"in f&&t(0,l=f.className)},[l,i,a,n,r,o,u]}class $a extends Se{constructor(e){super(),Ce(this,e,Ja,Za,Me,{className:0,openPromotionModal:3})}get openPromotionModal(){return this.$$.ctx[3]}}const er=""+new URL("../assets/move.e4d827fe.wav",import.meta.url).href,tr=""+new URL("../assets/capture.3dff493a.wav",import.meta.url).href,sr=""+new URL("../assets/castle.dcf4b2c5.wav",import.meta.url).href,nr=""+new URL("../assets/undo.b4184324.mp3",import.meta.url).href;function nn(s){let e,t=`<track kind="captions"/><source src="${er}"/>`;return{c(){e=R("audio"),e.innerHTML=t,this.h()},l(i){e=D(i,"AUDIO",{preload:!0,"data-svelte-h":!0}),we(e)!=="svelte-965mdm"&&(e.innerHTML=t),this.h()},h(){p(e,"preload","auto")},m(i,a){B(i,e,a),s[3](e)},p:me,d(i){i&&S(e),s[3](null)}}}function an(s){let e,t=`<track kind="captions"/><source src="${tr}"/>`;return{c(){e=R("audio"),e.innerHTML=t,this.h()},l(i){e=D(i,"AUDIO",{preload:!0,"data-svelte-h":!0}),we(e)!=="svelte-yx772y"&&(e.innerHTML=t),this.h()},h(){p(e,"preload","auto")},m(i,a){B(i,e,a),s[4](e)},p:me,d(i){i&&S(e),s[4](null)}}}function rn(s){let e,t=`<track kind="captions"/><source src="${sr}"/>`;return{c(){e=R("audio"),e.innerHTML=t,this.h()},l(i){e=D(i,"AUDIO",{preload:!0,"data-svelte-h":!0}),we(e)!=="svelte-1g92guo"&&(e.innerHTML=t),this.h()},h(){p(e,"preload","auto")},m(i,a){B(i,e,a),s[5](e)},p:me,d(i){i&&S(e),s[5](null)}}}function ln(s){let e,t=`<track kind="captions"/><source src="${nr}"/>`;return{c(){e=R("audio"),e.innerHTML=t,this.h()},l(i){e=D(i,"AUDIO",{preload:!0,"data-svelte-h":!0}),we(e)!=="svelte-e2b5hc"&&(e.innerHTML=t),this.h()},h(){p(e,"preload","auto")},m(i,a){B(i,e,a),s[6](e)},p:me,d(i){i&&S(e),s[6](null)}}}function ir(s){let e,t,i,a,l=s[0].MOVE&&nn(s),n=s[0].CAPTURE&&an(s),r=s[0].CASTLE&&rn(s),o=s[0].UNDO&&ln(s);return{c(){l&&l.c(),e=j(),n&&n.c(),t=j(),r&&r.c(),i=j(),o&&o.c(),a=Ee()},l(u){l&&l.l(u),e=K(u),n&&n.l(u),t=K(u),r&&r.l(u),i=K(u),o&&o.l(u),a=Ee()},m(u,f){l&&l.m(u,f),B(u,e,f),n&&n.m(u,f),B(u,t,f),r&&r.m(u,f),B(u,i,f),o&&o.m(u,f),B(u,a,f)},p(u,[f]){u[0].MOVE?l?l.p(u,f):(l=nn(u),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),u[0].CAPTURE?n?n.p(u,f):(n=an(u),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null),u[0].CASTLE?r?r.p(u,f):(r=rn(u),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null),u[0].UNDO?o?o.p(u,f):(o=ln(u),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:me,o:me,d(u){u&&(S(e),S(t),S(i),S(a)),l&&l.d(u),n&&n.d(u),r&&r.d(u),o&&o.d(u)}}}function ar(s,e,t){let{settings:i}=e;const a={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},l=()=>{a.CASTLE&&(a.CASTLE.pause(),t(1,a.CASTLE.currentTime=0,a)),a.MOVE&&(a.MOVE.pause(),t(1,a.MOVE.currentTime=0,a)),a.CAPTURE&&(a.CAPTURE.pause(),t(1,a.CAPTURE.currentTime=0,a)),a.UNDO&&(a.UNDO.pause(),t(1,a.UNDO.currentTime=0,a))},n=c=>c===void 0||i[c];function r(c){switch(l(),c){case"MOVE":a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CAPTURE":a.CAPTURE&&n("CAPTURE")?a.CAPTURE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CASTLE":a.CASTLE&&n("CASTLE")?a.CASTLE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"UNDO":a.UNDO&&n("UNDO")?(t(1,a.UNDO.volume=.3,a),a.UNDO.play()):a.MOVE&&n("MOVE")&&a.MOVE.play();break}}function o(c){x[c?"unshift":"push"](()=>{a.MOVE=c,t(1,a)})}function u(c){x[c?"unshift":"push"](()=>{a.CAPTURE=c,t(1,a)})}function f(c){x[c?"unshift":"push"](()=>{a.CASTLE=c,t(1,a)})}function d(c){x[c?"unshift":"push"](()=>{a.UNDO=c,t(1,a)})}return s.$$set=c=>{"settings"in c&&t(0,i=c.settings)},[i,a,r,o,u,f,d]}let rr=class extends Se{constructor(e){super(),Ce(this,e,ar,ir,Me,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}};const on=""+new URL("../assets/standard.97995bf9.svg",import.meta.url).href,un=""+new URL("../assets/darkBlue.02863507.svg",import.meta.url).href;function lr(s,e){let{mouseEvents:t}=e,i=e.curScale,a,l,n;function r(f){f.stopPropagation(),s.dispatchEvent(new CustomEvent("resizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(f.pageX-a)/3)),Math.max(0,Math.min(100,n+(f.pageY-l)/3))))}}))}function o(f){f.stopPropagation(),s.dispatchEvent(new CustomEvent("endResizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(f.pageX-a)/3)),Math.max(0,Math.min(100,n+(f.pageY-l)/3))))}})),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",o)}function u(f){t&&(f.stopPropagation(),f.button===0&&(a=f.pageX,l=f.pageY,n=i,window.addEventListener("pointermove",r),window.addEventListener("pointerup",o)))}return s.addEventListener("pointerdown",u),{update(f){i=f.curScale,t!==f.mouseEvents&&(t=f.mouseEvents)},destroy(){s.removeEventListener("mousedown",u)}}}function or(s){let e,t,i,a,l,n,r;return{c(){e=R("div"),t=Ie("svg"),i=Ie("path"),this.h()},l(o){e=D(o,"DIV",{style:!0,class:!0});var u=U(e);t=Oe(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var f=U(t);i=Oe(f,"path",{d:!0}),U(i).forEach(S),f.forEach(S),u.forEach(S),this.h()},h(){p(i,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),p(t,"xmlns","http://www.w3.org/2000/svg"),p(t,"viewBox","0 0 16 16"),p(t,"fill","currentColor"),Be(e,"color",Ge.colors[s[0].state.board.boardTheme].black),p(e,"class",a=Zt(s[1]?"cursor-nwse-resize":"")+" svelte-1rxhlfj")},m(o,u){B(o,e,u),T(e,t),T(t,i),n||(r=[ee(e,"pointerdown",Nn(s[3])),qs(l=lr.call(null,e,{mouseEvents:s[1],curScale:s[0].state.board.scale})),ee(e,"resizing",s[4]),ee(e,"endResizing",s[5])],n=!0)},p(o,[u]){u&1&&Be(e,"color",Ge.colors[o[0].state.board.boardTheme].black),u&2&&a!==(a=Zt(o[1]?"cursor-nwse-resize":"")+" svelte-1rxhlfj")&&p(e,"class",a),l&&Is(l.update)&&u&3&&l.update.call(null,{mouseEvents:o[1],curScale:o[0].state.board.scale})},i:me,o:me,d(o){o&&S(e),n=!1,et(r)}}}function ur(s,e,t){const i=Ht();let{chessboard:a}=e,{mouseEvents:l=!0}=e;function n(u){Qe.call(this,s,u)}const r=u=>i("resizing",u.detail.scale),o=u=>i("endResizing",u.detail.scale);return s.$$set=u=>{"chessboard"in u&&t(0,a=u.chessboard),"mouseEvents"in u&&t(1,l=u.mouseEvents)},[a,l,i,n,r,o]}class cr extends Se{constructor(e){super(),Ce(this,e,ur,or,Me,{chessboard:0,mouseEvents:1})}}const fr=s=>{if(s[0]===s[0].toLowerCase())return s;switch(s){case"LEGAL":case"LEGALHOVER":return"legal";case"CHECK":return"check";case"MOVE":return"move";case"NEXTMOVE":return"nextMove";case"PREMOVE":case"PREMOVEHOVER":return"preMove";case"SELECT":return"select";default:return"check"}};function cn(s,e,t){const i=s.slice();return i[85]=e[t],i}function fn(s,e,t){const i=s.slice();return i[88]=e[t],i}function dn(s){let e=[],t=new Map,i,a,l=Ae(s[6].state.pieces);const n=r=>r[88];for(let r=0;r<l.length;r+=1){let o=fn(s,l,r),u=n(o);t.set(u,e[r]=hn(u,o))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();i=Ee()},l(r){for(let o=0;o<e.length;o+=1)e[o].l(r);i=Ee()},m(r,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(r,o);B(r,i,o),a=!0},p(r,o){o[0]&905292&&(l=Ae(r[6].state.pieces),ze(),e=zn(e,o,n,1,r,l,t,i.parentNode,Dn,hn,i,fn),Ue())},i(r){if(!a){for(let o=0;o<l.length;o+=1)H(e[o]);a=!0}},o(r){for(let o=0;o<e.length;o+=1)X(e[o]);a=!1},d(r){r&&S(i);for(let o=0;o<e.length;o+=1)e[o].d(r)}}}function hn(s,e){let t,i,a;function l(){return e[59](e[88])}function n(){return e[60](e[88])}function r(...f){return e[61](e[88],...f)}function o(){return e[63](e[88])}function u(){return e[66](e[88])}return i=new jn({props:{square:e[88].square,name:e[88].name,boardSize:e[6].state.board.size,mouseEvents:e[6].state.board.mouseEvents,legalState:e[6].state.legal,draggableState:e[6].state.draggable,selectableState:e[6].state.selectable,movableState:e[6].state.movable,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped}}),i.$on("move",e[14]),i.$on("clicked",l),i.$on("startMoving",n),i.$on("squareover",r),i.$on("endDragging",e[62]),i.$on("select",o),i.$on("canceled",e[64]),i.$on("deselect",e[65]),i.$on("captured",u),{key:s,first:null,c(){t=Ee(),oe(i.$$.fragment),this.h()},l(f){t=Ee(),ue(i.$$.fragment,f),this.h()},h(){this.first=t},m(f,d){B(f,t,d),ce(i,f,d),a=!0},p(f,d){e=f;const c={};d[0]&64&&(c.square=e[88].square),d[0]&64&&(c.name=e[88].name),d[0]&64&&(c.boardSize=e[6].state.board.size),d[0]&64&&(c.mouseEvents=e[6].state.board.mouseEvents),d[0]&64&&(c.legalState=e[6].state.legal),d[0]&64&&(c.draggableState=e[6].state.draggable),d[0]&64&&(c.selectableState=e[6].state.selectable),d[0]&64&&(c.movableState=e[6].state.movable),d[0]&64&&(c.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),d[0]&64&&(c.flipped=e[6].flipped),i.$set(c)},i(f){a||(H(i.$$.fragment,f),a=!0)},o(f){X(i.$$.fragment,f),a=!1},d(f){f&&S(t),fe(i,f)}}}function gn(s){let e,t;return e=new jn({props:{isGhost:!0,boardSize:s[6].state.board.size,square:s[6].ghostPiece.square,name:s[6].ghostPiece.name,getGridCoordsFromSquare:s[6].getGridCoordsFromSquare,flipped:s[6].flipped}}),{c(){oe(e.$$.fragment)},l(i){ue(e.$$.fragment,i)},m(i,a){ce(e,i,a),t=!0},p(i,a){const l={};a[0]&64&&(l.boardSize=i[6].state.board.size),a[0]&64&&(l.square=i[6].ghostPiece.square),a[0]&64&&(l.name=i[6].ghostPiece.name),a[0]&64&&(l.getGridCoordsFromSquare=i[6].getGridCoordsFromSquare),a[0]&64&&(l.flipped=i[6].flipped),e.$set(l)},i(i){t||(H(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function bn(s){let e=[],t=new Map,i,a,l=Ae([...s[6].state.markedSquares]);const n=r=>r[85];for(let r=0;r<l.length;r+=1){let o=cn(s,l,r),u=n(o);t.set(u,e[r]=pn(u,o))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();i=Ee()},l(r){for(let o=0;o<e.length;o+=1)e[o].l(r);i=Ee()},m(r,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(r,o);B(r,i,o),a=!0},p(r,o){o[0]&1048642&&(l=Ae([...r[6].state.markedSquares]),ze(),e=zn(e,o,n,1,r,l,t,i.parentNode,Dn,pn,i,cn),Ue())},i(r){if(!a){for(let o=0;o<l.length;o+=1)H(e[o]);a=!0}},o(r){for(let o=0;o<e.length;o+=1)X(e[o]);a=!1},d(r){r&&S(i);for(let o=0;o<e.length;o+=1)e[o].d(r)}}}function pn(s,e){let t,i,a;return i=new za({props:{boardSize:e[6].state.board.size,theme:e[6].state.board.boardTheme,square:e[85].square,color:e[85].color,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped,mouseEvents:e[6].state.board.mouseEvents,corner:e[20](e[85].square)}}),i.$on("dragenter",e[67]),{key:s,first:null,c(){t=Ee(),oe(i.$$.fragment),this.h()},l(l){t=Ee(),ue(i.$$.fragment,l),this.h()},h(){this.first=t},m(l,n){B(l,t,n),ce(i,l,n),a=!0},p(l,n){e=l;const r={};n[0]&64&&(r.boardSize=e[6].state.board.size),n[0]&64&&(r.theme=e[6].state.board.boardTheme),n[0]&64&&(r.square=e[85].square),n[0]&64&&(r.color=e[85].color),n[0]&64&&(r.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),n[0]&64&&(r.flipped=e[6].flipped),n[0]&64&&(r.mouseEvents=e[6].state.board.mouseEvents),n[0]&64&&(r.corner=e[20](e[85].square)),i.$set(r)},i(l){a||(H(i.$$.fragment,l),a=!0)},o(l){X(i.$$.fragment,l),a=!1},d(l){l&&S(t),fe(i,l)}}}function mn(s){let e,t;return e=new sa({props:{theme:s[6].state.board.boardTheme,flipped:s[6].flipped}}),{c(){oe(e.$$.fragment)},l(i){ue(e.$$.fragment,i)},m(i,a){ce(e,i,a),t=!0},p(i,a){const l={};a[0]&64&&(l.theme=i[6].state.board.boardTheme),a[0]&64&&(l.flipped=i[6].flipped),e.$set(l)},i(i){t||(H(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function vn(s){let e,t;return e=new cr({props:{chessboard:s[6],mouseEvents:s[6].state.board.mouseEvents}}),e.$on("resizing",s[68]),{c(){oe(e.$$.fragment)},l(i){ue(e.$$.fragment,i)},m(i,a){ce(e,i,a),t=!0},p(i,a){const l={};a[0]&64&&(l.chessboard=i[6]),a[0]&64&&(l.mouseEvents=i[6].state.board.mouseEvents),e.$set(l)},i(i){t||(H(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function _n(s){let e,t,i;function a(n){s[69](n)}let l={flipped:s[6].flipped,tools:s[6].state.drawTools.tools,knightLShape:s[6].state.drawTools.settings.knightLShape};return s[8]!==void 0&&(l.svg=s[8]),e=new Xa({props:l}),x.push(()=>ae(e,"svg",a)),{c(){oe(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,r){ce(e,n,r),i=!0},p(n,r){const o={};r[0]&64&&(o.flipped=n[6].flipped),r[0]&64&&(o.tools=n[6].state.drawTools.tools),r[0]&64&&(o.knightLShape=n[6].state.drawTools.settings.knightLShape),!t&&r[0]&256&&(t=!0,o.svg=n[8],ie(()=>t=!1)),e.$set(o)},i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){X(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function En(s){let e,t,i={};return e=new $a({props:i}),s[70](e),e.$on("newPromotion",s[17]),{c(){oe(e.$$.fragment)},l(a){ue(e.$$.fragment,a)},m(a,l){ce(e,a,l),t=!0},p(a,l){const n={};e.$set(n)},i(a){t||(H(e.$$.fragment,a),t=!0)},o(a){X(e.$$.fragment,a),t=!1},d(a){s[70](null),fe(e,a)}}}function wn(s){let e,t,i={settings:s[6].state.sounds.settings};return e=new rr({props:i}),s[75](e),{c(){oe(e.$$.fragment)},l(a){ue(e.$$.fragment,a)},m(a,l){ce(e,a,l),t=!0},p(a,l){const n={};l[0]&64&&(n.settings=a[6].state.sounds.settings),e.$set(n)},i(a){t||(H(e.$$.fragment,a),t=!0)},o(a){X(e.$$.fragment,a),t=!1},d(a){s[75](null),fe(e,a)}}}function dr(s){let e,t,i,a,l,n,r,o,u,f,d,c,E,v,_,m,M,g=s[6].state.board.startFen&&dn(s),h=s[6].ghostPiece&&gn(s),k=s[6].highlightEnabled&&bn(s),C=s[6].state.board.notation&&s[11]&&mn(s),y=s[6].state.board.resizible&&s[11]&&vn(s),A=s[6].state.drawTools.enabled&&_n(s),N=s[6].legalEnabled&&En(s),P=s[6].soundsEnabled&&wn(s);return{c(){e=R("div"),t=R("div"),i=R("div"),g&&g.c(),l=j(),h&&h.c(),n=j(),k&&k.c(),r=j(),C&&C.c(),o=j(),y&&y.c(),u=j(),A&&A.c(),f=j(),N&&N.c(),E=j(),P&&P.c(),v=Ee(),this.h()},l(O){e=D(O,"DIV",{class:!0});var z=U(e);t=D(z,"DIV",{role:!0,tabindex:!0,class:!0,style:!0});var W=U(t);i=D(W,"DIV",{style:!0,class:!0});var le=U(i);g&&g.l(le),le.forEach(S),l=K(W),h&&h.l(W),n=K(W),k&&k.l(W),r=K(W),C&&C.l(W),o=K(W),y&&y.l(W),u=K(W),A&&A.l(W),f=K(W),N&&N.l(W),W.forEach(S),z.forEach(S),E=K(O),P&&P.l(O),v=Ee(),this.h()},h(){Be(i,"width","100%"),Be(i,"height","100%"),p(i,"class",a=Zt(s[21](s[6].whiteToMove))+" svelte-2axv8q"),p(t,"role","button"),p(t,"tabindex","0"),p(t,"class",d="board text-sm "+s[0]+(!s[6].legalEnabled&&s[6].selectedPiece?" pointer":"")+" svelte-2axv8q"),Be(t,"--boardTheme","url("+(s[6].state.board.boardTheme==="standard"?on:un)+")"),p(e,"class","boardWrapper svelte-2axv8q")},m(O,z){B(O,e,z),T(e,t),T(t,i),g&&g.m(i,null),T(t,l),h&&h.m(t,null),T(t,n),k&&k.m(t,null),T(t,r),C&&C.m(t,null),T(t,o),y&&y.m(t,null),T(t,u),A&&A.m(t,null),T(t,f),N&&N.m(t,null),s[73](t),s[74](e),B(O,E,z),P&&P.m(O,z),B(O,v,z),_=!0,m||(M=[ee(t,"pointerdown",s[13]),ee(t,"contextmenu",zs(s[57])),ee(t,"drag",zs(s[58])),qs(c=Ka.call(null,t,{svg:s[8],flipped:s[6].flipped,enabled:s[6].state.drawTools.enabled&&s[6].state.board.mouseEvents,settings:s[6].state.drawTools.settings})),ee(t,"drawCircle",s[71]),ee(t,"drawArrow",s[72])],m=!0)},p(O,z){O[6].state.board.startFen?g?(g.p(O,z),z[0]&64&&H(g,1)):(g=dn(O),g.c(),H(g,1),g.m(i,null)):g&&(ze(),X(g,1,1,()=>{g=null}),Ue()),(!_||z[0]&64&&a!==(a=Zt(O[21](O[6].whiteToMove))+" svelte-2axv8q"))&&p(i,"class",a),O[6].ghostPiece?h?(h.p(O,z),z[0]&64&&H(h,1)):(h=gn(O),h.c(),H(h,1),h.m(t,n)):h&&(ze(),X(h,1,1,()=>{h=null}),Ue()),O[6].highlightEnabled?k?(k.p(O,z),z[0]&64&&H(k,1)):(k=bn(O),k.c(),H(k,1),k.m(t,r)):k&&(ze(),X(k,1,1,()=>{k=null}),Ue()),O[6].state.board.notation&&O[11]?C?(C.p(O,z),z[0]&2112&&H(C,1)):(C=mn(O),C.c(),H(C,1),C.m(t,o)):C&&(ze(),X(C,1,1,()=>{C=null}),Ue()),O[6].state.board.resizible&&O[11]?y?(y.p(O,z),z[0]&2112&&H(y,1)):(y=vn(O),y.c(),H(y,1),y.m(t,u)):y&&(ze(),X(y,1,1,()=>{y=null}),Ue()),O[6].state.drawTools.enabled?A?(A.p(O,z),z[0]&64&&H(A,1)):(A=_n(O),A.c(),H(A,1),A.m(t,f)):A&&(ze(),X(A,1,1,()=>{A=null}),Ue()),O[6].legalEnabled?N?(N.p(O,z),z[0]&64&&H(N,1)):(N=En(O),N.c(),H(N,1),N.m(t,null)):N&&(ze(),X(N,1,1,()=>{N=null}),Ue()),(!_||z[0]&65&&d!==(d="board text-sm "+O[0]+(!O[6].legalEnabled&&O[6].selectedPiece?" pointer":"")+" svelte-2axv8q"))&&p(t,"class",d),(!_||z[0]&64)&&Be(t,"--boardTheme","url("+(O[6].state.board.boardTheme==="standard"?on:un)+")"),c&&Is(c.update)&&z[0]&320&&c.update.call(null,{svg:O[8],flipped:O[6].flipped,enabled:O[6].state.drawTools.enabled&&O[6].state.board.mouseEvents,settings:O[6].state.drawTools.settings}),O[6].soundsEnabled?P?(P.p(O,z),z[0]&64&&H(P,1)):(P=wn(O),P.c(),H(P,1),P.m(v.parentNode,v)):P&&(ze(),X(P,1,1,()=>{P=null}),Ue())},i(O){_||(H(g),H(h),H(k),H(C),H(y),H(A),H(N),H(P),_=!0)},o(O){X(g),X(h),X(k),X(C),X(y),X(A),X(N),X(P),_=!1},d(O){O&&(S(e),S(E),S(v)),g&&g.d(),h&&h.d(),k&&k.d(),C&&C.d(),y&&y.d(),A&&A.d(),N&&N.d(),s[73](null),s[74](null),P&&P.d(O),m=!1,et(M)}}}function hr(s,e,t){let i,{config:a}=e,{className:l=""}=e;const n=new ys(a),r=Ht();let o,u,f,d,c,E="",v=!1,_=!1;const m=b=>{n.clearAllSquares(b),b==="LEGAL"&&n.clearAllSquares("LEGALHOVER"),b==="PREMOVE"&&n.clearAllSquares("PREMOVEHOVER"),t(6,n)},M=(b,F)=>{g(F)&&(n.highlightSquare(b,F),t(6,n))},g=b=>n.highlightEnabled&&(b===void 0||n.highlightSettings[fr(b)]),h=b=>{if(!n.selectableEnabled&&n.draggableEnabled&&pe(b),!n.selectableEnabled)return;k(!0);const F=n.getPieceFromSquare(b);F!==void 0&&(t(6,n.selectedPiece=F,n),pe())},k=(b=!0)=>{m("SELECT"),m("LEGAL"),m("PREMOVE"),t(6,n.selectedPiece=void 0,n),b&&(m("NEXTMOVE"),t(6,n.currentPreMove="",n))},C=b=>{m("CHECK"),b&&n.legalEnabled&&M(b,"CHECK"),t(6,n)},y=()=>{m("CHECK")},A=b=>{n.flipBoard(b),t(6,n)},N=(b,F)=>{b.forEach(Q=>n.highlightSquare(Q,F)),t(6,n)},P=(b,F=!0,Q="MOVE")=>{b.length<4||!g(Q)||(F&&m(Q),N([b.substring(0,2),b.substring(2,4)],Q))},O=b=>{M(b.substring(2,4),"LEGAL")},z=(b,F,Q="LEGAL")=>{m(Q),g(Q)&&(b.forEach(re=>{re.length<4||(F===void 0||re.substring(0,2)===F)&&n.highlightSquare(re.substring(2,4),Q)}),t(6,n))},W=(b,F=!0)=>{n.makeMove(b),F&&P(b),t(6,n)},le=b=>{var F;b&&(n.removePiece(b),n.ghostPieceEnabled&&((F=n.ghostPiece)==null?void 0:F.square)===b&&(n.removeGhostPiece(),t(6,n)),t(6,n))},be=b=>n.whiteToMove&&b[0]==="w"||!n.whiteToMove&&b[0]==="b",_e=(b=!1)=>{n.legalEnabled&&(n.state.callbacks.getWhiteToMove&&t(6,n.whiteToMove=n.state.callbacks.getWhiteToMove(),n),n.state.callbacks.getPreMoves&&n.preMovesEnabled?t(6,n.preMoves=n.state.callbacks.getPreMoves(),n):t(6,n.preMoves=[],n),n.state.callbacks.getLegalMoves&&n.state.legal.enabled?t(6,n.legalMoves=n.state.callbacks.getLegalMoves(),n):t(6,n.legalMoves=[],n),b&&pe(),n.state.callbacks.getInCheck&&n.state.callbacks.getInCheck()?n.whiteToMove?C(n.getWhiteKingSquare()):C(n.getBlackKingSquare()):y(),n.state.callbacks.getLastMove?(t(6,n.lastMove=n.state.callbacks.getLastMove(),n),P(n.lastMove)):m("MOVE"))},se=b=>{var F;n.soundsEnabled&&d&&((F=d.playMoveSound)==null||F.call(d,b))},ge=b=>{n.setGhostPiece(b),t(6,n)},V=()=>{n.removeGhostPiece(),t(6,n)},G=b=>{if(b.substring(0,2)===b.substring(2,4))return;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(b);const F=n.selectedPiece?{...n.selectedPiece}:void 0;k(!1);const Q=n.getRookMoveIfIsCastling(b),re=n.getCapturedPawnSquareIfIsEnPassant(b);Q&&n.state.legal.settings.allowCastling?(W(Q,!1),se("CASTLE")):re&&n.state.legal.settings.allowEnPassant?(le(re),se("CAPTURE")):n.isCapture(b)?se("CAPTURE"):se("MOVE"),V(),W(b),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(b),_e(!1);const Le=n.getPieceFromSquare(F==null?void 0:F.square);if(Le&&F&&Le.square===F.square&&Le.name===(F==null?void 0:F.name)?t(6,n.selectedPiece=Le,n):t(6,n.selectedPiece=void 0,n),n.selectedPiece!==void 0&&pe(),n.legalEnabled&&n.preMovesEnabled&&n.currentPreMove!==""){if(n.legalMoves.includes(n.currentPreMove)){const Re=n.currentPreMove;ii().then(()=>{G(Re)})}t(6,n.currentPreMove="",n),m("NEXTMOVE")}},J=b=>{!n.legalEnabled||!n.preMovesEnabled||!n.movableEnabled||(k(!1),P(b,!0,"NEXTMOVE"),t(6,n.currentPreMove=b,n),r("nextMove",{move:b}))},de=b=>{var re;const F=n.getPieceFromSquare(b.substring(0,2));if(!F)return;const Q=F.name[0]==="w"?"WHITE":"BLACK";(re=c.openPromotionModal)==null||re.call(c,Q==="WHITE"),E=b,v=n.isCapture(b),n.makeMove(b),m("LEGAL"),m("SELECT"),P(b)},q=(b,F)=>{n.clearSquare(b,F),t(6,n)},w=()=>{n.clearAllPieces(),t(6,n)},$=(b,F)=>{n.setPiece(b,F),t(6,n)},te=(b,F)=>{var re;const Q=(re=n.getPieceFromSquare(b))==null?void 0:re.name;Q&&(F!==void 0?n.setPiece(b,`${F==="WHITE"?"w":"b"}${Q[1]}`):n.setPiece(b,`${Q[0]==="w"?"b":"w"}${Q[1]}`),t(6,n))},he=(b,F)=>{const Q=Math.floor(b/n.state.board.size*8),re=Math.floor(F/n.state.board.size*8),Le=n.flipped?7-Q:Q,Re=n.flipped?re:7-re;if(Le<0||Le>7||Re<0||Re>7)return;const De=Object.keys(n.letters)[Le],vs=(Re+1).toString();return`${De}${vs}`},Fe=b=>{if(!n.state.board.mouseEvents)return;if(b.button===2){k();return}if(!n.movableEnabled)return;const F=o.getBoundingClientRect(),Q=b.clientX-F.left,re=b.clientY-F.top,Le=he(Q,re);if(!Le)return;const Re=n.getPieceFromSquare(Le);if(r("squareClick",{square:Le,piece:Re?Re.name:void 0}),!n.selectableEnabled&&!n.draggableEnabled){k();return}if(!n.selectedPiece||n.selectedPiece.square===Le)return;const De=n.selectedPiece.square+Le;if(!n.legalEnabled){G(De),k();return}if(!be(n.selectedPiece.name)){n.preMovesEnabled&&n.preMoves.includes(De)&&(n.isPromotion(De)?J(`${De}q`):J(De)),k(!1);return}(Re===void 0||Re.name[0]!==n.selectedPiece.name[0])&&be(n.selectedPiece.name)&&(n.isPromotion(De)&&n.legalMoves.includes(De)?de(De):n.legalMoves.includes(De)&&G(De),k())},Ne=b=>{const F=b.detail;n.legalEnabled?n.isPromotion(F)&&n.legalMoves.includes(`${F}q`)?de(F):n.legalMoves.includes(F)?G(F):n.preMovesEnabled&&n.preMoves.includes(F)?n.isPromotion(F)?J(`${F}q`):J(F):k():G(F),m("LEGAL"),m("PREMOVE"),t(6,n)},pe=b=>{var F;if(n.selectableEnabled||n.draggableEnabled){const Q=n.getPieceFromSquare(b??((F=n.selectedPiece)==null?void 0:F.square));if(!Q||(n.selectableEnabled&&M(Q.square,"SELECT"),!n.legalEnabled))return;m("LEGAL"),m("PREMOVE"),be(Q.name)&&z(n.legalMoves,Q.square),be(Q.name)||z(n.preMoves,Q.square,"PREMOVE")}},Te=(b,F=!0,Q="MOVE")=>{if(n.updatePiecesWithFen(b),F&&k(),m(),V(),_e(!1),t(6,n.currentPreMove="",n),n.state.callbacks.getLastMove){const re=n.state.callbacks.getLastMove();t(6,n.lastMove=re,n),Q!==!1&&(Q!=="MOVE"?se(Q):n.isCastling(re)?se("CASTLE"):se(Q)),P(re)}else Q!==!1&&se(Q);pe(),t(6,n)},ke=()=>n.getShortFEN(),tt=b=>{!b||n.state.board.size===b||(t(6,n.state.board.size=b,n),_&&n.state.board.resizible&&document.body.style.setProperty("--boardSize",`${n.state.board.size}px`))},Ve=b=>{!b||n.state.board.scale===b||(t(6,n.state.board.scale=b,n),_&&n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`))},Ye=b=>{var F;return(F=n.getPieceFromSquare(b))==null?void 0:F.name},xe=b=>{t(6,n.state.drawTools.tools=b,n)},He=b=>{t(6,n.state.drawTools.tools=n.state.drawTools.tools.filter(F=>b?(!b.type||F.type!==b.type)&&(!b.from||F.type==="arrow"&&F.from!==b.from||F.type==="circle"&&F.square!==b.from)&&(!b.to||F.type==="arrow"&&F.to!==b.to)&&(b.fixed===void 0||F.fixed!==b.fixed):!1),n)},st=b=>{b===!1?t(6,n.state.movable.enabled=!1,n):(t(6,n.state.movable.enabled=!0,n),t(6,n.state.movable.color=b===!0?"BOTH":b,n))},Lt=b=>{b.length<4||(t(6,n.lastMove=b,n),P(b))},Ct=b=>{t(6,n.legalMoves=b,n)},qt=b=>{t(6,n.preMoves=b,n)},nt=()=>n.state,It=b=>{t(6,n.state=b,n),m(),_e(!1),P(n.lastMove),P(n.currentPreMove,!0,"NEXTMOVE"),pe()},Ot=b=>{b!==void 0&&(n.setConfigSettings(b),t(6,n),It(n.state))},it=b=>b.getConfig(),yt=(b,F)=>{n.legalEnabled&&(be(F.name)&&n.legalHover(b.detail.square),!be(F.name)&&n.preMovesEnabled&&n.legalHover(b.detail.square,"PREMOVE")),t(6,n)},vt=b=>{n.ghostPieceEnabled&&ge(b),m("SELECT")},Ft=b=>{const F=n.getPieceFromSquare(E.substring(2,4));if(!F)return;const Q=F.name[0]+b.detail.toUpperCase(),re=E+b.detail;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(re),n.setPiece(F.square,Q),t(6,n),se(v?"CAPTURE":"MOVE"),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(re),_e()},Xe=b=>{if(!n.selectedPiece)return;const F=n.selectedPiece.square+b;n.legalEnabled?n.isPromotion(F)&&n.legalMoves.includes(`${F}q`)?de(F):n.legalMoves.includes(F)?G(F):n.preMovesEnabled&&n.preMoves.includes(F)?n.isPromotion(F)?J(`${F}q`):J(F):k():G(F),k(!1)},Pt=b=>{const F=n.getPieceFromSquare(b.square);F&&F.square===b.square&&F.name===b.name&&M(b.square,"SELECT")};function Ze(b){if(!o||!b)return;if(i==null||i(),typeof window.ResizeObserver>"u")throw new Error("window.ResizeObserver is missing.");const F=new ResizeObserver(Q=>{const re=b.getBoundingClientRect();Q.forEach(()=>{t(6,n.state.board.size=Math.floor(re.width*window.devicePixelRatio/8)*8/window.devicePixelRatio,n),o.style.setProperty("width",`${Math.floor(re.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`),o.style.setProperty("height",`${Math.floor(re.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`)})});return F.observe(b),()=>{F.unobserve(b),F.disconnect()}}const lt=b=>b==="a1"?n.flipped?"top-right":"bottom-left":b==="a8"?n.flipped?"bottom-right":"top-left":b==="h1"?n.flipped?"top-left":"bottom-right":b==="h8"?n.flipped?"bottom-left":"top-right":"",Nt=b=>!n.movableEnabled||!n.state.board.mouseEvents||!n.draggableEnabled&&!n.selectableEnabled?"":n.legalEnabled?n.state.movable.color==="BOTH"?b?"w":"b":n.state.movable.color==="WHITE"&&(b||!b&&n.preMovesEnabled)?"w":n.state.movable.color==="BLACK"&&(!b||b&&n.preMovesEnabled)?"b":"":"wb";ns(()=>{t(11,_=!0),_e(!0),n.state.callbacks.getLastMove&&P(n.state.callbacks.getLastMove()),n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`)}),ni(()=>{i==null||i(),_&&n.state.board.resizible&&document.body.style.removeProperty("--boardScale")});function jt(b){Qe.call(this,s,b)}function is(b){Qe.call(this,s,b)}const as=b=>{r("piececlick",{piece:b}),h(b.square)},rs=b=>{r("startDragging",{piece:b}),vt(b)},ls=(b,F)=>yt(F,b);function os(b){Qe.call(this,s,b)}const ot=b=>Pt(b),us=()=>k(),cs=()=>k(),Rt=b=>Xe(b.square),fs=b=>{M(b.detail.square,"LEGALHOVER")},ds=b=>{Ve(b.detail)};function hs(b){f=b,t(8,f)}function gs(b){x[b?"unshift":"push"](()=>{c=b,t(10,c)})}const bs=b=>r("drawCircle",{square:b.detail.square,color:b.detail.color}),ut=b=>r("drawArrow",{move:b.detail.move,color:b.detail.color});function ps(b){x[b?"unshift":"push"](()=>{o=b,t(7,o)})}function Kt(b){x[b?"unshift":"push"](()=>{u=b,t(5,u)})}function ms(b){x[b?"unshift":"push"](()=>{d=b,t(9,d)})}return s.$$set=b=>{"config"in b&&t(22,a=b.config),"className"in b&&t(0,l=b.className)},s.$$.update=()=>{s.$$.dirty[0]&32&&(i=Ze(u))},[l,M,h,k,Ve,u,n,o,f,d,c,_,r,Fe,Ne,yt,vt,Ft,Xe,Pt,lt,Nt,a,m,C,y,A,N,P,O,z,W,le,_e,se,G,J,de,q,w,$,te,he,Te,ke,tt,Ye,xe,He,st,Lt,Ct,qt,nt,It,Ot,it,jt,is,as,rs,ls,os,ot,us,cs,Rt,fs,ds,hs,gs,bs,ut,ps,Kt,ms]}class gr extends Se{constructor(e){super(),Ce(this,e,hr,dr,Me,{config:22,className:0,clearAllSquares:23,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:24,removeCheckSquare:25,flipBoard:26,highlightManySquares:27,highlightMove:28,highlightLegalMove:29,highlightLegalMoves:30,movePiece:31,removePiece:32,updateLegalState:33,playMoveSound:34,makeMove:35,makeNextMove:36,makeMovePromotion:37,removeSquareHighlight:38,removeAllPiece:39,createPiece:40,changeColorOfPiece:41,getSquareFromCoords:42,setFEN:43,getShortFEN:44,setSize:45,setScale:4,getPieceNameFromSquare:46,setTools:47,removeTools:48,setMovableColor:49,setLastMove:50,setLegalMoves:51,setPreMoves:52,getState:53,setState:54,setConfigSettings:55,getConfigFromState:56},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[23]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[24]}get removeCheckSquare(){return this.$$.ctx[25]}get flipBoard(){return this.$$.ctx[26]}get highlightManySquares(){return this.$$.ctx[27]}get highlightMove(){return this.$$.ctx[28]}get highlightLegalMove(){return this.$$.ctx[29]}get highlightLegalMoves(){return this.$$.ctx[30]}get movePiece(){return this.$$.ctx[31]}get removePiece(){return this.$$.ctx[32]}get updateLegalState(){return this.$$.ctx[33]}get playMoveSound(){return this.$$.ctx[34]}get makeMove(){return this.$$.ctx[35]}get makeNextMove(){return this.$$.ctx[36]}get makeMovePromotion(){return this.$$.ctx[37]}get removeSquareHighlight(){return this.$$.ctx[38]}get removeAllPiece(){return this.$$.ctx[39]}get createPiece(){return this.$$.ctx[40]}get changeColorOfPiece(){return this.$$.ctx[41]}get getSquareFromCoords(){return this.$$.ctx[42]}get setFEN(){return this.$$.ctx[43]}get getShortFEN(){return this.$$.ctx[44]}get setSize(){return this.$$.ctx[45]}get setScale(){return this.$$.ctx[4]}get getPieceNameFromSquare(){return this.$$.ctx[46]}get setTools(){return this.$$.ctx[47]}get removeTools(){return this.$$.ctx[48]}get setMovableColor(){return this.$$.ctx[49]}get setLastMove(){return this.$$.ctx[50]}get setLegalMoves(){return this.$$.ctx[51]}get setPreMoves(){return this.$$.ctx[52]}get getState(){return this.$$.ctx[53]}get setState(){return this.$$.ctx[54]}get setConfigSettings(){return this.$$.ctx[55]}get getConfigFromState(){return this.$$.ctx[56]}}const br=["standard","darkBlue"],pr=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function kn(s){let e,t,i;return{c(){e=R("input"),this.h()},l(a){e=D(a,"INPUT",{type:!0,class:!0}),this.h()},h(){p(e,"type","checkbox"),p(e,"class","mr-1")},m(a,l){B(a,e,l),e.checked=s[0],t||(i=[ee(e,"change",s[8]),ee(e,"click",Nn(s[7])),ee(e,"change",s[9])],t=!0)},p(a,l){l&1&&(e.checked=a[0])},d(a){a&&S(e),t=!1,et(i)}}}function Mn(s){let e,t,i;return{c(){e=Ie("svg"),t=Ie("path"),this.h()},l(a){e=Oe(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var l=U(e);t=Oe(l,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),U(t).forEach(S),l.forEach(S),this.h()},h(){p(t,"fill-rule","evenodd"),p(t,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),p(t,"clip-rule","evenodd"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 20 20"),p(e,"fill","currentColor"),p(e,"class",i="w-5 h-5 transition "+(s[1]?"rotate-180":"rotate-0"))},m(a,l){B(a,e,l),T(e,t)},p(a,l){l&2&&i!==(i="w-5 h-5 transition "+(a[1]?"rotate-180":"rotate-0"))&&p(e,"class",i)},d(a){a&&S(e)}}}function Sn(s){let e,t,i;const a=s[6].default,l=Ln(a,s,s[5],null);return{c(){e=R("div"),l&&l.c(),this.h()},l(n){e=D(n,"DIV",{class:!0});var r=U(e);l&&l.l(r),r.forEach(S),this.h()},h(){p(e,"class","py-2 px-4")},m(n,r){B(n,e,r),l&&l.m(e,null),i=!0},p(n,r){l&&l.p&&(!i||r&32)&&qn(l,a,n,n[5],i?On(a,n[5],r,null):In(n[5]),null)},i(n){i||(H(l,n),n&&St(()=>{i&&(t||(t=Jt(e,ts,{},!0)),t.run(1))}),i=!0)},o(n){X(l,n),n&&(t||(t=Jt(e,ts,{},!1)),t.run(0)),i=!1},d(n){n&&S(e),l&&l.d(n),n&&t&&t.end()}}}function mr(s){let e,t,i,a,l,n,r,o,u,f,d,c,E,v,_=s[0]!==void 0&&kn(s),m=s[3]&&Mn(s),M=s[1]&&Sn(s);return{c(){e=R("div"),t=R("button"),i=R("div"),_&&_.c(),a=j(),l=R("span"),n=Je(s[2]),o=j(),m&&m.c(),d=j(),M&&M.c(),this.h()},l(g){e=D(g,"DIV",{class:!0});var h=U(e);t=D(h,"BUTTON",{class:!0});var k=U(t);i=D(k,"DIV",{class:!0});var C=U(i);_&&_.l(C),a=K(C),l=D(C,"SPAN",{class:!0});var y=U(l);n=$e(y,s[2]),y.forEach(S),C.forEach(S),o=K(k),m&&m.l(k),k.forEach(S),d=K(h),M&&M.l(h),h.forEach(S),this.h()},h(){p(l,"class",r=s[0]===void 0?"ml-[21px]":""),p(i,"class","flex gap-1"),p(t,"class",u="flex justify-between px-4 py-2 "+(s[3]?"transition hover:bg-slate-800/40":"")+" rounded"),t.disabled=f=!s[3],p(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(g,h){B(g,e,h),T(e,t),T(t,i),_&&_.m(i,null),T(i,a),T(i,l),T(l,n),T(t,o),m&&m.m(t,null),T(e,d),M&&M.m(e,null),c=!0,E||(v=ee(t,"click",s[10]),E=!0)},p(g,[h]){g[0]!==void 0?_?_.p(g,h):(_=kn(g),_.c(),_.m(i,a)):_&&(_.d(1),_=null),(!c||h&4)&&ss(n,g[2]),(!c||h&1&&r!==(r=g[0]===void 0?"ml-[21px]":""))&&p(l,"class",r),g[3]?m?m.p(g,h):(m=Mn(g),m.c(),m.m(t,null)):m&&(m.d(1),m=null),(!c||h&8&&u!==(u="flex justify-between px-4 py-2 "+(g[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&p(t,"class",u),(!c||h&8&&f!==(f=!g[3]))&&(t.disabled=f),g[1]?M?(M.p(g,h),h&2&&H(M,1)):(M=Sn(g),M.c(),H(M,1),M.m(e,null)):M&&(ze(),X(M,1,1,()=>{M=null}),Ue())},i(g){c||(H(M),c=!0)},o(g){X(M),c=!1},d(g){g&&S(e),_&&_.d(),m&&m.d(),M&&M.d(),E=!1,v()}}}function vr(s,e,t){let{$$slots:i={},$$scope:a}=e;const l=Ht();let{name:n="board"}=e,{enabled:r=void 0}=e,{showExpand:o=!0}=e,{expanded:u=!1}=e;function f(v){Qe.call(this,s,v)}const d=()=>l("changed",r);function c(){r=this.checked,t(0,r)}const E=()=>{t(1,u=!u)};return s.$$set=v=>{"name"in v&&t(2,n=v.name),"enabled"in v&&t(0,r=v.enabled),"showExpand"in v&&t(3,o=v.showExpand),"expanded"in v&&t(1,u=v.expanded),"$$scope"in v&&t(5,a=v.$$scope)},[r,u,n,o,l,a,i,f,d,c,E]}class mt extends Se{constructor(e){super(),Ce(this,e,vr,mr,Me,{name:2,enabled:0,showExpand:3,expanded:1})}}function _r(s,e,t){const i=s.slice();return i[12]=e[t],i}function Er(s){let e,t;return{c(){e=R("option"),t=Je(s[12]),this.h()},l(i){e=D(i,"OPTION",{});var a=U(e);t=$e(a,s[12]),a.forEach(S),this.h()},h(){e.__value=s[12],kt(e,e.__value)},m(i,a){B(i,e,a),T(e,t)},p:me,d(i){i&&S(e)}}}function wr(s){let e,t,i,a,l="board theme",n,r,o,u,f,d="mouseEvents",c,E,v,_,m,M="notation",g,h,k,C,y,A="flipped",N,P,O,z,W,le="resizible",be,_e,se=Ae(br),ge=[];for(let V=0;V<se.length;V+=1)ge[V]=Er(_r(s,se,V));return{c(){e=R("div"),t=R("select");for(let V=0;V<ge.length;V+=1)ge[V].c();i=j(),a=R("label"),a.textContent=l,n=j(),r=R("div"),o=R("input"),u=j(),f=R("label"),f.textContent=d,c=j(),E=R("div"),v=R("input"),_=j(),m=R("label"),m.textContent=M,g=j(),h=R("div"),k=R("input"),C=j(),y=R("label"),y.textContent=A,N=j(),P=R("div"),O=R("input"),z=j(),W=R("label"),W.textContent=le,this.h()},l(V){e=D(V,"DIV",{class:!0});var G=U(e);t=D(G,"SELECT",{class:!0});var J=U(t);for(let te=0;te<ge.length;te+=1)ge[te].l(J);J.forEach(S),i=K(G),a=D(G,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(a)!=="svelte-ew2mxm"&&(a.textContent=l),G.forEach(S),n=K(V),r=D(V,"DIV",{class:!0});var de=U(r);o=D(de,"INPUT",{id:!0,type:!0,class:!0}),u=K(de),f=D(de,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(f)!=="svelte-1la83j8"&&(f.textContent=d),de.forEach(S),c=K(V),E=D(V,"DIV",{class:!0});var q=U(E);v=D(q,"INPUT",{id:!0,type:!0,class:!0}),_=K(q),m=D(q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(m)!=="svelte-lv5m04"&&(m.textContent=M),q.forEach(S),g=K(V),h=D(V,"DIV",{class:!0});var w=U(h);k=D(w,"INPUT",{id:!0,type:!0,class:!0}),C=K(w),y=D(w,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(y)!=="svelte-60d3o8"&&(y.textContent=A),w.forEach(S),N=K(V),P=D(V,"DIV",{class:!0});var $=U(P);O=D($,"INPUT",{id:!0,type:!0,class:!0}),z=K($),W=D($,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(W)!=="svelte-nvi1b1"&&(W.textContent=le),$.forEach(S),this.h()},h(){p(t,"class","svelte-1c01etf"),s[0]===void 0&&St(()=>s[7].call(t)),p(a,"for","boardTheme"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","mouseEvents"),p(o,"type","checkbox"),p(o,"class","svelte-1c01etf"),p(f,"for","mouseEvents"),p(f,"class","select-none"),p(r,"class","mb-2"),p(v,"id","notation"),p(v,"type","checkbox"),p(v,"class","svelte-1c01etf"),p(m,"for","notation"),p(m,"class","select-none"),p(E,"class","mb-2"),p(k,"id","flipped"),p(k,"type","checkbox"),p(k,"class","svelte-1c01etf"),p(y,"for","flipped"),p(y,"class","select-none"),p(h,"class","mb-2"),p(O,"id","resizibleEnabled"),p(O,"type","checkbox"),p(O,"class","svelte-1c01etf"),p(W,"for","resizibleEnabled"),p(W,"class","select-none"),p(P,"class","mt-2 mb-1")},m(V,G){B(V,e,G),T(e,t);for(let J=0;J<ge.length;J+=1)ge[J]&&ge[J].m(t,null);Tt(t,s[0],!0),T(e,i),T(e,a),B(V,n,G),B(V,r,G),T(r,o),o.checked=s[1],T(r,u),T(r,f),B(V,c,G),B(V,E,G),T(E,v),v.checked=s[2],T(E,_),T(E,m),B(V,g,G),B(V,h,G),T(h,k),k.checked=s[3],T(h,C),T(h,y),B(V,N,G),B(V,P,G),T(P,O),O.checked=s[4],T(P,z),T(P,W),be||(_e=[ee(t,"change",s[7]),ee(o,"change",s[8]),ee(v,"change",s[9]),ee(k,"change",s[10]),ee(O,"change",s[11])],be=!0)},p(V,G){G&1&&Tt(t,V[0]),G&2&&(o.checked=V[1]),G&4&&(v.checked=V[2]),G&8&&(k.checked=V[3]),G&16&&(O.checked=V[4])},d(V){V&&(S(e),S(n),S(r),S(c),S(E),S(g),S(h),S(N),S(P)),pt(ge,V),be=!1,et(_e)}}}function kr(s){let e,t;return e=new mt({props:{name:s[5],expanded:s[6],$$slots:{default:[wr]},$$scope:{ctx:s}}}),{c(){oe(e.$$.fragment)},l(i){ue(e.$$.fragment,i)},m(i,a){ce(e,i,a),t=!0},p(i,[a]){const l={};a&32&&(l.name=i[5]),a&64&&(l.expanded=i[6]),a&32799&&(l.$$scope={dirty:a,ctx:i}),e.$set(l)},i(i){t||(H(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Mr(s,e,t){let{name:i="Board"}=e,{boardTheme:a}=e,{mouseEvents:l}=e,{notation:n}=e,{flipped:r}=e,{resizible:o=!1}=e,{expanded:u=!1}=e;function f(){a=Os(this),t(0,a)}function d(){l=this.checked,t(1,l)}function c(){n=this.checked,t(2,n)}function E(){r=this.checked,t(3,r)}function v(){o=this.checked,t(4,o)}return s.$$set=_=>{"name"in _&&t(5,i=_.name),"boardTheme"in _&&t(0,a=_.boardTheme),"mouseEvents"in _&&t(1,l=_.mouseEvents),"notation"in _&&t(2,n=_.notation),"flipped"in _&&t(3,r=_.flipped),"resizible"in _&&t(4,o=_.resizible),"expanded"in _&&t(6,u=_.expanded)},[a,l,n,r,o,i,u,f,d,c,E,v]}class Sr extends Se{constructor(e){super(),Ce(this,e,Mr,kr,Me,{name:5,boardTheme:0,mouseEvents:1,notation:2,flipped:3,resizible:4,expanded:6})}}function Cr(s){let e,t,i,a="Both",l,n="White",r,o="Black",u,f;return{c(){e=R("div"),t=R("select"),i=R("option"),i.textContent=a,l=R("option"),l.textContent=n,r=R("option"),r.textContent=o,this.h()},l(d){e=D(d,"DIV",{});var c=U(e);t=D(c,"SELECT",{class:!0});var E=U(t);i=D(E,"OPTION",{"data-svelte-h":!0}),we(i)!=="svelte-1gzt2we"&&(i.textContent=a),l=D(E,"OPTION",{"data-svelte-h":!0}),we(l)!=="svelte-d910yg"&&(l.textContent=n),r=D(E,"OPTION",{"data-svelte-h":!0}),we(r)!=="svelte-1nle290"&&(r.textContent=o),E.forEach(S),c.forEach(S),this.h()},h(){i.__value="BOTH",kt(i,i.__value),l.__value="WHITE",kt(l,l.__value),r.__value="BLACK",kt(r,r.__value),p(t,"class","svelte-1bvjddo"),s[1]===void 0&&St(()=>s[4].call(t))},m(d,c){B(d,e,c),T(e,t),T(t,i),T(t,l),T(t,r),Tt(t,s[1],!0),u||(f=ee(t,"change",s[4]),u=!0)},p(d,c){c&2&&Tt(t,d[1])},d(d){d&&S(e),u=!1,f()}}}function yr(s){let e,t,i;function a(n){s[5](n)}let l={name:s[2],expanded:s[3],$$slots:{default:[Cr]},$$scope:{ctx:s}};return s[0]!==void 0&&(l.enabled=s[0]),e=new mt({props:l}),x.push(()=>ae(e,"enabled",a)),{c(){oe(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,r){ce(e,n,r),i=!0},p(n,[r]){const o={};r&4&&(o.name=n[2]),r&8&&(o.expanded=n[3]),r&66&&(o.$$scope={dirty:r,ctx:n}),!t&&r&1&&(t=!0,o.enabled=n[0],ie(()=>t=!1)),e.$set(o)},i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){X(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function Pr(s,e,t){let{name:i="Movable"}=e,{enabled:a=!1}=e,{color:l}=e,{expanded:n=!1}=e;function r(){l=Os(this),t(1,l)}function o(u){a=u,t(0,a)}return s.$$set=u=>{"name"in u&&t(2,i=u.name),"enabled"in u&&t(0,a=u.enabled),"color"in u&&t(1,l=u.color),"expanded"in u&&t(3,n=u.expanded)},[a,l,i,n,r,o]}class Ar extends Se{constructor(e){super(),Ce(this,e,Pr,yr,Me,{name:2,enabled:0,color:1,expanded:3})}}function Tr(s,e,t){const i=s.slice();return i[12]=e[t],i}function Cn(s){let e,t,i,a,l,n="duration",r,o,u,f,d,c="easing",E,v,_,m,M=Ae(pr),g=[];for(let h=0;h<M.length;h+=1)g[h]=Lr(Tr(s,M,h));return{c(){e=R("div"),t=R("div"),i=R("input"),a=j(),l=R("label"),l.textContent=n,r=j(),o=R("div"),u=R("select");for(let h=0;h<g.length;h+=1)g[h].c();f=j(),d=R("label"),d.textContent=c,this.h()},l(h){e=D(h,"DIV",{class:!0});var k=U(e);t=D(k,"DIV",{class:!0});var C=U(t);i=D(C,"INPUT",{id:!0,type:!0,class:!0}),a=K(C),l=D(C,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(l)!=="svelte-4eor77"&&(l.textContent=n),C.forEach(S),r=K(k),o=D(k,"DIV",{class:!0});var y=U(o);u=D(y,"SELECT",{id:!0,class:!0});var A=U(u);for(let N=0;N<g.length;N+=1)g[N].l(A);A.forEach(S),f=K(y),d=D(y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(d)!=="svelte-ch5b0z"&&(d.textContent=c),y.forEach(S),k.forEach(S),this.h()},h(){p(i,"id","transitionDuration"),p(i,"type","number"),p(i,"class","w-16 svelte-16wipjp"),p(l,"for","transitionDuration"),p(l,"class","select-none"),p(t,"class","flex gap-2 mb-2"),p(u,"id","easingFuncs"),p(u,"class","svelte-16wipjp"),s[4]===void 0&&St(()=>s[10].call(u)),p(d,"for","easingFuncs"),p(d,"class","select-none"),p(o,"class","flex gap-2"),p(e,"class","pl-2 pr-4 flex-col")},m(h,k){B(h,e,k),T(e,t),T(t,i),kt(i,s[3]),T(t,a),T(t,l),T(e,r),T(e,o),T(o,u);for(let C=0;C<g.length;C+=1)g[C]&&g[C].m(u,null);Tt(u,s[4],!0),T(o,f),T(o,d),v=!0,_||(m=[ee(i,"input",s[9]),ee(u,"change",s[10])],_=!0)},p(h,k){k&8&&Rn(i.value)!==h[3]&&kt(i,h[3]),k&16&&Tt(u,h[4])},i(h){v||(h&&St(()=>{v&&(E||(E=Jt(e,ts,{},!0)),E.run(1))}),v=!0)},o(h){h&&(E||(E=Jt(e,ts,{},!1)),E.run(0)),v=!1},d(h){h&&S(e),pt(g,h),h&&E&&E.end(),_=!1,et(m)}}}function Lr(s){let e,t;return{c(){e=R("option"),t=Je(s[12]),this.h()},l(i){e=D(i,"OPTION",{});var a=U(e);t=$e(a,s[12]),a.forEach(S),this.h()},h(){e.__value=s[12],kt(e,e.__value)},m(i,a){B(i,e,a),T(e,t)},p:me,d(i){i&&S(e)}}}function qr(s){let e,t,i,a,l="ghost piece",n,r,o,u,f,d="transition",c,E,v,_,m=s[2]&&Cn(s);return{c(){e=R("div"),t=R("input"),i=j(),a=R("label"),a.textContent=l,n=j(),r=R("div"),o=R("input"),u=j(),f=R("label"),f.textContent=d,c=j(),m&&m.c(),E=Ee(),this.h()},l(M){e=D(M,"DIV",{class:!0});var g=U(e);t=D(g,"INPUT",{id:!0,type:!0,class:!0}),i=K(g),a=D(g,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(a)!=="svelte-1m15pvs"&&(a.textContent=l),g.forEach(S),n=K(M),r=D(M,"DIV",{class:!0});var h=U(r);o=D(h,"INPUT",{id:!0,type:!0,class:!0}),u=K(h),f=D(h,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(f)!=="svelte-62e5k3"&&(f.textContent=d),h.forEach(S),c=K(M),m&&m.l(M),E=Ee(),this.h()},h(){p(t,"id","ghostPiece"),p(t,"type","checkbox"),p(t,"class","svelte-16wipjp"),p(a,"for","ghostPiece"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","draggableEnabled"),p(o,"type","checkbox"),p(o,"class","svelte-16wipjp"),p(f,"for","draggableEnabled"),p(f,"class","select-none"),p(r,"class","mb-2")},m(M,g){B(M,e,g),T(e,t),t.checked=s[1],T(e,i),T(e,a),B(M,n,g),B(M,r,g),T(r,o),o.checked=s[2],T(r,u),T(r,f),B(M,c,g),m&&m.m(M,g),B(M,E,g),v||(_=[ee(t,"change",s[7]),ee(o,"change",s[8])],v=!0)},p(M,g){g&2&&(t.checked=M[1]),g&4&&(o.checked=M[2]),M[2]?m?(m.p(M,g),g&4&&H(m,1)):(m=Cn(M),m.c(),H(m,1),m.m(E.parentNode,E)):m&&(ze(),X(m,1,1,()=>{m=null}),Ue())},d(M){M&&(S(e),S(n),S(r),S(c),S(E)),m&&m.d(M),v=!1,et(_)}}}function Ir(s){let e,t,i;function a(n){s[11](n)}let l={name:s[5],expanded:s[6],$$slots:{default:[qr]},$$scope:{ctx:s}};return s[0]!==void 0&&(l.enabled=s[0]),e=new mt({props:l}),x.push(()=>ae(e,"enabled",a)),{c(){oe(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,r){ce(e,n,r),i=!0},p(n,[r]){const o={};r&32&&(o.name=n[5]),r&64&&(o.expanded=n[6]),r&32798&&(o.$$scope={dirty:r,ctx:n}),!t&&r&1&&(t=!0,o.enabled=n[0],ie(()=>t=!1)),e.$set(o)},i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){X(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function Or(s,e,t){let{name:i="Draggable"}=e,{enabled:a=!1}=e,{ghostPiece:l=!1}=e,{transition:n=!1}=e,{duration:r=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function f(){l=this.checked,t(1,l)}function d(){n=this.checked,t(2,n)}function c(){r=Rn(this.value),t(3,r)}function E(){o=Os(this),t(4,o)}function v(_){a=_,t(0,a)}return s.$$set=_=>{"name"in _&&t(5,i=_.name),"enabled"in _&&t(0,a=_.enabled),"ghostPiece"in _&&t(1,l=_.ghostPiece),"transition"in _&&t(2,n=_.transition),"duration"in _&&t(3,r=_.duration),"easing"in _&&t(4,o=_.easing),"expanded"in _&&t(6,u=_.expanded)},[a,l,n,r,o,i,u,f,d,c,E,v]}class Fr extends Se{constructor(e){super(),Ce(this,e,Or,Ir,Me,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function yn(s,e,t){const i=s.slice();return i[7]=e[t],i[8]=e,i[9]=t,i}function Pn(s){let e,t,i,a,l=s[7]+"",n,r,o,u;function f(){s[5].call(t,s[7])}return{c(){e=R("div"),t=R("input"),i=j(),a=R("label"),n=Je(l),r=j(),this.h()},l(d){e=D(d,"DIV",{class:!0});var c=U(e);t=D(c,"INPUT",{id:!0,type:!0}),i=K(c),a=D(c,"LABEL",{for:!0,class:!0});var E=U(a);n=$e(E,l),E.forEach(S),r=K(c),c.forEach(S),this.h()},h(){p(t,"id",s[7]+"Enabled"),p(t,"type","checkbox"),p(a,"for",s[7]+"Enabled"),p(a,"class","select-none"),p(e,"class","mb-2")},m(d,c){B(d,e,c),T(e,t),t.checked=s[1][s[7]],T(e,i),T(e,a),T(a,n),T(e,r),o||(u=ee(t,"change",f),o=!0)},p(d,c){s=d,c&18&&(t.checked=s[1][s[7]])},d(d){d&&S(e),o=!1,u()}}}function Nr(s){let e,t=Ae(s[4]),i=[];for(let a=0;a<t.length;a+=1)i[a]=Pn(yn(s,t,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Ee()},l(a){for(let l=0;l<i.length;l+=1)i[l].l(a);e=Ee()},m(a,l){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(a,l);B(a,e,l)},p(a,l){if(l&18){t=Ae(a[4]);let n;for(n=0;n<t.length;n+=1){const r=yn(a,t,n);i[n]?i[n].p(r,l):(i[n]=Pn(r),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=t.length}},d(a){a&&S(e),pt(i,a)}}}function Rr(s){let e,t,i;function a(n){s[6](n)}let l={name:s[2],expanded:s[3],$$slots:{default:[Nr]},$$scope:{ctx:s}};return s[0]!==void 0&&(l.enabled=s[0]),e=new mt({props:l}),x.push(()=>ae(e,"enabled",a)),{c(){oe(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,r){ce(e,n,r),i=!0},p(n,[r]){const o={};r&4&&(o.name=n[2]),r&8&&(o.expanded=n[3]),r&1026&&(o.$$scope={dirty:r,ctx:n}),!t&&r&1&&(t=!0,o.enabled=n[0],ie(()=>t=!1)),e.$set(o)},i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){X(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function Dr(s,e,t){let{name:i="Highlight"}=e,{enabled:a=!1}=e,{settings:l}=e;const n=["select","legal","move","preMove","nextMove","check"];let{expanded:r=!1}=e;function o(f){l[f]=this.checked,t(1,l)}function u(f){a=f,t(0,a)}return s.$$set=f=>{"name"in f&&t(2,i=f.name),"enabled"in f&&t(0,a=f.enabled),"settings"in f&&t(1,l=f.settings),"expanded"in f&&t(3,r=f.expanded)},[a,l,i,r,n,o,u]}class zr extends Se{constructor(e){super(),Ce(this,e,Dr,Rr,Me,{name:2,enabled:0,settings:1,expanded:3})}}function Ur(s){let e,t,i,a,l="L shape knight move",n,r,o,u,f,d="only chess move",c,E;return{c(){e=R("div"),t=R("input"),i=j(),a=R("label"),a.textContent=l,n=j(),r=R("div"),o=R("input"),u=j(),f=R("label"),f.textContent=d,this.h()},l(v){e=D(v,"DIV",{class:!0});var _=U(e);t=D(_,"INPUT",{id:!0,type:!0}),i=K(_),a=D(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(a)!=="svelte-c4ll25"&&(a.textContent=l),_.forEach(S),n=K(v),r=D(v,"DIV",{class:!0});var m=U(r);o=D(m,"INPUT",{id:!0,type:!0}),u=K(m),f=D(m,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(f)!=="svelte-6d7bc1"&&(f.textContent=d),m.forEach(S),this.h()},h(){p(t,"id","knightLShapeMoveEnabled"),p(t,"type","checkbox"),p(a,"for","knightLShapeMoveEnabled"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","onlyChessMoveEnabled"),p(o,"type","checkbox"),p(f,"for","onlyChessMoveEnabled"),p(f,"class","select-none"),p(r,"class","mb-2")},m(v,_){B(v,e,_),T(e,t),t.checked=s[1],T(e,i),T(e,a),B(v,n,_),B(v,r,_),T(r,o),o.checked=s[2],T(r,u),T(r,f),c||(E=[ee(t,"change",s[5]),ee(o,"change",s[6])],c=!0)},p(v,_){_&2&&(t.checked=v[1]),_&4&&(o.checked=v[2])},d(v){v&&(S(e),S(n),S(r)),c=!1,et(E)}}}function Br(s){let e,t,i;function a(n){s[7](n)}let l={name:s[3],expanded:s[4],$$slots:{default:[Ur]},$$scope:{ctx:s}};return s[0]!==void 0&&(l.enabled=s[0]),e=new mt({props:l}),x.push(()=>ae(e,"enabled",a)),{c(){oe(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,r){ce(e,n,r),i=!0},p(n,[r]){const o={};r&8&&(o.name=n[3]),r&16&&(o.expanded=n[4]),r&262&&(o.$$scope={dirty:r,ctx:n}),!t&&r&1&&(t=!0,o.enabled=n[0],ie(()=>t=!1)),e.$set(o)},i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){X(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function Vr(s,e,t){let{name:i="DrawTools"}=e,{enabled:a=!1}=e,{knightLShape:l=!1}=e,{onlyChessMove:n=!1}=e,{expanded:r=!1}=e;function o(){l=this.checked,t(1,l)}function u(){n=this.checked,t(2,n)}function f(d){a=d,t(0,a)}return s.$$set=d=>{"name"in d&&t(3,i=d.name),"enabled"in d&&t(0,a=d.enabled),"knightLShape"in d&&t(1,l=d.knightLShape),"onlyChessMove"in d&&t(2,n=d.onlyChessMove),"expanded"in d&&t(4,r=d.expanded)},[a,l,n,i,r,o,u,f]}class Hr extends Se{constructor(e){super(),Ce(this,e,Vr,Br,Me,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function An(s,e,t){const i=s.slice();return i[7]=e[t],i[8]=e,i[9]=t,i}function Tn(s){let e,t,i,a,l=s[7].toLowerCase()+"",n,r,o,u;function f(){s[5].call(t,s[7])}return{c(){e=R("div"),t=R("input"),i=j(),a=R("label"),n=Je(l),r=j(),this.h()},l(d){e=D(d,"DIV",{class:!0});var c=U(e);t=D(c,"INPUT",{id:!0,type:!0}),i=K(c),a=D(c,"LABEL",{for:!0,class:!0});var E=U(a);n=$e(E,l),E.forEach(S),r=K(c),c.forEach(S),this.h()},h(){p(t,"id",s[7]+"Enabled"),p(t,"type","checkbox"),p(a,"for",s[7]+"Enabled"),p(a,"class","select-none"),p(e,"class","mb-2")},m(d,c){B(d,e,c),T(e,t),t.checked=s[1][s[7]],T(e,i),T(e,a),T(a,n),T(e,r),o||(u=ee(t,"change",f),o=!0)},p(d,c){s=d,c&18&&(t.checked=s[1][s[7]])},d(d){d&&S(e),o=!1,u()}}}function jr(s){let e,t=Ae(s[4]),i=[];for(let a=0;a<t.length;a+=1)i[a]=Tn(An(s,t,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Ee()},l(a){for(let l=0;l<i.length;l+=1)i[l].l(a);e=Ee()},m(a,l){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(a,l);B(a,e,l)},p(a,l){if(l&18){t=Ae(a[4]);let n;for(n=0;n<t.length;n+=1){const r=An(a,t,n);i[n]?i[n].p(r,l):(i[n]=Tn(r),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=t.length}},d(a){a&&S(e),pt(i,a)}}}function Kr(s){let e,t,i;function a(n){s[6](n)}let l={name:s[2],expanded:s[3],$$slots:{default:[jr]},$$scope:{ctx:s}};return s[0]!==void 0&&(l.enabled=s[0]),e=new mt({props:l}),x.push(()=>ae(e,"enabled",a)),{c(){oe(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,r){ce(e,n,r),i=!0},p(n,[r]){const o={};r&4&&(o.name=n[2]),r&8&&(o.expanded=n[3]),r&1026&&(o.$$scope={dirty:r,ctx:n}),!t&&r&1&&(t=!0,o.enabled=n[0],ie(()=>t=!1)),e.$set(o)},i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){X(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function Wr(s,e,t){let{name:i="Sounds"}=e,{enabled:a=!1}=e,{settings:l}=e;const n=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:r=!1}=e;function o(f){l[f]=this.checked,t(1,l)}function u(f){a=f,t(0,a)}return s.$$set=f=>{"name"in f&&t(2,i=f.name),"enabled"in f&&t(0,a=f.enabled),"settings"in f&&t(1,l=f.settings),"expanded"in f&&t(3,r=f.expanded)},[a,l,i,r,n,o,u]}class Gr extends Se{constructor(e){super(),Ce(this,e,Wr,Kr,Me,{name:2,enabled:0,settings:1,expanded:3})}}function Xr(s){let e,t;return{c(){e=Ie("svg"),t=Ie("path"),this.h()},l(i){e=Oe(i,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=U(e);t=Oe(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),U(t).forEach(S),a.forEach(S),this.h()},h(){p(t,"stroke-linecap","round"),p(t,"stroke-linejoin","round"),p(t,"stroke-width","2"),p(t,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),Be(e,"transform","translate(1px, 0px)"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"class","h-5"),p(e,"fill","none"),p(e,"viewBox","0 0 24 24"),p(e,"aria-hidden","true"),p(e,"stroke","currentColor")},m(i,a){B(i,e,a),T(e,t)},d(i){i&&S(e)}}}function Qr(s){let e,t;return{c(){e=Ie("svg"),t=Ie("path"),this.h()},l(i){e=Oe(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=U(e);t=Oe(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),U(t).forEach(S),a.forEach(S),this.h()},h(){p(t,"stroke-linecap","round"),p(t,"stroke-linejoin","round"),p(t,"stroke-width","2"),p(t,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"class","h-5 text-green-500"),p(e,"fill","none"),p(e,"viewBox","0 0 24 24"),p(e,"aria-hidden","true"),p(e,"stroke","currentColor")},m(i,a){B(i,e,a),T(e,t)},d(i){i&&S(e)}}}function Yr(s){let e,t,i;function a(r,o){return r[1]?Qr:Xr}let l=a(s),n=l(s);return{c(){e=R("button"),n.c(),this.h()},l(r){e=D(r,"BUTTON",{type:!0,class:!0});var o=U(e);n.l(o),o.forEach(S),this.h()},h(){p(e,"type","button"),p(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(r,o){B(r,e,o),n.m(e,null),s[4](e),t||(i=ee(e,"click",s[2]),t=!0)},p(r,[o]){l!==(l=a(r))&&(n.d(1),n=l(r),n&&(n.c(),n.m(e,null)))},i:me,o:me,d(r){r&&S(e),n.d(),s[4](null),t=!1,i()}}}function xr(s,e,t){let{copyText:i}=e,a,l=!1;function n(){navigator.clipboard.writeText(i),t(1,l=!0),setTimeout(()=>{t(1,l=!1)},2e3),a.setAttribute("data-cooltipz-dir","top"),a.setAttribute("aria-label","Copied!"),setTimeout(()=>{a.removeAttribute("aria-label"),a.removeAttribute("data-cooltipz-dir")},2e3)}function r(o){x[o?"unshift":"push"](()=>{a=o,t(0,a)})}return s.$$set=o=>{"copyText"in o&&t(3,i=o.copyText)},[a,l,n,i,r]}class Zr extends Se{constructor(e){super(),Ce(this,e,xr,Yr,Me,{copyText:3})}}function Jr(s){let e,t,i,a,l="allow Castling",n,r,o,u,f,d="allow EnPassant",c,E;return{c(){e=R("div"),t=R("input"),i=j(),a=R("label"),a.textContent=l,n=j(),r=R("div"),o=R("input"),u=j(),f=R("label"),f.textContent=d,this.h()},l(v){e=D(v,"DIV",{class:!0});var _=U(e);t=D(_,"INPUT",{id:!0,type:!0}),i=K(_),a=D(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(a)!=="svelte-1u6v9be"&&(a.textContent=l),_.forEach(S),n=K(v),r=D(v,"DIV",{class:!0});var m=U(r);o=D(m,"INPUT",{id:!0,type:!0}),u=K(m),f=D(m,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),we(f)!=="svelte-1u3ql6u"&&(f.textContent=d),m.forEach(S),this.h()},h(){p(t,"id","allowCastling"),p(t,"type","checkbox"),p(a,"for","allowCastling"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","allowEnPassant"),p(o,"type","checkbox"),p(f,"for","allowEnPassant"),p(f,"class","select-none"),p(r,"class","mb-2")},m(v,_){B(v,e,_),T(e,t),t.checked=s[1],T(e,i),T(e,a),B(v,n,_),B(v,r,_),T(r,o),o.checked=s[2],T(r,u),T(r,f),c||(E=[ee(t,"change",s[4]),ee(o,"change",s[5])],c=!0)},p(v,_){_&2&&(t.checked=v[1]),_&4&&(o.checked=v[2])},d(v){v&&(S(e),S(n),S(r)),c=!1,et(E)}}}function $r(s){let e,t,i;function a(n){s[6](n)}let l={name:s[3],showExpand:!0,$$slots:{default:[Jr]},$$scope:{ctx:s}};return s[0]!==void 0&&(l.enabled=s[0]),e=new mt({props:l}),x.push(()=>ae(e,"enabled",a)),e.$on("changed",s[7]),{c(){oe(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,r){ce(e,n,r),i=!0},p(n,[r]){const o={};r&8&&(o.name=n[3]),r&262&&(o.$$scope={dirty:r,ctx:n}),!t&&r&1&&(t=!0,o.enabled=n[0],ie(()=>t=!1)),e.$set(o)},i(n){i||(H(e.$$.fragment,n),i=!0)},o(n){X(e.$$.fragment,n),i=!1},d(n){fe(e,n)}}}function el(s,e,t){let{name:i="Legal"}=e,{enabled:a=!1}=e,{allowCastling:l}=e,{allowEnPassant:n}=e;function r(){l=this.checked,t(1,l)}function o(){n=this.checked,t(2,n)}function u(d){a=d,t(0,a)}function f(d){Qe.call(this,s,d)}return s.$$set=d=>{"name"in d&&t(3,i=d.name),"enabled"in d&&t(0,a=d.enabled),"allowCastling"in d&&t(1,l=d.allowCastling),"allowEnPassant"in d&&t(2,n=d.allowEnPassant)},[a,l,n,i,r,o,u,f]}class tl extends Se{constructor(e){super(),Ce(this,e,el,$r,Me,{name:3,enabled:0,allowCastling:1,allowEnPassant:2})}}function sl(s){let e,t,i,a,l,n,r,o,u,f,d,c,E,v,_,m,M,g,h,k,C,y,A,N,P,O,z,W,le,be,_e,se,ge,V,G,J,de,q,w,$,te,he,Fe,Ne,pe,Te,ke,tt,Ve,Ye,xe,He,st,Lt,Ct,qt,nt,It="/",Ot,it,yt,vt,Ft,Xe,Pt,Ze,lt,Nt,jt;function is(I){s[7](I)}function as(I){s[8](I)}function rs(I){s[9](I)}function ls(I){s[10](I)}function os(I){s[11](I)}let ot={expanded:!0};s[0].board.boardTheme!==void 0&&(ot.boardTheme=s[0].board.boardTheme),s[0].board.mouseEvents!==void 0&&(ot.mouseEvents=s[0].board.mouseEvents),s[0].board.notation!==void 0&&(ot.notation=s[0].board.notation),s[0].board.flipped!==void 0&&(ot.flipped=s[0].board.flipped),s[0].board.resizible!==void 0&&(ot.resizible=s[0].board.resizible),n=new Sr({props:ot}),x.push(()=>ae(n,"boardTheme",is)),x.push(()=>ae(n,"mouseEvents",as)),x.push(()=>ae(n,"notation",rs)),x.push(()=>ae(n,"flipped",ls)),x.push(()=>ae(n,"resizible",os));function us(I){s[12](I)}function cs(I){s[13](I)}let Rt={expanded:!0};s[0].movable.enabled!==void 0&&(Rt.enabled=s[0].movable.enabled),s[0].movable.color!==void 0&&(Rt.color=s[0].movable.color),E=new Ar({props:Rt}),x.push(()=>ae(E,"enabled",us)),x.push(()=>ae(E,"color",cs));function fs(I){s[14](I)}function ds(I){s[15](I)}function hs(I){s[16](I)}function gs(I){s[17](I)}function bs(I){s[18](I)}let ut={};s[0].draggable.enabled!==void 0&&(ut.enabled=s[0].draggable.enabled),s[0].draggable.ghostPiece.enabled!==void 0&&(ut.ghostPiece=s[0].draggable.ghostPiece.enabled),s[0].draggable.transition.enabled!==void 0&&(ut.transition=s[0].draggable.transition.enabled),s[0].draggable.transition.settings.duration!==void 0&&(ut.duration=s[0].draggable.transition.settings.duration),s[0].draggable.transition.settings.easing!==void 0&&(ut.easing=s[0].draggable.transition.settings.easing),M=new Fr({props:ut}),x.push(()=>ae(M,"enabled",fs)),x.push(()=>ae(M,"ghostPiece",ds)),x.push(()=>ae(M,"transition",hs)),x.push(()=>ae(M,"duration",gs)),x.push(()=>ae(M,"easing",bs));function ps(I){s[19](I)}let Kt={name:"Selectable",showExpand:!1};s[0].selectable.enabled!==void 0&&(Kt.enabled=s[0].selectable.enabled),N=new mt({props:Kt}),x.push(()=>ae(N,"enabled",ps));function ms(I){s[20](I)}function b(I){s[21](I)}function F(I){s[22](I)}let Q={};s[0].legal.settings.allowCastling!==void 0&&(Q.allowCastling=s[0].legal.settings.allowCastling),s[0].legal.settings.allowEnPassant!==void 0&&(Q.allowEnPassant=s[0].legal.settings.allowEnPassant),s[0].legal.enabled!==void 0&&(Q.enabled=s[0].legal.enabled),z=new tl({props:Q}),x.push(()=>ae(z,"allowCastling",ms)),x.push(()=>ae(z,"allowEnPassant",b)),x.push(()=>ae(z,"enabled",F)),z.$on("changed",s[23]);function re(I){s[24](I)}function Le(I){s[25](I)}let Re={};s[0].highlight.enabled!==void 0&&(Re.enabled=s[0].highlight.enabled),s[0].highlight.settings!==void 0&&(Re.settings=s[0].highlight.settings),se=new zr({props:Re}),x.push(()=>ae(se,"enabled",re)),x.push(()=>ae(se,"settings",Le));function De(I){s[26](I)}function vs(I){s[27](I)}function Xn(I){s[28](I)}let Wt={};s[0].drawTools.enabled!==void 0&&(Wt.enabled=s[0].drawTools.enabled),s[0].drawTools.settings.knightLShape!==void 0&&(Wt.knightLShape=s[0].drawTools.settings.knightLShape),s[0].drawTools.settings.onlyChessMove!==void 0&&(Wt.onlyChessMove=s[0].drawTools.settings.onlyChessMove),J=new Hr({props:Wt}),x.push(()=>ae(J,"enabled",De)),x.push(()=>ae(J,"knightLShape",vs)),x.push(()=>ae(J,"onlyChessMove",Xn));function Qn(I){s[29](I)}function Yn(I){s[30](I)}let _s={};s[0].sounds.enabled!==void 0&&(_s.enabled=s[0].sounds.enabled),s[0].sounds.settings!==void 0&&(_s.settings=s[0].sounds.settings),te=new Gr({props:_s}),x.push(()=>ae(te,"enabled",Qn)),x.push(()=>ae(te,"settings",Yn));let xn={config:s[6],className:"rounded-md"};return ke=new gr({props:xn}),s[31](ke),Xe=new Zr({props:{copyText:s[4]}}),Ze=new vi({props:{source:s[4],language:"svelte"}}),{c(){e=R("link"),t=j(),i=R("div"),a=R("div"),l=R("div"),oe(n.$$.fragment),c=j(),oe(E.$$.fragment),m=j(),oe(M.$$.fragment),A=j(),oe(N.$$.fragment),O=j(),oe(z.$$.fragment),_e=j(),oe(se.$$.fragment),G=j(),oe(J.$$.fragment),$=j(),oe(te.$$.fragment),Ne=j(),pe=R("div"),Te=R("div"),oe(ke.$$.fragment),tt=j(),Ve=R("div"),Ye=R("div"),xe=R("div"),He=R("button"),st=R("span"),Lt=Je("ts"),qt=j(),nt=R("span"),nt.textContent=It,Ot=j(),it=R("span"),yt=Je("js"),Ft=j(),oe(Xe.$$.fragment),Pt=j(),oe(Ze.$$.fragment),this.h()},l(I){const ne=ai("svelte-tebjht",document.head);e=D(ne,"LINK",{rel:!0,href:!0}),ne.forEach(S),t=K(I),i=D(I,"DIV",{class:!0});var at=U(i);a=D(at,"DIV",{class:!0});var ct=U(a);l=D(ct,"DIV",{class:!0});var ve=U(l);ue(n.$$.fragment,ve),c=K(ve),ue(E.$$.fragment,ve),m=K(ve),ue(M.$$.fragment,ve),A=K(ve),ue(N.$$.fragment,ve),O=K(ve),ue(z.$$.fragment,ve),_e=K(ve),ue(se.$$.fragment,ve),G=K(ve),ue(J.$$.fragment,ve),$=K(ve),ue(te.$$.fragment,ve),ve.forEach(S),Ne=K(ct),pe=D(ct,"DIV",{class:!0});var _t=U(pe);Te=D(_t,"DIV",{class:!0});var Et=U(Te);ue(ke.$$.fragment,Et),Et.forEach(S),tt=K(_t),Ve=D(_t,"DIV",{class:!0});var At=U(Ve);Ye=D(At,"DIV",{class:!0});var rt=U(Ye);xe=D(rt,"DIV",{class:!0});var ft=U(xe);He=D(ft,"BUTTON",{class:!0});var dt=U(He);st=D(dt,"SPAN",{class:!0});var Dt=U(st);Lt=$e(Dt,"ts"),Dt.forEach(S),qt=K(dt),nt=D(dt,"SPAN",{class:!0,"data-svelte-h":!0}),we(nt)!=="svelte-eqi2a4"&&(nt.textContent=It),Ot=K(dt),it=D(dt,"SPAN",{class:!0});var zt=U(it);yt=$e(zt,"js"),zt.forEach(S),dt.forEach(S),Ft=K(ft),ue(Xe.$$.fragment,ft),ft.forEach(S),Pt=K(rt),ue(Ze.$$.fragment,rt),rt.forEach(S),At.forEach(S),_t.forEach(S),ct.forEach(S),at.forEach(S),this.h()},h(){document.title="Chessboard • PowChess.com",p(e,"rel","stylesheet"),p(e,"href","prism-one-dark.css"),p(l,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),p(Te,"class","w-full lg:w-[calc(70vh*(var(--boardScale,70)/100*0.7+0.3))]"),p(st,"class",Ct=s[1]?"text-yellow-600":""),p(nt,"class","text-gray-600"),p(it,"class",vt=s[1]?"":"text-yellow-600"),p(He,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),p(xe,"class","absolute right-2 top-2 flex gap-4"),p(Ye,"class","shadow-lg rounded"),p(Ve,"class","row-start-2 relative"),p(pe,"class","grid grid-rows-[90wh_auto] gap-10"),p(a,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),p(i,"class","my-10 grid grid-cols-center")},m(I,ne){T(document.head,e),B(I,t,ne),B(I,i,ne),T(i,a),T(a,l),ce(n,l,null),T(l,c),ce(E,l,null),T(l,m),ce(M,l,null),T(l,A),ce(N,l,null),T(l,O),ce(z,l,null),T(l,_e),ce(se,l,null),T(l,G),ce(J,l,null),T(l,$),ce(te,l,null),T(a,Ne),T(a,pe),T(pe,Te),ce(ke,Te,null),T(pe,tt),T(pe,Ve),T(Ve,Ye),T(Ye,xe),T(xe,He),T(He,st),T(st,Lt),T(He,qt),T(He,nt),T(He,Ot),T(He,it),T(it,yt),T(xe,Ft),ce(Xe,xe,null),T(Ye,Pt),ce(Ze,Ye,null),lt=!0,Nt||(jt=ee(He,"click",s[32]),Nt=!0)},p(I,ne){const at={};!r&&ne[0]&1&&(r=!0,at.boardTheme=I[0].board.boardTheme,ie(()=>r=!1)),!o&&ne[0]&1&&(o=!0,at.mouseEvents=I[0].board.mouseEvents,ie(()=>o=!1)),!u&&ne[0]&1&&(u=!0,at.notation=I[0].board.notation,ie(()=>u=!1)),!f&&ne[0]&1&&(f=!0,at.flipped=I[0].board.flipped,ie(()=>f=!1)),!d&&ne[0]&1&&(d=!0,at.resizible=I[0].board.resizible,ie(()=>d=!1)),n.$set(at);const ct={};!v&&ne[0]&1&&(v=!0,ct.enabled=I[0].movable.enabled,ie(()=>v=!1)),!_&&ne[0]&1&&(_=!0,ct.color=I[0].movable.color,ie(()=>_=!1)),E.$set(ct);const ve={};!g&&ne[0]&1&&(g=!0,ve.enabled=I[0].draggable.enabled,ie(()=>g=!1)),!h&&ne[0]&1&&(h=!0,ve.ghostPiece=I[0].draggable.ghostPiece.enabled,ie(()=>h=!1)),!k&&ne[0]&1&&(k=!0,ve.transition=I[0].draggable.transition.enabled,ie(()=>k=!1)),!C&&ne[0]&1&&(C=!0,ve.duration=I[0].draggable.transition.settings.duration,ie(()=>C=!1)),!y&&ne[0]&1&&(y=!0,ve.easing=I[0].draggable.transition.settings.easing,ie(()=>y=!1)),M.$set(ve);const _t={};!P&&ne[0]&1&&(P=!0,_t.enabled=I[0].selectable.enabled,ie(()=>P=!1)),N.$set(_t);const Et={};!W&&ne[0]&1&&(W=!0,Et.allowCastling=I[0].legal.settings.allowCastling,ie(()=>W=!1)),!le&&ne[0]&1&&(le=!0,Et.allowEnPassant=I[0].legal.settings.allowEnPassant,ie(()=>le=!1)),!be&&ne[0]&1&&(be=!0,Et.enabled=I[0].legal.enabled,ie(()=>be=!1)),z.$set(Et);const At={};!ge&&ne[0]&1&&(ge=!0,At.enabled=I[0].highlight.enabled,ie(()=>ge=!1)),!V&&ne[0]&1&&(V=!0,At.settings=I[0].highlight.settings,ie(()=>V=!1)),se.$set(At);const rt={};!de&&ne[0]&1&&(de=!0,rt.enabled=I[0].drawTools.enabled,ie(()=>de=!1)),!q&&ne[0]&1&&(q=!0,rt.knightLShape=I[0].drawTools.settings.knightLShape,ie(()=>q=!1)),!w&&ne[0]&1&&(w=!0,rt.onlyChessMove=I[0].drawTools.settings.onlyChessMove,ie(()=>w=!1)),J.$set(rt);const ft={};!he&&ne[0]&1&&(he=!0,ft.enabled=I[0].sounds.enabled,ie(()=>he=!1)),!Fe&&ne[0]&1&&(Fe=!0,ft.settings=I[0].sounds.settings,ie(()=>Fe=!1)),te.$set(ft);const dt={};ke.$set(dt),(!lt||ne[0]&2&&Ct!==(Ct=I[1]?"text-yellow-600":""))&&p(st,"class",Ct),(!lt||ne[0]&2&&vt!==(vt=I[1]?"":"text-yellow-600"))&&p(it,"class",vt);const Dt={};ne[0]&16&&(Dt.copyText=I[4]),Xe.$set(Dt);const zt={};ne[0]&16&&(zt.source=I[4]),Ze.$set(zt)},i(I){lt||(H(n.$$.fragment,I),H(E.$$.fragment,I),H(M.$$.fragment,I),H(N.$$.fragment,I),H(z.$$.fragment,I),H(se.$$.fragment,I),H(J.$$.fragment,I),H(te.$$.fragment,I),H(ke.$$.fragment,I),H(Xe.$$.fragment,I),H(Ze.$$.fragment,I),lt=!0)},o(I){X(n.$$.fragment,I),X(E.$$.fragment,I),X(M.$$.fragment,I),X(N.$$.fragment,I),X(z.$$.fragment,I),X(se.$$.fragment,I),X(J.$$.fragment,I),X(te.$$.fragment,I),X(ke.$$.fragment,I),X(Xe.$$.fragment,I),X(Ze.$$.fragment,I),lt=!1},d(I){I&&(S(t),S(i)),S(e),fe(n),fe(E),fe(M),fe(N),fe(z),fe(se),fe(J),fe(te),s[31](null),fe(ke),fe(Xe),fe(Ze),Nt=!1,jt()}}}function nl(s,e,t){const i=new Ii,a={movable:"BOTH",legal:!0,callbacks:{afterMove:w=>i.move({from:w.substring(0,2),to:w.substring(2,4),...w.length>4&&{promotion:w[4]}}),getLegalMoves:()=>i.moves({verbose:!0}).map(w=>w.from+w.to+(w.promotion??"")),getWhiteToMove:()=>i.turn()==="w",getInCheck:()=>i.inCheck(),getLastMove:()=>{const w=i.history({verbose:!0}).pop();return w?w.from+w.to+(w.promotion??""):""}},board:{resizible:!0}},l=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,n=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let r,o=new Hn(a),u=!1,f=!0,d="";ns(()=>{var w;t(3,u=!0),t(0,o=(w=r.getState)==null?void 0:w.call(r))});const c=(w,$)=>{var Te;const te=w.getConfig();u&&((Te=r.setState)==null||Te.call(r,w));let he=JSON.stringify(te,(ke,tt)=>ke==="callbacks"?"{functions}":tt,4);he=he.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',$?l:n);const Fe=`
	import { Color } from '@powchess/chessboard/enums';`;function Ne(){return he.includes("movable: 'WHITE'")||he.includes("movable: 'BLACK'")||he.includes("movable: 'BOTH'")}return`<script${$?' lang="ts"':""}>
	import Chessboard${$?", { type ChessboardConfig }":""} from '@powchess/chessboard';${Ne()&&$?Fe:""}${o.legal.enabled?$?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${$?": ChessboardConfig":""} = ${he};
<\/script>

<Chessboard {config} className="rounded-md" />`};function E(w){s.$$.not_equal(o.board.boardTheme,w)&&(o.board.boardTheme=w,t(0,o))}function v(w){s.$$.not_equal(o.board.mouseEvents,w)&&(o.board.mouseEvents=w,t(0,o))}function _(w){s.$$.not_equal(o.board.notation,w)&&(o.board.notation=w,t(0,o))}function m(w){s.$$.not_equal(o.board.flipped,w)&&(o.board.flipped=w,t(0,o))}function M(w){s.$$.not_equal(o.board.resizible,w)&&(o.board.resizible=w,t(0,o))}function g(w){s.$$.not_equal(o.movable.enabled,w)&&(o.movable.enabled=w,t(0,o))}function h(w){s.$$.not_equal(o.movable.color,w)&&(o.movable.color=w,t(0,o))}function k(w){s.$$.not_equal(o.draggable.enabled,w)&&(o.draggable.enabled=w,t(0,o))}function C(w){s.$$.not_equal(o.draggable.ghostPiece.enabled,w)&&(o.draggable.ghostPiece.enabled=w,t(0,o))}function y(w){s.$$.not_equal(o.draggable.transition.enabled,w)&&(o.draggable.transition.enabled=w,t(0,o))}function A(w){s.$$.not_equal(o.draggable.transition.settings.duration,w)&&(o.draggable.transition.settings.duration=w,t(0,o))}function N(w){s.$$.not_equal(o.draggable.transition.settings.easing,w)&&(o.draggable.transition.settings.easing=w,t(0,o))}function P(w){s.$$.not_equal(o.selectable.enabled,w)&&(o.selectable.enabled=w,t(0,o))}function O(w){s.$$.not_equal(o.legal.settings.allowCastling,w)&&(o.legal.settings.allowCastling=w,t(0,o))}function z(w){s.$$.not_equal(o.legal.settings.allowEnPassant,w)&&(o.legal.settings.allowEnPassant=w,t(0,o))}function W(w){s.$$.not_equal(o.legal.enabled,w)&&(o.legal.enabled=w,t(0,o))}const le=()=>{var w;o.legal.enabled||(i.reset(),u&&((w=r.setFEN)==null||w.call(r,o.board.startFen,!0,!1)))};function be(w){s.$$.not_equal(o.highlight.enabled,w)&&(o.highlight.enabled=w,t(0,o))}function _e(w){s.$$.not_equal(o.highlight.settings,w)&&(o.highlight.settings=w,t(0,o))}function se(w){s.$$.not_equal(o.drawTools.enabled,w)&&(o.drawTools.enabled=w,t(0,o))}function ge(w){s.$$.not_equal(o.drawTools.settings.knightLShape,w)&&(o.drawTools.settings.knightLShape=w,t(0,o))}function V(w){s.$$.not_equal(o.drawTools.settings.onlyChessMove,w)&&(o.drawTools.settings.onlyChessMove=w,t(0,o))}function G(w){s.$$.not_equal(o.sounds.enabled,w)&&(o.sounds.enabled=w,t(0,o))}function J(w){s.$$.not_equal(o.sounds.settings,w)&&(o.sounds.settings=w,t(0,o))}function de(w){x[w?"unshift":"push"](()=>{r=w,t(2,r)})}const q=()=>{t(1,f=!f)};return s.$$.update=()=>{s.$$.dirty[0]&3&&t(4,d=c(o,f))},[o,f,r,u,d,i,a,E,v,_,m,M,g,h,k,C,y,A,N,P,O,z,W,le,be,_e,se,ge,V,G,J,de,q]}class cl extends Se{constructor(e){super(),Ce(this,e,nl,sl,Me,{},null,[-1,-1])}}export{cl as component};
