var fi=Object.defineProperty;var gi=(s,e,t)=>e in s?fi(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var A=(s,e,t)=>(gi(s,typeof e!="symbol"?e+"":e,t),t);import{A as at,s as Ce,f as N,a as X,g as R,h as V,d as S,c as Y,j as b,B as yt,i as G,C as bi,y as Ee,D as _t,l as We,m as Ge,k as Xe,x as y,n as zs,E as Bn,F as us,G as Ks,H as ds,I as ae,J as Us,K as Xt,z as pi,o as ms,L as it,p as $,M as De,N as ze,O as Ws,e as Se,P as le,Q as ke,R as cs,S as Vn,r as ns,T as Gs,u as is,v as as,w as rs,t as mi,U as Ft,V as Bs,W as St,X as Hn,Y as vi,Z as _i,_ as Ei}from"../chunks/scheduler.46a3e4a1.js";import{t as Q,a as j,S as ye,i as Pe,n as Mi,l as ki,g as Ue,c as Be,f as wi,h as Si,j as oe,b as ge,d as be,m as pe,e as me,k as hs}from"../chunks/index.8572679f.js";import{w as Ci}from"../chunks/index.a8c66e9a.js";function Le(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function jn(s,e){Q(s,1,1,()=>{e.delete(s.key)})}function Kn(s,e,t,n,a,r,l,i,o,u,d,c){let h=s.length,C=r.length,v=h;const E={};for(;v--;)E[s[v].key]=v;const p=[],_=new Map,f=new Map,g=[];for(v=C;v--;){const F=c(a,r,v),q=t(F);let k=l.get(q);k?n&&g.push(()=>k.p(F,e)):(k=u(q,F),k.c()),_.set(q,p[v]=k),q in E&&f.set(q,Math.abs(v-E[q]))}const M=new Set,P=new Set;function T(F){j(F,1),F.m(i,d),l.set(F.key,F),d=F.first,C--}for(;h&&C;){const F=p[C-1],q=s[h-1],k=F.key,B=q.key;F===q?(d=F.first,h--,C--):_.has(B)?!l.has(k)||M.has(k)?T(F):P.has(B)?h--:f.get(k)>f.get(B)?(P.add(k),T(F)):(M.add(B),h--):(o(q,l),h--)}for(;h--;){const F=s[h];_.has(F.key)||o(F,l)}for(;C;)T(p[C-1]);return at(g),p}function Wn(s,e){const t={},n={},a={$$scope:1};let r=s.length;for(;r--;){const l=s[r],i=e[r];if(i){for(const o in l)o in i||(n[o]=1);for(const o in i)a[o]||(t[o]=i[o],a[o]=1);s[r]=i}else for(const o in l)a[o]=1}for(const l in n)l in t||(t[l]=void 0);return t}function Gn(s){return typeof s=="object"&&s!==null?s:{}}var Xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yi(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Xn={exports:{}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,l={},i={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function f(g){return g instanceof o?new o(g.type,f(g.content),g.alias):Array.isArray(g)?g.map(f):g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(f){return Object.prototype.toString.call(f).slice(8,-1)},objId:function(f){return f.__id||Object.defineProperty(f,"__id",{value:++r}),f.__id},clone:function f(g,M){M=M||{};var P,T;switch(i.util.type(g)){case"Object":if(T=i.util.objId(g),M[T])return M[T];P={},M[T]=P;for(var F in g)g.hasOwnProperty(F)&&(P[F]=f(g[F],M));return P;case"Array":return T=i.util.objId(g),M[T]?M[T]:(P=[],M[T]=P,g.forEach(function(q,k){P[k]=f(q,M)}),P);default:return g}},getLanguage:function(f){for(;f;){var g=a.exec(f.className);if(g)return g[1].toLowerCase();f=f.parentElement}return"none"},setLanguage:function(f,g){f.className=f.className.replace(RegExp(a,"gi"),""),f.classList.add("language-"+g)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(P){var f=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(P.stack)||[])[1];if(f){var g=document.getElementsByTagName("script");for(var M in g)if(g[M].src==f)return g[M]}return null}},isActive:function(f,g,M){for(var P="no-"+g;f;){var T=f.classList;if(T.contains(g))return!0;if(T.contains(P))return!1;f=f.parentElement}return!!M}},languages:{plain:l,plaintext:l,text:l,txt:l,extend:function(f,g){var M=i.util.clone(i.languages[f]);for(var P in g)M[P]=g[P];return M},insertBefore:function(f,g,M,P){P=P||i.languages;var T=P[f],F={};for(var q in T)if(T.hasOwnProperty(q)){if(q==g)for(var k in M)M.hasOwnProperty(k)&&(F[k]=M[k]);M.hasOwnProperty(q)||(F[q]=T[q])}var B=P[f];return P[f]=F,i.languages.DFS(i.languages,function(H,K){K===B&&H!=f&&(this[H]=F)}),F},DFS:function f(g,M,P,T){T=T||{};var F=i.util.objId;for(var q in g)if(g.hasOwnProperty(q)){M.call(g,q,g[q],P||q);var k=g[q],B=i.util.type(k);B==="Object"&&!T[F(k)]?(T[F(k)]=!0,f(k,M,null,T)):B==="Array"&&!T[F(k)]&&(T[F(k)]=!0,f(k,M,q,T))}}},plugins:{},highlightAll:function(f,g){i.highlightAllUnder(document,f,g)},highlightAllUnder:function(f,g,M){var P={callback:M,container:f,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",P),P.elements=Array.prototype.slice.apply(P.container.querySelectorAll(P.selector)),i.hooks.run("before-all-elements-highlight",P);for(var T=0,F;F=P.elements[T++];)i.highlightElement(F,g===!0,P.callback)},highlightElement:function(f,g,M){var P=i.util.getLanguage(f),T=i.languages[P];i.util.setLanguage(f,P);var F=f.parentElement;F&&F.nodeName.toLowerCase()==="pre"&&i.util.setLanguage(F,P);var q=f.textContent,k={element:f,language:P,grammar:T,code:q};function B(K){k.highlightedCode=K,i.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,i.hooks.run("after-highlight",k),i.hooks.run("complete",k),M&&M.call(k.element)}if(i.hooks.run("before-sanity-check",k),F=k.element.parentElement,F&&F.nodeName.toLowerCase()==="pre"&&!F.hasAttribute("tabindex")&&F.setAttribute("tabindex","0"),!k.code){i.hooks.run("complete",k),M&&M.call(k.element);return}if(i.hooks.run("before-highlight",k),!k.grammar){B(i.util.encode(k.code));return}if(g&&n.Worker){var H=new Worker(i.filename);H.onmessage=function(K){B(K.data)},H.postMessage(JSON.stringify({language:k.language,code:k.code,immediateClose:!0}))}else B(i.highlight(k.code,k.grammar,k.language))},highlight:function(f,g,M){var P={code:f,grammar:g,language:M};if(i.hooks.run("before-tokenize",P),!P.grammar)throw new Error('The language "'+P.language+'" has no grammar.');return P.tokens=i.tokenize(P.code,P.grammar),i.hooks.run("after-tokenize",P),o.stringify(i.util.encode(P.tokens),P.language)},tokenize:function(f,g){var M=g.rest;if(M){for(var P in M)g[P]=M[P];delete g.rest}var T=new c;return h(T,T.head,f),d(f,T,g,T.head,0),v(T)},hooks:{all:{},add:function(f,g){var M=i.hooks.all;M[f]=M[f]||[],M[f].push(g)},run:function(f,g){var M=i.hooks.all[f];if(!(!M||!M.length))for(var P=0,T;T=M[P++];)T(g)}},Token:o};n.Prism=i;function o(f,g,M,P){this.type=f,this.content=g,this.alias=M,this.length=(P||"").length|0}o.stringify=function f(g,M){if(typeof g=="string")return g;if(Array.isArray(g)){var P="";return g.forEach(function(B){P+=f(B,M)}),P}var T={type:g.type,content:f(g.content,M),tag:"span",classes:["token",g.type],attributes:{},language:M},F=g.alias;F&&(Array.isArray(F)?Array.prototype.push.apply(T.classes,F):T.classes.push(F)),i.hooks.run("wrap",T);var q="";for(var k in T.attributes)q+=" "+k+'="'+(T.attributes[k]||"").replace(/"/g,"&quot;")+'"';return"<"+T.tag+' class="'+T.classes.join(" ")+'"'+q+">"+T.content+"</"+T.tag+">"};function u(f,g,M,P){f.lastIndex=g;var T=f.exec(M);if(T&&P&&T[1]){var F=T[1].length;T.index+=F,T[0]=T[0].slice(F)}return T}function d(f,g,M,P,T,F){for(var q in M)if(!(!M.hasOwnProperty(q)||!M[q])){var k=M[q];k=Array.isArray(k)?k:[k];for(var B=0;B<k.length;++B){if(F&&F.cause==q+","+B)return;var H=k[B],K=H.inside,ee=!!H.lookbehind,Z=!!H.greedy,de=H.alias;if(Z&&!H.pattern.global){var ne=H.pattern.toString().match(/[imsuy]*$/)[0];H.pattern=RegExp(H.pattern.source,ne+"g")}for(var D=H.pattern||H,z=P.next,x=T;z!==g.tail&&!(F&&x>=F.reach);x+=z.value.length,z=z.next){var te=z.value;if(g.length>f.length)return;if(!(te instanceof o)){var U=1,L;if(Z){if(L=u(D,x,f,ee),!L||L.index>=f.length)break;var he=L.index,W=L.index+L[0].length,w=x;for(w+=z.value.length;he>=w;)z=z.next,w+=z.value.length;if(w-=z.value.length,x=w,z.value instanceof o)continue;for(var ce=z;ce!==g.tail&&(w<W||typeof ce.value=="string");ce=ce.next)U++,w+=ce.value.length;U--,te=f.slice(x,w),L.index-=x}else if(L=u(D,0,te,ee),!L)continue;var he=L.index,ve=L[0],qe=te.slice(0,he),Ie=te.slice(he+ve.length),Ne=x+te.length;F&&Ne>F.reach&&(F.reach=Ne);var Oe=z.prev;qe&&(Oe=h(g,Oe,qe),x+=qe.length),C(g,Oe,U);var Re=new o(q,K?i.tokenize(ve,K):ve,de,ve);if(z=h(g,Oe,Re),Ie&&h(g,z,Ie),U>1){var Ye={cause:q+","+B,reach:Ne};d(f,g,M,z.prev,x,Ye),F&&Ye.reach>F.reach&&(F.reach=Ye.reach)}}}}}}function c(){var f={value:null,prev:null,next:null},g={value:null,prev:f,next:null};f.next=g,this.head=f,this.tail=g,this.length=0}function h(f,g,M){var P=g.next,T={value:M,prev:g,next:P};return g.next=T,P.prev=T,f.length++,T}function C(f,g,M){for(var P=g.next,T=0;T<M&&P!==f.tail;T++)P=P.next;g.next=P,P.prev=g,f.length-=T}function v(f){for(var g=[],M=f.head.next;M!==f.tail;)g.push(M.value),M=M.next;return g}if(!n.document)return n.addEventListener&&(i.disableWorkerMessageHandler||n.addEventListener("message",function(f){var g=JSON.parse(f.data),M=g.language,P=g.code,T=g.immediateClose;n.postMessage(i.highlight(P,i.languages[M],M)),T&&n.close()},!1)),i;var E=i.util.currentScript();E&&(i.filename=E.src,E.hasAttribute("data-manual")&&(i.manual=!0));function p(){i.manual||i.highlightAll()}if(!i.manual){var _=document.readyState;_==="loading"||_==="interactive"&&E&&E.defer?document.addEventListener("DOMContentLoaded",p):window.requestAnimationFrame?window.requestAnimationFrame(p):window.setTimeout(p,16)}return i}(e);s.exports&&(s.exports=t),typeof Xs<"u"&&(Xs.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(a,r){var l={};l["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[r]},l.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:l}};i["language-"+r]={pattern:/[\s\S]+/,inside:t.languages[r]};var o={};o[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:i},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,a){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:t.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var r=n.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading…",a=function(E,p){return"✖ Error "+E+" while fetching file: "+p},r="✖ Error: File does not exist or is empty",l={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},i="data-src-status",o="loading",u="loaded",d="failed",c="pre[data-src]:not(["+i+'="'+u+'"]):not(['+i+'="'+o+'"])';function h(E,p,_){var f=new XMLHttpRequest;f.open("GET",E,!0),f.onreadystatechange=function(){f.readyState==4&&(f.status<400&&f.responseText?p(f.responseText):f.status>=400?_(a(f.status,f.statusText)):_(r))},f.send(null)}function C(E){var p=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(E||"");if(p){var _=Number(p[1]),f=p[2],g=p[3];return f?g?[_,Number(g)]:[_,void 0]:[_,_]}}t.hooks.add("before-highlightall",function(E){E.selector+=", "+c}),t.hooks.add("before-sanity-check",function(E){var p=E.element;if(p.matches(c)){E.code="",p.setAttribute(i,o);var _=p.appendChild(document.createElement("CODE"));_.textContent=n;var f=p.getAttribute("data-src"),g=E.language;if(g==="none"){var M=(/\.(\w+)$/.exec(f)||[,"none"])[1];g=l[M]||M}t.util.setLanguage(_,g),t.util.setLanguage(p,g);var P=t.plugins.autoloader;P&&P.loadLanguages(g),h(f,function(T){p.setAttribute(i,u);var F=C(p.getAttribute("data-range"));if(F){var q=T.split(/\r\n?|\n/g),k=F[0],B=F[1]==null?q.length:F[1];k<0&&(k+=q.length),k=Math.max(0,Math.min(k-1,q.length)),B<0&&(B+=q.length),B=Math.max(0,Math.min(B,q.length)),T=q.slice(k,B).join(`
`),p.hasAttribute("data-start")||p.setAttribute("data-start",String(k+1))}_.textContent=T,t.highlightElement(_)},function(T){p.setAttribute(i,d),_.textContent=T})}}),t.plugins.fileHighlight={highlight:function(p){for(var _=(p||document).querySelectorAll(c),f=0,g;g=_[f++];)t.highlightElement(g)}};var v=!1;t.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Xn);var Pi=Xn.exports;const es=yi(Pi),Ys="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+Ys+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+Ys+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",s=>{s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,t){const n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;const a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};a["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};const r={};r[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:a},Prism.languages.insertBefore("svelte","cdata",r)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Fe="w",xe="b",Ae="p",Is="n",ls="b",Wt="r",vt="q",Te="k",Ps="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",je=-1,Ai={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},J={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},se={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},As={b:[16,32,17,15],w:[-16,-32,-17,-15]},Qs={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Ti=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Li=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Ii={p:1,n:2,b:4,r:8,q:16,k:32},qi="pnbrqkPNBRQK",xs=[Is,ls,Wt,vt],Oi=7,Fi=6,Ni=1,Ri=0,ts={[Te]:J.KSIDE_CASTLE,[vt]:J.QSIDE_CASTLE},pt={w:[{square:se.a1,flag:J.QSIDE_CASTLE},{square:se.h1,flag:J.KSIDE_CASTLE}],b:[{square:se.a8,flag:J.QSIDE_CASTLE},{square:se.h8,flag:J.KSIDE_CASTLE}]},Di={b:Ni,w:Fi},zi=["1-0","0-1","1/2-1/2","*"];function Ct(s){return s>>4}function Gt(s){return s&15}function Yn(s){return"0123456789".indexOf(s)!==-1}function Ke(s){const e=Gt(s),t=Ct(s);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function Kt(s){return s===Fe?xe:Fe}function Ui(s){const e=s.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(e[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const a=e[0].split("/");if(a.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let l=0;l<a.length;l++){let i=0,o=!1;for(let u=0;u<a[l].length;u++)if(Yn(a[l][u])){if(o)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};i+=parseInt(a[l][u],10),o=!0}else{if(!/^[prnbqkPRNBQK]$/.test(a[l][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};i+=1,o=!1}if(i!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const r=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:l,regex:i}of r){if(!i.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${l} king`};if((e[0].match(i)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${l} kings`}}return{ok:!0}}function Bi(s,e){const t=s.from,n=s.to,a=s.piece;let r=0,l=0,i=0;for(let o=0,u=e.length;o<u;o++){const d=e[o].from,c=e[o].to,h=e[o].piece;a===h&&t!==d&&n===c&&(r++,Ct(t)===Ct(d)&&l++,Gt(t)===Gt(d)&&i++)}return r>0?l>0&&i>0?Ke(t):i>0?Ke(t).charAt(1):Ke(t).charAt(0):""}function mt(s,e,t,n,a,r=void 0,l=J.NORMAL){const i=Ct(n);if(a===Ae&&(i===Oi||i===Ri))for(let o=0;o<xs.length;o++){const u=xs[o];s.push({color:e,from:t,to:n,piece:a,captured:r,promotion:u,flags:l|J.PROMOTION})}else s.push({color:e,from:t,to:n,piece:a,captured:r,flags:l})}function Zs(s){let e=s.charAt(0);return e>="a"&&e<="h"?s.match(/[a-h]\d.*[a-h]\d/)?void 0:Ae:(e=e.toLowerCase(),e==="o"?Te:e)}function Ts(s){return s.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Vi{constructor(e=Ps){A(this,"_board",new Array(128));A(this,"_turn",Fe);A(this,"_header",{});A(this,"_kings",{w:je,b:je});A(this,"_epSquare",-1);A(this,"_halfMoves",0);A(this,"_moveNumber",0);A(this,"_history",[]);A(this,"_comments",{});A(this,"_castling",{w:0,b:0});this.load(e)}clear(e=!1){this._board=new Array(128),this._kings={w:je,b:je},this._turn=Fe,this._castling={w:0,b:0},this._epSquare=je,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._updateSetup(this.fen())}removeHeader(e){e in this._header&&delete this._header[e]}load(e,t=!1){let n=e.split(/\s+/);if(n.length>=2&&n.length<6){const o=["-","-","0","1"];e=n.concat(o.slice(-(6-n.length))).join(" ")}n=e.split(/\s+/);const{ok:a,error:r}=Ui(e);if(!a)throw new Error(r);const l=n[0];let i=0;this.clear(t);for(let o=0;o<l.length;o++){const u=l.charAt(o);if(u==="/")i+=8;else if(Yn(u))i+=parseInt(u,10);else{const d=u<"a"?Fe:xe;this.put({type:u.toLowerCase(),color:d},Ke(i)),i++}}this._turn=n[1],n[2].indexOf("K")>-1&&(this._castling.w|=J.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(this._castling.w|=J.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(this._castling.b|=J.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(this._castling.b|=J.QSIDE_CASTLE),this._epSquare=n[3]==="-"?je:se[n[3]],this._halfMoves=parseInt(n[4],10),this._moveNumber=parseInt(n[5],10),this._updateSetup(this.fen())}fen(){var r,l;let e=0,t="";for(let i=se.a8;i<=se.h1;i++){if(this._board[i]){e>0&&(t+=e,e=0);const{color:o,type:u}=this._board[i];t+=o===Fe?u.toUpperCase():u.toLowerCase()}else e++;i+1&136&&(e>0&&(t+=e),i!==se.h1&&(t+="/"),e=0,i+=8)}let n="";this._castling[Fe]&J.KSIDE_CASTLE&&(n+="K"),this._castling[Fe]&J.QSIDE_CASTLE&&(n+="Q"),this._castling[xe]&J.KSIDE_CASTLE&&(n+="k"),this._castling[xe]&J.QSIDE_CASTLE&&(n+="q"),n=n||"-";let a="-";if(this._epSquare!==je){const i=this._epSquare+(this._turn===Fe?16:-16),o=[i+1,i-1];for(const u of o){if(u&136)continue;const d=this._turn;if(((r=this._board[u])==null?void 0:r.color)===d&&((l=this._board[u])==null?void 0:l.type)===Ae){this._makeMove({color:d,from:u,to:this._epSquare,piece:Ae,captured:Ae,flags:J.EP_CAPTURE});const c=!this._isKingAttacked(d);if(this._undoMove(),c){a=Ke(this._epSquare);break}}}}return[t,this._turn,n,a,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==Ps?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(Ps)}get(e){return this._board[se[e]]||!1}put({type:e,color:t},n){if(qi.indexOf(e.toLowerCase())===-1||!(n in se))return!1;const a=se[n];return e==Te&&!(this._kings[t]==je||this._kings[t]==a)?!1:(this._board[a]={type:e,color:t},e===Te&&(this._kings[t]=a),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}remove(e){const t=this.get(e);return delete this._board[se[e]],t&&t.type===Te&&(this._kings[t.color]=je),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){var n,a,r,l,i,o,u,d,c,h,C,v;const e=((n=this._board[se.e1])==null?void 0:n.type)===Te&&((a=this._board[se.e1])==null?void 0:a.color)===Fe,t=((r=this._board[se.e8])==null?void 0:r.type)===Te&&((l=this._board[se.e8])==null?void 0:l.color)===xe;(!e||((i=this._board[se.a1])==null?void 0:i.type)!==Wt||((o=this._board[se.a1])==null?void 0:o.color)!==Fe)&&(this._castling.w&=~J.QSIDE_CASTLE),(!e||((u=this._board[se.h1])==null?void 0:u.type)!==Wt||((d=this._board[se.h1])==null?void 0:d.color)!==Fe)&&(this._castling.w&=~J.KSIDE_CASTLE),(!t||((c=this._board[se.a8])==null?void 0:c.type)!==Wt||((h=this._board[se.a8])==null?void 0:h.color)!==xe)&&(this._castling.b&=~J.QSIDE_CASTLE),(!t||((C=this._board[se.h8])==null?void 0:C.type)!==Wt||((v=this._board[se.h8])==null?void 0:v.color)!==xe)&&(this._castling.b&=~J.KSIDE_CASTLE)}_updateEnPassantSquare(){var r,l;if(this._epSquare===je)return;const e=this._epSquare+(this._turn===Fe?-16:16),t=this._epSquare+(this._turn===Fe?16:-16),n=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((r=this._board[t])==null?void 0:r.color)!==Kt(this._turn)||((l=this._board[t])==null?void 0:l.type)!==Ae){this._epSquare=je;return}const a=i=>{var o,u;return!(i&136)&&((o=this._board[i])==null?void 0:o.color)===this._turn&&((u=this._board[i])==null?void 0:u.type)===Ae};n.some(a)||(this._epSquare=je)}_attacked(e,t){for(let n=se.a8;n<=se.h1;n++){if(n&136){n+=7;continue}if(this._board[n]===void 0||this._board[n].color!==e)continue;const a=this._board[n],r=n-t;if(r===0)continue;const l=r+119;if(Ti[l]&Ii[a.type]){if(a.type===Ae){if(r>0){if(a.color===Fe)return!0}else if(a.color===xe)return!0;continue}if(a.type==="n"||a.type==="k")return!0;const i=Li[l];let o=n+i,u=!1;for(;o!==t;){if(this._board[o]!=null){u=!0;break}o+=i}if(!u)return!0}}return!1}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(Kt(e),t)}isAttacked(e,t){return this._attacked(t,se[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let n=0,a=0;for(let r=se.a8;r<=se.h1;r++){if(a=(a+1)%2,r&136){r+=7;continue}const l=this._board[r];l&&(e[l.type]=l.type in e?e[l.type]+1:1,l.type===ls&&t.push(a),n++)}if(n===2)return!0;if(n===3&&(e[ls]===1||e[Is]===1))return!0;if(n===e[ls]+2){let r=0;const l=t.length;for(let i=0;i<l;i++)r+=t[i];if(r===0||r===l)return!0}return!1}isThreefoldRepetition(){const e=[],t={};let n=!1;for(;;){const a=this._undoMove();if(!a)break;e.push(a)}for(;;){const a=this.fen().split(" ").slice(0,4).join(" ");t[a]=a in t?t[a]+1:1,t[a]>=3&&(n=!0);const r=e.pop();if(r)this._makeMove(r);else break}return n}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:n=void 0}={}){const a=this._moves({square:t,piece:n});return e?a.map(r=>this._makePretty(r)):a.map(r=>this._moveToSan(r,a))}_moves({legal:e=!0,piece:t=void 0,square:n=void 0}={}){var C;const a=n?n.toLowerCase():void 0,r=t==null?void 0:t.toLowerCase(),l=[],i=this._turn,o=Kt(i);let u=se.a8,d=se.h1,c=!1;if(a)if(a in se)u=d=se[a],c=!0;else return[];for(let v=u;v<=d;v++){if(v&136){v+=7;continue}if(!this._board[v]||this._board[v].color===o)continue;const{type:E}=this._board[v];let p;if(E===Ae){if(r&&r!==E)continue;p=v+As[i][0],this._board[p]||(mt(l,i,v,p,Ae),p=v+As[i][1],Di[i]===Ct(v)&&!this._board[p]&&mt(l,i,v,p,Ae,void 0,J.BIG_PAWN));for(let _=2;_<4;_++)p=v+As[i][_],!(p&136)&&(((C=this._board[p])==null?void 0:C.color)===o?mt(l,i,v,p,Ae,this._board[p].type,J.CAPTURE):p===this._epSquare&&mt(l,i,v,p,Ae,Ae,J.EP_CAPTURE))}else{if(r&&r!==E)continue;for(let _=0,f=Qs[E].length;_<f;_++){const g=Qs[E][_];for(p=v;p+=g,!(p&136);){if(!this._board[p])mt(l,i,v,p,E);else{if(this._board[p].color===i)break;mt(l,i,v,p,E,this._board[p].type,J.CAPTURE);break}if(E===Is||E===Te)break}}}}if((r===void 0||r===Te)&&(!c||d===this._kings[i])){if(this._castling[i]&J.KSIDE_CASTLE){const v=this._kings[i],E=v+2;!this._board[v+1]&&!this._board[E]&&!this._attacked(o,this._kings[i])&&!this._attacked(o,v+1)&&!this._attacked(o,E)&&mt(l,i,this._kings[i],E,Te,void 0,J.KSIDE_CASTLE)}if(this._castling[i]&J.QSIDE_CASTLE){const v=this._kings[i],E=v-2;!this._board[v-1]&&!this._board[v-2]&&!this._board[v-3]&&!this._attacked(o,this._kings[i])&&!this._attacked(o,v-1)&&!this._attacked(o,E)&&mt(l,i,this._kings[i],E,Te,void 0,J.QSIDE_CASTLE)}}if(!e||this._kings[i]===-1)return l;const h=[];for(let v=0,E=l.length;v<E;v++)this._makeMove(l[v]),this._isKingAttacked(i)||h.push(l[v]),this._undoMove();return h}move(e,{strict:t=!1}={}){let n=null;if(typeof e=="string")n=this._moveFromSan(e,t);else if(typeof e=="object"){const r=this._moves();for(let l=0,i=r.length;l<i;l++)if(e.from===Ke(r[l].from)&&e.to===Ke(r[l].to)&&(!("promotion"in r[l])||e.promotion===r[l].promotion)){n=r[l];break}}if(!n)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const a=this._makePretty(n);return this._makeMove(n),a}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const t=this._turn,n=Kt(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&J.EP_CAPTURE&&(this._turn===xe?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===Te){if(this._kings[t]=e.to,e.flags&J.KSIDE_CASTLE){const a=e.to-1,r=e.to+1;this._board[a]=this._board[r],delete this._board[r]}else if(e.flags&J.QSIDE_CASTLE){const a=e.to+1,r=e.to-2;this._board[a]=this._board[r],delete this._board[r]}this._castling[t]=0}if(this._castling[t]){for(let a=0,r=pt[t].length;a<r;a++)if(e.from===pt[t][a].square&&this._castling[t]&pt[t][a].flag){this._castling[t]^=pt[t][a].flag;break}}if(this._castling[n]){for(let a=0,r=pt[n].length;a<r;a++)if(e.to===pt[n][a].square&&this._castling[n]&pt[n][a].flag){this._castling[n]^=pt[n][a].flag;break}}e.flags&J.BIG_PAWN?t===xe?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=je,e.piece===Ae?this._halfMoves=0:e.flags&(J.CAPTURE|J.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===xe&&this._moveNumber++,this._turn=n}undo(){const e=this._undoMove();return e?this._makePretty(e):null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const n=this._turn,a=Kt(n);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)if(t.flags&J.EP_CAPTURE){let r;n===xe?r=t.to-16:r=t.to+16,this._board[r]={type:Ae,color:a}}else this._board[t.to]={type:t.captured,color:a};if(t.flags&(J.KSIDE_CASTLE|J.QSIDE_CASTLE)){let r,l;t.flags&J.KSIDE_CASTLE?(r=t.to+1,l=t.to-1):(r=t.to-2,l=t.to+1),this._board[r]=this._board[l],delete this._board[l]}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const n=[];let a=!1;for(const h in this._header)n.push("["+h+' "'+this._header[h]+'"]'+e),a=!0;a&&this._history.length&&n.push(e);const r=h=>{const C=this._comments[this.fen()];if(typeof C<"u"){const v=h.length>0?" ":"";h=`${h}${v}{${C}}`}return h},l=[];for(;this._history.length>0;)l.push(this._undoMove());const i=[];let o="";for(l.length===0&&i.push(r(""));l.length>0;){o=r(o);const h=l.pop();if(!h)break;if(!this._history.length&&h.color==="b"){const C=`${this._moveNumber}. ...`;o=o?`${o} ${C}`:C}else h.color==="w"&&(o.length&&i.push(o),o=this._moveNumber+".");o=o+" "+this._moveToSan(h,this._moves({legal:!0})),this._makeMove(h)}if(o.length&&i.push(r(o)),typeof this._header.Result<"u"&&i.push(this._header.Result),t===0)return n.join("")+i.join(" ");const u=function(){return n.length>0&&n[n.length-1]===" "?(n.pop(),!0):!1},d=function(h,C){for(const v of C.split(" "))if(v){if(h+v.length>t){for(;u();)h--;n.push(e),h=0}n.push(v),h+=v.length,n.push(" "),h++}return u()&&h--,h};let c=0;for(let h=0;h<i.length;h++){if(c+i[h].length>t&&i[h].includes("{")){c=d(c,i[h]);continue}c+i[h].length>t&&h!==0?(n[n.length-1]===" "&&n.pop(),n.push(e),c=0):h!==0&&(n.push(" "),c++),n.push(i[h]),c+=i[h].length}return n.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{strict:t=!1,newlineChar:n=`\r?
`}={}){function a(g){return g.replace(/\\/g,"\\")}function r(g){const M={},P=g.split(new RegExp(a(n)));let T="",F="";for(let q=0;q<P.length;q++){const k=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;T=P[q].replace(k,"$1"),F=P[q].replace(k,"$2"),T.trim().length>0&&(M[T]=F)}return M}e=e.trim();const i=new RegExp("^(\\[((?:"+a(n)+")|.)*\\])((?:\\s*"+a(n)+"){2}|(?:\\s*"+a(n)+")*$)").exec(e),o=i&&i.length>=2?i[1]:"";this.reset();const u=r(o);let d="";for(const g in u)g.toLowerCase()==="fen"&&(d=u[g]),this.header(g,u[g]);if(!t)d&&this.load(d,!0);else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,!0)}function c(g){return Array.from(g).map(function(M){return M.charCodeAt(0)<128?M.charCodeAt(0).toString(16):encodeURIComponent(M).replace(/%/g,"").toLowerCase()}).join("")}function h(g){return g.length==0?"":decodeURIComponent("%"+(g.match(/.{1,2}/g)||[]).join("%"))}const C=function(g){return g=g.replace(new RegExp(a(n),"g")," "),`{${c(g.slice(1,g.length-1))}}`},v=function(g){if(g.startsWith("{")&&g.endsWith("}"))return h(g.slice(1,g.length-1))};let E=e.replace(o,"").replace(new RegExp(`({[^}]*})+?|;([^${a(n)}]*)`,"g"),function(g,M,P){return M!==void 0?C(M):" "+C(`{${P.slice(1)}}`)}).replace(new RegExp(a(n),"g")," ");const p=/(\([^()]+\))+?/g;for(;p.test(E);)E=E.replace(p,"");E=E.replace(/\d+\.(\.\.)?/g,""),E=E.replace(/\.\.\./g,""),E=E.replace(/\$\d+/g,"");let _=E.trim().split(new RegExp(/\s+/));_=_.filter(g=>g!=="");let f="";for(let g=0;g<_.length;g++){const M=v(_[g]);if(M!==void 0){this._comments[this.fen()]=M;continue}const P=this._moveFromSan(_[g],t);if(P==null)if(zi.indexOf(_[g])>-1)f=_[g];else throw new Error(`Invalid move in PGN: ${_[g]}`);else f="",this._makeMove(P)}f&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",f)}_moveToSan(e,t){let n="";if(e.flags&J.KSIDE_CASTLE)n="O-O";else if(e.flags&J.QSIDE_CASTLE)n="O-O-O";else{if(e.piece!==Ae){const a=Bi(e,t);n+=e.piece.toUpperCase()+a}e.flags&(J.CAPTURE|J.EP_CAPTURE)&&(e.piece===Ae&&(n+=Ke(e.from)[0]),n+="x"),n+=Ke(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(e,t=!1){const n=Ts(e);let a=Zs(n),r=this._moves({legal:!0,piece:a});for(let h=0,C=r.length;h<C;h++)if(n===Ts(this._moveToSan(r[h],r)))return r[h];if(t)return null;let l,i,o,u,d,c=!1;if(i=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),i?(l=i[1],o=i[2],u=i[3],d=i[4],o.length==1&&(c=!0)):(i=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),i&&(l=i[1],o=i[2],u=i[3],d=i[4],o.length==1&&(c=!0))),a=Zs(n),r=this._moves({legal:!0,piece:l||a}),!u)return null;for(let h=0,C=r.length;h<C;h++)if(o){if((!l||l.toLowerCase()==r[h].piece)&&se[o]==r[h].from&&se[u]==r[h].to&&(!d||d.toLowerCase()==r[h].promotion))return r[h];if(c){const v=Ke(r[h].from);if((!l||l.toLowerCase()==r[h].piece)&&se[u]==r[h].to&&(o==v[0]||o==v[1])&&(!d||d.toLowerCase()==r[h].promotion))return r[h]}}else if(n===Ts(this._moveToSan(r[h],r)).replace("x",""))return r[h];return null}ascii(){let e=`   +------------------------+
`;for(let t=se.a8;t<=se.h1;t++){if(Gt(t)===0&&(e+=" "+"87654321"[Ct(t)]+" |"),this._board[t]){const n=this._board[t].type,r=this._board[t].color===Fe?n.toUpperCase():n.toLowerCase();e+=" "+r+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let n=0;const a=this._turn;for(let r=0,l=t.length;r<l;r++)this._makeMove(t[r]),this._isKingAttacked(a)||(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}_makePretty(e){const{color:t,piece:n,from:a,to:r,flags:l,captured:i,promotion:o}=e;let u="";for(const C in J)J[C]&l&&(u+=Ai[C]);const d=Ke(a),c=Ke(r),h={color:t,piece:n,from:d,to:c,san:this._moveToSan(e,this._moves({legal:!0})),flags:u,lan:d+c,before:this.fen(),after:""};return this._makeMove(e),h.after=this.fen(),this._undoMove(),i&&(h.captured=i),o&&(h.promotion=o,h.lan+=o),h}turn(){return this._turn}board(){const e=[];let t=[];for(let n=se.a8;n<=se.h1;n++)this._board[n]==null?t.push(null):t.push({square:Ke(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e}squareColor(e){if(e in se){const t=se[e];return(Ct(t)+Gt(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],n=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const a=t.pop();if(!a)break;e?n.push(this._makePretty(a)):n.push(this._moveToSan(a,this._moves())),this._makeMove(a)}return n}_pruneComments(){const e=[],t={},n=a=>{a in this._comments&&(t[a]=this._comments[a])};for(;this._history.length>0;)e.push(this._undoMove());for(n(this.fen());;){const a=e.pop();if(!a)break;this._makeMove(a),n(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const a of[Te,vt])t[a]!==void 0&&(t[a]?this._castling[e]|=ts[a]:this._castling[e]&=~ts[a]);this._updateCastlingRights();const n=this.getCastlingRights(e);return(t[Te]===void 0||t[Te]===n[Te])&&(t[vt]===void 0||t[vt]===n[vt])}getCastlingRights(e){return{[Te]:(this._castling[e]&ts[Te])!==0,[vt]:(this._castling[e]&ts[vt])!==0}}moveNumber(){return this._moveNumber}}class Hi{constructor(e){A(this,"boardTheme");A(this,"skins");A(this,"mouseEvents");A(this,"flipped");A(this,"notation");A(this,"startFen");A(this,"startPieces");A(this,"size");A(this,"scale");A(this,"resizible");A(this,"defaultState",{boardTheme:"standard",skins:{enabled:!1,urls:{}},mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:xn,startPieces:[],size:0,scale:70,resizible:!1});A(this,"setConfigSettings",e=>{var t,n;e!==void 0&&(this.boardTheme=(e==null?void 0:e.boardTheme)??this.boardTheme,this.skins.enabled=((t=e==null?void 0:e.skins)==null?void 0:t.enabled)??this.skins.enabled,this.skins.urls=((n=e==null?void 0:e.skins)==null?void 0:n.urls)??this.skins.urls,this.mouseEvents=(e==null?void 0:e.mouseEvents)??this.mouseEvents,this.flipped=(e==null?void 0:e.flipped)??this.flipped,this.notation=(e==null?void 0:e.notation)??this.notation,this.startFen=(e==null?void 0:e.startFen)??this.startFen,this.startPieces=(e==null?void 0:e.startPieces)??this.startPieces,this.scale=(e==null?void 0:e.scale)??this.scale,this.resizible=(e==null?void 0:e.resizible)??this.resizible)});A(this,"getConfig",()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.skins!==this.defaultState.skins&&{piecesTheme:this.skins},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...this.scale!==this.defaultState.scale&&{scale:this.scale},...this.resizible!==this.defaultState.resizible&&{resizible:this.resizible}};if(Object.keys(e).length!==0)return e});this.boardTheme=this.defaultState.boardTheme,this.skins=this.defaultState.skins,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.startPieces=this.defaultState.startPieces,this.size=this.defaultState.size,this.scale=this.defaultState.scale,this.resizible=this.defaultState.resizible,this.setConfigSettings(e)}}class ji{constructor(e){A(this,"enabled");A(this,"color");A(this,"defaultState",{enabled:!0,color:"BOTH"});A(this,"setConfigSettings",e=>{switch(e){case!0:this.enabled=!0,this.color="BOTH";break;case!1:this.enabled=!1;break;case"WHITE":this.enabled=!0,this.color="WHITE";break;case"BLACK":this.enabled=!0,this.color="BLACK";break}});A(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class Ki{constructor(e){A(this,"enabled");A(this,"ghostPiece");A(this,"transition");A(this,"defaultState",{enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut",clickMoveAnimation:!0}}});A(this,"setConfigSettings",e=>{var t,n,a;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,((t=e==null?void 0:e.transition)==null?void 0:t.duration)!==void 0&&(this.transition.settings.duration=e.transition.duration),((n=e==null?void 0:e.transition)==null?void 0:n.easing)!==void 0&&(this.transition.settings.easing=e.transition.easing),((a=e==null?void 0:e.transition)==null?void 0:a.clickMoveAnimation)!==void 0&&(this.transition.settings.clickMoveAnimation=e.transition.clickMoveAnimation)))))});A(this,"getConfig",()=>{const e={},t={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(t.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(t.easing=this.transition.settings.easing),this.transition.settings.clickMoveAnimation!==this.defaultState.transition.settings.clickMoveAnimation&&(t.clickMoveAnimation=this.transition.settings.clickMoveAnimation),Object.keys(t).length!==0&&(e.transition=t)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class Wi{constructor(e){A(this,"enabled");A(this,"selectedPiece");A(this,"defaultState",{enabled:!0,selectedPiece:void 0});A(this,"setConfigSettings",e=>{e!==void 0&&(this.enabled=e)});A(this,"getConfig",()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class Gi{constructor(e){A(this,"enabled");A(this,"whiteToMove");A(this,"moves");A(this,"settings");A(this,"preMoves");A(this,"lastMove");A(this,"checkSquare");A(this,"defaultState",{enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!1,allowEnPassant:!1,allowCastling:!1},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0});A(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?(this.enabled=!0,this.settings.allowCastling=!0,this.settings.allowEnPassant=!0,this.settings.allowPromotion=!0):e===!1?this.enabled=!1:(e.enabled!==void 0&&(this.enabled=e.enabled),e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))});A(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled});this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class Xi{constructor(e){A(this,"enabled");A(this,"settings");A(this,"defaultState",{enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}});A(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))});A(this,"getConfig",()=>{const e={},t=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(t.forEach(n=>{this.settings[n]!==this.defaultState.settings[n]&&(e[n]=this.settings[n])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class Yi{constructor(e){A(this,"enabled");A(this,"tools");A(this,"settings");A(this,"defaultState",{enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}});A(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.knightLShape!==void 0&&(this.settings.knightLShape=e.knightLShape),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))});A(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(e.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class Qi{constructor(e){A(this,"enabled");A(this,"settings");A(this,"defaultState",{enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}});A(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))});A(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class xi{constructor(e){A(this,"getLegalMoves");A(this,"getPreMoves");A(this,"beforeMove");A(this,"afterMove");A(this,"getLastMove");A(this,"getInCheck");A(this,"getWhiteToMove");A(this,"defaultState",{getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0});A(this,"setConfigSettings",e=>{e!==void 0&&(e.getLegalMoves&&(this.getLegalMoves=e.getLegalMoves),e.getPreMoves&&(this.getPreMoves=e.getPreMoves),e.beforeMove&&(this.beforeMove=e.beforeMove),e.afterMove&&(this.afterMove=e.afterMove),e.getLastMove&&(this.getLastMove=e.getLastMove),e.getInCheck&&(this.getInCheck=e.getInCheck),e.getWhiteToMove&&(this.getWhiteToMove=e.getWhiteToMove))});A(this,"getConfig",()=>{const e={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(e).length>0?e:void 0});this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}class Qn{constructor(e){A(this,"idMap",new Map);A(this,"squareMap",new Map);A(this,"nameMap",new Map);A(this,"usedIdMap",new Map);A(this,"getEmptyId",e=>{this.usedIdMap.has(e)||this.usedIdMap.set(e,[]);const t=this.usedIdMap.get(e);if(!t)throw new Error("usedIds is undefined");const n=t.length===0?0:t[t.length-1]+1;if(n===void 0)throw new Error("id is undefined");return t.push(n),`${e}${n}`});A(this,"clearId",e=>{const t=e.substring(0,2),n=this.usedIdMap.get(t);if(!n)throw new Error(`emptyIdMap has no name ${t}`);n.splice(n.indexOf(parseInt(e.substring(2,e.length),10)),1)});A(this,"forEach",(...e)=>{this.idMap.forEach(...e)});e?typeof e=="string"?this.initPieces(e):this.initPieces(e):this.initPieces(xn)}initPieces(e){typeof e=="string"?this.initFromFen(e):this.initFromPieces(e)}clearPieces(e){e?this.idMap.forEach(t=>{t.name===e&&this.removePieceById(t.id)}):(this.idMap.clear(),this.squareMap.clear(),this.usedIdMap.clear(),this.nameMap.clear())}setPiece(e,t){let n;if(typeof e=="string"){if(!t)return;const i=e;n={id:this.getEmptyId(t),square:i,name:t}}else n={...e};this.removePieceById(n.id),this.removePieceBySquare(n.square),this.idMap.set(n.id,n),this.squareMap.set(n.square,n),this.nameMap.has(n.name)||this.nameMap.set(n.name,[]);const a=this.nameMap.get(n.name);if(!a)throw new Error("pieces is undefined");a.push(n),this.usedIdMap.has(n.name)||this.usedIdMap.set(n.name,[]);const r=this.usedIdMap.get(n.name);if(!r)throw new Error("usedIds is undefined");const l=parseInt(n.id.substring(2,n.id.length),10);r.includes(l)||(r.push(l),r.sort((i,o)=>i-o))}removePieceById(e){const t=this.idMap.get(e);if(!t)return;this.idMap.delete(e),this.squareMap.delete(t.square);const n=this.nameMap.get(t.name);if(!n)throw new Error("pieces is undefined");return n.splice(n.indexOf(t),1),this.clearId(e),t}removePieceBySquare(e){const t=this.squareMap.get(e);if(!t)return;this.idMap.delete(t.id),this.squareMap.delete(t.square);const n=this.nameMap.get(t.name);if(!n)throw new Error("pieces is undefined");return n.splice(n.indexOf(t),1),this.clearId(t.id),t}makeMove(e){const t=e.substring(0,2),n=e.substring(2,4),a=e.substring(4);if(t===n)return;const r=this.squareMap.get(t);if(!r)return;const l=this.squareMap.get(n);if(l&&this.removePieceById(l.id),this.squareMap.delete(r.square),r.square=n,this.squareMap.set(n,r),!a)return;this.idMap.delete(r.id);const i=this.nameMap.get(r.name);if(!i)throw new Error("pieces is undefined");i.splice(i.indexOf(r),1),r.name=`${r.name[0]}${a.toUpperCase()}`,this.clearId(r.id),r.id=this.getEmptyId(r.name),this.idMap.set(r.id,r)}initFromFen(e){this.clearPieces();const n=e.split(" ")[0].split("/");for(let a=0;a<8;a++){let r=0;const l=n[a];for(let i=0;i<l.length;i++){const o=l[i];if(Number.isNaN(+o)){const u=`${String.fromCharCode(97+r)}${8-a}`,d=o===o.toUpperCase()?`w${o.toUpperCase()}`:`b${o.toUpperCase()}`;this.setPiece(u,d),r++}else r+=+o}}}initFromPieces(e){this.clearPieces();for(const t of e){const n={...t};this.setPiece(n)}for(const[,t]of this.usedIdMap)t.sort((n,a)=>n-a)}get size(){return this.idMap.size}getPieceArray(){return[...this.idMap].map(([,e])=>({...e}))}}const xn="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Zn{constructor(e){A(this,"pieces");A(this,"markedSquares");A(this,"board");A(this,"movable");A(this,"draggable");A(this,"selectable");A(this,"legal");A(this,"callbacks");A(this,"highlight");A(this,"drawTools");A(this,"sounds");A(this,"getConfig",()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}));this.pieces=new Qn,this.markedSquares=new Set,this.board=new Hi(e==null?void 0:e.board),this.movable=new ji(e==null?void 0:e.movable),this.draggable=new Ki(e==null?void 0:e.draggable),this.selectable=new Wi(e==null?void 0:e.selectable),this.legal=new Gi(e==null?void 0:e.legal),this.callbacks=new xi(e==null?void 0:e.callbacks),this.highlight=new Xi(e==null?void 0:e.highlight),this.drawTools=new Yi(e==null?void 0:e.drawTools),this.sounds=new Qi(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){this.legalEnabled&&(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){this.preMovesEnabled&&(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.legal.preMoves.curMove}set currentPreMove(e){this.legal.preMoves.curMove=e}get selectableEnabled(){return this.selectable.enabled}get draggableEnabled(){return this.draggable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){this.legalEnabled&&(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4&&e!==""||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const Zi=["a","b","c","d","e","f","g","h"],Ji=["8","7","6","5","4","3","2","1"];function os(s){return{x:Zi.indexOf(s[0]),y:Ji.indexOf(s[1])}}function qs(s){return s.charCodeAt(0)-97}function $i(s){return 8-parseInt(s,10)}const ea=s=>{let e="",t=0;for(let n=0;n<s.length;n++){n!==0&&(e+="/");for(let a=0;a<s[n].length;a++){const r=s[n][a];r!=null&&t===0?r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase():r!=null&&t!==0?(e+=t.toString(),t=0,r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase()):t++}t!==0&&(e+=t.toString(),t=0)}return e},ta="8/8/8/8/8/8/8/8 w - - 0 1",ps=class ps{constructor(e){A(this,"letters",{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7});A(this,"state");A(this,"changeLegalHoverIfNeeded",e=>{if(e.color!=="LEGAL"&&e.color!=="PREMOVE")return;this.state.pieces.squareMap.get(e.square)&&(e.color=e.color==="LEGAL"?"LEGALHOVER":"PREMOVEHOVER")});A(this,"highlightSquare",(e,t)=>{const n={square:e,color:t};this.state.markedSquares.forEach(a=>{a.square===e&&a.color!=="MOVE"&&a.color!=="CHECK"&&this.state.markedSquares.delete(a)}),this.changeLegalHoverIfNeeded(n),this.state.markedSquares.add(n)});A(this,"legalHover",(e,t="LEGAL")=>{e!==void 0&&this.state.markedSquares.forEach(n=>{n.square===e&&n.color===t?n.color=t==="LEGAL"?"LEGALHOVER":"PREMOVEHOVER":n.square!==e&&n.color===(t==="LEGAL"?"LEGALHOVER":"PREMOVEHOVER")&&!this.state.pieces.squareMap.has(n.square)&&(n.color=t)})});A(this,"toggleSquareHighlight",(e,t)=>{const n={square:e,color:t};let a=!1;return this.state.markedSquares.forEach(r=>{r.square===e&&(this.state.markedSquares.delete(r),r.color===t&&(a=!0))}),this.changeLegalHoverIfNeeded(n),a?!0:(this.state.markedSquares.add(n),!1)});A(this,"getSelectedSquare",()=>{let e="";return this.state.markedSquares.forEach(t=>{t.color==="SELECT"&&(e=t.square)}),e});A(this,"clearSquare",(e,t)=>{e.length===2&&this.state.markedSquares.forEach(n=>{n.square===e&&(n.color===t||t===void 0)&&this.state.markedSquares.delete(n)})});A(this,"clearAllSquares",e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(t=>{t.color===e&&this.state.markedSquares.delete(t)})});A(this,"removePiece",e=>this.state.pieces.removePieceBySquare(e));A(this,"clearAllPieces",e=>{this.state.pieces.clearPieces(e)});A(this,"getGridCoordsFromSquare",e=>{if(!ps.isValidThing({square:e}))return{x:0,y:0};const t=e[0],n=e[1],a=this.state.board.flipped?Math.abs(this.letters[t]-7):this.letters[t],r=this.state.board.flipped?Math.abs(parseInt(n,10)-8):parseInt(n,10)-1;return typeof a!="number"||r<0||r>7?{x:0,y:0}:{x:a,y:r}});A(this,"makeMove",e=>{this.state.pieces.makeMove(e)});A(this,"setGhostPiece",e=>{this.state.draggable.ghostPiece.piece=e});A(this,"removeGhostPiece",()=>{this.state.draggable.ghostPiece.piece=void 0});A(this,"isCastling",e=>{const t=e.slice(0,2),n=this.getPieceFromSquare(t);return!n||n.name[1]!=="K"?!1:e==="e1g1"||e==="e1c1"||e==="e8g8"||e==="e8c8"});A(this,"getRookMoveIfIsCastling",e=>{if(!this.isCastling(e))return null;switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return null}});A(this,"isEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const t=this.getPieceFromSquare(e.substring(0,2));return!(t===void 0||t.name!=="wP"&&t.name!=="bP")});A(this,"getCapturedPawnSquareIfIsEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const t=this.getPieceFromSquare(e.substring(0,2));if(t===void 0||t.name!=="wP"&&t.name!=="bP")return;const n=`${e[2]}${(parseInt(e[3],10)+(t.name==="wP"?-1:1)).toString()}`;if(this.state.legal.lastMove.substring(2,4)!==n)return;const a=this.getPieceFromSquare(n);if(!(!a||a.name[1]!=="P")&&Math.abs(parseInt(this.state.legal.lastMove[1],10)-parseInt(this.state.legal.lastMove[3],10))===2)return n});A(this,"isCapture",e=>!!this.getPieceFromSquare(e.substring(2,4)));A(this,"isPromotion",e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const t=this.getPieceFromSquare(e.substring(0,2));return!(t&&(t.name[1]!=="P"||t.name[0]==="w"&&e[3]==="1"||t.name[0]==="b"&&e[3]==="8"))});A(this,"callbackExists",e=>this.state.callbacks[e]!==void 0);A(this,"flipBoard",e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped});A(this,"setConfigSettings",e=>{this.state.setConfigSettings(e)});this.state=new Zn(e),this.state.board.startPieces.length!==0?this.state.pieces.initPieces(this.state.board.startPieces):this.state.pieces.initPieces(this.state.board.startFen)}setPiece(e,t){typeof e=="string"&&t?this.state.pieces.setPiece(e,t):typeof e!="string"&&this.state.pieces.setPiece(e)}updatePieces(e){if(this.state.board.skins.enabled&&typeof e=="string")throw new Error("Cannot update pieces with skins enabled");if(typeof e!="string"){this.state.pieces.initPieces(e);return}const t=new Qn(e),n=[],a=[];this.state.pieces.idMap.forEach(r=>{const l=t.squareMap.get(r.square);(!l||l.name!==r.name)&&n.push(r)}),n.forEach(r=>{this.state.pieces.removePieceById(r.id)}),t.idMap.forEach(r=>{const l=this.state.pieces.squareMap.get(r.square);if(!l||l.name!==r.name){for(let i=0;i<n.length;i++)if(n[i].name===r.name){n[i].square=r.square,this.state.pieces.setPiece(n[i]),n.splice(i,1);return}a.push(r)}}),a.forEach(r=>{this.state.pieces.setPiece(r.square,r.name)})}getWhiteKingSquare(){var e;return(e=this.state.pieces.idMap.get("wK0"))==null?void 0:e.square}getBlackKingSquare(){var e;return(e=this.state.pieces.idMap.get("bK0"))==null?void 0:e.square}getShortFEN(){if(this.state.pieces.size===0)return ta;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(t=>{e[$i(t.square[1])][qs(t.square[0])]=t.name}),ea(e)}getPieceFromSquare(e){if(e)return this.state.pieces.squareMap.get(e)}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get draggableEnabled(){return this.state.draggableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}};A(ps,"isValidThing",e=>{const{square:t,piece:n,move:a}=e;return!(t&&t.length!==2||n&&n.length!==2||a&&a.length!==4&&a.length!==5)});let Os=ps;const sa={LEGAL:"legal cursor-pointer",LEGALHOVER:"legal-h cursor-pointer",SELECT:"select",MOVE:"move",NEXTMOVE:"nextMove",PREMOVE:"preMove cursor-pointer",PREMOVEHOVER:"preMove-h cursor-pointer",CHECK:"check"},na={white:"#f0d9b5",black:"#b58863"},ia="standard.svg",aa={LEGAL:"legal cursor-pointer",LEGALHOVER:"legal-h cursor-pointer",SELECT:"select-db",MOVE:"move-db",NEXTMOVE:"nextMove",PREMOVE:"preMove cursor-pointer",PREMOVEHOVER:"preMove-h cursor-pointer",CHECK:"check"},ra={white:"#94A3B8",black:"#475569"},la="darkBlue.svg",Ze={squareStyles:{standard:sa,darkBlue:aa},colors:{standard:na,darkBlue:ra},imageName:{standard:ia,darkBlue:la}};function Js(s,e,t){const n=s.slice();return n[6]=e[t],n[8]=t,n}function $s(s,e,t){const n=s.slice();return n[6]=e[t],n[8]=t,n}function en(s){let e,t=s[4][s[1]?Math.abs(s[8]-7):s[8]]+"",n,a;return{c(){e=N("span"),n=We(t),a=X(),this.h()},l(r){e=R(r,"SPAN",{"data-file":!0,style:!0,class:!0});var l=V(e);n=Ge(l,t),a=Y(l),l.forEach(S),this.h()},h(){b(e,"data-file",s[6]),Xe(e,"--font-size",s[3]+"px"),Xe(e,"color",s[8]%2===0?Ze.colors[s[0]].white:Ze.colors[s[0]].black),b(e,"class","svelte-2dna4v")},m(r,l){G(r,e,l),y(e,n),y(e,a)},p(r,l){l&2&&t!==(t=r[4][r[1]?Math.abs(r[8]-7):r[8]]+"")&&zs(n,t),l&8&&Xe(e,"--font-size",r[3]+"px"),l&1&&Xe(e,"color",r[8]%2===0?Ze.colors[r[0]].white:Ze.colors[r[0]].black)},d(r){r&&S(e)}}}function tn(s){let e,t=(s[1]?s[8]+1:Math.abs(s[8]-8))+"",n,a,r;return{c(){e=N("span"),n=We(t),a=X(),this.h()},l(l){e=R(l,"SPAN",{"data-file":!0,style:!0,class:!0});var i=V(e);n=Ge(i,t),a=Y(i),i.forEach(S),this.h()},h(){b(e,"data-file",s[6]),b(e,"style",r="--font-size: "+s[3]+"px; color: "+(s[8]%2===0?Ze.colors[s[0]].white:Ze.colors[s[0]].black)+";"+(s[1]?" text-align: right;":"")),b(e,"class","svelte-2dna4v")},m(l,i){G(l,e,i),y(e,n),y(e,a)},p(l,i){i&2&&t!==(t=(l[1]?l[8]+1:Math.abs(l[8]-8))+"")&&zs(n,t),i&11&&r!==(r="--font-size: "+l[3]+"px; color: "+(l[8]%2===0?Ze.colors[l[0]].white:Ze.colors[l[0]].black)+";"+(l[1]?" text-align: right;":""))&&b(e,"style",r)},d(l){l&&S(e)}}}function oa(s){let e,t,n,a,r=Le(s[4]),l=[];for(let u=0;u<r.length;u+=1)l[u]=en($s(s,r,u));let i=Le(s[4]),o=[];for(let u=0;u<i.length;u+=1)o[u]=tn(Js(s,i,u));return{c(){e=N("div");for(let u=0;u<l.length;u+=1)l[u].c();t=X(),n=N("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=R(u,"DIV",{class:!0});var d=V(e);for(let h=0;h<l.length;h+=1)l[h].l(d);d.forEach(S),t=Y(u),n=R(u,"DIV",{class:!0});var c=V(n);for(let h=0;h<o.length;h+=1)o[h].l(c);c.forEach(S),this.h()},h(){b(e,"class","files svelte-2dna4v"),b(n,"class","ranks svelte-2dna4v"),yt(()=>s[5].call(n))},m(u,d){G(u,e,d);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);G(u,t,d),G(u,n,d);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null);a=bi(n,s[5].bind(n))},p(u,[d]){if(d&27){r=Le(u[4]);let c;for(c=0;c<r.length;c+=1){const h=$s(u,r,c);l[c]?l[c].p(h,d):(l[c]=en(h),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=r.length}if(d&27){i=Le(u[4]);let c;for(c=0;c<i.length;c+=1){const h=Js(u,i,c);o[c]?o[c].p(h,d):(o[c]=tn(h),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},i:Ee,o:Ee,d(u){u&&(S(e),S(t),S(n)),_t(l,u),_t(o,u),a()}}}function ua(s,e,t){let n,{theme:a}=e,{flipped:r}=e;const l=["a","b","c","d","e","f","g","h"];let i;function o(){i=this.clientHeight,t(2,i)}return s.$$set=u=>{"theme"in u&&t(0,a=u.theme),"flipped"in u&&t(1,r=u.flipped)},s.$$.update=()=>{s.$$.dirty&4&&t(3,n=Math.floor(Math.log(i/8)*3))},[a,r,i,n,l,o]}class da extends ye{constructor(e){super(),Pe(this,e,ua,oa,Ce,{theme:0,flipped:1})}}function sn(s){return Object.prototype.toString.call(s)==="[object Date]"}function ca(s){const e=2.5949095;return(s*=2)<1?.5*(s*s*((e+1)*s-e)):.5*((s-=2)*s*((e+1)*s+e)+2)}function ha(s){return s*s*((1.70158+1)*s-1.70158)}function fa(s){return--s*s*((1.70158+1)*s+1.70158)+1}function fs(s){const e=.36363636363636365,t=8/11,n=9/10,a=4356/361,r=35442/1805,l=16061/1805,i=s*s;return s<e?7.5625*i:s<t?9.075*i-9.9*s+3.4:s<n?a*i-r*s+l:10.8*s*s-20.52*s+10.72}function ga(s){return s<.5?.5*(1-fs(1-s*2)):.5*fs(s*2-1)+.5}function ba(s){return 1-fs(1-s)}function pa(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)}function ma(s){return 1-Math.sqrt(1-s*s)}function va(s){return Math.sqrt(1- --s*s)}function _a(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function Ea(s){return s*s*s}function Vs(s){const e=s-1;return e*e*e+1}function Ma(s){return s<.5?.5*Math.sin(13*Math.PI/2*2*s)*Math.pow(2,10*(2*s-1)):.5*Math.sin(-13*Math.PI/2*(2*s-1+1))*Math.pow(2,-10*(2*s-1))+1}function ka(s){return Math.sin(13*s*Math.PI/2)*Math.pow(2,10*(s-1))}function wa(s){return Math.sin(-13*(s+1)*Math.PI/2)*Math.pow(2,-10*s)+1}function Sa(s){return s===0||s===1?s:s<.5?.5*Math.pow(2,20*s-10):-.5*Math.pow(2,10-s*20)+1}function Ca(s){return s===0?s:Math.pow(2,10*(s-1))}function ya(s){return s===1?s:1-Math.pow(2,-10*s)}function Pa(s){return s/=.5,s<1?.5*s*s:(s--,-.5*(s*(s-2)-1))}function Aa(s){return s*s}function Ta(s){return-s*(s-2)}function La(s){return s<.5?8*Math.pow(s,4):-8*Math.pow(s-1,4)+1}function Ia(s){return Math.pow(s,4)}function qa(s){return Math.pow(s-1,3)*(1-s)+1}function Oa(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)}function Fa(s){return s*s*s*s*s}function Na(s){return--s*s*s*s*s+1}function Ra(s){return-.5*(Math.cos(Math.PI*s)-1)}function Da(s){const e=Math.cos(s*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function za(s){return Math.sin(s*Math.PI/2)}const gs=Object.freeze(Object.defineProperty({__proto__:null,backIn:ha,backInOut:ca,backOut:fa,bounceIn:ba,bounceInOut:ga,bounceOut:fs,circIn:ma,circInOut:pa,circOut:va,cubicIn:Ea,cubicInOut:_a,cubicOut:Vs,elasticIn:ka,elasticInOut:Ma,elasticOut:wa,expoIn:Ca,expoInOut:Sa,expoOut:ya,linear:Bn,quadIn:Aa,quadInOut:Pa,quadOut:Ta,quartIn:Ia,quartInOut:La,quartOut:qa,quintIn:Fa,quintInOut:Oa,quintOut:Na,sineIn:Da,sineInOut:Ra,sineOut:za},Symbol.toStringTag,{value:"Module"}));function Fs(s,e){if(s===e||s!==s)return()=>s;const t=typeof s;if(t!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const n=e.map((a,r)=>Fs(s[r],a));return a=>n.map(r=>r(a))}if(t==="object"){if(!s||!e)throw new Error("Object cannot be null");if(sn(s)&&sn(e)){s=s.getTime(),e=e.getTime();const r=e-s;return l=>new Date(s+l*r)}const n=Object.keys(e),a={};return n.forEach(r=>{a[r]=Fs(s[r],e[r])}),r=>{const l={};return n.forEach(i=>{l[i]=a[i](r)}),l}}if(t==="number"){const n=e-s;return a=>s+a*n}throw new Error(`Cannot interpolate ${t} values`)}function Ua(s,e={}){const t=Ci(s);let n,a=s;function r(l,i){if(s==null)return t.set(s=l),Promise.resolve();a=l;let o=n,u=!1,{delay:d=0,duration:c=400,easing:h=Bn,interpolate:C=Fs}=us(us({},e),i);if(c===0)return o&&(o.abort(),o=null),t.set(s=a),Promise.resolve();const v=Mi()+d;let E;return n=ki(p=>{if(p<v)return!0;u||(E=C(s,l),typeof c=="function"&&(c=c(s,l)),u=!0),o&&(o.abort(),o=null);const _=p-v;return _>c?(t.set(s=l),!1):(t.set(s=E(h(_/c))),!0)}),n.promise}return{set:r,update:(l,i)=>r(l(a,s),i),subscribe:t.subscribe}}function Ls(s,e,t,n){if(e===0&&t===0)return s;const a=n?["h","g","f","e","d","c","b","a"]:["a","b","c","d","e","f","g","h"],r=n?["1","2","3","4","5","6","7","8"]:["8","7","6","5","4","3","2","1"],l=a[a.indexOf(s[0])+e],i=r[r.indexOf(s[1])+t];if(!(!l||!i))return`${l}${i}`}function Ba(s,e,t){const n=e*1.15,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",`${s.offsetWidth*n}`),a.setAttribute("height",`${s.offsetHeight*n}`),a.style.position="absolute",a.style.zIndex="100",a.style.translate=`${t?"":"-"}${25*n/2}% -${25*n/2}%`,a.style.opacity="0.2",a.style.pointerEvents="none",r.setAttribute("r",`${s.offsetWidth*n/2}`),r.setAttribute("cx",`${s.offsetWidth*n/2}`),r.setAttribute("cy",`${s.offsetHeight*n/2}`),r.setAttribute("fill","black"),a.appendChild(r),a}function Va(s,e){let t,n,a,r,l,i,o,u,d=!1,c;const h=s.parentNode;let C,v=!1,E=!1,p=!1,{startSquare:_,boardFlipped:f,mouseEvents:g,canDrag:M,duration:P,easingFunc:T}=e;const{coords:F}=e;let q=Ks(F).x,k=Ks(F).y;const B=1.6,H=Ba(s,B,f);function K(U){var w;if(U.button!==0||!U.isPrimary||!g)return;if(U.pointerType==="touch"?p=!0:p=!1,s.dispatchEvent(new CustomEvent("clicked")),!M){s.dispatchEvent(new CustomEvent("dropped",{detail:_}));return}q=(f?7-qs(_[0]):qs(_[0]))*h.clientWidth/8,k=(f?parseInt(_[1],10)-1:8-parseInt(_[1],10))*h.clientWidth/8,C=_;const L=U.target.getBoundingClientRect();t=U.clientX,n=U.clientY,U.pointerType==="touch"?(a=U.clientX-L.x,r=U.clientY-L.y):(a=U.offsetX,r=U.offsetY);const W=(w=s.parentElement)==null?void 0:w.getBoundingClientRect();W&&(l=U.clientX-a-W.x-q,i=U.clientY-r-W.y-k,o=window.scrollX,u=window.scrollY,E=!0,window.addEventListener("pointermove",ee),window.addEventListener("pointerup",ne),window.addEventListener("pointercancel",D),document.body.addEventListener("pointerleave",D),window.addEventListener("scroll",Z))}function ee(U){const L=U.clientX-t,W=U.clientY-n;if(t=U.clientX,n=U.clientY,l+=L,i+=W,d||z(p),!!d){if(p){const w=Math.floor((l+a)/s.offsetWidth),ce=Math.floor((i+r)/s.offsetHeight),he=Ls(_,w,ce,f);if(he){const ve=os(he);H.setAttribute("r",`${s.offsetWidth*B*1.15/2}`),H.setAttribute("cx",`${s.offsetWidth*B*1.15/2}`),H.setAttribute("cy",`${s.offsetHeight*B*1.15/2}`);const qe=(f?(7-ve.x)*h.clientWidth/8:ve.x*h.clientWidth/8)-s.offsetWidth*B*1.15/2+s.offsetWidth/2,Ie=(f?(7-ve.y)*h.clientWidth/8:ve.y*h.clientWidth/8)-s.offsetWidth*B*1.15/2+s.offsetWidth/2;H.style.translate=`${qe}px ${Ie}px`,v||(h.appendChild(H),v=!0)}else C&&(C=void 0)}F.update(w=>({x:w.x+L,y:w.y+W,scale:p?B:1}),{duration:0}),C=de()}}function Z(){const U=window.scrollX-o,L=window.scrollY-u;o=window.scrollX,u=window.scrollY,l+=U,i+=L,d||z(p),d&&(F.update(W=>({x:W.x+U,y:W.y+L,scale:p?B:1}),{duration:0}),C=de())}function de(){const U=Ls(_,Math.floor((l+a)/s.offsetWidth),Math.floor((i+r)/s.offsetHeight),f);return U!==C&&s.dispatchEvent(new CustomEvent("squareover",{detail:{square:U}})),U}function ne(){const U=Math.floor((l+a)/s.offsetWidth),L=Math.floor((i+r)/s.offsetHeight),W=Ls(_,U,L,f);s.dispatchEvent(new CustomEvent("dropped",{detail:W})),E=!1,D()}function D(){window.removeEventListener("pointermove",ee),window.removeEventListener("pointerup",ne),window.removeEventListener("pointercancel",D),document.body.removeEventListener("pointerleave",D),window.removeEventListener("scroll",Z),E&&s.dispatchEvent(new CustomEvent("canceled")),E=!1,F.update(()=>({x:q,y:k,scale:1}),{duration:P,easing:T}).then(()=>{E||s.classList.remove("dragging")}),t=0,n=0,l=0,i=0,d=!1,H.remove(),v=!1}function z(U=!1){var L;if(F.update(()=>({x:q,y:k,scale:1}),{duration:0}),Math.abs(l)>1||Math.abs(i)>1){const W=(L=s.parentElement)==null?void 0:L.getBoundingClientRect();if(!W)return;F.update(()=>({x:t-s.offsetWidth/2-W.x,y:U?n-s.offsetHeight*1.5-W.y:n-s.offsetHeight/2-W.y,scale:U?B:1}),{duration:0}),d=!0,s.classList.add("dragging"),s.dispatchEvent(new CustomEvent("startMoving"))}}function x(U){E&&D(),U.preventDefault()}function te(U){U.preventDefault()}return s.addEventListener("contextmenu",x),s.addEventListener("dragstart",te),s.addEventListener("pointerdown",K),{destroy(){s.removeEventListener("pointerdown",K),s.removeEventListener("contextmenu",x),s.removeEventListener("dragstart",te),window.clearTimeout(c)},update(U){_=U.startSquare,P=U.duration,T=U.easingFunc,U.canDrag!==M&&(M=U.canDrag),U.mouseEvents!==g&&(g=U.mouseEvents),f=U.boardFlipped}}}function Ha(s){let e,t,n,a,r,l;return{c(){e=N("div"),this.h()},l(i){e=R(i,"DIV",{id:!0,style:!0,class:!0}),V(e).forEach(S),this.h()},h(){var i;b(e,"id",s[1]),b(e,"style",t=(s[6].enabled&&s[6].urls[s[1]]?`background: url(${s[6].urls[s[1]]}); `:"")+"translate: "+s[11].x+"px "+s[11].y+"px;"+(s[11].scale!==1?` scale: ${s[11].scale}`:"")),b(e,"class",n=s[3]+(s[3][0]==="w"?" white":" black")+(s[5]?" ghost":"")+(!((i=s[8])!=null&&i.enabled)&&!s[5]?" static":"")+(s[10]?"":" opacity-0")+" svelte-xlf1cn")},m(i,o){var u,d;G(i,e,o),s[22](e),r||(l=[ds(a=Va.call(null,e,{startSquare:s[2],mouseEvents:s[0],canDrag:s[15](s[8],s[7]),boardFlipped:s[4],duration:(u=s[7])!=null&&u.transition.enabled?s[7].transition.settings.duration:0,easingFunc:gs[((d=s[7])==null?void 0:d.transition.settings.easing)??"cubicInOut"],coords:s[13]})),ae(e,"dropped",s[14]),ae(e,"startMoving",s[19]),ae(e,"clicked",s[20]),ae(e,"canceled",s[21]),ae(e,"squareover",s[23])],r=!0)},p(i,[o]){var u,d,c;o&2&&b(e,"id",i[1]),o&2114&&t!==(t=(i[6].enabled&&i[6].urls[i[1]]?`background: url(${i[6].urls[i[1]]}); `:"")+"translate: "+i[11].x+"px "+i[11].y+"px;"+(i[11].scale!==1?` scale: ${i[11].scale}`:""))&&b(e,"style",t),o&1320&&n!==(n=i[3]+(i[3][0]==="w"?" white":" black")+(i[5]?" ghost":"")+(!((u=i[8])!=null&&u.enabled)&&!i[5]?" static":"")+(i[10]?"":" opacity-0")+" svelte-xlf1cn")&&b(e,"class",n),a&&Us(a.update)&&o&405&&a.update.call(null,{startSquare:i[2],mouseEvents:i[0],canDrag:i[15](i[8],i[7]),boardFlipped:i[4],duration:(d=i[7])!=null&&d.transition.enabled?i[7].transition.settings.duration:0,easingFunc:gs[((c=i[7])==null?void 0:c.transition.settings.easing)??"cubicInOut"],coords:i[13]})},i:Ee,o:Ee,d(i){i&&S(e),s[22](null),r=!1,at(l)}}}function ja(s,e,t){var ne;let n,{id:a}=e,{square:r}=e,{name:l}=e,{mouseEvents:i=!0}=e,{getGridCoordsFromSquare:o}=e,{flipped:u}=e,{isGhost:d=!1}=e,{boardSize:c}=e,{skins:h}=e;d&&(i=!1);let{selectedPiece:C=void 0}=e,{draggableState:v=void 0}=e,{movableState:E=void 0}=e,p,_=!1;const f=Xt();let g=(ne=v==null?void 0:v.transition)!=null&&ne.enabled?v.transition.settings.duration:0;const M=Ua({x:0,y:0,scale:1},{duration:g,easing:gs[(v==null?void 0:v.transition.settings.easing)??"cubicInOut"]});pi(s,M,D=>t(11,n=D));let P=!1;const T=D=>{p==null||p.classList.remove("dragging");const z=o(r);M.update(()=>({x:z.x*c/8,y:(7-z.y)*c/8,scale:1}),{duration:D&&P?g:0,easing:gs[(v==null?void 0:v.transition.settings.easing)??"cubicInOut"]}),g=v!=null&&v.transition.enabled?v.transition.settings.duration:0},F=D=>{const z=o(r);M.update(()=>({x:z.x*D/8,y:(7-z.y)*D/8,scale:1}),{duration:0})},q=D=>{var x;const z=D.detail;((x=v==null?void 0:v.transition)==null?void 0:x.settings)!==void 0&&!v.transition.settings.clickMoveAnimation&&(g=0),z||f("deselect"),r===z?(f(_?"deselect":"select"),_=!_):_=!1,k(E,v)&&f("endDragging",r+D.detail),r!==D.detail&&D.detail&&(g=0,f("move",r+D.detail))},k=(D,z)=>!(!(D!=null&&D.enabled)||!(z!=null&&z.enabled)||!i),B=D=>D===void 0||D.name!==l||D.square!==r;ms(()=>{t(10,P=!0)});function H(D){it.call(this,s,D)}function K(D){it.call(this,s,D)}function ee(D){it.call(this,s,D)}function Z(D){$[D?"unshift":"push"](()=>{p=D,t(9,p)})}const de=D=>{f("squareover",D.detail)};return s.$$set=D=>{"id"in D&&t(1,a=D.id),"square"in D&&t(2,r=D.square),"name"in D&&t(3,l=D.name),"mouseEvents"in D&&t(0,i=D.mouseEvents),"getGridCoordsFromSquare"in D&&t(16,o=D.getGridCoordsFromSquare),"flipped"in D&&t(4,u=D.flipped),"isGhost"in D&&t(5,d=D.isGhost),"boardSize"in D&&t(17,c=D.boardSize),"skins"in D&&t(6,h=D.skins),"selectedPiece"in D&&t(18,C=D.selectedPiece),"draggableState"in D&&t(7,v=D.draggableState),"movableState"in D&&t(8,E=D.movableState)},s.$$.update=()=>{s.$$.dirty&262144&&B(C)&&(_=!1),s.$$.dirty&16&&T(!1),s.$$.dirty&4&&T(!0),s.$$.dirty&131072&&F(c)},[i,a,r,l,u,d,h,v,E,p,P,n,f,M,q,k,o,c,C,H,K,ee,Z,de]}class Jn extends ye{constructor(e){super(),Pe(this,e,ja,Ha,Ce,{id:1,square:2,name:3,mouseEvents:0,getGridCoordsFromSquare:16,flipped:4,isGhost:5,boardSize:17,skins:6,selectedPiece:18,draggableState:7,movableState:8})}}function Ka(s){let e,t,n;return{c(){e=N("div"),this.h()},l(a){e=R(a,"DIV",{style:!0,class:!0}),V(e).forEach(S),this.h()},h(){b(e,"style",t="translate: "+s[5]*s[3]/8+"px "+(7-s[6])*s[3]/8+"px;"+(s[4]?` border-${s[4]}-radius: inherit;`:"")),b(e,"class",n=Ze.squareStyles[s[1]][s[0]]+(s[2]?"":" pointer-events-none")+" svelte-183l4qv")},m(a,r){G(a,e,r)},p(a,[r]){r&120&&t!==(t="translate: "+a[5]*a[3]/8+"px "+(7-a[6])*a[3]/8+"px;"+(a[4]?` border-${a[4]}-radius: inherit;`:""))&&b(e,"style",t),r&7&&n!==(n=Ze.squareStyles[a[1]][a[0]]+(a[2]?"":" pointer-events-none")+" svelte-183l4qv")&&b(e,"class",n)},i:Ee,o:Ee,d(a){a&&S(e)}}}function Wa(s,e,t){let{square:n}=e,{color:a}=e,{getGridCoordsFromSquare:r}=e,{flipped:l}=e,{theme:i}=e,{mouseEvents:o=!0}=e,{boardSize:u}=e,{corner:d=""}=e,c,h;const C=()=>{const v=r(n);t(5,c=v.x),t(6,h=v.y)};return s.$$set=v=>{"square"in v&&t(7,n=v.square),"color"in v&&t(0,a=v.color),"getGridCoordsFromSquare"in v&&t(8,r=v.getGridCoordsFromSquare),"flipped"in v&&t(9,l=v.flipped),"theme"in v&&t(1,i=v.theme),"mouseEvents"in v&&t(2,o=v.mouseEvents),"boardSize"in v&&t(3,u=v.boardSize),"corner"in v&&t(4,d=v.corner)},s.$$.update=()=>{s.$$.dirty&512&&C()},[a,i,o,u,d,c,h,n,r,l]}class Ga extends ye{constructor(e){super(),Pe(this,e,Wa,Ka,Ce,{square:7,color:0,getGridCoordsFromSquare:8,flipped:9,theme:1,mouseEvents:2,boardSize:3,corner:4})}}const Xa=["a","b","c","d","e","f","g","h"],Ya=["8","7","6","5","4","3","2","1"];function Qa(s){s.querySelectorAll("[fixed]").forEach(e=>e.remove())}function Ns(s){return`${Xa[s.x]}${Ya[s.y]}`}function $n(s,e){return Math.abs((s.x-e.x)*(s.y-e.y))===2}function Rs(s,e){return`${Ns(s)}${Ns(e)}`}function xa(s,e){return!!($n(s,e)||Math.abs(s.x-e.x)===Math.abs(s.y-e.y)||s.x===e.x!=(s.y===e.y))}function ei(s,e,t,n,a,r){let l={x:-1,y:-1},i,o;$n(e,t)&&n?(Math.abs(t.x-e.x)===2?l={x:t.x,y:e.y}:l={x:e.x,y:t.y},l.y-e.y<0?o=Math.PI+Math.atan((l.x-e.x)/(l.y-e.y)):o=Math.atan((l.x-e.x)/Math.abs(l.y-e.y)),i={x:t.x-Math.sign(t.x-l.x)*(l.x!==t.x?.4:0),y:t.y-Math.sign(t.y-l.y)*(l.y!==t.y?.4:0)}):(t.y-e.y<0?o=Math.PI+Math.atan((t.x-e.x)/(t.y-e.y)):o=Math.atan((t.x-e.x)/Math.abs(t.y-e.y)),i={x:t.x-Math.sin(o)*.4,y:t.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};s.setAttribute("points",`${u.x+.5},${u.y+.5} ${l.x!==-1&&l.y!==-1&&n?`${l.x+.5},${l.y+.5} `:""}${i.x+.5},${i.y+.5}`),s.setAttribute("data-sqID",`${Rs(e,t)}`),r!==void 0&&s.setAttribute("opacity",`${r}`),a!==void 0&&(s.setAttribute("marker-start",`url(#start-${a[0]})`),s.setAttribute("marker-end",`url(#end-${a[0]})`),s.setAttribute("stroke",a))}function ss(s,e,t,n,a,r){if(!(e===void 0||t.x===-1&&t.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),n?e.setAttribute("stroke","red"):a?e.setAttribute("stroke","orange"):r?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),s.querySelectorAll(`сircle[cx="${t.x+.5}"][cy="${t.y+.5}"]`).forEach(l=>{e!==void 0&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const l=n?"red":a?"orange":r?"blue":"green";e.setAttribute("stroke",`${l}`),e.setAttribute("marker-start",`url(#start-${l[0]})`),e.setAttribute("marker-end",`url(#end-${l[0]})`),s.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(i=>{e instanceof SVGPolylineElement&&i!==e&&(i.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function ti(s,e,t,n,a){const r=document.createElementNS("http://www.w3.org/2000/svg","polyline");return ei(r,s,e,t,n,a),r.setAttribute("fill","none"),r.setAttribute("stroke-width","0.25"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("opacity",a!==void 0?`${a}`:"0.4"),r.setAttribute("marker-start",n?`url(#start-${n[0]})`:"url(#start-g)"),r.setAttribute("marker-end",n?`url(#end-${n[0]})`:"url(#end-g)"),r.setAttribute("stroke",n||"green"),r}function Ds(s,e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",`${s.x+.5}`),n.setAttribute("cy",`${s.y+.5}`),n.setAttribute("r","0.465"),n.setAttribute("opacity",t?`${t}`:"0.4"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","0.07"),n.setAttribute("stroke",e??"green"),n}function Za(s,e,t){e.forEach(n=>{if(n.type==="circle"){const a=os(n.square),r=Ds(a,n.color,n.opacity);s.appendChild(r)}else if(n.type==="arrow"){const a=ti(os(n.from),os(n.to),t,n.color,n.opacity);a.setAttribute("fixed",""),s.appendChild(a)}})}function nn(s){s.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("fixed")||e.remove()})}function Ja(s,e){let{svg:t,flipped:n,enabled:a,settings:r}=e,l=!1,i={x:-1,y:-1},o,u;function d(p,_){const f=s.getBoundingClientRect(),g=n?f.width-(p-f.left):p-f.left,M=n?f.height-(_-f.top):_-f.top;return{x:Math.max(0,Math.min(7,Math.floor(g/(s.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(M/(s.clientHeight/8))))}}function c(p){if(u===void 0||i.x===-1&&i.y===-1)return;const _=d(p.clientX,p.clientY);r.onlyChessMove&&!xa(i,_)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),i.x===_.x&&i.y===_.y?(Rs(i,_),u instanceof SVGPolylineElement&&(u.remove(),u=Ds(_)),ss(t,u,i,p.shiftKey,p.ctrlKey,p.altKey),t.appendChild(u),t.querySelectorAll(`circle[cx="${i.x+.5}"][cy="${i.y+.5}"]`).forEach(f=>{f!==u&&(o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,t.querySelectorAll(`polyline[data-sqID="${Rs(i,_)}"]`).forEach(f=>{u===void 0||i.x===-1&&i.y===-1||f===u||(o=f,f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=ti(i,_,r.knightLShape),ss(t,u,i,p.shiftKey,p.ctrlKey,p.altKey),t.appendChild(u)):u instanceof SVGPolylineElement&&ei(u,i,_,r.knightLShape)))}function h(p){p.preventDefault()}function C(p){p.preventDefault(),ss(t,u,i,p.shiftKey,p.ctrlKey,p.altKey)}function v(p){if(p.button===0)l=!1;else if(p.button===2){if(i.x===-1&&i.y===-1)return;t.querySelectorAll("[remove]").forEach(_=>{_.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:Ns(i),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,i={x:-1,y:-1},l=!1,window.removeEventListener("mousemove",c),window.removeEventListener("keydown",C),window.removeEventListener("keyup",C),window.removeEventListener("contextmenu",h)}window.removeEventListener("mouseup",v)}function E(p){if(p.button===0)l=!0,nn(t),window.addEventListener("mouseup",v);else if(p.button===2&&!l){const _=d(p.clientX,p.clientY);i=_,u=Ds(_),ss(t,u,i,p.shiftKey,p.ctrlKey,p.altKey),o=void 0,t.querySelectorAll(`circle[cx="${_.x+.5}"][cy="${_.y+.5}"]`).forEach(f=>{o=f,u!==void 0&&f.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&t.appendChild(u),window.addEventListener("mousemove",c),window.addEventListener("mouseup",v),window.addEventListener("keydown",C),window.addEventListener("keyup",C),window.addEventListener("contextmenu",h)}}return a&&s.addEventListener("mousedown",E),{update(p){p.svg!==t&&(t=p.svg),p.enabled!==a&&(a=p.enabled,a?s.addEventListener("mousedown",E):(nn(t),s.removeEventListener("mousedown",E))),r=p.settings,n=p.flipped}}}function an(s,e,t){const n=s.slice();return n[8]=e[t],n}function rn(s){let e,t,n,a;return{c(){e=De("marker"),t=De("path"),n=De("marker"),a=De("path"),this.h()},l(r){e=ze(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var l=V(e);t=ze(l,"path",{fill:!0,d:!0}),V(t).forEach(S),l.forEach(S),n=ze(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var i=V(n);a=ze(i,"path",{fill:!0,d:!0}),V(a).forEach(S),i.forEach(S),this.h()},h(){b(t,"fill",s[8]),b(t,"d","M 0 5 v 10 c 0 2.8 2.2 5 5 5 L 6 20 V 0 L 5 0 C 2.2 0 0 2.2 0 5 z"),b(e,"id","start-"+s[8][0]),b(e,"viewBox","0 0 5 20"),b(e,"refX","4"),b(e,"refY","10"),b(e,"markerUnits","strokeWidth"),b(e,"markerWidth","0.5"),b(e,"markerHeight","1"),b(e,"orient","auto"),b(a,"fill",s[8]),b(a,"d","M 9.5 9.5 l -8.7 -5 C 0.5 4.3 0 4.6 0 5 v 10 c 0 0.4 0.5 0.7 0.9 0.5 l 8.7 -5 C 9.9 10.3 9.9 9.7 9.5 9.5 z"),b(n,"id","end-"+s[8][0]),b(n,"viewBox","0 0 10 20"),b(n,"refX","0.2"),b(n,"refY","10"),b(n,"markerUnits","strokeWidth"),b(n,"orient","auto"),b(n,"fill","currentColor")},m(r,l){G(r,e,l),y(e,t),G(r,n,l),y(n,a)},p:Ee,d(r){r&&(S(e),S(n))}}}function $a(s){let e,t,n,a=Le(s[2]),r=[];for(let l=0;l<a.length;l+=1)r[l]=rn(an(s,a,l));return{c(){e=De("svg"),t=De("defs");for(let l=0;l<r.length;l+=1)r[l].c();n=De("g"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var i=V(e);t=ze(i,"defs",{});var o=V(t);for(let u=0;u<r.length;u+=1)r[u].l(o);o.forEach(S),n=ze(i,"g",{}),V(n).forEach(S),i.forEach(S),this.h()},h(){b(e,"xmlns","http://www.w3.org/2000/svg"),Xe(e,"transform","rotate("+(s[1]?"180deg":"0deg")+")"),b(e,"viewBox","0 0 8 8"),b(e,"class","svelte-d96ma4")},m(l,i){G(l,e,i),y(e,t);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null);y(e,n),s[5](n)},p(l,[i]){if(i&4){a=Le(l[2]);let o;for(o=0;o<a.length;o+=1){const u=an(l,a,o);r[o]?r[o].p(u,i):(r[o]=rn(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}i&2&&Xe(e,"transform","rotate("+(l[1]?"180deg":"0deg")+")")},i:Ee,o:Ee,d(l){l&&S(e),_t(r,l),s[5](null)}}}function er(s,e,t){let{flipped:n=!1}=e,{svg:a}=e,{knightLShape:r=!1}=e,{tools:l=[]}=e,i=!1;function o(c){i&&(Qa(a),Za(a,c,r))}ms(()=>{i=!0,o(l)});const u=["green","red","blue","orange"];function d(c){$[c?"unshift":"push"](()=>{a=c,t(0,a)})}return s.$$set=c=>{"flipped"in c&&t(1,n=c.flipped),"svg"in c&&t(0,a=c.svg),"knightLShape"in c&&t(3,r=c.knightLShape),"tools"in c&&t(4,l=c.tools)},s.$$.update=()=>{s.$$.dirty&16&&o(l)},[a,n,u,r,l,d]}class tr extends ye{constructor(e){super(),Pe(this,e,er,$a,Ce,{flipped:1,svg:0,knightLShape:3,tools:4})}}function ln(s,{delay:e=0,duration:t=400,easing:n=Vs,x:a=0,y:r=0,opacity:l=0}={}){const i=getComputedStyle(s),o=+i.opacity,u=i.transform==="none"?"":i.transform,d=o*(1-l),[c,h]=Ws(a),[C,v]=Ws(r);return{delay:e,duration:t,easing:n,css:(E,p)=>`
			transform: ${u} translate(${(1-E)*c}${h}, ${(1-E)*C}${v});
			opacity: ${o-d*p}`}}function bs(s,{delay:e=0,duration:t=400,easing:n=Vs,axis:a="y"}={}){const r=getComputedStyle(s),l=+r.opacity,i=a==="y"?"height":"width",o=parseFloat(r[i]),u=a==="y"?["top","bottom"]:["left","right"],d=u.map(_=>`${_[0].toUpperCase()}${_.slice(1)}`),c=parseFloat(r[`padding${d[0]}`]),h=parseFloat(r[`padding${d[1]}`]),C=parseFloat(r[`margin${d[0]}`]),v=parseFloat(r[`margin${d[1]}`]),E=parseFloat(r[`border${d[0]}Width`]),p=parseFloat(r[`border${d[1]}Width`]);return{delay:e,duration:t,easing:n,css:_=>`overflow: hidden;opacity: ${Math.min(_*20,1)*l};${i}: ${_*o}px;padding-${u[0]}: ${_*c}px;padding-${u[1]}: ${_*h}px;margin-${u[0]}: ${_*C}px;margin-${u[1]}: ${_*v}px;border-${u[0]}-width: ${_*E}px;border-${u[1]}-width: ${_*p}px;`}}function sr(s){let e,t,n,a;return{c(){e=N("button"),t=N("div"),this.h()},l(r){e=R(r,"BUTTON",{class:!0});var l=V(e);t=R(l,"DIV",{class:!0}),V(t).forEach(S),l.forEach(S),this.h()},h(){b(t,"class","piece "+s[0]+" svelte-rp9lvv"),b(e,"class","svelte-rp9lvv")},m(r,l){G(r,e,l),y(e,t),n||(a=ae(e,"click",s[1]),n=!0)},p:Ee,i:Ee,o:Ee,d(r){r&&S(e),n=!1,a()}}}function nr(s,e,t){let{piece:n}=e,{isWhite:a}=e,{showModal:r}=e;const l=Xt(),i=(a?"w":"b")+n.toUpperCase(),o=()=>{l("newPromotion",n),t(2,r=!1)};return s.$$set=u=>{"piece"in u&&t(3,n=u.piece),"isWhite"in u&&t(4,a=u.isWhite),"showModal"in u&&t(2,r=u.showModal)},[i,o,r,n,a]}class ir extends ye{constructor(e){super(),Pe(this,e,nr,sr,Ce,{piece:3,isWhite:4,showModal:2})}}function on(s,e,t){const n=s.slice();return n[7]=e[t],n}function un(s){let e,t,n,a,r,l,i=Le(["q","r","b","n"]),o=[];for(let d=0;d<4;d+=1)o[d]=dn(on(s,i,d));const u=d=>Q(o[d],1,1,()=>{o[d]=null});return{c(){e=N("div"),t=N("div");for(let d=0;d<4;d+=1)o[d].c();this.h()},l(d){e=R(d,"DIV",{class:!0});var c=V(e);t=R(c,"DIV",{class:!0});var h=V(t);for(let C=0;C<4;C+=1)o[C].l(h);h.forEach(S),c.forEach(S),this.h()},h(){b(t,"class","modal-content svelte-1ms2fdt"),b(e,"class",r="modal "+s[0]+" svelte-1ms2fdt")},m(d,c){G(d,e,c),y(e,t);for(let h=0;h<4;h+=1)o[h]&&o[h].m(t,null);l=!0},p(d,c){if(c&6){i=Le(["q","r","b","n"]);let h;for(h=0;h<4;h+=1){const C=on(d,i,h);o[h]?(o[h].p(C,c),j(o[h],1)):(o[h]=dn(C),o[h].c(),j(o[h],1),o[h].m(t,null))}for(Ue(),h=4;h<4;h+=1)u(h);Be()}(!l||c&1&&r!==(r="modal "+d[0]+" svelte-1ms2fdt"))&&b(e,"class",r)},i(d){if(!l){for(let c=0;c<4;c+=1)j(o[c]);d&&yt(()=>{l&&(a&&a.end(1),n=wi(t,ln,{x:100,duration:300}),n.start())}),l=!0}},o(d){o=o.filter(Boolean);for(let c=0;c<4;c+=1)Q(o[c]);n&&n.invalidate(),d&&(a=Si(t,ln,{x:-200,duration:100})),l=!1},d(d){d&&S(e),_t(o,d),d&&a&&a.end()}}}function dn(s){let e,t,n,a;function r(o){s[4](o)}function l(o){s[5](o)}let i={piece:s[7]};return s[2]!==void 0&&(i.isWhite=s[2]),s[1]!==void 0&&(i.showModal=s[1]),e=new ir({props:i}),$.push(()=>oe(e,"isWhite",r)),$.push(()=>oe(e,"showModal",l)),e.$on("newPromotion",s[6]),{c(){ge(e.$$.fragment)},l(o){be(e.$$.fragment,o)},m(o,u){pe(e,o,u),a=!0},p(o,u){const d={};!t&&u&4&&(t=!0,d.isWhite=o[2],le(()=>t=!1)),!n&&u&2&&(n=!0,d.showModal=o[1],le(()=>n=!1)),e.$set(d)},i(o){a||(j(e.$$.fragment,o),a=!0)},o(o){Q(e.$$.fragment,o),a=!1},d(o){me(e,o)}}}function ar(s){let e,t,n=s[1]&&un(s);return{c(){n&&n.c(),e=Se()},l(a){n&&n.l(a),e=Se()},m(a,r){n&&n.m(a,r),G(a,e,r),t=!0},p(a,[r]){a[1]?n?(n.p(a,r),r&2&&j(n,1)):(n=un(a),n.c(),j(n,1),n.m(e.parentNode,e)):n&&(Ue(),Q(n,1,1,()=>{n=null}),Be())},i(a){t||(j(n),t=!0)},o(a){Q(n),t=!1},d(a){a&&S(e),n&&n.d(a)}}}function rr(s,e,t){let n=!1,a,{className:r=""}=e;function l(d){t(1,n=!0),d?t(2,a=!0):t(2,a=!1)}function i(d){a=d,t(2,a)}function o(d){n=d,t(1,n)}function u(d){it.call(this,s,d)}return s.$$set=d=>{"className"in d&&t(0,r=d.className)},[r,n,a,l,i,o,u]}class lr extends ye{constructor(e){super(),Pe(this,e,rr,ar,Ce,{className:0,openPromotionModal:3})}get openPromotionModal(){return this.$$.ctx[3]}}const or=""+new URL("../assets/move.e4d827fe.wav",import.meta.url).href,ur=""+new URL("../assets/capture.3dff493a.wav",import.meta.url).href,dr=""+new URL("../assets/castle.dcf4b2c5.wav",import.meta.url).href,cr=""+new URL("../assets/undo.b4184324.mp3",import.meta.url).href;function cn(s){let e,t=`<track kind="captions"/><source src="${or}"/>`;return{c(){e=N("audio"),e.innerHTML=t,this.h()},l(n){e=R(n,"AUDIO",{preload:!0,"data-svelte-h":!0}),ke(e)!=="svelte-965mdm"&&(e.innerHTML=t),this.h()},h(){b(e,"preload","auto")},m(n,a){G(n,e,a),s[3](e)},p:Ee,d(n){n&&S(e),s[3](null)}}}function hn(s){let e,t=`<track kind="captions"/><source src="${ur}"/>`;return{c(){e=N("audio"),e.innerHTML=t,this.h()},l(n){e=R(n,"AUDIO",{preload:!0,"data-svelte-h":!0}),ke(e)!=="svelte-yx772y"&&(e.innerHTML=t),this.h()},h(){b(e,"preload","auto")},m(n,a){G(n,e,a),s[4](e)},p:Ee,d(n){n&&S(e),s[4](null)}}}function fn(s){let e,t=`<track kind="captions"/><source src="${dr}"/>`;return{c(){e=N("audio"),e.innerHTML=t,this.h()},l(n){e=R(n,"AUDIO",{preload:!0,"data-svelte-h":!0}),ke(e)!=="svelte-1g92guo"&&(e.innerHTML=t),this.h()},h(){b(e,"preload","auto")},m(n,a){G(n,e,a),s[5](e)},p:Ee,d(n){n&&S(e),s[5](null)}}}function gn(s){let e,t=`<track kind="captions"/><source src="${cr}"/>`;return{c(){e=N("audio"),e.innerHTML=t,this.h()},l(n){e=R(n,"AUDIO",{preload:!0,"data-svelte-h":!0}),ke(e)!=="svelte-e2b5hc"&&(e.innerHTML=t),this.h()},h(){b(e,"preload","auto")},m(n,a){G(n,e,a),s[6](e)},p:Ee,d(n){n&&S(e),s[6](null)}}}function hr(s){let e,t,n,a,r=s[0].MOVE&&cn(s),l=s[0].CAPTURE&&hn(s),i=s[0].CASTLE&&fn(s),o=s[0].UNDO&&gn(s);return{c(){r&&r.c(),e=X(),l&&l.c(),t=X(),i&&i.c(),n=X(),o&&o.c(),a=Se()},l(u){r&&r.l(u),e=Y(u),l&&l.l(u),t=Y(u),i&&i.l(u),n=Y(u),o&&o.l(u),a=Se()},m(u,d){r&&r.m(u,d),G(u,e,d),l&&l.m(u,d),G(u,t,d),i&&i.m(u,d),G(u,n,d),o&&o.m(u,d),G(u,a,d)},p(u,[d]){u[0].MOVE?r?r.p(u,d):(r=cn(u),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0].CAPTURE?l?l.p(u,d):(l=hn(u),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),u[0].CASTLE?i?i.p(u,d):(i=fn(u),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),u[0].UNDO?o?o.p(u,d):(o=gn(u),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:Ee,o:Ee,d(u){u&&(S(e),S(t),S(n),S(a)),r&&r.d(u),l&&l.d(u),i&&i.d(u),o&&o.d(u)}}}function fr(s,e,t){let{settings:n}=e;const a={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},r=()=>{a.CASTLE&&(a.CASTLE.pause(),t(1,a.CASTLE.currentTime=0,a)),a.MOVE&&(a.MOVE.pause(),t(1,a.MOVE.currentTime=0,a)),a.CAPTURE&&(a.CAPTURE.pause(),t(1,a.CAPTURE.currentTime=0,a)),a.UNDO&&(a.UNDO.pause(),t(1,a.UNDO.currentTime=0,a))},l=h=>h===void 0||n[h];function i(h){switch(r(),h){case"MOVE":a.MOVE&&l("MOVE")&&a.MOVE.play();break;case"CAPTURE":a.CAPTURE&&l("CAPTURE")?a.CAPTURE.play():a.MOVE&&l("MOVE")&&a.MOVE.play();break;case"CASTLE":a.CASTLE&&l("CASTLE")?a.CASTLE.play():a.MOVE&&l("MOVE")&&a.MOVE.play();break;case"UNDO":a.UNDO&&l("UNDO")?(t(1,a.UNDO.volume=.3,a),a.UNDO.play()):a.MOVE&&l("MOVE")&&a.MOVE.play();break}}function o(h){$[h?"unshift":"push"](()=>{a.MOVE=h,t(1,a)})}function u(h){$[h?"unshift":"push"](()=>{a.CAPTURE=h,t(1,a)})}function d(h){$[h?"unshift":"push"](()=>{a.CASTLE=h,t(1,a)})}function c(h){$[h?"unshift":"push"](()=>{a.UNDO=h,t(1,a)})}return s.$$set=h=>{"settings"in h&&t(0,n=h.settings)},[n,a,i,o,u,d,c]}let gr=class extends ye{constructor(e){super(),Pe(this,e,fr,hr,Ce,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}};const bn=""+new URL("../assets/standard.97995bf9.svg",import.meta.url).href,pn=""+new URL("../assets/darkBlue.02863507.svg",import.meta.url).href;function br(s,e){let{mouseEvents:t}=e,n=e.curScale,a,r,l;function i(d){d.stopPropagation(),s.dispatchEvent(new CustomEvent("resizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,l+(d.pageX-a)/3)),Math.max(0,Math.min(100,l+(d.pageY-r)/3))))}}))}function o(d){d.stopPropagation(),s.dispatchEvent(new CustomEvent("endResizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,l+(d.pageX-a)/3)),Math.max(0,Math.min(100,l+(d.pageY-r)/3))))}})),window.removeEventListener("pointermove",i),window.removeEventListener("pointerup",o)}function u(d){t&&(d.stopPropagation(),d.button===0&&(a=d.pageX,r=d.pageY,l=n,window.addEventListener("pointermove",i),window.addEventListener("pointerup",o)))}return s.addEventListener("pointerdown",u),{update(d){n=d.curScale,t!==d.mouseEvents&&(t=d.mouseEvents)},destroy(){s.removeEventListener("mousedown",u)}}}function pr(s){let e,t,n,a,r,l,i;return{c(){e=N("div"),t=De("svg"),n=De("path"),this.h()},l(o){e=R(o,"DIV",{style:!0,class:!0});var u=V(e);t=ze(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var d=V(t);n=ze(d,"path",{d:!0}),V(n).forEach(S),d.forEach(S),u.forEach(S),this.h()},h(){b(n,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"viewBox","0 0 16 16"),b(t,"fill","currentColor"),Xe(e,"color",Ze.colors[s[0].state.board.boardTheme].black),b(e,"class",a=cs(s[1]?"cursor-nwse-resize":"")+" svelte-1rxhlfj")},m(o,u){G(o,e,u),y(e,t),y(t,n),l||(i=[ae(e,"pointerdown",Vn(s[3])),ds(r=br.call(null,e,{mouseEvents:s[1],curScale:s[0].state.board.scale})),ae(e,"resizing",s[4]),ae(e,"endResizing",s[5])],l=!0)},p(o,[u]){u&1&&Xe(e,"color",Ze.colors[o[0].state.board.boardTheme].black),u&2&&a!==(a=cs(o[1]?"cursor-nwse-resize":"")+" svelte-1rxhlfj")&&b(e,"class",a),r&&Us(r.update)&&u&3&&r.update.call(null,{mouseEvents:o[1],curScale:o[0].state.board.scale})},i:Ee,o:Ee,d(o){o&&S(e),l=!1,at(i)}}}function mr(s,e,t){const n=Xt();let{chessboard:a}=e,{mouseEvents:r=!0}=e;function l(u){it.call(this,s,u)}const i=u=>n("resizing",u.detail.scale),o=u=>n("endResizing",u.detail.scale);return s.$$set=u=>{"chessboard"in u&&t(0,a=u.chessboard),"mouseEvents"in u&&t(1,r=u.mouseEvents)},[a,r,n,l,i,o]}class vr extends ye{constructor(e){super(),Pe(this,e,mr,pr,Ce,{chessboard:0,mouseEvents:1})}}const _r=s=>{if(s[0]===s[0].toLowerCase())return s;switch(s){case"LEGAL":case"LEGALHOVER":return"legal";case"CHECK":return"check";case"MOVE":return"move";case"NEXTMOVE":return"nextMove";case"PREMOVE":case"PREMOVEHOVER":return"preMove";case"SELECT":return"select";default:return"check"}},Er=s=>Math.floor(s*window.devicePixelRatio/8)*8/window.devicePixelRatio;function Mr(s){const e=s.parentElement;if(typeof window.ResizeObserver>"u")throw new Error("window.ResizeObserver is missing.");const t=new ResizeObserver(n=>{const a=e.getBoundingClientRect();n.forEach(()=>{const r=Er(a.width);s.dispatchEvent(new CustomEvent("newsize",{detail:r})),s.style.setProperty("width",`${r}px`),s.style.setProperty("height",`${r}px`)})});return t.observe(e),{update(){t.unobserve(e),t.disconnect(),t.observe(e)},destroy(){t.unobserve(e),t.disconnect()}}}const kr=s=>({}),mn=s=>({}),wr=s=>({}),vn=s=>({}),Sr=s=>({}),_n=s=>({});function En(s,e,t){const n=s.slice();return n[82]=e[t],n}function Mn(s,e,t){const n=s.slice();return n[85]=e[t],n}function kn(s){let e=[],t=new Map,n,a,r=Le(s[5].state.pieces.idMap.values());const l=i=>i[85].id;for(let i=0;i<r.length;i+=1){let o=Mn(s,r,i),u=l(o);t.set(u,e[i]=wn(u,o))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();n=Se()},l(i){for(let o=0;o<e.length;o+=1)e[o].l(i);n=Se()},m(i,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(i,o);G(i,n,o),a=!0},p(i,o){o[0]&190508&&(r=Le(i[5].state.pieces.idMap.values()),Ue(),e=Kn(e,o,l,1,i,r,t,n.parentNode,jn,wn,n,Mn),Be())},i(i){if(!a){for(let o=0;o<r.length;o+=1)j(e[o]);a=!0}},o(i){for(let o=0;o<e.length;o+=1)Q(e[o]);a=!1},d(i){i&&S(n);for(let o=0;o<e.length;o+=1)e[o].d(i)}}}function wn(s,e){let t,n,a;const r=[e[85],{skins:e[5].state.board.skins},{boardSize:e[5].state.board.size},{mouseEvents:e[5].state.board.mouseEvents},{draggableState:e[5].state.draggable},{movableState:e[5].state.movable},{selectedPiece:e[5].selectedPiece},{getGridCoordsFromSquare:e[5].getGridCoordsFromSquare},{flipped:e[5].flipped}];function l(){return e[59](e[85])}function i(){return e[60](e[85])}function o(...c){return e[61](e[85],...c)}function u(){return e[63](e[85])}let d={};for(let c=0;c<r.length;c+=1)d=us(d,r[c]);return n=new Jn({props:d}),n.$on("move",e[13]),n.$on("clicked",l),n.$on("startMoving",i),n.$on("squareover",o),n.$on("endDragging",e[62]),n.$on("select",u),n.$on("canceled",e[64]),n.$on("deselect",e[65]),{key:s,first:null,c(){t=Se(),ge(n.$$.fragment),this.h()},l(c){t=Se(),be(n.$$.fragment,c),this.h()},h(){this.first=t},m(c,h){G(c,t,h),pe(n,c,h),a=!0},p(c,h){e=c;const C=h[0]&32?Wn(r,[Gn(e[85]),{skins:e[5].state.board.skins},{boardSize:e[5].state.board.size},{mouseEvents:e[5].state.board.mouseEvents},{draggableState:e[5].state.draggable},{movableState:e[5].state.movable},{selectedPiece:e[5].selectedPiece},{getGridCoordsFromSquare:e[5].getGridCoordsFromSquare},{flipped:e[5].flipped}]):{};n.$set(C)},i(c){a||(j(n.$$.fragment,c),a=!0)},o(c){Q(n.$$.fragment,c),a=!1},d(c){c&&S(t),me(n,c)}}}function Sn(s){let e,t;const n=[{isGhost:!0},{skins:s[5].state.board.skins},{boardSize:s[5].state.board.size},s[5].ghostPiece,{getGridCoordsFromSquare:s[5].getGridCoordsFromSquare},{flipped:s[5].flipped}];let a={};for(let r=0;r<n.length;r+=1)a=us(a,n[r]);return e=new Jn({props:a}),{c(){ge(e.$$.fragment)},l(r){be(e.$$.fragment,r)},m(r,l){pe(e,r,l),t=!0},p(r,l){const i=l[0]&32?Wn(n,[n[0],{skins:r[5].state.board.skins},{boardSize:r[5].state.board.size},Gn(r[5].ghostPiece),{getGridCoordsFromSquare:r[5].getGridCoordsFromSquare},{flipped:r[5].flipped}]):{};e.$set(i)},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){Q(e.$$.fragment,r),t=!1},d(r){me(e,r)}}}function Cn(s){let e=[],t=new Map,n,a,r=Le([...s[5].state.markedSquares]);const l=i=>i[82];for(let i=0;i<r.length;i+=1){let o=En(s,r,i),u=l(o);t.set(u,e[i]=yn(u,o))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();n=Se()},l(i){for(let o=0;o<e.length;o+=1)e[o].l(i);n=Se()},m(i,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(i,o);G(i,n,o),a=!0},p(i,o){o[0]&262178&&(r=Le([...i[5].state.markedSquares]),Ue(),e=Kn(e,o,l,1,i,r,t,n.parentNode,jn,yn,n,En),Be())},i(i){if(!a){for(let o=0;o<r.length;o+=1)j(e[o]);a=!0}},o(i){for(let o=0;o<e.length;o+=1)Q(e[o]);a=!1},d(i){i&&S(n);for(let o=0;o<e.length;o+=1)e[o].d(i)}}}function yn(s,e){let t,n,a;return n=new Ga({props:{boardSize:e[5].state.board.size,theme:e[5].state.board.boardTheme,square:e[82].square,color:e[82].color,getGridCoordsFromSquare:e[5].getGridCoordsFromSquare,flipped:e[5].flipped,mouseEvents:e[5].state.board.mouseEvents,corner:e[18](e[82].square)}}),n.$on("dragenter",e[66]),{key:s,first:null,c(){t=Se(),ge(n.$$.fragment),this.h()},l(r){t=Se(),be(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,l){G(r,t,l),pe(n,r,l),a=!0},p(r,l){e=r;const i={};l[0]&32&&(i.boardSize=e[5].state.board.size),l[0]&32&&(i.theme=e[5].state.board.boardTheme),l[0]&32&&(i.square=e[82].square),l[0]&32&&(i.color=e[82].color),l[0]&32&&(i.getGridCoordsFromSquare=e[5].getGridCoordsFromSquare),l[0]&32&&(i.flipped=e[5].flipped),l[0]&32&&(i.mouseEvents=e[5].state.board.mouseEvents),l[0]&32&&(i.corner=e[18](e[82].square)),n.$set(i)},i(r){a||(j(n.$$.fragment,r),a=!0)},o(r){Q(n.$$.fragment,r),a=!1},d(r){r&&S(t),me(n,r)}}}function Pn(s){let e,t;return e=new da({props:{theme:s[5].state.board.boardTheme,flipped:s[5].flipped}}),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,a){pe(e,n,a),t=!0},p(n,a){const r={};a[0]&32&&(r.theme=n[5].state.board.boardTheme),a[0]&32&&(r.flipped=n[5].flipped),e.$set(r)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){Q(e.$$.fragment,n),t=!1},d(n){me(e,n)}}}function An(s){let e,t;return e=new vr({props:{chessboard:s[5],mouseEvents:s[5].state.board.mouseEvents}}),e.$on("resizing",s[67]),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,a){pe(e,n,a),t=!0},p(n,a){const r={};a[0]&32&&(r.chessboard=n[5]),a[0]&32&&(r.mouseEvents=n[5].state.board.mouseEvents),e.$set(r)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){Q(e.$$.fragment,n),t=!1},d(n){me(e,n)}}}function Tn(s){let e,t,n;function a(l){s[68](l)}let r={flipped:s[5].flipped,tools:s[5].state.drawTools.tools,knightLShape:s[5].state.drawTools.settings.knightLShape};return s[7]!==void 0&&(r.svg=s[7]),e=new tr({props:r}),$.push(()=>oe(e,"svg",a)),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,i){pe(e,l,i),n=!0},p(l,i){const o={};i[0]&32&&(o.flipped=l[5].flipped),i[0]&32&&(o.tools=l[5].state.drawTools.tools),i[0]&32&&(o.knightLShape=l[5].state.drawTools.settings.knightLShape),!t&&i[0]&128&&(t=!0,o.svg=l[7],le(()=>t=!1)),e.$set(o)},i(l){n||(j(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){me(e,l)}}}function Ln(s){let e,t,n={};return e=new lr({props:n}),s[69](e),e.$on("newPromotion",s[16]),{c(){ge(e.$$.fragment)},l(a){be(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const l={};e.$set(l)},i(a){t||(j(e.$$.fragment,a),t=!0)},o(a){Q(e.$$.fragment,a),t=!1},d(a){s[69](null),me(e,a)}}}function In(s){let e,t,n={settings:s[5].state.sounds.settings};return e=new gr({props:n}),s[74](e),{c(){ge(e.$$.fragment)},l(a){be(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const l={};r[0]&32&&(l.settings=a[5].state.sounds.settings),e.$set(l)},i(a){t||(j(e.$$.fragment,a),t=!0)},o(a){Q(e.$$.fragment,a),t=!1},d(a){s[74](null),me(e,a)}}}function Cr(s){let e,t,n,a,r,l,i,o,u,d,c,h,C,v,E,p,_,f,g,M,P,T,F,q=s[5].state.board.startFen&&kn(s),k=s[5].ghostPiece&&Sn(s),B=s[5].highlightEnabled&&Cn(s),H=s[5].state.board.notation&&s[10]&&Pn(s),K=s[5].state.board.resizible&&s[10]&&An(s),ee=s[5].state.drawTools.enabled&&Tn(s),Z=s[5].legalEnabled&&Ln(s);const de=s[56]["layer-1"],ne=ns(de,s,s[55],_n),D=s[56]["layer-2"],z=ns(D,s,s[55],vn),x=s[56]["layer-3"],te=ns(x,s,s[55],mn);let U=s[5].soundsEnabled&&In(s);return{c(){e=N("div"),t=N("div"),n=N("div"),q&&q.c(),r=X(),k&&k.c(),l=X(),B&&B.c(),i=X(),H&&H.c(),o=X(),K&&K.c(),u=X(),ee&&ee.c(),d=X(),Z&&Z.c(),c=X(),h=N("div"),ne&&ne.c(),C=X(),v=N("div"),z&&z.c(),E=X(),p=N("div"),te&&te.c(),g=X(),U&&U.c(),M=Se(),this.h()},l(L){e=R(L,"DIV",{class:!0});var W=V(e);t=R(W,"DIV",{role:!0,tabindex:!0,class:!0,style:!0});var w=V(t);n=R(w,"DIV",{style:!0,class:!0});var ce=V(n);q&&q.l(ce),ce.forEach(S),r=Y(w),k&&k.l(w),l=Y(w),B&&B.l(w),i=Y(w),H&&H.l(w),o=Y(w),K&&K.l(w),u=Y(w),ee&&ee.l(w),d=Y(w),Z&&Z.l(w),c=Y(w),h=R(w,"DIV",{class:!0});var he=V(h);ne&&ne.l(he),he.forEach(S),C=Y(w),v=R(w,"DIV",{class:!0});var ve=V(v);z&&z.l(ve),ve.forEach(S),E=Y(w),p=R(w,"DIV",{class:!0});var qe=V(p);te&&te.l(qe),qe.forEach(S),w.forEach(S),W.forEach(S),g=Y(L),U&&U.l(L),M=Se(),this.h()},h(){Xe(n,"width","100%"),Xe(n,"height","100%"),b(n,"class",a=cs(s[19](s[5].whiteToMove))+" svelte-185gwat"),b(h,"class","layer-1 svelte-185gwat"),b(v,"class","layer-2 svelte-185gwat"),b(p,"class","layer-3 svelte-185gwat"),b(t,"role","button"),b(t,"tabindex","0"),b(t,"class",_="board text-sm"+(!s[5].legalEnabled&&s[5].selectedPiece?" pointer":"")+" "+s[0]+" svelte-185gwat"),Xe(t,"--boardTheme","url("+(s[5].state.board.boardTheme==="standard"?bn:pn)+")"),b(e,"class","boardWrapper svelte-185gwat")},m(L,W){G(L,e,W),y(e,t),y(t,n),q&&q.m(n,null),y(t,r),k&&k.m(t,null),y(t,l),B&&B.m(t,null),y(t,i),H&&H.m(t,null),y(t,o),K&&K.m(t,null),y(t,u),ee&&ee.m(t,null),y(t,d),Z&&Z.m(t,null),y(t,c),y(t,h),ne&&ne.m(h,null),y(t,C),y(t,v),z&&z.m(v,null),y(t,E),y(t,p),te&&te.m(p,null),s[73](t),G(L,g,W),U&&U.m(L,W),G(L,M,W),P=!0,T||(F=[ds(Mr.call(null,t)),ae(t,"newsize",s[70]),ae(t,"pointerdown",s[12],!0),ae(t,"contextmenu",Gs(s[57])),ae(t,"drag",Gs(s[58])),ds(f=Ja.call(null,t,{svg:s[7],flipped:s[5].flipped,enabled:s[5].state.drawTools.enabled&&s[5].state.board.mouseEvents,settings:s[5].state.drawTools.settings})),ae(t,"drawCircle",s[71]),ae(t,"drawArrow",s[72])],T=!0)},p(L,W){L[5].state.board.startFen?q?(q.p(L,W),W[0]&32&&j(q,1)):(q=kn(L),q.c(),j(q,1),q.m(n,null)):q&&(Ue(),Q(q,1,1,()=>{q=null}),Be()),(!P||W[0]&32&&a!==(a=cs(L[19](L[5].whiteToMove))+" svelte-185gwat"))&&b(n,"class",a),L[5].ghostPiece?k?(k.p(L,W),W[0]&32&&j(k,1)):(k=Sn(L),k.c(),j(k,1),k.m(t,l)):k&&(Ue(),Q(k,1,1,()=>{k=null}),Be()),L[5].highlightEnabled?B?(B.p(L,W),W[0]&32&&j(B,1)):(B=Cn(L),B.c(),j(B,1),B.m(t,i)):B&&(Ue(),Q(B,1,1,()=>{B=null}),Be()),L[5].state.board.notation&&L[10]?H?(H.p(L,W),W[0]&1056&&j(H,1)):(H=Pn(L),H.c(),j(H,1),H.m(t,o)):H&&(Ue(),Q(H,1,1,()=>{H=null}),Be()),L[5].state.board.resizible&&L[10]?K?(K.p(L,W),W[0]&1056&&j(K,1)):(K=An(L),K.c(),j(K,1),K.m(t,u)):K&&(Ue(),Q(K,1,1,()=>{K=null}),Be()),L[5].state.drawTools.enabled?ee?(ee.p(L,W),W[0]&32&&j(ee,1)):(ee=Tn(L),ee.c(),j(ee,1),ee.m(t,d)):ee&&(Ue(),Q(ee,1,1,()=>{ee=null}),Be()),L[5].legalEnabled?Z?(Z.p(L,W),W[0]&32&&j(Z,1)):(Z=Ln(L),Z.c(),j(Z,1),Z.m(t,c)):Z&&(Ue(),Q(Z,1,1,()=>{Z=null}),Be()),ne&&ne.p&&(!P||W[1]&16777216)&&is(ne,de,L,L[55],P?rs(de,L[55],W,Sr):as(L[55]),_n),z&&z.p&&(!P||W[1]&16777216)&&is(z,D,L,L[55],P?rs(D,L[55],W,wr):as(L[55]),vn),te&&te.p&&(!P||W[1]&16777216)&&is(te,x,L,L[55],P?rs(x,L[55],W,kr):as(L[55]),mn),(!P||W[0]&33&&_!==(_="board text-sm"+(!L[5].legalEnabled&&L[5].selectedPiece?" pointer":"")+" "+L[0]+" svelte-185gwat"))&&b(t,"class",_),(!P||W[0]&32)&&Xe(t,"--boardTheme","url("+(L[5].state.board.boardTheme==="standard"?bn:pn)+")"),f&&Us(f.update)&&W[0]&160&&f.update.call(null,{svg:L[7],flipped:L[5].flipped,enabled:L[5].state.drawTools.enabled&&L[5].state.board.mouseEvents,settings:L[5].state.drawTools.settings}),L[5].soundsEnabled?U?(U.p(L,W),W[0]&32&&j(U,1)):(U=In(L),U.c(),j(U,1),U.m(M.parentNode,M)):U&&(Ue(),Q(U,1,1,()=>{U=null}),Be())},i(L){P||(j(q),j(k),j(B),j(H),j(K),j(ee),j(Z),j(ne,L),j(z,L),j(te,L),j(U),P=!0)},o(L){Q(q),Q(k),Q(B),Q(H),Q(K),Q(ee),Q(Z),Q(ne,L),Q(z,L),Q(te,L),Q(U),P=!1},d(L){L&&(S(e),S(g),S(M)),q&&q.d(),k&&k.d(),B&&B.d(),H&&H.d(),K&&K.d(),ee&&ee.d(),Z&&Z.d(),ne&&ne.d(L),z&&z.d(L),te&&te.d(L),s[73](null),U&&U.d(L),T=!1,at(F)}}}function yr(s,e,t){let{$$slots:n={},$$scope:a}=e,{config:r}=e,{class:l=void 0}=e;const i=new Os(r),o=Xt();let u,d,c,h,C="",v=!1,E=!1;const p=m=>{i.clearAllSquares(m),m==="LEGAL"&&i.clearAllSquares("LEGALHOVER"),m==="PREMOVE"&&i.clearAllSquares("PREMOVEHOVER"),t(5,i)},_=(m,O)=>{f(O)&&(i.highlightSquare(m,O),t(5,i))},f=m=>i.highlightEnabled&&(m===void 0||i.highlightSettings[_r(m)]),g=m=>{if(!i.selectableEnabled&&i.draggableEnabled&&Ie(m),!i.selectableEnabled)return;M(!0);const O=i.getPieceFromSquare(m);O!==void 0&&(t(5,i.selectedPiece=O,i),Ie())},M=(m=!0)=>{p("SELECT"),p("LEGAL"),p("PREMOVE"),t(5,i.selectedPiece=void 0,i),m&&(p("NEXTMOVE"),t(5,i.currentPreMove="",i))},P=m=>{p("CHECK"),m&&i.legalEnabled&&_(m,"CHECK"),t(5,i)},T=()=>{p("CHECK")},F=m=>{i.flipBoard(m),t(5,i)},q=(m,O)=>{m.forEach(ie=>i.highlightSquare(ie,O)),t(5,i)},k=(m,O=!0,ie="MOVE")=>{m!==void 0&&(m.length<4||!f(ie)||(O&&p(ie),q([m.substring(0,2),m.substring(2,4)],ie)))},B=m=>{_(m.substring(2,4),"LEGAL")},H=(m,O,ie="LEGAL")=>{p(ie),f(ie)&&(m.forEach(ue=>{ue.length<4||(O===void 0||ue.substring(0,2)===O)&&i.highlightSquare(ue.substring(2,4),ie)}),t(5,i))},K=(m,O=!0)=>{i.makeMove(m),O&&k(m),t(5,i)},ee=m=>{var O;m&&(i.removePiece(m),i.ghostPieceEnabled&&((O=i.ghostPiece)==null?void 0:O.square)===m&&(i.removeGhostPiece(),t(5,i)),t(5,i))},Z=m=>i.whiteToMove&&m[0]==="w"||!i.whiteToMove&&m[0]==="b",de=(m=!1)=>{var O,ie,ue,fe,we,Me,Qe,He;i.legalEnabled&&(t(5,i.whiteToMove=((ie=(O=i.state.callbacks).getWhiteToMove)==null?void 0:ie.call(O))??i.whiteToMove,i),i.preMovesEnabled&&t(5,i.preMoves=((fe=(ue=i.state.callbacks).getPreMoves)==null?void 0:fe.call(ue))??[],i),i.legalEnabled&&t(5,i.legalMoves=((Me=(we=i.state.callbacks).getLegalMoves)==null?void 0:Me.call(we))??[],i),m&&Ie(),(He=(Qe=i.state.callbacks).getInCheck)!=null&&He.call(Qe)?i.whiteToMove?P(i.getWhiteKingSquare()):P(i.getBlackKingSquare()):T(),i.state.callbacks.getLastMove?(t(5,i.lastMove=i.state.callbacks.getLastMove(),i),k(i.lastMove)):p("MOVE"))},ne=m=>{var O;i.soundsEnabled&&c&&((O=c.playMoveSound)==null||O.call(c,m))},D=m=>{i.setGhostPiece(m),t(5,i)},z=()=>{i.removeGhostPiece(),t(5,i)},x=m=>{var we,Me,Qe,He;if(m.substring(0,2)===m.substring(2,4))return;(Me=(we=i.state.callbacks).beforeMove)==null||Me.call(we,m);const O=i.selectedPiece?{...i.selectedPiece}:void 0;M(!1);const ie=i.getRookMoveIfIsCastling(m),ue=i.getCapturedPawnSquareIfIsEnPassant(m);ie&&i.state.legal.settings.allowCastling?(K(ie,!1),ne("CASTLE")):ue&&i.state.legal.settings.allowEnPassant?(ee(ue),ne("CAPTURE")):i.isCapture(m)?ne("CAPTURE"):ne("MOVE"),z(),K(m),(He=(Qe=i.state.callbacks).afterMove)==null||He.call(Qe,m),de(!1);const fe=i.getPieceFromSquare(O==null?void 0:O.square);if(fe&&O&&fe.square===O.square&&fe.name===(O==null?void 0:O.name)?t(5,i.selectedPiece=fe,i):t(5,i.selectedPiece=void 0,i),i.selectedPiece!==void 0&&Ie(),i.legalEnabled&&i.preMovesEnabled&&i.currentPreMove!==""){if(i.legalMoves.includes(i.currentPreMove)){const Ss=i.currentPreMove;mi().then(()=>{x(Ss)})}t(5,i.currentPreMove="",i),p("NEXTMOVE")}},te=m=>{!i.legalEnabled||!i.preMovesEnabled||!i.movableEnabled||(M(!1),k(m,!0,"NEXTMOVE"),t(5,i.currentPreMove=m,i),o("nextMove",{move:m}))},U=m=>{var ue;const O=i.getPieceFromSquare(m.substring(0,2));if(!O)return;const ie=O.name[0]==="w"?"WHITE":"BLACK";(ue=h.openPromotionModal)==null||ue.call(h,ie==="WHITE"),C=m,v=i.isCapture(m),i.makeMove(m),p("LEGAL"),p("SELECT"),k(m)},L=(m,O)=>{i.clearSquare(m,O),t(5,i)},W=m=>{i.clearAllPieces(m),t(5,i)};function w(m,O){typeof m=="string"&&O?i.setPiece(m,O):typeof m=="object"&&i.setPiece(m),t(5,i)}const ce=(m,O)=>{var ue;const ie=(ue=i.getPieceFromSquare(m))==null?void 0:ue.name;ie&&(O!==void 0?i.setPiece(m,`${O==="WHITE"?"w":"b"}${ie[1]}`):i.setPiece(m,`${ie[0]==="w"?"b":"w"}${ie[1]}`),t(5,i))},he=(m,O)=>{const ie=Math.floor(m/i.state.board.size*8),ue=Math.floor(O/i.state.board.size*8),fe=i.flipped?7-ie:ie,we=i.flipped?ue:7-ue;if(fe<0||fe>7||we<0||we>7)return;const Me=Object.keys(i.letters)[fe],Qe=(we+1).toString();return`${Me}${Qe}`},ve=m=>{if(!i.state.board.mouseEvents)return;if(m.button===2){M();return}const O=u.getBoundingClientRect(),ie=m.clientX-O.left,ue=m.clientY-O.top,fe=he(ie,ue);if(!fe)return;const we=i.getPieceFromSquare(fe);if(o("squareClick",{square:fe,piece:we==null?void 0:we.name}),!i.movableEnabled)return;if(!i.selectableEnabled&&!i.draggableEnabled){M();return}if(!i.selectedPiece||i.selectedPiece.square===fe)return;const Me=i.selectedPiece.square+fe;if(!i.legalEnabled){x(Me),M();return}if(!Z(i.selectedPiece.name)){i.preMovesEnabled&&i.preMoves.includes(Me)&&(i.isPromotion(Me)?te(`${Me}q`):te(Me),m.stopPropagation()),M(!1);return}(we===void 0||we.name[0]!==i.selectedPiece.name[0])&&Z(i.selectedPiece.name)&&(i.isPromotion(Me)&&i.legalMoves.includes(Me)?U(Me):i.legalMoves.includes(Me)&&x(Me),M())},qe=m=>{const O=m.detail;i.legalEnabled?i.isPromotion(O)&&i.legalMoves.includes(`${O}q`)?U(O):i.legalMoves.includes(O)?x(O):i.preMovesEnabled&&i.preMoves.includes(O)?i.isPromotion(O)?te(`${O}q`):te(O):M():x(O),p("LEGAL"),p("PREMOVE"),t(5,i)},Ie=m=>{var O;if(i.selectableEnabled||i.draggableEnabled){const ie=i.getPieceFromSquare(m??((O=i.selectedPiece)==null?void 0:O.square));if(!ie||(i.selectableEnabled&&_(ie.square,"SELECT"),!i.legalEnabled))return;p("LEGAL"),p("PREMOVE"),Z(ie.name)&&H(i.legalMoves,ie.square),Z(ie.name)||H(i.preMoves,ie.square,"PREMOVE")}};function Ne(m,O){i.updatePieces(m);const ie=(O==null?void 0:O.deselectPiece)??!0,ue=(O==null?void 0:O.sound)??"MOVE";if(ie&&M(),p(),z(),de(!1),t(5,i.currentPreMove="",i),i.state.callbacks.getLastMove){const fe=i.state.callbacks.getLastMove();t(5,i.lastMove=fe,i),ue!==!1&&(ue!=="MOVE"?ne(ue):i.isCastling(fe)?ne("CASTLE"):ne(ue)),k(fe)}else ue!==!1&&ne(ue);Ie(),t(5,i)}const Oe=()=>i.getShortFEN(),Re=m=>{!m||i.state.board.size===m||(t(5,i.state.board.size=m,i),E&&i.state.board.resizible&&document.body.style.setProperty("--boardSize",`${i.state.board.size}px`))},Ye=m=>{!m||i.state.board.scale===m||(t(5,i.state.board.scale=m,i),o("resize",{scale:m}),E&&i.state.board.resizible&&document.body.style.setProperty("--boardScale",`${i.state.board.scale}`))},ct=m=>{var O;return(O=i.getPieceFromSquare(m))==null?void 0:O.name},Je=m=>{t(5,i.state.drawTools.tools=m,i)},$e=m=>{t(5,i.state.drawTools.tools=i.state.drawTools.tools.filter(O=>m?(!m.type||O.type!==m.type)&&(!m.from||O.type==="arrow"&&O.from!==m.from||O.type==="circle"&&O.square!==m.from)&&(!m.to||O.type==="arrow"&&O.to!==m.to)&&(m.fixed===void 0||O.fixed!==m.fixed):!1),i)},Ve=m=>{m===!1?t(5,i.state.movable.enabled=!1,i):(t(5,i.state.movable.enabled=!0,i),t(5,i.state.movable.color=m===!0?"BOTH":m,i))},rt=m=>{m.length<4||(t(5,i.lastMove=m,i),k(m))},Nt=m=>{t(5,i.legalMoves=m,i)},Pt=m=>{t(5,i.preMoves=m,i)},Rt=()=>i.state,et=m=>{t(5,i.state=m,i),p(),de(!1),k(i.lastMove),k(i.currentPreMove,!0,"NEXTMOVE"),Ie()},Yt=m=>{m!==void 0&&(i.setConfigSettings(m),t(5,i),et(i.state))},Dt=m=>m.getConfig(),tt=(m,O)=>{i.legalEnabled&&(Z(O.name)&&i.legalHover(m.detail.square),!Z(O.name)&&i.preMovesEnabled&&i.legalHover(m.detail.square,"PREMOVE")),t(5,i)},At=m=>{i.ghostPieceEnabled&&D(m),p("SELECT")},Tt=m=>{var fe,we,Me,Qe;const O=i.getPieceFromSquare(C.substring(2,4));if(!O)return;const ie=O.name[0]+m.detail.toUpperCase(),ue=C+m.detail;(we=(fe=i.state.callbacks).beforeMove)==null||we.call(fe,ue),i.setPiece(O.square,ie),t(5,i),ne(v?"CAPTURE":"MOVE"),(Qe=(Me=i.state.callbacks).afterMove)==null||Qe.call(Me,ue),de()},Lt=m=>{const O=i.getPieceFromSquare(m.square);O&&O.square===m.square&&O.name===m.name&&i.selectableEnabled?_(m.square,"SELECT"):M()},st=m=>m==="a1"?i.flipped?"top-right":"bottom-left":m==="a8"?i.flipped?"bottom-right":"top-left":m==="h1"?i.flipped?"top-left":"bottom-right":m==="h8"?i.flipped?"bottom-left":"top-right":"",zt=m=>!i.movableEnabled||!i.state.board.mouseEvents||!i.draggableEnabled&&!i.selectableEnabled?"":i.legalEnabled?i.preMovesEnabled&&i.state.movable.color!=="BOTH"?i.state.movable.color[0].toLowerCase():i.state.movable.color==="BOTH"||m===(i.state.movable.color==="WHITE")?m?"w":"b":"":"wb";ms(()=>{var m,O;return t(10,E=!0),de(!0),k((O=(m=i.state.callbacks).getLastMove)==null?void 0:O.call(m)),i.state.board.resizible&&document.body.style.setProperty("--boardScale",`${i.state.board.scale}`),()=>{i.state.board.resizible&&document.body.style.removeProperty("--boardScale")}});function nt(m){it.call(this,s,m)}function Ut(m){it.call(this,s,m)}const lt=m=>{o("piececlick",{piece:m}),g(m.square)},Bt=m=>{o("startDragging",{piece:m}),At(m)},Mt=(m,O)=>tt(O,m);function It(m){it.call(this,s,m)}const qt=m=>Lt(m),Vt=()=>M(),ot=()=>M(),Ht=m=>{_(m.detail.square,"LEGALHOVER")},Qt=m=>{Ye(m.detail)};function vs(m){d=m,t(7,d)}function _s(m){$[m?"unshift":"push"](()=>{h=m,t(9,h)})}const Es=m=>{t(5,i.state.board.size=m.detail,i)},Ms=m=>o("drawCircle",{square:m.detail.square,color:m.detail.color}),ks=m=>o("drawArrow",{move:m.detail.move,color:m.detail.color});function ht(m){$[m?"unshift":"push"](()=>{u=m,t(6,u)})}function ws(m){$[m?"unshift":"push"](()=>{c=m,t(8,c)})}return s.$$set=m=>{"config"in m&&t(20,r=m.config),"class"in m&&t(0,l=m.class),"$$scope"in m&&t(55,a=m.$$scope)},[l,_,g,M,Ye,i,u,d,c,h,E,o,ve,qe,tt,At,Tt,Lt,st,zt,r,p,P,T,F,q,k,B,H,K,ee,de,ne,x,te,U,L,W,w,ce,he,Ne,Oe,Re,ct,Je,$e,Ve,rt,Nt,Pt,Rt,et,Yt,Dt,a,n,nt,Ut,lt,Bt,Mt,It,qt,Vt,ot,Ht,Qt,vs,_s,Es,Ms,ks,ht,ws]}class Pr extends ye{constructor(e){super(),Pe(this,e,yr,Cr,Ce,{config:20,class:0,clearAllSquares:21,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:22,removeCheckSquare:23,flipBoard:24,highlightManySquares:25,highlightMove:26,highlightLegalMove:27,highlightLegalMoves:28,movePiece:29,removePiece:30,updateLegalState:31,playMoveSound:32,makeMove:33,makeNextMove:34,makeMovePromotion:35,removeSquareHighlight:36,removeAllPiece:37,createPiece:38,changeColorOfPiece:39,getSquareFromCoords:40,setPieces:41,getShortFEN:42,setSize:43,setScale:4,getPieceNameFromSquare:44,setTools:45,removeTools:46,setMovableColor:47,setLastMove:48,setLegalMoves:49,setPreMoves:50,getState:51,setState:52,setConfigSettings:53,getConfigFromState:54},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[21]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[22]}get removeCheckSquare(){return this.$$.ctx[23]}get flipBoard(){return this.$$.ctx[24]}get highlightManySquares(){return this.$$.ctx[25]}get highlightMove(){return this.$$.ctx[26]}get highlightLegalMove(){return this.$$.ctx[27]}get highlightLegalMoves(){return this.$$.ctx[28]}get movePiece(){return this.$$.ctx[29]}get removePiece(){return this.$$.ctx[30]}get updateLegalState(){return this.$$.ctx[31]}get playMoveSound(){return this.$$.ctx[32]}get makeMove(){return this.$$.ctx[33]}get makeNextMove(){return this.$$.ctx[34]}get makeMovePromotion(){return this.$$.ctx[35]}get removeSquareHighlight(){return this.$$.ctx[36]}get removeAllPiece(){return this.$$.ctx[37]}get createPiece(){return this.$$.ctx[38]}get changeColorOfPiece(){return this.$$.ctx[39]}get getSquareFromCoords(){return this.$$.ctx[40]}get setPieces(){return this.$$.ctx[41]}get getShortFEN(){return this.$$.ctx[42]}get setSize(){return this.$$.ctx[43]}get setScale(){return this.$$.ctx[4]}get getPieceNameFromSquare(){return this.$$.ctx[44]}get setTools(){return this.$$.ctx[45]}get removeTools(){return this.$$.ctx[46]}get setMovableColor(){return this.$$.ctx[47]}get setLastMove(){return this.$$.ctx[48]}get setLegalMoves(){return this.$$.ctx[49]}get setPreMoves(){return this.$$.ctx[50]}get getState(){return this.$$.ctx[51]}get setState(){return this.$$.ctx[52]}get setConfigSettings(){return this.$$.ctx[53]}get getConfigFromState(){return this.$$.ctx[54]}}const Ar=["standard","darkBlue"],Tr=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function qn(s){let e,t,n;return{c(){e=N("input"),this.h()},l(a){e=R(a,"INPUT",{type:!0,class:!0}),this.h()},h(){b(e,"type","checkbox"),b(e,"class","mr-1")},m(a,r){G(a,e,r),e.checked=s[0],t||(n=[ae(e,"change",s[8]),ae(e,"click",Vn(s[7])),ae(e,"change",s[9])],t=!0)},p(a,r){r&1&&(e.checked=a[0])},d(a){a&&S(e),t=!1,at(n)}}}function On(s){let e,t,n;return{c(){e=De("svg"),t=De("path"),this.h()},l(a){e=ze(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=V(e);t=ze(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),V(t).forEach(S),r.forEach(S),this.h()},h(){b(t,"fill-rule","evenodd"),b(t,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),b(t,"clip-rule","evenodd"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 20 20"),b(e,"fill","currentColor"),b(e,"class",n="w-5 h-5 transition "+(s[1]?"rotate-180":"rotate-0"))},m(a,r){G(a,e,r),y(e,t)},p(a,r){r&2&&n!==(n="w-5 h-5 transition "+(a[1]?"rotate-180":"rotate-0"))&&b(e,"class",n)},d(a){a&&S(e)}}}function Fn(s){let e,t,n;const a=s[6].default,r=ns(a,s,s[5],null);return{c(){e=N("div"),r&&r.c(),this.h()},l(l){e=R(l,"DIV",{class:!0});var i=V(e);r&&r.l(i),i.forEach(S),this.h()},h(){b(e,"class","py-2 px-4")},m(l,i){G(l,e,i),r&&r.m(e,null),n=!0},p(l,i){r&&r.p&&(!n||i&32)&&is(r,a,l,l[5],n?rs(a,l[5],i,null):as(l[5]),null)},i(l){n||(j(r,l),l&&yt(()=>{n&&(t||(t=hs(e,bs,{},!0)),t.run(1))}),n=!0)},o(l){Q(r,l),l&&(t||(t=hs(e,bs,{},!1)),t.run(0)),n=!1},d(l){l&&S(e),r&&r.d(l),l&&t&&t.end()}}}function Lr(s){let e,t,n,a,r,l,i,o,u,d,c,h,C,v,E=s[0]!==void 0&&qn(s),p=s[3]&&On(s),_=s[1]&&Fn(s);return{c(){e=N("div"),t=N("button"),n=N("div"),E&&E.c(),a=X(),r=N("span"),l=We(s[2]),o=X(),p&&p.c(),c=X(),_&&_.c(),this.h()},l(f){e=R(f,"DIV",{class:!0});var g=V(e);t=R(g,"BUTTON",{class:!0});var M=V(t);n=R(M,"DIV",{class:!0});var P=V(n);E&&E.l(P),a=Y(P),r=R(P,"SPAN",{class:!0});var T=V(r);l=Ge(T,s[2]),T.forEach(S),P.forEach(S),o=Y(M),p&&p.l(M),M.forEach(S),c=Y(g),_&&_.l(g),g.forEach(S),this.h()},h(){b(r,"class",i=s[0]===void 0?"ml-[21px]":""),b(n,"class","flex gap-1"),b(t,"class",u="flex justify-between px-4 py-2 "+(s[3]?"transition hover:bg-slate-800/40":"")+" rounded"),t.disabled=d=!s[3],b(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(f,g){G(f,e,g),y(e,t),y(t,n),E&&E.m(n,null),y(n,a),y(n,r),y(r,l),y(t,o),p&&p.m(t,null),y(e,c),_&&_.m(e,null),h=!0,C||(v=ae(t,"click",s[10]),C=!0)},p(f,[g]){f[0]!==void 0?E?E.p(f,g):(E=qn(f),E.c(),E.m(n,a)):E&&(E.d(1),E=null),(!h||g&4)&&zs(l,f[2]),(!h||g&1&&i!==(i=f[0]===void 0?"ml-[21px]":""))&&b(r,"class",i),f[3]?p?p.p(f,g):(p=On(f),p.c(),p.m(t,null)):p&&(p.d(1),p=null),(!h||g&8&&u!==(u="flex justify-between px-4 py-2 "+(f[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&b(t,"class",u),(!h||g&8&&d!==(d=!f[3]))&&(t.disabled=d),f[1]?_?(_.p(f,g),g&2&&j(_,1)):(_=Fn(f),_.c(),j(_,1),_.m(e,null)):_&&(Ue(),Q(_,1,1,()=>{_=null}),Be())},i(f){h||(j(_),h=!0)},o(f){Q(_),h=!1},d(f){f&&S(e),E&&E.d(),p&&p.d(),_&&_.d(),C=!1,v()}}}function Ir(s,e,t){let{$$slots:n={},$$scope:a}=e;const r=Xt();let{name:l="board"}=e,{enabled:i=void 0}=e,{showExpand:o=!0}=e,{expanded:u=!1}=e;function d(v){it.call(this,s,v)}const c=()=>r("changed",i);function h(){i=this.checked,t(0,i)}const C=()=>{t(1,u=!u)};return s.$$set=v=>{"name"in v&&t(2,l=v.name),"enabled"in v&&t(0,i=v.enabled),"showExpand"in v&&t(3,o=v.showExpand),"expanded"in v&&t(1,u=v.expanded),"$$scope"in v&&t(5,a=v.$$scope)},[i,u,l,o,r,a,n,d,c,h,C]}class Et extends ye{constructor(e){super(),Pe(this,e,Ir,Lr,Ce,{name:2,enabled:0,showExpand:3,expanded:1})}}function qr(s,e,t){const n=s.slice();return n[12]=e[t],n}function Or(s){let e,t;return{c(){e=N("option"),t=We(s[12]),this.h()},l(n){e=R(n,"OPTION",{});var a=V(e);t=Ge(a,s[12]),a.forEach(S),this.h()},h(){e.__value=s[12],St(e,e.__value)},m(n,a){G(n,e,a),y(e,t)},p:Ee,d(n){n&&S(e)}}}function Fr(s){let e,t,n,a,r="board theme",l,i,o,u,d,c="mouseEvents",h,C,v,E,p,_="notation",f,g,M,P,T,F="flipped",q,k,B,H,K,ee="resizible",Z,de,ne=Le(Ar),D=[];for(let z=0;z<ne.length;z+=1)D[z]=Or(qr(s,ne,z));return{c(){e=N("div"),t=N("select");for(let z=0;z<D.length;z+=1)D[z].c();n=X(),a=N("label"),a.textContent=r,l=X(),i=N("div"),o=N("input"),u=X(),d=N("label"),d.textContent=c,h=X(),C=N("div"),v=N("input"),E=X(),p=N("label"),p.textContent=_,f=X(),g=N("div"),M=N("input"),P=X(),T=N("label"),T.textContent=F,q=X(),k=N("div"),B=N("input"),H=X(),K=N("label"),K.textContent=ee,this.h()},l(z){e=R(z,"DIV",{class:!0});var x=V(e);t=R(x,"SELECT",{class:!0});var te=V(t);for(let ce=0;ce<D.length;ce+=1)D[ce].l(te);te.forEach(S),n=Y(x),a=R(x,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(a)!=="svelte-ew2mxm"&&(a.textContent=r),x.forEach(S),l=Y(z),i=R(z,"DIV",{class:!0});var U=V(i);o=R(U,"INPUT",{id:!0,type:!0,class:!0}),u=Y(U),d=R(U,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(d)!=="svelte-1la83j8"&&(d.textContent=c),U.forEach(S),h=Y(z),C=R(z,"DIV",{class:!0});var L=V(C);v=R(L,"INPUT",{id:!0,type:!0,class:!0}),E=Y(L),p=R(L,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(p)!=="svelte-lv5m04"&&(p.textContent=_),L.forEach(S),f=Y(z),g=R(z,"DIV",{class:!0});var W=V(g);M=R(W,"INPUT",{id:!0,type:!0,class:!0}),P=Y(W),T=R(W,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(T)!=="svelte-60d3o8"&&(T.textContent=F),W.forEach(S),q=Y(z),k=R(z,"DIV",{class:!0});var w=V(k);B=R(w,"INPUT",{id:!0,type:!0,class:!0}),H=Y(w),K=R(w,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(K)!=="svelte-nvi1b1"&&(K.textContent=ee),w.forEach(S),this.h()},h(){b(t,"class","svelte-1c01etf"),s[0]===void 0&&yt(()=>s[7].call(t)),b(a,"for","boardTheme"),b(a,"class","select-none"),b(e,"class","mb-2"),b(o,"id","mouseEvents"),b(o,"type","checkbox"),b(o,"class","svelte-1c01etf"),b(d,"for","mouseEvents"),b(d,"class","select-none"),b(i,"class","mb-2"),b(v,"id","notation"),b(v,"type","checkbox"),b(v,"class","svelte-1c01etf"),b(p,"for","notation"),b(p,"class","select-none"),b(C,"class","mb-2"),b(M,"id","flipped"),b(M,"type","checkbox"),b(M,"class","svelte-1c01etf"),b(T,"for","flipped"),b(T,"class","select-none"),b(g,"class","mb-2"),b(B,"id","resizibleEnabled"),b(B,"type","checkbox"),b(B,"class","svelte-1c01etf"),b(K,"for","resizibleEnabled"),b(K,"class","select-none"),b(k,"class","mt-2 mb-1")},m(z,x){G(z,e,x),y(e,t);for(let te=0;te<D.length;te+=1)D[te]&&D[te].m(t,null);Ft(t,s[0],!0),y(e,n),y(e,a),G(z,l,x),G(z,i,x),y(i,o),o.checked=s[1],y(i,u),y(i,d),G(z,h,x),G(z,C,x),y(C,v),v.checked=s[2],y(C,E),y(C,p),G(z,f,x),G(z,g,x),y(g,M),M.checked=s[3],y(g,P),y(g,T),G(z,q,x),G(z,k,x),y(k,B),B.checked=s[4],y(k,H),y(k,K),Z||(de=[ae(t,"change",s[7]),ae(o,"change",s[8]),ae(v,"change",s[9]),ae(M,"change",s[10]),ae(B,"change",s[11])],Z=!0)},p(z,x){x&1&&Ft(t,z[0]),x&2&&(o.checked=z[1]),x&4&&(v.checked=z[2]),x&8&&(M.checked=z[3]),x&16&&(B.checked=z[4])},d(z){z&&(S(e),S(l),S(i),S(h),S(C),S(f),S(g),S(q),S(k)),_t(D,z),Z=!1,at(de)}}}function Nr(s){let e,t;return e=new Et({props:{name:s[5],expanded:s[6],$$slots:{default:[Fr]},$$scope:{ctx:s}}}),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,a){pe(e,n,a),t=!0},p(n,[a]){const r={};a&32&&(r.name=n[5]),a&64&&(r.expanded=n[6]),a&32799&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){Q(e.$$.fragment,n),t=!1},d(n){me(e,n)}}}function Rr(s,e,t){let{name:n="Board"}=e,{boardTheme:a}=e,{mouseEvents:r}=e,{notation:l}=e,{flipped:i}=e,{resizible:o=!1}=e,{expanded:u=!1}=e;function d(){a=Bs(this),t(0,a)}function c(){r=this.checked,t(1,r)}function h(){l=this.checked,t(2,l)}function C(){i=this.checked,t(3,i)}function v(){o=this.checked,t(4,o)}return s.$$set=E=>{"name"in E&&t(5,n=E.name),"boardTheme"in E&&t(0,a=E.boardTheme),"mouseEvents"in E&&t(1,r=E.mouseEvents),"notation"in E&&t(2,l=E.notation),"flipped"in E&&t(3,i=E.flipped),"resizible"in E&&t(4,o=E.resizible),"expanded"in E&&t(6,u=E.expanded)},[a,r,l,i,o,n,u,d,c,h,C,v]}class Dr extends ye{constructor(e){super(),Pe(this,e,Rr,Nr,Ce,{name:5,boardTheme:0,mouseEvents:1,notation:2,flipped:3,resizible:4,expanded:6})}}function zr(s){let e,t,n,a="Both",r,l="White",i,o="Black",u,d;return{c(){e=N("div"),t=N("select"),n=N("option"),n.textContent=a,r=N("option"),r.textContent=l,i=N("option"),i.textContent=o,this.h()},l(c){e=R(c,"DIV",{});var h=V(e);t=R(h,"SELECT",{class:!0});var C=V(t);n=R(C,"OPTION",{"data-svelte-h":!0}),ke(n)!=="svelte-1gzt2we"&&(n.textContent=a),r=R(C,"OPTION",{"data-svelte-h":!0}),ke(r)!=="svelte-d910yg"&&(r.textContent=l),i=R(C,"OPTION",{"data-svelte-h":!0}),ke(i)!=="svelte-1nle290"&&(i.textContent=o),C.forEach(S),h.forEach(S),this.h()},h(){n.__value="BOTH",St(n,n.__value),r.__value="WHITE",St(r,r.__value),i.__value="BLACK",St(i,i.__value),b(t,"class","svelte-1bvjddo"),s[1]===void 0&&yt(()=>s[4].call(t))},m(c,h){G(c,e,h),y(e,t),y(t,n),y(t,r),y(t,i),Ft(t,s[1],!0),u||(d=ae(t,"change",s[4]),u=!0)},p(c,h){h&2&&Ft(t,c[1])},d(c){c&&S(e),u=!1,d()}}}function Ur(s){let e,t,n;function a(l){s[5](l)}let r={name:s[2],expanded:s[3],$$slots:{default:[zr]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new Et({props:r}),$.push(()=>oe(e,"enabled",a)),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,i){pe(e,l,i),n=!0},p(l,[i]){const o={};i&4&&(o.name=l[2]),i&8&&(o.expanded=l[3]),i&66&&(o.$$scope={dirty:i,ctx:l}),!t&&i&1&&(t=!0,o.enabled=l[0],le(()=>t=!1)),e.$set(o)},i(l){n||(j(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){me(e,l)}}}function Br(s,e,t){let{name:n="Movable"}=e,{enabled:a=!1}=e,{color:r}=e,{expanded:l=!1}=e;function i(){r=Bs(this),t(1,r)}function o(u){a=u,t(0,a)}return s.$$set=u=>{"name"in u&&t(2,n=u.name),"enabled"in u&&t(0,a=u.enabled),"color"in u&&t(1,r=u.color),"expanded"in u&&t(3,l=u.expanded)},[a,r,n,l,i,o]}class Vr extends ye{constructor(e){super(),Pe(this,e,Br,Ur,Ce,{name:2,enabled:0,color:1,expanded:3})}}function Hr(s,e,t){const n=s.slice();return n[14]=e[t],n}function Nn(s){let e,t,n,a,r,l="duration",i,o,u,d,c,h="easing",C,v,E,p,_,f="Click-Move Animation",g,M,P,T,F=Le(Tr),q=[];for(let k=0;k<F.length;k+=1)q[k]=jr(Hr(s,F,k));return{c(){e=N("div"),t=N("div"),n=N("input"),a=X(),r=N("label"),r.textContent=l,i=X(),o=N("div"),u=N("select");for(let k=0;k<q.length;k+=1)q[k].c();d=X(),c=N("label"),c.textContent=h,C=X(),v=N("div"),E=N("input"),p=X(),_=N("label"),_.textContent=f,this.h()},l(k){e=R(k,"DIV",{class:!0});var B=V(e);t=R(B,"DIV",{class:!0});var H=V(t);n=R(H,"INPUT",{id:!0,type:!0,class:!0}),a=Y(H),r=R(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-4eor77"&&(r.textContent=l),H.forEach(S),i=Y(B),o=R(B,"DIV",{class:!0});var K=V(o);u=R(K,"SELECT",{id:!0,class:!0});var ee=V(u);for(let de=0;de<q.length;de+=1)q[de].l(ee);ee.forEach(S),d=Y(K),c=R(K,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(c)!=="svelte-ch5b0z"&&(c.textContent=h),K.forEach(S),C=Y(B),v=R(B,"DIV",{class:!0});var Z=V(v);E=R(Z,"INPUT",{id:!0,type:!0,class:!0}),p=Y(Z),_=R(Z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(_)!=="svelte-1rhevch"&&(_.textContent=f),Z.forEach(S),B.forEach(S),this.h()},h(){b(n,"id","transitionDuration"),b(n,"type","number"),b(n,"class","w-16 svelte-16wipjp"),b(r,"for","transitionDuration"),b(r,"class","select-none"),b(t,"class","flex gap-2 mb-2"),b(u,"id","easingFuncs"),b(u,"class","svelte-16wipjp"),s[4]===void 0&&yt(()=>s[11].call(u)),b(c,"for","easingFuncs"),b(c,"class","select-none"),b(o,"class","flex gap-2 mb-2"),b(E,"id","clickMoveAnimation"),b(E,"type","checkbox"),b(E,"class","svelte-16wipjp"),b(_,"for","clickMoveAnimation"),b(_,"class","select-none"),b(v,"class","flex gap-2"),b(e,"class","pl-2 pr-4 flex-col")},m(k,B){G(k,e,B),y(e,t),y(t,n),St(n,s[3]),y(t,a),y(t,r),y(e,i),y(e,o),y(o,u);for(let H=0;H<q.length;H+=1)q[H]&&q[H].m(u,null);Ft(u,s[4],!0),y(o,d),y(o,c),y(e,C),y(e,v),y(v,E),E.checked=s[5],y(v,p),y(v,_),M=!0,P||(T=[ae(n,"input",s[10]),ae(u,"change",s[11]),ae(E,"change",s[12])],P=!0)},p(k,B){B&8&&Hn(n.value)!==k[3]&&St(n,k[3]),B&16&&Ft(u,k[4]),B&32&&(E.checked=k[5])},i(k){M||(k&&yt(()=>{M&&(g||(g=hs(e,bs,{},!0)),g.run(1))}),M=!0)},o(k){k&&(g||(g=hs(e,bs,{},!1)),g.run(0)),M=!1},d(k){k&&S(e),_t(q,k),k&&g&&g.end(),P=!1,at(T)}}}function jr(s){let e,t;return{c(){e=N("option"),t=We(s[14]),this.h()},l(n){e=R(n,"OPTION",{});var a=V(e);t=Ge(a,s[14]),a.forEach(S),this.h()},h(){e.__value=s[14],St(e,e.__value)},m(n,a){G(n,e,a),y(e,t)},p:Ee,d(n){n&&S(e)}}}function Kr(s){let e,t,n,a,r="ghost piece",l,i,o,u,d,c="transition",h,C,v,E,p=s[2]&&Nn(s);return{c(){e=N("div"),t=N("input"),n=X(),a=N("label"),a.textContent=r,l=X(),i=N("div"),o=N("input"),u=X(),d=N("label"),d.textContent=c,h=X(),p&&p.c(),C=Se(),this.h()},l(_){e=R(_,"DIV",{class:!0});var f=V(e);t=R(f,"INPUT",{id:!0,type:!0,class:!0}),n=Y(f),a=R(f,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(a)!=="svelte-1m15pvs"&&(a.textContent=r),f.forEach(S),l=Y(_),i=R(_,"DIV",{class:!0});var g=V(i);o=R(g,"INPUT",{id:!0,type:!0,class:!0}),u=Y(g),d=R(g,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(d)!=="svelte-62e5k3"&&(d.textContent=c),g.forEach(S),h=Y(_),p&&p.l(_),C=Se(),this.h()},h(){b(t,"id","ghostPiece"),b(t,"type","checkbox"),b(t,"class","svelte-16wipjp"),b(a,"for","ghostPiece"),b(a,"class","select-none"),b(e,"class","mb-2"),b(o,"id","draggableEnabled"),b(o,"type","checkbox"),b(o,"class","svelte-16wipjp"),b(d,"for","draggableEnabled"),b(d,"class","select-none"),b(i,"class","mb-2")},m(_,f){G(_,e,f),y(e,t),t.checked=s[1],y(e,n),y(e,a),G(_,l,f),G(_,i,f),y(i,o),o.checked=s[2],y(i,u),y(i,d),G(_,h,f),p&&p.m(_,f),G(_,C,f),v||(E=[ae(t,"change",s[8]),ae(o,"change",s[9])],v=!0)},p(_,f){f&2&&(t.checked=_[1]),f&4&&(o.checked=_[2]),_[2]?p?(p.p(_,f),f&4&&j(p,1)):(p=Nn(_),p.c(),j(p,1),p.m(C.parentNode,C)):p&&(Ue(),Q(p,1,1,()=>{p=null}),Be())},d(_){_&&(S(e),S(l),S(i),S(h),S(C)),p&&p.d(_),v=!1,at(E)}}}function Wr(s){let e,t,n;function a(l){s[13](l)}let r={name:s[6],expanded:s[7],$$slots:{default:[Kr]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new Et({props:r}),$.push(()=>oe(e,"enabled",a)),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,i){pe(e,l,i),n=!0},p(l,[i]){const o={};i&64&&(o.name=l[6]),i&128&&(o.expanded=l[7]),i&131134&&(o.$$scope={dirty:i,ctx:l}),!t&&i&1&&(t=!0,o.enabled=l[0],le(()=>t=!1)),e.$set(o)},i(l){n||(j(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){me(e,l)}}}function Gr(s,e,t){let{name:n="Draggable"}=e,{enabled:a=!1}=e,{ghostPiece:r=!1}=e,{transition:l=!1}=e,{duration:i=120}=e,{easing:o="easeInOut"}=e,{clickMoveAnimation:u=!0}=e,{expanded:d=!1}=e;function c(){r=this.checked,t(1,r)}function h(){l=this.checked,t(2,l)}function C(){i=Hn(this.value),t(3,i)}function v(){o=Bs(this),t(4,o)}function E(){u=this.checked,t(5,u)}function p(_){a=_,t(0,a)}return s.$$set=_=>{"name"in _&&t(6,n=_.name),"enabled"in _&&t(0,a=_.enabled),"ghostPiece"in _&&t(1,r=_.ghostPiece),"transition"in _&&t(2,l=_.transition),"duration"in _&&t(3,i=_.duration),"easing"in _&&t(4,o=_.easing),"clickMoveAnimation"in _&&t(5,u=_.clickMoveAnimation),"expanded"in _&&t(7,d=_.expanded)},[a,r,l,i,o,u,n,d,c,h,C,v,E,p]}class Xr extends ye{constructor(e){super(),Pe(this,e,Gr,Wr,Ce,{name:6,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,clickMoveAnimation:5,expanded:7})}}function Rn(s,e,t){const n=s.slice();return n[7]=e[t],n[8]=e,n[9]=t,n}function Dn(s){let e,t,n,a,r=s[7]+"",l,i,o,u;function d(){s[5].call(t,s[7])}return{c(){e=N("div"),t=N("input"),n=X(),a=N("label"),l=We(r),i=X(),this.h()},l(c){e=R(c,"DIV",{class:!0});var h=V(e);t=R(h,"INPUT",{id:!0,type:!0}),n=Y(h),a=R(h,"LABEL",{for:!0,class:!0});var C=V(a);l=Ge(C,r),C.forEach(S),i=Y(h),h.forEach(S),this.h()},h(){b(t,"id",s[7]+"Enabled"),b(t,"type","checkbox"),b(a,"for",s[7]+"Enabled"),b(a,"class","select-none"),b(e,"class","mb-2")},m(c,h){G(c,e,h),y(e,t),t.checked=s[1][s[7]],y(e,n),y(e,a),y(a,l),y(e,i),o||(u=ae(t,"change",d),o=!0)},p(c,h){s=c,h&18&&(t.checked=s[1][s[7]])},d(c){c&&S(e),o=!1,u()}}}function Yr(s){let e,t=Le(s[4]),n=[];for(let a=0;a<t.length;a+=1)n[a]=Dn(Rn(s,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Se()},l(a){for(let r=0;r<n.length;r+=1)n[r].l(a);e=Se()},m(a,r){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,r);G(a,e,r)},p(a,r){if(r&18){t=Le(a[4]);let l;for(l=0;l<t.length;l+=1){const i=Rn(a,t,l);n[l]?n[l].p(i,r):(n[l]=Dn(i),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(a){a&&S(e),_t(n,a)}}}function Qr(s){let e,t,n;function a(l){s[6](l)}let r={name:s[2],expanded:s[3],$$slots:{default:[Yr]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new Et({props:r}),$.push(()=>oe(e,"enabled",a)),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,i){pe(e,l,i),n=!0},p(l,[i]){const o={};i&4&&(o.name=l[2]),i&8&&(o.expanded=l[3]),i&1026&&(o.$$scope={dirty:i,ctx:l}),!t&&i&1&&(t=!0,o.enabled=l[0],le(()=>t=!1)),e.$set(o)},i(l){n||(j(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){me(e,l)}}}function xr(s,e,t){let{name:n="Highlight"}=e,{enabled:a=!1}=e,{settings:r}=e;const l=["select","legal","move","preMove","nextMove","check"];let{expanded:i=!1}=e;function o(d){r[d]=this.checked,t(1,r)}function u(d){a=d,t(0,a)}return s.$$set=d=>{"name"in d&&t(2,n=d.name),"enabled"in d&&t(0,a=d.enabled),"settings"in d&&t(1,r=d.settings),"expanded"in d&&t(3,i=d.expanded)},[a,r,n,i,l,o,u]}class Zr extends ye{constructor(e){super(),Pe(this,e,xr,Qr,Ce,{name:2,enabled:0,settings:1,expanded:3})}}function Jr(s){let e,t,n,a,r="L shape knight move",l,i,o,u,d,c="only chess move",h,C;return{c(){e=N("div"),t=N("input"),n=X(),a=N("label"),a.textContent=r,l=X(),i=N("div"),o=N("input"),u=X(),d=N("label"),d.textContent=c,this.h()},l(v){e=R(v,"DIV",{class:!0});var E=V(e);t=R(E,"INPUT",{id:!0,type:!0}),n=Y(E),a=R(E,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(a)!=="svelte-c4ll25"&&(a.textContent=r),E.forEach(S),l=Y(v),i=R(v,"DIV",{class:!0});var p=V(i);o=R(p,"INPUT",{id:!0,type:!0}),u=Y(p),d=R(p,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(d)!=="svelte-6d7bc1"&&(d.textContent=c),p.forEach(S),this.h()},h(){b(t,"id","knightLShapeMoveEnabled"),b(t,"type","checkbox"),b(a,"for","knightLShapeMoveEnabled"),b(a,"class","select-none"),b(e,"class","mb-2"),b(o,"id","onlyChessMoveEnabled"),b(o,"type","checkbox"),b(d,"for","onlyChessMoveEnabled"),b(d,"class","select-none"),b(i,"class","mb-2")},m(v,E){G(v,e,E),y(e,t),t.checked=s[1],y(e,n),y(e,a),G(v,l,E),G(v,i,E),y(i,o),o.checked=s[2],y(i,u),y(i,d),h||(C=[ae(t,"change",s[5]),ae(o,"change",s[6])],h=!0)},p(v,E){E&2&&(t.checked=v[1]),E&4&&(o.checked=v[2])},d(v){v&&(S(e),S(l),S(i)),h=!1,at(C)}}}function $r(s){let e,t,n;function a(l){s[7](l)}let r={name:s[3],expanded:s[4],$$slots:{default:[Jr]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new Et({props:r}),$.push(()=>oe(e,"enabled",a)),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,i){pe(e,l,i),n=!0},p(l,[i]){const o={};i&8&&(o.name=l[3]),i&16&&(o.expanded=l[4]),i&262&&(o.$$scope={dirty:i,ctx:l}),!t&&i&1&&(t=!0,o.enabled=l[0],le(()=>t=!1)),e.$set(o)},i(l){n||(j(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){me(e,l)}}}function el(s,e,t){let{name:n="DrawTools"}=e,{enabled:a=!1}=e,{knightLShape:r=!1}=e,{onlyChessMove:l=!1}=e,{expanded:i=!1}=e;function o(){r=this.checked,t(1,r)}function u(){l=this.checked,t(2,l)}function d(c){a=c,t(0,a)}return s.$$set=c=>{"name"in c&&t(3,n=c.name),"enabled"in c&&t(0,a=c.enabled),"knightLShape"in c&&t(1,r=c.knightLShape),"onlyChessMove"in c&&t(2,l=c.onlyChessMove),"expanded"in c&&t(4,i=c.expanded)},[a,r,l,n,i,o,u,d]}class tl extends ye{constructor(e){super(),Pe(this,e,el,$r,Ce,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function zn(s,e,t){const n=s.slice();return n[7]=e[t],n[8]=e,n[9]=t,n}function Un(s){let e,t,n,a,r=s[7].toLowerCase()+"",l,i,o,u;function d(){s[5].call(t,s[7])}return{c(){e=N("div"),t=N("input"),n=X(),a=N("label"),l=We(r),i=X(),this.h()},l(c){e=R(c,"DIV",{class:!0});var h=V(e);t=R(h,"INPUT",{id:!0,type:!0}),n=Y(h),a=R(h,"LABEL",{for:!0,class:!0});var C=V(a);l=Ge(C,r),C.forEach(S),i=Y(h),h.forEach(S),this.h()},h(){b(t,"id",s[7]+"Enabled"),b(t,"type","checkbox"),b(a,"for",s[7]+"Enabled"),b(a,"class","select-none"),b(e,"class","mb-2")},m(c,h){G(c,e,h),y(e,t),t.checked=s[1][s[7]],y(e,n),y(e,a),y(a,l),y(e,i),o||(u=ae(t,"change",d),o=!0)},p(c,h){s=c,h&18&&(t.checked=s[1][s[7]])},d(c){c&&S(e),o=!1,u()}}}function sl(s){let e,t=Le(s[4]),n=[];for(let a=0;a<t.length;a+=1)n[a]=Un(zn(s,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Se()},l(a){for(let r=0;r<n.length;r+=1)n[r].l(a);e=Se()},m(a,r){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,r);G(a,e,r)},p(a,r){if(r&18){t=Le(a[4]);let l;for(l=0;l<t.length;l+=1){const i=zn(a,t,l);n[l]?n[l].p(i,r):(n[l]=Un(i),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(a){a&&S(e),_t(n,a)}}}function nl(s){let e,t,n;function a(l){s[6](l)}let r={name:s[2],expanded:s[3],$$slots:{default:[sl]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new Et({props:r}),$.push(()=>oe(e,"enabled",a)),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,i){pe(e,l,i),n=!0},p(l,[i]){const o={};i&4&&(o.name=l[2]),i&8&&(o.expanded=l[3]),i&1026&&(o.$$scope={dirty:i,ctx:l}),!t&&i&1&&(t=!0,o.enabled=l[0],le(()=>t=!1)),e.$set(o)},i(l){n||(j(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){me(e,l)}}}function il(s,e,t){let{name:n="Sounds"}=e,{enabled:a=!1}=e,{settings:r}=e;const l=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:i=!1}=e;function o(d){r[d]=this.checked,t(1,r)}function u(d){a=d,t(0,a)}return s.$$set=d=>{"name"in d&&t(2,n=d.name),"enabled"in d&&t(0,a=d.enabled),"settings"in d&&t(1,r=d.settings),"expanded"in d&&t(3,i=d.expanded)},[a,r,n,i,l,o,u]}class al extends ye{constructor(e){super(),Pe(this,e,il,nl,Ce,{name:2,enabled:0,settings:1,expanded:3})}}function rl(s){let e,t;return{c(){e=De("svg"),t=De("path"),this.h()},l(n){e=ze(n,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=V(e);t=ze(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),V(t).forEach(S),a.forEach(S),this.h()},h(){b(t,"stroke-linecap","round"),b(t,"stroke-linejoin","round"),b(t,"stroke-width","2"),b(t,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),Xe(e,"transform","translate(1px, 0px)"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"class","h-5"),b(e,"fill","none"),b(e,"viewBox","0 0 24 24"),b(e,"aria-hidden","true"),b(e,"stroke","currentColor")},m(n,a){G(n,e,a),y(e,t)},d(n){n&&S(e)}}}function ll(s){let e,t;return{c(){e=De("svg"),t=De("path"),this.h()},l(n){e=ze(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=V(e);t=ze(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),V(t).forEach(S),a.forEach(S),this.h()},h(){b(t,"stroke-linecap","round"),b(t,"stroke-linejoin","round"),b(t,"stroke-width","2"),b(t,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"class","h-5 text-green-500"),b(e,"fill","none"),b(e,"viewBox","0 0 24 24"),b(e,"aria-hidden","true"),b(e,"stroke","currentColor")},m(n,a){G(n,e,a),y(e,t)},d(n){n&&S(e)}}}function ol(s){let e,t,n;function a(i,o){return i[1]?ll:rl}let r=a(s),l=r(s);return{c(){e=N("button"),l.c(),this.h()},l(i){e=R(i,"BUTTON",{type:!0,class:!0});var o=V(e);l.l(o),o.forEach(S),this.h()},h(){b(e,"type","button"),b(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(i,o){G(i,e,o),l.m(e,null),s[4](e),t||(n=ae(e,"click",s[2]),t=!0)},p(i,[o]){r!==(r=a(i))&&(l.d(1),l=r(i),l&&(l.c(),l.m(e,null)))},i:Ee,o:Ee,d(i){i&&S(e),l.d(),s[4](null),t=!1,n()}}}function ul(s,e,t){let{copyText:n}=e,a,r=!1;function l(){navigator.clipboard.writeText(n),t(1,r=!0),setTimeout(()=>{t(1,r=!1)},2e3),a.setAttribute("data-cooltipz-dir","top"),a.setAttribute("aria-label","Copied!"),setTimeout(()=>{a.removeAttribute("aria-label"),a.removeAttribute("data-cooltipz-dir")},2e3)}function i(o){$[o?"unshift":"push"](()=>{a=o,t(0,a)})}return s.$$set=o=>{"copyText"in o&&t(3,n=o.copyText)},[a,r,l,n,i]}class dl extends ye{constructor(e){super(),Pe(this,e,ul,ol,Ce,{copyText:3})}}function cl(s){let e,t,n,a,r="allow Castling",l,i,o,u,d,c="allow EnPassant",h,C;return{c(){e=N("div"),t=N("input"),n=X(),a=N("label"),a.textContent=r,l=X(),i=N("div"),o=N("input"),u=X(),d=N("label"),d.textContent=c,this.h()},l(v){e=R(v,"DIV",{class:!0});var E=V(e);t=R(E,"INPUT",{id:!0,type:!0}),n=Y(E),a=R(E,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(a)!=="svelte-1u6v9be"&&(a.textContent=r),E.forEach(S),l=Y(v),i=R(v,"DIV",{class:!0});var p=V(i);o=R(p,"INPUT",{id:!0,type:!0}),u=Y(p),d=R(p,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ke(d)!=="svelte-1u3ql6u"&&(d.textContent=c),p.forEach(S),this.h()},h(){b(t,"id","allowCastling"),b(t,"type","checkbox"),b(a,"for","allowCastling"),b(a,"class","select-none"),b(e,"class","mb-2"),b(o,"id","allowEnPassant"),b(o,"type","checkbox"),b(d,"for","allowEnPassant"),b(d,"class","select-none"),b(i,"class","mb-2")},m(v,E){G(v,e,E),y(e,t),t.checked=s[1],y(e,n),y(e,a),G(v,l,E),G(v,i,E),y(i,o),o.checked=s[2],y(i,u),y(i,d),h||(C=[ae(t,"change",s[4]),ae(o,"change",s[5])],h=!0)},p(v,E){E&2&&(t.checked=v[1]),E&4&&(o.checked=v[2])},d(v){v&&(S(e),S(l),S(i)),h=!1,at(C)}}}function hl(s){let e,t,n;function a(l){s[6](l)}let r={name:s[3],showExpand:!0,$$slots:{default:[cl]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new Et({props:r}),$.push(()=>oe(e,"enabled",a)),e.$on("changed",s[7]),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,i){pe(e,l,i),n=!0},p(l,[i]){const o={};i&8&&(o.name=l[3]),i&262&&(o.$$scope={dirty:i,ctx:l}),!t&&i&1&&(t=!0,o.enabled=l[0],le(()=>t=!1)),e.$set(o)},i(l){n||(j(e.$$.fragment,l),n=!0)},o(l){Q(e.$$.fragment,l),n=!1},d(l){me(e,l)}}}function fl(s,e,t){let{name:n="Legal"}=e,{enabled:a=!1}=e,{allowCastling:r}=e,{allowEnPassant:l}=e;function i(){r=this.checked,t(1,r)}function o(){l=this.checked,t(2,l)}function u(c){a=c,t(0,a)}function d(c){it.call(this,s,c)}return s.$$set=c=>{"name"in c&&t(3,n=c.name),"enabled"in c&&t(0,a=c.enabled),"allowCastling"in c&&t(1,r=c.allowCastling),"allowEnPassant"in c&&t(2,l=c.allowEnPassant)},[a,r,l,n,i,o,u,d]}class gl extends ye{constructor(e){super(),Pe(this,e,fl,hl,Ce,{name:3,enabled:0,allowCastling:1,allowEnPassant:2})}}function bl(s){let e,t,n,a,r,l,i,o,u,d,c,h,C,v,E,p,_,f,g,M,P,T,F,q,k,B,H,K,ee,Z,de,ne,D,z,x,te,U,L,W,w,ce,he,ve,qe,Ie,Ne,Oe,Re,Ye,ct,Je,$e,Ve,rt,Nt,Pt,Rt,et,Yt="/",Dt,tt,At,Tt,Lt,st,zt,nt,Ut,lt,Bt,Mt,It=es.highlight(s[4],es.languages.svelte,"svelte")+"",qt,Vt,ot,Ht,Qt;function vs(I){s[7](I)}function _s(I){s[8](I)}function Es(I){s[9](I)}function Ms(I){s[10](I)}function ks(I){s[11](I)}let ht={expanded:!0};s[0].board.boardTheme!==void 0&&(ht.boardTheme=s[0].board.boardTheme),s[0].board.mouseEvents!==void 0&&(ht.mouseEvents=s[0].board.mouseEvents),s[0].board.notation!==void 0&&(ht.notation=s[0].board.notation),s[0].board.flipped!==void 0&&(ht.flipped=s[0].board.flipped),s[0].board.resizible!==void 0&&(ht.resizible=s[0].board.resizible),l=new Dr({props:ht}),$.push(()=>oe(l,"boardTheme",vs)),$.push(()=>oe(l,"mouseEvents",_s)),$.push(()=>oe(l,"notation",Es)),$.push(()=>oe(l,"flipped",Ms)),$.push(()=>oe(l,"resizible",ks));function ws(I){s[12](I)}function m(I){s[13](I)}let O={expanded:!0};s[0].movable.enabled!==void 0&&(O.enabled=s[0].movable.enabled),s[0].movable.color!==void 0&&(O.color=s[0].movable.color),C=new Vr({props:O}),$.push(()=>oe(C,"enabled",ws)),$.push(()=>oe(C,"color",m));function ie(I){s[14](I)}function ue(I){s[15](I)}function fe(I){s[16](I)}function we(I){s[17](I)}function Me(I){s[18](I)}function Qe(I){s[19](I)}let He={};s[0].draggable.enabled!==void 0&&(He.enabled=s[0].draggable.enabled),s[0].draggable.ghostPiece.enabled!==void 0&&(He.ghostPiece=s[0].draggable.ghostPiece.enabled),s[0].draggable.transition.enabled!==void 0&&(He.transition=s[0].draggable.transition.enabled),s[0].draggable.transition.settings.duration!==void 0&&(He.duration=s[0].draggable.transition.settings.duration),s[0].draggable.transition.settings.easing!==void 0&&(He.easing=s[0].draggable.transition.settings.easing),s[0].draggable.transition.settings.clickMoveAnimation!==void 0&&(He.clickMoveAnimation=s[0].draggable.transition.settings.clickMoveAnimation),_=new Xr({props:He}),$.push(()=>oe(_,"enabled",ie)),$.push(()=>oe(_,"ghostPiece",ue)),$.push(()=>oe(_,"transition",fe)),$.push(()=>oe(_,"duration",we)),$.push(()=>oe(_,"easing",Me)),$.push(()=>oe(_,"clickMoveAnimation",Qe));function Ss(I){s[20](I)}let Hs={name:"Selectable",showExpand:!1};s[0].selectable.enabled!==void 0&&(Hs.enabled=s[0].selectable.enabled),k=new Et({props:Hs}),$.push(()=>oe(k,"enabled",Ss));function si(I){s[21](I)}function ni(I){s[22](I)}function ii(I){s[23](I)}let xt={};s[0].legal.settings.allowCastling!==void 0&&(xt.allowCastling=s[0].legal.settings.allowCastling),s[0].legal.settings.allowEnPassant!==void 0&&(xt.allowEnPassant=s[0].legal.settings.allowEnPassant),s[0].legal.enabled!==void 0&&(xt.enabled=s[0].legal.enabled),K=new gl({props:xt}),$.push(()=>oe(K,"allowCastling",si)),$.push(()=>oe(K,"allowEnPassant",ni)),$.push(()=>oe(K,"enabled",ii)),K.$on("changed",s[24]);function ai(I){s[25](I)}function ri(I){s[26](I)}let Cs={};s[0].highlight.enabled!==void 0&&(Cs.enabled=s[0].highlight.enabled),s[0].highlight.settings!==void 0&&(Cs.settings=s[0].highlight.settings),D=new Zr({props:Cs}),$.push(()=>oe(D,"enabled",ai)),$.push(()=>oe(D,"settings",ri));function li(I){s[27](I)}function oi(I){s[28](I)}function ui(I){s[29](I)}let Zt={};s[0].drawTools.enabled!==void 0&&(Zt.enabled=s[0].drawTools.enabled),s[0].drawTools.settings.knightLShape!==void 0&&(Zt.knightLShape=s[0].drawTools.settings.knightLShape),s[0].drawTools.settings.onlyChessMove!==void 0&&(Zt.onlyChessMove=s[0].drawTools.settings.onlyChessMove),U=new tl({props:Zt}),$.push(()=>oe(U,"enabled",li)),$.push(()=>oe(U,"knightLShape",oi)),$.push(()=>oe(U,"onlyChessMove",ui));function di(I){s[30](I)}function ci(I){s[31](I)}let ys={};s[0].sounds.enabled!==void 0&&(ys.enabled=s[0].sounds.enabled),s[0].sounds.settings!==void 0&&(ys.settings=s[0].sounds.settings),he=new al({props:ys}),$.push(()=>oe(he,"enabled",di)),$.push(()=>oe(he,"settings",ci));let hi={config:s[6],class:"rounded-md"};return Re=new Pr({props:hi}),s[32](Re),st=new dl({props:{copyText:s[4]}}),{c(){e=N("link"),t=X(),n=N("div"),a=N("div"),r=N("div"),ge(l.$$.fragment),h=X(),ge(C.$$.fragment),p=X(),ge(_.$$.fragment),q=X(),ge(k.$$.fragment),H=X(),ge(K.$$.fragment),ne=X(),ge(D.$$.fragment),te=X(),ge(U.$$.fragment),ce=X(),ge(he.$$.fragment),Ie=X(),Ne=N("div"),Oe=N("div"),ge(Re.$$.fragment),Ye=X(),ct=N("div"),Je=N("div"),$e=N("div"),Ve=N("button"),rt=N("span"),Nt=We("ts"),Rt=X(),et=N("span"),et.textContent=Yt,Dt=X(),tt=N("span"),At=We("js"),Lt=X(),ge(st.$$.fragment),zt=X(),nt=N("pre"),Ut=We("                        "),lt=N("code"),Bt=We(`
                            
                            `),Mt=new vi(!1),qt=We(`
                        `),Vt=We(`
					`),this.h()},l(I){const re=_i("svelte-tebjht",document.head);e=R(re,"LINK",{rel:!0,href:!0}),re.forEach(S),t=Y(I),n=R(I,"DIV",{class:!0});var ut=V(n);a=R(ut,"DIV",{class:!0});var ft=V(a);r=R(ft,"DIV",{class:!0});var _e=V(r);be(l.$$.fragment,_e),h=Y(_e),be(C.$$.fragment,_e),p=Y(_e),be(_.$$.fragment,_e),q=Y(_e),be(k.$$.fragment,_e),H=Y(_e),be(K.$$.fragment,_e),ne=Y(_e),be(D.$$.fragment,_e),te=Y(_e),be(U.$$.fragment,_e),ce=Y(_e),be(he.$$.fragment,_e),_e.forEach(S),Ie=Y(ft),Ne=R(ft,"DIV",{class:!0});var kt=V(Ne);Oe=R(kt,"DIV",{class:!0});var wt=V(Oe);be(Re.$$.fragment,wt),wt.forEach(S),Ye=Y(kt),ct=R(kt,"DIV",{class:!0});var Ot=V(ct);Je=R(Ot,"DIV",{class:!0});var dt=V(Je);$e=R(dt,"DIV",{class:!0});var gt=V($e);Ve=R(gt,"BUTTON",{class:!0});var bt=V(Ve);rt=R(bt,"SPAN",{class:!0});var jt=V(rt);Nt=Ge(jt,"ts"),jt.forEach(S),Rt=Y(bt),et=R(bt,"SPAN",{class:!0,"data-svelte-h":!0}),ke(et)!=="svelte-eqi2a4"&&(et.textContent=Yt),Dt=Y(bt),tt=R(bt,"SPAN",{class:!0});var js=V(tt);At=Ge(js,"js"),js.forEach(S),bt.forEach(S),Lt=Y(gt),be(st.$$.fragment,gt),gt.forEach(S),zt=Y(dt),nt=R(dt,"PRE",{class:!0});var Jt=V(nt);Ut=Ge(Jt,"                        "),lt=R(Jt,"CODE",{});var $t=V(lt);Bt=Ge($t,`
                            
                            `),Mt=Ei($t,!1),qt=Ge($t,`
                        `),$t.forEach(S),Vt=Ge(Jt,`
					`),Jt.forEach(S),dt.forEach(S),Ot.forEach(S),kt.forEach(S),ft.forEach(S),ut.forEach(S),this.h()},h(){document.title="Chessboard • PowChess.com",b(e,"rel","stylesheet"),b(e,"href","prism-one-dark.css"),b(r,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),b(Oe,"class","w-full lg:w-[calc(70vh*(var(--boardScale,70)/100*0.7+0.3))]"),b(rt,"class",Pt=s[1]?"text-yellow-600":""),b(et,"class","text-gray-600"),b(tt,"class",Tt=s[1]?"":"text-yellow-600"),b(Ve,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),b($e,"class","absolute right-2 top-2 flex gap-4"),Mt.a=qt,b(nt,"class","bg-gray-800 rounded pr-6 overflow-auto"),b(Je,"class","shadow-lg rounded"),b(ct,"class","row-start-2 relative"),b(Ne,"class","grid grid-rows-[90wh_auto] gap-10"),b(a,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),b(n,"class","my-10 grid grid-cols-center")},m(I,re){y(document.head,e),G(I,t,re),G(I,n,re),y(n,a),y(a,r),pe(l,r,null),y(r,h),pe(C,r,null),y(r,p),pe(_,r,null),y(r,q),pe(k,r,null),y(r,H),pe(K,r,null),y(r,ne),pe(D,r,null),y(r,te),pe(U,r,null),y(r,ce),pe(he,r,null),y(a,Ie),y(a,Ne),y(Ne,Oe),pe(Re,Oe,null),y(Ne,Ye),y(Ne,ct),y(ct,Je),y(Je,$e),y($e,Ve),y(Ve,rt),y(rt,Nt),y(Ve,Rt),y(Ve,et),y(Ve,Dt),y(Ve,tt),y(tt,At),y($e,Lt),pe(st,$e,null),y(Je,zt),y(Je,nt),y(nt,Ut),y(nt,lt),y(lt,Bt),Mt.m(It,lt),y(lt,qt),y(nt,Vt),ot=!0,Ht||(Qt=ae(Ve,"click",s[33]),Ht=!0)},p(I,re){const ut={};!i&&re[0]&1&&(i=!0,ut.boardTheme=I[0].board.boardTheme,le(()=>i=!1)),!o&&re[0]&1&&(o=!0,ut.mouseEvents=I[0].board.mouseEvents,le(()=>o=!1)),!u&&re[0]&1&&(u=!0,ut.notation=I[0].board.notation,le(()=>u=!1)),!d&&re[0]&1&&(d=!0,ut.flipped=I[0].board.flipped,le(()=>d=!1)),!c&&re[0]&1&&(c=!0,ut.resizible=I[0].board.resizible,le(()=>c=!1)),l.$set(ut);const ft={};!v&&re[0]&1&&(v=!0,ft.enabled=I[0].movable.enabled,le(()=>v=!1)),!E&&re[0]&1&&(E=!0,ft.color=I[0].movable.color,le(()=>E=!1)),C.$set(ft);const _e={};!f&&re[0]&1&&(f=!0,_e.enabled=I[0].draggable.enabled,le(()=>f=!1)),!g&&re[0]&1&&(g=!0,_e.ghostPiece=I[0].draggable.ghostPiece.enabled,le(()=>g=!1)),!M&&re[0]&1&&(M=!0,_e.transition=I[0].draggable.transition.enabled,le(()=>M=!1)),!P&&re[0]&1&&(P=!0,_e.duration=I[0].draggable.transition.settings.duration,le(()=>P=!1)),!T&&re[0]&1&&(T=!0,_e.easing=I[0].draggable.transition.settings.easing,le(()=>T=!1)),!F&&re[0]&1&&(F=!0,_e.clickMoveAnimation=I[0].draggable.transition.settings.clickMoveAnimation,le(()=>F=!1)),_.$set(_e);const kt={};!B&&re[0]&1&&(B=!0,kt.enabled=I[0].selectable.enabled,le(()=>B=!1)),k.$set(kt);const wt={};!ee&&re[0]&1&&(ee=!0,wt.allowCastling=I[0].legal.settings.allowCastling,le(()=>ee=!1)),!Z&&re[0]&1&&(Z=!0,wt.allowEnPassant=I[0].legal.settings.allowEnPassant,le(()=>Z=!1)),!de&&re[0]&1&&(de=!0,wt.enabled=I[0].legal.enabled,le(()=>de=!1)),K.$set(wt);const Ot={};!z&&re[0]&1&&(z=!0,Ot.enabled=I[0].highlight.enabled,le(()=>z=!1)),!x&&re[0]&1&&(x=!0,Ot.settings=I[0].highlight.settings,le(()=>x=!1)),D.$set(Ot);const dt={};!L&&re[0]&1&&(L=!0,dt.enabled=I[0].drawTools.enabled,le(()=>L=!1)),!W&&re[0]&1&&(W=!0,dt.knightLShape=I[0].drawTools.settings.knightLShape,le(()=>W=!1)),!w&&re[0]&1&&(w=!0,dt.onlyChessMove=I[0].drawTools.settings.onlyChessMove,le(()=>w=!1)),U.$set(dt);const gt={};!ve&&re[0]&1&&(ve=!0,gt.enabled=I[0].sounds.enabled,le(()=>ve=!1)),!qe&&re[0]&1&&(qe=!0,gt.settings=I[0].sounds.settings,le(()=>qe=!1)),he.$set(gt);const bt={};Re.$set(bt),(!ot||re[0]&2&&Pt!==(Pt=I[1]?"text-yellow-600":""))&&b(rt,"class",Pt),(!ot||re[0]&2&&Tt!==(Tt=I[1]?"":"text-yellow-600"))&&b(tt,"class",Tt);const jt={};re[0]&16&&(jt.copyText=I[4]),st.$set(jt),(!ot||re[0]&16)&&It!==(It=es.highlight(I[4],es.languages.svelte,"svelte")+"")&&Mt.p(It)},i(I){ot||(j(l.$$.fragment,I),j(C.$$.fragment,I),j(_.$$.fragment,I),j(k.$$.fragment,I),j(K.$$.fragment,I),j(D.$$.fragment,I),j(U.$$.fragment,I),j(he.$$.fragment,I),j(Re.$$.fragment,I),j(st.$$.fragment,I),ot=!0)},o(I){Q(l.$$.fragment,I),Q(C.$$.fragment,I),Q(_.$$.fragment,I),Q(k.$$.fragment,I),Q(K.$$.fragment,I),Q(D.$$.fragment,I),Q(U.$$.fragment,I),Q(he.$$.fragment,I),Q(Re.$$.fragment,I),Q(st.$$.fragment,I),ot=!1},d(I){I&&(S(t),S(n)),S(e),me(l),me(C),me(_),me(k),me(K),me(D),me(U),me(he),s[32](null),me(Re),me(st),Ht=!1,Qt()}}}function pl(s,e,t){const n=new Vi,a={movable:"BOTH",legal:!0,callbacks:{afterMove:w=>n.move({from:w.substring(0,2),to:w.substring(2,4),...w.length>4&&{promotion:w[4]}}),getLegalMoves:()=>n.moves({verbose:!0}).map(w=>w.from+w.to+(w.promotion??"")),getWhiteToMove:()=>n.turn()==="w",getInCheck:()=>n.inCheck(),getLastMove:()=>{const w=n.history({verbose:!0}).pop();return w?w.from+w.to+(w.promotion??""):""}},board:{resizible:!0}},r=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,l=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let i,o=new Zn(a),u=!1,d=!0,c="";ms(()=>{var w;t(3,u=!0),t(0,o=(w=i.getState)==null?void 0:w.call(i))});const h=(w,ce)=>{var Oe;const he=w.getConfig();u&&((Oe=i.setState)==null||Oe.call(i,w));let ve=JSON.stringify(he,(Re,Ye)=>Re==="callbacks"?"{functions}":Ye,4);ve=ve.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
		`).replace('"{functions}"',ce?r:l);const qe=`
	import { Color } from '@powchess/chessboard/enums';`;function Ie(){return ve.includes("movable: 'WHITE'")||ve.includes("movable: 'BLACK'")||ve.includes("movable: 'BOTH'")}return`
    <script${ce?' lang="ts"':""}> 
        import Chessboard${ce?", { type ChessboardConfig }":""} from '@powchess/chessboard';${Ie()&&ce?qe:""}${o.legal.enabled?ce?`
		import { Chess, type Move } from 'chess.js';`:`
		import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

		const chess = new Chess();`:""}

        const config${ce?": ChessboardConfig":""} = ${ve};
    <\/script>

    <Chessboard {config} className="rounded-md" />`};function C(w){s.$$.not_equal(o.board.boardTheme,w)&&(o.board.boardTheme=w,t(0,o))}function v(w){s.$$.not_equal(o.board.mouseEvents,w)&&(o.board.mouseEvents=w,t(0,o))}function E(w){s.$$.not_equal(o.board.notation,w)&&(o.board.notation=w,t(0,o))}function p(w){s.$$.not_equal(o.board.flipped,w)&&(o.board.flipped=w,t(0,o))}function _(w){s.$$.not_equal(o.board.resizible,w)&&(o.board.resizible=w,t(0,o))}function f(w){s.$$.not_equal(o.movable.enabled,w)&&(o.movable.enabled=w,t(0,o))}function g(w){s.$$.not_equal(o.movable.color,w)&&(o.movable.color=w,t(0,o))}function M(w){s.$$.not_equal(o.draggable.enabled,w)&&(o.draggable.enabled=w,t(0,o))}function P(w){s.$$.not_equal(o.draggable.ghostPiece.enabled,w)&&(o.draggable.ghostPiece.enabled=w,t(0,o))}function T(w){s.$$.not_equal(o.draggable.transition.enabled,w)&&(o.draggable.transition.enabled=w,t(0,o))}function F(w){s.$$.not_equal(o.draggable.transition.settings.duration,w)&&(o.draggable.transition.settings.duration=w,t(0,o))}function q(w){s.$$.not_equal(o.draggable.transition.settings.easing,w)&&(o.draggable.transition.settings.easing=w,t(0,o))}function k(w){s.$$.not_equal(o.draggable.transition.settings.clickMoveAnimation,w)&&(o.draggable.transition.settings.clickMoveAnimation=w,t(0,o))}function B(w){s.$$.not_equal(o.selectable.enabled,w)&&(o.selectable.enabled=w,t(0,o))}function H(w){s.$$.not_equal(o.legal.settings.allowCastling,w)&&(o.legal.settings.allowCastling=w,t(0,o))}function K(w){s.$$.not_equal(o.legal.settings.allowEnPassant,w)&&(o.legal.settings.allowEnPassant=w,t(0,o))}function ee(w){s.$$.not_equal(o.legal.enabled,w)&&(o.legal.enabled=w,t(0,o))}const Z=()=>{var w;o.legal.enabled||(n.reset(),u&&((w=i.setPieces)==null||w.call(i,o.board.startFen,{deselectPiece:!0,sound:!1})))};function de(w){s.$$.not_equal(o.highlight.enabled,w)&&(o.highlight.enabled=w,t(0,o))}function ne(w){s.$$.not_equal(o.highlight.settings,w)&&(o.highlight.settings=w,t(0,o))}function D(w){s.$$.not_equal(o.drawTools.enabled,w)&&(o.drawTools.enabled=w,t(0,o))}function z(w){s.$$.not_equal(o.drawTools.settings.knightLShape,w)&&(o.drawTools.settings.knightLShape=w,t(0,o))}function x(w){s.$$.not_equal(o.drawTools.settings.onlyChessMove,w)&&(o.drawTools.settings.onlyChessMove=w,t(0,o))}function te(w){s.$$.not_equal(o.sounds.enabled,w)&&(o.sounds.enabled=w,t(0,o))}function U(w){s.$$.not_equal(o.sounds.settings,w)&&(o.sounds.settings=w,t(0,o))}function L(w){$[w?"unshift":"push"](()=>{i=w,t(2,i)})}const W=()=>{t(1,d=!d)};return s.$$.update=()=>{s.$$.dirty[0]&3&&t(4,c=h(o,d))},[o,d,i,u,c,n,a,C,v,E,p,_,f,g,M,P,T,F,q,k,B,H,K,ee,Z,de,ne,D,z,x,te,U,L,W]}class kl extends ye{constructor(e){super(),Pe(this,e,pl,bl,Ce,{},null,[-1,-1])}}export{kl as component};
