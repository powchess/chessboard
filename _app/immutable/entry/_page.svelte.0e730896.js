var ti=Object.defineProperty;var si=(s,e,t)=>e in s?ti(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var I=(s,e,t)=>(si(s,typeof e!="symbol"?e+"":e,t),t);import{S as Te,i as Le,s as Oe,C as Rn,k as F,a as W,l as N,m as R,h as S,c as j,p as ze,n as p,b as z,G as P,D as Dn,E as Bn,F as Un,g as V,d as Y,J as Gt,K as qs,w as J,L as ni,e as Pe,M as ii,q as ve,r as _e,u as xt,N as kt,O as ai,H as ke,P as bt,Q as zn,R as ri,T as li,U as Fs,V as As,W as ee,X as Ts,Y as at,Z as Dt,I as oi,o as $t,_ as We,$ as Fe,a0 as Ne,a1 as Ns,v as Be,f as Ue,a2 as ui,a3 as fi,a4 as le,y as ge,z as be,A as pe,a5 as oe,B as me,a6 as es,a7 as Xt,a8 as Vn,a9 as Rs,aa as ci,ab as Hn,t as di,ac as Kn,ad as Yt,ae as yt,af as Ls,ag as Wn,ah as Ds,ai as hi}from"../chunks/index.d9835f42.js";import{w as gi}from"../chunks/index.106ea73c.js";typeof window<"u"&&(window.Prism&&console.warn("Prism has already been initiated. Please ensure that svelte-prism is imported first."),window.Prism=window.Prism||{},window.Prism.manual=!0);var Bs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ks={},bi={get exports(){return ks},set exports(s){ks=s}};(function(s){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(i){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,n={},l={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function g(h){return h instanceof o?new o(h.type,g(h.content),h.alias):Array.isArray(h)?h.map(g):h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(g){return Object.prototype.toString.call(g).slice(8,-1)},objId:function(g){return g.__id||Object.defineProperty(g,"__id",{value:++r}),g.__id},clone:function g(h,M){M=M||{};var C,y;switch(l.util.type(h)){case"Object":if(y=l.util.objId(h),M[y])return M[y];C={},M[y]=C;for(var q in h)h.hasOwnProperty(q)&&(C[q]=g(h[q],M));return C;case"Array":return y=l.util.objId(h),M[y]?M[y]:(C=[],M[y]=C,h.forEach(function(D,A){C[A]=g(D,M)}),C);default:return h}},getLanguage:function(g){for(;g;){var h=a.exec(g.className);if(h)return h[1].toLowerCase();g=g.parentElement}return"none"},setLanguage:function(g,h){g.className=g.className.replace(RegExp(a,"gi"),""),g.classList.add("language-"+h)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(C){var g=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(g){var h=document.getElementsByTagName("script");for(var M in h)if(h[M].src==g)return h[M]}return null}},isActive:function(g,h,M){for(var C="no-"+h;g;){var y=g.classList;if(y.contains(h))return!0;if(y.contains(C))return!1;g=g.parentElement}return!!M}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(g,h){var M=l.util.clone(l.languages[g]);for(var C in h)M[C]=h[C];return M},insertBefore:function(g,h,M,C){C=C||l.languages;var y=C[g],q={};for(var D in y)if(y.hasOwnProperty(D)){if(D==h)for(var A in M)M.hasOwnProperty(A)&&(q[A]=M[A]);M.hasOwnProperty(D)||(q[D]=y[D])}var O=C[g];return C[g]=q,l.languages.DFS(l.languages,function(U,X){X===O&&U!=g&&(this[U]=q)}),q},DFS:function g(h,M,C,y){y=y||{};var q=l.util.objId;for(var D in h)if(h.hasOwnProperty(D)){M.call(h,D,h[D],C||D);var A=h[D],O=l.util.type(A);O==="Object"&&!y[q(A)]?(y[q(A)]=!0,g(A,M,null,y)):O==="Array"&&!y[q(A)]&&(y[q(A)]=!0,g(A,M,D,y))}}},plugins:{},highlightAll:function(g,h){l.highlightAllUnder(document,g,h)},highlightAllUnder:function(g,h,M){var C={callback:M,container:g,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),l.hooks.run("before-all-elements-highlight",C);for(var y=0,q;q=C.elements[y++];)l.highlightElement(q,h===!0,C.callback)},highlightElement:function(g,h,M){var C=l.util.getLanguage(g),y=l.languages[C];l.util.setLanguage(g,C);var q=g.parentElement;q&&q.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(q,C);var D=g.textContent,A={element:g,language:C,grammar:y,code:D};function O(X){A.highlightedCode=X,l.hooks.run("before-insert",A),A.element.innerHTML=A.highlightedCode,l.hooks.run("after-highlight",A),l.hooks.run("complete",A),M&&M.call(A.element)}if(l.hooks.run("before-sanity-check",A),q=A.element.parentElement,q&&q.nodeName.toLowerCase()==="pre"&&!q.hasAttribute("tabindex")&&q.setAttribute("tabindex","0"),!A.code){l.hooks.run("complete",A),M&&M.call(A.element);return}if(l.hooks.run("before-highlight",A),!A.grammar){O(l.util.encode(A.code));return}if(h&&i.Worker){var U=new Worker(l.filename);U.onmessage=function(X){O(X.data)},U.postMessage(JSON.stringify({language:A.language,code:A.code,immediateClose:!0}))}else O(l.highlight(A.code,A.grammar,A.language))},highlight:function(g,h,M){var C={code:g,grammar:h,language:M};if(l.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=l.tokenize(C.code,C.grammar),l.hooks.run("after-tokenize",C),o.stringify(l.util.encode(C.tokens),C.language)},tokenize:function(g,h){var M=h.rest;if(M){for(var C in M)h[C]=M[C];delete h.rest}var y=new d;return f(y,y.head,g),c(g,y,h,y.head,0),v(y)},hooks:{all:{},add:function(g,h){var M=l.hooks.all;M[g]=M[g]||[],M[g].push(h)},run:function(g,h){var M=l.hooks.all[g];if(!(!M||!M.length))for(var C=0,y;y=M[C++];)y(h)}},Token:o};i.Prism=l;function o(g,h,M,C){this.type=g,this.content=h,this.alias=M,this.length=(C||"").length|0}o.stringify=function g(h,M){if(typeof h=="string")return h;if(Array.isArray(h)){var C="";return h.forEach(function(O){C+=g(O,M)}),C}var y={type:h.type,content:g(h.content,M),tag:"span",classes:["token",h.type],attributes:{},language:M},q=h.alias;q&&(Array.isArray(q)?Array.prototype.push.apply(y.classes,q):y.classes.push(q)),l.hooks.run("wrap",y);var D="";for(var A in y.attributes)D+=" "+A+'="'+(y.attributes[A]||"").replace(/"/g,"&quot;")+'"';return"<"+y.tag+' class="'+y.classes.join(" ")+'"'+D+">"+y.content+"</"+y.tag+">"};function u(g,h,M,C){g.lastIndex=h;var y=g.exec(M);if(y&&C&&y[1]){var q=y[1].length;y.index+=q,y[0]=y[0].slice(q)}return y}function c(g,h,M,C,y,q){for(var D in M)if(!(!M.hasOwnProperty(D)||!M[D])){var A=M[D];A=Array.isArray(A)?A:[A];for(var O=0;O<A.length;++O){if(q&&q.cause==D+","+O)return;var U=A[O],X=U.inside,fe=!!U.lookbehind,Ae=!!U.greedy,Se=U.alias;if(Ae&&!U.pattern.global){var ie=U.pattern.toString().match(/[imsuy]*$/)[0];U.pattern=RegExp(U.pattern.source,ie+"g")}for(var x=U.pattern||U,B=C.next,Q=y;B!==h.tail&&!(q&&Q>=q.reach);Q+=B.value.length,B=B.next){var G=B.value;if(h.length>g.length)return;if(!(G instanceof o)){var ce=1,ae;if(Ae){if(ae=u(x,Q,g,fe),!ae||ae.index>=g.length)break;var Ee=ae.index,b=ae.index+ae[0].length,K=Q;for(K+=B.value.length;Ee>=K;)B=B.next,K+=B.value.length;if(K-=B.value.length,Q=K,B.value instanceof o)continue;for(var te=B;te!==h.tail&&(K<b||typeof te.value=="string");te=te.next)ce++,K+=te.value.length;ce--,G=g.slice(Q,K),ae.index-=Q}else if(ae=u(x,0,G,fe),!ae)continue;var Ee=ae.index,de=ae[0],Ie=G.slice(0,Ee),Me=G.slice(Ee+de.length),he=Q+G.length;q&&he>q.reach&&(q.reach=he);var ye=B.prev;Ie&&(ye=f(h,ye,Ie),Q+=Ie.length),w(h,ye,ce);var xe=new o(D,X?l.tokenize(de,X):de,Se,de);if(B=f(h,ye,xe),Me&&f(h,B,Me),ce>1){var Re={cause:D+","+O,reach:he};c(g,h,M,B.prev,Q,Re),q&&Re.reach>q.reach&&(q.reach=Re.reach)}}}}}}function d(){var g={value:null,prev:null,next:null},h={value:null,prev:g,next:null};g.next=h,this.head=g,this.tail=h,this.length=0}function f(g,h,M){var C=h.next,y={value:M,prev:h,next:C};return h.next=y,C.prev=y,g.length++,y}function w(g,h,M){for(var C=h.next,y=0;y<M&&C!==g.tail;y++)C=C.next;h.next=C,C.prev=h,g.length-=y}function v(g){for(var h=[],M=g.head.next;M!==g.tail;)h.push(M.value),M=M.next;return h}if(!i.document)return i.addEventListener&&(l.disableWorkerMessageHandler||i.addEventListener("message",function(g){var h=JSON.parse(g.data),M=h.language,C=h.code,y=h.immediateClose;i.postMessage(l.highlight(C,l.languages[M],M)),y&&i.close()},!1)),l;var E=l.util.currentScript();E&&(l.filename=E.src,E.hasAttribute("data-manual")&&(l.manual=!0));function _(){l.manual||l.highlightAll()}if(!l.manual){var k=document.readyState;k==="loading"||k==="interactive"&&E&&E.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return l}(e);s.exports&&(s.exports=t),typeof Bs<"u"&&(Bs.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(a,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};l["language-"+r]={pattern:/[\s\S]+/,inside:t.languages[r]};var o={};o[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:l},t.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(i,a){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:t.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(i){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var r=i.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading…",a=function(E,_){return"✖ Error "+E+" while fetching file: "+_},r="✖ Error: File does not exist or is empty",n={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",o="loading",u="loaded",c="failed",d="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+o+'"])';function f(E,_,k){var g=new XMLHttpRequest;g.open("GET",E,!0),g.onreadystatechange=function(){g.readyState==4&&(g.status<400&&g.responseText?_(g.responseText):g.status>=400?k(a(g.status,g.statusText)):k(r))},g.send(null)}function w(E){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(E||"");if(_){var k=Number(_[1]),g=_[2],h=_[3];return g?h?[k,Number(h)]:[k,void 0]:[k,k]}}t.hooks.add("before-highlightall",function(E){E.selector+=", "+d}),t.hooks.add("before-sanity-check",function(E){var _=E.element;if(_.matches(d)){E.code="",_.setAttribute(l,o);var k=_.appendChild(document.createElement("CODE"));k.textContent=i;var g=_.getAttribute("data-src"),h=E.language;if(h==="none"){var M=(/\.(\w+)$/.exec(g)||[,"none"])[1];h=n[M]||M}t.util.setLanguage(k,h),t.util.setLanguage(_,h);var C=t.plugins.autoloader;C&&C.loadLanguages(h),f(g,function(y){_.setAttribute(l,u);var q=w(_.getAttribute("data-range"));if(q){var D=y.split(/\r\n?|\n/g),A=q[0],O=q[1]==null?D.length:q[1];A<0&&(A+=D.length),A=Math.max(0,Math.min(A-1,D.length)),O<0&&(O+=D.length),O=Math.max(0,Math.min(O,D.length)),y=D.slice(A,O).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(A+1))}k.textContent=y,t.highlightElement(k)},function(y){_.setAttribute(l,c),k.textContent=y})}}),t.plugins.fileHighlight={highlight:function(_){for(var k=(_||document).querySelectorAll(d),g=0,h;h=k[g++];)t.highlightElement(h)}};var v=!1;t.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(bi);const jn=ks,Us="(if|else if|await|then|catch|each|html|debug)";Prism.languages.svelte=Prism.languages.extend("markup",{each:{pattern:new RegExp("{[#/]each(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{"language-javascript":[{pattern:/(as[\s\S]*)\([\s\S]*\)(?=\s*\})/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(as[\s]*)[\s\S]*(?=\s*)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(#each[\s]*)[\s\S]*(?=as)/,lookbehind:!0,inside:Prism.languages.javascript}],keyword:/[#/]each|as/,punctuation:/{|}/}},block:{pattern:new RegExp("{[#:/@]/s"+Us+"(?:(?:\\{(?:(?:\\{(?:[^{}])*\\})|(?:[^{}]))*\\})|(?:[^{}]))*}"),inside:{punctuation:/^{|}$/,keyword:[new RegExp("[#:/@]"+Us+"( )*"),/as/,/then/],"language-javascript":{pattern:/[\s\S]*/,inside:Prism.languages.javascript}}},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?:"[^"]*"|'[^']*'|{[\s\S]+?}(?=[\s/>])))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,inside:Prism.languages.javascript},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],"language-javascript":{pattern:/{[\s\S]+}/,inside:Prism.languages.javascript}}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},"language-javascript":{pattern:/\{(?:(?:\{(?:(?:\{(?:[^{}])*\})|(?:[^{}]))*\})|(?:[^{}]))*\}/,lookbehind:!0,inside:Prism.languages.javascript}});Prism.languages.svelte.tag.inside["attr-value"].inside.entity=Prism.languages.svelte.entity;Prism.hooks.add("wrap",s=>{s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.svelte.tag,"addInlined",{value:function(e,t){const i={};i["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;const a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};a["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};const r={};r[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:a},Prism.languages.insertBefore("svelte","cdata",r)}});Prism.languages.svelte.tag.addInlined("style","css");Prism.languages.svelte.tag.addInlined("script","javascript");function pi(s){let e,t;return{c(){e=new ni(!1),t=Pe(),this.h()},l(i){e=ii(i,!1),t=Pe(),this.h()},h(){e.a=t},m(i,a){e.m(s[2],i,a),z(i,t,a)},p(i,a){a&4&&e.p(i[2])},d(i){i&&S(t),i&&e.d()}}}function mi(s){let e;return{c(){e=ve(s[2])},l(t){e=_e(t,s[2])},m(t,i){z(t,e,i)},p(t,i){i&4&&xt(e,t[2])},d(t){t&&S(e)}}}function vi(s){let e,t,i,a,r,n,l;const o=s[6].default,u=Rn(o,s,s[5],null);function c(w,v){return w[0]==="none"?mi:pi}let d=c(s),f=d(s);return{c(){e=F("code"),u&&u.c(),t=W(),i=F("pre"),a=F("code"),f.c(),this.h()},l(w){e=N(w,"CODE",{style:!0});var v=R(e);u&&u.l(v),v.forEach(S),t=j(w),i=N(w,"PRE",{class:!0,"command-line":!0,"data-output":!0});var E=R(i);a=N(E,"CODE",{class:!0});var _=R(a);f.l(_),_.forEach(S),E.forEach(S),this.h()},h(){ze(e,"display","none"),p(a,"class",r="language-"+s[0]),p(i,"class",n="language-"+s[0]),p(i,"command-line",""),p(i,"data-output","2-17")},m(w,v){z(w,e,v),u&&u.m(e,null),s[7](e),z(w,t,v),z(w,i,v),P(i,a),f.m(a,null),l=!0},p(w,[v]){u&&u.p&&(!l||v&32)&&Dn(u,o,w,w[5],l?Un(o,w[5],v,null):Bn(w[5]),null),d===(d=c(w))&&f?f.p(w,v):(f.d(1),f=d(w),f&&(f.c(),f.m(a,null))),(!l||v&1&&r!==(r="language-"+w[0]))&&p(a,"class",r),(!l||v&1&&n!==(n="language-"+w[0]))&&p(i,"class",n)},i(w){l||(V(u,w),l=!0)},o(w){Y(u,w),l=!1},d(w){w&&S(e),u&&u.d(w),s[7](null),w&&S(t),w&&S(i),f.d()}}}const zs=jn;jn.highlightElement;const _i={transform:s=>s};function Ei(s,e,t){let{$$slots:i={},$$scope:a}=e,{language:r="javascript"}=e,{source:n=""}=e,{transform:l=f=>f}=e,o,u;function c(){const f=zs.languages[r];let w=n||o.textContent;w=_i.transform(w),w=l(w),t(2,u=r==="none"?w:zs.highlight(w,f,r))}function d(f){J[f?"unshift":"push"](()=>{o=f,t(1,o)})}return s.$$set=f=>{t(9,e=Gt(Gt({},e),qs(f))),"language"in f&&t(0,r=f.language),"source"in f&&t(3,n=f.source),"transform"in f&&t(4,l=f.transform),"$$scope"in f&&t(5,a=f.$$scope)},s.$$.update=()=>{e&&(n||o)&&c()},e=qs(e),[r,o,u,n,l,a,i,d]}let ki=class extends Te{constructor(e){super(),Le(this,e,Ei,vi,Oe,{language:0,source:3,transform:4})}};/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Ye="w",nt="b",qe="p",Ms="n",Wt="b",Mi="r",wi="q",it="k",vs="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Je=-1,Si={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},$={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},ue={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},_s={b:[16,32,17,15],w:[-16,-32,-17,-15]},Vs={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Ci=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Pi=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],yi={p:1,n:2,b:4,r:8,q:16,k:32},Ai="pnbrqkPNBRQK",Hs=[Ms,Wt,Mi,wi],Ti=7,Li=6,Oi=1,Ii=0,ht={w:[{square:ue.a1,flag:$.QSIDE_CASTLE},{square:ue.h1,flag:$.KSIDE_CASTLE}],b:[{square:ue.a8,flag:$.QSIDE_CASTLE},{square:ue.h8,flag:$.KSIDE_CASTLE}]},qi={b:Oi,w:Li},Fi=["1-0","0-1","1/2-1/2","*"];function Et(s){return s>>4}function Rt(s){return s&15}function Gn(s){return"0123456789".indexOf(s)!==-1}function He(s){const e=Rt(s),t=Et(s);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function Vt(s){return s===Ye?nt:Ye}function Ni(s){const e=s.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const i=parseInt(e[4],10);if(isNaN(i)||i<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const a=e[0].split("/");if(a.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let n=0;n<a.length;n++){let l=0,o=!1;for(let u=0;u<a[n].length;u++)if(Gn(a[n][u])){if(o)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(a[n][u],10),o=!0}else{if(!/^[prnbqkPRNBQK]$/.test(a[n][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,o=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const r=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:n,regex:l}of r){if(!l.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${n} king`};if((e[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${n} kings`}}return{ok:!0}}function Ri(s,e){const t=s.from,i=s.to,a=s.piece;let r=0,n=0,l=0;for(let o=0,u=e.length;o<u;o++){const c=e[o].from,d=e[o].to,f=e[o].piece;a===f&&t!==c&&i===d&&(r++,Et(t)===Et(c)&&n++,Rt(t)===Rt(c)&&l++)}return r>0?n>0&&l>0?He(t):l>0?He(t).charAt(1):He(t).charAt(0):""}function gt(s,e,t,i,a,r=void 0,n=$.NORMAL){const l=Et(i);if(a===qe&&(l===Ti||l===Ii))for(let o=0;o<Hs.length;o++){const u=Hs[o];s.push({color:e,from:t,to:i,piece:a,captured:r,promotion:u,flags:n|$.PROMOTION})}else s.push({color:e,from:t,to:i,piece:a,captured:r,flags:n})}function Ks(s){let e=s.charAt(0);return e>="a"&&e<="h"?s.match(/[a-h]\d.*[a-h]\d/)?void 0:qe:(e=e.toLowerCase(),e==="o"?it:e)}function Ws(s){return s.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Di{constructor(e=vs){this._board=new Array(128),this._turn=Ye,this._header={},this._kings={w:Je,b:Je},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(e)}clear(e=!1){this._board=new Array(128),this._kings={w:Je,b:Je},this._turn=Ye,this._castling={w:0,b:0},this._epSquare=Je,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._updateSetup(this.fen())}load(e,t=!1){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const o=["-","-","0","1"];e=i.concat(o.slice(-(6-i.length))).join(" ")}i=e.split(/\s+/);const{ok:a,error:r}=Ni(e);if(!a)throw new Error(r);const n=i[0];let l=0;this.clear(t);for(let o=0;o<n.length;o++){const u=n.charAt(o);if(u==="/")l+=8;else if(Gn(u))l+=parseInt(u,10);else{const c=u<"a"?Ye:nt;this.put({type:u.toLowerCase(),color:c},He(l)),l++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=$.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=$.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=$.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=$.QSIDE_CASTLE),this._epSquare=i[3]==="-"?Je:ue[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._updateSetup(this.fen())}fen(){var e,t;let i=0,a="";for(let l=ue.a8;l<=ue.h1;l++){if(this._board[l]){i>0&&(a+=i,i=0);const{color:o,type:u}=this._board[l];a+=o===Ye?u.toUpperCase():u.toLowerCase()}else i++;l+1&136&&(i>0&&(a+=i),l!==ue.h1&&(a+="/"),i=0,l+=8)}let r="";this._castling[Ye]&$.KSIDE_CASTLE&&(r+="K"),this._castling[Ye]&$.QSIDE_CASTLE&&(r+="Q"),this._castling[nt]&$.KSIDE_CASTLE&&(r+="k"),this._castling[nt]&$.QSIDE_CASTLE&&(r+="q"),r=r||"-";let n="-";if(this._epSquare!==Je){const l=this._epSquare+(this._turn===Ye?16:-16),o=[l+1,l-1];for(const u of o){if(u&136)continue;const c=this._turn;if(((e=this._board[u])===null||e===void 0?void 0:e.color)===c&&((t=this._board[u])===null||t===void 0?void 0:t.type)===qe){this._makeMove({color:c,from:u,to:this._epSquare,piece:qe,captured:qe,flags:$.EP_CAPTURE});const d=!this._isKingAttacked(c);if(this._undoMove(),d){n=He(this._epSquare);break}}}}return[a,this._turn,r,n,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==vs?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(vs)}get(e){return this._board[ue[e]]||!1}put({type:e,color:t},i){if(Ai.indexOf(e.toLowerCase())===-1||!(i in ue))return!1;const a=ue[i];return e==it&&!(this._kings[t]==Je||this._kings[t]==a)?!1:(this._board[a]={type:e,color:t},e===it&&(this._kings[t]=a),this._updateSetup(this.fen()),!0)}remove(e){const t=this.get(e);return delete this._board[ue[e]],t&&t.type===it&&(this._kings[t.color]=Je),this._updateSetup(this.fen()),t}_attacked(e,t){for(let i=ue.a8;i<=ue.h1;i++){if(i&136){i+=7;continue}if(this._board[i]===void 0||this._board[i].color!==e)continue;const a=this._board[i],r=i-t;if(r===0)continue;const n=r+119;if(Ci[n]&yi[a.type]){if(a.type===qe){if(r>0){if(a.color===Ye)return!0}else if(a.color===nt)return!0;continue}if(a.type==="n"||a.type==="k")return!0;const l=Pi[n];let o=i+l,u=!1;for(;o!==t;){if(this._board[o]!=null){u=!0;break}o+=l}if(!u)return!0}}return!1}_isKingAttacked(e){return this._attacked(Vt(e),this._kings[e])}isAttacked(e,t){return this._attacked(t,ue[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let i=0,a=0;for(let r=ue.a8;r<=ue.h1;r++){if(a=(a+1)%2,r&136){r+=7;continue}const n=this._board[r];n&&(e[n.type]=n.type in e?e[n.type]+1:1,n.type===Wt&&t.push(a),i++)}if(i===2)return!0;if(i===3&&(e[Wt]===1||e[Ms]===1))return!0;if(i===e[Wt]+2){let r=0;const n=t.length;for(let l=0;l<n;l++)r+=t[l];if(r===0||r===n)return!0}return!1}isThreefoldRepetition(){const e=[],t={};let i=!1;for(;;){const a=this._undoMove();if(!a)break;e.push(a)}for(;;){const a=this.fen().split(" ").slice(0,4).join(" ");t[a]=a in t?t[a]+1:1,t[a]>=3&&(i=!0);const r=e.pop();if(r)this._makeMove(r);else break}return i}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:i=void 0}={}){const a=this._moves({square:t,piece:i});return e?a.map(r=>this._makePretty(r)):a.map(r=>this._moveToSan(r,a))}_moves({legal:e=!0,piece:t=void 0,square:i=void 0}={}){var a;const r=i?i.toLowerCase():void 0,n=t==null?void 0:t.toLowerCase(),l=[],o=this._turn,u=Vt(o);let c=ue.a8,d=ue.h1,f=!1;if(r)if(r in ue)c=d=ue[r],f=!0;else return[];for(let v=c;v<=d;v++){if(v&136){v+=7;continue}if(!this._board[v]||this._board[v].color===u)continue;const{type:E}=this._board[v];let _;if(E===qe){if(n&&n!==E)continue;_=v+_s[o][0],this._board[_]||(gt(l,o,v,_,qe),_=v+_s[o][1],qi[o]===Et(v)&&!this._board[_]&&gt(l,o,v,_,qe,void 0,$.BIG_PAWN));for(let k=2;k<4;k++)_=v+_s[o][k],!(_&136)&&(((a=this._board[_])===null||a===void 0?void 0:a.color)===u?gt(l,o,v,_,qe,this._board[_].type,$.CAPTURE):_===this._epSquare&&gt(l,o,v,_,qe,qe,$.EP_CAPTURE))}else{if(n&&n!==E)continue;for(let k=0,g=Vs[E].length;k<g;k++){const h=Vs[E][k];for(_=v;_+=h,!(_&136);){if(!this._board[_])gt(l,o,v,_,E);else{if(this._board[_].color===o)break;gt(l,o,v,_,E,this._board[_].type,$.CAPTURE);break}if(E===Ms||E===it)break}}}}if((n===void 0||n===it)&&(!f||d===this._kings[o])){if(this._castling[o]&$.KSIDE_CASTLE){const v=this._kings[o],E=v+2;!this._board[v+1]&&!this._board[E]&&!this._attacked(u,this._kings[o])&&!this._attacked(u,v+1)&&!this._attacked(u,E)&&gt(l,o,this._kings[o],E,it,void 0,$.KSIDE_CASTLE)}if(this._castling[o]&$.QSIDE_CASTLE){const v=this._kings[o],E=v-2;!this._board[v-1]&&!this._board[v-2]&&!this._board[v-3]&&!this._attacked(u,this._kings[o])&&!this._attacked(u,v-1)&&!this._attacked(u,E)&&gt(l,o,this._kings[o],E,it,void 0,$.QSIDE_CASTLE)}}if(!e)return l;const w=[];for(let v=0,E=l.length;v<E;v++)this._makeMove(l[v]),this._isKingAttacked(o)||w.push(l[v]),this._undoMove();return w}move(e,{strict:t=!1}={}){let i=null;if(typeof e=="string")i=this._moveFromSan(e,t);else if(typeof e=="object"){const r=this._moves();for(let n=0,l=r.length;n<l;n++)if(e.from===He(r[n].from)&&e.to===He(r[n].to)&&(!("promotion"in r[n])||e.promotion===r[n].promotion)){i=r[n];break}}if(!i)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const a=this._makePretty(i);return this._makeMove(i),a}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const t=this._turn,i=Vt(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&$.EP_CAPTURE&&(this._turn===nt?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===it){if(this._kings[t]=e.to,e.flags&$.KSIDE_CASTLE){const a=e.to-1,r=e.to+1;this._board[a]=this._board[r],delete this._board[r]}else if(e.flags&$.QSIDE_CASTLE){const a=e.to+1,r=e.to-2;this._board[a]=this._board[r],delete this._board[r]}this._castling[t]=0}if(this._castling[t]){for(let a=0,r=ht[t].length;a<r;a++)if(e.from===ht[t][a].square&&this._castling[t]&ht[t][a].flag){this._castling[t]^=ht[t][a].flag;break}}if(this._castling[i]){for(let a=0,r=ht[i].length;a<r;a++)if(e.to===ht[i][a].square&&this._castling[i]&ht[i][a].flag){this._castling[i]^=ht[i][a].flag;break}}e.flags&$.BIG_PAWN?t===nt?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=Je,e.piece===qe?this._halfMoves=0:e.flags&($.CAPTURE|$.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===nt&&this._moveNumber++,this._turn=i}undo(){const e=this._undoMove();return e?this._makePretty(e):null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const i=this._turn,a=Vt(i);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)if(t.flags&$.EP_CAPTURE){let r;i===nt?r=t.to-16:r=t.to+16,this._board[r]={type:qe,color:a}}else this._board[t.to]={type:t.captured,color:a};if(t.flags&($.KSIDE_CASTLE|$.QSIDE_CASTLE)){let r,n;t.flags&$.KSIDE_CASTLE?(r=t.to+1,n=t.to-1):(r=t.to-2,n=t.to+1),this._board[r]=this._board[n],delete this._board[n]}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const i=[];let a=!1;for(const f in this._header)i.push("["+f+' "'+this._header[f]+'"]'+e),a=!0;a&&this._history.length&&i.push(e);const r=f=>{const w=this._comments[this.fen()];if(typeof w<"u"){const v=f.length>0?" ":"";f=`${f}${v}{${w}}`}return f},n=[];for(;this._history.length>0;)n.push(this._undoMove());const l=[];let o="";for(n.length===0&&l.push(r(""));n.length>0;){o=r(o);const f=n.pop();if(!f)break;if(!this._history.length&&f.color==="b"){const w=`${this._moveNumber}. ...`;o=o?`${o} ${w}`:w}else f.color==="w"&&(o.length&&l.push(o),o=this._moveNumber+".");o=o+" "+this._moveToSan(f,this._moves({legal:!0})),this._makeMove(f)}if(o.length&&l.push(r(o)),typeof this._header.Result<"u"&&l.push(this._header.Result),t===0)return i.join("")+l.join(" ");const u=function(){return i.length>0&&i[i.length-1]===" "?(i.pop(),!0):!1},c=function(f,w){for(const v of w.split(" "))if(v){if(f+v.length>t){for(;u();)f--;i.push(e),f=0}i.push(v),f+=v.length,i.push(" "),f++}return u()&&f--,f};let d=0;for(let f=0;f<l.length;f++){if(d+l[f].length>t&&l[f].includes("{")){d=c(d,l[f]);continue}d+l[f].length>t&&f!==0?(i[i.length-1]===" "&&i.pop(),i.push(e),d=0):f!==0&&(i.push(" "),d++),i.push(l[f]),d+=l[f].length}return i.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{strict:t=!1,newlineChar:i=`\r?
`}={}){function a(h){return h.replace(/\\/g,"\\")}function r(h){const M={},C=h.split(new RegExp(a(i)));let y="",q="";for(let D=0;D<C.length;D++){const A=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;y=C[D].replace(A,"$1"),q=C[D].replace(A,"$2"),y.trim().length>0&&(M[y]=q)}return M}e=e.trim();const l=new RegExp("^(\\[((?:"+a(i)+")|.)*\\])((?:\\s*"+a(i)+"){2}|(?:\\s*"+a(i)+")*$)").exec(e),o=l&&l.length>=2?l[1]:"";this.reset();const u=r(o);let c="";for(const h in u)h.toLowerCase()==="fen"&&(c=u[h]),this.header(h,u[h]);if(!t)c&&this.load(c,!0);else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,!0)}function d(h){return Array.from(h).map(function(M){return M.charCodeAt(0)<128?M.charCodeAt(0).toString(16):encodeURIComponent(M).replace(/%/g,"").toLowerCase()}).join("")}function f(h){return h.length==0?"":decodeURIComponent("%"+(h.match(/.{1,2}/g)||[]).join("%"))}const w=function(h){return h=h.replace(new RegExp(a(i),"g")," "),`{${d(h.slice(1,h.length-1))}}`},v=function(h){if(h.startsWith("{")&&h.endsWith("}"))return f(h.slice(1,h.length-1))};let E=e.replace(o,"").replace(new RegExp(`({[^}]*})+?|;([^${a(i)}]*)`,"g"),function(h,M,C){return M!==void 0?w(M):" "+w(`{${C.slice(1)}}`)}).replace(new RegExp(a(i),"g")," ");const _=/(\([^()]+\))+?/g;for(;_.test(E);)E=E.replace(_,"");E=E.replace(/\d+\.(\.\.)?/g,""),E=E.replace(/\.\.\./g,""),E=E.replace(/\$\d+/g,"");let k=E.trim().split(new RegExp(/\s+/));k=k.filter(h=>h!=="");let g="";for(let h=0;h<k.length;h++){const M=v(k[h]);if(M!==void 0){this._comments[this.fen()]=M;continue}const C=this._moveFromSan(k[h],t);if(C==null)if(Fi.indexOf(k[h])>-1)g=k[h];else throw new Error(`Invalid move in PGN: ${k[h]}`);else g="",this._makeMove(C)}g&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",g)}_moveToSan(e,t){let i="";if(e.flags&$.KSIDE_CASTLE)i="O-O";else if(e.flags&$.QSIDE_CASTLE)i="O-O-O";else{if(e.piece!==qe){const a=Ri(e,t);i+=e.piece.toUpperCase()+a}e.flags&($.CAPTURE|$.EP_CAPTURE)&&(e.piece===qe&&(i+=He(e.from)[0]),i+="x"),i+=He(e.to),e.promotion&&(i+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?i+="#":i+="+"),this._undoMove(),i}_moveFromSan(e,t=!1){const i=Ws(e);let a=Ks(i),r=this._moves({legal:!0,piece:a});for(let f=0,w=r.length;f<w;f++)if(i===Ws(this._moveToSan(r[f],r)))return r[f];if(t)return null;let n,l,o,u,c,d=!1;l=i.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(n=l[1],o=l[2],u=l[3],c=l[4],o.length==1&&(d=!0)):(l=i.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(n=l[1],o=l[2],u=l[3],c=l[4],o.length==1&&(d=!0))),a=Ks(i),r=this._moves({legal:!0,piece:n||a});for(let f=0,w=r.length;f<w;f++)if(o&&u){if((!n||n.toLowerCase()==r[f].piece)&&ue[o]==r[f].from&&ue[u]==r[f].to&&(!c||c.toLowerCase()==r[f].promotion))return r[f];if(d){const v=He(r[f].from);if((!n||n.toLowerCase()==r[f].piece)&&ue[u]==r[f].to&&(o==v[0]||o==v[1])&&(!c||c.toLowerCase()==r[f].promotion))return r[f]}}return null}ascii(){let e=`   +------------------------+
`;for(let t=ue.a8;t<=ue.h1;t++){if(Rt(t)===0&&(e+=" "+"87654321"[Et(t)]+" |"),this._board[t]){const i=this._board[t].type,r=this._board[t].color===Ye?i.toUpperCase():i.toLowerCase();e+=" "+r+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let i=0;const a=this._turn;for(let r=0,n=t.length;r<n;r++)this._makeMove(t[r]),this._isKingAttacked(a)||(e-1>0?i+=this.perft(e-1):i++),this._undoMove();return i}_makePretty(e){const{color:t,piece:i,from:a,to:r,flags:n,captured:l,promotion:o}=e;let u="";for(const w in $)$[w]&n&&(u+=Si[w]);const c=He(a),d=He(r),f={color:t,piece:i,from:c,to:d,san:this._moveToSan(e,this._moves({legal:!0})),flags:u,lan:c+d,before:this.fen(),after:""};return this._makeMove(e),f.after=this.fen(),this._undoMove(),l&&(f.captured=l),o&&(f.promotion=o,f.lan+=o),f}turn(){return this._turn}board(){const e=[];let t=[];for(let i=ue.a8;i<=ue.h1;i++)this._board[i]==null?t.push(null):t.push({square:He(i),type:this._board[i].type,color:this._board[i].color}),i+1&136&&(e.push(t),t=[],i+=8);return e}squareColor(e){if(e in ue){const t=ue[e];return(Et(t)+Rt(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],i=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const a=t.pop();if(!a)break;e?i.push(this._makePretty(a)):i.push(this._moveToSan(a,this._moves())),this._makeMove(a)}return i}_pruneComments(){const e=[],t={},i=a=>{a in this._comments&&(t[a]=this._comments[a])};for(;this._history.length>0;)e.push(this._undoMove());for(i(this.fen());;){const a=e.pop();if(!a)break;this._makeMove(a),i(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}}var se=(s=>(s[s.WHITE=0]="WHITE",s[s.BLACK=1]="BLACK",s[s.BOTH=2]="BOTH",s[s.SPECTATOR=3]="SPECTATOR",s[s.SERVER=4]="SERVER",s))(se||{}),H=(s=>(s[s.LEGAL=0]="LEGAL",s[s.LEGALHOVER=1]="LEGALHOVER",s[s.CHECK=2]="CHECK",s[s.MOVE=3]="MOVE",s[s.NEXTMOVE=4]="NEXTMOVE",s[s.PREMOVE=5]="PREMOVE",s[s.PREMOVEHOVER=6]="PREMOVEHOVER",s[s.SELECT=7]="SELECT",s))(H||{});const Ht=s=>{if(typeof s=="string")return s;switch(s){case 0:case 1:return"legal";case 2:return"check";case 3:return"move";case 4:return"nextMove";case 5:case 6:return"preMove";case 7:return"select";default:return"check"}};class Bi{constructor(e){I(this,"boardTheme");I(this,"piecesTheme");I(this,"mouseEvents");I(this,"flipped");I(this,"notation");I(this,"startFen");I(this,"size");I(this,"scale");I(this,"resizible");I(this,"defaultState",{boardTheme:"standard",piecesTheme:"standard",mouseEvents:!0,flipped:!1,notation:!0,shadow:!1,startFen:Xi,size:0,scale:70,resizible:!1});I(this,"setConfigSettings",e=>{e!==void 0&&(e.boardTheme!==void 0&&(this.boardTheme=e.boardTheme),e.piecesTheme!==void 0&&(this.piecesTheme=e.piecesTheme),e.mouseEvents!==void 0&&(this.mouseEvents=e.mouseEvents),e.flipped!==void 0&&(this.flipped=e.flipped),e.notation!==void 0&&(this.notation=e.notation),e.startFen!==void 0&&(this.startFen=e.startFen),e.resizible!==void 0&&(this.resizible=e.resizible))});I(this,"getConfig",()=>{const e={...this.boardTheme!==this.defaultState.boardTheme&&{boardTheme:this.boardTheme},...this.piecesTheme!==this.defaultState.piecesTheme&&{piecesTheme:this.piecesTheme},...this.mouseEvents!==this.defaultState.mouseEvents&&{mouseEvents:this.mouseEvents},...this.flipped!==this.defaultState.flipped&&{flipped:this.flipped},...this.notation!==this.defaultState.notation&&{notation:this.notation},...this.startFen!==this.defaultState.startFen&&{startFen:this.startFen},...this.resizible!==this.defaultState.resizible&&{resizible:this.resizible}};if(Object.keys(e).length!==0)return e});this.boardTheme=this.defaultState.boardTheme,this.piecesTheme=this.defaultState.piecesTheme,this.mouseEvents=this.defaultState.mouseEvents,this.flipped=this.defaultState.flipped,this.notation=this.defaultState.notation,this.startFen=this.defaultState.startFen,this.size=this.defaultState.size,this.scale=this.defaultState.scale,this.resizible=this.defaultState.resizible,this.setConfigSettings(e)}}class Ui{constructor(e){I(this,"enabled");I(this,"color");I(this,"defaultState",{enabled:!0,color:se.BOTH});I(this,"setConfigSettings",e=>{switch(e){case!0:this.enabled=!0,this.color=se.BOTH;break;case!1:this.enabled=!1;break;case se.WHITE:this.enabled=!0,this.color=se.WHITE;break;case se.BLACK:this.enabled=!0,this.color=se.BLACK;break}});I(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.color!==this.defaultState.color)return this.color;if(this.enabled&&!this.defaultState.enabled)return this.color;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.color=this.defaultState.color,this.setConfigSettings(e)}}class zi{constructor(e){I(this,"enabled");I(this,"ghostPiece");I(this,"transition");I(this,"defaultState",{enabled:!0,ghostPiece:{enabled:!0,piece:void 0},transition:{enabled:!0,settings:{duration:120,easing:"cubicInOut"}}});I(this,"setConfigSettings",e=>{var t,i,a,r;e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,(e==null?void 0:e.ghostPiece)!==void 0&&(this.ghostPiece.enabled=e.ghostPiece),e.transition!==void 0&&((e==null?void 0:e.transition)===!0?this.transition.enabled=!0:(e==null?void 0:e.transition)===!1?this.transition.enabled=!1:(this.transition.enabled=!0,(t=e==null?void 0:e.transition)!=null&&t.duration&&(this.transition.settings.duration=(i=e==null?void 0:e.transition)==null?void 0:i.duration),(a=e==null?void 0:e.transition)!=null&&a.easing&&(this.transition.settings.easing=(r=e==null?void 0:e.transition)==null?void 0:r.easing)))))});I(this,"getConfig",()=>{const e={},t={};if(this.enabled&&this.defaultState.enabled&&(this.ghostPiece.enabled!==this.defaultState.ghostPiece.enabled&&(e.ghostPiece=this.ghostPiece.enabled),this.transition.enabled&&this.defaultState.transition.enabled&&(this.transition.settings.duration!==this.defaultState.transition.settings.duration&&(t.duration=this.transition.settings.duration),this.transition.settings.easing!==this.defaultState.transition.settings.easing&&(t.easing=this.transition.settings.easing),Object.keys(t).length!==0&&(e.transition=t)),!this.transition.enabled&&this.defaultState.transition.enabled&&(e.transition=!1),Object.keys(e).length!==0))return e;if(!this.enabled&&this.defaultState.enabled)return!1});this.enabled=this.defaultState.enabled,this.ghostPiece={...this.defaultState.ghostPiece},this.transition={enabled:this.defaultState.transition.enabled,settings:{...this.defaultState.transition.settings}},this.setConfigSettings(e)}}class Vi{constructor(e){I(this,"enabled");I(this,"selectedPiece");I(this,"defaultState",{enabled:!0,selectedPiece:void 0});I(this,"setConfigSettings",e=>{e!==void 0&&(this.enabled=e)});I(this,"getConfig",()=>{if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.selectedPiece=this.defaultState.selectedPiece,this.setConfigSettings(e)}}class Hi{constructor(e){I(this,"enabled");I(this,"whiteToMove");I(this,"moves");I(this,"settings");I(this,"preMoves");I(this,"lastMove");I(this,"checkSquare");I(this,"defaultState",{enabled:!1,whiteToMove:!0,moves:[],settings:{allowPromotion:!1,allowEnPassant:!1,allowCastling:!1},preMoves:{enabled:!1,moves:[],curMove:""},lastMove:"",checkSquare:void 0});I(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?(this.enabled=!0,this.settings.allowCastling=!0,this.settings.allowEnPassant=!0,this.settings.allowPromotion=!0):e===!1?this.enabled=!1:(e.enabled!==void 0&&(this.enabled=e.enabled),e.settings&&(e.settings.allowCastling!==void 0&&(this.settings.allowCastling=e.settings.allowCastling),e.settings.allowEnPassant!==void 0&&(this.settings.allowEnPassant=e.settings.allowEnPassant),e.settings.allowPromotion!==void 0&&(this.settings.allowPromotion=e.settings.allowPromotion)),e.preMoves!==void 0&&(this.preMoves.enabled=e.preMoves)))});I(this,"getConfig",()=>{if(this.enabled&&this.defaultState.enabled&&this.preMoves.enabled!==this.defaultState.preMoves.enabled)return{preMoves:this.preMoves.enabled};if(this.enabled!==this.defaultState.enabled)return this.preMoves.enabled!==this.defaultState.preMoves.enabled?{preMoves:this.preMoves.enabled}:this.enabled});this.enabled=this.defaultState.enabled,this.whiteToMove=this.defaultState.whiteToMove,this.moves=JSON.parse(JSON.stringify(this.defaultState.moves)),this.settings={...this.defaultState.settings},this.preMoves={enabled:this.defaultState.preMoves.enabled,moves:[...this.defaultState.preMoves.moves],curMove:this.defaultState.preMoves.curMove},this.lastMove=this.defaultState.lastMove,this.checkSquare=this.defaultState.checkSquare,this.setConfigSettings(e)}}class Ki{constructor(e){I(this,"enabled");I(this,"settings");I(this,"defaultState",{enabled:!0,settings:{select:!0,legal:!0,move:!0,preMove:!1,nextMove:!1,check:!0}});I(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.check!==void 0&&(this.settings.check=e.check),e.legal!==void 0&&(this.settings.legal=e.legal),e.move!==void 0&&(this.settings.move=e.move),e.nextMove!==void 0&&(this.settings.nextMove=e.nextMove),e.preMove!==void 0&&(this.settings.preMove=e.preMove),e.select!==void 0&&(this.settings.select=e.select)))});I(this,"getConfig",()=>{const e={},t=["select","legal","move","preMove","nextMove","check"];if(this.enabled&&this.defaultState.enabled&&(t.forEach(i=>{this.settings[i]!==this.defaultState.settings[i]&&(e[i]=this.settings[i])}),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},this.setConfigSettings(e)}}class Wi{constructor(e){I(this,"enabled");I(this,"tools");I(this,"settings");I(this,"defaultState",{enabled:!0,tools:[],settings:{knightLShape:!1,onlyChessMove:!1}});I(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.knightLShape!==void 0&&(this.settings.knightLShape=e.knightLShape),e.onlyChessMove!==void 0&&(this.settings.onlyChessMove=e.onlyChessMove)))});I(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.knightLShape!==this.defaultState.settings.knightLShape&&(e.knightLShape=this.settings.knightLShape),this.settings.onlyChessMove!==this.defaultState.settings.onlyChessMove&&(e.onlyChessMove=this.settings.onlyChessMove),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.tools=JSON.parse(JSON.stringify(this.defaultState.tools)),this.settings={knightLShape:this.defaultState.settings.knightLShape,onlyChessMove:this.defaultState.settings.onlyChessMove},this.setConfigSettings(e)}}class ji{constructor(e){I(this,"enabled");I(this,"settings");I(this,"defaultState",{enabled:!0,settings:{MOVE:!0,CAPTURE:!0,CASTLE:!0,UNDO:!0}});I(this,"setConfigSettings",e=>{e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))});I(this,"getConfig",()=>{const e={};if(this.enabled&&this.defaultState.enabled&&(this.settings.MOVE!==this.defaultState.settings.MOVE&&(e.MOVE=this.settings.MOVE),this.settings.CAPTURE!==this.defaultState.settings.CAPTURE&&(e.CAPTURE=this.settings.CAPTURE),this.settings.CASTLE!==this.defaultState.settings.CASTLE&&(e.CASTLE=this.settings.CASTLE),this.settings.UNDO!==this.defaultState.settings.UNDO&&(e.UNDO=this.settings.UNDO),Object.keys(e).length!==0))return e;if(this.enabled!==this.defaultState.enabled)return this.enabled});this.enabled=this.defaultState.enabled,this.settings={...this.defaultState.settings},e!==void 0&&(e===!0?this.enabled=!0:e===!1?this.enabled=!1:(this.enabled=!0,e.CAPTURE!==void 0&&(this.settings.CAPTURE=e.CAPTURE),e.CASTLE!==void 0&&(this.settings.CASTLE=e.CASTLE),e.MOVE!==void 0&&(this.settings.MOVE=e.MOVE),e.UNDO!==void 0&&(this.settings.UNDO=e.UNDO)))}}class Gi{constructor(e){I(this,"getLegalMoves");I(this,"getPreMoves");I(this,"beforeMove");I(this,"afterMove");I(this,"getLastMove");I(this,"getInCheck");I(this,"getWhiteToMove");I(this,"defaultState",{getLegalMoves:void 0,getPreMoves:void 0,beforeMove:void 0,afterMove:void 0,getLastMove:void 0,getInCheck:void 0,getWhiteToMove:void 0});I(this,"setConfigSettings",e=>{e!==void 0&&(e.getLegalMoves&&(this.getLegalMoves=e.getLegalMoves),e.getPreMoves&&(this.getPreMoves=e.getPreMoves),e.beforeMove&&(this.beforeMove=e.beforeMove),e.afterMove&&(this.afterMove=e.afterMove),e.getLastMove&&(this.getLastMove=e.getLastMove),e.getInCheck&&(this.getInCheck=e.getInCheck),e.getWhiteToMove&&(this.getWhiteToMove=e.getWhiteToMove))});I(this,"getConfig",()=>{const e={...this.getLegalMoves&&{getLegalMoves:this.getLegalMoves},...this.getPreMoves&&{getPreMoves:this.getPreMoves},...this.beforeMove&&{beforeMove:this.beforeMove},...this.afterMove&&{afterMove:this.afterMove},...this.getLastMove&&{getLastMove:this.getLastMove},...this.getInCheck&&{getInCheck:this.getInCheck},...this.getWhiteToMove&&{getWhiteToMove:this.getWhiteToMove}};return Object.keys(e).length>0?e:void 0});this.getLegalMoves=this.defaultState.getLegalMoves,this.getPreMoves=this.defaultState.getPreMoves,this.beforeMove=this.defaultState.beforeMove,this.afterMove=this.defaultState.afterMove,this.getLastMove=this.defaultState.getLastMove,this.getInCheck=this.defaultState.getInCheck,this.getWhiteToMove=this.defaultState.getWhiteToMove,this.setConfigSettings(e)}}const Xi="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Xn{constructor(e){I(this,"pieces");I(this,"markedSquares");I(this,"board");I(this,"movable");I(this,"draggable");I(this,"selectable");I(this,"legal");I(this,"callbacks");I(this,"highlight");I(this,"drawTools");I(this,"sounds");I(this,"getConfig",()=>({board:this.board.getConfig(),movable:this.movable.getConfig(),draggable:this.draggable.getConfig(),selectable:this.selectable.getConfig(),legal:this.legal.getConfig(),...this.legal.enabled&&{callbacks:this.callbacks.getConfig()},highlight:this.highlight.getConfig(),drawTools:this.drawTools.getConfig(),sounds:this.sounds.getConfig()}));this.pieces=[],this.markedSquares=new Set,this.board=new Bi(e==null?void 0:e.board),this.movable=new Ui(e==null?void 0:e.movable),this.draggable=new zi(e==null?void 0:e.draggable),this.selectable=new Vi(e==null?void 0:e.selectable),this.legal=new Hi(e==null?void 0:e.legal),this.callbacks=new Gi(e==null?void 0:e.callbacks),this.highlight=new Ki(e==null?void 0:e.highlight),this.drawTools=new Wi(e==null?void 0:e.drawTools),this.sounds=new ji(e==null?void 0:e.sounds)}setConfigSettings(e){this.board.setConfigSettings(e.board),this.movable.setConfigSettings(e.movable),this.draggable.setConfigSettings(e.draggable),this.selectable.setConfigSettings(e.selectable),this.legal.setConfigSettings(e.legal),this.callbacks.setConfigSettings(e.callbacks),this.highlight.setConfigSettings(e.highlight),this.drawTools.setConfigSettings(e.drawTools),this.sounds.setConfigSettings(e.sounds)}get legalEnabled(){return this.legal.enabled}get preMovesEnabled(){return this.legal.enabled&&this.legal.preMoves.enabled}get legalMoves(){return this.legalEnabled?this.legal.moves:[]}set legalMoves(e){this.legalEnabled&&(this.legal.moves=e)}get preMoves(){return this.preMovesEnabled?this.legal.preMoves.moves:[]}set preMoves(e){this.preMovesEnabled&&(this.legal.preMoves.moves=e)}get flipped(){return this.board.flipped}set flipped(e){this.board.flipped=e}get currentPreMove(){return this.legal.preMoves.curMove}set currentPreMove(e){this.legal.preMoves.curMove=e}get selectableEnabled(){return this.selectable.enabled}get draggableEnabled(){return this.draggable.enabled}get selectedPiece(){return this.selectableEnabled?this.selectable.selectedPiece:void 0}set selectedPiece(e){this.selectableEnabled?this.selectable.selectedPiece=e:this.selectable.selectedPiece=void 0}get whiteToMove(){return this.legal.whiteToMove}set whiteToMove(e){this.legalEnabled&&(this.legal.whiteToMove=e)}get lastMove(){return this.legalEnabled?this.legal.lastMove:""}set lastMove(e){e.length<4&&e!==""||(this.legalEnabled?this.legal.lastMove=e:this.legal.lastMove="")}get highlightEnabled(){return this.highlight.enabled}get highlightSettings(){return this.highlight.settings}get soundsEnabled(){return this.sounds.enabled}get ghostPieceEnabled(){return this.draggable.ghostPiece.enabled}get ghostPiece(){return this.draggable.ghostPiece.piece}set ghostPiece(e){this.ghostPieceEnabled||(this.draggable.ghostPiece.piece=void 0),this.draggable.ghostPiece.piece=e}get movableEnabled(){return this.movable.enabled}}const Yi=["a","b","c","d","e","f","g","h"],Qi=["8","7","6","5","4","3","2","1"];function jt(s){return{x:Yi.indexOf(s[0]),y:Qi.indexOf(s[1])}}function ws(s){return s.charCodeAt(0)-97}function Zi(s){return 8-parseInt(s,10)}const Ji=s=>{let e="",t=0;for(let i=0;i<s.length;i++){i!==0&&(e+="/");for(let a=0;a<s[i].length;a++){const r=s[i][a];r!=null&&t===0?r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase():r!=null&&t!==0?(e+=t.toString(),t=0,r[0]==="w"?e+=r[1]:e+=r[1].toLowerCase()):t++}t!==0&&(e+=t.toString(),t=0)}return e},xi="8/8/8/8/8/8/8/8 w - - 0 1";class $i{constructor(e){I(this,"letters",{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7});I(this,"state");I(this,"changeLegalHoverIfNeeded",e=>{e.color!==H.LEGAL&&e.color!==H.PREMOVE||this.state.pieces.forEach(t=>{t.square===e.square&&(e.color=e.color===H.LEGAL?H.LEGALHOVER:H.PREMOVEHOVER)})});I(this,"highlightSquare",(e,t)=>{const i={square:e,color:t};this.state.markedSquares.forEach(a=>{a.square===e&&a.color!==H.MOVE&&a.color!==H.CHECK&&this.state.markedSquares.delete(a)}),this.changeLegalHoverIfNeeded(i),this.state.markedSquares.add(i)});I(this,"legalHover",(e,t=H.LEGAL)=>{e!==void 0&&this.state.markedSquares.forEach(i=>{if(i.square===e&&i.color===t)i.color=t===H.LEGAL?H.LEGALHOVER:H.PREMOVEHOVER;else if(i.square!==e&&i.color===(t===H.LEGAL?H.LEGALHOVER:H.PREMOVEHOVER)){let a=!1;this.state.pieces.forEach(r=>{r.square===i.square&&(a=!0)}),a||(i.color=t)}})});I(this,"toggleSquareHighlight",(e,t)=>{const i={square:e,color:t};let a=!1;return this.state.markedSquares.forEach(r=>{r.square===e&&(this.state.markedSquares.delete(r),r.color===t&&(a=!0))}),this.changeLegalHoverIfNeeded(i),a?!0:(this.state.markedSquares.add(i),!1)});I(this,"getSelectedSquare",()=>{let e="";return this.state.markedSquares.forEach(t=>{t.color===H.SELECT&&(e=t.square)}),e});I(this,"clearSquare",(e,t)=>{e.length===2&&this.state.markedSquares.forEach(i=>{i.square===e&&(i.color===t||t===void 0)&&this.state.markedSquares.delete(i)})});I(this,"clearAllSquares",e=>{e===void 0?this.state.markedSquares.clear():this.state.markedSquares.forEach(t=>{t.color===e&&this.state.markedSquares.delete(t)})});I(this,"setPiece",(e,t)=>{if(this.notValidThing({square:e,piece:t}))return;const i=this.state.pieces.find(a=>a.square===e);i?i.name=t:this.state.pieces.push({square:e,name:t})});I(this,"removePiece",e=>{this.notValidThing({square:e})||this.state.pieces.forEach((t,i)=>{t.square===e&&this.state.pieces.splice(i,1)})});I(this,"clearAllPieces",()=>{this.state.pieces.length=0});I(this,"getGridCoordsFromSquare",e=>{if(this.notValidThing({square:e}))return{x:0,y:0};const t=e[0],i=e[1],a=this.state.board.flipped?Math.abs(this.letters[t]-7):this.letters[t],r=this.state.board.flipped?Math.abs(parseInt(i,10)-8):parseInt(i,10)-1;return typeof a!="number"||r<0||r>7?{x:0,y:0}:{x:a,y:r}});I(this,"makeMove",e=>{if(this.notValidThing({move:e}))return;let t=!1,i;const a=e.substring(0,2),r=e.substring(2,4),n=e.substring(4);this.state.pieces.forEach(l=>{l.square===r&&(i=l,this.removePiece(l.square))}),this.state.pieces.forEach(l=>{l.square===a&&(l.square=r,t=!0,n&&(l.name=l.name[0]+n.toUpperCase()))}),t?this.state.legal.lastMove=e:i&&this.state.pieces.push(i)});I(this,"getSquareFromIndices",(e,t)=>`${Object.keys(this.letters)[e]}${(t+1).toString()}`);I(this,"updatePiecesWithFen",e=>{const t=[...Array(8)].map(()=>Array(8).fill(null)),i=["1","2","3","4","5","6","7","8"];let a=0,r=0;for(let o=0;o<(e.includes(" ")?e.indexOf(" "):e.length);o++)if(e[o]==="/")a++,r=0;else if(!i.includes(e[o]))e[o]===e[o].toUpperCase()?t[a][r]=`w${e[o]}`:t[a][r]=`b${e[o].toUpperCase()}`,r++;else for(let u=0;u<parseInt(e[o],10);u++)t[a][r]=null,r++;const n=[],l=[];for(let o=0;o<t.length;++o)for(let u=0;u<t.length;++u){const c=t[o][u],d=this.getPieceFromSquare(this.getSquareFromIndices(u,Math.abs(o-7)));c&&!d&&n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),!c&&d&&l.push(d),c&&d&&c!==d.name&&(n.push({square:this.getSquareFromIndices(u,Math.abs(o-7)),name:c}),l.push(d))}for(let o=0;o<l.length;o++)for(let u=0;u<n.length;u++)!n[u]||!l[o]||n[u].name===l[o].name&&(l[o].square=n[u].square,l.splice(o,1),o--,n.splice(u,1),u--);n.forEach(o=>{this.state.pieces.push(o)}),l.forEach(o=>{this.state.pieces.splice(this.state.pieces.indexOf(o),1)})});I(this,"notValidThing",e=>{const{square:t,piece:i,move:a}=e;return!!(t&&t.length!==2||i&&i.length!==2||a&&a.length!==4&&a.length!==5)});I(this,"setGhostPiece",e=>{this.state.draggable.ghostPiece.piece=e});I(this,"removeGhostPiece",()=>{this.state.draggable.ghostPiece.piece=void 0});I(this,"isCastling",e=>{const t=e.slice(0,2),i=this.getPieceFromSquare(t);return!i||i.name[1]!=="K"?!1:e==="e1g1"||e==="e1c1"||e==="e8g8"||e==="e8c8"});I(this,"getRookMoveIfIsCastling",e=>{if(!this.isCastling(e))return null;switch(e){case"e1g1":return"h1f1";case"e1c1":return"a1d1";case"e8g8":return"h8f8";case"e8c8":return"a8d8";default:return null}});I(this,"isEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return!1;const t=this.getPieceFromSquare(e.substring(0,2));return!(t===void 0||t.name!=="wP"&&t.name!=="bP")});I(this,"getCapturedPawnSquareIfIsEnPassant",e=>{if(e[0]===e[2]||this.getPieceFromSquare(e.substring(2,4)))return;const t=this.getPieceFromSquare(e.substring(0,2));if(t===void 0||t.name!=="wP"&&t.name!=="bP")return;const i=`${e[2]}${(parseInt(e[3],10)+(t.name==="wP"?-1:1)).toString()}`;if(this.state.legal.lastMove.substring(2,4)!==i)return;const a=this.getPieceFromSquare(i);if(!(!a||a.name[1]!=="P")&&Math.abs(parseInt(this.state.legal.lastMove[1],10)-parseInt(this.state.legal.lastMove[3],10))===2)return i});I(this,"isCapture",e=>!!this.getPieceFromSquare(e.substring(2,4)));I(this,"isPromotion",e=>{if((e[1]!=="7"||e[3]!=="8")&&(e[1]!=="2"||e[3]!=="1"))return!1;const t=this.getPieceFromSquare(e.substring(0,2));return!(t&&(t.name[1]!=="P"||t.name[0]==="w"&&e[3]==="1"||t.name[0]==="b"&&e[3]==="8"))});I(this,"callbackExists",e=>this.state.callbacks[e]!==void 0);I(this,"flipBoard",e=>{e!==void 0?this.state.board.flipped=e:this.state.board.flipped=!this.state.board.flipped});I(this,"setConfigSettings",e=>{this.state.setConfigSettings(e)});this.state=new Xn(e),this.state.board.startFen&&this.updatePiecesWithFen(this.state.board.startFen)}getWhiteKingSquare(){const e=this.state.pieces.find(t=>t.name==="wK");if(e)return e.square}getBlackKingSquare(){const e=this.state.pieces.find(t=>t.name==="bK");if(e)return e.square}getShortFEN(){if(this.state.pieces.length===0)return xi;const e=[...Array(8)].map(()=>Array(8).fill(null));return this.state.pieces.forEach(t=>{e[Zi(t.square[1])][ws(t.square[0])]=t.name}),Ji(e)}getPieceFromSquare(e){if(e)return this.state.pieces.find(t=>t.square===e)}get legalEnabled(){return this.state.legalEnabled}get preMovesEnabled(){return this.state.preMovesEnabled}get legalMoves(){return this.state.legalMoves}set legalMoves(e){this.state.legalMoves=e}get preMoves(){return this.state.preMoves}set preMoves(e){this.state.preMoves=e}get flipped(){return this.state.flipped}set flipped(e){this.state.flipped=e}get currentPreMove(){return this.state.currentPreMove}set currentPreMove(e){this.state.currentPreMove=e}get selectableEnabled(){return this.state.selectableEnabled}get draggableEnabled(){return this.state.draggableEnabled}get selectedPiece(){return this.state.selectedPiece}set selectedPiece(e){this.state.selectedPiece=e}get whiteToMove(){return this.state.whiteToMove}set whiteToMove(e){this.state.whiteToMove=e}get lastMove(){return this.state.lastMove}set lastMove(e){this.state.lastMove=e}get highlightEnabled(){return this.state.highlightEnabled}get highlightSettings(){return this.state.highlightSettings}get soundsEnabled(){return this.state.soundsEnabled}get ghostPieceEnabled(){return this.state.ghostPieceEnabled}get ghostPiece(){return this.state.ghostPiece}set ghostPiece(e){this.state.ghostPiece=e}get movableEnabled(){return this.state.movableEnabled}}const ea={[H.LEGAL]:"legal cursor-pointer",[H.LEGALHOVER]:"legal-h cursor-pointer",[H.SELECT]:"select",[H.MOVE]:"move",[H.NEXTMOVE]:"nextMove",[H.PREMOVE]:"preMove cursor-pointer",[H.PREMOVEHOVER]:"preMove-h cursor-pointer",[H.CHECK]:"check"},ta={white:"#f0d9b5",black:"#b58863"},sa="standard.svg",na={[H.LEGAL]:"legal cursor-pointer",[H.LEGALHOVER]:"legal-h cursor-pointer",[H.SELECT]:"select-db",[H.MOVE]:"move-db",[H.NEXTMOVE]:"nextMove",[H.PREMOVE]:"preMove cursor-pointer",[H.PREMOVEHOVER]:"preMove-h cursor-pointer",[H.CHECK]:"check"},ia={white:"#94A3B8",black:"#475569"},aa="darkBlue.svg",je={squareStyles:{standard:ea,darkBlue:na},colors:{standard:ta,darkBlue:ia},imageName:{standard:sa,darkBlue:aa}};function js(s,e,t){const i=s.slice();return i[6]=e[t],i[8]=t,i}function Gs(s,e,t){const i=s.slice();return i[6]=e[t],i[8]=t,i}function Xs(s){let e,t=s[4][s[1]?Math.abs(s[8]-7):s[8]]+"",i,a;return{c(){e=F("span"),i=ve(t),a=W(),this.h()},l(r){e=N(r,"SPAN",{"data-file":!0,style:!0,class:!0});var n=R(e);i=_e(n,t),a=j(n),n.forEach(S),this.h()},h(){p(e,"data-file",s[6]),ze(e,"--font-size",s[3]+"px"),ze(e,"color",s[8]%2===0?je.colors[s[0]].white:je.colors[s[0]].black),p(e,"class","svelte-1dkkugo")},m(r,n){z(r,e,n),P(e,i),P(e,a)},p(r,n){n&2&&t!==(t=r[4][r[1]?Math.abs(r[8]-7):r[8]]+"")&&xt(i,t),n&8&&ze(e,"--font-size",r[3]+"px"),n&1&&ze(e,"color",r[8]%2===0?je.colors[r[0]].white:je.colors[r[0]].black)},d(r){r&&S(e)}}}function Ys(s){let e,t=(s[1]?s[8]+1:Math.abs(s[8]-8))+"",i,a,r;return{c(){e=F("span"),i=ve(t),a=W(),this.h()},l(n){e=N(n,"SPAN",{"data-file":!0,style:!0,class:!0});var l=R(e);i=_e(l,t),a=j(l),l.forEach(S),this.h()},h(){p(e,"data-file",s[6]),p(e,"style",r="--font-size: "+s[3]+"px; color: "+(s[8]%2===0?je.colors[s[0]].white:je.colors[s[0]].black)+";"+(s[1]?" text-align: right;":"")),p(e,"class","svelte-1dkkugo")},m(n,l){z(n,e,l),P(e,i),P(e,a)},p(n,l){l&2&&t!==(t=(n[1]?n[8]+1:Math.abs(n[8]-8))+"")&&xt(i,t),l&11&&r!==(r="--font-size: "+n[3]+"px; color: "+(n[8]%2===0?je.colors[n[0]].white:je.colors[n[0]].black)+";"+(n[1]?" text-align: right;":""))&&p(e,"style",r)},d(n){n&&S(e)}}}function ra(s){let e,t,i,a,r=s[4],n=[];for(let u=0;u<r.length;u+=1)n[u]=Xs(Gs(s,r,u));let l=s[4],o=[];for(let u=0;u<l.length;u+=1)o[u]=Ys(js(s,l,u));return{c(){e=F("div");for(let u=0;u<n.length;u+=1)n[u].c();t=W(),i=F("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=N(u,"DIV",{class:!0});var c=R(e);for(let f=0;f<n.length;f+=1)n[f].l(c);c.forEach(S),t=j(u),i=N(u,"DIV",{class:!0});var d=R(i);for(let f=0;f<o.length;f+=1)o[f].l(d);d.forEach(S),this.h()},h(){p(e,"class","files svelte-1dkkugo"),p(i,"class","ranks svelte-1dkkugo"),kt(()=>s[5].call(i))},m(u,c){z(u,e,c);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);z(u,t,c),z(u,i,c);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(i,null);a=ai(i,s[5].bind(i))},p(u,[c]){if(c&27){r=u[4];let d;for(d=0;d<r.length;d+=1){const f=Gs(u,r,d);n[d]?n[d].p(f,c):(n[d]=Xs(f),n[d].c(),n[d].m(e,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=r.length}if(c&27){l=u[4];let d;for(d=0;d<l.length;d+=1){const f=js(u,l,d);o[d]?o[d].p(f,c):(o[d]=Ys(f),o[d].c(),o[d].m(i,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=l.length}},i:ke,o:ke,d(u){u&&S(e),bt(n,u),u&&S(t),u&&S(i),bt(o,u),a()}}}function la(s,e,t){let i,{theme:a}=e,{flipped:r}=e;const n=["a","b","c","d","e","f","g","h"];let l;function o(){l=this.clientHeight,t(2,l)}return s.$$set=u=>{"theme"in u&&t(0,a=u.theme),"flipped"in u&&t(1,r=u.flipped)},s.$$.update=()=>{s.$$.dirty&4&&t(3,i=Math.floor(Math.log(l/8)*3))},[a,r,l,i,n,o]}class oa extends Te{constructor(e){super(),Le(this,e,la,ra,Oe,{theme:0,flipped:1})}}function ua(s){const e=2.5949095;return(s*=2)<1?.5*(s*s*((e+1)*s-e)):.5*((s-=2)*s*((e+1)*s+e)+2)}function fa(s){return s*s*((1.70158+1)*s-1.70158)}function ca(s){return--s*s*((1.70158+1)*s+1.70158)+1}function Qt(s){const e=.36363636363636365,t=8/11,i=9/10,a=4356/361,r=35442/1805,n=16061/1805,l=s*s;return s<e?7.5625*l:s<t?9.075*l-9.9*s+3.4:s<i?a*l-r*s+n:10.8*s*s-20.52*s+10.72}function da(s){return s<.5?.5*(1-Qt(1-s*2)):.5*Qt(s*2-1)+.5}function ha(s){return 1-Qt(1-s)}function ga(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)}function ba(s){return 1-Math.sqrt(1-s*s)}function pa(s){return Math.sqrt(1- --s*s)}function ma(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function va(s){return s*s*s}function Os(s){const e=s-1;return e*e*e+1}function _a(s){return s<.5?.5*Math.sin(13*Math.PI/2*2*s)*Math.pow(2,10*(2*s-1)):.5*Math.sin(-13*Math.PI/2*(2*s-1+1))*Math.pow(2,-10*(2*s-1))+1}function Ea(s){return Math.sin(13*s*Math.PI/2)*Math.pow(2,10*(s-1))}function ka(s){return Math.sin(-13*(s+1)*Math.PI/2)*Math.pow(2,-10*s)+1}function Ma(s){return s===0||s===1?s:s<.5?.5*Math.pow(2,20*s-10):-.5*Math.pow(2,10-s*20)+1}function wa(s){return s===0?s:Math.pow(2,10*(s-1))}function Sa(s){return s===1?s:1-Math.pow(2,-10*s)}function Ca(s){return s/=.5,s<1?.5*s*s:(s--,-.5*(s*(s-2)-1))}function Pa(s){return s*s}function ya(s){return-s*(s-2)}function Aa(s){return s<.5?8*Math.pow(s,4):-8*Math.pow(s-1,4)+1}function Ta(s){return Math.pow(s,4)}function La(s){return Math.pow(s-1,3)*(1-s)+1}function Oa(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)}function Ia(s){return s*s*s*s*s}function qa(s){return--s*s*s*s*s+1}function Fa(s){return-.5*(Math.cos(Math.PI*s)-1)}function Na(s){const e=Math.cos(s*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e}function Ra(s){return Math.sin(s*Math.PI/2)}const Zt=Object.freeze(Object.defineProperty({__proto__:null,backIn:fa,backInOut:ua,backOut:ca,bounceIn:ha,bounceInOut:da,bounceOut:Qt,circIn:ba,circInOut:ga,circOut:pa,cubicIn:va,cubicInOut:ma,cubicOut:Os,elasticIn:Ea,elasticInOut:_a,elasticOut:ka,expoIn:wa,expoInOut:Ma,expoOut:Sa,linear:zn,quadIn:Pa,quadInOut:Ca,quadOut:ya,quartIn:Ta,quartInOut:Aa,quartOut:La,quintIn:Ia,quintInOut:Oa,quintOut:qa,sineIn:Na,sineInOut:Fa,sineOut:Ra},Symbol.toStringTag,{value:"Module"}));function Qs(s){return Object.prototype.toString.call(s)==="[object Date]"}function Ss(s,e){if(s===e||s!==s)return()=>s;const t=typeof s;if(t!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const i=e.map((a,r)=>Ss(s[r],a));return a=>i.map(r=>r(a))}if(t==="object"){if(!s||!e)throw new Error("Object cannot be null");if(Qs(s)&&Qs(e)){s=s.getTime(),e=e.getTime();const r=e-s;return n=>new Date(s+n*r)}const i=Object.keys(e),a={};return i.forEach(r=>{a[r]=Ss(s[r],e[r])}),r=>{const n={};return i.forEach(l=>{n[l]=a[l](r)}),n}}if(t==="number"){const i=e-s;return a=>s+a*i}throw new Error(`Cannot interpolate ${t} values`)}function Da(s,e={}){const t=gi(s);let i,a=s;function r(n,l){if(s==null)return t.set(s=n),Promise.resolve();a=n;let o=i,u=!1,{delay:c=0,duration:d=400,easing:f=zn,interpolate:w=Ss}=Gt(Gt({},e),l);if(d===0)return o&&(o.abort(),o=null),t.set(s=a),Promise.resolve();const v=ri()+c;let E;return i=li(_=>{if(_<v)return!0;u||(E=w(s,n),typeof d=="function"&&(d=d(s,n)),u=!0),o&&(o.abort(),o=null);const k=_-v;return k>d?(t.set(s=n),!1):(t.set(s=E(f(k/d))),!0)}),i.promise}return{set:r,update:(n,l)=>r(n(a,s),l),subscribe:t.subscribe}}function Es(s,e,t,i){if(e===0&&t===0)return s;const a=i?["h","g","f","e","d","c","b","a"]:["a","b","c","d","e","f","g","h"],r=i?["1","2","3","4","5","6","7","8"]:["8","7","6","5","4","3","2","1"],n=a[a.indexOf(s[0])+e],l=r[r.indexOf(s[1])+t];if(!(!n||!l))return`${n}${l}`}function Ba(s,e,t){const i=e*1.15,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("width",`${s.offsetWidth*i}`),a.setAttribute("height",`${s.offsetHeight*i}`),a.style.position="absolute",a.style.zIndex="100",a.style.translate=`${t?"":"-"}${25*i/2}% -${25*i/2}%`,a.style.opacity="0.2",a.style.pointerEvents="none",r.setAttribute("r",`${s.offsetWidth*i/2}`),r.setAttribute("cx",`${s.offsetWidth*i/2}`),r.setAttribute("cy",`${s.offsetHeight*i/2}`),r.setAttribute("fill","black"),a.appendChild(r),a}function Ua(s,e){let t,i,a,r,n,l,o,u,c=!1,d;const f=s.parentNode;let w,v=!1,E=!1,_=!1,{startSquare:k,boardFlipped:g,mouseEvents:h,canDrag:M,canSelect:C,canCapture:y,duration:q,easingFunc:D}=e;const{coords:A}=e;let O=Fs(A).x,U=Fs(A).y;const X=1.6,fe=Ba(s,X,g);function Ae(b){if(b.button!==0||!b.isPrimary||!h)return;if(b.pointerType==="touch"?_=!0:_=!1,y){s.dispatchEvent(new CustomEvent("captured"));return}if((C||M)&&s.dispatchEvent(new CustomEvent("clicked")),!M){s.dispatchEvent(new CustomEvent("dropped",{detail:k}));return}O=(g?7-ws(k[0]):ws(k[0]))*f.clientWidth/8,U=(g?parseInt(k[1],10)-1:8-parseInt(k[1],10))*f.clientWidth/8,w=k;const K=b.target.getBoundingClientRect();b.pointerType==="touch"?(t=b.clientX,i=b.clientY,a=b.clientX-K.x,r=b.clientY-K.y):(t=b.clientX,i=b.clientY,a=b.offsetX,r=b.offsetY),n=0,l=0,o=window.scrollX,u=window.scrollY,E=!0,window.addEventListener("pointermove",Se),window.addEventListener("pointerup",B),window.addEventListener("pointercancel",Q),document.body.addEventListener("pointerleave",Q),window.addEventListener("scroll",ie)}function Se(b){const K=b.clientX-t,te=b.clientY-i;if(t=b.clientX,i=b.clientY,n+=K,l+=te,c||G(_),!!c){if(_){const Ee=Math.floor((n+a)/s.offsetWidth),de=Math.floor((l+r)/s.offsetHeight),Ie=Es(k,Ee,de,g);if(Ie){const Me=jt(Ie);fe.setAttribute("r",`${s.offsetWidth*X*1.15/2}`),fe.setAttribute("cx",`${s.offsetWidth*X*1.15/2}`),fe.setAttribute("cy",`${s.offsetHeight*X*1.15/2}`);const he=(g?(7-Me.x)*f.clientWidth/8:Me.x*f.clientWidth/8)-s.offsetWidth*X*1.15/2+s.offsetWidth/2,ye=(g?(7-Me.y)*f.clientWidth/8:Me.y*f.clientWidth/8)-s.offsetWidth*X*1.15/2+s.offsetWidth/2;fe.style.translate=`${he}px ${ye}px`,v||(f.appendChild(fe),v=!0)}else w&&(w=void 0)}A.update(Ee=>({x:Ee.x+K,y:Ee.y+te,scale:_?X:1}),{duration:0}),w=x()}}function ie(){const b=window.scrollX-o,K=window.scrollY-u;o=window.scrollX,u=window.scrollY,n+=b,l+=K,c||G(_),c&&(A.update(te=>({x:te.x+b,y:te.y+K,scale:_?X:1}),{duration:0}),w=x())}function x(){const b=Es(k,Math.floor((n+a)/s.offsetWidth),Math.floor((l+r)/s.offsetHeight),g);return b!==w&&s.dispatchEvent(new CustomEvent("squareover",{detail:{square:b}})),b}function B(){const b=Math.floor((n+a)/s.offsetWidth),K=Math.floor((l+r)/s.offsetHeight),te=Es(k,b,K,g);s.dispatchEvent(new CustomEvent("dropped",{detail:te})),E=!1,Q()}function Q(){window.removeEventListener("pointermove",Se),window.removeEventListener("pointerup",B),window.removeEventListener("pointercancel",Q),document.body.removeEventListener("pointerleave",Q),window.removeEventListener("scroll",ie),E&&s.dispatchEvent(new CustomEvent("canceled")),E=!1,A.update(()=>({x:O,y:U,scale:1}),{duration:q,easing:D}).then(()=>{E||s.dispatchEvent(new CustomEvent("animationEnded")),E||s.classList.remove("dragging")}),t=0,i=0,n=0,l=0,setTimeout(()=>{E||s.classList.remove("dragging")},q),c=!1,fe.remove(),v=!1}function G(b=!1){A.update(()=>({x:O,y:U,scale:1}),{duration:0}),(Math.abs(n)>1||Math.abs(l)>1)&&(A.update(()=>({x:O+(t-s.offsetWidth/2-s.getBoundingClientRect().x),y:b?U+(i-s.offsetHeight*1.5-s.getBoundingClientRect().y):U+(i-s.offsetHeight/2-s.getBoundingClientRect().y),scale:b?X:1}),{duration:0}),c=!0,s.classList.add("dragging"),s.dispatchEvent(new CustomEvent("startMoving")))}function ce(b){E&&Q(),b.preventDefault()}function ae(b){b.preventDefault()}return s.addEventListener("contextmenu",ce),s.addEventListener("dragstart",ae),s.addEventListener("pointerdown",Ae),{destroy(){s.removeEventListener("pointerdown",Ae),s.removeEventListener("contextmenu",ce),s.removeEventListener("dragstart",ae),window.clearTimeout(d)},update(b){k=b.startSquare,q=b.duration,D=b.easingFunc,b.canDrag!==M&&(M=b.canDrag),b.canSelect!==C&&(C=b.canSelect),b.canCapture!==y&&(y=b.canCapture),b.mouseEvents!==h&&(h=b.mouseEvents),g=b.boardFlipped}}}function za(s){let e,t,i,a,r,n;return{c(){e=F("div"),this.h()},l(l){e=N(l,"DIV",{style:!0,class:!0}),R(e).forEach(S),this.h()},h(){var l;p(e,"style",t="translate: "+s[11].x+"px "+s[11].y+"px;"+(s[11].scale!==1?` scale: ${s[11].scale}`:"")),p(e,"class",i=s[2]+(s[2][0]==="w"?" white":" black")+(s[4]?" ghost":"")+(!((l=s[6])!=null&&l.enabled)&&!s[4]?" static":"")+(s[10]?"":" opacity-0")+(s[9]?" capture":"")+" svelte-6jzr8p")},m(l,o){var u,c;z(l,e,o),r||(n=[As(a=Ua.call(null,e,{startSquare:s[1],mouseEvents:s[0],canDrag:s[7],canSelect:s[8],canCapture:s[9],boardFlipped:s[3],duration:(u=s[5])!=null&&u.transition.enabled?s[5].transition.settings.duration:0,easingFunc:Zt[((c=s[5])==null?void 0:c.transition.settings.easing)??"cubicInOut"],coords:s[13]})),ee(e,"dropped",s[14]),ee(e,"clicked",s[19]),ee(e,"startMoving",s[20]),ee(e,"animationEnded",s[21]),ee(e,"captured",s[22]),ee(e,"canceled",s[23]),ee(e,"squareover",s[24])],r=!0)},p(l,o){var u,c,d;o[0]&2048&&t!==(t="translate: "+l[11].x+"px "+l[11].y+"px;"+(l[11].scale!==1?` scale: ${l[11].scale}`:""))&&p(e,"style",t),o[0]&1620&&i!==(i=l[2]+(l[2][0]==="w"?" white":" black")+(l[4]?" ghost":"")+(!((u=l[6])!=null&&u.enabled)&&!l[4]?" static":"")+(l[10]?"":" opacity-0")+(l[9]?" capture":"")+" svelte-6jzr8p")&&p(e,"class",i),a&&Ts(a.update)&&o[0]&939&&a.update.call(null,{startSquare:l[1],mouseEvents:l[0],canDrag:l[7],canSelect:l[8],canCapture:l[9],boardFlipped:l[3],duration:(c=l[5])!=null&&c.transition.enabled?l[5].transition.settings.duration:0,easingFunc:Zt[((d=l[5])==null?void 0:d.transition.settings.easing)??"cubicInOut"],coords:l[13]})},i:ke,o:ke,d(l){l&&S(e),r=!1,at(n)}}}function Va(s,e,t){var ae;let i,{square:a}=e,{name:r}=e,{mouseEvents:n=!0}=e,{getGridCoordsFromSquare:l}=e,{flipped:o}=e,{isGhost:u=!1}=e,{boardSize:c}=e;u&&(n=!1);let{selectableState:d=void 0}=e,{draggableState:f=void 0}=e,{legalState:w=void 0}=e,{movableState:v=void 0}=e,E=!1,_=!1,k=!1,g=!1;const h=Dt();let M=(ae=f==null?void 0:f.transition)!=null&&ae.enabled?f.transition.settings.duration:0;const C=Da({x:0,y:0,scale:1},{duration:M,easing:Zt[(f==null?void 0:f.transition.settings.easing)??"cubicInOut"]});oi(s,C,b=>t(11,i=b));let y=!1;const q=b=>b[0]==="w"?se.WHITE:se.BLACK,D=b=>{const K=l(b);C.update(()=>({x:K.x*c/8,y:(7-K.y)*c/8,scale:1}),{duration:y?M:0,easing:Zt[(f==null?void 0:f.transition.settings.easing)??"cubicInOut"]}),M=f!=null&&f.transition.enabled?f.transition.settings.duration:0},A=b=>{const K=l(a);C.update(()=>({x:K.x*b/8,y:(7-K.y)*b/8,scale:1}),{duration:0})},O=b=>{M=0,b.detail||h("deselect"),a===b.detail?(!E&&fe(v,d)?h("select"):h("deselect"),E=!E):E=!1,X(v,f)&&h("endDragging",a+b.detail),a!==b.detail&&b.detail&&h("move",a+b.detail)},U=b=>w!=null&&w.enabled?!!(w.preMoves.enabled&&q(r)===b.color||b.color===se.WHITE&&w.whiteToMove&&q(r)===se.WHITE||b.color===se.BLACK&&!w.whiteToMove&&q(r)===se.BLACK||b.color===se.BOTH&&(q(r)===se.WHITE&&w.whiteToMove||q(r)===se.BLACK&&!w.whiteToMove)):b.color===q(r)||b.color===se.BOTH,X=(b,K)=>!(b!=null&&b.enabled)||!(K!=null&&K.enabled)||!n?!1:U(b),fe=(b,K)=>!(b!=null&&b.enabled)||!(K!=null&&K.enabled)||!n?!1:U(b),Ae=(b,K,te)=>{var Ee,de;return!(K!=null&&K.enabled)||!(te!=null&&te.enabled)||!n?!1:b!=null&&b.enabled?!!((d==null?void 0:d.selectedPiece)!==void 0&&((Ee=d==null?void 0:d.selectedPiece)==null?void 0:Ee.square)!==a&&(b.moves.includes(d.selectedPiece.square+a)||b.moves.includes(`${d.selectedPiece.square+a}q`))||(d==null?void 0:d.selectedPiece)!==void 0&&b.preMoves.enabled&&q(d==null?void 0:d.selectedPiece.name)===K.color&&(b.preMoves.moves.includes(d.selectedPiece.square+a)||b.preMoves.moves.includes(`${d.selectedPiece.square+a}q`))):(d==null?void 0:d.selectedPiece)!==void 0&&((de=d==null?void 0:d.selectedPiece)==null?void 0:de.square)!==a},Se=b=>b===void 0||b.name!==r||b.square!==a;$t(()=>{t(10,y=!0)});function ie(b){We.call(this,s,b)}function x(b){We.call(this,s,b)}function B(b){We.call(this,s,b)}function Q(b){We.call(this,s,b)}function G(b){We.call(this,s,b)}const ce=b=>{h("squareover",b.detail)};return s.$$set=b=>{"square"in b&&t(1,a=b.square),"name"in b&&t(2,r=b.name),"mouseEvents"in b&&t(0,n=b.mouseEvents),"getGridCoordsFromSquare"in b&&t(15,l=b.getGridCoordsFromSquare),"flipped"in b&&t(3,o=b.flipped),"isGhost"in b&&t(4,u=b.isGhost),"boardSize"in b&&t(16,c=b.boardSize),"selectableState"in b&&t(17,d=b.selectableState),"draggableState"in b&&t(5,f=b.draggableState),"legalState"in b&&t(18,w=b.legalState),"movableState"in b&&t(6,v=b.movableState)},s.$$.update=()=>{s.$$.dirty[0]&96&&t(7,_=X(v,f)),s.$$.dirty[0]&131136&&t(8,k=fe(v,d)),s.$$.dirty[0]&393280&&t(9,g=Ae(w,v,d)),s.$$.dirty[0]&131072&&Se(d==null?void 0:d.selectedPiece)&&(E=!1),s.$$.dirty[0]&10&&D(a),s.$$.dirty[0]&65536&&A(c)},[n,a,r,o,u,f,v,_,k,g,y,i,h,C,O,l,c,d,w,ie,x,B,Q,G,ce]}class Yn extends Te{constructor(e){super(),Le(this,e,Va,za,Oe,{square:1,name:2,mouseEvents:0,getGridCoordsFromSquare:15,flipped:3,isGhost:4,boardSize:16,selectableState:17,draggableState:5,legalState:18,movableState:6},null,[-1,-1])}}function Ha(s){let e,t,i;return{c(){e=F("div"),this.h()},l(a){e=N(a,"DIV",{style:!0,class:!0}),R(e).forEach(S),this.h()},h(){p(e,"style",t="translate: "+s[5]*s[3]/8+"px "+(7-s[6])*s[3]/8+"px;"+(s[4]?` border-${s[4]}-radius: inherit;`:"")),p(e,"class",i=je.squareStyles[s[1]][s[0]]+(s[2]?"":" pointer-events-none")+" svelte-hsrdx7")},m(a,r){z(a,e,r)},p(a,[r]){r&120&&t!==(t="translate: "+a[5]*a[3]/8+"px "+(7-a[6])*a[3]/8+"px;"+(a[4]?` border-${a[4]}-radius: inherit;`:""))&&p(e,"style",t),r&7&&i!==(i=je.squareStyles[a[1]][a[0]]+(a[2]?"":" pointer-events-none")+" svelte-hsrdx7")&&p(e,"class",i)},i:ke,o:ke,d(a){a&&S(e)}}}function Ka(s,e,t){let{square:i}=e,{color:a}=e,{getGridCoordsFromSquare:r}=e,{flipped:n}=e,{theme:l}=e,{mouseEvents:o=!0}=e,{boardSize:u}=e,{corner:c=""}=e,d,f;const w=()=>{const v=r(i);t(5,d=v.x),t(6,f=v.y)};return s.$$set=v=>{"square"in v&&t(7,i=v.square),"color"in v&&t(0,a=v.color),"getGridCoordsFromSquare"in v&&t(8,r=v.getGridCoordsFromSquare),"flipped"in v&&t(9,n=v.flipped),"theme"in v&&t(1,l=v.theme),"mouseEvents"in v&&t(2,o=v.mouseEvents),"boardSize"in v&&t(3,u=v.boardSize),"corner"in v&&t(4,c=v.corner)},s.$$.update=()=>{s.$$.dirty&512&&w()},[a,l,o,u,c,d,f,i,r,n]}class Wa extends Te{constructor(e){super(),Le(this,e,Ka,Ha,Oe,{square:7,color:0,getGridCoordsFromSquare:8,flipped:9,theme:1,mouseEvents:2,boardSize:3,corner:4})}}const ja=["a","b","c","d","e","f","g","h"],Ga=["8","7","6","5","4","3","2","1"];function Xa(s){s.querySelectorAll("[fixed]").forEach(e=>e.remove())}function Cs(s){return`${ja[s.x]}${Ga[s.y]}`}function Qn(s,e){return Math.abs((s.x-e.x)*(s.y-e.y))===2}function Ps(s,e){return`${Cs(s)}${Cs(e)}`}function Ya(s,e){return!!(Qn(s,e)||Math.abs(s.x-e.x)===Math.abs(s.y-e.y)||s.x===e.x!=(s.y===e.y))}function Zn(s,e,t,i,a,r){let n={x:-1,y:-1},l,o;Qn(e,t)&&i?(Math.abs(t.x-e.x)===2?n={x:t.x,y:e.y}:n={x:e.x,y:t.y},n.y-e.y<0?o=Math.PI+Math.atan((n.x-e.x)/(n.y-e.y)):o=Math.atan((n.x-e.x)/Math.abs(n.y-e.y)),l={x:t.x-Math.sign(t.x-n.x)*(n.x!==t.x?.4:0),y:t.y-Math.sign(t.y-n.y)*(n.y!==t.y?.4:0)}):(t.y-e.y<0?o=Math.PI+Math.atan((t.x-e.x)/(t.y-e.y)):o=Math.atan((t.x-e.x)/Math.abs(t.y-e.y)),l={x:t.x-Math.sin(o)*.4,y:t.y-Math.cos(o)*.4});const u={x:e.x+Math.sin(o)*.4,y:e.y+Math.cos(o)*.4};s.setAttribute("points",`${u.x+.5},${u.y+.5} ${n.x!==-1&&n.y!==-1&&i?`${n.x+.5},${n.y+.5} `:""}${l.x+.5},${l.y+.5}`),s.setAttribute("data-sqID",`${Ps(e,t)}`),r!==void 0&&s.setAttribute("opacity",`${r}`),a!==void 0&&(s.setAttribute("marker-start",`url(#start-${a[0]})`),s.setAttribute("marker-end",`url(#end-${a[0]})`),s.setAttribute("stroke",a))}function Kt(s,e,t,i,a,r){if(!(e===void 0||t.x===-1&&t.y===-1)){if(e.tagName==="circle")e.setAttribute("fill","transparent"),i?e.setAttribute("stroke","red"):a?e.setAttribute("stroke","orange"):r?e.setAttribute("stroke","blue"):e.setAttribute("stroke","green"),s.querySelectorAll(`сircle[cx="${t.x+.5}"][cy="${t.y+.5}"]`).forEach(n=>{e!==void 0&&n!==e&&(n.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))});else if(e.tagName==="polyline"){const n=i?"red":a?"orange":r?"blue":"green";e.setAttribute("stroke",`${n}`),e.setAttribute("marker-start",`url(#start-${n[0]})`),e.setAttribute("marker-end",`url(#end-${n[0]})`),s.querySelectorAll(`polyline[data-sqID="${e.getAttribute("data-sqID")}"]`).forEach(l=>{e instanceof SVGPolylineElement&&l!==e&&(l.getAttribute("stroke")===e.getAttribute("stroke")?e.setAttribute("remove",""):e.hasAttribute("remove")&&e.removeAttribute("remove"))})}}}function Jn(s,e,t,i,a){const r=document.createElementNS("http://www.w3.org/2000/svg","polyline");return Zn(r,s,e,t,i,a),r.setAttribute("fill","none"),r.setAttribute("stroke-width","0.25"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("opacity",a!==void 0?`${a}`:"0.4"),r.setAttribute("marker-start",i?`url(#start-${i[0]})`:"url(#start-g)"),r.setAttribute("marker-end",i?`url(#end-${i[0]})`:"url(#end-g)"),r.setAttribute("stroke",i||"green"),r}function ys(s,e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",`${s.x+.5}`),i.setAttribute("cy",`${s.y+.5}`),i.setAttribute("r","0.465"),i.setAttribute("opacity",t?`${t}`:"0.4"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","0.07"),i.setAttribute("stroke",e??"green"),i}function Qa(s,e,t){e.forEach(i=>{if(i.type==="circle"){const a=jt(i.square),r=ys(a,i.color,i.opacity);s.appendChild(r)}else if(i.type==="arrow"){const a=Jn(jt(i.from),jt(i.to),t,i.color,i.opacity);a.setAttribute("fixed",""),s.appendChild(a)}})}function Zs(s){s.querySelectorAll("circle,polyline").forEach(e=>{e.hasAttribute("fixed")||e.remove()})}function Za(s,e){let{svg:t,flipped:i,enabled:a,settings:r}=e,n=!1,l={x:-1,y:-1},o,u;function c(_,k){const g=s.getBoundingClientRect(),h=i?g.width-(_-g.left):_-g.left,M=i?g.height-(k-g.top):k-g.top;return{x:Math.max(0,Math.min(7,Math.floor(h/(s.clientWidth/8)))),y:Math.max(0,Math.min(7,Math.floor(M/(s.clientHeight/8))))}}function d(_){if(u===void 0||l.x===-1&&l.y===-1)return;const k=c(_.clientX,_.clientY);r.onlyChessMove&&!Ya(l,k)||(o=void 0,u.hasAttribute("remove")&&u.removeAttribute("remove"),l.x===k.x&&l.y===k.y?(Ps(l,k),u instanceof SVGPolylineElement&&(u.remove(),u=ys(k)),Kt(t,u,l,_.shiftKey,_.ctrlKey,_.altKey),t.appendChild(u),t.querySelectorAll(`circle[cx="${l.x+.5}"][cy="${l.y+.5}"]`).forEach(g=>{g!==u&&(o=g,u!==void 0&&g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))})):(u instanceof SVGCircleElement&&u.remove(),o=void 0,t.querySelectorAll(`polyline[data-sqID="${Ps(l,k)}"]`).forEach(g=>{u===void 0||l.x===-1&&l.y===-1||g===u||(o=g,g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove",""))}),u instanceof SVGCircleElement?(u=Jn(l,k,r.knightLShape),Kt(t,u,l,_.shiftKey,_.ctrlKey,_.altKey),t.appendChild(u)):u instanceof SVGPolylineElement&&Zn(u,l,k,r.knightLShape)))}function f(_){_.preventDefault()}function w(_){_.preventDefault(),Kt(t,u,l,_.shiftKey,_.ctrlKey,_.altKey)}function v(_){if(_.button===0)n=!1;else if(_.button===2){if(l.x===-1&&l.y===-1)return;t.querySelectorAll("[remove]").forEach(k=>{k.remove()}),o&&o.remove(),o=void 0,(u==null?void 0:u.tagName)==="circle"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawCircle",{detail:{square:Cs(l),color:u.getAttribute("stroke")}})),(u==null?void 0:u.tagName)==="polyline"&&!u.hasAttribute("remove")&&s.dispatchEvent(new CustomEvent("drawArrow",{detail:{move:u.getAttribute("data-sqID"),color:u.getAttribute("stroke")}})),u=void 0,l={x:-1,y:-1},n=!1,window.removeEventListener("mousemove",d),window.removeEventListener("keydown",w),window.removeEventListener("keyup",w),window.removeEventListener("contextmenu",f)}window.removeEventListener("mouseup",v)}function E(_){if(_.button===0)n=!0,Zs(t),window.addEventListener("mouseup",v);else if(_.button===2&&!n){const k=c(_.clientX,_.clientY);l=k,u=ys(k),Kt(t,u,l,_.shiftKey,_.ctrlKey,_.altKey),o=void 0,t.querySelectorAll(`circle[cx="${k.x+.5}"][cy="${k.y+.5}"]`).forEach(g=>{o=g,u!==void 0&&g.getAttribute("stroke")===u.getAttribute("stroke")&&u.setAttribute("remove","")}),u&&t.appendChild(u),window.addEventListener("mousemove",d),window.addEventListener("mouseup",v),window.addEventListener("keydown",w),window.addEventListener("keyup",w),window.addEventListener("contextmenu",f)}}return a&&s.addEventListener("mousedown",E),{update(_){_.svg!==t&&(t=_.svg),_.enabled!==a&&(a=_.enabled,a?s.addEventListener("mousedown",E):(Zs(t),s.removeEventListener("mousedown",E))),r=_.settings,i=_.flipped}}}function Js(s,e,t){const i=s.slice();return i[8]=e[t],i}function xs(s){let e,t,i,a;return{c(){e=Fe("marker"),t=Fe("path"),i=Fe("marker"),a=Fe("path"),this.h()},l(r){e=Ne(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var n=R(e);t=Ne(n,"path",{fill:!0,d:!0}),R(t).forEach(S),n.forEach(S),i=Ne(r,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,orient:!0,fill:!0});var l=R(i);a=Ne(l,"path",{fill:!0,d:!0}),R(a).forEach(S),l.forEach(S),this.h()},h(){p(t,"fill",s[8]),p(t,"d","M 0 5 v 10 c 0 2.8 2.2 5 5 5 L 6 20 V 0 L 5 0 C 2.2 0 0 2.2 0 5 z"),p(e,"id","start-"+s[8][0]),p(e,"viewBox","0 0 5 20"),p(e,"refX","4"),p(e,"refY","10"),p(e,"markerUnits","strokeWidth"),p(e,"markerWidth","0.5"),p(e,"markerHeight","1"),p(e,"orient","auto"),p(a,"fill",s[8]),p(a,"d","M 9.5 9.5 l -8.7 -5 C 0.5 4.3 0 4.6 0 5 v 10 c 0 0.4 0.5 0.7 0.9 0.5 l 8.7 -5 C 9.9 10.3 9.9 9.7 9.5 9.5 z"),p(i,"id","end-"+s[8][0]),p(i,"viewBox","0 0 10 20"),p(i,"refX","0.2"),p(i,"refY","10"),p(i,"markerUnits","strokeWidth"),p(i,"orient","auto"),p(i,"fill","currentColor")},m(r,n){z(r,e,n),P(e,t),z(r,i,n),P(i,a)},p:ke,d(r){r&&S(e),r&&S(i)}}}function Ja(s){let e,t,i,a=s[2],r=[];for(let n=0;n<a.length;n+=1)r[n]=xs(Js(s,a,n));return{c(){e=Fe("svg"),t=Fe("defs");for(let n=0;n<r.length;n+=1)r[n].c();i=Fe("g"),this.h()},l(n){e=Ne(n,"svg",{xmlns:!0,style:!0,viewBox:!0,class:!0});var l=R(e);t=Ne(l,"defs",{});var o=R(t);for(let u=0;u<r.length;u+=1)r[u].l(o);o.forEach(S),i=Ne(l,"g",{}),R(i).forEach(S),l.forEach(S),this.h()},h(){p(e,"xmlns","http://www.w3.org/2000/svg"),ze(e,"transform","rotate("+(s[1]?"180deg":"0deg")+")"),p(e,"viewBox","0 0 8 8"),p(e,"class","svelte-19gv2n4")},m(n,l){z(n,e,l),P(e,t);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null);P(e,i),s[5](i)},p(n,[l]){if(l&4){a=n[2];let o;for(o=0;o<a.length;o+=1){const u=Js(n,a,o);r[o]?r[o].p(u,l):(r[o]=xs(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}l&2&&ze(e,"transform","rotate("+(n[1]?"180deg":"0deg")+")")},i:ke,o:ke,d(n){n&&S(e),bt(r,n),s[5](null)}}}function xa(s,e,t){let{flipped:i=!1}=e,{svg:a}=e,{knightLShape:r=!1}=e,{tools:n=[]}=e,l=!1;function o(d){l&&(Xa(a),Qa(a,d,r))}$t(()=>{l=!0,o(n)});const u=["green","red","blue","orange"];function c(d){J[d?"unshift":"push"](()=>{a=d,t(0,a)})}return s.$$set=d=>{"flipped"in d&&t(1,i=d.flipped),"svg"in d&&t(0,a=d.svg),"knightLShape"in d&&t(3,r=d.knightLShape),"tools"in d&&t(4,n=d.tools)},s.$$.update=()=>{s.$$.dirty&16&&o(n)},[a,i,u,r,n,c]}class $a extends Te{constructor(e){super(),Le(this,e,xa,Ja,Oe,{flipped:1,svg:0,knightLShape:3,tools:4})}}function $s(s,{delay:e=0,duration:t=400,easing:i=Os,x:a=0,y:r=0,opacity:n=0}={}){const l=getComputedStyle(s),o=+l.opacity,u=l.transform==="none"?"":l.transform,c=o*(1-n),[d,f]=Ns(a),[w,v]=Ns(r);return{delay:e,duration:t,easing:i,css:(E,_)=>`
			transform: ${u} translate(${(1-E)*d}${f}, ${(1-E)*w}${v});
			opacity: ${o-c*_}`}}function Jt(s,{delay:e=0,duration:t=400,easing:i=Os,axis:a="y"}={}){const r=getComputedStyle(s),n=+r.opacity,l=a==="y"?"height":"width",o=parseFloat(r[l]),u=a==="y"?["top","bottom"]:["left","right"],c=u.map(k=>`${k[0].toUpperCase()}${k.slice(1)}`),d=parseFloat(r[`padding${c[0]}`]),f=parseFloat(r[`padding${c[1]}`]),w=parseFloat(r[`margin${c[0]}`]),v=parseFloat(r[`margin${c[1]}`]),E=parseFloat(r[`border${c[0]}Width`]),_=parseFloat(r[`border${c[1]}Width`]);return{delay:e,duration:t,easing:i,css:k=>`overflow: hidden;opacity: ${Math.min(k*20,1)*n};${l}: ${k*o}px;padding-${u[0]}: ${k*d}px;padding-${u[1]}: ${k*f}px;margin-${u[0]}: ${k*w}px;margin-${u[1]}: ${k*v}px;border-${u[0]}-width: ${k*E}px;border-${u[1]}-width: ${k*_}px;`}}function er(s){let e,t,i,a;return{c(){e=F("button"),t=F("div"),this.h()},l(r){e=N(r,"BUTTON",{class:!0});var n=R(e);t=N(n,"DIV",{class:!0}),R(t).forEach(S),n.forEach(S),this.h()},h(){p(t,"class","piece "+s[0]+" svelte-1shuttb"),p(e,"class","svelte-1shuttb")},m(r,n){z(r,e,n),P(e,t),i||(a=ee(e,"click",s[1]),i=!0)},p:ke,i:ke,o:ke,d(r){r&&S(e),i=!1,a()}}}function tr(s,e,t){let{piece:i}=e,{isWhite:a}=e,{showModal:r}=e;const n=Dt(),l=(a?"w":"b")+i.toUpperCase(),o=()=>{n("newPromotion",i),t(2,r=!1)};return s.$$set=u=>{"piece"in u&&t(3,i=u.piece),"isWhite"in u&&t(4,a=u.isWhite),"showModal"in u&&t(2,r=u.showModal)},[l,o,r,i,a]}class sr extends Te{constructor(e){super(),Le(this,e,tr,er,Oe,{piece:3,isWhite:4,showModal:2})}}function en(s,e,t){const i=s.slice();return i[7]=e[t],i}function tn(s){let e,t,i,a,r,n,l=["q","r","b","n"],o=[];for(let c=0;c<4;c+=1)o[c]=sn(en(s,l,c));const u=c=>Y(o[c],1,1,()=>{o[c]=null});return{c(){e=F("div"),t=F("div");for(let c=0;c<4;c+=1)o[c].c();this.h()},l(c){e=N(c,"DIV",{class:!0});var d=R(e);t=N(d,"DIV",{class:!0});var f=R(t);for(let w=0;w<4;w+=1)o[w].l(f);f.forEach(S),d.forEach(S),this.h()},h(){p(t,"class","modal-content svelte-17eh97x"),p(e,"class",r="modal "+s[0]+" svelte-17eh97x")},m(c,d){z(c,e,d),P(e,t);for(let f=0;f<4;f+=1)o[f]&&o[f].m(t,null);n=!0},p(c,d){if(d&6){l=["q","r","b","n"];let f;for(f=0;f<4;f+=1){const w=en(c,l,f);o[f]?(o[f].p(w,d),V(o[f],1)):(o[f]=sn(w),o[f].c(),V(o[f],1),o[f].m(t,null))}for(Be(),f=4;f<4;f+=1)u(f);Ue()}(!n||d&1&&r!==(r="modal "+c[0]+" svelte-17eh97x"))&&p(e,"class",r)},i(c){if(!n){for(let d=0;d<4;d+=1)V(o[d]);kt(()=>{n&&(a&&a.end(1),i=ui(t,$s,{x:100,duration:300}),i.start())}),n=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<4;d+=1)Y(o[d]);i&&i.invalidate(),a=fi(t,$s,{x:-200,duration:100}),n=!1},d(c){c&&S(e),bt(o,c),c&&a&&a.end()}}}function sn(s){let e,t,i,a;function r(o){s[4](o)}function n(o){s[5](o)}let l={piece:s[7]};return s[2]!==void 0&&(l.isWhite=s[2]),s[1]!==void 0&&(l.showModal=s[1]),e=new sr({props:l}),J.push(()=>le(e,"isWhite",r)),J.push(()=>le(e,"showModal",n)),e.$on("newPromotion",s[6]),{c(){ge(e.$$.fragment)},l(o){be(e.$$.fragment,o)},m(o,u){pe(e,o,u),a=!0},p(o,u){const c={};!t&&u&4&&(t=!0,c.isWhite=o[2],oe(()=>t=!1)),!i&&u&2&&(i=!0,c.showModal=o[1],oe(()=>i=!1)),e.$set(c)},i(o){a||(V(e.$$.fragment,o),a=!0)},o(o){Y(e.$$.fragment,o),a=!1},d(o){me(e,o)}}}function nr(s){let e,t,i=s[1]&&tn(s);return{c(){i&&i.c(),e=Pe()},l(a){i&&i.l(a),e=Pe()},m(a,r){i&&i.m(a,r),z(a,e,r),t=!0},p(a,[r]){a[1]?i?(i.p(a,r),r&2&&V(i,1)):(i=tn(a),i.c(),V(i,1),i.m(e.parentNode,e)):i&&(Be(),Y(i,1,1,()=>{i=null}),Ue())},i(a){t||(V(i),t=!0)},o(a){Y(i),t=!1},d(a){i&&i.d(a),a&&S(e)}}}function ir(s,e,t){let i=!1,a,{className:r=""}=e;function n(c){t(1,i=!0),c?t(2,a=!0):t(2,a=!1)}function l(c){a=c,t(2,a)}function o(c){i=c,t(1,i)}function u(c){We.call(this,s,c)}return s.$$set=c=>{"className"in c&&t(0,r=c.className)},[r,i,a,n,l,o,u]}class ar extends Te{constructor(e){super(),Le(this,e,ir,nr,Oe,{className:0,openPromotionModal:3})}get openPromotionModal(){return this.$$.ctx[3]}}const rr=""+new URL("../assets/move.e4d827fe.wav",import.meta.url).href,lr=""+new URL("../assets/capture.3dff493a.wav",import.meta.url).href,or=""+new URL("../assets/castle.dcf4b2c5.wav",import.meta.url).href,ur=""+new URL("../assets/undo.b4184324.mp3",import.meta.url).href;function nn(s){let e,t,i,a;return{c(){e=F("audio"),t=F("track"),i=F("source"),this.h()},l(r){e=N(r,"AUDIO",{preload:!0});var n=R(e);t=N(n,"TRACK",{kind:!0}),i=N(n,"SOURCE",{src:!0}),n.forEach(S),this.h()},h(){p(t,"kind","captions"),es(i.src,a=rr)||p(i,"src",a),p(e,"preload","auto")},m(r,n){z(r,e,n),P(e,t),P(e,i),s[3](e)},p:ke,d(r){r&&S(e),s[3](null)}}}function an(s){let e,t,i,a;return{c(){e=F("audio"),t=F("track"),i=F("source"),this.h()},l(r){e=N(r,"AUDIO",{preload:!0});var n=R(e);t=N(n,"TRACK",{kind:!0}),i=N(n,"SOURCE",{src:!0}),n.forEach(S),this.h()},h(){p(t,"kind","captions"),es(i.src,a=lr)||p(i,"src",a),p(e,"preload","auto")},m(r,n){z(r,e,n),P(e,t),P(e,i),s[4](e)},p:ke,d(r){r&&S(e),s[4](null)}}}function rn(s){let e,t,i,a;return{c(){e=F("audio"),t=F("track"),i=F("source"),this.h()},l(r){e=N(r,"AUDIO",{preload:!0});var n=R(e);t=N(n,"TRACK",{kind:!0}),i=N(n,"SOURCE",{src:!0}),n.forEach(S),this.h()},h(){p(t,"kind","captions"),es(i.src,a=or)||p(i,"src",a),p(e,"preload","auto")},m(r,n){z(r,e,n),P(e,t),P(e,i),s[5](e)},p:ke,d(r){r&&S(e),s[5](null)}}}function ln(s){let e,t,i,a;return{c(){e=F("audio"),t=F("track"),i=F("source"),this.h()},l(r){e=N(r,"AUDIO",{preload:!0});var n=R(e);t=N(n,"TRACK",{kind:!0}),i=N(n,"SOURCE",{src:!0}),n.forEach(S),this.h()},h(){p(t,"kind","captions"),es(i.src,a=ur)||p(i,"src",a),p(e,"preload","auto")},m(r,n){z(r,e,n),P(e,t),P(e,i),s[6](e)},p:ke,d(r){r&&S(e),s[6](null)}}}function fr(s){let e,t,i,a,r=s[0].MOVE&&nn(s),n=s[0].CAPTURE&&an(s),l=s[0].CASTLE&&rn(s),o=s[0].UNDO&&ln(s);return{c(){r&&r.c(),e=W(),n&&n.c(),t=W(),l&&l.c(),i=W(),o&&o.c(),a=Pe()},l(u){r&&r.l(u),e=j(u),n&&n.l(u),t=j(u),l&&l.l(u),i=j(u),o&&o.l(u),a=Pe()},m(u,c){r&&r.m(u,c),z(u,e,c),n&&n.m(u,c),z(u,t,c),l&&l.m(u,c),z(u,i,c),o&&o.m(u,c),z(u,a,c)},p(u,[c]){u[0].MOVE?r?r.p(u,c):(r=nn(u),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0].CAPTURE?n?n.p(u,c):(n=an(u),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null),u[0].CASTLE?l?l.p(u,c):(l=rn(u),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),u[0].UNDO?o?o.p(u,c):(o=ln(u),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:ke,o:ke,d(u){r&&r.d(u),u&&S(e),n&&n.d(u),u&&S(t),l&&l.d(u),u&&S(i),o&&o.d(u),u&&S(a)}}}function cr(s,e,t){let{settings:i}=e;const a={MOVE:void 0,CAPTURE:void 0,CASTLE:void 0,UNDO:void 0},r=()=>{a.CASTLE&&(a.CASTLE.pause(),t(1,a.CASTLE.currentTime=0,a)),a.MOVE&&(a.MOVE.pause(),t(1,a.MOVE.currentTime=0,a)),a.CAPTURE&&(a.CAPTURE.pause(),t(1,a.CAPTURE.currentTime=0,a)),a.UNDO&&(a.UNDO.pause(),t(1,a.UNDO.currentTime=0,a))},n=f=>f===void 0||i[f];function l(f){switch(r(),f){case"MOVE":a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CAPTURE":a.CAPTURE&&n("CAPTURE")?a.CAPTURE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"CASTLE":a.CASTLE&&n("CASTLE")?a.CASTLE.play():a.MOVE&&n("MOVE")&&a.MOVE.play();break;case"UNDO":a.UNDO&&n("UNDO")?(t(1,a.UNDO.volume=.3,a),a.UNDO.play()):a.MOVE&&n("MOVE")&&a.MOVE.play();break}}function o(f){J[f?"unshift":"push"](()=>{a.MOVE=f,t(1,a)})}function u(f){J[f?"unshift":"push"](()=>{a.CAPTURE=f,t(1,a)})}function c(f){J[f?"unshift":"push"](()=>{a.CASTLE=f,t(1,a)})}function d(f){J[f?"unshift":"push"](()=>{a.UNDO=f,t(1,a)})}return s.$$set=f=>{"settings"in f&&t(0,i=f.settings)},[i,a,l,o,u,c,d]}let dr=class extends Te{constructor(e){super(),Le(this,e,cr,fr,Oe,{settings:0,playMoveSound:2})}get playMoveSound(){return this.$$.ctx[2]}};const on=""+new URL("../assets/standard.97995bf9.svg",import.meta.url).href,un=""+new URL("../assets/darkBlue.02863507.svg",import.meta.url).href;function hr(s,e){let{mouseEvents:t}=e,i=e.curScale,a,r,n;function l(c){c.stopPropagation(),s.dispatchEvent(new CustomEvent("resizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-a)/3)),Math.max(0,Math.min(100,n+(c.pageY-r)/3))))}}))}function o(c){c.stopPropagation(),s.dispatchEvent(new CustomEvent("endResizing",{detail:{scale:Math.round(Math.min(Math.max(0,Math.min(100,n+(c.pageX-a)/3)),Math.max(0,Math.min(100,n+(c.pageY-r)/3))))}})),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",o)}function u(c){t&&(c.stopPropagation(),c.button===0&&(a=c.pageX,r=c.pageY,n=i,window.addEventListener("pointermove",l),window.addEventListener("pointerup",o)))}return s.addEventListener("pointerdown",u),{update(c){i=c.curScale,t!==c.mouseEvents&&(t=c.mouseEvents)},destroy(){s.removeEventListener("mousedown",u)}}}function gr(s){let e,t,i,a,r,n,l;return{c(){e=F("div"),t=Fe("svg"),i=Fe("path"),this.h()},l(o){e=N(o,"DIV",{style:!0,class:!0});var u=R(e);t=Ne(u,"svg",{xmlns:!0,viewBox:!0,fill:!0});var c=R(t);i=Ne(c,"path",{d:!0}),R(i).forEach(S),c.forEach(S),u.forEach(S),this.h()},h(){p(i,"d","M 5 1 Q 6 0 6 2 L 6 4 Q 6 6 4 6 L 2 6 Q 0 6 1 5 Z"),p(t,"xmlns","http://www.w3.org/2000/svg"),p(t,"viewBox","0 0 16 16"),p(t,"fill","currentColor"),ze(e,"color",je.colors[s[0].state.board.boardTheme].black),p(e,"class",a=Xt(s[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")},m(o,u){z(o,e,u),P(e,t),P(t,i),n||(l=[ee(e,"pointerdown",Vn(s[3])),As(r=hr.call(null,e,{mouseEvents:s[1],curScale:s[0].state.board.scale})),ee(e,"resizing",s[4]),ee(e,"endResizing",s[5])],n=!0)},p(o,[u]){u&1&&ze(e,"color",je.colors[o[0].state.board.boardTheme].black),u&2&&a!==(a=Xt(o[1]?"cursor-nwse-resize":"")+" svelte-hpgpmj")&&p(e,"class",a),r&&Ts(r.update)&&u&3&&r.update.call(null,{mouseEvents:o[1],curScale:o[0].state.board.scale})},i:ke,o:ke,d(o){o&&S(e),n=!1,at(l)}}}function br(s,e,t){const i=Dt();let{chessboard:a}=e,{mouseEvents:r=!0}=e;function n(u){We.call(this,s,u)}const l=u=>i("resizing",u.detail.scale),o=u=>i("endResizing",u.detail.scale);return s.$$set=u=>{"chessboard"in u&&t(0,a=u.chessboard),"mouseEvents"in u&&t(1,r=u.mouseEvents)},[a,r,i,n,l,o]}class pr extends Te{constructor(e){super(),Le(this,e,br,gr,Oe,{chessboard:0,mouseEvents:1})}}function fn(s,e,t){const i=s.slice();return i[86]=e[t],i}function cn(s,e,t){const i=s.slice();return i[89]=e[t],i}function dn(s){let e=[],t=new Map,i,a,r=s[6].state.pieces;const n=l=>l[89];for(let l=0;l<r.length;l+=1){let o=cn(s,r,l),u=n(o);t.set(u,e[l]=hn(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Pe()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Pe()},m(l,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(l,o);z(l,i,o),a=!0},p(l,o){o[0]&905292&&(r=l[6].state.pieces,Be(),e=Hn(e,o,n,1,l,r,t,i.parentNode,Kn,hn,i,cn),Ue())},i(l){if(!a){for(let o=0;o<r.length;o+=1)V(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)Y(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&S(i)}}}function hn(s,e){let t,i,a;function r(){return e[60](e[89])}function n(){return e[61](e[89])}function l(...c){return e[62](e[89],...c)}function o(){return e[64](e[89])}function u(){return e[67](e[89])}return i=new Yn({props:{square:e[89].square,name:e[89].name,boardSize:e[6].state.board.size,mouseEvents:e[6].state.board.mouseEvents,legalState:e[6].state.legal,draggableState:e[6].state.draggable,selectableState:e[6].state.selectable,movableState:e[6].state.movable,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped}}),i.$on("move",e[14]),i.$on("clicked",r),i.$on("startMoving",n),i.$on("squareover",l),i.$on("endDragging",e[63]),i.$on("select",o),i.$on("canceled",e[65]),i.$on("deselect",e[66]),i.$on("captured",u),{key:s,first:null,c(){t=Pe(),ge(i.$$.fragment),this.h()},l(c){t=Pe(),be(i.$$.fragment,c),this.h()},h(){this.first=t},m(c,d){z(c,t,d),pe(i,c,d),a=!0},p(c,d){e=c;const f={};d[0]&64&&(f.square=e[89].square),d[0]&64&&(f.name=e[89].name),d[0]&64&&(f.boardSize=e[6].state.board.size),d[0]&64&&(f.mouseEvents=e[6].state.board.mouseEvents),d[0]&64&&(f.legalState=e[6].state.legal),d[0]&64&&(f.draggableState=e[6].state.draggable),d[0]&64&&(f.selectableState=e[6].state.selectable),d[0]&64&&(f.movableState=e[6].state.movable),d[0]&64&&(f.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),d[0]&64&&(f.flipped=e[6].flipped),i.$set(f)},i(c){a||(V(i.$$.fragment,c),a=!0)},o(c){Y(i.$$.fragment,c),a=!1},d(c){c&&S(t),me(i,c)}}}function gn(s){let e,t;return e=new Yn({props:{isGhost:!0,boardSize:s[6].state.board.size,square:s[6].ghostPiece.square,name:s[6].ghostPiece.name,getGridCoordsFromSquare:s[6].getGridCoordsFromSquare,flipped:s[6].flipped}}),{c(){ge(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,a){pe(e,i,a),t=!0},p(i,a){const r={};a[0]&64&&(r.boardSize=i[6].state.board.size),a[0]&64&&(r.square=i[6].ghostPiece.square),a[0]&64&&(r.name=i[6].ghostPiece.name),a[0]&64&&(r.getGridCoordsFromSquare=i[6].getGridCoordsFromSquare),a[0]&64&&(r.flipped=i[6].flipped),e.$set(r)},i(i){t||(V(e.$$.fragment,i),t=!0)},o(i){Y(e.$$.fragment,i),t=!1},d(i){me(e,i)}}}function bn(s){let e=[],t=new Map,i,a,r=[...s[6].state.markedSquares];const n=l=>l[86];for(let l=0;l<r.length;l+=1){let o=fn(s,r,l),u=n(o);t.set(u,e[l]=pn(u,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();i=Pe()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);i=Pe()},m(l,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(l,o);z(l,i,o),a=!0},p(l,o){o[0]&1048642&&(r=[...l[6].state.markedSquares],Be(),e=Hn(e,o,n,1,l,r,t,i.parentNode,Kn,pn,i,fn),Ue())},i(l){if(!a){for(let o=0;o<r.length;o+=1)V(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)Y(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&S(i)}}}function pn(s,e){let t,i,a;return i=new Wa({props:{boardSize:e[6].state.board.size,theme:e[6].state.board.boardTheme,square:e[86].square,color:e[86].color,getGridCoordsFromSquare:e[6].getGridCoordsFromSquare,flipped:e[6].flipped,mouseEvents:e[6].state.board.mouseEvents,corner:e[20](e[86].square)}}),i.$on("dragenter",e[68]),{key:s,first:null,c(){t=Pe(),ge(i.$$.fragment),this.h()},l(r){t=Pe(),be(i.$$.fragment,r),this.h()},h(){this.first=t},m(r,n){z(r,t,n),pe(i,r,n),a=!0},p(r,n){e=r;const l={};n[0]&64&&(l.boardSize=e[6].state.board.size),n[0]&64&&(l.theme=e[6].state.board.boardTheme),n[0]&64&&(l.square=e[86].square),n[0]&64&&(l.color=e[86].color),n[0]&64&&(l.getGridCoordsFromSquare=e[6].getGridCoordsFromSquare),n[0]&64&&(l.flipped=e[6].flipped),n[0]&64&&(l.mouseEvents=e[6].state.board.mouseEvents),n[0]&64&&(l.corner=e[20](e[86].square)),i.$set(l)},i(r){a||(V(i.$$.fragment,r),a=!0)},o(r){Y(i.$$.fragment,r),a=!1},d(r){r&&S(t),me(i,r)}}}function mn(s){let e,t;return e=new oa({props:{theme:s[6].state.board.boardTheme,flipped:s[6].flipped}}),{c(){ge(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,a){pe(e,i,a),t=!0},p(i,a){const r={};a[0]&64&&(r.theme=i[6].state.board.boardTheme),a[0]&64&&(r.flipped=i[6].flipped),e.$set(r)},i(i){t||(V(e.$$.fragment,i),t=!0)},o(i){Y(e.$$.fragment,i),t=!1},d(i){me(e,i)}}}function vn(s){let e,t;return e=new pr({props:{chessboard:s[6],mouseEvents:s[6].state.board.mouseEvents}}),e.$on("resizing",s[69]),{c(){ge(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,a){pe(e,i,a),t=!0},p(i,a){const r={};a[0]&64&&(r.chessboard=i[6]),a[0]&64&&(r.mouseEvents=i[6].state.board.mouseEvents),e.$set(r)},i(i){t||(V(e.$$.fragment,i),t=!0)},o(i){Y(e.$$.fragment,i),t=!1},d(i){me(e,i)}}}function _n(s){let e,t,i;function a(n){s[70](n)}let r={flipped:s[6].flipped,tools:s[6].state.drawTools.tools,knightLShape:s[6].state.drawTools.settings.knightLShape};return s[8]!==void 0&&(r.svg=s[8]),e=new $a({props:r}),J.push(()=>le(e,"svg",a)),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){pe(e,n,l),i=!0},p(n,l){const o={};l[0]&64&&(o.flipped=n[6].flipped),l[0]&64&&(o.tools=n[6].state.drawTools.tools),l[0]&64&&(o.knightLShape=n[6].state.drawTools.settings.knightLShape),!t&&l[0]&256&&(t=!0,o.svg=n[8],oe(()=>t=!1)),e.$set(o)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){Y(e.$$.fragment,n),i=!1},d(n){me(e,n)}}}function En(s){let e,t,i={};return e=new ar({props:i}),s[71](e),e.$on("newPromotion",s[17]),{c(){ge(e.$$.fragment)},l(a){be(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const n={};e.$set(n)},i(a){t||(V(e.$$.fragment,a),t=!0)},o(a){Y(e.$$.fragment,a),t=!1},d(a){s[71](null),me(e,a)}}}function kn(s){let e,t,i={settings:s[6].state.sounds.settings};return e=new dr({props:i}),s[76](e),{c(){ge(e.$$.fragment)},l(a){be(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const n={};r[0]&64&&(n.settings=a[6].state.sounds.settings),e.$set(n)},i(a){t||(V(e.$$.fragment,a),t=!0)},o(a){Y(e.$$.fragment,a),t=!1},d(a){s[76](null),me(e,a)}}}function mr(s){let e,t,i,a,r,n,l,o,u,c,d,f,w,v,E,_,k,g=s[6].state.board.startFen&&dn(s),h=s[6].ghostPiece&&gn(s),M=s[6].highlightEnabled&&bn(s),C=s[6].state.board.notation&&s[11]&&mn(s),y=s[6].state.board.resizible&&s[11]&&vn(s),q=s[6].state.drawTools.enabled&&_n(s),D=s[6].legalEnabled&&En(s),A=s[6].soundsEnabled&&kn(s);return{c(){e=F("div"),t=F("div"),i=F("div"),g&&g.c(),r=W(),h&&h.c(),n=W(),M&&M.c(),l=W(),C&&C.c(),o=W(),y&&y.c(),u=W(),q&&q.c(),c=W(),D&&D.c(),w=W(),A&&A.c(),v=Pe(),this.h()},l(O){e=N(O,"DIV",{class:!0});var U=R(e);t=N(U,"DIV",{class:!0,style:!0});var X=R(t);i=N(X,"DIV",{style:!0,class:!0});var fe=R(i);g&&g.l(fe),fe.forEach(S),r=j(X),h&&h.l(X),n=j(X),M&&M.l(X),l=j(X),C&&C.l(X),o=j(X),y&&y.l(X),u=j(X),q&&q.l(X),c=j(X),D&&D.l(X),X.forEach(S),U.forEach(S),w=j(O),A&&A.l(O),v=Pe(),this.h()},h(){ze(i,"width","100%"),ze(i,"height","100%"),p(i,"class",a=Xt(s[21](s[6].whiteToMove))+" svelte-sse5i8"),p(t,"class",d="board text-sm "+s[0]+(!s[6].legalEnabled&&s[6].selectedPiece?" pointer":"")+" svelte-sse5i8"),ze(t,"--boardTheme","url("+(s[6].state.board.boardTheme==="standard"?on:un)+")"),p(e,"class","boardWrapper svelte-sse5i8")},m(O,U){z(O,e,U),P(e,t),P(t,i),g&&g.m(i,null),P(t,r),h&&h.m(t,null),P(t,n),M&&M.m(t,null),P(t,l),C&&C.m(t,null),P(t,o),y&&y.m(t,null),P(t,u),q&&q.m(t,null),P(t,c),D&&D.m(t,null),s[74](t),s[75](e),z(O,w,U),A&&A.m(O,U),z(O,v,U),E=!0,_||(k=[ee(t,"pointerdown",s[13]),ee(t,"contextmenu",Rs(s[58])),ee(t,"drag",Rs(s[59])),As(f=Za.call(null,t,{svg:s[8],flipped:s[6].flipped,enabled:s[6].state.drawTools.enabled&&s[6].state.board.mouseEvents,settings:s[6].state.drawTools.settings})),ee(t,"drawCircle",s[72]),ee(t,"drawArrow",s[73])],_=!0)},p(O,U){O[6].state.board.startFen?g?(g.p(O,U),U[0]&64&&V(g,1)):(g=dn(O),g.c(),V(g,1),g.m(i,null)):g&&(Be(),Y(g,1,1,()=>{g=null}),Ue()),(!E||U[0]&64&&a!==(a=Xt(O[21](O[6].whiteToMove))+" svelte-sse5i8"))&&p(i,"class",a),O[6].ghostPiece?h?(h.p(O,U),U[0]&64&&V(h,1)):(h=gn(O),h.c(),V(h,1),h.m(t,n)):h&&(Be(),Y(h,1,1,()=>{h=null}),Ue()),O[6].highlightEnabled?M?(M.p(O,U),U[0]&64&&V(M,1)):(M=bn(O),M.c(),V(M,1),M.m(t,l)):M&&(Be(),Y(M,1,1,()=>{M=null}),Ue()),O[6].state.board.notation&&O[11]?C?(C.p(O,U),U[0]&2112&&V(C,1)):(C=mn(O),C.c(),V(C,1),C.m(t,o)):C&&(Be(),Y(C,1,1,()=>{C=null}),Ue()),O[6].state.board.resizible&&O[11]?y?(y.p(O,U),U[0]&2112&&V(y,1)):(y=vn(O),y.c(),V(y,1),y.m(t,u)):y&&(Be(),Y(y,1,1,()=>{y=null}),Ue()),O[6].state.drawTools.enabled?q?(q.p(O,U),U[0]&64&&V(q,1)):(q=_n(O),q.c(),V(q,1),q.m(t,c)):q&&(Be(),Y(q,1,1,()=>{q=null}),Ue()),O[6].legalEnabled?D?(D.p(O,U),U[0]&64&&V(D,1)):(D=En(O),D.c(),V(D,1),D.m(t,null)):D&&(Be(),Y(D,1,1,()=>{D=null}),Ue()),(!E||U[0]&65&&d!==(d="board text-sm "+O[0]+(!O[6].legalEnabled&&O[6].selectedPiece?" pointer":"")+" svelte-sse5i8"))&&p(t,"class",d),(!E||U[0]&64)&&ze(t,"--boardTheme","url("+(O[6].state.board.boardTheme==="standard"?on:un)+")"),f&&Ts(f.update)&&U[0]&320&&f.update.call(null,{svg:O[8],flipped:O[6].flipped,enabled:O[6].state.drawTools.enabled&&O[6].state.board.mouseEvents,settings:O[6].state.drawTools.settings}),O[6].soundsEnabled?A?(A.p(O,U),U[0]&64&&V(A,1)):(A=kn(O),A.c(),V(A,1),A.m(v.parentNode,v)):A&&(Be(),Y(A,1,1,()=>{A=null}),Ue())},i(O){E||(V(g),V(h),V(M),V(C),V(y),V(q),V(D),V(A),E=!0)},o(O){Y(g),Y(h),Y(M),Y(C),Y(y),Y(q),Y(D),Y(A),E=!1},d(O){O&&S(e),g&&g.d(),h&&h.d(),M&&M.d(),C&&C.d(),y&&y.d(),q&&q.d(),D&&D.d(),s[74](null),s[75](null),O&&S(w),A&&A.d(O),O&&S(v),_=!1,at(k)}}}function vr(s,e,t){let i,{config:a}=e,{className:r=""}=e;const n=new $i(a),l=Dt();let o,u,c,d,f,w="",v=!1,E=!1;const _=m=>{n.clearAllSquares(m),m===H.LEGAL&&n.clearAllSquares(H.LEGALHOVER),m===H.PREMOVE&&n.clearAllSquares(H.PREMOVEHOVER),t(6,n)},k=(m,T)=>{g(Ht(T))&&(n.highlightSquare(m,T),t(6,n))},g=m=>n.highlightEnabled&&(m===void 0||n.highlightSettings[typeof m=="string"?m:Ht(m)]),h=m=>{if(!n.selectableEnabled&&n.draggableEnabled&&he(m),!n.selectableEnabled)return;M(!0);const T=n.getPieceFromSquare(m);T!==void 0&&(t(6,n.selectedPiece=T,n),he())},M=(m=!0)=>{_(H.SELECT),_(H.LEGAL),_(H.PREMOVE),t(6,n.selectedPiece=void 0,n),m&&(_(H.NEXTMOVE),t(6,n.currentPreMove="",n))},C=m=>{_(H.CHECK),m&&n.legalEnabled&&k(m,H.CHECK),t(6,n)},y=()=>{_(H.CHECK)},q=m=>{n.flipBoard(m),t(6,n)},D=(m,T)=>{m.forEach(Z=>n.highlightSquare(Z,T)),t(6,n)},A=(m,T=!0,Z=H.MOVE)=>{m.length<4||!g(Ht(Z))||(T&&_(Z),D([m.substring(0,2),m.substring(2,4)],Z))},O=(m,T,Z=H.MOVE)=>{const ne=[];T&&_(Z),m.forEach(Ce=>{Ce.length<4||(ne.push(Ce.substring(0,2)),ne.push(Ce.substring(2,4)))}),D(ne,Z)},U=m=>{k(m.substring(2,4),H.LEGAL)},X=(m,T,Z=H.LEGAL)=>{_(Z),g(Ht(Z))&&(m.forEach(ne=>{ne.length<4||(T===void 0||ne.substring(0,2)===T)&&n.highlightSquare(ne.substring(2,4),Z)}),t(6,n))},fe=(m,T=!0)=>{n.makeMove(m),T&&A(m),t(6,n)},Ae=m=>{var T;m&&(n.removePiece(m),n.ghostPieceEnabled&&((T=n.ghostPiece)==null?void 0:T.square)===m&&(n.removeGhostPiece(),t(6,n)),t(6,n))},Se=m=>n.whiteToMove&&m[0]==="w"||!n.whiteToMove&&m[0]==="b",ie=(m=!1)=>{n.legalEnabled&&(n.state.callbacks.getWhiteToMove&&t(6,n.whiteToMove=n.state.callbacks.getWhiteToMove(),n),n.state.callbacks.getPreMoves&&n.preMovesEnabled?t(6,n.preMoves=n.state.callbacks.getPreMoves(),n):t(6,n.preMoves=[],n),n.state.callbacks.getLegalMoves&&n.state.legal.enabled?t(6,n.legalMoves=n.state.callbacks.getLegalMoves(),n):t(6,n.legalMoves=[],n),m&&he(),n.state.callbacks.getInCheck&&n.state.callbacks.getInCheck()?n.whiteToMove?C(n.getWhiteKingSquare()):C(n.getBlackKingSquare()):y(),n.state.callbacks.getLastMove?(t(6,n.lastMove=n.state.callbacks.getLastMove(),n),A(n.lastMove)):_(H.MOVE))},x=m=>{var T;n.soundsEnabled&&d&&((T=d.playMoveSound)==null||T.call(d,m))},B=m=>{n.setGhostPiece(m),t(6,n)},Q=()=>{n.removeGhostPiece(),t(6,n)},G=m=>{if(m.substring(0,2)===m.substring(2,4))return;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(m);const T=n.selectedPiece?{...n.selectedPiece}:void 0;M(!1);const Z=n.getRookMoveIfIsCastling(m),ne=n.getCapturedPawnSquareIfIsEnPassant(m);Z&&n.state.legal.settings.allowCastling?(fe(Z,!1),x("CASTLE")):ne&&n.state.legal.settings.allowEnPassant?(Ae(ne),x("CAPTURE")):n.isCapture(m)?x("CAPTURE"):x("MOVE"),Q(),fe(m),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(m),ie(!1);const Ce=n.getPieceFromSquare(T==null?void 0:T.square);if(Ce&&T&&Ce.square===T.square&&Ce.name===(T==null?void 0:T.name)?t(6,n.selectedPiece=Ce,n):t(6,n.selectedPiece=void 0,n),n.selectedPiece!==void 0&&he(),n.legalEnabled&&n.preMovesEnabled&&n.currentPreMove!==""){if(n.legalMoves.includes(n.currentPreMove)){const Ke=n.currentPreMove;di().then(()=>{G(Ke)})}t(6,n.currentPreMove="",n),_(H.NEXTMOVE)}},ce=m=>{!n.legalEnabled||!n.preMovesEnabled||!n.movableEnabled||(M(!1),A(m,!0,H.NEXTMOVE),t(6,n.currentPreMove=m,n),l("nextMove",{move:m}))},ae=m=>{var ne;const T=n.getPieceFromSquare(m.substring(0,2));if(!T)return;const Z=T.name[0]==="w"?se.WHITE:se.BLACK;(ne=f.openPromotionModal)==null||ne.call(f,Z===se.WHITE),w=m,v=n.isCapture(m),n.makeMove(m),_(H.LEGAL),_(H.SELECT),A(m)},b=(m,T)=>{n.clearSquare(m,T),t(6,n)},K=()=>{n.clearAllPieces(),t(6,n)},te=(m,T)=>{n.setPiece(m,T),t(6,n)},Ee=(m,T)=>{var ne;const Z=(ne=n.getPieceFromSquare(m))==null?void 0:ne.name;Z&&(T!==void 0?n.setPiece(m,`${T===se.WHITE?"w":"b"}${Z[1]}`):n.setPiece(m,`${Z[0]==="w"?"b":"w"}${Z[1]}`),t(6,n))},de=(m,T)=>{const Z=Math.floor(m/n.state.board.size*8),ne=Math.floor(T/n.state.board.size*8),Ce=n.flipped?7-Z:Z,Ke=n.flipped?ne:7-ne;if(Ce<0||Ce>7||Ke<0||Ke>7)return;const De=Object.keys(n.letters)[Ce],ps=(Ke+1).toString();return`${De}${ps}`},Ie=m=>{if(!n.state.board.mouseEvents)return;if(m.button===2){M();return}if(!n.movableEnabled)return;const T=o.getBoundingClientRect(),Z=m.clientX-T.left,ne=m.clientY-T.top,Ce=de(Z,ne);if(!Ce)return;const Ke=n.getPieceFromSquare(Ce);if(l("squareClick",{square:Ce,piece:Ke?Ke.name:void 0}),!n.selectableEnabled&&!n.draggableEnabled){M();return}if(!n.selectedPiece||n.selectedPiece.square===Ce)return;const De=n.selectedPiece.square+Ce;if(!n.legalEnabled){G(De),M();return}if(!Se(n.selectedPiece.name)){n.preMovesEnabled&&n.preMoves.includes(De)&&(n.isPromotion(De)?ce(`${De}q`):ce(De)),M(!1);return}(Ke===void 0||Ke.name[0]!==n.selectedPiece.name[0])&&Se(n.selectedPiece.name)&&(n.isPromotion(De)&&n.legalMoves.includes(De)?ae(De):n.legalMoves.includes(De)&&G(De),M())},Me=m=>{const T=m.detail;n.legalEnabled?n.isPromotion(T)&&n.legalMoves.includes(`${T}q`)?ae(T):n.legalMoves.includes(T)?G(T):n.preMovesEnabled&&n.preMoves.includes(T)?n.isPromotion(T)?ce(`${T}q`):ce(T):M():G(T),_(H.LEGAL),_(H.PREMOVE),t(6,n)},he=m=>{var T;if(n.selectableEnabled||n.draggableEnabled){const Z=n.getPieceFromSquare(m??((T=n.selectedPiece)==null?void 0:T.square));if(!Z||(n.selectableEnabled&&k(Z.square,H.SELECT),!n.legalEnabled))return;_(H.LEGAL),_(H.PREMOVE),Se(Z.name)&&X(n.legalMoves,Z.square),Se(Z.name)||X(n.preMoves,Z.square,H.PREMOVE)}},ye=(m,T=!0,Z="MOVE")=>{if(n.updatePiecesWithFen(m),T&&M(),_(),Q(),ie(!1),t(6,n.currentPreMove="",n),n.state.callbacks.getLastMove){const ne=n.state.callbacks.getLastMove();t(6,n.lastMove=ne,n),Z!==!1&&(Z!=="MOVE"?x(Z):n.isCastling(ne)?x("CASTLE"):x(Z)),A(ne)}else Z!==!1&&x(Z);he(),t(6,n)},xe=()=>n.getShortFEN(),Re=m=>{!m||n.state.board.size===m||(t(6,n.state.board.size=m,n),E&&n.state.board.resizible&&document.body.style.setProperty("--boardSize",`${n.state.board.size}px`))},Ge=m=>{!m||n.state.board.scale===m||(t(6,n.state.board.scale=m,n),E&&n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`))},Qe=m=>{var T;return(T=n.getPieceFromSquare(m))==null?void 0:T.name},Ve=m=>{t(6,n.state.drawTools.tools=m,n)},$e=m=>{t(6,n.state.drawTools.tools=n.state.drawTools.tools.filter(T=>m?(!m.type||T.type!==m.type)&&(!m.from||T.type==="arrow"&&T.from!==m.from||T.type==="circle"&&T.square!==m.from)&&(!m.to||T.type==="arrow"&&T.to!==m.to)&&(m.fixed===void 0||T.fixed!==m.fixed):!1),n)},At=m=>{m===!1?t(6,n.state.movable.enabled=!1,n):(t(6,n.state.movable.enabled=!0,n),t(6,n.state.movable.color=m===!0?se.BOTH:m,n))},Mt=m=>{m.length<4||(t(6,n.lastMove=m,n),A(m))},Tt=m=>{t(6,n.legalMoves=m,n)},rt=m=>{t(6,n.preMoves=m,n)},Lt=()=>n.state,wt=m=>{t(6,n.state=m,n),_(),ie(!1),A(n.lastMove),A(n.currentPreMove,!0,H.NEXTMOVE),he()},et=m=>{m!==void 0&&(n.setConfigSettings(m),t(6,n),wt(n.state))},Ot=m=>m.getConfig(),mt=(m,T)=>{n.legalEnabled&&(Se(T.name)&&n.legalHover(m.detail.square),!Se(T.name)&&n.preMovesEnabled&&n.legalHover(m.detail.square,H.PREMOVE)),t(6,n)},St=m=>{n.ghostPieceEnabled&&B(m),_(H.SELECT)},Ze=m=>{const T=n.getPieceFromSquare(w.substring(2,4));if(!T)return;const Z=T.name[0]+m.detail.toUpperCase(),ne=w+m.detail;n.state.callbacks.beforeMove&&n.state.callbacks.beforeMove(ne),n.setPiece(T.square,Z),t(6,n),x(v?"CAPTURE":"MOVE"),n.state.callbacks.afterMove&&n.state.callbacks.afterMove(ne),ie()},Ct=m=>{if(!n.selectedPiece)return;const T=n.selectedPiece.square+m;n.legalEnabled?n.isPromotion(T)&&n.legalMoves.includes(`${T}q`)?ae(T):n.legalMoves.includes(T)?G(T):n.preMovesEnabled&&n.preMoves.includes(T)?n.isPromotion(T)?ce(`${T}q`):ce(T):M():G(T),M(!1)},Xe=m=>{const T=n.getPieceFromSquare(m.square);T&&T.square===m.square&&T.name===m.name&&k(m.square,H.SELECT)};function lt(m){if(!o||!m)return;if(i==null||i(),typeof window.ResizeObserver>"u")throw new Error("window.ResizeObserver is missing.");const T=new ResizeObserver(Z=>{const ne=m.getBoundingClientRect();Z.forEach(()=>{t(6,n.state.board.size=Math.floor(ne.width*window.devicePixelRatio/8)*8/window.devicePixelRatio,n),o.style.setProperty("width",`${Math.floor(ne.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`),o.style.setProperty("height",`${Math.floor(ne.width*window.devicePixelRatio/8)*8/window.devicePixelRatio}px`)})});return T.observe(m),()=>{T.unobserve(m),T.disconnect()}}const It=m=>m==="a1"?n.flipped?"top-right":"bottom-left":m==="a8"?n.flipped?"bottom-right":"top-left":m==="h1"?n.flipped?"top-left":"bottom-right":m==="h8"?n.flipped?"bottom-left":"top-right":"",Bt=m=>!n.movableEnabled||!n.state.board.mouseEvents||!n.draggableEnabled&&!n.selectableEnabled?"":n.legalEnabled?n.state.movable.color===se.BOTH?m?"w":"b":n.state.movable.color===se.WHITE&&(m||!m&&n.preMovesEnabled)?"w":n.state.movable.color===se.BLACK&&(!m||m&&n.preMovesEnabled)?"b":"":"wb";$t(()=>{t(11,E=!0),ie(!0),n.state.callbacks.getLastMove&&A(n.state.callbacks.getLastMove()),n.state.board.resizible&&document.body.style.setProperty("--boardScale",`${n.state.board.scale}`)}),ci(()=>{i==null||i(),E&&n.state.board.resizible&&document.body.style.removeProperty("--boardScale")});function ts(m){We.call(this,s,m)}function ss(m){We.call(this,s,m)}const ns=m=>{l("piececlick",{piece:m}),h(m.square)},is=m=>{l("startDragging",{piece:m}),St(m)},as=(m,T)=>mt(T,m);function ot(m){We.call(this,s,m)}const rs=m=>Xe(m),ls=()=>M(),qt=()=>M(),os=m=>Ct(m.square),us=m=>{k(m.detail.square,H.LEGALHOVER)},fs=m=>{Ge(m.detail)};function cs(m){c=m,t(8,c)}function ds(m){J[m?"unshift":"push"](()=>{f=m,t(10,f)})}const ut=m=>l("drawCircle",{square:m.detail.square,color:m.detail.color}),hs=m=>l("drawArrow",{move:m.detail.move,color:m.detail.color});function Ut(m){J[m?"unshift":"push"](()=>{o=m,t(7,o)})}function gs(m){J[m?"unshift":"push"](()=>{u=m,t(5,u)})}function bs(m){J[m?"unshift":"push"](()=>{d=m,t(9,d)})}return s.$$set=m=>{"config"in m&&t(22,a=m.config),"className"in m&&t(0,r=m.className)},s.$$.update=()=>{s.$$.dirty[0]&32&&(i=lt(u))},[r,k,h,M,Ge,u,n,o,c,d,f,E,l,Ie,Me,mt,St,Ze,Ct,Xe,It,Bt,a,_,C,y,q,D,A,O,U,X,fe,Ae,ie,x,G,ce,ae,b,K,te,Ee,de,ye,xe,Re,Qe,Ve,$e,At,Mt,Tt,rt,Lt,wt,et,Ot,ts,ss,ns,is,as,ot,rs,ls,qt,os,us,fs,cs,ds,ut,hs,Ut,gs,bs]}class _r extends Te{constructor(e){super(),Le(this,e,vr,mr,Oe,{config:22,className:0,clearAllSquares:23,highlightSquare:1,selectPiece:2,deselect:3,setCheckSquare:24,removeCheckSquare:25,flipBoard:26,highlightManySquares:27,highlightMove:28,highlightMoves:29,highlightLegalMove:30,highlightLegalMoves:31,movePiece:32,removePiece:33,updateLegalState:34,playMoveSound:35,makeMove:36,makeNextMove:37,makeMovePromotion:38,removeSquareHighlight:39,removeAllPiece:40,createPiece:41,changeColorOfPiece:42,getSquareFromCoords:43,setFEN:44,getShortFEN:45,setSize:46,setScale:4,getPieceNameFromSquare:47,setTools:48,removeTools:49,setMovableColor:50,setLastMove:51,setLegalMoves:52,setPreMoves:53,getState:54,setState:55,setConfigSettings:56,getConfigFromState:57},null,[-1,-1,-1])}get clearAllSquares(){return this.$$.ctx[23]}get highlightSquare(){return this.$$.ctx[1]}get selectPiece(){return this.$$.ctx[2]}get deselect(){return this.$$.ctx[3]}get setCheckSquare(){return this.$$.ctx[24]}get removeCheckSquare(){return this.$$.ctx[25]}get flipBoard(){return this.$$.ctx[26]}get highlightManySquares(){return this.$$.ctx[27]}get highlightMove(){return this.$$.ctx[28]}get highlightMoves(){return this.$$.ctx[29]}get highlightLegalMove(){return this.$$.ctx[30]}get highlightLegalMoves(){return this.$$.ctx[31]}get movePiece(){return this.$$.ctx[32]}get removePiece(){return this.$$.ctx[33]}get updateLegalState(){return this.$$.ctx[34]}get playMoveSound(){return this.$$.ctx[35]}get makeMove(){return this.$$.ctx[36]}get makeNextMove(){return this.$$.ctx[37]}get makeMovePromotion(){return this.$$.ctx[38]}get removeSquareHighlight(){return this.$$.ctx[39]}get removeAllPiece(){return this.$$.ctx[40]}get createPiece(){return this.$$.ctx[41]}get changeColorOfPiece(){return this.$$.ctx[42]}get getSquareFromCoords(){return this.$$.ctx[43]}get setFEN(){return this.$$.ctx[44]}get getShortFEN(){return this.$$.ctx[45]}get setSize(){return this.$$.ctx[46]}get setScale(){return this.$$.ctx[4]}get getPieceNameFromSquare(){return this.$$.ctx[47]}get setTools(){return this.$$.ctx[48]}get removeTools(){return this.$$.ctx[49]}get setMovableColor(){return this.$$.ctx[50]}get setLastMove(){return this.$$.ctx[51]}get setLegalMoves(){return this.$$.ctx[52]}get setPreMoves(){return this.$$.ctx[53]}get getState(){return this.$$.ctx[54]}get setState(){return this.$$.ctx[55]}get setConfigSettings(){return this.$$.ctx[56]}get getConfigFromState(){return this.$$.ctx[57]}}const Mn=["standard","darkBlue"],wn=["backIn","backInOut","backOut","bounceIn","bounceInOut","bounceOut","circIn","circInOut","circOut","cubicIn","cubicInOut","cubicOut","elasticIn","elasticInOut","elasticOut","expoIn","expoInOut","expoOut","linear","quadIn","quadInOut","quadOut","quartIn","quartInOut","quartOut","quintIn","quintInOut","quintOut","sineIn","sineInOut","sineOut"];function Sn(s){let e,t,i;return{c(){e=F("input"),this.h()},l(a){e=N(a,"INPUT",{type:!0,class:!0}),this.h()},h(){p(e,"type","checkbox"),p(e,"class","mr-1")},m(a,r){z(a,e,r),e.checked=s[0],t||(i=[ee(e,"change",s[8]),ee(e,"click",Vn(s[7])),ee(e,"change",s[9])],t=!0)},p(a,r){r&1&&(e.checked=a[0])},d(a){a&&S(e),t=!1,at(i)}}}function Cn(s){let e,t,i;return{c(){e=Fe("svg"),t=Fe("path"),this.h()},l(a){e=Ne(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=R(e);t=Ne(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),R(t).forEach(S),r.forEach(S),this.h()},h(){p(t,"fill-rule","evenodd"),p(t,"d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"),p(t,"clip-rule","evenodd"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 20 20"),p(e,"fill","currentColor"),p(e,"class",i="w-5 h-5 transition "+(s[1]?"rotate-180":"rotate-0"))},m(a,r){z(a,e,r),P(e,t)},p(a,r){r&2&&i!==(i="w-5 h-5 transition "+(a[1]?"rotate-180":"rotate-0"))&&p(e,"class",i)},d(a){a&&S(e)}}}function Pn(s){let e,t,i;const a=s[6].default,r=Rn(a,s,s[5],null);return{c(){e=F("div"),r&&r.c(),this.h()},l(n){e=N(n,"DIV",{class:!0});var l=R(e);r&&r.l(l),l.forEach(S),this.h()},h(){p(e,"class","py-2 px-4")},m(n,l){z(n,e,l),r&&r.m(e,null),i=!0},p(n,l){r&&r.p&&(!i||l&32)&&Dn(r,a,n,n[5],i?Un(a,n[5],l,null):Bn(n[5]),null)},i(n){i||(V(r,n),n&&kt(()=>{i&&(t||(t=Yt(e,Jt,{},!0)),t.run(1))}),i=!0)},o(n){Y(r,n),n&&(t||(t=Yt(e,Jt,{},!1)),t.run(0)),i=!1},d(n){n&&S(e),r&&r.d(n),n&&t&&t.end()}}}function Er(s){let e,t,i,a,r,n,l,o,u,c,d,f,w,v,E=s[0]!==void 0&&Sn(s),_=s[3]&&Cn(s),k=s[1]&&Pn(s);return{c(){e=F("div"),t=F("button"),i=F("div"),E&&E.c(),a=W(),r=F("span"),n=ve(s[2]),o=W(),_&&_.c(),d=W(),k&&k.c(),this.h()},l(g){e=N(g,"DIV",{class:!0});var h=R(e);t=N(h,"BUTTON",{class:!0});var M=R(t);i=N(M,"DIV",{class:!0});var C=R(i);E&&E.l(C),a=j(C),r=N(C,"SPAN",{class:!0});var y=R(r);n=_e(y,s[2]),y.forEach(S),C.forEach(S),o=j(M),_&&_.l(M),M.forEach(S),d=j(h),k&&k.l(h),h.forEach(S),this.h()},h(){p(r,"class",l=s[0]===void 0?"ml-[21px]":""),p(i,"class","flex gap-1"),p(t,"class",u="flex justify-between px-4 py-2 "+(s[3]?"transition hover:bg-slate-800/40":"")+" rounded"),t.disabled=c=!s[3],p(e,"class","bg-slate-900/20 rounded shadow-lg flex flex-col")},m(g,h){z(g,e,h),P(e,t),P(t,i),E&&E.m(i,null),P(i,a),P(i,r),P(r,n),P(t,o),_&&_.m(t,null),P(e,d),k&&k.m(e,null),f=!0,w||(v=ee(t,"click",s[10]),w=!0)},p(g,[h]){g[0]!==void 0?E?E.p(g,h):(E=Sn(g),E.c(),E.m(i,a)):E&&(E.d(1),E=null),(!f||h&4)&&xt(n,g[2]),(!f||h&1&&l!==(l=g[0]===void 0?"ml-[21px]":""))&&p(r,"class",l),g[3]?_?_.p(g,h):(_=Cn(g),_.c(),_.m(t,null)):_&&(_.d(1),_=null),(!f||h&8&&u!==(u="flex justify-between px-4 py-2 "+(g[3]?"transition hover:bg-slate-800/40":"")+" rounded"))&&p(t,"class",u),(!f||h&8&&c!==(c=!g[3]))&&(t.disabled=c),g[1]?k?(k.p(g,h),h&2&&V(k,1)):(k=Pn(g),k.c(),V(k,1),k.m(e,null)):k&&(Be(),Y(k,1,1,()=>{k=null}),Ue())},i(g){f||(V(k),f=!0)},o(g){Y(k),f=!1},d(g){g&&S(e),E&&E.d(),_&&_.d(),k&&k.d(),w=!1,v()}}}function kr(s,e,t){let{$$slots:i={},$$scope:a}=e;const r=Dt();let{name:n="board"}=e,{enabled:l=void 0}=e,{showExpand:o=!0}=e,{expanded:u=!1}=e;function c(v){We.call(this,s,v)}const d=()=>r("changed",l);function f(){l=this.checked,t(0,l)}const w=()=>{t(1,u=!u)};return s.$$set=v=>{"name"in v&&t(2,n=v.name),"enabled"in v&&t(0,l=v.enabled),"showExpand"in v&&t(3,o=v.showExpand),"expanded"in v&&t(1,u=v.expanded),"$$scope"in v&&t(5,a=v.$$scope)},[l,u,n,o,r,a,i,c,d,f,w]}class pt extends Te{constructor(e){super(),Le(this,e,kr,Er,Oe,{name:2,enabled:0,showExpand:3,expanded:1})}}function yn(s,e,t){const i=s.slice();return i[12]=e[t],i}function An(s){let e,t=s[12]+"",i;return{c(){e=F("option"),i=ve(t),this.h()},l(a){e=N(a,"OPTION",{});var r=R(e);i=_e(r,t),r.forEach(S),this.h()},h(){e.__value=s[12],e.value=e.__value},m(a,r){z(a,e,r),P(e,i)},p:ke,d(a){a&&S(e)}}}function Mr(s){let e,t,i,a,r,n,l,o,u,c,d,f,w,v,E,_,k,g,h,M,C,y,q,D,A,O,U,X,fe,Ae,Se,ie=Mn,x=[];for(let B=0;B<ie.length;B+=1)x[B]=An(yn(s,ie,B));return{c(){e=F("div"),t=F("select");for(let B=0;B<x.length;B+=1)x[B].c();i=W(),a=F("label"),r=ve("board theme"),n=W(),l=F("div"),o=F("input"),u=W(),c=F("label"),d=ve("mouseEvents"),f=W(),w=F("div"),v=F("input"),E=W(),_=F("label"),k=ve("notation"),g=W(),h=F("div"),M=F("input"),C=W(),y=F("label"),q=ve("flipped"),D=W(),A=F("div"),O=F("input"),U=W(),X=F("label"),fe=ve("resizible"),this.h()},l(B){e=N(B,"DIV",{class:!0});var Q=R(e);t=N(Q,"SELECT",{class:!0});var G=R(t);for(let he=0;he<x.length;he+=1)x[he].l(G);G.forEach(S),i=j(Q),a=N(Q,"LABEL",{for:!0,class:!0});var ce=R(a);r=_e(ce,"board theme"),ce.forEach(S),Q.forEach(S),n=j(B),l=N(B,"DIV",{class:!0});var ae=R(l);o=N(ae,"INPUT",{id:!0,type:!0,class:!0}),u=j(ae),c=N(ae,"LABEL",{for:!0,class:!0});var b=R(c);d=_e(b,"mouseEvents"),b.forEach(S),ae.forEach(S),f=j(B),w=N(B,"DIV",{class:!0});var K=R(w);v=N(K,"INPUT",{id:!0,type:!0,class:!0}),E=j(K),_=N(K,"LABEL",{for:!0,class:!0});var te=R(_);k=_e(te,"notation"),te.forEach(S),K.forEach(S),g=j(B),h=N(B,"DIV",{class:!0});var Ee=R(h);M=N(Ee,"INPUT",{id:!0,type:!0,class:!0}),C=j(Ee),y=N(Ee,"LABEL",{for:!0,class:!0});var de=R(y);q=_e(de,"flipped"),de.forEach(S),Ee.forEach(S),D=j(B),A=N(B,"DIV",{class:!0});var Ie=R(A);O=N(Ie,"INPUT",{id:!0,type:!0,class:!0}),U=j(Ie),X=N(Ie,"LABEL",{for:!0,class:!0});var Me=R(X);fe=_e(Me,"resizible"),Me.forEach(S),Ie.forEach(S),this.h()},h(){p(t,"class","svelte-lnr7xr"),s[0]===void 0&&kt(()=>s[7].call(t)),p(a,"for","boardTheme"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","mouseEvents"),p(o,"type","checkbox"),p(o,"class","svelte-lnr7xr"),p(c,"for","mouseEvents"),p(c,"class","select-none"),p(l,"class","mb-2"),p(v,"id","notation"),p(v,"type","checkbox"),p(v,"class","svelte-lnr7xr"),p(_,"for","notation"),p(_,"class","select-none"),p(w,"class","mb-2"),p(M,"id","flipped"),p(M,"type","checkbox"),p(M,"class","svelte-lnr7xr"),p(y,"for","flipped"),p(y,"class","select-none"),p(h,"class","mb-2"),p(O,"id","resizibleEnabled"),p(O,"type","checkbox"),p(O,"class","svelte-lnr7xr"),p(X,"for","resizibleEnabled"),p(X,"class","select-none"),p(A,"class","mt-2 mb-1")},m(B,Q){z(B,e,Q),P(e,t);for(let G=0;G<x.length;G+=1)x[G]&&x[G].m(t,null);yt(t,s[0],!0),P(e,i),P(e,a),P(a,r),z(B,n,Q),z(B,l,Q),P(l,o),o.checked=s[1],P(l,u),P(l,c),P(c,d),z(B,f,Q),z(B,w,Q),P(w,v),v.checked=s[2],P(w,E),P(w,_),P(_,k),z(B,g,Q),z(B,h,Q),P(h,M),M.checked=s[3],P(h,C),P(h,y),P(y,q),z(B,D,Q),z(B,A,Q),P(A,O),O.checked=s[4],P(A,U),P(A,X),P(X,fe),Ae||(Se=[ee(t,"change",s[7]),ee(o,"change",s[8]),ee(v,"change",s[9]),ee(M,"change",s[10]),ee(O,"change",s[11])],Ae=!0)},p(B,Q){if(Q&0){ie=Mn;let G;for(G=0;G<ie.length;G+=1){const ce=yn(B,ie,G);x[G]?x[G].p(ce,Q):(x[G]=An(ce),x[G].c(),x[G].m(t,null))}for(;G<x.length;G+=1)x[G].d(1);x.length=ie.length}Q&1&&yt(t,B[0]),Q&2&&(o.checked=B[1]),Q&4&&(v.checked=B[2]),Q&8&&(M.checked=B[3]),Q&16&&(O.checked=B[4])},d(B){B&&S(e),bt(x,B),B&&S(n),B&&S(l),B&&S(f),B&&S(w),B&&S(g),B&&S(h),B&&S(D),B&&S(A),Ae=!1,at(Se)}}}function wr(s){let e,t;return e=new pt({props:{name:s[5],expanded:s[6],$$slots:{default:[Mr]},$$scope:{ctx:s}}}),{c(){ge(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,a){pe(e,i,a),t=!0},p(i,[a]){const r={};a&32&&(r.name=i[5]),a&64&&(r.expanded=i[6]),a&32799&&(r.$$scope={dirty:a,ctx:i}),e.$set(r)},i(i){t||(V(e.$$.fragment,i),t=!0)},o(i){Y(e.$$.fragment,i),t=!1},d(i){me(e,i)}}}function Sr(s,e,t){let{name:i="Board"}=e,{boardTheme:a}=e,{mouseEvents:r}=e,{notation:n}=e,{flipped:l}=e,{resizible:o=!1}=e,{expanded:u=!1}=e;function c(){a=Ls(this),t(0,a)}function d(){r=this.checked,t(1,r)}function f(){n=this.checked,t(2,n)}function w(){l=this.checked,t(3,l)}function v(){o=this.checked,t(4,o)}return s.$$set=E=>{"name"in E&&t(5,i=E.name),"boardTheme"in E&&t(0,a=E.boardTheme),"mouseEvents"in E&&t(1,r=E.mouseEvents),"notation"in E&&t(2,n=E.notation),"flipped"in E&&t(3,l=E.flipped),"resizible"in E&&t(4,o=E.resizible),"expanded"in E&&t(6,u=E.expanded)},[a,r,n,l,o,i,u,c,d,f,w,v]}class Cr extends Te{constructor(e){super(),Le(this,e,Sr,wr,Oe,{name:5,boardTheme:0,mouseEvents:1,notation:2,flipped:3,resizible:4,expanded:6})}}function Pr(s){let e,t,i,a,r,n,l,o,u,c;return{c(){e=F("div"),t=F("select"),i=F("option"),a=ve("Both"),r=F("option"),n=ve("White"),l=F("option"),o=ve("Black"),this.h()},l(d){e=N(d,"DIV",{});var f=R(e);t=N(f,"SELECT",{class:!0});var w=R(t);i=N(w,"OPTION",{});var v=R(i);a=_e(v,"Both"),v.forEach(S),r=N(w,"OPTION",{});var E=R(r);n=_e(E,"White"),E.forEach(S),l=N(w,"OPTION",{});var _=R(l);o=_e(_,"Black"),_.forEach(S),w.forEach(S),f.forEach(S),this.h()},h(){i.__value=se.BOTH,i.value=i.__value,r.__value=se.WHITE,r.value=r.__value,l.__value=se.BLACK,l.value=l.__value,p(t,"class","svelte-xrxnwg"),s[1]===void 0&&kt(()=>s[4].call(t))},m(d,f){z(d,e,f),P(e,t),P(t,i),P(i,a),P(t,r),P(r,n),P(t,l),P(l,o),yt(t,s[1],!0),u||(c=ee(t,"change",s[4]),u=!0)},p(d,f){f&2&&yt(t,d[1])},d(d){d&&S(e),u=!1,c()}}}function yr(s){let e,t,i;function a(n){s[5](n)}let r={name:s[2],expanded:s[3],$$slots:{default:[Pr]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new pt({props:r}),J.push(()=>le(e,"enabled",a)),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){pe(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&66&&(o.$$scope={dirty:l,ctx:n}),!t&&l&1&&(t=!0,o.enabled=n[0],oe(()=>t=!1)),e.$set(o)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){Y(e.$$.fragment,n),i=!1},d(n){me(e,n)}}}function Ar(s,e,t){let{name:i="Movable"}=e,{enabled:a=!1}=e,{color:r}=e,{expanded:n=!1}=e;function l(){r=Ls(this),t(1,r)}function o(u){a=u,t(0,a)}return s.$$set=u=>{"name"in u&&t(2,i=u.name),"enabled"in u&&t(0,a=u.enabled),"color"in u&&t(1,r=u.color),"expanded"in u&&t(3,n=u.expanded)},[a,r,i,n,l,o]}class Tr extends Te{constructor(e){super(),Le(this,e,Ar,yr,Oe,{name:2,enabled:0,color:1,expanded:3})}}function Tn(s,e,t){const i=s.slice();return i[12]=e[t],i}function Ln(s){let e,t,i,a,r,n,l,o,u,c,d,f,w,v,E,_,k=wn,g=[];for(let h=0;h<k.length;h+=1)g[h]=On(Tn(s,k,h));return{c(){e=F("div"),t=F("div"),i=F("input"),a=W(),r=F("label"),n=ve("duration"),l=W(),o=F("div"),u=F("select");for(let h=0;h<g.length;h+=1)g[h].c();c=W(),d=F("label"),f=ve("easing"),this.h()},l(h){e=N(h,"DIV",{class:!0});var M=R(e);t=N(M,"DIV",{class:!0});var C=R(t);i=N(C,"INPUT",{id:!0,type:!0,class:!0}),a=j(C),r=N(C,"LABEL",{for:!0,class:!0});var y=R(r);n=_e(y,"duration"),y.forEach(S),C.forEach(S),l=j(M),o=N(M,"DIV",{class:!0});var q=R(o);u=N(q,"SELECT",{id:!0,class:!0});var D=R(u);for(let O=0;O<g.length;O+=1)g[O].l(D);D.forEach(S),c=j(q),d=N(q,"LABEL",{for:!0,class:!0});var A=R(d);f=_e(A,"easing"),A.forEach(S),q.forEach(S),M.forEach(S),this.h()},h(){p(i,"id","transitionDuration"),p(i,"type","number"),p(i,"class","w-16 svelte-1qpp6cx"),p(r,"for","transitionDuration"),p(r,"class","select-none"),p(t,"class","flex gap-2 mb-2"),p(u,"id","easingFuncs"),p(u,"class","svelte-1qpp6cx"),s[4]===void 0&&kt(()=>s[10].call(u)),p(d,"for","easingFuncs"),p(d,"class","select-none"),p(o,"class","flex gap-2"),p(e,"class","pl-2 pr-4 flex-col")},m(h,M){z(h,e,M),P(e,t),P(t,i),Ds(i,s[3]),P(t,a),P(t,r),P(r,n),P(e,l),P(e,o),P(o,u);for(let C=0;C<g.length;C+=1)g[C]&&g[C].m(u,null);yt(u,s[4],!0),P(o,c),P(o,d),P(d,f),v=!0,E||(_=[ee(i,"input",s[9]),ee(u,"change",s[10])],E=!0)},p(h,M){if(M&8&&Wn(i.value)!==h[3]&&Ds(i,h[3]),M&0){k=wn;let C;for(C=0;C<k.length;C+=1){const y=Tn(h,k,C);g[C]?g[C].p(y,M):(g[C]=On(y),g[C].c(),g[C].m(u,null))}for(;C<g.length;C+=1)g[C].d(1);g.length=k.length}M&16&&yt(u,h[4])},i(h){v||(h&&kt(()=>{v&&(w||(w=Yt(e,Jt,{},!0)),w.run(1))}),v=!0)},o(h){h&&(w||(w=Yt(e,Jt,{},!1)),w.run(0)),v=!1},d(h){h&&S(e),bt(g,h),h&&w&&w.end(),E=!1,at(_)}}}function On(s){let e,t=s[12]+"",i;return{c(){e=F("option"),i=ve(t),this.h()},l(a){e=N(a,"OPTION",{});var r=R(e);i=_e(r,t),r.forEach(S),this.h()},h(){e.__value=s[12],e.value=e.__value},m(a,r){z(a,e,r),P(e,i)},p:ke,d(a){a&&S(e)}}}function Lr(s){let e,t,i,a,r,n,l,o,u,c,d,f,w,v,E,_=s[2]&&Ln(s);return{c(){e=F("div"),t=F("input"),i=W(),a=F("label"),r=ve("ghost piece"),n=W(),l=F("div"),o=F("input"),u=W(),c=F("label"),d=ve("transition"),f=W(),_&&_.c(),w=Pe(),this.h()},l(k){e=N(k,"DIV",{class:!0});var g=R(e);t=N(g,"INPUT",{id:!0,type:!0,class:!0}),i=j(g),a=N(g,"LABEL",{for:!0,class:!0});var h=R(a);r=_e(h,"ghost piece"),h.forEach(S),g.forEach(S),n=j(k),l=N(k,"DIV",{class:!0});var M=R(l);o=N(M,"INPUT",{id:!0,type:!0,class:!0}),u=j(M),c=N(M,"LABEL",{for:!0,class:!0});var C=R(c);d=_e(C,"transition"),C.forEach(S),M.forEach(S),f=j(k),_&&_.l(k),w=Pe(),this.h()},h(){p(t,"id","ghostPiece"),p(t,"type","checkbox"),p(t,"class","svelte-1qpp6cx"),p(a,"for","ghostPiece"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","draggableEnabled"),p(o,"type","checkbox"),p(o,"class","svelte-1qpp6cx"),p(c,"for","draggableEnabled"),p(c,"class","select-none"),p(l,"class","mb-2")},m(k,g){z(k,e,g),P(e,t),t.checked=s[1],P(e,i),P(e,a),P(a,r),z(k,n,g),z(k,l,g),P(l,o),o.checked=s[2],P(l,u),P(l,c),P(c,d),z(k,f,g),_&&_.m(k,g),z(k,w,g),v||(E=[ee(t,"change",s[7]),ee(o,"change",s[8])],v=!0)},p(k,g){g&2&&(t.checked=k[1]),g&4&&(o.checked=k[2]),k[2]?_?(_.p(k,g),g&4&&V(_,1)):(_=Ln(k),_.c(),V(_,1),_.m(w.parentNode,w)):_&&(Be(),Y(_,1,1,()=>{_=null}),Ue())},d(k){k&&S(e),k&&S(n),k&&S(l),k&&S(f),_&&_.d(k),k&&S(w),v=!1,at(E)}}}function Or(s){let e,t,i;function a(n){s[11](n)}let r={name:s[5],expanded:s[6],$$slots:{default:[Lr]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new pt({props:r}),J.push(()=>le(e,"enabled",a)),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){pe(e,n,l),i=!0},p(n,[l]){const o={};l&32&&(o.name=n[5]),l&64&&(o.expanded=n[6]),l&32798&&(o.$$scope={dirty:l,ctx:n}),!t&&l&1&&(t=!0,o.enabled=n[0],oe(()=>t=!1)),e.$set(o)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){Y(e.$$.fragment,n),i=!1},d(n){me(e,n)}}}function Ir(s,e,t){let{name:i="Draggable"}=e,{enabled:a=!1}=e,{ghostPiece:r=!1}=e,{transition:n=!1}=e,{duration:l=120}=e,{easing:o="easeInOut"}=e,{expanded:u=!1}=e;function c(){r=this.checked,t(1,r)}function d(){n=this.checked,t(2,n)}function f(){l=Wn(this.value),t(3,l)}function w(){o=Ls(this),t(4,o)}function v(E){a=E,t(0,a)}return s.$$set=E=>{"name"in E&&t(5,i=E.name),"enabled"in E&&t(0,a=E.enabled),"ghostPiece"in E&&t(1,r=E.ghostPiece),"transition"in E&&t(2,n=E.transition),"duration"in E&&t(3,l=E.duration),"easing"in E&&t(4,o=E.easing),"expanded"in E&&t(6,u=E.expanded)},[a,r,n,l,o,i,u,c,d,f,w,v]}class qr extends Te{constructor(e){super(),Le(this,e,Ir,Or,Oe,{name:5,enabled:0,ghostPiece:1,transition:2,duration:3,easing:4,expanded:6})}}function In(s,e,t){const i=s.slice();return i[7]=e[t],i[8]=e,i[9]=t,i}function qn(s){let e,t,i,a,r=s[7]+"",n,l,o,u;function c(){s[5].call(t,s[7])}return{c(){e=F("div"),t=F("input"),i=W(),a=F("label"),n=ve(r),l=W(),this.h()},l(d){e=N(d,"DIV",{class:!0});var f=R(e);t=N(f,"INPUT",{id:!0,type:!0}),i=j(f),a=N(f,"LABEL",{for:!0,class:!0});var w=R(a);n=_e(w,r),w.forEach(S),l=j(f),f.forEach(S),this.h()},h(){p(t,"id",s[7]+"Enabled"),p(t,"type","checkbox"),p(a,"for",s[7]+"Enabled"),p(a,"class","select-none"),p(e,"class","mb-2")},m(d,f){z(d,e,f),P(e,t),t.checked=s[1][s[7]],P(e,i),P(e,a),P(a,n),P(e,l),o||(u=ee(t,"change",c),o=!0)},p(d,f){s=d,f&18&&(t.checked=s[1][s[7]])},d(d){d&&S(e),o=!1,u()}}}function Fr(s){let e,t=s[4],i=[];for(let a=0;a<t.length;a+=1)i[a]=qn(In(s,t,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Pe()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);e=Pe()},m(a,r){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(a,r);z(a,e,r)},p(a,r){if(r&18){t=a[4];let n;for(n=0;n<t.length;n+=1){const l=In(a,t,n);i[n]?i[n].p(l,r):(i[n]=qn(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=t.length}},d(a){bt(i,a),a&&S(e)}}}function Nr(s){let e,t,i;function a(n){s[6](n)}let r={name:s[2],expanded:s[3],$$slots:{default:[Fr]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new pt({props:r}),J.push(()=>le(e,"enabled",a)),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){pe(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!t&&l&1&&(t=!0,o.enabled=n[0],oe(()=>t=!1)),e.$set(o)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){Y(e.$$.fragment,n),i=!1},d(n){me(e,n)}}}function Rr(s,e,t){let{name:i="Highlight"}=e,{enabled:a=!1}=e,{settings:r}=e;const n=["select","legal","move","preMove","nextMove","check"];let{expanded:l=!1}=e;function o(c){r[c]=this.checked,t(1,r)}function u(c){a=c,t(0,a)}return s.$$set=c=>{"name"in c&&t(2,i=c.name),"enabled"in c&&t(0,a=c.enabled),"settings"in c&&t(1,r=c.settings),"expanded"in c&&t(3,l=c.expanded)},[a,r,i,l,n,o,u]}class Dr extends Te{constructor(e){super(),Le(this,e,Rr,Nr,Oe,{name:2,enabled:0,settings:1,expanded:3})}}function Br(s){let e,t,i,a,r,n,l,o,u,c,d,f,w;return{c(){e=F("div"),t=F("input"),i=W(),a=F("label"),r=ve("L shape knight move"),n=W(),l=F("div"),o=F("input"),u=W(),c=F("label"),d=ve("only chess move"),this.h()},l(v){e=N(v,"DIV",{class:!0});var E=R(e);t=N(E,"INPUT",{id:!0,type:!0}),i=j(E),a=N(E,"LABEL",{for:!0,class:!0});var _=R(a);r=_e(_,"L shape knight move"),_.forEach(S),E.forEach(S),n=j(v),l=N(v,"DIV",{class:!0});var k=R(l);o=N(k,"INPUT",{id:!0,type:!0}),u=j(k),c=N(k,"LABEL",{for:!0,class:!0});var g=R(c);d=_e(g,"only chess move"),g.forEach(S),k.forEach(S),this.h()},h(){p(t,"id","knightLShapeMoveEnabled"),p(t,"type","checkbox"),p(a,"for","knightLShapeMoveEnabled"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","onlyChessMoveEnabled"),p(o,"type","checkbox"),p(c,"for","onlyChessMoveEnabled"),p(c,"class","select-none"),p(l,"class","mb-2")},m(v,E){z(v,e,E),P(e,t),t.checked=s[1],P(e,i),P(e,a),P(a,r),z(v,n,E),z(v,l,E),P(l,o),o.checked=s[2],P(l,u),P(l,c),P(c,d),f||(w=[ee(t,"change",s[5]),ee(o,"change",s[6])],f=!0)},p(v,E){E&2&&(t.checked=v[1]),E&4&&(o.checked=v[2])},d(v){v&&S(e),v&&S(n),v&&S(l),f=!1,at(w)}}}function Ur(s){let e,t,i;function a(n){s[7](n)}let r={name:s[3],expanded:s[4],$$slots:{default:[Br]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new pt({props:r}),J.push(()=>le(e,"enabled",a)),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){pe(e,n,l),i=!0},p(n,[l]){const o={};l&8&&(o.name=n[3]),l&16&&(o.expanded=n[4]),l&262&&(o.$$scope={dirty:l,ctx:n}),!t&&l&1&&(t=!0,o.enabled=n[0],oe(()=>t=!1)),e.$set(o)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){Y(e.$$.fragment,n),i=!1},d(n){me(e,n)}}}function zr(s,e,t){let{name:i="DrawTools"}=e,{enabled:a=!1}=e,{knightLShape:r=!1}=e,{onlyChessMove:n=!1}=e,{expanded:l=!1}=e;function o(){r=this.checked,t(1,r)}function u(){n=this.checked,t(2,n)}function c(d){a=d,t(0,a)}return s.$$set=d=>{"name"in d&&t(3,i=d.name),"enabled"in d&&t(0,a=d.enabled),"knightLShape"in d&&t(1,r=d.knightLShape),"onlyChessMove"in d&&t(2,n=d.onlyChessMove),"expanded"in d&&t(4,l=d.expanded)},[a,r,n,i,l,o,u,c]}class Vr extends Te{constructor(e){super(),Le(this,e,zr,Ur,Oe,{name:3,enabled:0,knightLShape:1,onlyChessMove:2,expanded:4})}}function Fn(s,e,t){const i=s.slice();return i[7]=e[t],i[8]=e,i[9]=t,i}function Nn(s){let e,t,i,a,r=s[7].toLowerCase()+"",n,l,o,u;function c(){s[5].call(t,s[7])}return{c(){e=F("div"),t=F("input"),i=W(),a=F("label"),n=ve(r),l=W(),this.h()},l(d){e=N(d,"DIV",{class:!0});var f=R(e);t=N(f,"INPUT",{id:!0,type:!0}),i=j(f),a=N(f,"LABEL",{for:!0,class:!0});var w=R(a);n=_e(w,r),w.forEach(S),l=j(f),f.forEach(S),this.h()},h(){p(t,"id",s[7]+"Enabled"),p(t,"type","checkbox"),p(a,"for",s[7]+"Enabled"),p(a,"class","select-none"),p(e,"class","mb-2")},m(d,f){z(d,e,f),P(e,t),t.checked=s[1][s[7]],P(e,i),P(e,a),P(a,n),P(e,l),o||(u=ee(t,"change",c),o=!0)},p(d,f){s=d,f&18&&(t.checked=s[1][s[7]])},d(d){d&&S(e),o=!1,u()}}}function Hr(s){let e,t=s[4],i=[];for(let a=0;a<t.length;a+=1)i[a]=Nn(Fn(s,t,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Pe()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);e=Pe()},m(a,r){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(a,r);z(a,e,r)},p(a,r){if(r&18){t=a[4];let n;for(n=0;n<t.length;n+=1){const l=Fn(a,t,n);i[n]?i[n].p(l,r):(i[n]=Nn(l),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=t.length}},d(a){bt(i,a),a&&S(e)}}}function Kr(s){let e,t,i;function a(n){s[6](n)}let r={name:s[2],expanded:s[3],$$slots:{default:[Hr]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new pt({props:r}),J.push(()=>le(e,"enabled",a)),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){pe(e,n,l),i=!0},p(n,[l]){const o={};l&4&&(o.name=n[2]),l&8&&(o.expanded=n[3]),l&1026&&(o.$$scope={dirty:l,ctx:n}),!t&&l&1&&(t=!0,o.enabled=n[0],oe(()=>t=!1)),e.$set(o)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){Y(e.$$.fragment,n),i=!1},d(n){me(e,n)}}}function Wr(s,e,t){let{name:i="Sounds"}=e,{enabled:a=!1}=e,{settings:r}=e;const n=["MOVE","CAPTURE","CASTLE","UNDO"];let{expanded:l=!1}=e;function o(c){r[c]=this.checked,t(1,r)}function u(c){a=c,t(0,a)}return s.$$set=c=>{"name"in c&&t(2,i=c.name),"enabled"in c&&t(0,a=c.enabled),"settings"in c&&t(1,r=c.settings),"expanded"in c&&t(3,l=c.expanded)},[a,r,i,l,n,o,u]}class jr extends Te{constructor(e){super(),Le(this,e,Wr,Kr,Oe,{name:2,enabled:0,settings:1,expanded:3})}}function Gr(s){let e,t;return{c(){e=Fe("svg"),t=Fe("path"),this.h()},l(i){e=Ne(i,"svg",{style:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=R(e);t=Ne(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),R(t).forEach(S),a.forEach(S),this.h()},h(){p(t,"stroke-linecap","round"),p(t,"stroke-linejoin","round"),p(t,"stroke-width","2"),p(t,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),ze(e,"transform","translate(1px, 0px)"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"class","h-5"),p(e,"fill","none"),p(e,"viewBox","0 0 24 24"),p(e,"aria-hidden","true"),p(e,"stroke","currentColor")},m(i,a){z(i,e,a),P(e,t)},d(i){i&&S(e)}}}function Xr(s){let e,t;return{c(){e=Fe("svg"),t=Fe("path"),this.h()},l(i){e=Ne(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0,stroke:!0});var a=R(e);t=Ne(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),R(t).forEach(S),a.forEach(S),this.h()},h(){p(t,"stroke-linecap","round"),p(t,"stroke-linejoin","round"),p(t,"stroke-width","2"),p(t,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"class","h-5 text-green-500"),p(e,"fill","none"),p(e,"viewBox","0 0 24 24"),p(e,"aria-hidden","true"),p(e,"stroke","currentColor")},m(i,a){z(i,e,a),P(e,t)},d(i){i&&S(e)}}}function Yr(s){let e,t,i;function a(l,o){return l[1]?Xr:Gr}let r=a(s),n=r(s);return{c(){e=F("button"),n.c(),this.h()},l(l){e=N(l,"BUTTON",{type:!0,class:!0});var o=R(e);n.l(o),o.forEach(S),this.h()},h(){p(e,"type","button"),p(e,"class","box-border rounded-sm bg-slate-800 bg-opacity-40 text-gray-500 transition hover:text-gray-300 focus:z-10 focus:ring-1 focus:ring-blue-600 p-1")},m(l,o){z(l,e,o),n.m(e,null),s[4](e),t||(i=ee(e,"click",s[2]),t=!0)},p(l,[o]){r!==(r=a(l))&&(n.d(1),n=r(l),n&&(n.c(),n.m(e,null)))},i:ke,o:ke,d(l){l&&S(e),n.d(),s[4](null),t=!1,i()}}}function Qr(s,e,t){let{copyText:i}=e,a,r=!1;function n(){navigator.clipboard.writeText(i),t(1,r=!0),setTimeout(()=>{t(1,r=!1)},2e3),a.setAttribute("data-cooltipz-dir","top"),a.setAttribute("aria-label","Copied!"),setTimeout(()=>{a.removeAttribute("aria-label"),a.removeAttribute("data-cooltipz-dir")},2e3)}function l(o){J[o?"unshift":"push"](()=>{a=o,t(0,a)})}return s.$$set=o=>{"copyText"in o&&t(3,i=o.copyText)},[a,r,n,i,l]}class Zr extends Te{constructor(e){super(),Le(this,e,Qr,Yr,Oe,{copyText:3})}}function Jr(s){let e,t,i,a,r,n,l,o,u,c,d,f,w;return{c(){e=F("div"),t=F("input"),i=W(),a=F("label"),r=ve("allow Castling"),n=W(),l=F("div"),o=F("input"),u=W(),c=F("label"),d=ve("allow EnPassant"),this.h()},l(v){e=N(v,"DIV",{class:!0});var E=R(e);t=N(E,"INPUT",{id:!0,type:!0}),i=j(E),a=N(E,"LABEL",{for:!0,class:!0});var _=R(a);r=_e(_,"allow Castling"),_.forEach(S),E.forEach(S),n=j(v),l=N(v,"DIV",{class:!0});var k=R(l);o=N(k,"INPUT",{id:!0,type:!0}),u=j(k),c=N(k,"LABEL",{for:!0,class:!0});var g=R(c);d=_e(g,"allow EnPassant"),g.forEach(S),k.forEach(S),this.h()},h(){p(t,"id","allowCastling"),p(t,"type","checkbox"),p(a,"for","allowCastling"),p(a,"class","select-none"),p(e,"class","mb-2"),p(o,"id","allowEnPassant"),p(o,"type","checkbox"),p(c,"for","allowEnPassant"),p(c,"class","select-none"),p(l,"class","mb-2")},m(v,E){z(v,e,E),P(e,t),t.checked=s[1],P(e,i),P(e,a),P(a,r),z(v,n,E),z(v,l,E),P(l,o),o.checked=s[2],P(l,u),P(l,c),P(c,d),f||(w=[ee(t,"change",s[4]),ee(o,"change",s[5])],f=!0)},p(v,E){E&2&&(t.checked=v[1]),E&4&&(o.checked=v[2])},d(v){v&&S(e),v&&S(n),v&&S(l),f=!1,at(w)}}}function xr(s){let e,t,i;function a(n){s[6](n)}let r={name:s[3],showExpand:!0,$$slots:{default:[Jr]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.enabled=s[0]),e=new pt({props:r}),J.push(()=>le(e,"enabled",a)),e.$on("changed",s[7]),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){pe(e,n,l),i=!0},p(n,[l]){const o={};l&8&&(o.name=n[3]),l&262&&(o.$$scope={dirty:l,ctx:n}),!t&&l&1&&(t=!0,o.enabled=n[0],oe(()=>t=!1)),e.$set(o)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){Y(e.$$.fragment,n),i=!1},d(n){me(e,n)}}}function $r(s,e,t){let{name:i="Legal"}=e,{enabled:a=!1}=e,{allowCastling:r}=e,{allowEnPassant:n}=e;function l(){r=this.checked,t(1,r)}function o(){n=this.checked,t(2,n)}function u(d){a=d,t(0,a)}function c(d){We.call(this,s,d)}return s.$$set=d=>{"name"in d&&t(3,i=d.name),"enabled"in d&&t(0,a=d.enabled),"allowCastling"in d&&t(1,r=d.allowCastling),"allowEnPassant"in d&&t(2,n=d.allowEnPassant)},[a,r,n,i,l,o,u,c]}class el extends Te{constructor(e){super(),Le(this,e,$r,xr,Oe,{name:3,enabled:0,allowCastling:1,allowEnPassant:2})}}function tl(s){let e,t,i,a,r,n,l,o,u,c,d,f,w,v,E,_,k,g,h,M,C,y,q,D,A,O,U,X,fe,Ae,Se,ie,x,B,Q,G,ce,ae,b,K,te,Ee,de,Ie,Me,he,ye,xe,Re,Ge,Qe,Ve,$e,At,Mt,Tt,rt,Lt,wt,et,Ot,mt,St,Ze,Ct,Xe,lt,It,Bt;function ts(L){s[7](L)}function ss(L){s[8](L)}function ns(L){s[9](L)}function is(L){s[10](L)}function as(L){s[11](L)}let ot={expanded:!0};s[0].board.boardTheme!==void 0&&(ot.boardTheme=s[0].board.boardTheme),s[0].board.mouseEvents!==void 0&&(ot.mouseEvents=s[0].board.mouseEvents),s[0].board.notation!==void 0&&(ot.notation=s[0].board.notation),s[0].board.flipped!==void 0&&(ot.flipped=s[0].board.flipped),s[0].board.resizible!==void 0&&(ot.resizible=s[0].board.resizible),n=new Cr({props:ot}),J.push(()=>le(n,"boardTheme",ts)),J.push(()=>le(n,"mouseEvents",ss)),J.push(()=>le(n,"notation",ns)),J.push(()=>le(n,"flipped",is)),J.push(()=>le(n,"resizible",as));function rs(L){s[12](L)}function ls(L){s[13](L)}let qt={expanded:!0};s[0].movable.enabled!==void 0&&(qt.enabled=s[0].movable.enabled),s[0].movable.color!==void 0&&(qt.color=s[0].movable.color),w=new Tr({props:qt}),J.push(()=>le(w,"enabled",rs)),J.push(()=>le(w,"color",ls));function os(L){s[14](L)}function us(L){s[15](L)}function fs(L){s[16](L)}function cs(L){s[17](L)}function ds(L){s[18](L)}let ut={};s[0].draggable.enabled!==void 0&&(ut.enabled=s[0].draggable.enabled),s[0].draggable.ghostPiece.enabled!==void 0&&(ut.ghostPiece=s[0].draggable.ghostPiece.enabled),s[0].draggable.transition.enabled!==void 0&&(ut.transition=s[0].draggable.transition.enabled),s[0].draggable.transition.settings.duration!==void 0&&(ut.duration=s[0].draggable.transition.settings.duration),s[0].draggable.transition.settings.easing!==void 0&&(ut.easing=s[0].draggable.transition.settings.easing),k=new qr({props:ut}),J.push(()=>le(k,"enabled",os)),J.push(()=>le(k,"ghostPiece",us)),J.push(()=>le(k,"transition",fs)),J.push(()=>le(k,"duration",cs)),J.push(()=>le(k,"easing",ds));function hs(L){s[19](L)}let Ut={name:"Selectable",showExpand:!1};s[0].selectable.enabled!==void 0&&(Ut.enabled=s[0].selectable.enabled),D=new pt({props:Ut}),J.push(()=>le(D,"enabled",hs));function gs(L){s[20](L)}function bs(L){s[21](L)}function m(L){s[22](L)}let T={};s[0].legal.settings.allowCastling!==void 0&&(T.allowCastling=s[0].legal.settings.allowCastling),s[0].legal.settings.allowEnPassant!==void 0&&(T.allowEnPassant=s[0].legal.settings.allowEnPassant),s[0].legal.enabled!==void 0&&(T.enabled=s[0].legal.enabled),U=new el({props:T}),J.push(()=>le(U,"allowCastling",gs)),J.push(()=>le(U,"allowEnPassant",bs)),J.push(()=>le(U,"enabled",m)),U.$on("changed",s[23]);function Z(L){s[24](L)}function ne(L){s[25](L)}let Ce={};s[0].highlight.enabled!==void 0&&(Ce.enabled=s[0].highlight.enabled),s[0].highlight.settings!==void 0&&(Ce.settings=s[0].highlight.settings),ie=new Dr({props:Ce}),J.push(()=>le(ie,"enabled",Z)),J.push(()=>le(ie,"settings",ne));function Ke(L){s[26](L)}function De(L){s[27](L)}function ps(L){s[28](L)}let zt={};s[0].drawTools.enabled!==void 0&&(zt.enabled=s[0].drawTools.enabled),s[0].drawTools.settings.knightLShape!==void 0&&(zt.knightLShape=s[0].drawTools.settings.knightLShape),s[0].drawTools.settings.onlyChessMove!==void 0&&(zt.onlyChessMove=s[0].drawTools.settings.onlyChessMove),G=new Vr({props:zt}),J.push(()=>le(G,"enabled",Ke)),J.push(()=>le(G,"knightLShape",De)),J.push(()=>le(G,"onlyChessMove",ps));function xn(L){s[29](L)}function $n(L){s[30](L)}let ms={};s[0].sounds.enabled!==void 0&&(ms.enabled=s[0].sounds.enabled),s[0].sounds.settings!==void 0&&(ms.settings=s[0].sounds.settings),te=new jr({props:ms}),J.push(()=>le(te,"enabled",xn)),J.push(()=>le(te,"settings",$n));let ei={config:s[6],className:"rounded-md"};return ye=new _r({props:ei}),s[31](ye),Ze=new Zr({props:{copyText:s[4]}}),Xe=new ki({props:{source:s[4],language:"svelte"}}),{c(){e=F("link"),t=W(),i=F("div"),a=F("div"),r=F("div"),ge(n.$$.fragment),f=W(),ge(w.$$.fragment),_=W(),ge(k.$$.fragment),q=W(),ge(D.$$.fragment),O=W(),ge(U.$$.fragment),Se=W(),ge(ie.$$.fragment),Q=W(),ge(G.$$.fragment),K=W(),ge(te.$$.fragment),Ie=W(),Me=F("div"),he=F("div"),ge(ye.$$.fragment),xe=W(),Re=F("div"),Ge=F("div"),Qe=F("div"),Ve=F("button"),$e=F("span"),At=ve("ts"),Tt=W(),rt=F("span"),Lt=ve("/"),wt=W(),et=F("span"),Ot=ve("js"),St=W(),ge(Ze.$$.fragment),Ct=W(),ge(Xe.$$.fragment),this.h()},l(L){const re=hi("svelte-tebjht",document.head);e=N(re,"LINK",{rel:!0,href:!0}),re.forEach(S),t=j(L),i=N(L,"DIV",{class:!0});var tt=R(i);a=N(tt,"DIV",{class:!0});var ft=R(a);r=N(ft,"DIV",{class:!0});var we=R(r);be(n.$$.fragment,we),f=j(we),be(w.$$.fragment,we),_=j(we),be(k.$$.fragment,we),q=j(we),be(D.$$.fragment,we),O=j(we),be(U.$$.fragment,we),Se=j(we),be(ie.$$.fragment,we),Q=j(we),be(G.$$.fragment,we),K=j(we),be(te.$$.fragment,we),we.forEach(S),Ie=j(ft),Me=N(ft,"DIV",{class:!0});var vt=R(Me);he=N(vt,"DIV",{class:!0});var _t=R(he);be(ye.$$.fragment,_t),_t.forEach(S),xe=j(vt),Re=N(vt,"DIV",{class:!0});var Pt=R(Re);Ge=N(Pt,"DIV",{class:!0});var st=R(Ge);Qe=N(st,"DIV",{class:!0});var ct=R(Qe);Ve=N(ct,"BUTTON",{class:!0});var dt=R(Ve);$e=N(dt,"SPAN",{class:!0});var Ft=R($e);At=_e(Ft,"ts"),Ft.forEach(S),Tt=j(dt),rt=N(dt,"SPAN",{class:!0});var Nt=R(rt);Lt=_e(Nt,"/"),Nt.forEach(S),wt=j(dt),et=N(dt,"SPAN",{class:!0});var Is=R(et);Ot=_e(Is,"js"),Is.forEach(S),dt.forEach(S),St=j(ct),be(Ze.$$.fragment,ct),ct.forEach(S),Ct=j(st),be(Xe.$$.fragment,st),st.forEach(S),Pt.forEach(S),vt.forEach(S),ft.forEach(S),tt.forEach(S),this.h()},h(){document.title="Chessboard • PowChess.com",p(e,"rel","stylesheet"),p(e,"href","prism-one-dark.css"),p(r,"class","flex flex-col gap-2 mx-auto w-60 text-gray-300 text-sm"),p(he,"class","w-full lg:w-[calc(70vh*(var(--boardScale,70)/100*0.7+0.3))]"),p($e,"class",Mt=s[1]?"text-yellow-600":""),p(rt,"class","text-gray-600"),p(et,"class",mt=s[1]?"":"text-yellow-600"),p(Ve,"class","text-gray-500 font-mono flex text-[0.8rem] mt-1"),p(Qe,"class","absolute right-2 top-2 flex gap-4"),p(Ge,"class","shadow-lg rounded"),p(Re,"class","row-start-2 relative"),p(Me,"class","grid grid-rows-[90wh_auto] gap-10"),p(a,"class","lg:col-start-2 gap-10 grid lg:grid-cols-[auto_auto]"),p(i,"class","my-10 grid grid-cols-center")},m(L,re){P(document.head,e),z(L,t,re),z(L,i,re),P(i,a),P(a,r),pe(n,r,null),P(r,f),pe(w,r,null),P(r,_),pe(k,r,null),P(r,q),pe(D,r,null),P(r,O),pe(U,r,null),P(r,Se),pe(ie,r,null),P(r,Q),pe(G,r,null),P(r,K),pe(te,r,null),P(a,Ie),P(a,Me),P(Me,he),pe(ye,he,null),P(Me,xe),P(Me,Re),P(Re,Ge),P(Ge,Qe),P(Qe,Ve),P(Ve,$e),P($e,At),P(Ve,Tt),P(Ve,rt),P(rt,Lt),P(Ve,wt),P(Ve,et),P(et,Ot),P(Qe,St),pe(Ze,Qe,null),P(Ge,Ct),pe(Xe,Ge,null),lt=!0,It||(Bt=ee(Ve,"click",s[32]),It=!0)},p(L,re){const tt={};!l&&re[0]&1&&(l=!0,tt.boardTheme=L[0].board.boardTheme,oe(()=>l=!1)),!o&&re[0]&1&&(o=!0,tt.mouseEvents=L[0].board.mouseEvents,oe(()=>o=!1)),!u&&re[0]&1&&(u=!0,tt.notation=L[0].board.notation,oe(()=>u=!1)),!c&&re[0]&1&&(c=!0,tt.flipped=L[0].board.flipped,oe(()=>c=!1)),!d&&re[0]&1&&(d=!0,tt.resizible=L[0].board.resizible,oe(()=>d=!1)),n.$set(tt);const ft={};!v&&re[0]&1&&(v=!0,ft.enabled=L[0].movable.enabled,oe(()=>v=!1)),!E&&re[0]&1&&(E=!0,ft.color=L[0].movable.color,oe(()=>E=!1)),w.$set(ft);const we={};!g&&re[0]&1&&(g=!0,we.enabled=L[0].draggable.enabled,oe(()=>g=!1)),!h&&re[0]&1&&(h=!0,we.ghostPiece=L[0].draggable.ghostPiece.enabled,oe(()=>h=!1)),!M&&re[0]&1&&(M=!0,we.transition=L[0].draggable.transition.enabled,oe(()=>M=!1)),!C&&re[0]&1&&(C=!0,we.duration=L[0].draggable.transition.settings.duration,oe(()=>C=!1)),!y&&re[0]&1&&(y=!0,we.easing=L[0].draggable.transition.settings.easing,oe(()=>y=!1)),k.$set(we);const vt={};!A&&re[0]&1&&(A=!0,vt.enabled=L[0].selectable.enabled,oe(()=>A=!1)),D.$set(vt);const _t={};!X&&re[0]&1&&(X=!0,_t.allowCastling=L[0].legal.settings.allowCastling,oe(()=>X=!1)),!fe&&re[0]&1&&(fe=!0,_t.allowEnPassant=L[0].legal.settings.allowEnPassant,oe(()=>fe=!1)),!Ae&&re[0]&1&&(Ae=!0,_t.enabled=L[0].legal.enabled,oe(()=>Ae=!1)),U.$set(_t);const Pt={};!x&&re[0]&1&&(x=!0,Pt.enabled=L[0].highlight.enabled,oe(()=>x=!1)),!B&&re[0]&1&&(B=!0,Pt.settings=L[0].highlight.settings,oe(()=>B=!1)),ie.$set(Pt);const st={};!ce&&re[0]&1&&(ce=!0,st.enabled=L[0].drawTools.enabled,oe(()=>ce=!1)),!ae&&re[0]&1&&(ae=!0,st.knightLShape=L[0].drawTools.settings.knightLShape,oe(()=>ae=!1)),!b&&re[0]&1&&(b=!0,st.onlyChessMove=L[0].drawTools.settings.onlyChessMove,oe(()=>b=!1)),G.$set(st);const ct={};!Ee&&re[0]&1&&(Ee=!0,ct.enabled=L[0].sounds.enabled,oe(()=>Ee=!1)),!de&&re[0]&1&&(de=!0,ct.settings=L[0].sounds.settings,oe(()=>de=!1)),te.$set(ct);const dt={};ye.$set(dt),(!lt||re[0]&2&&Mt!==(Mt=L[1]?"text-yellow-600":""))&&p($e,"class",Mt),(!lt||re[0]&2&&mt!==(mt=L[1]?"":"text-yellow-600"))&&p(et,"class",mt);const Ft={};re[0]&16&&(Ft.copyText=L[4]),Ze.$set(Ft);const Nt={};re[0]&16&&(Nt.source=L[4]),Xe.$set(Nt)},i(L){lt||(V(n.$$.fragment,L),V(w.$$.fragment,L),V(k.$$.fragment,L),V(D.$$.fragment,L),V(U.$$.fragment,L),V(ie.$$.fragment,L),V(G.$$.fragment,L),V(te.$$.fragment,L),V(ye.$$.fragment,L),V(Ze.$$.fragment,L),V(Xe.$$.fragment,L),lt=!0)},o(L){Y(n.$$.fragment,L),Y(w.$$.fragment,L),Y(k.$$.fragment,L),Y(D.$$.fragment,L),Y(U.$$.fragment,L),Y(ie.$$.fragment,L),Y(G.$$.fragment,L),Y(te.$$.fragment,L),Y(ye.$$.fragment,L),Y(Ze.$$.fragment,L),Y(Xe.$$.fragment,L),lt=!1},d(L){S(e),L&&S(t),L&&S(i),me(n),me(w),me(k),me(D),me(U),me(ie),me(G),me(te),s[31](null),me(ye),me(Ze),me(Xe),It=!1,Bt()}}}function sl(s,e,t){const i=new Di,a={movable:se.BOTH,legal:!0,callbacks:{afterMove:b=>i.move({from:b.substring(0,2),to:b.substring(2,4),...b.length>4&&{promotion:b[4]}}),getLegalMoves:()=>i.moves({verbose:!0}).map(b=>b.from+b.to+(b.promotion??"")),getWhiteToMove:()=>i.turn()==="w",getInCheck:()=>i.inCheck(),getLastMove:()=>{const b=i.history({verbose:!0}).pop();return b?b.from+b.to+(b.promotion??""):""}},board:{resizible:!0}},r=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				(<Move[]>chess.moves({ verbose: true })).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop() as Move;
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`,n=`{
			afterMove: (move) =>
				chess.move({
					from: move.substring(0, 2),
					to: move.substring(2, 4),
					...(move.length > 4 && { promotion: move[4] })
				}),
			getLegalMoves: () =>
				chess.moves({ verbose: true }).map((move) => {
					return move.from + move.to + (move.promotion ?? '');
				}),
			getWhiteToMove: () => chess.turn() === 'w',
			getInCheck: () => chess.inCheck(),
			getLastMove: () => {
				const lastMove = chess.history({ verbose: true }).pop();
				if (!lastMove) return '';
				return lastMove.from + lastMove.to + (lastMove.promotion ?? '');
			}
		}`;let l,o=new Xn(a),u=!1,c=!0,d="";$t(()=>{var b;t(3,u=!0),t(0,o=(b=l.getState)==null?void 0:b.call(l))});const f=(b,K)=>{var ye;const te=b.getConfig(),Ee=`
	import type { ChessboardConfig } from '@powchess/chessboard/boardConfig';`;u&&((ye=l.setState)==null||ye.call(l,b));let de=JSON.stringify(te,(xe,Re)=>xe==="callbacks"?"{functions}":Re,4);de=de.replace(/"([^"]+)":/g,"$1:").replaceAll(`
`,`
	`).replace('"{functions}"',K?r:n);const Ie=`
	import { Color } from '@powchess/chessboard/enums';`;K&&(de=de.replaceAll(`movable: ${se.WHITE}`,"movable: Color.WHITE").replaceAll(`movable: ${se.BLACK}`,"movable: Color.BLACK").replaceAll(`movable: ${se.BOTH}`,"movable: Color.BOTH"));function Me(){return de.includes("movable: Color.WHITE")||de.includes("movable: Color.BLACK")||de.includes("movable: Color.BOTH")}let he=`<script${K?' lang="ts"':""}>
	import Chessboard from '@powchess/chessboard';${K?Ee:""}${Me()&&K?Ie:""}${o.legal.enabled?K?`
	import { Chess, type Move } from 'chess.js';`:`
	import { Chess } from 'chess.js';`:""}${o.legal.enabled?`

	const chess = new Chess();`:""}

	const config${K?": ChessboardConfig":""} = ${de};
<\/script>

<Chessboard {config} className="rounded-md" />`;return K||(he=he.replaceAll("Color.WHITE",`${se.WHITE}`).replaceAll("Color.BLACK",`${se.BLACK}`).replaceAll("Color.BOTH",`${se.BOTH}`)),he};function w(b){s.$$.not_equal(o.board.boardTheme,b)&&(o.board.boardTheme=b,t(0,o))}function v(b){s.$$.not_equal(o.board.mouseEvents,b)&&(o.board.mouseEvents=b,t(0,o))}function E(b){s.$$.not_equal(o.board.notation,b)&&(o.board.notation=b,t(0,o))}function _(b){s.$$.not_equal(o.board.flipped,b)&&(o.board.flipped=b,t(0,o))}function k(b){s.$$.not_equal(o.board.resizible,b)&&(o.board.resizible=b,t(0,o))}function g(b){s.$$.not_equal(o.movable.enabled,b)&&(o.movable.enabled=b,t(0,o))}function h(b){s.$$.not_equal(o.movable.color,b)&&(o.movable.color=b,t(0,o))}function M(b){s.$$.not_equal(o.draggable.enabled,b)&&(o.draggable.enabled=b,t(0,o))}function C(b){s.$$.not_equal(o.draggable.ghostPiece.enabled,b)&&(o.draggable.ghostPiece.enabled=b,t(0,o))}function y(b){s.$$.not_equal(o.draggable.transition.enabled,b)&&(o.draggable.transition.enabled=b,t(0,o))}function q(b){s.$$.not_equal(o.draggable.transition.settings.duration,b)&&(o.draggable.transition.settings.duration=b,t(0,o))}function D(b){s.$$.not_equal(o.draggable.transition.settings.easing,b)&&(o.draggable.transition.settings.easing=b,t(0,o))}function A(b){s.$$.not_equal(o.selectable.enabled,b)&&(o.selectable.enabled=b,t(0,o))}function O(b){s.$$.not_equal(o.legal.settings.allowCastling,b)&&(o.legal.settings.allowCastling=b,t(0,o))}function U(b){s.$$.not_equal(o.legal.settings.allowEnPassant,b)&&(o.legal.settings.allowEnPassant=b,t(0,o))}function X(b){s.$$.not_equal(o.legal.enabled,b)&&(o.legal.enabled=b,t(0,o))}const fe=()=>{var b;o.legal.enabled||(i.reset(),u&&((b=l.setFEN)==null||b.call(l,o.board.startFen,!0,!1)))};function Ae(b){s.$$.not_equal(o.highlight.enabled,b)&&(o.highlight.enabled=b,t(0,o))}function Se(b){s.$$.not_equal(o.highlight.settings,b)&&(o.highlight.settings=b,t(0,o))}function ie(b){s.$$.not_equal(o.drawTools.enabled,b)&&(o.drawTools.enabled=b,t(0,o))}function x(b){s.$$.not_equal(o.drawTools.settings.knightLShape,b)&&(o.drawTools.settings.knightLShape=b,t(0,o))}function B(b){s.$$.not_equal(o.drawTools.settings.onlyChessMove,b)&&(o.drawTools.settings.onlyChessMove=b,t(0,o))}function Q(b){s.$$.not_equal(o.sounds.enabled,b)&&(o.sounds.enabled=b,t(0,o))}function G(b){s.$$.not_equal(o.sounds.settings,b)&&(o.sounds.settings=b,t(0,o))}function ce(b){J[b?"unshift":"push"](()=>{l=b,t(2,l)})}const ae=()=>{t(1,c=!c)};return s.$$.update=()=>{s.$$.dirty[0]&3&&t(4,d=f(o,c))},[o,c,l,u,d,i,a,w,v,E,_,k,g,h,M,C,y,q,D,A,O,U,X,fe,Ae,Se,ie,x,B,Q,G,ce,ae]}class ol extends Te{constructor(e){super(),Le(this,e,sl,tl,Oe,{},null,[-1,-1])}}export{ol as default};
